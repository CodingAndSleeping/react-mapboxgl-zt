!(function(){var _w=Object.defineProperty,gw=Object.defineProperties;var vw=Object.getOwnPropertyDescriptors;var D1=Object.getOwnPropertySymbols;var Db=Object.prototype.hasOwnProperty,kb=Object.prototype.propertyIsEnumerable;var Av=Math.pow,Ux=(H,Q,i)=>Q in H?_w(H,Q,{enumerable:!0,configurable:!0,writable:!0,value:i}):H[Q]=i,E_=(H,Q)=>{for(var i in Q||(Q={}))Db.call(Q,i)&&Ux(H,i,Q[i]);if(D1)for(var i of D1(Q))kb.call(Q,i)&&Ux(H,i,Q[i]);return H},k1=(H,Q)=>gw(H,vw(Q));var Zy=(H,Q)=>{var i={};for(var E in H)Db.call(H,E)&&Q.indexOf(E)<0&&(i[E]=H[E]);if(H!=null&&D1)for(var E of D1(H))Q.indexOf(E)<0&&kb.call(H,E)&&(i[E]=H[E]);return i};var Ra=(H,Q,i)=>Ux(H,typeof Q!="symbol"?Q+"":Q,i);(function(){var __webpack_modules__={12581:function(H,Q,i){"use strict";i.d(Q,{A:function(){return K},H:function(){return E}});function E(de,he){var J=he&&he.cache?he.cache:B,ae=he&&he.serializer?he.serializer:te,se=he&&he.strategy?he.strategy:$;return se(de,{cache:J,serializer:ae})}function M(de){return de==null||typeof de=="number"||typeof de=="boolean"}function C(de,he,J,ae){var se=M(ae)?ae:J(ae),Ee=he.get(se);return typeof Ee=="undefined"&&(Ee=de.call(this,ae),he.set(se,Ee)),Ee}function n(de,he,J){var ae=Array.prototype.slice.call(arguments,3),se=J(ae),Ee=he.get(se);return typeof Ee=="undefined"&&(Ee=de.apply(this,ae),he.set(se,Ee)),Ee}function j(de,he,J,ae,se){return J.bind(he,de,ae,se)}function $(de,he){var J=de.length===1?C:n;return j(de,this,J,he.cache.create(),he.serializer)}function U(de,he){return j(de,this,n,he.cache.create(),he.serializer)}function Y(de,he){return j(de,this,C,he.cache.create(),he.serializer)}var te=function(){return JSON.stringify(arguments)},X=function(){function de(){this.cache=Object.create(null)}return de.prototype.get=function(he){return this.cache[he]},de.prototype.set=function(he,J){this.cache[he]=J},de}(),B={create:function(){return new X}},K={variadic:U,monadic:Y}},81799:function(H,Q,i){"use strict";i.d(Q,{wD:function(){return C},VG:function(){return $},rp:function(){return Y},Ii:function(){return J},O4:function(){return j},uf:function(){return U},Wh:function(){return he},Jo:function(){return B},yx:function(){return K},Wi:function(){return X},HI:function(){return de},pe:function(){return te},Qc:function(){return mr}});var E=i(15767),M;(function(Ie){Ie[Ie.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",Ie[Ie.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",Ie[Ie.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",Ie[Ie.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",Ie[Ie.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",Ie[Ie.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",Ie[Ie.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",Ie[Ie.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",Ie[Ie.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",Ie[Ie.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",Ie[Ie.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",Ie[Ie.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",Ie[Ie.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",Ie[Ie.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",Ie[Ie.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",Ie[Ie.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",Ie[Ie.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",Ie[Ie.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",Ie[Ie.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",Ie[Ie.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",Ie[Ie.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",Ie[Ie.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",Ie[Ie.INVALID_TAG=23]="INVALID_TAG",Ie[Ie.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",Ie[Ie.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",Ie[Ie.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(M||(M={}));var C;(function(Ie){Ie[Ie.literal=0]="literal",Ie[Ie.argument=1]="argument",Ie[Ie.number=2]="number",Ie[Ie.date=3]="date",Ie[Ie.time=4]="time",Ie[Ie.select=5]="select",Ie[Ie.plural=6]="plural",Ie[Ie.pound=7]="pound",Ie[Ie.tag=8]="tag"})(C||(C={}));var n;(function(Ie){Ie[Ie.number=0]="number",Ie[Ie.dateTime=1]="dateTime"})(n||(n={}));function j(Ie){return Ie.type===C.literal}function $(Ie){return Ie.type===C.argument}function U(Ie){return Ie.type===C.number}function Y(Ie){return Ie.type===C.date}function te(Ie){return Ie.type===C.time}function X(Ie){return Ie.type===C.select}function B(Ie){return Ie.type===C.plural}function K(Ie){return Ie.type===C.pound}function de(Ie){return Ie.type===C.tag}function he(Ie){return!!(Ie&&typeof Ie=="object"&&Ie.type===n.number)}function J(Ie){return!!(Ie&&typeof Ie=="object"&&Ie.type===n.dateTime)}function ae(Ie){return{type:C.literal,value:Ie}}function se(Ie,Ot){return{type:C.number,value:Ie,style:Ot}}var Ee=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Le=/[\t-\r \x85\u200E\u200F\u2028\u2029]/,ke=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function ye(Ie){var Ot={};return Ie.replace(ke,function(St){var at=St.length;switch(St[0]){case"G":Ot.era=at===4?"long":at===5?"narrow":"short";break;case"y":Ot.year=at===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":Ot.month=["numeric","2-digit","short","long","narrow"][at-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":Ot.day=["numeric","2-digit"][at-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":Ot.weekday=at===4?"long":at===5?"narrow":"short";break;case"e":if(at<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");Ot.weekday=["short","long","narrow","short"][at-4];break;case"c":if(at<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");Ot.weekday=["short","long","narrow","short"][at-4];break;case"a":Ot.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":Ot.hourCycle="h12",Ot.hour=["numeric","2-digit"][at-1];break;case"H":Ot.hourCycle="h23",Ot.hour=["numeric","2-digit"][at-1];break;case"K":Ot.hourCycle="h11",Ot.hour=["numeric","2-digit"][at-1];break;case"k":Ot.hourCycle="h24",Ot.hour=["numeric","2-digit"][at-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":Ot.minute=["numeric","2-digit"][at-1];break;case"s":Ot.second=["numeric","2-digit"][at-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":Ot.timeZoneName=at<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),Ot}var Se=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function be(Ie){if(Ie.length===0)throw new Error("Number skeleton cannot be empty");for(var Ot=Ie.split(Se).filter(function(Tr){return Tr.length>0}),St=[],at=0,Xe=Ot;at<Xe.length;at++){var Nt=Xe[at],Nn=Nt.split("/");if(Nn.length===0)throw new Error("Invalid number skeleton");for(var Jn=Nn[0],rr=Nn.slice(1),Br=0,Hr=rr;Br<Hr.length;Br++){var zr=Hr[Br];if(zr.length===0)throw new Error("Invalid number skeleton")}St.push({stem:Jn,options:rr})}return St}function Ue(Ie){return Ie.replace(/^(.*?)-/,"")}var qe=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,je=/^(@+)?(\+|#+)?[rs]?$/g,nt=/(\*)(0+)|(#+)(0+)|(0+)/g,Ct=/^(0+)$/;function ft(Ie){var Ot={};return Ie[Ie.length-1]==="r"?Ot.roundingPriority="morePrecision":Ie[Ie.length-1]==="s"&&(Ot.roundingPriority="lessPrecision"),Ie.replace(je,function(St,at,Xe){return typeof Xe!="string"?(Ot.minimumSignificantDigits=at.length,Ot.maximumSignificantDigits=at.length):Xe==="+"?Ot.minimumSignificantDigits=at.length:at[0]==="#"?Ot.maximumSignificantDigits=at.length:(Ot.minimumSignificantDigits=at.length,Ot.maximumSignificantDigits=at.length+(typeof Xe=="string"?Xe.length:0)),""}),Ot}function Et(Ie){switch(Ie){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function yt(Ie){var Ot;if(Ie[0]==="E"&&Ie[1]==="E"?(Ot={notation:"engineering"},Ie=Ie.slice(2)):Ie[0]==="E"&&(Ot={notation:"scientific"},Ie=Ie.slice(1)),Ot){var St=Ie.slice(0,2);if(St==="+!"?(Ot.signDisplay="always",Ie=Ie.slice(2)):St==="+?"&&(Ot.signDisplay="exceptZero",Ie=Ie.slice(2)),!Ct.test(Ie))throw new Error("Malformed concise eng/scientific notation");Ot.minimumIntegerDigits=Ie.length}return Ot}function _t(Ie){var Ot={},St=Et(Ie);return St||Ot}function He(Ie){for(var Ot={},St=0,at=Ie;St<at.length;St++){var Xe=at[St];switch(Xe.stem){case"percent":case"%":Ot.style="percent";continue;case"%x100":Ot.style="percent",Ot.scale=100;continue;case"currency":Ot.style="currency",Ot.currency=Xe.options[0];continue;case"group-off":case",_":Ot.useGrouping=!1;continue;case"precision-integer":case".":Ot.maximumFractionDigits=0;continue;case"measure-unit":case"unit":Ot.style="unit",Ot.unit=Ue(Xe.options[0]);continue;case"compact-short":case"K":Ot.notation="compact",Ot.compactDisplay="short";continue;case"compact-long":case"KK":Ot.notation="compact",Ot.compactDisplay="long";continue;case"scientific":Ot=(0,E.pi)((0,E.pi)((0,E.pi)({},Ot),{notation:"scientific"}),Xe.options.reduce(function(rr,Br){return(0,E.pi)((0,E.pi)({},rr),_t(Br))},{}));continue;case"engineering":Ot=(0,E.pi)((0,E.pi)((0,E.pi)({},Ot),{notation:"engineering"}),Xe.options.reduce(function(rr,Br){return(0,E.pi)((0,E.pi)({},rr),_t(Br))},{}));continue;case"notation-simple":Ot.notation="standard";continue;case"unit-width-narrow":Ot.currencyDisplay="narrowSymbol",Ot.unitDisplay="narrow";continue;case"unit-width-short":Ot.currencyDisplay="code",Ot.unitDisplay="short";continue;case"unit-width-full-name":Ot.currencyDisplay="name",Ot.unitDisplay="long";continue;case"unit-width-iso-code":Ot.currencyDisplay="symbol";continue;case"scale":Ot.scale=parseFloat(Xe.options[0]);continue;case"rounding-mode-floor":Ot.roundingMode="floor";continue;case"rounding-mode-ceiling":Ot.roundingMode="ceil";continue;case"rounding-mode-down":Ot.roundingMode="trunc";continue;case"rounding-mode-up":Ot.roundingMode="expand";continue;case"rounding-mode-half-even":Ot.roundingMode="halfEven";continue;case"rounding-mode-half-down":Ot.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":Ot.roundingMode="halfExpand";continue;case"integer-width":if(Xe.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");Xe.options[0].replace(nt,function(rr,Br,Hr,zr,Tr,fn){if(Br)Ot.minimumIntegerDigits=Hr.length;else{if(zr&&Tr)throw new Error("We currently do not support maximum integer digits");if(fn)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Ct.test(Xe.stem)){Ot.minimumIntegerDigits=Xe.stem.length;continue}if(qe.test(Xe.stem)){if(Xe.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");Xe.stem.replace(qe,function(rr,Br,Hr,zr,Tr,fn){return Hr==="*"?Ot.minimumFractionDigits=Br.length:zr&&zr[0]==="#"?Ot.maximumFractionDigits=zr.length:Tr&&fn?(Ot.minimumFractionDigits=Tr.length,Ot.maximumFractionDigits=Tr.length+fn.length):(Ot.minimumFractionDigits=Br.length,Ot.maximumFractionDigits=Br.length),""});var Nt=Xe.options[0];Nt==="w"?Ot=(0,E.pi)((0,E.pi)({},Ot),{trailingZeroDisplay:"stripIfInteger"}):Nt&&(Ot=(0,E.pi)((0,E.pi)({},Ot),ft(Nt)));continue}if(je.test(Xe.stem)){Ot=(0,E.pi)((0,E.pi)({},Ot),ft(Xe.stem));continue}var Nn=Et(Xe.stem);Nn&&(Ot=(0,E.pi)((0,E.pi)({},Ot),Nn));var Jn=yt(Xe.stem);Jn&&(Ot=(0,E.pi)((0,E.pi)({},Ot),Jn))}return Ot}var bt={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Tt(Ie,Ot){for(var St="",at=0;at<Ie.length;at++){var Xe=Ie.charAt(at);if(Xe==="j"){for(var Nt=0;at+1<Ie.length&&Ie.charAt(at+1)===Xe;)Nt++,at++;var Nn=1+(Nt&1),Jn=Nt<2?1:3+(Nt>>1),rr="a",Br=st(Ot);for((Br=="H"||Br=="k")&&(Jn=0);Jn-- >0;)St+=rr;for(;Nn-- >0;)St=Br+St}else Xe==="J"?St+="H":St+=Xe}return St}function st(Ie){var Ot=Ie.hourCycle;if(Ot===void 0&&Ie.hourCycles&&Ie.hourCycles.length&&(Ot=Ie.hourCycles[0]),Ot)switch(Ot){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var St=Ie.language,at;St!=="root"&&(at=Ie.maximize().region);var Xe=bt[at||""]||bt[St||""]||bt["".concat(St,"-001")]||bt["001"];return Xe[0]}var Qe,mt=new RegExp("^".concat(Ee.source,"*")),Ht=new RegExp("".concat(Ee.source,"*$"));function vt(Ie,Ot){return{start:Ie,end:Ot}}var ue=!!String.prototype.startsWith&&"_a".startsWith("a",1),lt=!!String.fromCodePoint,le=!!Object.fromEntries,Je=!!String.prototype.codePointAt,we=!!String.prototype.trimStart,Pn=!!String.prototype.trimEnd,Mt=!!Number.isSafeInteger,or=Mt?Number.isSafeInteger:function(Ie){return typeof Ie=="number"&&isFinite(Ie)&&Math.floor(Ie)===Ie&&Math.abs(Ie)<=9007199254740991},wr=!0;try{var Dr=Me("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");wr=((Qe=Dr.exec("a"))===null||Qe===void 0?void 0:Qe[0])==="a"}catch(Ie){wr=!1}var lr=ue?function(Ot,St,at){return Ot.startsWith(St,at)}:function(Ot,St,at){return Ot.slice(at,at+St.length)===St},Pe=lt?String.fromCodePoint:function(){for(var Ot=[],St=0;St<arguments.length;St++)Ot[St]=arguments[St];for(var at="",Xe=Ot.length,Nt=0,Nn;Xe>Nt;){if(Nn=Ot[Nt++],Nn>1114111)throw RangeError(Nn+" is not a valid code point");at+=Nn<65536?String.fromCharCode(Nn):String.fromCharCode(((Nn-=65536)>>10)+55296,Nn%1024+56320)}return at},ut=le?Object.fromEntries:function(Ot){for(var St={},at=0,Xe=Ot;at<Xe.length;at++){var Nt=Xe[at],Nn=Nt[0],Jn=Nt[1];St[Nn]=Jn}return St},Ve=Je?function(Ot,St){return Ot.codePointAt(St)}:function(Ot,St){var at=Ot.length;if(!(St<0||St>=at)){var Xe=Ot.charCodeAt(St),Nt;return Xe<55296||Xe>56319||St+1===at||(Nt=Ot.charCodeAt(St+1))<56320||Nt>57343?Xe:(Xe-55296<<10)+(Nt-56320)+65536}},gt=we?function(Ot){return Ot.trimStart()}:function(Ot){return Ot.replace(mt,"")},Gt=Pn?function(Ot){return Ot.trimEnd()}:function(Ot){return Ot.replace(Ht,"")};function Me(Ie,Ot){return new RegExp(Ie,Ot)}var At;if(wr){var Bt=Me("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");At=function(Ot,St){var at;Bt.lastIndex=St;var Xe=Bt.exec(Ot);return(at=Xe[1])!==null&&at!==void 0?at:""}}else At=function(Ot,St){for(var at=[];;){var Xe=Ve(Ot,St);if(Xe===void 0||gn(Xe)||ar(Xe))break;at.push(Xe),St+=Xe>=65536?2:1}return Pe.apply(void 0,at)};var Sn=function(){function Ie(Ot,St){St===void 0&&(St={}),this.message=Ot,this.position={offset:0,line:1,column:1},this.ignoreTag=!!St.ignoreTag,this.locale=St.locale,this.requiresOtherClause=!!St.requiresOtherClause,this.shouldParseSkeletons=!!St.shouldParseSkeletons}return Ie.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},Ie.prototype.parseMessage=function(Ot,St,at){for(var Xe=[];!this.isEOF();){var Nt=this.char();if(Nt===123){var Nn=this.parseArgument(Ot,at);if(Nn.err)return Nn;Xe.push(Nn.val)}else{if(Nt===125&&Ot>0)break;if(Nt===35&&(St==="plural"||St==="selectordinal")){var Jn=this.clonePosition();this.bump(),Xe.push({type:C.pound,location:vt(Jn,this.clonePosition())})}else if(Nt===60&&!this.ignoreTag&&this.peek()===47){if(at)break;return this.error(M.UNMATCHED_CLOSING_TAG,vt(this.clonePosition(),this.clonePosition()))}else if(Nt===60&&!this.ignoreTag&&Lt(this.peek()||0)){var Nn=this.parseTag(Ot,St);if(Nn.err)return Nn;Xe.push(Nn.val)}else{var Nn=this.parseLiteral(Ot,St);if(Nn.err)return Nn;Xe.push(Nn.val)}}}return{val:Xe,err:null}},Ie.prototype.parseTag=function(Ot,St){var at=this.clonePosition();this.bump();var Xe=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:C.literal,value:"<".concat(Xe,"/>"),location:vt(at,this.clonePosition())},err:null};if(this.bumpIf(">")){var Nt=this.parseMessage(Ot+1,St,!0);if(Nt.err)return Nt;var Nn=Nt.val,Jn=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Lt(this.char()))return this.error(M.INVALID_TAG,vt(Jn,this.clonePosition()));var rr=this.clonePosition(),Br=this.parseTagName();return Xe!==Br?this.error(M.UNMATCHED_CLOSING_TAG,vt(rr,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:C.tag,value:Xe,children:Nn,location:vt(at,this.clonePosition())},err:null}:this.error(M.INVALID_TAG,vt(Jn,this.clonePosition())))}else return this.error(M.UNCLOSED_TAG,vt(at,this.clonePosition()))}else return this.error(M.INVALID_TAG,vt(at,this.clonePosition()))},Ie.prototype.parseTagName=function(){var Ot=this.offset();for(this.bump();!this.isEOF()&&en(this.char());)this.bump();return this.message.slice(Ot,this.offset())},Ie.prototype.parseLiteral=function(Ot,St){for(var at=this.clonePosition(),Xe="";;){var Nt=this.tryParseQuote(St);if(Nt){Xe+=Nt;continue}var Nn=this.tryParseUnquoted(Ot,St);if(Nn){Xe+=Nn;continue}var Jn=this.tryParseLeftAngleBracket();if(Jn){Xe+=Jn;continue}break}var rr=vt(at,this.clonePosition());return{val:{type:C.literal,value:Xe,location:rr},err:null}},Ie.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Bn(this.peek()||0))?(this.bump(),"<"):null},Ie.prototype.tryParseQuote=function(Ot){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(Ot==="plural"||Ot==="selectordinal")break;return null;default:return null}this.bump();var St=[this.char()];for(this.bump();!this.isEOF();){var at=this.char();if(at===39)if(this.peek()===39)St.push(39),this.bump();else{this.bump();break}else St.push(at);this.bump()}return Pe.apply(void 0,St)},Ie.prototype.tryParseUnquoted=function(Ot,St){if(this.isEOF())return null;var at=this.char();return at===60||at===123||at===35&&(St==="plural"||St==="selectordinal")||at===125&&Ot>0?null:(this.bump(),Pe(at))},Ie.prototype.parseArgument=function(Ot,St){var at=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(M.EXPECT_ARGUMENT_CLOSING_BRACE,vt(at,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(M.EMPTY_ARGUMENT,vt(at,this.clonePosition()));var Xe=this.parseIdentifierIfPossible().value;if(!Xe)return this.error(M.MALFORMED_ARGUMENT,vt(at,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(M.EXPECT_ARGUMENT_CLOSING_BRACE,vt(at,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:C.argument,value:Xe,location:vt(at,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(M.EXPECT_ARGUMENT_CLOSING_BRACE,vt(at,this.clonePosition())):this.parseArgumentOptions(Ot,St,Xe,at);default:return this.error(M.MALFORMED_ARGUMENT,vt(at,this.clonePosition()))}},Ie.prototype.parseIdentifierIfPossible=function(){var Ot=this.clonePosition(),St=this.offset(),at=At(this.message,St),Xe=St+at.length;this.bumpTo(Xe);var Nt=this.clonePosition(),Nn=vt(Ot,Nt);return{value:at,location:Nn}},Ie.prototype.parseArgumentOptions=function(Ot,St,at,Xe){var Nt,Nn=this.clonePosition(),Jn=this.parseIdentifierIfPossible().value,rr=this.clonePosition();switch(Jn){case"":return this.error(M.EXPECT_ARGUMENT_TYPE,vt(Nn,rr));case"number":case"date":case"time":{this.bumpSpace();var Br=null;if(this.bumpIf(",")){this.bumpSpace();var Hr=this.clonePosition(),zr=this.parseSimpleArgStyleIfPossible();if(zr.err)return zr;var Tr=Gt(zr.val);if(Tr.length===0)return this.error(M.EXPECT_ARGUMENT_STYLE,vt(this.clonePosition(),this.clonePosition()));var fn=vt(Hr,this.clonePosition());Br={style:Tr,styleLocation:fn}}var Ne=this.tryParseArgumentClose(Xe);if(Ne.err)return Ne;var Ge=vt(Xe,this.clonePosition());if(Br&&lr(Br==null?void 0:Br.style,"::",0)){var ot=gt(Br.style.slice(2));if(Jn==="number"){var zr=this.parseNumberSkeletonFromString(ot,Br.styleLocation);return zr.err?zr:{val:{type:C.number,value:at,location:Ge,style:zr.val},err:null}}else{if(ot.length===0)return this.error(M.EXPECT_DATE_TIME_SKELETON,Ge);var Dt=ot;this.locale&&(Dt=Tt(ot,this.locale));var Tr={type:n.dateTime,pattern:Dt,location:Br.styleLocation,parsedOptions:this.shouldParseSkeletons?ye(Dt):{}},jt=Jn==="date"?C.date:C.time;return{val:{type:jt,value:at,location:Ge,style:Tr},err:null}}}return{val:{type:Jn==="number"?C.number:Jn==="date"?C.date:C.time,value:at,location:Ge,style:(Nt=Br==null?void 0:Br.style)!==null&&Nt!==void 0?Nt:null},err:null}}case"plural":case"selectordinal":case"select":{var sn=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(M.EXPECT_SELECT_ARGUMENT_OPTIONS,vt(sn,(0,E.pi)({},sn)));this.bumpSpace();var xn=this.parseIdentifierIfPossible(),rn=0;if(Jn!=="select"&&xn.value==="offset"){if(!this.bumpIf(":"))return this.error(M.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,vt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var zr=this.tryParseDecimalInteger(M.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,M.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(zr.err)return zr;this.bumpSpace(),xn=this.parseIdentifierIfPossible(),rn=zr.val}var Fn=this.tryParsePluralOrSelectOptions(Ot,Jn,St,xn);if(Fn.err)return Fn;var Ne=this.tryParseArgumentClose(Xe);if(Ne.err)return Ne;var Un=vt(Xe,this.clonePosition());return Jn==="select"?{val:{type:C.select,value:at,options:ut(Fn.val),location:Un},err:null}:{val:{type:C.plural,value:at,options:ut(Fn.val),offset:rn,pluralType:Jn==="plural"?"cardinal":"ordinal",location:Un},err:null}}default:return this.error(M.INVALID_ARGUMENT_TYPE,vt(Nn,rr))}},Ie.prototype.tryParseArgumentClose=function(Ot){return this.isEOF()||this.char()!==125?this.error(M.EXPECT_ARGUMENT_CLOSING_BRACE,vt(Ot,this.clonePosition())):(this.bump(),{val:!0,err:null})},Ie.prototype.parseSimpleArgStyleIfPossible=function(){for(var Ot=0,St=this.clonePosition();!this.isEOF();){var at=this.char();switch(at){case 39:{this.bump();var Xe=this.clonePosition();if(!this.bumpUntil("'"))return this.error(M.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,vt(Xe,this.clonePosition()));this.bump();break}case 123:{Ot+=1,this.bump();break}case 125:{if(Ot>0)Ot-=1;else return{val:this.message.slice(St.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(St.offset,this.offset()),err:null}},Ie.prototype.parseNumberSkeletonFromString=function(Ot,St){var at=[];try{at=be(Ot)}catch(Xe){return this.error(M.INVALID_NUMBER_SKELETON,St)}return{val:{type:n.number,tokens:at,location:St,parsedOptions:this.shouldParseSkeletons?He(at):{}},err:null}},Ie.prototype.tryParsePluralOrSelectOptions=function(Ot,St,at,Xe){for(var Nt,Nn=!1,Jn=[],rr=new Set,Br=Xe.value,Hr=Xe.location;;){if(Br.length===0){var zr=this.clonePosition();if(St!=="select"&&this.bumpIf("=")){var Tr=this.tryParseDecimalInteger(M.EXPECT_PLURAL_ARGUMENT_SELECTOR,M.INVALID_PLURAL_ARGUMENT_SELECTOR);if(Tr.err)return Tr;Hr=vt(zr,this.clonePosition()),Br=this.message.slice(zr.offset,this.offset())}else break}if(rr.has(Br))return this.error(St==="select"?M.DUPLICATE_SELECT_ARGUMENT_SELECTOR:M.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,Hr);Br==="other"&&(Nn=!0),this.bumpSpace();var fn=this.clonePosition();if(!this.bumpIf("{"))return this.error(St==="select"?M.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:M.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,vt(this.clonePosition(),this.clonePosition()));var Ne=this.parseMessage(Ot+1,St,at);if(Ne.err)return Ne;var Ge=this.tryParseArgumentClose(fn);if(Ge.err)return Ge;Jn.push([Br,{value:Ne.val,location:vt(fn,this.clonePosition())}]),rr.add(Br),this.bumpSpace(),Nt=this.parseIdentifierIfPossible(),Br=Nt.value,Hr=Nt.location}return Jn.length===0?this.error(St==="select"?M.EXPECT_SELECT_ARGUMENT_SELECTOR:M.EXPECT_PLURAL_ARGUMENT_SELECTOR,vt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!Nn?this.error(M.MISSING_OTHER_CLAUSE,vt(this.clonePosition(),this.clonePosition())):{val:Jn,err:null}},Ie.prototype.tryParseDecimalInteger=function(Ot,St){var at=1,Xe=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(at=-1);for(var Nt=!1,Nn=0;!this.isEOF();){var Jn=this.char();if(Jn>=48&&Jn<=57)Nt=!0,Nn=Nn*10+(Jn-48),this.bump();else break}var rr=vt(Xe,this.clonePosition());return Nt?(Nn*=at,or(Nn)?{val:Nn,err:null}:this.error(St,rr)):this.error(Ot,rr)},Ie.prototype.offset=function(){return this.position.offset},Ie.prototype.isEOF=function(){return this.offset()===this.message.length},Ie.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},Ie.prototype.char=function(){var Ot=this.position.offset;if(Ot>=this.message.length)throw Error("out of bound");var St=Ve(this.message,Ot);if(St===void 0)throw Error("Offset ".concat(Ot," is at invalid UTF-16 code unit boundary"));return St},Ie.prototype.error=function(Ot,St){return{val:null,err:{kind:Ot,message:this.message,location:St}}},Ie.prototype.bump=function(){if(!this.isEOF()){var Ot=this.char();Ot===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=Ot<65536?1:2)}},Ie.prototype.bumpIf=function(Ot){if(lr(this.message,Ot,this.offset())){for(var St=0;St<Ot.length;St++)this.bump();return!0}return!1},Ie.prototype.bumpUntil=function(Ot){var St=this.offset(),at=this.message.indexOf(Ot,St);return at>=0?(this.bumpTo(at),!0):(this.bumpTo(this.message.length),!1)},Ie.prototype.bumpTo=function(Ot){if(this.offset()>Ot)throw Error("targetOffset ".concat(Ot," must be greater than or equal to the current offset ").concat(this.offset()));for(Ot=Math.min(Ot,this.message.length);;){var St=this.offset();if(St===Ot)break;if(St>Ot)throw Error("targetOffset ".concat(Ot," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},Ie.prototype.bumpSpace=function(){for(;!this.isEOF()&&gn(this.char());)this.bump()},Ie.prototype.peek=function(){if(this.isEOF())return null;var Ot=this.char(),St=this.offset(),at=this.message.charCodeAt(St+(Ot>=65536?2:1));return at!=null?at:null},Ie}();function Lt(Ie){return Ie>=97&&Ie<=122||Ie>=65&&Ie<=90}function Bn(Ie){return Lt(Ie)||Ie===47}function en(Ie){return Ie===45||Ie===46||Ie>=48&&Ie<=57||Ie===95||Ie>=97&&Ie<=122||Ie>=65&&Ie<=90||Ie==183||Ie>=192&&Ie<=214||Ie>=216&&Ie<=246||Ie>=248&&Ie<=893||Ie>=895&&Ie<=8191||Ie>=8204&&Ie<=8205||Ie>=8255&&Ie<=8256||Ie>=8304&&Ie<=8591||Ie>=11264&&Ie<=12271||Ie>=12289&&Ie<=55295||Ie>=63744&&Ie<=64975||Ie>=65008&&Ie<=65533||Ie>=65536&&Ie<=983039}function gn(Ie){return Ie>=9&&Ie<=13||Ie===32||Ie===133||Ie>=8206&&Ie<=8207||Ie===8232||Ie===8233}function ar(Ie){return Ie>=33&&Ie<=35||Ie===36||Ie>=37&&Ie<=39||Ie===40||Ie===41||Ie===42||Ie===43||Ie===44||Ie===45||Ie>=46&&Ie<=47||Ie>=58&&Ie<=59||Ie>=60&&Ie<=62||Ie>=63&&Ie<=64||Ie===91||Ie===92||Ie===93||Ie===94||Ie===96||Ie===123||Ie===124||Ie===125||Ie===126||Ie===161||Ie>=162&&Ie<=165||Ie===166||Ie===167||Ie===169||Ie===171||Ie===172||Ie===174||Ie===176||Ie===177||Ie===182||Ie===187||Ie===191||Ie===215||Ie===247||Ie>=8208&&Ie<=8213||Ie>=8214&&Ie<=8215||Ie===8216||Ie===8217||Ie===8218||Ie>=8219&&Ie<=8220||Ie===8221||Ie===8222||Ie===8223||Ie>=8224&&Ie<=8231||Ie>=8240&&Ie<=8248||Ie===8249||Ie===8250||Ie>=8251&&Ie<=8254||Ie>=8257&&Ie<=8259||Ie===8260||Ie===8261||Ie===8262||Ie>=8263&&Ie<=8273||Ie===8274||Ie===8275||Ie>=8277&&Ie<=8286||Ie>=8592&&Ie<=8596||Ie>=8597&&Ie<=8601||Ie>=8602&&Ie<=8603||Ie>=8604&&Ie<=8607||Ie===8608||Ie>=8609&&Ie<=8610||Ie===8611||Ie>=8612&&Ie<=8613||Ie===8614||Ie>=8615&&Ie<=8621||Ie===8622||Ie>=8623&&Ie<=8653||Ie>=8654&&Ie<=8655||Ie>=8656&&Ie<=8657||Ie===8658||Ie===8659||Ie===8660||Ie>=8661&&Ie<=8691||Ie>=8692&&Ie<=8959||Ie>=8960&&Ie<=8967||Ie===8968||Ie===8969||Ie===8970||Ie===8971||Ie>=8972&&Ie<=8991||Ie>=8992&&Ie<=8993||Ie>=8994&&Ie<=9e3||Ie===9001||Ie===9002||Ie>=9003&&Ie<=9083||Ie===9084||Ie>=9085&&Ie<=9114||Ie>=9115&&Ie<=9139||Ie>=9140&&Ie<=9179||Ie>=9180&&Ie<=9185||Ie>=9186&&Ie<=9254||Ie>=9255&&Ie<=9279||Ie>=9280&&Ie<=9290||Ie>=9291&&Ie<=9311||Ie>=9472&&Ie<=9654||Ie===9655||Ie>=9656&&Ie<=9664||Ie===9665||Ie>=9666&&Ie<=9719||Ie>=9720&&Ie<=9727||Ie>=9728&&Ie<=9838||Ie===9839||Ie>=9840&&Ie<=10087||Ie===10088||Ie===10089||Ie===10090||Ie===10091||Ie===10092||Ie===10093||Ie===10094||Ie===10095||Ie===10096||Ie===10097||Ie===10098||Ie===10099||Ie===10100||Ie===10101||Ie>=10132&&Ie<=10175||Ie>=10176&&Ie<=10180||Ie===10181||Ie===10182||Ie>=10183&&Ie<=10213||Ie===10214||Ie===10215||Ie===10216||Ie===10217||Ie===10218||Ie===10219||Ie===10220||Ie===10221||Ie===10222||Ie===10223||Ie>=10224&&Ie<=10239||Ie>=10240&&Ie<=10495||Ie>=10496&&Ie<=10626||Ie===10627||Ie===10628||Ie===10629||Ie===10630||Ie===10631||Ie===10632||Ie===10633||Ie===10634||Ie===10635||Ie===10636||Ie===10637||Ie===10638||Ie===10639||Ie===10640||Ie===10641||Ie===10642||Ie===10643||Ie===10644||Ie===10645||Ie===10646||Ie===10647||Ie===10648||Ie>=10649&&Ie<=10711||Ie===10712||Ie===10713||Ie===10714||Ie===10715||Ie>=10716&&Ie<=10747||Ie===10748||Ie===10749||Ie>=10750&&Ie<=11007||Ie>=11008&&Ie<=11055||Ie>=11056&&Ie<=11076||Ie>=11077&&Ie<=11078||Ie>=11079&&Ie<=11084||Ie>=11085&&Ie<=11123||Ie>=11124&&Ie<=11125||Ie>=11126&&Ie<=11157||Ie===11158||Ie>=11159&&Ie<=11263||Ie>=11776&&Ie<=11777||Ie===11778||Ie===11779||Ie===11780||Ie===11781||Ie>=11782&&Ie<=11784||Ie===11785||Ie===11786||Ie===11787||Ie===11788||Ie===11789||Ie>=11790&&Ie<=11798||Ie===11799||Ie>=11800&&Ie<=11801||Ie===11802||Ie===11803||Ie===11804||Ie===11805||Ie>=11806&&Ie<=11807||Ie===11808||Ie===11809||Ie===11810||Ie===11811||Ie===11812||Ie===11813||Ie===11814||Ie===11815||Ie===11816||Ie===11817||Ie>=11818&&Ie<=11822||Ie===11823||Ie>=11824&&Ie<=11833||Ie>=11834&&Ie<=11835||Ie>=11836&&Ie<=11839||Ie===11840||Ie===11841||Ie===11842||Ie>=11843&&Ie<=11855||Ie>=11856&&Ie<=11857||Ie===11858||Ie>=11859&&Ie<=11903||Ie>=12289&&Ie<=12291||Ie===12296||Ie===12297||Ie===12298||Ie===12299||Ie===12300||Ie===12301||Ie===12302||Ie===12303||Ie===12304||Ie===12305||Ie>=12306&&Ie<=12307||Ie===12308||Ie===12309||Ie===12310||Ie===12311||Ie===12312||Ie===12313||Ie===12314||Ie===12315||Ie===12316||Ie===12317||Ie>=12318&&Ie<=12319||Ie===12320||Ie===12336||Ie===64830||Ie===64831||Ie>=65093&&Ie<=65094}function Sr(Ie){return Array.isArray(Ie)?__spreadArray([],Ie.map(Sr),!0):Ie!==null&&typeof Ie=="object"?Object.keys(Ie).reduce(function(Ot,St){return Ot[St]=Sr(Ie[St]),Ot},{}):Ie}function In(Ie,Ot,St){var at=Sr(Ot),Xe=at.options;return at.options=Object.keys(Xe).reduce(function(Nt,Nn){var Jn=mn(__spreadArray(__spreadArray(__spreadArray([],Ie.slice(0,St),!0),Xe[Nn].value,!0),Ie.slice(St+1),!0));return Nt[Nn]={value:Jn},Nt},{}),at}function Gn(Ie){return isPluralElement(Ie)||isSelectElement(Ie)}function hn(Ie){return!!Ie.find(function(Ot){return Gn(Ot)?!0:isTagElement(Ot)?hn(Ot.children):!1})}function mn(Ie){for(var Ot=0;Ot<Ie.length;Ot++){var St=Ie[Ot];if(Gn(St))return[In(Ie,St,Ot)];if(isTagElement(St)&&hn([St]))throw new Error("Cannot hoist plural/select within a tag element. Please put the tag element inside each plural/select option")}return Ie}function cn(Ie,Ot){Ot===void 0&&(Ot=new Map),Ie.forEach(function(St){if(isArgumentElement(St)||isDateElement(St)||isTimeElement(St)||isNumberElement(St)){if(St.value in Ot&&Ot.get(St.value)!==St.type)throw new Error("Variable ".concat(St.value," has conflicting types"));Ot.set(St.value,St.type)}(isPluralElement(St)||isSelectElement(St))&&(Ot.set(St.value,St.type),Object.keys(St.options).forEach(function(at){cn(St.options[at].value,Ot)})),isTagElement(St)&&(Ot.set(St.value,St.type),cn(St.children,Ot))})}function Ln(Ie,Ot){var St=new Map,at=new Map;return cn(Ie,St),cn(Ot,at),St.size!==at.size?{success:!1,error:new Error("Different number of variables: [".concat(Array.from(St.keys()).join(", "),"] vs [").concat(Array.from(at.keys()).join(", "),"]"))}:Array.from(St.entries()).reduce(function(Xe,Nt){var Nn=Nt[0],Jn=Nt[1];if(!Xe.success)return Xe;var rr=at.get(Nn);return rr==null?{success:!1,error:new Error("Missing variable ".concat(Nn," in message"))}:rr!==Jn?{success:!1,error:new Error("Variable ".concat(Nn," has conflicting types: ").concat(TYPE[Jn]," vs ").concat(TYPE[rr]))}:Xe},{success:!0})}function Er(Ie){Ie.forEach(function(Ot){if(delete Ot.location,X(Ot)||B(Ot))for(var St in Ot.options)delete Ot.options[St].location,Er(Ot.options[St].value);else U(Ot)&&he(Ot.style)||(Y(Ot)||te(Ot))&&J(Ot.style)?delete Ot.style.location:de(Ot)&&Er(Ot.children)})}function mr(Ie,Ot){Ot===void 0&&(Ot={}),Ot=(0,E.pi)({shouldParseSkeletons:!0,requiresOtherClause:!0},Ot);var St=new Sn(Ie,Ot).parse();if(St.err){var at=SyntaxError(M[St.err.kind]);throw at.location=St.err.location,at.originalMessage=St.err.message,at}return Ot!=null&&Ot.captureLocation||Er(St.val),St.val}var Jr=null},23905:function(H,Q,i){"use strict";i.d(Q,{$6:function(){return te},OV:function(){return j},Qe:function(){return U},X9:function(){return Y},gb:function(){return $},wI:function(){return n}});var E=i(15767),M;(function(X){X.FORMAT_ERROR="FORMAT_ERROR",X.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",X.INVALID_CONFIG="INVALID_CONFIG",X.MISSING_DATA="MISSING_DATA",X.MISSING_TRANSLATION="MISSING_TRANSLATION"})(M||(M={}));var C=function(X){(0,E.ZT)(B,X);function B(K,de,he){var J=this,ae=he?he instanceof Error?he:new Error(String(he)):void 0;return J=X.call(this,"[@formatjs/intl Error ".concat(K,"] ").concat(de,`
`).concat(ae?`
`.concat(ae.message,`
`).concat(ae.stack):""))||this,J.code=K,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(J,B),J}return B}(Error),n=function(X){(0,E.ZT)(B,X);function B(K,de){return X.call(this,M.UNSUPPORTED_FORMATTER,K,de)||this}return B}(C),j=function(X){(0,E.ZT)(B,X);function B(K,de){return X.call(this,M.INVALID_CONFIG,K,de)||this}return B}(C),$=function(X){(0,E.ZT)(B,X);function B(K,de){return X.call(this,M.MISSING_DATA,K,de)||this}return B}(C),U=function(X){(0,E.ZT)(B,X);function B(K,de,he){var J=X.call(this,M.FORMAT_ERROR,"".concat(K,`
Locale: `).concat(de,`
`),he)||this;return J.locale=de,J}return B}(C),Y=function(X){(0,E.ZT)(B,X);function B(K,de,he,J){var ae=X.call(this,"".concat(K,`
MessageID: `).concat(he==null?void 0:he.id,`
Default Message: `).concat(he==null?void 0:he.defaultMessage,`
Description: `).concat(he==null?void 0:he.description,`
`),de,J)||this;return ae.descriptor=he,ae.locale=de,ae}return B}(U),te=function(X){(0,E.ZT)(B,X);function B(K,de){var he=X.call(this,M.MISSING_TRANSLATION,'Missing message: "'.concat(K.id,'" for locale "').concat(de,'", using ').concat(K.defaultMessage?"default message (".concat(typeof K.defaultMessage=="string"?K.defaultMessage:K.defaultMessage.map(function(J){var ae;return(ae=J.value)!==null&&ae!==void 0?ae:JSON.stringify(J)}).join(),")"):"id"," as fallback."))||this;return he.descriptor=K,he}return B}(C)},38757:function(H,Q,i){"use strict";i.d(Q,{L6:function(){return $},Sn:function(){return X},TB:function(){return de},Z0:function(){return te},ax:function(){return K},kG:function(){return j}});var E=i(15767),M=i(12581),C=i(43659),n=i(23905);function j(he,J,ae){if(ae===void 0&&(ae=Error),!he)throw new ae(J)}function $(he,J,ae){return ae===void 0&&(ae={}),J.reduce(function(se,Ee){return Ee in he?se[Ee]=he[Ee]:Ee in ae&&(se[Ee]=ae[Ee]),se},{})}var U=function(he){},Y=function(he){},te={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:U,onWarn:Y};function X(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function B(he){return{create:function(){return{get:function(J){return he[J]},set:function(J,ae){he[J]=ae}}}}}function K(he){he===void 0&&(he=X());var J=Intl.RelativeTimeFormat,ae=Intl.ListFormat,se=Intl.DisplayNames,Ee=(0,M.H)(function(){for(var ye,Se=[],be=0;be<arguments.length;be++)Se[be]=arguments[be];return new((ye=Intl.DateTimeFormat).bind.apply(ye,(0,E.ev)([void 0],Se,!1)))},{cache:B(he.dateTime),strategy:M.A.variadic}),Le=(0,M.H)(function(){for(var ye,Se=[],be=0;be<arguments.length;be++)Se[be]=arguments[be];return new((ye=Intl.NumberFormat).bind.apply(ye,(0,E.ev)([void 0],Se,!1)))},{cache:B(he.number),strategy:M.A.variadic}),ke=(0,M.H)(function(){for(var ye,Se=[],be=0;be<arguments.length;be++)Se[be]=arguments[be];return new((ye=Intl.PluralRules).bind.apply(ye,(0,E.ev)([void 0],Se,!1)))},{cache:B(he.pluralRules),strategy:M.A.variadic});return{getDateTimeFormat:Ee,getNumberFormat:Le,getMessageFormat:(0,M.H)(function(ye,Se,be,Ue){return new C.C(ye,Se,be,(0,E.pi)({formatters:{getNumberFormat:Le,getDateTimeFormat:Ee,getPluralRules:ke}},Ue||{}))},{cache:B(he.message),strategy:M.A.variadic}),getRelativeTimeFormat:(0,M.H)(function(){for(var ye=[],Se=0;Se<arguments.length;Se++)ye[Se]=arguments[Se];return new(J.bind.apply(J,(0,E.ev)([void 0],ye,!1)))},{cache:B(he.relativeTime),strategy:M.A.variadic}),getPluralRules:ke,getListFormat:(0,M.H)(function(){for(var ye=[],Se=0;Se<arguments.length;Se++)ye[Se]=arguments[Se];return new(ae.bind.apply(ae,(0,E.ev)([void 0],ye,!1)))},{cache:B(he.list),strategy:M.A.variadic}),getDisplayNames:(0,M.H)(function(){for(var ye=[],Se=0;Se<arguments.length;Se++)ye[Se]=arguments[Se];return new(se.bind.apply(se,(0,E.ev)([void 0],ye,!1)))},{cache:B(he.displayNames),strategy:M.A.variadic})}}function de(he,J,ae,se){var Ee=he&&he[J],Le;if(Ee&&(Le=Ee[ae]),Le)return Le;se(new n.wI("No ".concat(J," format named: ").concat(ae)))}},12398:function(H,Q,i){var E=i(1129);H.exports.geometry=M,H.exports.ring=n;function M($){var U=0,Y;switch($.type){case"Polygon":return C($.coordinates);case"MultiPolygon":for(Y=0;Y<$.coordinates.length;Y++)U+=C($.coordinates[Y]);return U;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Y=0;Y<$.geometries.length;Y++)U+=M($.geometries[Y]);return U}}function C($){var U=0;if($&&$.length>0){U+=Math.abs(n($[0]));for(var Y=1;Y<$.length;Y++)U-=Math.abs(n($[Y]))}return U}function n($){var U,Y,te,X,B,K,de,he=0,J=$.length;if(J>2){for(de=0;de<J;de++)de===J-2?(X=J-2,B=J-1,K=0):de===J-1?(X=J-1,B=0,K=1):(X=de,B=de+1,K=de+2),U=$[X],Y=$[B],te=$[K],he+=(j(te[0])-j(U[0]))*Math.sin(j(Y[1]));he=he*E.RADIUS*E.RADIUS/2}return he}function j($){return $*Math.PI/180}},74444:function(H){H.exports=i;var Q={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function i(E){if(!E||!E.type)return null;var M=Q[E.type];if(!M)return null;if(M==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:E}]};if(M==="feature")return{type:"FeatureCollection",features:[E]};if(M==="featurecollection")return E}},54869:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return Ue}});var E=i(89692),M=i(75271),C=i(30967),n=i(18415),j=i(4449),$=i(42684),U=M.createContext(null),Y=U,te=i(46865),X=i(92076),B=[];function K(qe,je){var nt=M.useState(function(){if(!(0,n.Z)())return null;var Ht=document.createElement("div");return Ht}),Ct=(0,E.Z)(nt,1),ft=Ct[0],Et=M.useRef(!1),yt=M.useContext(Y),_t=M.useState(B),He=(0,E.Z)(_t,2),bt=He[0],Tt=He[1],st=yt||(Et.current?void 0:function(Ht){Tt(function(vt){var ue=[Ht].concat((0,te.Z)(vt));return ue})});function Qe(){ft.parentElement||document.body.appendChild(ft),Et.current=!0}function mt(){var Ht;(Ht=ft.parentElement)===null||Ht===void 0||Ht.removeChild(ft),Et.current=!1}return(0,X.Z)(function(){return qe?yt?yt(Qe):Qe():mt(),mt},[qe]),(0,X.Z)(function(){bt.length&&(bt.forEach(function(Ht){return Ht()}),Tt(B))},[bt]),[ft,st]}var de=i(18263),he=i(90242);function J(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var ae="rc-util-locker-".concat(Date.now()),se=0;function Ee(qe){var je=!!qe,nt=M.useState(function(){return se+=1,"".concat(ae,"_").concat(se)}),Ct=(0,E.Z)(nt,1),ft=Ct[0];(0,X.Z)(function(){if(je){var Et=(0,he.o)(document.body).width,yt=J();(0,de.hq)(`
html body {
  overflow-y: hidden;
  `.concat(yt?"width: calc(100% - ".concat(Et,"px);"):"",`
}`),ft)}else(0,de.jL)(ft);return function(){(0,de.jL)(ft)}},[je,ft])}var Le=!1;function ke(qe){return typeof qe=="boolean"&&(Le=qe),Le}var ye=function(je){return je===!1?!1:!(0,n.Z)()||!je?null:typeof je=="string"?document.querySelector(je):typeof je=="function"?je():je},Se=M.forwardRef(function(qe,je){var nt=qe.open,Ct=qe.autoLock,ft=qe.getContainer,Et=qe.debug,yt=qe.autoDestroy,_t=yt===void 0?!0:yt,He=qe.children,bt=M.useState(nt),Tt=(0,E.Z)(bt,2),st=Tt[0],Qe=Tt[1],mt=st||nt;M.useEffect(function(){(_t||nt)&&Qe(nt)},[nt,_t]);var Ht=M.useState(function(){return ye(ft)}),vt=(0,E.Z)(Ht,2),ue=vt[0],lt=vt[1];M.useEffect(function(){var ut=ye(ft);lt(ut!=null?ut:null)});var le=K(mt&&!ue,Et),Je=(0,E.Z)(le,2),we=Je[0],Pn=Je[1],Mt=ue!=null?ue:we;Ee(Ct&&nt&&(0,n.Z)()&&(Mt===we||Mt===document.body));var or=null;if(He&&(0,$.Yr)(He)&&je){var wr=He;or=wr.ref}var Dr=(0,$.x1)(or,je);if(!mt||!(0,n.Z)()||ue===void 0)return null;var lr=Mt===!1||ke(),Pe=He;return je&&(Pe=M.cloneElement(He,{ref:Dr})),M.createElement(Y.Provider,{value:Pn},lr?Pe:(0,C.createPortal)(Pe,Mt))}),be=Se,Ue=be},83190:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return lr}});var E=i(54153),M=i(89692),C=i(58190),n=i(54869),j=i(82187),$=i.n(j),U=i(40493),Y=i(4525),te=i(16167),X=i(59373),B=i(73188),K=i(92076),de=i(21611),he=i(75271),J=i(23022),ae=i(62803),se=i(42684);function Ee(Pe){var ut=Pe.prefixCls,Ve=Pe.align,gt=Pe.arrow,Gt=Pe.arrowPos,Me=gt||{},At=Me.className,Bt=Me.content,Sn=Gt.x,Lt=Sn===void 0?0:Sn,Bn=Gt.y,en=Bn===void 0?0:Bn,gn=he.useRef();if(!Ve||!Ve.points)return null;var ar={position:"absolute"};if(Ve.autoArrow!==!1){var Sr=Ve.points[0],In=Ve.points[1],Gn=Sr[0],hn=Sr[1],mn=In[0],cn=In[1];Gn===mn||!["t","b"].includes(Gn)?ar.top=en:Gn==="t"?ar.top=0:ar.bottom=0,hn===cn||!["l","r"].includes(hn)?ar.left=Lt:hn==="l"?ar.left=0:ar.right=0}return he.createElement("div",{ref:gn,className:$()("".concat(ut,"-arrow"),At),style:ar},Bt)}function Le(Pe){var ut=Pe.prefixCls,Ve=Pe.open,gt=Pe.zIndex,Gt=Pe.mask,Me=Pe.motion;return Gt?he.createElement(ae.ZP,(0,J.Z)({},Me,{motionAppear:!0,visible:Ve,removeOnLeave:!0}),function(At){var Bt=At.className;return he.createElement("div",{style:{zIndex:gt},className:$()("".concat(ut,"-mask"),Bt)})}):null}var ke=he.memo(function(Pe){var ut=Pe.children;return ut},function(Pe,ut){return ut.cache}),ye=ke,Se=he.forwardRef(function(Pe,ut){var Ve=Pe.popup,gt=Pe.className,Gt=Pe.prefixCls,Me=Pe.style,At=Pe.target,Bt=Pe.onVisibleChanged,Sn=Pe.open,Lt=Pe.keepDom,Bn=Pe.fresh,en=Pe.onClick,gn=Pe.mask,ar=Pe.arrow,Sr=Pe.arrowPos,In=Pe.align,Gn=Pe.motion,hn=Pe.maskMotion,mn=Pe.forceRender,cn=Pe.getPopupContainer,Ln=Pe.autoDestroy,Er=Pe.portal,mr=Pe.zIndex,Jr=Pe.onMouseEnter,Ie=Pe.onMouseLeave,Ot=Pe.onPointerEnter,St=Pe.onPointerDownCapture,at=Pe.ready,Xe=Pe.offsetX,Nt=Pe.offsetY,Nn=Pe.offsetR,Jn=Pe.offsetB,rr=Pe.onAlign,Br=Pe.onPrepare,Hr=Pe.stretch,zr=Pe.targetWidth,Tr=Pe.targetHeight,fn=typeof Ve=="function"?Ve():Ve,Ne=Sn||Lt,Ge=(cn==null?void 0:cn.length)>0,ot=he.useState(!cn||!Ge),Dt=(0,M.Z)(ot,2),jt=Dt[0],sn=Dt[1];if((0,K.Z)(function(){!jt&&Ge&&At&&sn(!0)},[jt,Ge,At]),!jt)return null;var xn="auto",rn={left:"-1000vw",top:"-1000vh",right:xn,bottom:xn};if(at||!Sn){var Fn,Un=In.points,jn=In.dynamicInset||((Fn=In._experimental)===null||Fn===void 0?void 0:Fn.dynamicInset),_n=jn&&Un[0][1]==="r",Xn=jn&&Un[0][0]==="b";_n?(rn.right=Nn,rn.left=xn):(rn.left=Xe,rn.right=xn),Xn?(rn.bottom=Jn,rn.top=xn):(rn.top=Nt,rn.bottom=xn)}var er={};return Hr&&(Hr.includes("height")&&Tr?er.height=Tr:Hr.includes("minHeight")&&Tr&&(er.minHeight=Tr),Hr.includes("width")&&zr?er.width=zr:Hr.includes("minWidth")&&zr&&(er.minWidth=zr)),Sn||(er.pointerEvents="none"),he.createElement(Er,{open:mn||Ne,getContainer:cn&&function(){return cn(At)},autoDestroy:Ln},he.createElement(Le,{prefixCls:Gt,open:Sn,zIndex:mr,mask:gn,motion:hn}),he.createElement(U.Z,{onResize:rr,disabled:!Sn},function(Yr){return he.createElement(ae.ZP,(0,J.Z)({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:mn,leavedClassName:"".concat(Gt,"-hidden")},Gn,{onAppearPrepare:Br,onEnterPrepare:Br,visible:Sn,onVisibleChanged:function(Gr){var ci;Gn==null||(ci=Gn.onVisibleChanged)===null||ci===void 0||ci.call(Gn,Gr),Bt(Gr)}}),function(qr,Gr){var ci=qr.className,Ci=qr.style,Ki=$()(Gt,ci,gt);return he.createElement("div",{ref:(0,se.sQ)(Yr,ut,Gr),className:Ki,style:(0,E.Z)((0,E.Z)((0,E.Z)((0,E.Z)({"--arrow-x":"".concat(Sr.x||0,"px"),"--arrow-y":"".concat(Sr.y||0,"px")},rn),er),Ci),{},{boxSizing:"border-box",zIndex:mr},Me),onMouseEnter:Jr,onMouseLeave:Ie,onPointerEnter:Ot,onClick:en,onPointerDownCapture:St},ar&&he.createElement(Ee,{prefixCls:Gt,arrow:ar,arrowPos:Sr,align:In}),he.createElement(ye,{cache:!Sn&&!Bn},fn))})}))}),be=Se,Ue=he.forwardRef(function(Pe,ut){var Ve=Pe.children,gt=Pe.getTriggerDOMNode,Gt=(0,se.Yr)(Ve),Me=he.useCallback(function(Bt){(0,se.mH)(ut,gt?gt(Bt):Bt)},[gt]),At=(0,se.x1)(Me,(0,se.C4)(Ve));return Gt?he.cloneElement(Ve,{ref:At}):Ve}),qe=Ue,je=he.createContext(null),nt=je;function Ct(Pe){return Pe?Array.isArray(Pe)?Pe:[Pe]:[]}function ft(Pe,ut,Ve,gt){return he.useMemo(function(){var Gt=Ct(Ve!=null?Ve:ut),Me=Ct(gt!=null?gt:ut),At=new Set(Gt),Bt=new Set(Me);return Pe&&(At.has("hover")&&(At.delete("hover"),At.add("click")),Bt.has("hover")&&(Bt.delete("hover"),Bt.add("click"))),[At,Bt]},[Pe,ut,Ve,gt])}var Et=i(60900);function yt(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ve=arguments.length>2?arguments[2]:void 0;return Ve?Pe[0]===ut[0]:Pe[0]===ut[0]&&Pe[1]===ut[1]}function _t(Pe,ut,Ve,gt){for(var Gt=Ve.points,Me=Object.keys(Pe),At=0;At<Me.length;At+=1){var Bt,Sn=Me[At];if(yt((Bt=Pe[Sn])===null||Bt===void 0?void 0:Bt.points,Gt,gt))return"".concat(ut,"-placement-").concat(Sn)}return""}function He(Pe,ut,Ve,gt){return ut||(Ve?{motionName:"".concat(Pe,"-").concat(Ve)}:gt?{motionName:gt}:null)}function bt(Pe){return Pe.ownerDocument.defaultView}function Tt(Pe){for(var ut=[],Ve=Pe==null?void 0:Pe.parentElement,gt=["hidden","scroll","clip","auto"];Ve;){var Gt=bt(Ve).getComputedStyle(Ve),Me=Gt.overflowX,At=Gt.overflowY,Bt=Gt.overflow;[Me,At,Bt].some(function(Sn){return gt.includes(Sn)})&&ut.push(Ve),Ve=Ve.parentElement}return ut}function st(Pe){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(Pe)?ut:Pe}function Qe(Pe){return st(parseFloat(Pe),0)}function mt(Pe,ut){var Ve=(0,E.Z)({},Pe);return(ut||[]).forEach(function(gt){if(!(gt instanceof HTMLBodyElement||gt instanceof HTMLHtmlElement)){var Gt=bt(gt).getComputedStyle(gt),Me=Gt.overflow,At=Gt.overflowClipMargin,Bt=Gt.borderTopWidth,Sn=Gt.borderBottomWidth,Lt=Gt.borderLeftWidth,Bn=Gt.borderRightWidth,en=gt.getBoundingClientRect(),gn=gt.offsetHeight,ar=gt.clientHeight,Sr=gt.offsetWidth,In=gt.clientWidth,Gn=Qe(Bt),hn=Qe(Sn),mn=Qe(Lt),cn=Qe(Bn),Ln=st(Math.round(en.width/Sr*1e3)/1e3),Er=st(Math.round(en.height/gn*1e3)/1e3),mr=(Sr-In-mn-cn)*Ln,Jr=(gn-ar-Gn-hn)*Er,Ie=Gn*Er,Ot=hn*Er,St=mn*Ln,at=cn*Ln,Xe=0,Nt=0;if(Me==="clip"){var Nn=Qe(At);Xe=Nn*Ln,Nt=Nn*Er}var Jn=en.x+St-Xe,rr=en.y+Ie-Nt,Br=Jn+en.width+2*Xe-St-at-mr,Hr=rr+en.height+2*Nt-Ie-Ot-Jr;Ve.left=Math.max(Ve.left,Jn),Ve.top=Math.max(Ve.top,rr),Ve.right=Math.min(Ve.right,Br),Ve.bottom=Math.min(Ve.bottom,Hr)}}),Ve}function Ht(Pe){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ve="".concat(ut),gt=Ve.match(/^(.*)\%$/);return gt?Pe*(parseFloat(gt[1])/100):parseFloat(Ve)}function vt(Pe,ut){var Ve=ut||[],gt=(0,M.Z)(Ve,2),Gt=gt[0],Me=gt[1];return[Ht(Pe.width,Gt),Ht(Pe.height,Me)]}function ue(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[Pe[0],Pe[1]]}function lt(Pe,ut){var Ve=ut[0],gt=ut[1],Gt,Me;return Ve==="t"?Me=Pe.y:Ve==="b"?Me=Pe.y+Pe.height:Me=Pe.y+Pe.height/2,gt==="l"?Gt=Pe.x:gt==="r"?Gt=Pe.x+Pe.width:Gt=Pe.x+Pe.width/2,{x:Gt,y:Me}}function le(Pe,ut){var Ve={t:"b",b:"t",l:"r",r:"l"};return Pe.map(function(gt,Gt){return Gt===ut?Ve[gt]||"c":gt}).join("")}function Je(Pe,ut,Ve,gt,Gt,Me,At){var Bt=he.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:Gt[gt]||{}}),Sn=(0,M.Z)(Bt,2),Lt=Sn[0],Bn=Sn[1],en=he.useRef(0),gn=he.useMemo(function(){return ut?Tt(ut):[]},[ut]),ar=he.useRef({}),Sr=function(){ar.current={}};Pe||Sr();var In=(0,X.Z)(function(){if(ut&&Ve&&Pe){let wu=function(Cl,Al){var eu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yo,Eu=ot.x+Cl,Nc=ot.y+Al,Mc=Eu+_n,fd=Nc+jn,Ad=Math.max(Eu,eu.left),jo=Math.max(Nc,eu.top),aa=Math.min(Mc,eu.right),go=Math.min(fd,eu.bottom);return Math.max(0,(aa-Ad)*(go-jo))},Qs=function(){ts=ot.y+No,il=ts+jn,Jo=ot.x+ko,Jl=Jo+_n};var mn,cn,Ln,Er,mr=ut,Jr=mr.ownerDocument,Ie=bt(mr),Ot=Ie.getComputedStyle(mr),St=Ot.width,at=Ot.height,Xe=Ot.position,Nt=mr.style.left,Nn=mr.style.top,Jn=mr.style.right,rr=mr.style.bottom,Br=mr.style.overflow,Hr=(0,E.Z)((0,E.Z)({},Gt[gt]),Me),zr=Jr.createElement("div");(mn=mr.parentElement)===null||mn===void 0||mn.appendChild(zr),zr.style.left="".concat(mr.offsetLeft,"px"),zr.style.top="".concat(mr.offsetTop,"px"),zr.style.position=Xe,zr.style.height="".concat(mr.offsetHeight,"px"),zr.style.width="".concat(mr.offsetWidth,"px"),mr.style.left="0",mr.style.top="0",mr.style.right="auto",mr.style.bottom="auto",mr.style.overflow="hidden";var Tr;if(Array.isArray(Ve))Tr={x:Ve[0],y:Ve[1],width:0,height:0};else{var fn,Ne,Ge=Ve.getBoundingClientRect();Ge.x=(fn=Ge.x)!==null&&fn!==void 0?fn:Ge.left,Ge.y=(Ne=Ge.y)!==null&&Ne!==void 0?Ne:Ge.top,Tr={x:Ge.x,y:Ge.y,width:Ge.width,height:Ge.height}}var ot=mr.getBoundingClientRect();ot.x=(cn=ot.x)!==null&&cn!==void 0?cn:ot.left,ot.y=(Ln=ot.y)!==null&&Ln!==void 0?Ln:ot.top;var Dt=Jr.documentElement,jt=Dt.clientWidth,sn=Dt.clientHeight,xn=Dt.scrollWidth,rn=Dt.scrollHeight,Fn=Dt.scrollTop,Un=Dt.scrollLeft,jn=ot.height,_n=ot.width,Xn=Tr.height,er=Tr.width,Yr={left:0,top:0,right:jt,bottom:sn},qr={left:-Un,top:-Fn,right:xn-Un,bottom:rn-Fn},Gr=Hr.htmlRegion,ci="visible",Ci="visibleFirst";Gr!=="scroll"&&Gr!==Ci&&(Gr=ci);var Ki=Gr===Ci,Bi=mt(qr,gn),Di=mt(Yr,gn),yo=Gr===ci?Di:Bi,po=Ki?Di:yo;mr.style.left="auto",mr.style.top="auto",mr.style.right="0",mr.style.bottom="0";var Vo=mr.getBoundingClientRect();mr.style.left=Nt,mr.style.top=Nn,mr.style.right=Jn,mr.style.bottom=rr,mr.style.overflow=Br,(Er=mr.parentElement)===null||Er===void 0||Er.removeChild(zr);var Xo=st(Math.round(_n/parseFloat(St)*1e3)/1e3),$o=st(Math.round(jn/parseFloat(at)*1e3)/1e3);if(Xo===0||$o===0||(0,Y.Sh)(Ve)&&!(0,Et.Z)(Ve))return;var Aa=Hr.offset,qa=Hr.targetOffset,Oo=vt(ot,Aa),Do=(0,M.Z)(Oo,2),oa=Do[0],Fa=Do[1],xs=vt(Tr,qa),tl=(0,M.Z)(xs,2),Na=tl[0],ro=tl[1];Tr.x-=Na,Tr.y-=ro;var xa=Hr.points||[],Ba=(0,M.Z)(xa,2),ma=Ba[0],ja=Ba[1],Sa=ue(ja),us=ue(ma),ua=lt(Tr,Sa),ao=lt(ot,us),Ma=(0,E.Z)({},Hr),ko=ua.x-ao.x+oa,No=ua.y-ao.y+Fa,Uo=wu(ko,No),Hs=wu(ko,No,Di),$i=lt(Tr,["t","l"]),es=lt(ot,["t","l"]),Ll=lt(Tr,["b","r"]),hl=lt(ot,["b","r"]),ho=Hr.overflow||{},Ul=ho.adjustX,Ml=ho.adjustY,Ri=ho.shiftX,Wo=ho.shiftY,fo=function(Al){return typeof Al=="boolean"?Al:Al>=0},ts,il,Jo,Jl;Qs();var zs=fo(Ml),Cs=us[0]===Sa[0];if(zs&&us[0]==="t"&&(il>po.bottom||ar.current.bt)){var oo=No;Cs?oo-=jn-Xn:oo=$i.y-hl.y-Fa;var qi=wu(ko,oo),Ta=wu(ko,oo,Di);qi>Uo||qi===Uo&&(!Ki||Ta>=Hs)?(ar.current.bt=!0,No=oo,Fa=-Fa,Ma.points=[le(us,0),le(Sa,0)]):ar.current.bt=!1}if(zs&&us[0]==="b"&&(ts<po.top||ar.current.tb)){var la=No;Cs?la+=jn-Xn:la=Ll.y-es.y-Fa;var Os=wu(ko,la),Vl=wu(ko,la,Di);Os>Uo||Os===Uo&&(!Ki||Vl>=Hs)?(ar.current.tb=!0,No=la,Fa=-Fa,Ma.points=[le(us,0),le(Sa,0)]):ar.current.tb=!1}var ns=fo(Ul),yu=us[1]===Sa[1];if(ns&&us[1]==="l"&&(Jl>po.right||ar.current.rl)){var Fs=ko;yu?Fs-=_n-er:Fs=$i.x-hl.x-oa;var bs=wu(Fs,No),cs=wu(Fs,No,Di);bs>Uo||bs===Uo&&(!Ki||cs>=Hs)?(ar.current.rl=!0,ko=Fs,oa=-oa,Ma.points=[le(us,1),le(Sa,1)]):ar.current.rl=!1}if(ns&&us[1]==="r"&&(Jo<po.left||ar.current.lr)){var Gl=ko;yu?Gl+=_n-er:Gl=Ll.x-es.x-oa;var Dl=wu(Gl,No),fs=wu(Gl,No,Di);Dl>Uo||Dl===Uo&&(!Ki||fs>=Hs)?(ar.current.lr=!0,ko=Gl,oa=-oa,Ma.points=[le(us,1),le(Sa,1)]):ar.current.lr=!1}Qs();var ws=Ri===!0?0:Ri;typeof ws=="number"&&(Jo<Di.left&&(ko-=Jo-Di.left-oa,Tr.x+er<Di.left+ws&&(ko+=Tr.x-Di.left+er-ws)),Jl>Di.right&&(ko-=Jl-Di.right-oa,Tr.x>Di.right-ws&&(ko+=Tr.x-Di.right+ws)));var ps=Wo===!0?0:Wo;typeof ps=="number"&&(ts<Di.top&&(No-=ts-Di.top-Fa,Tr.y+Xn<Di.top+ps&&(No+=Tr.y-Di.top+Xn-ps)),il>Di.bottom&&(No-=il-Di.bottom-Fa,Tr.y>Di.bottom-ps&&(No+=Tr.y-Di.bottom+ps)));var Za=ot.x+ko,ru=Za+_n,Es=ot.y+No,xu=Es+jn,Yu=Tr.x,ol=Yu+er,Sc=Tr.y,Pu=Sc+Xn,Lc=Math.max(Za,Yu),Ql=Math.min(ru,ol),ms=(Lc+Ql)/2,cu=ms-Za,Tc=Math.max(Es,Sc),Ic=Math.min(xu,Pu),bu=(Tc+Ic)/2,Dc=bu-Es;At==null||At(ut,Ma);var kc=Vo.right-ot.x-(ko+ot.width),du=Vo.bottom-ot.y-(No+ot.height);Xo===1&&(ko=Math.round(ko),kc=Math.round(kc)),$o===1&&(No=Math.round(No),du=Math.round(du));var ql={ready:!0,offsetX:ko/Xo,offsetY:No/$o,offsetR:kc/Xo,offsetB:du/$o,arrowX:cu/Xo,arrowY:Dc/$o,scaleX:Xo,scaleY:$o,align:Ma};Bn(ql)}}),Gn=function(){en.current+=1;var cn=en.current;Promise.resolve().then(function(){en.current===cn&&In()})},hn=function(){Bn(function(cn){return(0,E.Z)((0,E.Z)({},cn),{},{ready:!1})})};return(0,K.Z)(hn,[gt]),(0,K.Z)(function(){Pe||hn()},[Pe]),[Lt.ready,Lt.offsetX,Lt.offsetY,Lt.offsetR,Lt.offsetB,Lt.arrowX,Lt.arrowY,Lt.scaleX,Lt.scaleY,Lt.align,Gn]}var we=i(46865);function Pn(Pe,ut,Ve,gt,Gt){(0,K.Z)(function(){if(Pe&&ut&&Ve){let en=function(){gt(),Gt()};var Me=ut,At=Ve,Bt=Tt(Me),Sn=Tt(At),Lt=bt(At),Bn=new Set([Lt].concat((0,we.Z)(Bt),(0,we.Z)(Sn)));return Bn.forEach(function(gn){gn.addEventListener("scroll",en,{passive:!0})}),Lt.addEventListener("resize",en,{passive:!0}),gt(),function(){Bn.forEach(function(gn){gn.removeEventListener("scroll",en),Lt.removeEventListener("resize",en)})}}},[Pe,ut,Ve])}var Mt=i(4449);function or(Pe,ut,Ve,gt,Gt,Me,At,Bt){var Sn=he.useRef(Pe);Sn.current=Pe;var Lt=he.useRef(!1);he.useEffect(function(){if(ut&&gt&&(!Gt||Me)){var en=function(){Lt.current=!1},gn=function(Ln){var Er;Sn.current&&!At(((Er=Ln.composedPath)===null||Er===void 0||(Er=Er.call(Ln))===null||Er===void 0?void 0:Er[0])||Ln.target)&&!Lt.current&&Bt(!1)},ar=bt(gt);ar.addEventListener("pointerdown",en,!0),ar.addEventListener("mousedown",gn,!0),ar.addEventListener("contextmenu",gn,!0);var Sr=(0,te.A)(Ve);if(Sr&&(Sr.addEventListener("mousedown",gn,!0),Sr.addEventListener("contextmenu",gn,!0)),0)var In,Gn,hn,mn;return function(){ar.removeEventListener("pointerdown",en,!0),ar.removeEventListener("mousedown",gn,!0),ar.removeEventListener("contextmenu",gn,!0),Sr&&(Sr.removeEventListener("mousedown",gn,!0),Sr.removeEventListener("contextmenu",gn,!0))}}},[ut,Ve,gt,Gt,Me]);function Bn(){Lt.current=!0}return Bn}var wr=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Dr(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.Z,ut=he.forwardRef(function(Ve,gt){var Gt=Ve.prefixCls,Me=Gt===void 0?"rc-trigger-popup":Gt,At=Ve.children,Bt=Ve.action,Sn=Bt===void 0?"hover":Bt,Lt=Ve.showAction,Bn=Ve.hideAction,en=Ve.popupVisible,gn=Ve.defaultPopupVisible,ar=Ve.onPopupVisibleChange,Sr=Ve.afterPopupVisibleChange,In=Ve.mouseEnterDelay,Gn=Ve.mouseLeaveDelay,hn=Gn===void 0?.1:Gn,mn=Ve.focusDelay,cn=Ve.blurDelay,Ln=Ve.mask,Er=Ve.maskClosable,mr=Er===void 0?!0:Er,Jr=Ve.getPopupContainer,Ie=Ve.forceRender,Ot=Ve.autoDestroy,St=Ve.destroyPopupOnHide,at=Ve.popup,Xe=Ve.popupClassName,Nt=Ve.popupStyle,Nn=Ve.popupPlacement,Jn=Ve.builtinPlacements,rr=Jn===void 0?{}:Jn,Br=Ve.popupAlign,Hr=Ve.zIndex,zr=Ve.stretch,Tr=Ve.getPopupClassNameFromAlign,fn=Ve.fresh,Ne=Ve.alignPoint,Ge=Ve.onPopupClick,ot=Ve.onPopupAlign,Dt=Ve.arrow,jt=Ve.popupMotion,sn=Ve.maskMotion,xn=Ve.popupTransitionName,rn=Ve.popupAnimation,Fn=Ve.maskTransitionName,Un=Ve.maskAnimation,jn=Ve.className,_n=Ve.getTriggerDOMNode,Xn=(0,C.Z)(Ve,wr),er=Ot||St||!1,Yr=he.useState(!1),qr=(0,M.Z)(Yr,2),Gr=qr[0],ci=qr[1];(0,K.Z)(function(){ci((0,de.Z)())},[]);var Ci=he.useRef({}),Ki=he.useContext(nt),Bi=he.useMemo(function(){return{registerSubPopup:function(aa,go){Ci.current[aa]=go,Ki==null||Ki.registerSubPopup(aa,go)}}},[Ki]),Di=(0,B.Z)(),yo=he.useState(null),po=(0,M.Z)(yo,2),Vo=po[0],Xo=po[1],$o=he.useRef(null),Aa=(0,X.Z)(function(jo){$o.current=jo,(0,Y.Sh)(jo)&&Vo!==jo&&Xo(jo),Ki==null||Ki.registerSubPopup(Di,jo)}),qa=he.useState(null),Oo=(0,M.Z)(qa,2),Do=Oo[0],oa=Oo[1],Fa=he.useRef(null),xs=(0,X.Z)(function(jo){(0,Y.Sh)(jo)&&Do!==jo&&(oa(jo),Fa.current=jo)}),tl=he.Children.only(At),Na=(tl==null?void 0:tl.props)||{},ro={},xa=(0,X.Z)(function(jo){var aa,go,Ui=Do;return(Ui==null?void 0:Ui.contains(jo))||((aa=(0,te.A)(Ui))===null||aa===void 0?void 0:aa.host)===jo||jo===Ui||(Vo==null?void 0:Vo.contains(jo))||((go=(0,te.A)(Vo))===null||go===void 0?void 0:go.host)===jo||jo===Vo||Object.values(Ci.current).some(function(qs){return(qs==null?void 0:qs.contains(jo))||jo===qs})}),Ba=He(Me,jt,rn,xn),ma=He(Me,sn,Un,Fn),ja=he.useState(gn||!1),Sa=(0,M.Z)(ja,2),us=Sa[0],ua=Sa[1],ao=en!=null?en:us,Ma=(0,X.Z)(function(jo){en===void 0&&ua(jo)});(0,K.Z)(function(){ua(en||!1)},[en]);var ko=he.useRef(ao);ko.current=ao;var No=he.useRef([]);No.current=[];var Uo=(0,X.Z)(function(jo){var aa;Ma(jo),((aa=No.current[No.current.length-1])!==null&&aa!==void 0?aa:ao)!==jo&&(No.current.push(jo),ar==null||ar(jo))}),Hs=he.useRef(),$i=function(){clearTimeout(Hs.current)},es=function(aa){var go=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;$i(),go===0?Uo(aa):Hs.current=setTimeout(function(){Uo(aa)},go*1e3)};he.useEffect(function(){return $i},[]);var Ll=he.useState(!1),hl=(0,M.Z)(Ll,2),ho=hl[0],Ul=hl[1];(0,K.Z)(function(jo){(!jo||ao)&&Ul(!0)},[ao]);var Ml=he.useState(null),Ri=(0,M.Z)(Ml,2),Wo=Ri[0],fo=Ri[1],ts=he.useState(null),il=(0,M.Z)(ts,2),Jo=il[0],Jl=il[1],zs=function(aa){Jl([aa.clientX,aa.clientY])},Cs=Je(ao,Vo,Ne&&Jo!==null?Jo:Do,Nn,rr,Br,ot),oo=(0,M.Z)(Cs,11),qi=oo[0],Ta=oo[1],la=oo[2],Os=oo[3],Vl=oo[4],ns=oo[5],yu=oo[6],Fs=oo[7],bs=oo[8],cs=oo[9],Gl=oo[10],Dl=ft(Gr,Sn,Lt,Bn),fs=(0,M.Z)(Dl,2),ws=fs[0],ps=fs[1],Za=ws.has("click"),ru=ps.has("click")||ps.has("contextMenu"),Es=(0,X.Z)(function(){ho||Gl()}),xu=function(){ko.current&&Ne&&ru&&es(!1)};Pn(ao,Do,Vo,Es,xu),(0,K.Z)(function(){Es()},[Jo,Nn]),(0,K.Z)(function(){ao&&!(rr!=null&&rr[Nn])&&Es()},[JSON.stringify(Br)]);var Yu=he.useMemo(function(){var jo=_t(rr,Me,cs,Ne);return $()(jo,Tr==null?void 0:Tr(cs))},[cs,Tr,rr,Me,Ne]);he.useImperativeHandle(gt,function(){return{nativeElement:Fa.current,popupElement:$o.current,forceAlign:Es}});var ol=he.useState(0),Sc=(0,M.Z)(ol,2),Pu=Sc[0],Lc=Sc[1],Ql=he.useState(0),ms=(0,M.Z)(Ql,2),cu=ms[0],Tc=ms[1],Ic=function(){if(zr&&Do){var aa=Do.getBoundingClientRect();Lc(aa.width),Tc(aa.height)}},bu=function(){Ic(),Es()},Dc=function(aa){Ul(!1),Gl(),Sr==null||Sr(aa)},kc=function(){return new Promise(function(aa){Ic(),fo(function(){return aa})})};(0,K.Z)(function(){Wo&&(Gl(),Wo(),fo(null))},[Wo]);function du(jo,aa,go,Ui){ro[jo]=function(qs){var Io;Ui==null||Ui(qs),es(aa,go);for(var Nu=arguments.length,Cc=new Array(Nu>1?Nu-1:0),Mo=1;Mo<Nu;Mo++)Cc[Mo-1]=arguments[Mo];(Io=Na[jo])===null||Io===void 0||Io.call.apply(Io,[Na,qs].concat(Cc))}}(Za||ru)&&(ro.onClick=function(jo){var aa;ko.current&&ru?es(!1):!ko.current&&Za&&(zs(jo),es(!0));for(var go=arguments.length,Ui=new Array(go>1?go-1:0),qs=1;qs<go;qs++)Ui[qs-1]=arguments[qs];(aa=Na.onClick)===null||aa===void 0||aa.call.apply(aa,[Na,jo].concat(Ui))});var ql=or(ao,ru,Do,Vo,Ln,mr,xa,es),wu=ws.has("hover"),Qs=ps.has("hover"),Cl,Al;wu&&(du("onMouseEnter",!0,In,function(jo){zs(jo)}),du("onPointerEnter",!0,In,function(jo){zs(jo)}),Cl=function(aa){(ao||ho)&&Vo!==null&&Vo!==void 0&&Vo.contains(aa.target)&&es(!0,In)},Ne&&(ro.onMouseMove=function(jo){var aa;(aa=Na.onMouseMove)===null||aa===void 0||aa.call(Na,jo)})),Qs&&(du("onMouseLeave",!1,hn),du("onPointerLeave",!1,hn),Al=function(){es(!1,hn)}),ws.has("focus")&&du("onFocus",!0,mn),ps.has("focus")&&du("onBlur",!1,cn),ws.has("contextMenu")&&(ro.onContextMenu=function(jo){var aa;ko.current&&ps.has("contextMenu")?es(!1):(zs(jo),es(!0)),jo.preventDefault();for(var go=arguments.length,Ui=new Array(go>1?go-1:0),qs=1;qs<go;qs++)Ui[qs-1]=arguments[qs];(aa=Na.onContextMenu)===null||aa===void 0||aa.call.apply(aa,[Na,jo].concat(Ui))}),jn&&(ro.className=$()(Na.className,jn));var eu=(0,E.Z)((0,E.Z)({},Na),ro),Eu={},Nc=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Nc.forEach(function(jo){Xn[jo]&&(Eu[jo]=function(){for(var aa,go=arguments.length,Ui=new Array(go),qs=0;qs<go;qs++)Ui[qs]=arguments[qs];(aa=eu[jo])===null||aa===void 0||aa.call.apply(aa,[eu].concat(Ui)),Xn[jo].apply(Xn,Ui)})});var Mc=he.cloneElement(tl,(0,E.Z)((0,E.Z)({},eu),Eu)),fd={x:ns,y:yu},Ad=Dt?(0,E.Z)({},Dt!==!0?Dt:{}):null;return he.createElement(he.Fragment,null,he.createElement(U.Z,{disabled:!ao,ref:xs,onResize:bu},he.createElement(qe,{getTriggerDOMNode:_n},Mc)),he.createElement(nt.Provider,{value:Bi},he.createElement(be,{portal:Pe,ref:Aa,prefixCls:Me,popup:at,className:$()(Xe,Yu),style:Nt,target:Do,onMouseEnter:Cl,onMouseLeave:Al,onPointerEnter:Cl,zIndex:Hr,open:ao,keepDom:ho,fresh:fn,onClick:Ge,onPointerDownCapture:ql,mask:Ln,motion:Ba,maskMotion:ma,onVisibleChanged:Dc,onPrepare:kc,forceRender:Ie,autoDestroy:er,getPopupContainer:Jr,align:cs,arrow:Ad,arrowPos:fd,ready:qi,offsetX:Ta,offsetY:la,offsetR:Os,offsetB:Vl,onAlign:Es,stretch:zr,targetWidth:Pu/Fs,targetHeight:cu/bs})))});return ut}var lr=Dr(n.Z)},31054:function(H){(function(Q,i){H.exports=i()})(this,function(){"use strict";function Q(I,c){(c==null||c>I.length)&&(c=I.length);for(var f=0,T=Array(c);f<c;f++)T[f]=I[f];return T}function i(I,c,f){return c=U(c),function(T,W){if(W&&(typeof W=="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}(T)}(I,te()?Reflect.construct(c,f||[],U(I).constructor):c.apply(I,f))}function E(I,c){if(!(I instanceof c))throw new TypeError("Cannot call a class as a function")}function M(I,c,f){if(te())return Reflect.construct.apply(null,arguments);var T=[null];T.push.apply(T,c);var W=new(I.bind.apply(I,T));return f&&X(W,f.prototype),W}function C(I,c){for(var f=0;f<c.length;f++){var T=c[f];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(I,de(T.key),T)}}function n(I,c,f){return c&&C(I.prototype,c),f&&C(I,f),Object.defineProperty(I,"prototype",{writable:!1}),I}function j(I,c){var f=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!f){if(Array.isArray(I)||(f=he(I))||c){f&&(I=f);var T=0,W=function(){};return{s:W,n:function(){return T>=I.length?{done:!0}:{done:!1,value:I[T++]}},e:function(It){throw It},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var me,ze=!0,tt=!1;return{s:function(){f=f.call(I)},n:function(){var It=f.next();return ze=It.done,It},e:function(It){tt=!0,me=It},f:function(){try{ze||f.return==null||f.return()}finally{if(tt)throw me}}}}function $(){return $=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(I,c,f){var T=function(me,ze){for(;!{}.hasOwnProperty.call(me,ze)&&(me=U(me))!==null;);return me}(I,c);if(T){var W=Object.getOwnPropertyDescriptor(T,c);return W.get?W.get.call(arguments.length<3?I:f):W.value}},$.apply(null,arguments)}function U(I){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},U(I)}function Y(I,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(c&&c.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),Object.defineProperty(I,"prototype",{writable:!1}),c&&X(I,c)}function te(){try{var I=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(c){}return(te=function(){return!!I})()}function X(I,c){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,T){return f.__proto__=T,f},X(I,c)}function B(I,c,f,T){var W=$(U(1&T?I.prototype:I),c,f);return 2&T&&typeof W=="function"?function(me){return W.apply(f,me)}:W}function K(I){return function(c){if(Array.isArray(c))return Q(c)}(I)||function(c){if(typeof Symbol!="undefined"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(I)||he(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function de(I){var c=function(f,T){if(typeof f!="object"||!f)return f;var W=f[Symbol.toPrimitive];if(W!==void 0){var me=W.call(f,T);if(typeof me!="object")return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(I,"string");return typeof c=="symbol"?c:c+""}function he(I,c){if(I){if(typeof I=="string")return Q(I,c);var f={}.toString.call(I).slice(8,-1);return f==="Object"&&I.constructor&&(f=I.constructor.name),f==="Map"||f==="Set"?Array.from(I):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?Q(I,c):void 0}}function J(I){var c=typeof Map=="function"?new Map:void 0;return J=function(f){if(f===null||!function(W){try{return Function.toString.call(W).indexOf("[native code]")!==-1}catch(me){return typeof W=="function"}}(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(c!==void 0){if(c.has(f))return c.get(f);c.set(f,T)}function T(){return M(f,arguments,U(this).constructor)}return T.prototype=Object.create(f.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),X(T,f)},J(I)}var ae=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(c){this._quadrantSegments=c,this._quadrantSegments===0&&(this._joinStyle=I.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=I.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),c<=0&&(this._quadrantSegments=1),this._joinStyle!==I.JOIN_ROUND&&(this._quadrantSegments=I.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(c){this._joinStyle=c}},{key:"setSimplifyFactor",value:function(c){this._simplifyFactor=c<0?0:c}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(c){this._endCapStyle=c}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(c){this._mitreLimit=c}},{key:"setSingleSided",value:function(c){this._isSingleSided=c}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=I.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=I.CAP_ROUND,this._joinStyle=I.JOIN_ROUND,this._mitreLimit=I.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=I.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var c=arguments[0];this.setQuadrantSegments(c)}else if(arguments.length===2){var f=arguments[0],T=arguments[1];this.setQuadrantSegments(f),this.setEndCapStyle(T)}else if(arguments.length===4){var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3];this.setQuadrantSegments(W),this.setEndCapStyle(me),this.setJoinStyle(ze),this.setMitreLimit(tt)}}}},{key:"bufferDistanceError",value:function(c){var f=Math.PI/2/c;return 1-Math.cos(f/2)}}])}();ae.CAP_ROUND=1,ae.CAP_FLAT=2,ae.CAP_SQUARE=3,ae.JOIN_ROUND=1,ae.JOIN_MITRE=2,ae.JOIN_BEVEL=3,ae.DEFAULT_QUADRANT_SEGMENTS=8,ae.DEFAULT_MITRE_LIMIT=5,ae.DEFAULT_SIMPLIFY_FACTOR=.01;var se=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({Exception:c})[0],T}return Y(c,I),n(c,[{key:"toString",value:function(){return this.message}}])}(J(Error)),Ee=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({IllegalArgumentException:c})[0],T}return Y(c,I),n(c)}(se),Le=function(){return n(function I(){E(this,I)},[{key:"filter",value:function(I){}}])}();function ke(){}function ye(){}function Se(){}var be,Ue,qe,je,nt,Ct,ft,Et,yt=function(){return n(function I(){E(this,I)},null,[{key:"equalsWithTolerance",value:function(I,c,f){return Math.abs(I-c)<=f}}])}(),_t=function(){return n(function I(c,f){E(this,I),this.low=f||0,this.high=c||0},null,[{key:"toBinaryString",value:function(I){var c,f="";for(c=2147483648;c>0;c>>>=1)f+=(I.high&c)===c?"1":"0";for(c=2147483648;c>0;c>>>=1)f+=(I.low&c)===c?"1":"0";return f}}])}();function He(){}function bt(){}He.NaN=NaN,He.isNaN=function(I){return Number.isNaN(I)},He.isInfinite=function(I){return!Number.isFinite(I)},He.MAX_VALUE=Number.MAX_VALUE,He.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,He.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(Ct=2146435072,ft=new Float64Array(1),Et=new Int32Array(ft.buffer),He.doubleToLongBits=function(I){ft[0]=I;var c=0|Et[0],f=0|Et[1];return(f&Ct)===Ct&&1048575&f&&c!==0&&(c=0,f=2146959360),new _t(f,c)},He.longBitsToDouble=function(I){return Et[0]=I.low,Et[1]=I.high,ft[0]}):(be=1023,Ue=Math.log2,qe=Math.floor,je=Math.pow,nt=function(){for(var I=53;I>0;I--){var c=je(2,I)-1;if(qe(Ue(c))+1===I)return c}return 0}(),He.doubleToLongBits=function(I){var c,f,T,W,me,ze,tt,It,ne;if(I<0||1/I===Number.NEGATIVE_INFINITY?(ze=-2147483648,I=-I):ze=0,I===0)return new _t(It=ze,ne=0);if(I===1/0)return new _t(It=2146435072|ze,ne=0);if(I!=I)return new _t(It=2146959360,ne=0);if(W=0,ne=0,(c=qe(I))>1)if(c<=nt)(W=qe(Ue(c)))<=20?(ne=0,It=c<<20-W&1048575):(ne=c%(f=je(2,T=W-20))<<32-T,It=c/f&1048575);else for(T=c,ne=0;(T=qe(f=T/2))!==0;)W++,ne>>>=1,ne|=(1&It)<<31,It>>>=1,f!==T&&(It|=524288);if(tt=W+be,me=c===0,c=I-c,W<52&&c!==0)for(T=0;;){if((f=2*c)>=1?(c=f-1,me?(tt--,me=!1):(T<<=1,T|=1,W++)):(c=f,me?--tt==0&&(W++,me=!1):(T<<=1,W++)),W===20)It|=T,T=0;else if(W===52){ne|=T;break}if(f===1){W<20?It|=T<<20-W:W<52&&(ne|=T<<52-W);break}}return It|=tt<<20,new _t(It|=ze,ne)},He.longBitsToDouble=function(I){var c,f,T,W,me=I.high,ze=I.low,tt=me&1<<31?-1:1;for(T=((2146435072&me)>>20)-be,W=0,f=524288,c=1;c<=20;c++)me&f&&(W+=je(2,-c)),f>>>=1;for(f=-2147483648,c=21;c<=52;c++)ze&f&&(W+=je(2,-c)),f>>>=1;if(T===-1023){if(W===0)return 0*tt;T=-1022}else{if(T===1024)return W===0?tt/0:NaN;W+=1}return tt*W*je(2,T)});var Tt=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({RuntimeException:c})[0],T}return Y(c,I),n(c)}(se),st=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,null,[{key:"constructor_",value:function(){if(arguments.length===0)Tt.constructor_.call(this);else if(arguments.length===1){var f=arguments[0];Tt.constructor_.call(this,f)}}}])}(Tt),Qe=function(){function I(){E(this,I)}return n(I,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)I.shouldNeverReachHere(null);else if(arguments.length===1){var c=arguments[0];throw new st("Should never reach here"+(c!==null?": "+c:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var c=arguments[0];I.isTrue(c,null)}else if(arguments.length===2){var f=arguments[1];if(!arguments[0])throw f===null?new st:new st(f)}}},{key:"equals",value:function(){if(arguments.length===2){var c=arguments[0],f=arguments[1];I.equals(c,f,null)}else if(arguments.length===3){var T=arguments[0],W=arguments[1],me=arguments[2];if(!W.equals(T))throw new st("Expected "+T+" but encountered "+W+(me!==null?": "+me:""))}}}])}(),mt=new ArrayBuffer(8),Ht=new Float64Array(mt),vt=new Int32Array(mt),ue=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getM",value:function(){return He.NaN}},{key:"setOrdinate",value:function(c,f){switch(c){case I.X:this.x=f;break;case I.Y:this.y=f;break;case I.Z:this.setZ(f);break;default:throw new Ee("Invalid ordinate index: "+c)}}},{key:"equals2D",value:function(){if(arguments.length===1){var c=arguments[0];return this.x===c.x&&this.y===c.y}if(arguments.length===2){var f=arguments[0],T=arguments[1];return!!yt.equalsWithTolerance(this.x,f.x,T)&&!!yt.equalsWithTolerance(this.y,f.y,T)}}},{key:"setM",value:function(c){throw new Ee("Invalid ordinate index: "+I.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(c){switch(c){case I.X:return this.x;case I.Y:return this.y;case I.Z:return this.getZ()}throw new Ee("Invalid ordinate index: "+c)}},{key:"equals3D",value:function(c){return this.x===c.x&&this.y===c.y&&(this.getZ()===c.getZ()||He.isNaN(this.getZ())&&He.isNaN(c.getZ()))}},{key:"equals",value:function(c){return c instanceof I&&this.equals2D(c)}},{key:"equalInZ",value:function(c,f){return yt.equalsWithTolerance(this.getZ(),c.getZ(),f)}},{key:"setX",value:function(c){this.x=c}},{key:"compareTo",value:function(c){var f=c;return this.x<f.x?-1:this.x>f.x?1:this.y<f.y?-1:this.y>f.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(c){this.z=c}},{key:"clone",value:function(){try{return null}catch(c){if(c instanceof CloneNotSupportedException)return Qe.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw c}}},{key:"copy",value:function(){return new I(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(c){var f=this.x-c.x,T=this.y-c.y,W=this.getZ()-c.getZ();return Math.sqrt(f*f+T*T+W*W)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(c){this.y=c}},{key:"distance",value:function(c){var f=this.x-c.x,T=this.y-c.y;return Math.sqrt(f*f+T*T)}},{key:"hashCode",value:function(){var c=17;return c=37*(c=37*c+I.hashCode(this.x))+I.hashCode(this.y)}},{key:"setCoordinate",value:function(c){this.x=c.x,this.y=c.y,this.z=c.getZ()}},{key:"interfaces_",get:function(){return[ke,ye,Se]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)I.constructor_.call(this,0,0);else if(arguments.length===1){var c=arguments[0];I.constructor_.call(this,c.x,c.y,c.getZ())}else if(arguments.length===2){var f=arguments[0],T=arguments[1];I.constructor_.call(this,f,T,I.NULL_ORDINATE)}else if(arguments.length===3){var W=arguments[0],me=arguments[1],ze=arguments[2];this.x=W,this.y=me,this.z=ze}}},{key:"hashCode",value:function(c){return Ht[0]=c,vt[0]^vt[1]}}])}(),lt=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"compare",value:function(c,f){var T=I.compare(c.x,f.x);if(T!==0)return T;var W=I.compare(c.y,f.y);return W!==0?W:this._dimensionsToTest<=2?0:I.compare(c.getZ(),f.getZ())}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)I.constructor_.call(this,2);else if(arguments.length===1){var c=arguments[0];if(c!==2&&c!==3)throw new Ee("only 2 or 3 dimensions may be specified");this._dimensionsToTest=c}}},{key:"compare",value:function(c,f){return c<f?-1:c>f?1:He.isNaN(c)?He.isNaN(f)?0:-1:He.isNaN(f)?1:0}}])}();ue.DimensionalComparator=lt,ue.NULL_ORDINATE=He.NaN,ue.X=0,ue.Y=1,ue.Z=2,ue.M=3;var le=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(c){if(!(c instanceof I))return!1;var f=c;return this.isNull()?f.isNull():this._maxx===f.getMaxX()&&this._maxy===f.getMaxY()&&this._minx===f.getMinX()&&this._miny===f.getMinY()}},{key:"intersection",value:function(c){if(this.isNull()||c.isNull()||!this.intersects(c))return new I;var f=this._minx>c._minx?this._minx:c._minx,T=this._miny>c._miny?this._miny:c._miny;return new I(f,this._maxx<c._maxx?this._maxx:c._maxx,T,this._maxy<c._maxy?this._maxy:c._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof ue){var c=arguments[0];return this.covers(c.x,c.y)}if(arguments[0]instanceof I){var f=arguments[0];return!this.isNull()&&!f.isNull()&&f.getMinX()>=this._minx&&f.getMaxX()<=this._maxx&&f.getMinY()>=this._miny&&f.getMaxY()<=this._maxy}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];return!this.isNull()&&T>=this._minx&&T<=this._maxx&&W>=this._miny&&W<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var c=arguments[0];return!this.isNull()&&!c.isNull()&&!(c._minx>this._maxx||c._maxx<this._minx||c._miny>this._maxy||c._maxy<this._miny)}if(arguments[0]instanceof ue){var f=arguments[0];return this.intersects(f.x,f.y)}}else if(arguments.length===2){if(arguments[0]instanceof ue&&arguments[1]instanceof ue){var T=arguments[0],W=arguments[1];return!this.isNull()&&!((T.x<W.x?T.x:W.x)>this._maxx)&&!((T.x>W.x?T.x:W.x)<this._minx)&&!((T.y<W.y?T.y:W.y)>this._maxy)&&!((T.y>W.y?T.y:W.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var me=arguments[0],ze=arguments[1];return!this.isNull()&&!(me>this._maxx||me<this._minx||ze>this._maxy||ze<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return Math.sqrt(c*c+f*f)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof ue){var c=arguments[0];this.expandToInclude(c.x,c.y)}else if(arguments[0]instanceof I){var f=arguments[0];if(f.isNull())return null;this.isNull()?(this._minx=f.getMinX(),this._maxx=f.getMaxX(),this._miny=f.getMinY(),this._maxy=f.getMaxY()):(f._minx<this._minx&&(this._minx=f._minx),f._maxx>this._maxx&&(this._maxx=f._maxx),f._miny<this._miny&&(this._miny=f._miny),f._maxy>this._maxy&&(this._maxy=f._maxy))}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this.isNull()?(this._minx=T,this._maxx=T,this._miny=W,this._maxy=W):(T<this._minx&&(this._minx=T),T>this._maxx&&(this._maxx=T),W<this._miny&&(this._miny=W),W>this._maxy&&(this._maxy=W))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return c<f?c:f}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(c){var f=c;return this.isNull()?f.isNull()?0:-1:f.isNull()?1:this._minx<f._minx?-1:this._minx>f._minx?1:this._miny<f._miny?-1:this._miny>f._miny?1:this._maxx<f._maxx?-1:this._maxx>f._maxx?1:this._maxy<f._maxy?-1:this._maxy>f._maxy?1:0}},{key:"translate",value:function(c,f){if(this.isNull())return null;this.init(this.getMinX()+c,this.getMaxX()+c,this.getMinY()+f,this.getMaxY()+f)}},{key:"copy",value:function(){return new I(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(c){return!(!this.isNull()&&!c.isNull())||c._minx>this._maxx||c._maxx<this._minx||c._miny>this._maxy||c._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return c>f?c:f}},{key:"expandBy",value:function(){if(arguments.length===1){var c=arguments[0];this.expandBy(c,c)}else if(arguments.length===2){var f=arguments[0],T=arguments[1];if(this.isNull())return null;this._minx-=f,this._maxx+=f,this._miny-=T,this._maxy+=T,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var c=arguments[0];return this.covers(c)}if(arguments[0]instanceof ue){var f=arguments[0];return this.covers(f)}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];return this.covers(T,W)}}},{key:"centre",value:function(){return this.isNull()?null:new ue((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof ue){var c=arguments[0];this.init(c.x,c.x,c.y,c.y)}else if(arguments[0]instanceof I){var f=arguments[0];this._minx=f._minx,this._maxx=f._maxx,this._miny=f._miny,this._maxy=f._maxy}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this.init(T.x,W.x,T.y,W.y)}else if(arguments.length===4){var me=arguments[0],ze=arguments[1],tt=arguments[2],It=arguments[3];me<ze?(this._minx=me,this._maxx=ze):(this._minx=ze,this._maxx=me),tt<It?(this._miny=tt,this._maxy=It):(this._miny=It,this._maxy=tt)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(c){if(this.intersects(c))return 0;var f=0;this._maxx<c._minx?f=c._minx-this._maxx:this._minx>c._maxx&&(f=this._minx-c._maxx);var T=0;return this._maxy<c._miny?T=c._miny-this._maxy:this._miny>c._maxy&&(T=this._miny-c._maxy),f===0?T:T===0?f:Math.sqrt(f*f+T*T)}},{key:"hashCode",value:function(){var c=17;return c=37*(c=37*(c=37*(c=37*c+ue.hashCode(this._minx))+ue.hashCode(this._maxx))+ue.hashCode(this._miny))+ue.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[ke,Se]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof ue){var c=arguments[0];this.init(c.x,c.x,c.y,c.y)}else if(arguments[0]instanceof I){var f=arguments[0];this.init(f)}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this.init(T.x,W.x,T.y,W.y)}else if(arguments.length===4){var me=arguments[0],ze=arguments[1],tt=arguments[2],It=arguments[3];this.init(me,ze,tt,It)}}},{key:"intersects",value:function(){if(arguments.length===3){var c=arguments[0],f=arguments[1],T=arguments[2];return T.x>=(c.x<f.x?c.x:f.x)&&T.x<=(c.x>f.x?c.x:f.x)&&T.y>=(c.y<f.y?c.y:f.y)&&T.y<=(c.y>f.y?c.y:f.y)}if(arguments.length===4){var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3],It=Math.min(ze.x,tt.x),ne=Math.max(ze.x,tt.x),ge=Math.min(W.x,me.x),xe=Math.max(W.x,me.x);return!(ge>ne)&&!(xe<It)&&(It=Math.min(ze.y,tt.y),ne=Math.max(ze.y,tt.y),ge=Math.min(W.y,me.y),xe=Math.max(W.y,me.y),!(ge>ne)&&!(xe<It))}}}])}(),Je=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(c){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(c){return this===c||this.equalsExact(c,0)}},{key:"geometryChanged",value:function(){this.apply(I.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(c){return c!==null&&this.norm().equalsExact(c.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var c;if(arguments.length===1){var f=arguments[0];return c=f,this.getTypeCode()!==c.getTypeCode()?this.getTypeCode()-c.getTypeCode():this.isEmpty()&&c.isEmpty()?0:this.isEmpty()?-1:c.isEmpty()?1:this.compareToSameClass(f)}if(arguments.length===2){var T=arguments[0],W=arguments[1];return c=T,this.getTypeCode()!==c.getTypeCode()?this.getTypeCode()-c.getTypeCode():this.isEmpty()&&c.isEmpty()?0:this.isEmpty()?-1:c.isEmpty()?1:this.compareToSameClass(T,W)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(c){if(c.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION)throw new Ee("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(c,f,T){return T===0?c.equals(f):c.distance(f)<=T}},{key:"norm",value:function(){var c=this.copy();return c.normalize(),c}},{key:"reverse",value:function(){var c=this.reverseInternal();return this.envelope!=null&&(c.envelope=this.envelope.copy()),c.setSRID(this.getSRID()),c}},{key:"copy",value:function(){var c=this.copyInternal();return c.envelope=this._envelope==null?null:this._envelope.copy(),c._SRID=this._SRID,c._userData=this._userData,c}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new le(this._envelope)}},{key:"setSRID",value:function(c){this._SRID=c}},{key:"setUserData",value:function(c){this._userData=c}},{key:"compare",value:function(c,f){for(var T=c.iterator(),W=f.iterator();T.hasNext()&&W.hasNext();){var me=T.next(),ze=W.next(),tt=me.compareTo(ze);if(tt!==0)return tt}return T.hasNext()?1:W.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(c){return this.getClass()===c.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===I.TYPECODE_MULTIPOINT||this.getTypeCode()===I.TYPECODE_MULTILINESTRING||this.getTypeCode()===I.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[ye,ke,Se]}},{key:"getClass",value:function(){return I}}],[{key:"hasNonEmptyElements",value:function(c){for(var f=0;f<c.length;f++)if(!c[f].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(c){for(var f=0;f<c.length;f++)if(c[f]===null)return!0;return!1}}])}();Je.constructor_=function(I){I&&(this._envelope=null,this._userData=null,this._factory=I,this._SRID=I.getSRID())},Je.TYPECODE_POINT=0,Je.TYPECODE_MULTIPOINT=1,Je.TYPECODE_LINESTRING=2,Je.TYPECODE_LINEARRING=3,Je.TYPECODE_MULTILINESTRING=4,Je.TYPECODE_POLYGON=5,Je.TYPECODE_MULTIPOLYGON=6,Je.TYPECODE_GEOMETRYCOLLECTION=7,Je.TYPENAME_POINT="Point",Je.TYPENAME_MULTIPOINT="MultiPoint",Je.TYPENAME_LINESTRING="LineString",Je.TYPENAME_LINEARRING="LinearRing",Je.TYPENAME_MULTILINESTRING="MultiLineString",Je.TYPENAME_POLYGON="Polygon",Je.TYPENAME_MULTIPOLYGON="MultiPolygon",Je.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Je.geometryChangedFilter={get interfaces_(){return[Le]},filter:function(I){I.geometryChangedAction()}};var we=function(){function I(){E(this,I)}return n(I,null,[{key:"toLocationSymbol",value:function(c){switch(c){case I.EXTERIOR:return"e";case I.BOUNDARY:return"b";case I.INTERIOR:return"i";case I.NONE:return"-"}throw new Ee("Unknown location value: "+c)}}])}();we.INTERIOR=0,we.BOUNDARY=1,we.EXTERIOR=2,we.NONE=-1;var Pn=function(){return n(function I(){E(this,I)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Mt=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({NoSuchElementException:c})[0],T}return Y(c,I),n(c)}(se),or=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({UnsupportedOperationException:c})[0],T}return Y(c,I),n(c)}(se),wr=function(I){function c(){return E(this,c),i(this,c,arguments)}return Y(c,I),n(c,[{key:"contains",value:function(){}}])}(Pn),Dr=function(I){function c(f){var T;return E(this,c),(T=i(this,c)).map=new Map,f instanceof Pn&&T.addAll(f),T}return Y(c,I),n(c,[{key:"contains",value:function(f){var T=f.hashCode?f.hashCode():f;return!!this.map.has(T)}},{key:"add",value:function(f){var T=f.hashCode?f.hashCode():f;return!this.map.has(T)&&!!this.map.set(T,f)}},{key:"addAll",value:function(f){var T,W=j(f);try{for(W.s();!(T=W.n()).done;){var me=T.value;this.add(me)}}catch(ze){W.e(ze)}finally{W.f()}return!0}},{key:"remove",value:function(){throw new or}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new lr(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(wr),lr=function(){return n(function I(c){E(this,I),this.iterator=c.values();var f=this.iterator.next(),T=f.done,W=f.value;this.done=T,this.value=W},[{key:"next",value:function(){if(this.done)throw new Mt;var I=this.value,c=this.iterator.next(),f=c.done,T=c.value;return this.done=f,this.value=T,I}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new or}}])}(),Pe=function(){function I(){E(this,I)}return n(I,null,[{key:"opposite",value:function(c){return c===I.LEFT?I.RIGHT:c===I.RIGHT?I.LEFT:c}}])}();Pe.ON=0,Pe.LEFT=1,Pe.RIGHT=2;var ut=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({EmptyStackException:c})[0],T}return Y(c,I),n(c)}(se),Ve=function(I){function c(f){var T;return E(this,c),(T=i(this,c,[f])).name=Object.keys({IndexOutOfBoundsException:c})[0],T}return Y(c,I),n(c)}(se),gt=function(I){function c(){return E(this,c),i(this,c,arguments)}return Y(c,I),n(c,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Pn),Gt=function(I){function c(){var f;return E(this,c),(f=i(this,c)).array=[],f}return Y(c,I),n(c,[{key:"add",value:function(f){return this.array.push(f),!0}},{key:"get",value:function(f){if(f<0||f>=this.size())throw new Ve;return this.array[f]}},{key:"push",value:function(f){return this.array.push(f),f}},{key:"pop",value:function(){if(this.array.length===0)throw new ut;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new ut;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(f){return this.array.indexOf(f)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(gt);function Me(I,c){return I.interfaces_&&I.interfaces_.indexOf(c)>-1}var At=function(){return n(function I(c){E(this,I),this.str=c},[{key:"append",value:function(I){this.str+=I}},{key:"setCharAt",value:function(I,c){this.str=this.str.substr(0,I)+c+this.str.substr(I+1)}},{key:"toString",value:function(){return this.str}}])}(),Bt=function(){function I(c){E(this,I),this.value=c}return n(I,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(c){return this.value<c?-1:this.value>c?1:0}}],[{key:"compare",value:function(c,f){return c<f?-1:c>f?1:0}},{key:"isNan",value:function(c){return Number.isNaN(c)}},{key:"valueOf",value:function(c){return new I(c)}}])}(),Sn=function(){return n(function I(){E(this,I)},null,[{key:"isWhitespace",value:function(I){return I<=32&&I>=0||I===127}},{key:"toUpperCase",value:function(I){return I.toUpperCase()}}])}(),Lt=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"le",value:function(c){return this._hi<c._hi||this._hi===c._hi&&this._lo<=c._lo}},{key:"extractSignificantDigits",value:function(c,f){var T=this.abs(),W=I.magnitude(T._hi),me=I.TEN.pow(W);(T=T.divide(me)).gt(I.TEN)?(T=T.divide(I.TEN),W+=1):T.lt(I.ONE)&&(T=T.multiply(I.TEN),W-=1);for(var ze=W+1,tt=new At,It=I.MAX_PRINT_DIGITS-1,ne=0;ne<=It;ne++){c&&ne===ze&&tt.append(".");var ge=Math.trunc(T._hi);if(ge<0)break;var xe=!1,xt=0;ge>9?(xe=!0,xt="9"):xt="0"+ge,tt.append(xt),T=T.subtract(I.valueOf(ge)).multiply(I.TEN),xe&&T.selfAdd(I.TEN);var pn=!0,Mn=I.magnitude(T._hi);if(Mn<0&&Math.abs(Mn)>=It-ne&&(pn=!1),!pn)break}return f[0]=W,tt.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof I){var c=arguments[0];return this.add(c.negate())}if(typeof arguments[0]=="number"){var f=arguments[0];return this.add(-f)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof I){var c=arguments[0];return this._hi===c._hi&&this._lo===c._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof I){var c=arguments[0];return this.isNaN()?this:this.selfAdd(-c._hi,-c._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(c){return this.le(c)?this:c}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var c=arguments[0];return this.selfDivide(c._hi,c._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfDivide(f,0)}}else if(arguments.length===2){var T,W,me,ze,tt=arguments[0],It=arguments[1],ne=null,ge=null,xe=null,xt=null;return me=this._hi/tt,xt=(ne=(xe=I.SPLIT*me)-(ne=xe-me))*(ge=(xt=I.SPLIT*tt)-(ge=xt-tt))-(ze=me*tt)+ne*(W=tt-ge)+(T=me-ne)*ge+T*W,xt=me+(xe=(this._hi-ze-xt+this._lo-me*It)/tt),this._hi=xt,this._lo=me-xt+xe,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof I){var c,f,T,W,me=arguments[0],ze=null,tt=null,It=null,ne=null;return c=(T=this._hi/me._hi)-(ze=(It=I.SPLIT*T)-(ze=It-T)),ne=ze*(tt=(ne=I.SPLIT*me._hi)-(tt=ne-me._hi))-(W=T*me._hi)+ze*(f=me._hi-tt)+c*tt+c*f,new I(ne=T+(It=(this._hi-W-ne+this._lo-T*me._lo)/me._hi),T-ne+It)}if(typeof arguments[0]=="number"){var ge=arguments[0];return He.isNaN(ge)?I.createNaN():I.copy(this).selfDivide(ge,0)}}},{key:"ge",value:function(c){return this._hi>c._hi||this._hi===c._hi&&this._lo>=c._lo}},{key:"pow",value:function(c){if(c===0)return I.valueOf(1);var f=new I(this),T=I.valueOf(1),W=Math.abs(c);if(W>1)for(;W>0;)W%2==1&&T.selfMultiply(f),(W/=2)>0&&(f=f.sqr());else T=f;return c<0?T.reciprocal():T}},{key:"ceil",value:function(){if(this.isNaN())return I.NaN;var c=Math.ceil(this._hi),f=0;return c===this._hi&&(f=Math.ceil(this._lo)),new I(c,f)}},{key:"compareTo",value:function(c){var f=c;return this._hi<f._hi?-1:this._hi>f._hi?1:this._lo<f._lo?-1:this._lo>f._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof I){var c=arguments[0];return this.init(c),this}if(typeof arguments[0]=="number"){var f=arguments[0];return this.init(f),this}}},{key:"max",value:function(c){return this.ge(c)?this:c}},{key:"sqrt",value:function(){if(this.isZero())return I.valueOf(0);if(this.isNegative())return I.NaN;var c=1/Math.sqrt(this._hi),f=this._hi*c,T=I.valueOf(f),W=this.subtract(T.sqr())._hi*(.5*c);return T.add(W)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var c=arguments[0];return this.selfAdd(c._hi,c._lo)}if(typeof arguments[0]=="number"){var f,T,W,me,ze,tt=arguments[0],It=null;return It=(W=this._hi+tt)-(me=W-this._hi),T=(ze=(It=tt-me+(this._hi-It))+this._lo)+(W-(f=W+ze)),this._hi=f+T,this._lo=T+(f-this._hi),this}}else if(arguments.length===2){var ne,ge,xe,xt,pn=arguments[0],Mn=arguments[1],Hn=null,Qn=null,tr=null;xe=this._hi+pn,ge=this._lo+Mn,Qn=xe-(tr=xe-this._hi),Hn=ge-(xt=ge-this._lo);var Ir=(ne=xe+(tr=(Qn=pn-tr+(this._hi-Qn))+ge))+(tr=(Hn=Mn-xt+(this._lo-Hn))+(tr+(xe-ne))),oi=tr+(ne-Ir);return this._hi=Ir,this._lo=oi,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof I){var c=arguments[0];return this.selfMultiply(c._hi,c._lo)}if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfMultiply(f,0)}}else if(arguments.length===2){var T,W,me=arguments[0],ze=arguments[1],tt=null,It=null,ne=null,ge=null;tt=(ne=I.SPLIT*this._hi)-this._hi,ge=I.SPLIT*me,tt=ne-tt,T=this._hi-tt,It=ge-me;var xe=(ne=this._hi*me)+(ge=tt*(It=ge-It)-ne+tt*(W=me-It)+T*It+T*W+(this._hi*ze+this._lo*me)),xt=ge+(tt=ne-xe);return this._hi=xe,this._lo=xt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return I.NaN;var c=Math.floor(this._hi),f=0;return c===this._hi&&(f=Math.floor(this._lo)),new I(c,f)}},{key:"negate",value:function(){return this.isNaN()?this:new I(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(c){if(c instanceof CloneNotSupportedException)return null;throw c}}},{key:"multiply",value:function(){if(arguments[0]instanceof I){var c=arguments[0];return c.isNaN()?I.createNaN():I.copy(this).selfMultiply(c)}if(typeof arguments[0]=="number"){var f=arguments[0];return He.isNaN(f)?I.createNaN():I.copy(this).selfMultiply(f,0)}}},{key:"isNaN",value:function(){return He.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var c=I.magnitude(this._hi);return c>=-3&&c<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var c=this.getSpecialNumberString();if(c!==null)return c;var f=new Array(1).fill(null),T=this.extractSignificantDigits(!0,f),W=f[0]+1,me=T;if(T.charAt(0)===".")me="0"+T;else if(W<0)me="0."+I.stringOfChar("0",-W)+T;else if(T.indexOf(".")===-1){var ze=W-T.length;me=T+I.stringOfChar("0",ze)+".0"}return this.isNegative()?"-"+me:me}},{key:"reciprocal",value:function(){var c,f,T,W,me=null,ze=null,tt=null,It=null;c=(T=1/this._hi)-(me=(tt=I.SPLIT*T)-(me=tt-T)),ze=(It=I.SPLIT*this._hi)-this._hi;var ne=T+(tt=(1-(W=T*this._hi)-(It=me*(ze=It-ze)-W+me*(f=this._hi-ze)+c*ze+c*f)-T*this._lo)/this._hi);return new I(ne,T-ne+tt)}},{key:"toSciNotation",value:function(){if(this.isZero())return I.SCI_NOT_ZERO;var c=this.getSpecialNumberString();if(c!==null)return c;var f=new Array(1).fill(null),T=this.extractSignificantDigits(!1,f),W=I.SCI_NOT_EXPONENT_CHAR+f[0];if(T.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+T);var me="";T.length>1&&(me=T.substring(1));var ze=T.charAt(0)+"."+me;return this.isNegative()?"-"+ze+W:ze+W}},{key:"abs",value:function(){return this.isNaN()?I.NaN:this.isNegative()?this.negate():new I(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(c){return this._hi<c._hi||this._hi===c._hi&&this._lo<c._lo}},{key:"add",value:function(){if(arguments[0]instanceof I){var c=arguments[0];return I.copy(this).selfAdd(c)}if(typeof arguments[0]=="number"){var f=arguments[0];return I.copy(this).selfAdd(f)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var c=arguments[0];this._hi=c,this._lo=0}else if(arguments[0]instanceof I){var f=arguments[0];this._hi=f._hi,this._lo=f._lo}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this._hi=T,this._lo=W}}},{key:"gt",value:function(c){return this._hi>c._hi||this._hi===c._hi&&this._lo>c._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?I.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[Se,ke,ye]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var c=arguments[0];this.init(c)}else if(arguments[0]instanceof I){var f=arguments[0];this.init(f)}else if(typeof arguments[0]=="string"){var T=arguments[0];I.constructor_.call(this,I.parse(T))}}else if(arguments.length===2){var W=arguments[0],me=arguments[1];this.init(W,me)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],f=arguments[1],T=arguments[2],W=arguments[3];return I.determinant(I.valueOf(c),I.valueOf(f),I.valueOf(T),I.valueOf(W))}if(arguments[3]instanceof I&&arguments[2]instanceof I&&arguments[0]instanceof I&&arguments[1]instanceof I){var me=arguments[1],ze=arguments[2],tt=arguments[3];return arguments[0].multiply(tt).selfSubtract(me.multiply(ze))}}},{key:"sqr",value:function(c){return I.valueOf(c).selfMultiply(c)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var c=arguments[0];return I.parse(c)}if(typeof arguments[0]=="number")return new I(arguments[0])}},{key:"sqrt",value:function(c){return I.valueOf(c).sqrt()}},{key:"parse",value:function(c){for(var f=0,T=c.length;Sn.isWhitespace(c.charAt(f));)f++;var W=!1;if(f<T){var me=c.charAt(f);me!=="-"&&me!=="+"||(f++,me==="-"&&(W=!0))}for(var ze=new I,tt=0,It=0,ne=0,ge=!1;!(f>=T);){var xe=c.charAt(f);if(f++,Sn.isDigit(xe)){var xt=xe-"0";ze.selfMultiply(I.TEN),ze.selfAdd(xt),tt++}else{if(xe!=="."){if(xe==="e"||xe==="E"){var pn=c.substring(f);try{ne=Bt.parseInt(pn)}catch(Ir){throw Ir instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+pn+" in string "+c):Ir}break}throw new NumberFormatException("Unexpected character '"+xe+"' at position "+f+" in string "+c)}It=tt,ge=!0}}var Mn=ze;ge||(It=tt);var Hn=tt-It-ne;if(Hn===0)Mn=ze;else if(Hn>0){var Qn=I.TEN.pow(Hn);Mn=ze.divide(Qn)}else if(Hn<0){var tr=I.TEN.pow(-Hn);Mn=ze.multiply(tr)}return W?Mn.negate():Mn}},{key:"createNaN",value:function(){return new I(He.NaN,He.NaN)}},{key:"copy",value:function(c){return new I(c)}},{key:"magnitude",value:function(c){var f=Math.abs(c),T=Math.log(f)/Math.log(10),W=Math.trunc(Math.floor(T));return 10*Math.pow(10,W)<=f&&(W+=1),W}},{key:"stringOfChar",value:function(c,f){for(var T=new At,W=0;W<f;W++)T.append(c);return T.toString()}}])}();Lt.PI=new Lt(3.141592653589793,12246467991473532e-32),Lt.TWO_PI=new Lt(6.283185307179586,24492935982947064e-32),Lt.PI_2=new Lt(1.5707963267948966,6123233995736766e-32),Lt.E=new Lt(2.718281828459045,14456468917292502e-32),Lt.NaN=new Lt(He.NaN,He.NaN),Lt.EPS=123259516440783e-46,Lt.SPLIT=134217729,Lt.MAX_PRINT_DIGITS=32,Lt.TEN=Lt.valueOf(10),Lt.ONE=Lt.valueOf(1),Lt.SCI_NOT_EXPONENT_CHAR="E",Lt.SCI_NOT_ZERO="0.0E0";var Bn=function(){function I(){E(this,I)}return n(I,null,[{key:"orientationIndex",value:function(c,f,T){var W=I.orientationIndexFilter(c,f,T);if(W<=1)return W;var me=Lt.valueOf(f.x).selfAdd(-c.x),ze=Lt.valueOf(f.y).selfAdd(-c.y),tt=Lt.valueOf(T.x).selfAdd(-f.x),It=Lt.valueOf(T.y).selfAdd(-f.y);return me.selfMultiply(It).selfSubtract(ze.selfMultiply(tt)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Lt&&arguments[2]instanceof Lt&&arguments[0]instanceof Lt&&arguments[1]instanceof Lt){var c=arguments[1],f=arguments[2],T=arguments[3];return arguments[0].multiply(T).selfSubtract(c.multiply(f)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3],It=Lt.valueOf(W),ne=Lt.valueOf(me),ge=Lt.valueOf(ze),xe=Lt.valueOf(tt);return It.multiply(xe).selfSubtract(ne.multiply(ge)).signum()}}},{key:"intersection",value:function(c,f,T,W){var me=new Lt(c.y).selfSubtract(f.y),ze=new Lt(f.x).selfSubtract(c.x),tt=new Lt(c.x).selfMultiply(f.y).selfSubtract(new Lt(f.x).selfMultiply(c.y)),It=new Lt(T.y).selfSubtract(W.y),ne=new Lt(W.x).selfSubtract(T.x),ge=new Lt(T.x).selfMultiply(W.y).selfSubtract(new Lt(W.x).selfMultiply(T.y)),xe=ze.multiply(ge).selfSubtract(ne.multiply(tt)),xt=It.multiply(tt).selfSubtract(me.multiply(ge)),pn=me.multiply(ne).selfSubtract(It.multiply(ze)),Mn=xe.selfDivide(pn).doubleValue(),Hn=xt.selfDivide(pn).doubleValue();return He.isNaN(Mn)||He.isInfinite(Mn)||He.isNaN(Hn)||He.isInfinite(Hn)?null:new ue(Mn,Hn)}},{key:"orientationIndexFilter",value:function(c,f,T){var W=null,me=(c.x-T.x)*(f.y-T.y),ze=(c.y-T.y)*(f.x-T.x),tt=me-ze;if(me>0){if(ze<=0)return I.signum(tt);W=me+ze}else{if(!(me<0)||ze>=0)return I.signum(tt);W=-me-ze}var It=I.DP_SAFE_EPSILON*W;return tt>=It||-tt>=It?I.signum(tt):2}},{key:"signum",value:function(c){return c>0?1:c<0?-1:0}}])}();Bn.DP_SAFE_EPSILON=1e-15;var en=function(){return n(function I(){E(this,I)},[{key:"getM",value:function(I){if(this.hasM()){var c=this.getDimension()-this.getMeasures();return this.getOrdinate(I,c)}return He.NaN}},{key:"setOrdinate",value:function(I,c,f){}},{key:"getZ",value:function(I){return this.hasZ()?this.getOrdinate(I,2):He.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(I,c){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(I){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(I){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(I){}},{key:"copy",value:function(){}},{key:"getY",value:function(I){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[ye]}}])}();en.X=0,en.Y=1,en.Z=2,en.M=3;var gn=function(){function I(){E(this,I)}return n(I,null,[{key:"index",value:function(c,f,T){return Bn.orientationIndex(c,f,T)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var c=arguments[0],f=c.length-1;if(f<3)throw new Ee("Ring has fewer than 4 points, so orientation cannot be determined");for(var T=c[0],W=0,me=1;me<=f;me++){var ze=c[me];ze.y>T.y&&(T=ze,W=me)}var tt=W;do(tt-=1)<0&&(tt=f);while(c[tt].equals2D(T)&&tt!==W);var It=W;do It=(It+1)%f;while(c[It].equals2D(T)&&It!==W);var ne=c[tt],ge=c[It];if(ne.equals2D(T)||ge.equals2D(T)||ne.equals2D(ge))return!1;var xe=I.index(ne,T,ge);return xe===0?ne.x>ge.x:xe>0}if(Me(arguments[0],en)){var xt=arguments[0],pn=xt.size()-1;if(pn<3)throw new Ee("Ring has fewer than 4 points, so orientation cannot be determined");for(var Mn=xt.getCoordinate(0),Hn=0,Qn=1;Qn<=pn;Qn++){var tr=xt.getCoordinate(Qn);tr.y>Mn.y&&(Mn=tr,Hn=Qn)}var Ir=null,oi=Hn;do(oi-=1)<0&&(oi=pn),Ir=xt.getCoordinate(oi);while(Ir.equals2D(Mn)&&oi!==Hn);var ni=null,_i=Hn;do _i=(_i+1)%pn,ni=xt.getCoordinate(_i);while(ni.equals2D(Mn)&&_i!==Hn);if(Ir.equals2D(Mn)||ni.equals2D(Mn)||Ir.equals2D(ni))return!1;var wi=I.index(Ir,Mn,ni);return wi===0?Ir.x>ni.x:wi>0}}}])}();gn.CLOCKWISE=-1,gn.RIGHT=gn.CLOCKWISE,gn.COUNTERCLOCKWISE=1,gn.LEFT=gn.COUNTERCLOCKWISE,gn.COLLINEAR=0,gn.STRAIGHT=gn.COLLINEAR;var ar=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(I,c){var f=this.getRightmostSideOfSegment(I,c);return f<0&&(f=this.getRightmostSideOfSegment(I,c-1)),f<0&&(this._minCoord=null,this.checkForRightmostCoordinate(I)),f}},{key:"findRightmostEdgeAtVertex",value:function(){var I=this._minDe.getEdge().getCoordinates();Qe.isTrue(this._minIndex>0&&this._minIndex<I.length,"rightmost point expected to be interior vertex of edge");var c=I[this._minIndex-1],f=I[this._minIndex+1],T=gn.index(this._minCoord,f,c),W=!1;(c.y<this._minCoord.y&&f.y<this._minCoord.y&&T===gn.COUNTERCLOCKWISE||c.y>this._minCoord.y&&f.y>this._minCoord.y&&T===gn.CLOCKWISE)&&(W=!0),W&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(I,c){var f=I.getEdge().getCoordinates();if(c<0||c+1>=f.length||f[c].y===f[c+1].y)return-1;var T=Pe.LEFT;return f[c].y<f[c+1].y&&(T=Pe.RIGHT),T}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(I){for(var c=I.getEdge().getCoordinates(),f=0;f<c.length-1;f++)(this._minCoord===null||c[f].x>this._minCoord.x)&&(this._minDe=I,this._minIndex=f,this._minCoord=c[f])}},{key:"findRightmostEdgeAtNode",value:function(){var I=this._minDe.getNode().getEdges();this._minDe=I.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(I){for(var c=I.iterator();c.hasNext();){var f=c.next();f.isForward()&&this.checkForRightmostCoordinate(f)}Qe.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Pe.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Sr=function(I){function c(f,T){var W;return E(this,c),(W=i(this,c,[T?f+" [ "+T+" ]":f])).pt=T?new ue(T):void 0,W.name=Object.keys({TopologyException:c})[0],W}return Y(c,I),n(c,[{key:"getCoordinate",value:function(){return this.pt}}])}(Tt),In=function(){return n(function I(){E(this,I),this.array=[]},[{key:"addLast",value:function(I){this.array.push(I)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),Gn=function(I){function c(f){var T;return E(this,c),(T=i(this,c)).array=[],f instanceof Pn&&T.addAll(f),T}return Y(c,I),n(c,[{key:"interfaces_",get:function(){return[gt,Pn]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(f){return arguments.length===1?this.array.push(f):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(f){var T,W=j(f);try{for(W.s();!(T=W.n()).done;){var me=T.value;this.array.push(me)}}catch(ze){W.e(ze)}finally{W.f()}}},{key:"set",value:function(f,T){var W=this.array[f];return this.array[f]=T,W}},{key:"iterator",value:function(){return new hn(this)}},{key:"get",value:function(f){if(f<0||f>=this.size())throw new Ve;return this.array[f]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(f){f?this.array.sort(function(T,W){return f.compare(T,W)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(f){for(var T=0,W=this.array.length;T<W;T++)if(this.array[T]===f)return!!this.array.splice(T,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(gt),hn=function(){return n(function I(c){E(this,I),this.arrayList=c,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Mt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(I){return this.arrayList.set(this.position-1,I)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),mn=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var I=this._dirEdgeList.iterator();I.hasNext();)I.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(I){for(var c=null,f=I.getEdges().iterator();f.hasNext();){var T=f.next();if(T.isVisited()||T.getSym().isVisited()){c=T;break}}if(c===null)throw new Sr("unable to find edge to compute depths at "+I.getCoordinate());I.getEdges().computeDepths(c);for(var W=I.getEdges().iterator();W.hasNext();){var me=W.next();me.setVisited(!0),this.copySymDepths(me)}}},{key:"computeDepth",value:function(I){this.clearVisitedEdges();var c=this._finder.getEdge();c.getNode(),c.getLabel(),c.setEdgeDepths(Pe.RIGHT,I),this.copySymDepths(c),this.computeDepths(c)}},{key:"create",value:function(I){this.addReachable(I),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var I=this._dirEdgeList.iterator();I.hasNext();){var c=I.next();c.getDepth(Pe.RIGHT)>=1&&c.getDepth(Pe.LEFT)<=0&&!c.isInteriorAreaEdge()&&c.setInResult(!0)}}},{key:"computeDepths",value:function(I){var c=new Dr,f=new In,T=I.getNode();for(f.addLast(T),c.add(T),I.setVisited(!0);!f.isEmpty();){var W=f.removeFirst();c.add(W),this.computeNodeDepth(W);for(var me=W.getEdges().iterator();me.hasNext();){var ze=me.next().getSym();if(!ze.isVisited()){var tt=ze.getNode();c.contains(tt)||(f.addLast(tt),c.add(tt))}}}}},{key:"compareTo",value:function(I){var c=I;return this._rightMostCoord.x<c._rightMostCoord.x?-1:this._rightMostCoord.x>c._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var I=new le,c=this._dirEdgeList.iterator();c.hasNext();)for(var f=c.next().getEdge().getCoordinates(),T=0;T<f.length-1;T++)I.expandToInclude(f[T]);this._env=I}return this._env}},{key:"addReachable",value:function(I){var c=new Gt;for(c.add(I);!c.empty();){var f=c.pop();this.add(f,c)}}},{key:"copySymDepths",value:function(I){var c=I.getSym();c.setDepth(Pe.LEFT,I.getDepth(Pe.RIGHT)),c.setDepth(Pe.RIGHT,I.getDepth(Pe.LEFT))}},{key:"add",value:function(I,c){I.setVisited(!0),this._nodes.add(I);for(var f=I.getEdges().iterator();f.hasNext();){var T=f.next();this._dirEdgeList.add(T);var W=T.getSym().getNode();W.isVisited()||c.push(W)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new Gn,this._nodes=new Gn,this._rightMostCoord=null,this._env=null,this._finder=new ar}}])}(),cn=function(){return n(function I(){E(this,I)},null,[{key:"intersection",value:function(I,c,f,T){var W=I.x<c.x?I.x:c.x,me=I.y<c.y?I.y:c.y,ze=I.x>c.x?I.x:c.x,tt=I.y>c.y?I.y:c.y,It=f.x<T.x?f.x:T.x,ne=f.y<T.y?f.y:T.y,ge=f.x>T.x?f.x:T.x,xe=f.y>T.y?f.y:T.y,xt=((W>It?W:It)+(ze<ge?ze:ge))/2,pn=((me>ne?me:ne)+(tt<xe?tt:xe))/2,Mn=I.x-xt,Hn=I.y-pn,Qn=c.x-xt,tr=c.y-pn,Ir=f.x-xt,oi=f.y-pn,ni=T.x-xt,_i=T.y-pn,wi=Hn-tr,Si=Qn-Mn,So=Mn*tr-Qn*Hn,io=oi-_i,Wi=ni-Ir,xo=Ir*_i-ni*oi,Qi=wi*Wi-io*Si,Ho=(Si*xo-Wi*So)/Qi,La=(io*So-wi*xo)/Qi;return He.isNaN(Ho)||He.isInfinite(Ho)||He.isNaN(La)||He.isInfinite(La)?null:new ue(Ho+xt,La+pn)}}])}(),Ln=function(){return n(function I(){E(this,I)},null,[{key:"arraycopy",value:function(I,c,f,T,W){for(var me=0,ze=c;ze<c+W;ze++)f[T+me]=I[ze],me++}},{key:"getProperty",value:function(I){return{"line.separator":`
`}[I]}}])}(),Er=function(){function I(){E(this,I)}return n(I,null,[{key:"log10",value:function(c){var f=Math.log(c);return He.isInfinite(f)||He.isNaN(f)?f:f/I.LOG_10}},{key:"min",value:function(c,f,T,W){var me=c;return f<me&&(me=f),T<me&&(me=T),W<me&&(me=W),me}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],f=arguments[1],T=arguments[2];return c<f?f:c>T?T:c}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var W=arguments[0],me=arguments[1],ze=arguments[2];return W<me?me:W>ze?ze:W}}},{key:"wrap",value:function(c,f){return c<0?f- -c%f:c%f}},{key:"max",value:function(){if(arguments.length===3){var c=arguments[1],f=arguments[2],T=arguments[0];return c>T&&(T=c),f>T&&(T=f),T}if(arguments.length===4){var W=arguments[1],me=arguments[2],ze=arguments[3],tt=arguments[0];return W>tt&&(tt=W),me>tt&&(tt=me),ze>tt&&(tt=ze),tt}}},{key:"average",value:function(c,f){return(c+f)/2}}])}();Er.LOG_10=Math.log(10);var mr=function(){function I(){E(this,I)}return n(I,null,[{key:"segmentToSegment",value:function(c,f,T,W){if(c.equals(f))return I.pointToSegment(c,T,W);if(T.equals(W))return I.pointToSegment(W,c,f);var me=!1;if(le.intersects(c,f,T,W)){var ze=(f.x-c.x)*(W.y-T.y)-(f.y-c.y)*(W.x-T.x);if(ze===0)me=!0;else{var tt=(c.y-T.y)*(W.x-T.x)-(c.x-T.x)*(W.y-T.y),It=((c.y-T.y)*(f.x-c.x)-(c.x-T.x)*(f.y-c.y))/ze,ne=tt/ze;(ne<0||ne>1||It<0||It>1)&&(me=!0)}}else me=!0;return me?Er.min(I.pointToSegment(c,T,W),I.pointToSegment(f,T,W),I.pointToSegment(T,c,f),I.pointToSegment(W,c,f)):0}},{key:"pointToSegment",value:function(c,f,T){if(f.x===T.x&&f.y===T.y)return c.distance(f);var W=(T.x-f.x)*(T.x-f.x)+(T.y-f.y)*(T.y-f.y),me=((c.x-f.x)*(T.x-f.x)+(c.y-f.y)*(T.y-f.y))/W;if(me<=0)return c.distance(f);if(me>=1)return c.distance(T);var ze=((f.y-c.y)*(T.x-f.x)-(f.x-c.x)*(T.y-f.y))/W;return Math.abs(ze)*Math.sqrt(W)}},{key:"pointToLinePerpendicular",value:function(c,f,T){var W=(T.x-f.x)*(T.x-f.x)+(T.y-f.y)*(T.y-f.y),me=((f.y-c.y)*(T.x-f.x)-(f.x-c.x)*(T.y-f.y))/W;return Math.abs(me)*Math.sqrt(W)}},{key:"pointToSegmentString",value:function(c,f){if(f.length===0)throw new Ee("Line array must contain at least one vertex");for(var T=c.distance(f[0]),W=0;W<f.length-1;W++){var me=I.pointToSegment(c,f[W],f[W+1]);me<T&&(T=me)}return T}}])}(),Jr=function(){return n(function I(){E(this,I)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Me(arguments[0],en);else if(arguments.length!==2){if(arguments.length===3){var I=arguments[0],c=arguments[1];return this.create(I,c)}}}}])}(),Ie=function(){return n(function I(){E(this,I)},[{key:"filter",value:function(I){}}])}(),Ot=function(){return n(function I(){E(this,I)},null,[{key:"ofLine",value:function(I){var c=I.size();if(c<=1)return 0;var f=0,T=new ue;I.getCoordinate(0,T);for(var W=T.x,me=T.y,ze=1;ze<c;ze++){I.getCoordinate(ze,T);var tt=T.x,It=T.y,ne=tt-W,ge=It-me;f+=Math.sqrt(ne*ne+ge*ge),W=tt,me=It}return f}}])}(),St=n(function I(){E(this,I)}),at=function(){function I(){E(this,I)}return n(I,null,[{key:"copyCoord",value:function(c,f,T,W){for(var me=Math.min(c.getDimension(),T.getDimension()),ze=0;ze<me;ze++)T.setOrdinate(W,ze,c.getOrdinate(f,ze))}},{key:"isRing",value:function(c){var f=c.size();return f===0||!(f<=3)&&c.getOrdinate(0,en.X)===c.getOrdinate(f-1,en.X)&&c.getOrdinate(0,en.Y)===c.getOrdinate(f-1,en.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Me(arguments[0],en)&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1];I.scroll(c,f,I.isRing(c))}else if(Me(arguments[0],en)&&arguments[1]instanceof ue){var T=arguments[0],W=arguments[1],me=I.indexOf(W,T);if(me<=0)return null;I.scroll(T,me)}}else if(arguments.length===3){var ze=arguments[0],tt=arguments[1],It=arguments[2];if(tt<=0)return null;for(var ne=ze.copy(),ge=It?ze.size()-1:ze.size(),xe=0;xe<ge;xe++)for(var xt=0;xt<ze.getDimension();xt++)ze.setOrdinate(xe,xt,ne.getOrdinate((tt+xe)%ge,xt));if(It)for(var pn=0;pn<ze.getDimension();pn++)ze.setOrdinate(ge,pn,ze.getOrdinate(0,pn))}}},{key:"isEqual",value:function(c,f){var T=c.size();if(T!==f.size())return!1;for(var W=Math.min(c.getDimension(),f.getDimension()),me=0;me<T;me++)for(var ze=0;ze<W;ze++){var tt=c.getOrdinate(me,ze),It=f.getOrdinate(me,ze);if(c.getOrdinate(me,ze)!==f.getOrdinate(me,ze)&&(!He.isNaN(tt)||!He.isNaN(It)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var c=arguments[0];return I.minCoordinateIndex(c,0,c.size()-1)}if(arguments.length===3){for(var f=arguments[0],T=arguments[2],W=-1,me=null,ze=arguments[1];ze<=T;ze++){var tt=f.getCoordinate(ze);(me===null||me.compareTo(tt)>0)&&(me=tt,W=ze)}return W}}},{key:"extend",value:function(c,f,T){var W=c.create(T,f.getDimension()),me=f.size();if(I.copy(f,0,W,0,me),me>0)for(var ze=me;ze<T;ze++)I.copy(f,me-1,W,ze,1);return W}},{key:"reverse",value:function(c){for(var f=c.size()-1,T=Math.trunc(f/2),W=0;W<=T;W++)I.swap(c,W,f-W)}},{key:"swap",value:function(c,f,T){if(f===T)return null;for(var W=0;W<c.getDimension();W++){var me=c.getOrdinate(f,W);c.setOrdinate(f,W,c.getOrdinate(T,W)),c.setOrdinate(T,W,me)}}},{key:"copy",value:function(c,f,T,W,me){for(var ze=0;ze<me;ze++)I.copyCoord(c,f+ze,T,W+ze)}},{key:"ensureValidRing",value:function(c,f){var T=f.size();return T===0?f:T<=3?I.createClosedRing(c,f,4):f.getOrdinate(0,en.X)===f.getOrdinate(T-1,en.X)&&f.getOrdinate(0,en.Y)===f.getOrdinate(T-1,en.Y)?f:I.createClosedRing(c,f,T+1)}},{key:"indexOf",value:function(c,f){for(var T=0;T<f.size();T++)if(c.x===f.getOrdinate(T,en.X)&&c.y===f.getOrdinate(T,en.Y))return T;return-1}},{key:"createClosedRing",value:function(c,f,T){var W=c.create(T,f.getDimension()),me=f.size();I.copy(f,0,W,0,me);for(var ze=me;ze<T;ze++)I.copy(f,0,W,ze,1);return W}},{key:"minCoordinate",value:function(c){for(var f=null,T=0;T<c.size();T++){var W=c.getCoordinate(T);(f===null||f.compareTo(W)>0)&&(f=W)}return f}}])}(),Xe=function(){function I(){E(this,I)}return n(I,null,[{key:"toDimensionSymbol",value:function(c){switch(c){case I.FALSE:return I.SYM_FALSE;case I.TRUE:return I.SYM_TRUE;case I.DONTCARE:return I.SYM_DONTCARE;case I.P:return I.SYM_P;case I.L:return I.SYM_L;case I.A:return I.SYM_A}throw new Ee("Unknown dimension value: "+c)}},{key:"toDimensionValue",value:function(c){switch(Sn.toUpperCase(c)){case I.SYM_FALSE:return I.FALSE;case I.SYM_TRUE:return I.TRUE;case I.SYM_DONTCARE:return I.DONTCARE;case I.SYM_P:return I.P;case I.SYM_L:return I.L;case I.SYM_A:return I.A}throw new Ee("Unknown dimension symbol: "+c)}}])}();Xe.P=0,Xe.L=1,Xe.A=2,Xe.FALSE=-1,Xe.TRUE=-2,Xe.DONTCARE=-3,Xe.SYM_FALSE="F",Xe.SYM_TRUE="T",Xe.SYM_DONTCARE="*",Xe.SYM_P="0",Xe.SYM_L="1",Xe.SYM_A="2";var Nt=function(){return n(function I(){E(this,I)},[{key:"filter",value:function(I){}}])}(),Nn=function(){return n(function I(){E(this,I)},[{key:"filter",value:function(I,c){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Jn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new le:this._points.expandEnvelope(new le)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new c(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];if(!this.isEquivalentClass(f))return!1;var W=f;if(this._points.size()!==W._points.size())return!1;for(var me=0;me<this._points.size();me++)if(!this.equal(this._points.getCoordinate(me),W._points.getCoordinate(me),T))return!1;return!0}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var f=0;f<Math.trunc(this._points.size()/2);f++){var T=this._points.size()-1-f;if(!this._points.getCoordinate(f).equals(this._points.getCoordinate(T))){if(this._points.getCoordinate(f).compareTo(this._points.getCoordinate(T))>0){var W=this._points.copy();at.reverse(W),this._points=W}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Xe.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var f=this._points.copy();return at.reverse(f),this.getFactory().createLineString(f)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Je.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Ot.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var f=arguments[0],T=0,W=0;T<this._points.size()&&W<f._points.size();){var me=this._points.getCoordinate(T).compareTo(f._points.getCoordinate(W));if(me!==0)return me;T++,W++}return T<this._points.size()?1:W<f._points.size()?-1:0}if(arguments.length===2){var ze=arguments[0];return arguments[1].compare(this._points,ze._points)}}},{key:"apply",value:function(){if(Me(arguments[0],Ie))for(var f=arguments[0],T=0;T<this._points.size();T++)f.filter(this._points.getCoordinate(T));else if(Me(arguments[0],Nn)){var W=arguments[0];if(this._points.size()===0)return null;for(var me=0;me<this._points.size()&&(W.filter(this._points,me),!W.isDone());me++);W.isGeometryChanged()&&this.geometryChanged()}else Me(arguments[0],Nt)?arguments[0].filter(this):Me(arguments[0],Le)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new or}},{key:"isEquivalentClass",value:function(f){return f instanceof c}},{key:"getCoordinateN",value:function(f){return this._points.getCoordinate(f)}},{key:"getGeometryType",value:function(){return Je.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(f){if(f===null&&(f=this.getFactory().getCoordinateSequenceFactory().create([])),f.size()===1)throw new Ee("Invalid number of points in LineString (found "+f.size()+" - must be 0 or >= 2)");this._points=f}},{key:"isCoordinate",value:function(f){for(var T=0;T<this._points.size();T++)if(this._points.getCoordinate(T).equals(f))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(f){return this.getFactory().createPoint(this._points.getCoordinate(f))}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var f=arguments[0],T=arguments[1];Je.constructor_.call(this,T),this.init(f)}}}}])}(Je),rr=n(function I(){E(this,I)}),Br=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new le;var f=new le;return f.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),f}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new c(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];return!!this.isEquivalentClass(f)&&(!(!this.isEmpty()||!f.isEmpty())||this.isEmpty()===f.isEmpty()&&this.equal(f.getCoordinate(),this.getCoordinate(),T))}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Xe.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Je.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var f=arguments[0];return this.getCoordinate().compareTo(f.getCoordinate())}if(arguments.length===2){var T=arguments[0];return arguments[1].compare(this._coordinates,T._coordinates)}}},{key:"apply",value:function(){if(Me(arguments[0],Ie)){var f=arguments[0];if(this.isEmpty())return null;f.filter(this.getCoordinate())}else if(Me(arguments[0],Nn)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this._coordinates,0),T.isGeometryChanged()&&this.geometryChanged()}else Me(arguments[0],Nt)?arguments[0].filter(this):Me(arguments[0],Le)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Je.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(f){f===null&&(f=this.getFactory().getCoordinateSequenceFactory().create([])),Qe.isTrue(f.size()<=1),this._coordinates=f}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[rr]}}],[{key:"constructor_",value:function(){this._coordinates=null;var f=arguments[0],T=arguments[1];Je.constructor_.call(this,T),this.init(f)}}])}(Je),Hr=function(){function I(){E(this,I)}return n(I,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var c=arguments[0];return Math.abs(I.ofRingSigned(c))}if(Me(arguments[0],en)){var f=arguments[0];return Math.abs(I.ofRingSigned(f))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var c=arguments[0];if(c.length<3)return 0;for(var f=0,T=c[0].x,W=1;W<c.length-1;W++){var me=c[W].x-T,ze=c[W+1].y;f+=me*(c[W-1].y-ze)}return f/2}if(Me(arguments[0],en)){var tt=arguments[0],It=tt.size();if(It<3)return 0;var ne=new ue,ge=new ue,xe=new ue;tt.getCoordinate(0,ge),tt.getCoordinate(1,xe);var xt=ge.x;xe.x-=xt;for(var pn=0,Mn=1;Mn<It-1;Mn++)ne.y=ge.y,ge.x=xe.x,ge.y=xe.y,tt.getCoordinate(Mn+1,xe),xe.x-=xt,pn+=ge.x*(ne.y-xe.y);return pn/2}}}])}(),zr=function(){return n(function I(){E(this,I)},null,[{key:"sort",value:function(){var I=arguments,c=arguments[0];if(arguments.length===1)c.sort(function(xt,pn){return xt.compareTo(pn)});else if(arguments.length===2)c.sort(function(xt,pn){return I[1].compare(xt,pn)});else if(arguments.length===3){var f=c.slice(arguments[1],arguments[2]);f.sort();var T=c.slice(0,arguments[1]).concat(f,c.slice(arguments[2],c.length));c.splice(0,c.length);var W,me=j(T);try{for(me.s();!(W=me.n()).done;){var ze=W.value;c.push(ze)}}catch(xt){me.e(xt)}finally{me.f()}}else if(arguments.length===4){var tt=c.slice(arguments[1],arguments[2]);tt.sort(function(xt,pn){return I[3].compare(xt,pn)});var It=c.slice(0,arguments[1]).concat(tt,c.slice(arguments[2],c.length));c.splice(0,c.length);var ne,ge=j(It);try{for(ge.s();!(ne=ge.n()).done;){var xe=ne.value;c.push(xe)}}catch(xt){ge.e(xt)}finally{ge.f()}}}},{key:"asList",value:function(I){var c,f=new Gn,T=j(I);try{for(T.s();!(c=T.n()).done;){var W=c.value;f.add(W)}}catch(me){T.e(me)}finally{T.f()}return f}},{key:"copyOf",value:function(I,c){return I.slice(0,c)}}])}(),Tr=n(function I(){E(this,I)}),fn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var f=new Array(this.getNumPoints()).fill(null),T=-1,W=this._shell.getCoordinates(),me=0;me<W.length;me++)f[++T]=W[me];for(var ze=0;ze<this._holes.length;ze++)for(var tt=this._holes[ze].getCoordinates(),It=0;It<tt.length;It++)f[++T]=tt[It];return f}},{key:"getArea",value:function(){var f=0;f+=Hr.ofRing(this._shell.getCoordinateSequence());for(var T=0;T<this._holes.length;T++)f-=Hr.ofRing(this._holes[T].getCoordinateSequence());return f}},{key:"copyInternal",value:function(){for(var f=this._shell.copy(),T=new Array(this._holes.length).fill(null),W=0;W<this._holes.length;W++)T[W]=this._holes[W].copy();return new c(f,T,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var f=this._shell.getCoordinateSequence(),T=this.getEnvelopeInternal(),W=0;W<5;W++){var me=f.getX(W);if(me!==T.getMinX()&&me!==T.getMaxX())return!1;var ze=f.getY(W);if(ze!==T.getMinY()&&ze!==T.getMaxY())return!1}for(var tt=f.getX(0),It=f.getY(0),ne=1;ne<=4;ne++){var ge=f.getX(ne),xe=f.getY(ne);if(ge!==tt==(xe!==It))return!1;tt=ge,It=xe}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];if(!this.isEquivalentClass(f))return!1;var W=f,me=this._shell,ze=W._shell;if(!me.equalsExact(ze,T)||this._holes.length!==W._holes.length)return!1;for(var tt=0;tt<this._holes.length;tt++)if(!this._holes[tt].equalsExact(W._holes[tt],T))return!1;return!0}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var f=0;f<this._holes.length;f++)this._holes[f]=this.normalized(this._holes[f],!1);zr.sort(this._holes)}else if(arguments.length===2){var T=arguments[0],W=arguments[1];if(T.isEmpty())return null;var me=T.getCoordinateSequence(),ze=at.minCoordinateIndex(me,0,me.size()-2);at.scroll(me,ze,!0),gn.isCCW(me)===W&&at.reverse(me)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var f=this.getExteriorRing().reverse(),T=new Array(this.getNumInteriorRing()).fill(null),W=0;W<T.length;W++)T[W]=this.getInteriorRingN(W).reverse();return this.getFactory().createPolygon(f,T)}},{key:"getTypeCode",value:function(){return Je.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var f=0;f+=this._shell.getLength();for(var T=0;T<this._holes.length;T++)f+=this._holes[T].getLength();return f}},{key:"getNumPoints",value:function(){for(var f=this._shell.getNumPoints(),T=0;T<this._holes.length;T++)f+=this._holes[T].getNumPoints();return f}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(f,T){var W=f.copy();return this.normalize(W,T),W}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var f=arguments[0],T=this._shell,W=f._shell;return T.compareToSameClass(W)}if(arguments.length===2){var me=arguments[1],ze=arguments[0],tt=this._shell,It=ze._shell,ne=tt.compareToSameClass(It,me);if(ne!==0)return ne;for(var ge=this.getNumInteriorRing(),xe=ze.getNumInteriorRing(),xt=0;xt<ge&&xt<xe;){var pn=this.getInteriorRingN(xt),Mn=ze.getInteriorRingN(xt),Hn=pn.compareToSameClass(Mn,me);if(Hn!==0)return Hn;xt++}return xt<ge?1:xt<xe?-1:0}}},{key:"apply",value:function(){if(Me(arguments[0],Ie)){var f=arguments[0];this._shell.apply(f);for(var T=0;T<this._holes.length;T++)this._holes[T].apply(f)}else if(Me(arguments[0],Nn)){var W=arguments[0];if(this._shell.apply(W),!W.isDone())for(var me=0;me<this._holes.length&&(this._holes[me].apply(W),!W.isDone());me++);W.isGeometryChanged()&&this.geometryChanged()}else if(Me(arguments[0],Nt))arguments[0].filter(this);else if(Me(arguments[0],Le)){var ze=arguments[0];ze.filter(this),this._shell.apply(ze);for(var tt=0;tt<this._holes.length;tt++)this._holes[tt].apply(ze)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var f=new Array(this._holes.length+1).fill(null);f[0]=this._shell;for(var T=0;T<this._holes.length;T++)f[T+1]=this._holes[T];return f.length<=1?this.getFactory().createLinearRing(f[0].getCoordinateSequence()):this.getFactory().createMultiLineString(f)}},{key:"getGeometryType",value:function(){return Je.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(f){return this._holes[f]}},{key:"interfaces_",get:function(){return[Tr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var f=arguments[0],T=arguments[1],W=arguments[2];if(Je.constructor_.call(this,W),f===null&&(f=this.getFactory().createLinearRing()),T===null&&(T=[]),Je.hasNullElements(T))throw new Ee("holes must not contain null elements");if(f.isEmpty()&&Je.hasNonEmptyElements(T))throw new Ee("shell is empty but holes are not");this._shell=f,this._holes=T}}])}(Je),Ne=function(I){function c(){return E(this,c),i(this,c,arguments)}return Y(c,I),n(c)}(wr),Ge=function(I){function c(f){var T;return E(this,c),(T=i(this,c)).array=[],f instanceof Pn&&T.addAll(f),T}return Y(c,I),n(c,[{key:"contains",value:function(f){var T,W=j(this.array);try{for(W.s();!(T=W.n()).done;)if(T.value.compareTo(f)===0)return!0}catch(me){W.e(me)}finally{W.f()}return!1}},{key:"add",value:function(f){if(this.contains(f))return!1;for(var T=0,W=this.array.length;T<W;T++)if(this.array[T].compareTo(f)===1)return!!this.array.splice(T,0,f);return this.array.push(f),!0}},{key:"addAll",value:function(f){var T,W=j(f);try{for(W.s();!(T=W.n()).done;){var me=T.value;this.add(me)}}catch(ze){W.e(ze)}finally{W.f()}return!0}},{key:"remove",value:function(){throw new or}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new ot(this.array)}}])}(Ne),ot=function(){return n(function I(c){E(this,I),this.array=c,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Mt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new or}}])}(),Dt=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"computeEnvelopeInternal",value:function(){for(var f=new le,T=0;T<this._geometries.length;T++)f.expandToInclude(this._geometries[T].getEnvelopeInternal());return f}},{key:"getGeometryN",value:function(f){return this._geometries[f]}},{key:"getCoordinates",value:function(){for(var f=new Array(this.getNumPoints()).fill(null),T=-1,W=0;W<this._geometries.length;W++)for(var me=this._geometries[W].getCoordinates(),ze=0;ze<me.length;ze++)f[++T]=me[ze];return f}},{key:"getArea",value:function(){for(var f=0,T=0;T<this._geometries.length;T++)f+=this._geometries[T].getArea();return f}},{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),T=0;T<f.length;T++)f[T]=this._geometries[T].copy();return new c(f,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];if(!this.isEquivalentClass(f))return!1;var W=f;if(this._geometries.length!==W._geometries.length)return!1;for(var me=0;me<this._geometries.length;me++)if(!this._geometries[me].equalsExact(W._geometries[me],T))return!1;return!0}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var f=0;f<this._geometries.length;f++)this._geometries[f].normalize();zr.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var f=Xe.FALSE,T=0;T<this._geometries.length;T++)f=Math.max(f,this._geometries[T].getBoundaryDimension());return f}},{key:"reverseInternal",value:function(){for(var f=this._geometries.length,T=new Gn(f),W=0;W<f;W++)T.add(this._geometries[W].reverse());return this.getFactory().buildGeometry(T)}},{key:"getTypeCode",value:function(){return Je.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var f=Xe.FALSE,T=0;T<this._geometries.length;T++)f=Math.max(f,this._geometries[T].getDimension());return f}},{key:"getLength",value:function(){for(var f=0,T=0;T<this._geometries.length;T++)f+=this._geometries[T].getLength();return f}},{key:"getNumPoints",value:function(){for(var f=0,T=0;T<this._geometries.length;T++)f+=this._geometries[T].getNumPoints();return f}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var f=arguments[0],T=new Ge(zr.asList(this._geometries)),W=new Ge(zr.asList(f._geometries));return this.compare(T,W)}if(arguments.length===2){for(var me=arguments[1],ze=arguments[0],tt=this.getNumGeometries(),It=ze.getNumGeometries(),ne=0;ne<tt&&ne<It;){var ge=this.getGeometryN(ne),xe=ze.getGeometryN(ne),xt=ge.compareToSameClass(xe,me);if(xt!==0)return xt;ne++}return ne<tt?1:ne<It?-1:0}}},{key:"apply",value:function(){if(Me(arguments[0],Ie))for(var f=arguments[0],T=0;T<this._geometries.length;T++)this._geometries[T].apply(f);else if(Me(arguments[0],Nn)){var W=arguments[0];if(this._geometries.length===0)return null;for(var me=0;me<this._geometries.length&&(this._geometries[me].apply(W),!W.isDone());me++);W.isGeometryChanged()&&this.geometryChanged()}else if(Me(arguments[0],Nt)){var ze=arguments[0];ze.filter(this);for(var tt=0;tt<this._geometries.length;tt++)this._geometries[tt].apply(ze)}else if(Me(arguments[0],Le)){var It=arguments[0];It.filter(this);for(var ne=0;ne<this._geometries.length;ne++)this._geometries[ne].apply(It)}}},{key:"getBoundary",value:function(){return Je.checkNotGeometryCollection(this),Qe.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Je.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var f=0;f<this._geometries.length;f++)if(!this._geometries[f].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var f=arguments[0],T=arguments[1];if(Je.constructor_.call(this,T),f===null&&(f=[]),Je.hasNullElements(f))throw new Ee("geometries must not contain null elements");this._geometries=f}}}}])}(Je),jt=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),T=0;T<f.length;T++)f[T]=this._geometries[T].copy();return new c(f,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];return!!this.isEquivalentClass(f)&&B(c,"equalsExact",this,1).call(this,f,T)}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var f=arguments[0];return this._geometries[f].getCoordinate()}return B(c,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Xe.FALSE}},{key:"getTypeCode",value:function(){return Je.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Je.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[rr]}}],[{key:"constructor_",value:function(){var f=arguments[0],T=arguments[1];Dt.constructor_.call(this,f,T)}}])}(Dt),sn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"copyInternal",value:function(){return new c(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Xe.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||B(c,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var f=this._points.copy();return at.reverse(f),this.getFactory().createLinearRing(f)}},{key:"getTypeCode",value:function(){return Je.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!B(c,"isClosed",this,1).call(this))throw new Ee("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<c.MINIMUM_VALID_SIZE)throw new Ee("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Je.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var f=arguments[0],T=arguments[1];Jn.constructor_.call(this,f,T),this.validateConstruction()}}])}(Jn);sn.MINIMUM_VALID_SIZE=4;var xn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"setOrdinate",value:function(f,T){switch(f){case c.X:this.x=T;break;case c.Y:this.y=T;break;default:throw new Ee("Invalid ordinate index: "+f)}}},{key:"getZ",value:function(){return ue.NULL_ORDINATE}},{key:"getOrdinate",value:function(f){switch(f){case c.X:return this.x;case c.Y:return this.y}throw new Ee("Invalid ordinate index: "+f)}},{key:"setZ",value:function(f){throw new Ee("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new c(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)ue.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof c){var f=arguments[0];ue.constructor_.call(this,f.x,f.y)}else if(arguments[0]instanceof ue){var T=arguments[0];ue.constructor_.call(this,T.x,T.y)}}else if(arguments.length===2){var W=arguments[0],me=arguments[1];ue.constructor_.call(this,W,me,ue.NULL_ORDINATE)}}}])}(ue);xn.X=0,xn.Y=1,xn.Z=-1,xn.M=-1;var rn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(f,T){switch(f){case c.X:this.x=T;break;case c.Y:this.y=T;break;case c.M:this._m=T;break;default:throw new Ee("Invalid ordinate index: "+f)}}},{key:"setM",value:function(f){this._m=f}},{key:"getZ",value:function(){return ue.NULL_ORDINATE}},{key:"getOrdinate",value:function(f){switch(f){case c.X:return this.x;case c.Y:return this.y;case c.M:return this._m}throw new Ee("Invalid ordinate index: "+f)}},{key:"setZ",value:function(f){throw new Ee("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new c(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ(),this._m=f.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)ue.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof c){var f=arguments[0];ue.constructor_.call(this,f.x,f.y),this._m=f._m}else if(arguments[0]instanceof ue){var T=arguments[0];ue.constructor_.call(this,T.x,T.y),this._m=this.getM()}}else if(arguments.length===3){var W=arguments[0],me=arguments[1],ze=arguments[2];ue.constructor_.call(this,W,me,ue.NULL_ORDINATE),this._m=ze}}}])}(ue);rn.X=0,rn.Y=1,rn.Z=-1,rn.M=2;var Fn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(f,T){switch(f){case ue.X:this.x=T;break;case ue.Y:this.y=T;break;case ue.Z:this.z=T;break;case ue.M:this._m=T;break;default:throw new Ee("Invalid ordinate index: "+f)}}},{key:"setM",value:function(f){this._m=f}},{key:"getOrdinate",value:function(f){switch(f){case ue.X:return this.x;case ue.Y:return this.y;case ue.Z:return this.getZ();case ue.M:return this.getM()}throw new Ee("Invalid ordinate index: "+f)}},{key:"copy",value:function(){return new c(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(f){this.x=f.x,this.y=f.y,this.z=f.getZ(),this._m=f.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)ue.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof c){var f=arguments[0];ue.constructor_.call(this,f),this._m=f._m}else if(arguments[0]instanceof ue){var T=arguments[0];ue.constructor_.call(this,T),this._m=this.getM()}}else if(arguments.length===4){var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3];ue.constructor_.call(this,W,me,ze),this._m=tt}}}])}(ue),Un=function(){function I(){E(this,I)}return n(I,null,[{key:"measures",value:function(c){return c instanceof xn?0:c instanceof rn||c instanceof Fn?1:0}},{key:"dimension",value:function(c){return c instanceof xn?2:c instanceof rn?3:c instanceof Fn?4:3}},{key:"create",value:function(){if(arguments.length===1){var c=arguments[0];return I.create(c,0)}if(arguments.length===2){var f=arguments[0],T=arguments[1];return f===2?new xn:f===3&&T===0?new ue:f===3&&T===1?new rn:f===4&&T===1?new Fn:new ue}}}])}(),jn=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"getCoordinate",value:function(f){return this.get(f)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Me(arguments[0],Pn)){for(var f=arguments[1],T=!1,W=arguments[0].iterator();W.hasNext();)this.add(W.next(),f),T=!0;return T}return B(c,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var f=B(c,"clone",this,1).call(this),T=0;T<this.size();T++)f.add(T,this.get(T).clone());return f}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(c.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(c.coordArrayType);for(var f=this.size(),T=new Array(f).fill(null),W=0;W<f;W++)T[W]=this.get(f-W-1);return T}}},{key:"add",value:function(){if(arguments.length===1){var f=arguments[0];return B(c,"add",this,1).call(this,f)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],W=arguments[1];return this.add(T,W,!0),!0}if(arguments[0]instanceof ue&&typeof arguments[1]=="boolean"){var me=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(me))return null;B(c,"add",this,1).call(this,me)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var ze=arguments[0],tt=arguments[1];return this.add(ze,tt),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var It=arguments[0],ne=arguments[1];if(arguments[2])for(var ge=0;ge<It.length;ge++)this.add(It[ge],ne);else for(var xe=It.length-1;xe>=0;xe--)this.add(It[xe],ne);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof ue){var xt=arguments[0],pn=arguments[1];if(!arguments[2]){var Mn=this.size();if(Mn>0&&(xt>0&&this.get(xt-1).equals2D(pn)||xt<Mn&&this.get(xt).equals2D(pn)))return null}B(c,"add",this,1).call(this,xt,pn)}}else if(arguments.length===4){var Hn=arguments[0],Qn=arguments[1],tr=arguments[2],Ir=arguments[3],oi=1;tr>Ir&&(oi=-1);for(var ni=tr;ni!==Ir;ni+=oi)this.add(Hn[ni],Qn);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var f=this.get(0).copy();this.add(f,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var f=arguments[0];this.ensureCapacity(f.length),this.add(f,!0)}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this.ensureCapacity(T.length),this.add(T,W)}}}}])}(Gn);jn.coordArrayType=new Array(0).fill(null);var _n=function(){function I(){E(this,I)}return n(I,null,[{key:"isRing",value:function(c){return!(c.length<4)&&!!c[0].equals2D(c[c.length-1])}},{key:"ptNotInList",value:function(c,f){for(var T=0;T<c.length;T++){var W=c[T];if(I.indexOf(W,f)<0)return W}return null}},{key:"scroll",value:function(c,f){var T=I.indexOf(f,c);if(T<0)return null;var W=new Array(c.length).fill(null);Ln.arraycopy(c,T,W,0,c.length-T),Ln.arraycopy(c,0,W,c.length-T,T),Ln.arraycopy(W,0,c,0,c.length)}},{key:"equals",value:function(){if(arguments.length===2){var c=arguments[0],f=arguments[1];if(c===f)return!0;if(c===null||f===null||c.length!==f.length)return!1;for(var T=0;T<c.length;T++)if(!c[T].equals(f[T]))return!1;return!0}if(arguments.length===3){var W=arguments[0],me=arguments[1],ze=arguments[2];if(W===me)return!0;if(W===null||me===null||W.length!==me.length)return!1;for(var tt=0;tt<W.length;tt++)if(ze.compare(W[tt],me[tt])!==0)return!1;return!0}}},{key:"intersection",value:function(c,f){for(var T=new jn,W=0;W<c.length;W++)f.intersects(c[W])&&T.add(c[W],!0);return T.toCoordinateArray()}},{key:"measures",value:function(c){if(c===null||c.length===0)return 0;var f,T=0,W=j(c);try{for(W.s();!(f=W.n()).done;){var me=f.value;T=Math.max(T,Un.measures(me))}}catch(ze){W.e(ze)}finally{W.f()}return T}},{key:"hasRepeatedPoints",value:function(c){for(var f=1;f<c.length;f++)if(c[f-1].equals(c[f]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(c){return I.hasRepeatedPoints(c)?new jn(c,!1).toCoordinateArray():c}},{key:"reverse",value:function(c){for(var f=c.length-1,T=Math.trunc(f/2),W=0;W<=T;W++){var me=c[W];c[W]=c[f-W],c[f-W]=me}}},{key:"removeNull",value:function(c){for(var f=0,T=0;T<c.length;T++)c[T]!==null&&f++;var W=new Array(f).fill(null);if(f===0)return W;for(var me=0,ze=0;ze<c.length;ze++)c[ze]!==null&&(W[me++]=c[ze]);return W}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var c=arguments[0],f=new Array(c.length).fill(null),T=0;T<c.length;T++)f[T]=c[T].copy();return f}if(arguments.length===5)for(var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3],It=arguments[4],ne=0;ne<It;ne++)ze[tt+ne]=W[me+ne].copy()}},{key:"isEqualReversed",value:function(c,f){for(var T=0;T<c.length;T++){var W=c[T],me=f[c.length-T-1];if(W.compareTo(me)!==0)return!1}return!0}},{key:"envelope",value:function(c){for(var f=new le,T=0;T<c.length;T++)f.expandToInclude(c[T]);return f}},{key:"toCoordinateArray",value:function(c){return c.toArray(I.coordArrayType)}},{key:"dimension",value:function(c){if(c===null||c.length===0)return 3;var f,T=0,W=j(c);try{for(W.s();!(f=W.n()).done;){var me=f.value;T=Math.max(T,Un.dimension(me))}}catch(ze){W.e(ze)}finally{W.f()}return T}},{key:"atLeastNCoordinatesOrNothing",value:function(c,f){return f.length>=c?f:[]}},{key:"indexOf",value:function(c,f){for(var T=0;T<f.length;T++)if(c.equals(f[T]))return T;return-1}},{key:"increasingDirection",value:function(c){for(var f=0;f<Math.trunc(c.length/2);f++){var T=c.length-1-f,W=c[f].compareTo(c[T]);if(W!==0)return W}return 1}},{key:"compare",value:function(c,f){for(var T=0;T<c.length&&T<f.length;){var W=c[T].compareTo(f[T]);if(W!==0)return W;T++}return T<f.length?-1:T<c.length?1:0}},{key:"minCoordinate",value:function(c){for(var f=null,T=0;T<c.length;T++)(f===null||f.compareTo(c[T])>0)&&(f=c[T]);return f}},{key:"extract",value:function(c,f,T){f=Er.clamp(f,0,c.length);var W=(T=Er.clamp(T,-1,c.length))-f+1;T<0&&(W=0),f>=c.length&&(W=0),T<f&&(W=0);var me=new Array(W).fill(null);if(W===0)return me;for(var ze=0,tt=f;tt<=T;tt++)me[ze++]=c[tt];return me}}])}(),Xn=function(){return n(function I(){E(this,I)},[{key:"compare",value:function(I,c){var f=I,T=c;return _n.compare(f,T)}},{key:"interfaces_",get:function(){return[bt]}}])}(),er=function(){return n(function I(){E(this,I)},[{key:"compare",value:function(I,c){var f=I,T=c;if(f.length<T.length)return-1;if(f.length>T.length)return 1;if(f.length===0)return 0;var W=_n.compare(f,T);return _n.isEqualReversed(f,T)?0:W}},{key:"OLDcompare",value:function(I,c){var f=I,T=c;if(f.length<T.length)return-1;if(f.length>T.length)return 1;if(f.length===0)return 0;for(var W=_n.increasingDirection(f),me=_n.increasingDirection(T),ze=W>0?0:f.length-1,tt=me>0?0:f.length-1,It=0;It<f.length;It++){var ne=f[ze].compareTo(T[tt]);if(ne!==0)return ne;ze+=W,tt+=me}return 0}},{key:"interfaces_",get:function(){return[bt]}}])}();_n.ForwardComparator=Xn,_n.BidirectionalComparator=er,_n.coordArrayType=new Array(0).fill(null);var Yr=function(){return n(function I(c){E(this,I),this.str=c},[{key:"append",value:function(I){this.str+=I}},{key:"setCharAt",value:function(I,c){this.str=this.str.substr(0,I)+c+this.str.substr(I+1)}},{key:"toString",value:function(){return this.str}}])}(),qr=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getM",value:function(c){return this.hasM()?this._coordinates[c].getM():He.NaN}},{key:"setOrdinate",value:function(c,f,T){switch(f){case en.X:this._coordinates[c].x=T;break;case en.Y:this._coordinates[c].y=T;break;default:this._coordinates[c].setOrdinate(f,T)}}},{key:"getZ",value:function(c){return this.hasZ()?this._coordinates[c].getZ():He.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(c,f){switch(f){case en.X:return this._coordinates[c].x;case en.Y:return this._coordinates[c].y;default:return this._coordinates[c].getOrdinate(f)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var c=arguments[0];return this._coordinates[c]}if(arguments.length===2){var f=arguments[0];arguments[1].setCoordinate(this._coordinates[f])}}},{key:"getCoordinateCopy",value:function(c){var f=this.createCoordinate();return f.setCoordinate(this._coordinates[c]),f}},{key:"createCoordinate",value:function(){return Un.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(c){return this._coordinates[c].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(c){for(var f=0;f<this._coordinates.length;f++)c.expandToInclude(this._coordinates[f]);return c}},{key:"copy",value:function(){for(var c=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++){var T=this.createCoordinate();T.setCoordinate(this._coordinates[f]),c[f]=T}return new I(c,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var c=new Yr(17*this._coordinates.length);c.append("("),c.append(this._coordinates[0]);for(var f=1;f<this._coordinates.length;f++)c.append(", "),c.append(this._coordinates[f]);return c.append(")"),c.toString()}return"()"}},{key:"getY",value:function(c){return this._coordinates[c].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[en,Se]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var c=arguments[0];I.constructor_.call(this,c,_n.dimension(c),_n.measures(c))}else if(Number.isInteger(arguments[0])){var f=arguments[0];this._coordinates=new Array(f).fill(null);for(var T=0;T<f;T++)this._coordinates[T]=new ue}else if(Me(arguments[0],en)){var W=arguments[0];if(W===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=W.getDimension(),this._measures=W.getMeasures(),this._coordinates=new Array(W.size()).fill(null);for(var me=0;me<this._coordinates.length;me++)this._coordinates[me]=W.getCoordinateCopy(me)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ze=arguments[0],tt=arguments[1];I.constructor_.call(this,ze,tt,_n.measures(ze))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var It=arguments[0],ne=arguments[1];this._coordinates=new Array(It).fill(null),this._dimension=ne;for(var ge=0;ge<It;ge++)this._coordinates[ge]=Un.create(ne)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var xe=arguments[0],xt=arguments[1],pn=arguments[2];this._dimension=xt,this._measures=pn,this._coordinates=xe===null?new Array(0).fill(null):xe}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Mn=arguments[0],Hn=arguments[1],Qn=arguments[2];this._coordinates=new Array(Mn).fill(null),this._dimension=Hn,this._measures=Qn;for(var tr=0;tr<Mn;tr++)this._coordinates[tr]=this.createCoordinate()}}}}])}(),Gr=function(){function I(){E(this,I)}return n(I,[{key:"readResolve",value:function(){return I.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new qr(arguments[0]);if(Me(arguments[0],en))return new qr(arguments[0])}else{if(arguments.length===2){var c=arguments[1];return c>3&&(c=3),c<2&&(c=2),new qr(arguments[0],c)}if(arguments.length===3){var f=arguments[2],T=arguments[1]-f;return f>1&&(f=1),T>3&&(T=3),T<2&&(T=2),new qr(arguments[0],T+f,f)}}}},{key:"interfaces_",get:function(){return[Jr,Se]}}],[{key:"instance",value:function(){return I.instanceObject}}])}();Gr.instanceObject=new Gr;var ci=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),T=0;T<f.length;T++)f[T]=this._geometries[T].copy();return new c(f,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];return!!this.isEquivalentClass(f)&&B(c,"equalsExact",this,1).call(this,f,T)}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Je.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var f=new Gn,T=0;T<this._geometries.length;T++)for(var W=this._geometries[T].getBoundary(),me=0;me<W.getNumGeometries();me++)f.add(W.getGeometryN(me));var ze=new Array(f.size()).fill(null);return this.getFactory().createMultiLineString(f.toArray(ze))}},{key:"getGeometryType",value:function(){return Je.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Tr]}}],[{key:"constructor_",value:function(){var f=arguments[0],T=arguments[1];Dt.constructor_.call(this,f,T)}}])}(Dt),Ci=function(){return n(function I(){E(this,I)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),Ki=function(I){function c(){var f;return E(this,c),(f=i(this,c)).map=new Map,f}return Y(c,I),n(c,[{key:"get",value:function(f){return this.map.get(f)||null}},{key:"put",value:function(f,T){return this.map.set(f,T),T}},{key:"values",value:function(){for(var f=new Gn,T=this.map.values(),W=T.next();!W.done;)f.add(W.value),W=T.next();return f}},{key:"entrySet",value:function(){var f=new Dr;return this.map.entries().forEach(function(T){return f.add(T)}),f}},{key:"size",value:function(){return this.map.size()}}])}(Ci),Bi=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"equals",value:function(c){if(!(c instanceof I))return!1;var f=c;return this._modelType===f._modelType&&this._scale===f._scale}},{key:"compareTo",value:function(c){var f=c,T=this.getMaximumSignificantDigits(),W=f.getMaximumSignificantDigits();return Bt.compare(T,W)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===I.FLOATING||this._modelType===I.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var c="UNKNOWN";return this._modelType===I.FLOATING?c="Floating":this._modelType===I.FLOATING_SINGLE?c="Floating-Single":this._modelType===I.FIXED&&(c="Fixed (Scale="+this.getScale()+")"),c}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var c=arguments[0];return He.isNaN(c)||this._modelType===I.FLOATING_SINGLE?c:this._modelType===I.FIXED?Math.round(c*this._scale)/this._scale:c}if(arguments[0]instanceof ue){var f=arguments[0];if(this._modelType===I.FLOATING)return null;f.x=this.makePrecise(f.x),f.y=this.makePrecise(f.y)}}},{key:"getMaximumSignificantDigits",value:function(){var c=16;return this._modelType===I.FLOATING?c=16:this._modelType===I.FLOATING_SINGLE?c=6:this._modelType===I.FIXED&&(c=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),c}},{key:"setScale",value:function(c){this._scale=Math.abs(c)}},{key:"interfaces_",get:function(){return[Se,ke]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=I.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Di){var c=arguments[0];this._modelType=c,c===I.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var f=arguments[0];this._modelType=I.FIXED,this.setScale(f)}else if(arguments[0]instanceof I){var T=arguments[0];this._modelType=T._modelType,this._scale=T._scale}}}},{key:"mostPrecise",value:function(c,f){return c.compareTo(f)>=0?c:f}}])}(),Di=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"readResolve",value:function(){return I.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[Se]}}],[{key:"constructor_",value:function(){this._name=null;var c=arguments[0];this._name=c,I.nameToTypeMap.put(c,this)}}])}();Di.nameToTypeMap=new Ki,Bi.Type=Di,Bi.FIXED=new Di("FIXED"),Bi.FLOATING=new Di("FLOATING"),Bi.FLOATING_SINGLE=new Di("FLOATING SINGLE"),Bi.maximumPreciseValue=9007199254740992;var yo=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"copyInternal",value:function(){for(var f=new Array(this._geometries.length).fill(null),T=0;T<f.length;T++)f[T]=this._geometries[T].copy();return new c(f,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Je){var f=arguments[0],T=arguments[1];return!!this.isEquivalentClass(f)&&B(c,"equalsExact",this,1).call(this,f,T)}return B(c,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Xe.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var f=0;f<this._geometries.length;f++)if(!this._geometries[f].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Je.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new or}},{key:"getGeometryType",value:function(){return Je.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){var f=arguments[0],T=arguments[1];Dt.constructor_.call(this,f,T)}}])}(Dt),po=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"createEmpty",value:function(c){switch(c){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new Ee("Invalid dimension: "+c)}}},{key:"toGeometry",value:function(c){return c.isNull()?this.createPoint():c.getMinX()===c.getMaxX()&&c.getMinY()===c.getMaxY()?this.createPoint(new ue(c.getMinX(),c.getMinY())):c.getMinX()===c.getMaxX()||c.getMinY()===c.getMaxY()?this.createLineString([new ue(c.getMinX(),c.getMinY()),new ue(c.getMaxX(),c.getMaxY())]):this.createPolygon(this.createLinearRing([new ue(c.getMinX(),c.getMinY()),new ue(c.getMinX(),c.getMaxY()),new ue(c.getMaxX(),c.getMaxY()),new ue(c.getMaxX(),c.getMinY()),new ue(c.getMinX(),c.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var c=arguments[0];return this.createLineString(c!==null?this.getCoordinateSequenceFactory().create(c):null)}if(Me(arguments[0],en))return new Jn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new yo(null,this):arguments.length===1?new yo(arguments[0],this):void 0}},{key:"buildGeometry",value:function(c){for(var f=null,T=!1,W=!1,me=c.iterator();me.hasNext();){var ze=me.next(),tt=ze.getTypeCode();f===null&&(f=tt),tt!==f&&(T=!0),ze instanceof Dt&&(W=!0)}if(f===null)return this.createGeometryCollection();if(T||W)return this.createGeometryCollection(I.toGeometryArray(c));var It=c.iterator().next();if(c.size()>1){if(It instanceof fn)return this.createMultiPolygon(I.toPolygonArray(c));if(It instanceof Jn)return this.createMultiLineString(I.toLineStringArray(c));if(It instanceof Br)return this.createMultiPoint(I.toPointArray(c));Qe.shouldNeverReachHere("Unhandled geometry type: "+It.getGeometryType())}return It}},{key:"createMultiPointFromCoords",value:function(c){return this.createMultiPoint(c!==null?this.getCoordinateSequenceFactory().create(c):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof ue){var c=arguments[0];return this.createPoint(c!==null?this.getCoordinateSequenceFactory().create([c]):null)}if(Me(arguments[0],en))return new Br(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Me(arguments[0],en)){var c=arguments[0];return this.createPolygon(this.createLinearRing(c))}if(arguments[0]instanceof Array){var f=arguments[0];return this.createPolygon(this.createLinearRing(f))}if(arguments[0]instanceof sn){var T=arguments[0];return this.createPolygon(T,null)}}else if(arguments.length===2)return new fn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Dt(null,this):arguments.length===1?new Dt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var c=arguments[0];return this.createLinearRing(c!==null?this.getCoordinateSequenceFactory().create(c):null)}if(Me(arguments[0],en))return new sn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new ci(null,this):arguments.length===1?new ci(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new jt(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new jt(arguments[0],this);if(Me(arguments[0],en)){var c=arguments[0];if(c===null)return this.createMultiPoint(new Array(0).fill(null));for(var f=new Array(c.size()).fill(null),T=0;T<c.size();T++){var W=this.getCoordinateSequenceFactory().create(1,c.getDimension(),c.getMeasures());at.copy(c,T,W,0,1),f[T]=this.createPoint(W)}return this.createMultiPoint(f)}}}},{key:"interfaces_",get:function(){return[Se]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)I.constructor_.call(this,new Bi,0);else if(arguments.length===1){if(Me(arguments[0],Jr)){var c=arguments[0];I.constructor_.call(this,new Bi,0,c)}else if(arguments[0]instanceof Bi){var f=arguments[0];I.constructor_.call(this,f,0,I.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];I.constructor_.call(this,T,W,I.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var me=arguments[0],ze=arguments[1],tt=arguments[2];this._precisionModel=me,this._coordinateSequenceFactory=tt,this._SRID=ze}}},{key:"toMultiPolygonArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"toGeometryArray",value:function(c){if(c===null)return null;var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Gr.instance()}},{key:"toMultiLineStringArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"toLineStringArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"toMultiPointArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"toLinearRingArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"toPointArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"toPolygonArray",value:function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)}},{key:"createPointFromInternalCoord",value:function(c,f){return f.getPrecisionModel().makePrecise(c),f.getFactory().createPoint(c)}}])}(),Vo="XY",Xo="XYZ",$o="XYM",Aa="XYZM",qa={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Oo="EMPTY",Do=1,oa=2,Fa=3,xs=4,tl=5,Na=6;for(var ro in qa)qa[ro].toUpperCase();var xa=function(){return n(function I(c){E(this,I),this.wkt=c,this.index_=-1},[{key:"isAlpha_",value:function(I){return I>="a"&&I<="z"||I>="A"&&I<="Z"}},{key:"isNumeric_",value:function(I,c){return I>="0"&&I<="9"||I=="."&&!(c!==void 0&&c)}},{key:"isWhiteSpace_",value:function(I){return I==" "||I=="	"||I=="\r"||I==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var I,c=this.nextChar_(),f=this.index_,T=c;if(c=="(")I=oa;else if(c==",")I=tl;else if(c==")")I=Fa;else if(this.isNumeric_(c)||c=="-")I=xs,T=this.readNumber_();else if(this.isAlpha_(c))I=Do,T=this.readText_();else{if(this.isWhiteSpace_(c))return this.nextToken();if(c!=="")throw new Error("Unexpected character: "+c);I=Na}return{position:f,value:T,type:I}}},{key:"readNumber_",value:function(){var I,c=this.index_,f=!1,T=!1;do I=="."?f=!0:I!="e"&&I!="E"||(T=!0),I=this.nextChar_();while(this.isNumeric_(I,f)||!T&&(I=="e"||I=="E")||T&&(I=="-"||I=="+"));return parseFloat(this.wkt.substring(c,this.index_--))}},{key:"readText_",value:function(){var I,c=this.index_;do I=this.nextChar_();while(this.isAlpha_(I));return this.wkt.substring(c,this.index_--).toUpperCase()}}])}(),Ba=function(){return n(function I(c,f){E(this,I),this.lexer_=c,this.token_,this.layout_=Vo,this.factory=f},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(I){return this.token_.type==I}},{key:"match",value:function(I){var c=this.isTokenType(I);return c&&this.consume_(),c}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var I=Vo,c=this.token_;if(this.isTokenType(Do)){var f=c.value;f==="Z"?I=Xo:f==="M"?I=$o:f==="ZM"&&(I=Aa),I!==Vo&&this.consume_()}return I}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(oa)){var I=[];do I.push(this.parseGeometry_());while(this.match(tl));if(this.match(Fa))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(oa)){var I=this.parsePoint_();if(this.match(Fa))return I}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(oa)){var I=this.parsePointList_();if(this.match(Fa))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(oa)){var I=this.parseLineStringTextList_();if(this.match(Fa))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var I;if(this.match(oa)){if(I=this.token_.type==oa?this.parsePointTextList_():this.parsePointList_(),this.match(Fa))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(oa)){var I=this.parseLineStringTextList_();if(this.match(Fa))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(oa)){var I=this.parsePolygonTextList_();if(this.match(Fa))return I}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var I=[],c=this.layout_.length,f=0;f<c;++f){var T=this.token_;if(!this.match(xs))break;I.push(T.value)}if(I.length==c)return I;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var I=[this.parsePoint_()];this.match(tl);)I.push(this.parsePoint_());return I}},{key:"parsePointTextList_",value:function(){for(var I=[this.parsePointText_()];this.match(tl);)I.push(this.parsePointText_());return I}},{key:"parseLineStringTextList_",value:function(){for(var I=[this.parseLineStringText_()];this.match(tl);)I.push(this.parseLineStringText_());return I}},{key:"parsePolygonTextList_",value:function(){for(var I=[this.parsePolygonText_()];this.match(tl);)I.push(this.parsePolygonText_());return I}},{key:"isEmptyGeometry_",value:function(){var I=this.isTokenType(Do)&&this.token_.value==Oo;return I&&this.consume_(),I}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var I=this.factory,c=function(Hn){return M(ue,K(Hn))},f=function(Hn){var Qn=Hn.map(function(tr){return I.createLinearRing(tr.map(c))});return Qn.length>1?I.createPolygon(Qn[0],Qn.slice(1)):I.createPolygon(Qn[0])},T=this.token_;if(this.match(Do)){var W=T.value;if(this.layout_=this.parseGeometryLayout_(),W=="GEOMETRYCOLLECTION"){var me=this.parseGeometryCollectionText_();return I.createGeometryCollection(me)}switch(W){case"POINT":var ze=this.parsePointText_();return ze?I.createPoint(M(ue,K(ze))):I.createPoint();case"LINESTRING":var tt=this.parseLineStringText_().map(c);return I.createLineString(tt);case"LINEARRING":var It=this.parseLineStringText_().map(c);return I.createLinearRing(It);case"POLYGON":var ne=this.parsePolygonText_();return ne&&ne.length!==0?f(ne):I.createPolygon();case"MULTIPOINT":var ge=this.parseMultiPointText_();if(!ge||ge.length===0)return I.createMultiPoint();var xe=ge.map(c).map(function(Hn){return I.createPoint(Hn)});return I.createMultiPoint(xe);case"MULTILINESTRING":var xt=this.parseMultiLineStringText_().map(function(Hn){return I.createLineString(Hn.map(c))});return I.createMultiLineString(xt);case"MULTIPOLYGON":var pn=this.parseMultiPolygonText_();if(!pn||pn.length===0)return I.createMultiPolygon();var Mn=pn.map(f);return I.createMultiPolygon(Mn);default:throw new Error("Invalid geometry type: "+W)}}throw new Error(this.formatErrorMessage_())}}])}();function ma(I){if(I.isEmpty())return"";var c=I.getCoordinate(),f=[c.x,c.y];return c.z===void 0||Number.isNaN(c.z)||f.push(c.z),c.m===void 0||Number.isNaN(c.m)||f.push(c.m),f.join(" ")}function ja(I){for(var c=I.getCoordinates().map(function(me){var ze=[me.x,me.y];return me.z===void 0||Number.isNaN(me.z)||ze.push(me.z),me.m===void 0||Number.isNaN(me.m)||ze.push(me.m),ze}),f=[],T=0,W=c.length;T<W;++T)f.push(c[T].join(" "));return f.join(", ")}function Sa(I){var c=[];c.push("("+ja(I.getExteriorRing())+")");for(var f=0,T=I.getNumInteriorRing();f<T;++f)c.push("("+ja(I.getInteriorRingN(f))+")");return c.join(", ")}var us={Point:ma,LineString:ja,LinearRing:ja,Polygon:Sa,MultiPoint:function(I){for(var c=[],f=0,T=I.getNumGeometries();f<T;++f)c.push("("+ma(I.getGeometryN(f))+")");return c.join(", ")},MultiLineString:function(I){for(var c=[],f=0,T=I.getNumGeometries();f<T;++f)c.push("("+ja(I.getGeometryN(f))+")");return c.join(", ")},MultiPolygon:function(I){for(var c=[],f=0,T=I.getNumGeometries();f<T;++f)c.push("("+Sa(I.getGeometryN(f))+")");return c.join(", ")},GeometryCollection:function(I){for(var c=[],f=0,T=I.getNumGeometries();f<T;++f)c.push(ua(I.getGeometryN(f)));return c.join(", ")}};function ua(I){var c=I.getGeometryType(),f=us[c];c=c.toUpperCase();var T=function(W){var me="";if(W.isEmpty())return me;var ze=W.getCoordinate();return ze.z===void 0||Number.isNaN(ze.z)||(me+="Z"),ze.m===void 0||Number.isNaN(ze.m)||(me+="M"),me}(I);return T.length>0&&(c+=" "+T),I.isEmpty()?c+" "+Oo:c+" ("+f(I)+")"}var ao=function(){return n(function I(c){E(this,I),this.geometryFactory=c||new po,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(I){var c=new xa(I);return new Ba(c,this.geometryFactory).parse()}},{key:"write",value:function(I){return ua(I)}}])}(),Ma=function(){return n(function I(c){E(this,I),this.parser=new ao(c)},[{key:"write",value:function(I){return this.parser.write(I)}}],[{key:"toLineString",value:function(I,c){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+I.x+" "+I.y+", "+c.x+" "+c.y+" )"}}])}(),ko=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getIndexAlongSegment",value:function(c,f){return this.computeIntLineIndex(),this._intLineIndex[c][f]}},{key:"getTopologySummary",value:function(){var c=new Yr;return this.isEndPoint()&&c.append(" endpoint"),this._isProper&&c.append(" proper"),this.isCollinear()&&c.append(" collinear"),c.toString()}},{key:"computeIntersection",value:function(c,f,T,W){this._inputLines[0][0]=c,this._inputLines[0][1]=f,this._inputLines[1][0]=T,this._inputLines[1][1]=W,this._result=this.computeIntersect(c,f,T,W)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var c=arguments[0];this.getEdgeDistance(c,0)>this.getEdgeDistance(c,1)?(this._intLineIndex[c][0]=0,this._intLineIndex[c][1]=1):(this._intLineIndex[c][0]=1,this._intLineIndex[c][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(c){this._precisionModel=c}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var c=arguments[0],f=0;f<this._result;f++)if(!this._intPt[f].equals2D(this._inputLines[c][0])&&!this._intPt[f].equals2D(this._inputLines[c][1]))return!0;return!1}}},{key:"getIntersection",value:function(c){return this._intPt[c]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==I.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(c,f){return I.computeEdgeDistance(this._intPt[f],this._inputLines[c][0],this._inputLines[c][1])}},{key:"isCollinear",value:function(){return this._result===I.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Ma.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ma.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(c,f){return this._inputLines[c][f]}},{key:"isIntersection",value:function(c){for(var f=0;f<this._result;f++)if(this._intPt[f].equals2D(c))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(c,f){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[c][f]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ue,this._intPt[1]=new ue,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(c,f,T){var W=Math.abs(T.x-f.x),me=Math.abs(T.y-f.y),ze=-1;if(c.equals(f))ze=0;else if(c.equals(T))ze=W>me?W:me;else{var tt=Math.abs(c.x-f.x),It=Math.abs(c.y-f.y);(ze=W>me?tt:It)!==0||c.equals(f)||(ze=Math.max(tt,It))}return Qe.isTrue(!(ze===0&&!c.equals(f)),"Bad distance calculation"),ze}},{key:"nonRobustComputeEdgeDistance",value:function(c,f,T){var W=c.x-f.x,me=c.y-f.y,ze=Math.sqrt(W*W+me*me);return Qe.isTrue(!(ze===0&&!c.equals(f)),"Invalid distance calculation"),ze}}])}();ko.DONT_INTERSECT=0,ko.DO_INTERSECT=1,ko.COLLINEAR=2,ko.NO_INTERSECTION=0,ko.POINT_INTERSECTION=1,ko.COLLINEAR_INTERSECTION=2;var No=function(I){function c(){return E(this,c),i(this,c)}return Y(c,I),n(c,[{key:"isInSegmentEnvelopes",value:function(f){var T=new le(this._inputLines[0][0],this._inputLines[0][1]),W=new le(this._inputLines[1][0],this._inputLines[1][1]);return T.contains(f)&&W.contains(f)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return B(c,"computeIntersection",this,1).apply(this,arguments);var f=arguments[0],T=arguments[1],W=arguments[2];if(this._isProper=!1,le.intersects(T,W,f)&&gn.index(T,W,f)===0&&gn.index(W,T,f)===0)return this._isProper=!0,(f.equals(T)||f.equals(W))&&(this._isProper=!1),this._result=ko.POINT_INTERSECTION,null;this._result=ko.NO_INTERSECTION}},{key:"intersection",value:function(f,T,W,me){var ze=this.intersectionSafe(f,T,W,me);return this.isInSegmentEnvelopes(ze)||(ze=new ue(c.nearestEndpoint(f,T,W,me))),this._precisionModel!==null&&this._precisionModel.makePrecise(ze),ze}},{key:"checkDD",value:function(f,T,W,me,ze){var tt=Bn.intersection(f,T,W,me),It=this.isInSegmentEnvelopes(tt);Ln.out.println("DD in env = "+It+"  --------------------- "+tt),ze.distance(tt)>1e-4&&Ln.out.println("Distance = "+ze.distance(tt))}},{key:"intersectionSafe",value:function(f,T,W,me){var ze=cn.intersection(f,T,W,me);return ze===null&&(ze=c.nearestEndpoint(f,T,W,me)),ze}},{key:"computeCollinearIntersection",value:function(f,T,W,me){var ze=le.intersects(f,T,W),tt=le.intersects(f,T,me),It=le.intersects(W,me,f),ne=le.intersects(W,me,T);return ze&&tt?(this._intPt[0]=W,this._intPt[1]=me,ko.COLLINEAR_INTERSECTION):It&&ne?(this._intPt[0]=f,this._intPt[1]=T,ko.COLLINEAR_INTERSECTION):ze&&It?(this._intPt[0]=W,this._intPt[1]=f,!W.equals(f)||tt||ne?ko.COLLINEAR_INTERSECTION:ko.POINT_INTERSECTION):ze&&ne?(this._intPt[0]=W,this._intPt[1]=T,!W.equals(T)||tt||It?ko.COLLINEAR_INTERSECTION:ko.POINT_INTERSECTION):tt&&It?(this._intPt[0]=me,this._intPt[1]=f,!me.equals(f)||ze||ne?ko.COLLINEAR_INTERSECTION:ko.POINT_INTERSECTION):tt&&ne?(this._intPt[0]=me,this._intPt[1]=T,!me.equals(T)||ze||It?ko.COLLINEAR_INTERSECTION:ko.POINT_INTERSECTION):ko.NO_INTERSECTION}},{key:"computeIntersect",value:function(f,T,W,me){if(this._isProper=!1,!le.intersects(f,T,W,me))return ko.NO_INTERSECTION;var ze=gn.index(f,T,W),tt=gn.index(f,T,me);if(ze>0&&tt>0||ze<0&&tt<0)return ko.NO_INTERSECTION;var It=gn.index(W,me,f),ne=gn.index(W,me,T);return It>0&&ne>0||It<0&&ne<0?ko.NO_INTERSECTION:ze===0&&tt===0&&It===0&&ne===0?this.computeCollinearIntersection(f,T,W,me):(ze===0||tt===0||It===0||ne===0?(this._isProper=!1,f.equals2D(W)||f.equals2D(me)?this._intPt[0]=f:T.equals2D(W)||T.equals2D(me)?this._intPt[0]=T:ze===0?this._intPt[0]=new ue(W):tt===0?this._intPt[0]=new ue(me):It===0?this._intPt[0]=new ue(f):ne===0&&(this._intPt[0]=new ue(T))):(this._isProper=!0,this._intPt[0]=this.intersection(f,T,W,me)),ko.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(f,T,W,me){var ze=f,tt=mr.pointToSegment(f,W,me),It=mr.pointToSegment(T,W,me);return It<tt&&(tt=It,ze=T),(It=mr.pointToSegment(W,f,T))<tt&&(tt=It,ze=W),(It=mr.pointToSegment(me,f,T))<tt&&(tt=It,ze=me),ze}}])}(ko),Uo=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"countSegment",value:function(c,f){if(c.x<this._p.x&&f.x<this._p.x)return null;if(this._p.x===f.x&&this._p.y===f.y)return this._isPointOnSegment=!0,null;if(c.y===this._p.y&&f.y===this._p.y){var T=c.x,W=f.x;return T>W&&(T=f.x,W=c.x),this._p.x>=T&&this._p.x<=W&&(this._isPointOnSegment=!0),null}if(c.y>this._p.y&&f.y<=this._p.y||f.y>this._p.y&&c.y<=this._p.y){var me=gn.index(c,f,this._p);if(me===gn.COLLINEAR)return this._isPointOnSegment=!0,null;f.y<c.y&&(me=-me),me===gn.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==we.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?we.BOUNDARY:this._crossingCount%2==1?we.INTERIOR:we.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var c=arguments[0];this._p=c}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof ue&&Me(arguments[1],en)){for(var c=arguments[1],f=new I(arguments[0]),T=new ue,W=new ue,me=1;me<c.size();me++)if(c.getCoordinate(me,T),c.getCoordinate(me-1,W),f.countSegment(T,W),f.isOnSegment())return f.getLocation();return f.getLocation()}if(arguments[0]instanceof ue&&arguments[1]instanceof Array){for(var ze=arguments[1],tt=new I(arguments[0]),It=1;It<ze.length;It++){var ne=ze[It],ge=ze[It-1];if(tt.countSegment(ne,ge),tt.isOnSegment())return tt.getLocation()}return tt.getLocation()}}}])}(),Hs=function(){function I(){E(this,I)}return n(I,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof ue&&Me(arguments[1],en)){for(var c=arguments[0],f=arguments[1],T=new No,W=new ue,me=new ue,ze=f.size(),tt=1;tt<ze;tt++)if(f.getCoordinate(tt-1,W),f.getCoordinate(tt,me),T.computeIntersection(c,W,me),T.hasIntersection())return!0;return!1}if(arguments[0]instanceof ue&&arguments[1]instanceof Array){for(var It=arguments[0],ne=arguments[1],ge=new No,xe=1;xe<ne.length;xe++){var xt=ne[xe-1],pn=ne[xe];if(ge.computeIntersection(It,xt,pn),ge.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(c,f){return Uo.locatePointInRing(c,f)}},{key:"isInRing",value:function(c,f){return I.locateInRing(c,f)!==we.EXTERIOR}}])}(),$i=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"setAllLocations",value:function(c){for(var f=0;f<this.location.length;f++)this.location[f]=c}},{key:"isNull",value:function(){for(var c=0;c<this.location.length;c++)if(this.location[c]!==we.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(c){for(var f=0;f<this.location.length;f++)this.location[f]===we.NONE&&(this.location[f]=c)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(c){if(c.location.length>this.location.length){var f=new Array(3).fill(null);f[Pe.ON]=this.location[Pe.ON],f[Pe.LEFT]=we.NONE,f[Pe.RIGHT]=we.NONE,this.location=f}for(var T=0;T<this.location.length;T++)this.location[T]===we.NONE&&T<c.location.length&&(this.location[T]=c.location[T])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var c=this.location[Pe.LEFT];this.location[Pe.LEFT]=this.location[Pe.RIGHT],this.location[Pe.RIGHT]=c}},{key:"toString",value:function(){var c=new At;return this.location.length>1&&c.append(we.toLocationSymbol(this.location[Pe.LEFT])),c.append(we.toLocationSymbol(this.location[Pe.ON])),this.location.length>1&&c.append(we.toLocationSymbol(this.location[Pe.RIGHT])),c.toString()}},{key:"setLocations",value:function(c,f,T){this.location[Pe.ON]=c,this.location[Pe.LEFT]=f,this.location[Pe.RIGHT]=T}},{key:"get",value:function(c){return c<this.location.length?this.location[c]:we.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var c=0;c<this.location.length;c++)if(this.location[c]===we.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var c=arguments[0];this.setLocation(Pe.ON,c)}else if(arguments.length===2){var f=arguments[0],T=arguments[1];this.location[f]=T}}},{key:"init",value:function(c){this.location=new Array(c).fill(null),this.setAllLocations(we.NONE)}},{key:"isEqualOnSide",value:function(c,f){return this.location[f]===c.location[f]}},{key:"allPositionsEqual",value:function(c){for(var f=0;f<this.location.length;f++)if(this.location[f]!==c)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var c=arguments[0];this.init(c.length)}else if(Number.isInteger(arguments[0])){var f=arguments[0];this.init(1),this.location[Pe.ON]=f}else if(arguments[0]instanceof I){var T=arguments[0];if(this.init(T.location.length),T!==null)for(var W=0;W<this.location.length;W++)this.location[W]=T.location[W]}}else if(arguments.length===3){var me=arguments[0],ze=arguments[1],tt=arguments[2];this.init(3),this.location[Pe.ON]=me,this.location[Pe.LEFT]=ze,this.location[Pe.RIGHT]=tt}}}])}(),es=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getGeometryCount",value:function(){var c=0;return this.elt[0].isNull()||c++,this.elt[1].isNull()||c++,c}},{key:"setAllLocations",value:function(c,f){this.elt[c].setAllLocations(f)}},{key:"isNull",value:function(c){return this.elt[c].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var c=arguments[0];this.setAllLocationsIfNull(0,c),this.setAllLocationsIfNull(1,c)}else if(arguments.length===2){var f=arguments[0],T=arguments[1];this.elt[f].setAllLocationsIfNull(T)}}},{key:"isLine",value:function(c){return this.elt[c].isLine()}},{key:"merge",value:function(c){for(var f=0;f<2;f++)this.elt[f]===null&&c.elt[f]!==null?this.elt[f]=new $i(c.elt[f]):this.elt[f].merge(c.elt[f])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var c=arguments[0];return this.elt[c].get(Pe.ON)}if(arguments.length===2){var f=arguments[0],T=arguments[1];return this.elt[f].get(T)}}},{key:"toString",value:function(){var c=new At;return this.elt[0]!==null&&(c.append("A:"),c.append(this.elt[0].toString())),this.elt[1]!==null&&(c.append(" B:"),c.append(this.elt[1].toString())),c.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var c=arguments[0];return this.elt[c].isArea()}}},{key:"isAnyNull",value:function(c){return this.elt[c].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var c=arguments[0],f=arguments[1];this.elt[c].setLocation(Pe.ON,f)}else if(arguments.length===3){var T=arguments[0],W=arguments[1],me=arguments[2];this.elt[T].setLocation(W,me)}}},{key:"isEqualOnSide",value:function(c,f){return this.elt[0].isEqualOnSide(c.elt[0],f)&&this.elt[1].isEqualOnSide(c.elt[1],f)}},{key:"allPositionsEqual",value:function(c,f){return this.elt[c].allPositionsEqual(f)}},{key:"toLine",value:function(c){this.elt[c].isArea()&&(this.elt[c]=new $i(this.elt[c].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var c=arguments[0];this.elt[0]=new $i(c),this.elt[1]=new $i(c)}else if(arguments[0]instanceof I){var f=arguments[0];this.elt[0]=new $i(f.elt[0]),this.elt[1]=new $i(f.elt[1])}}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this.elt[0]=new $i(we.NONE),this.elt[1]=new $i(we.NONE),this.elt[T].setLocation(W)}else if(arguments.length===3){var me=arguments[0],ze=arguments[1],tt=arguments[2];this.elt[0]=new $i(me,ze,tt),this.elt[1]=new $i(me,ze,tt)}else if(arguments.length===4){var It=arguments[0],ne=arguments[1],ge=arguments[2],xe=arguments[3];this.elt[0]=new $i(we.NONE,we.NONE,we.NONE),this.elt[1]=new $i(we.NONE,we.NONE,we.NONE),this.elt[It].setLocations(ne,ge,xe)}}},{key:"toLineLabel",value:function(c){for(var f=new I(we.NONE),T=0;T<2;T++)f.setLocation(T,c.getLocation(T));return f}}])}(),Ll=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var I=new Array(this._pts.size()).fill(null),c=0;c<this._pts.size();c++)I[c]=this._pts.get(c);this._ring=this._geometryFactory.createLinearRing(I),this._isHole=gn.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(I){this._startDe=I;var c=I,f=!0;do{if(c===null)throw new Sr("Found null DirectedEdge");if(c.getEdgeRing()===this)throw new Sr("Directed Edge visited twice during ring-building at "+c.getCoordinate());this._edges.add(c);var T=c.getLabel();Qe.isTrue(T.isArea()),this.mergeLabel(T),this.addPoints(c.getEdge(),c.isForward(),f),f=!1,this.setEdgeRing(c,this),c=this.getNext(c)}while(c!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(I){return this._pts.get(I)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var I=this._startDe;do{var c=I.getNode().getEdges().getOutgoingDegree(this);c>this._maxNodeDegree&&(this._maxNodeDegree=c),I=this.getNext(I)}while(I!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(I,c,f){var T=I.getCoordinates();if(c){var W=1;f&&(W=0);for(var me=W;me<T.length;me++)this._pts.add(T[me])}else{var ze=T.length-2;f&&(ze=T.length-1);for(var tt=ze;tt>=0;tt--)this._pts.add(T[tt])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var I=this._startDe;do I.getEdge().setInResult(!0),I=I.getNext();while(I!==this._startDe)}},{key:"containsPoint",value:function(I){var c=this.getLinearRing();if(!c.getEnvelopeInternal().contains(I)||!Hs.isInRing(I,c.getCoordinates()))return!1;for(var f=this._holes.iterator();f.hasNext();)if(f.next().containsPoint(I))return!1;return!0}},{key:"addHole",value:function(I){this._holes.add(I)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var I=arguments[0];this.mergeLabel(I,0),this.mergeLabel(I,1)}else if(arguments.length===2){var c=arguments[1],f=arguments[0].getLocation(c,Pe.RIGHT);if(f===we.NONE)return null;if(this._label.getLocation(c)===we.NONE)return this._label.setLocation(c,f),null}}},{key:"setShell",value:function(I){this._shell=I,I!==null&&I.addHole(this)}},{key:"toPolygon",value:function(I){for(var c=new Array(this._holes.size()).fill(null),f=0;f<this._holes.size();f++)c[f]=this._holes.get(f).getLinearRing();return I.createPolygon(this.getLinearRing(),c)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new Gn,this._pts=new Gn,this._label=new es(we.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Gn,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var I=arguments[0],c=arguments[1];this._geometryFactory=c,this.computePoints(I),this.computeRing()}}}}])}(),hl=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"setEdgeRing",value:function(f,T){f.setMinEdgeRing(T)}},{key:"getNext",value:function(f){return f.getNextMin()}}],[{key:"constructor_",value:function(){var f=arguments[0],T=arguments[1];Ll.constructor_.call(this,f,T)}}])}(Ll),ho=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"buildMinimalRings",value:function(){var f=new Gn,T=this._startDe;do{if(T.getMinEdgeRing()===null){var W=new hl(T,this._geometryFactory);f.add(W)}T=T.getNext()}while(T!==this._startDe);return f}},{key:"setEdgeRing",value:function(f,T){f.setEdgeRing(T)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var f=this._startDe;do f.getNode().getEdges().linkMinimalDirectedEdges(this),f=f.getNext();while(f!==this._startDe)}},{key:"getNext",value:function(f){return f.getNext()}}],[{key:"constructor_",value:function(){var f=arguments[0],T=arguments[1];Ll.constructor_.call(this,f,T)}}])}(Ll),Ul=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(I){this._isVisited=I}},{key:"setInResult",value:function(I){this._isInResult=I}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(I){this._label=I}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(I){this._isCovered=I,this._isCoveredSet=!0}},{key:"updateIM",value:function(I){Qe.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(I)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var I=arguments[0];this._label=I}}}}])}(),Ml=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"isIncidentEdgeInResult",value:function(){for(var f=this.getEdges().getEdges().iterator();f.hasNext();)if(f.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(f){f.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(f){}},{key:"computeMergedLocation",value:function(f,T){var W=we.NONE;if(W=this._label.getLocation(T),!f.isNull(T)){var me=f.getLocation(T);W!==we.BOUNDARY&&(W=me)}return W}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return B(c,"setLabel",this,1).apply(this,arguments);var f=arguments[0],T=arguments[1];this._label===null?this._label=new es(f,T):this._label.setLocation(f,T)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof c){var f=arguments[0];this.mergeLabel(f._label)}else if(arguments[0]instanceof es)for(var T=arguments[0],W=0;W<2;W++){var me=this.computeMergedLocation(T,W);this._label.getLocation(W)===we.NONE&&this._label.setLocation(W,me)}}},{key:"add",value:function(f){this._edges.insert(f),f.setNode(this)}},{key:"setLabelBoundary",value:function(f){if(this._label===null)return null;var T=we.NONE;this._label!==null&&(T=this._label.getLocation(f));var W=null;switch(T){case we.BOUNDARY:W=we.INTERIOR;break;case we.INTERIOR:default:W=we.BOUNDARY}this._label.setLocation(f,W)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var f=arguments[0],T=arguments[1];this._coord=f,this._edges=T,this._label=new es(0,we.NONE)}}])}(Ul),Ri=function(I){function c(){return E(this,c),i(this,c,arguments)}return Y(c,I),n(c)}(Ci);function Wo(I){return I==null?0:I.color}function fo(I){return I==null?null:I.parent}function ts(I,c){I!==null&&(I.color=c)}function il(I){return I==null?null:I.left}function Jo(I){return I==null?null:I.right}var Jl=function(I){function c(){var f;return E(this,c),(f=i(this,c)).root_=null,f.size_=0,f}return Y(c,I),n(c,[{key:"get",value:function(f){for(var T=this.root_;T!==null;){var W=f.compareTo(T.key);if(W<0)T=T.left;else{if(!(W>0))return T.value;T=T.right}}return null}},{key:"put",value:function(f,T){if(this.root_===null)return this.root_={key:f,value:T,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var W,me,ze=this.root_;do if(W=ze,(me=f.compareTo(ze.key))<0)ze=ze.left;else{if(!(me>0)){var tt=ze.value;return ze.value=T,tt}ze=ze.right}while(ze!==null);var It={key:f,left:null,right:null,value:T,parent:W,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return me<0?W.left=It:W.right=It,this.fixAfterInsertion(It),this.size_++,null}},{key:"fixAfterInsertion",value:function(f){var T;for(f.color=1;f!=null&&f!==this.root_&&f.parent.color===1;)fo(f)===il(fo(fo(f)))?Wo(T=Jo(fo(fo(f))))===1?(ts(fo(f),0),ts(T,0),ts(fo(fo(f)),1),f=fo(fo(f))):(f===Jo(fo(f))&&(f=fo(f),this.rotateLeft(f)),ts(fo(f),0),ts(fo(fo(f)),1),this.rotateRight(fo(fo(f)))):Wo(T=il(fo(fo(f))))===1?(ts(fo(f),0),ts(T,0),ts(fo(fo(f)),1),f=fo(fo(f))):(f===il(fo(f))&&(f=fo(f),this.rotateRight(f)),ts(fo(f),0),ts(fo(fo(f)),1),this.rotateLeft(fo(fo(f))));this.root_.color=0}},{key:"values",value:function(){var f=new Gn,T=this.getFirstEntry();if(T!==null)for(f.add(T.value);(T=c.successor(T))!==null;)f.add(T.value);return f}},{key:"entrySet",value:function(){var f=new Dr,T=this.getFirstEntry();if(T!==null)for(f.add(T);(T=c.successor(T))!==null;)f.add(T);return f}},{key:"rotateLeft",value:function(f){if(f!=null){var T=f.right;f.right=T.left,T.left!=null&&(T.left.parent=f),T.parent=f.parent,f.parent==null?this.root_=T:f.parent.left===f?f.parent.left=T:f.parent.right=T,T.left=f,f.parent=T}}},{key:"rotateRight",value:function(f){if(f!=null){var T=f.left;f.left=T.right,T.right!=null&&(T.right.parent=f),T.parent=f.parent,f.parent==null?this.root_=T:f.parent.right===f?f.parent.right=T:f.parent.left=T,T.right=f,f.parent=T}}},{key:"getFirstEntry",value:function(){var f=this.root_;if(f!=null)for(;f.left!=null;)f=f.left;return f}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(f){for(var T=this.root_;T!==null;){var W=f.compareTo(T.key);if(W<0)T=T.left;else{if(!(W>0))return!0;T=T.right}}return!1}}],[{key:"successor",value:function(f){var T;if(f===null)return null;if(f.right!==null){for(T=f.right;T.left!==null;)T=T.left;return T}T=f.parent;for(var W=f;T!==null&&W===T.right;)W=T,T=T.parent;return T}}])}(Ri),zs=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"find",value:function(I){return this.nodeMap.get(I)}},{key:"addNode",value:function(){if(arguments[0]instanceof ue){var I=arguments[0],c=this.nodeMap.get(I);return c===null&&(c=this.nodeFact.createNode(I),this.nodeMap.put(I,c)),c}if(arguments[0]instanceof Ml){var f=arguments[0],T=this.nodeMap.get(f.getCoordinate());return T===null?(this.nodeMap.put(f.getCoordinate(),f),f):(T.mergeLabel(f),T)}}},{key:"print",value:function(I){for(var c=this.iterator();c.hasNext();)c.next().print(I)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(I){for(var c=new Gn,f=this.iterator();f.hasNext();){var T=f.next();T.getLabel().getLocation(I)===we.BOUNDARY&&c.add(T)}return c}},{key:"add",value:function(I){var c=I.getCoordinate();this.addNode(c).add(I)}}],[{key:"constructor_",value:function(){this.nodeMap=new Jl,this.nodeFact=null;var I=arguments[0];this.nodeFact=I}}])}(),Cs=function(){function I(){E(this,I)}return n(I,null,[{key:"isNorthern",value:function(c){return c===I.NE||c===I.NW}},{key:"isOpposite",value:function(c,f){return c!==f&&(c-f+4)%4===2}},{key:"commonHalfPlane",value:function(c,f){if(c===f)return c;if((c-f+4)%4===2)return-1;var T=c<f?c:f;return T===0&&(c>f?c:f)===3?3:T}},{key:"isInHalfPlane",value:function(c,f){return f===I.SE?c===I.SE||c===I.SW:c===f||c===f+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],f=arguments[1];if(c===0&&f===0)throw new Ee("Cannot compute the quadrant for point ( "+c+", "+f+" )");return c>=0?f>=0?I.NE:I.SE:f>=0?I.NW:I.SW}if(arguments[0]instanceof ue&&arguments[1]instanceof ue){var T=arguments[0],W=arguments[1];if(W.x===T.x&&W.y===T.y)throw new Ee("Cannot compute the quadrant for two identical points "+T);return W.x>=T.x?W.y>=T.y?I.NE:I.SE:W.y>=T.y?I.NW:I.SW}}}])}();Cs.NE=0,Cs.NW=1,Cs.SW=2,Cs.SE=3;var oo=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"compareDirection",value:function(c){return this._dx===c._dx&&this._dy===c._dy?0:this._quadrant>c._quadrant?1:this._quadrant<c._quadrant?-1:gn.index(c._p0,c._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(c){this._node=c}},{key:"print",value:function(c){var f=Math.atan2(this._dy,this._dx),T=this.getClass().getName(),W=T.lastIndexOf("."),me=T.substring(W+1);c.print("  "+me+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label)}},{key:"compareTo",value:function(c){var f=c;return this.compareDirection(f)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var c=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),T=f.lastIndexOf(".");return"  "+f.substring(T+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+c+"   "+this._label}},{key:"computeLabel",value:function(c){}},{key:"init",value:function(c,f){this._p0=c,this._p1=f,this._dx=f.x-c.x,this._dy=f.y-c.y,this._quadrant=Cs.quadrant(this._dx,this._dy),Qe.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var c=arguments[0];this._edge=c}else if(arguments.length===3){var f=arguments[0],T=arguments[1],W=arguments[2];I.constructor_.call(this,f,T,W,null)}else if(arguments.length===4){var me=arguments[0],ze=arguments[1],tt=arguments[2],It=arguments[3];I.constructor_.call(this,me),this.init(ze,tt),this._label=It}}}])}(),qi=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(f){return this._depth[f]}},{key:"setVisited",value:function(f){this._isVisited=f}},{key:"computeDirectedLabel",value:function(){this._label=new es(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(f,T){if(this._depth[f]!==-999&&this._depth[f]!==T)throw new Sr("assigned depths do not match",this.getCoordinate());this._depth[f]=T}},{key:"isInteriorAreaEdge",value:function(){for(var f=!0,T=0;T<2;T++)this._label.isArea(T)&&this._label.getLocation(T,Pe.LEFT)===we.INTERIOR&&this._label.getLocation(T,Pe.RIGHT)===we.INTERIOR||(f=!1);return f}},{key:"setNextMin",value:function(f){this._nextMin=f}},{key:"print",value:function(f){B(c,"print",this,1).call(this,f),f.print(" "+this._depth[Pe.LEFT]+"/"+this._depth[Pe.RIGHT]),f.print(" ("+this.getDepthDelta()+")"),this._isInResult&&f.print(" inResult")}},{key:"setMinEdgeRing",value:function(f){this._minEdgeRing=f}},{key:"isLineEdge",value:function(){var f=this._label.isLine(0)||this._label.isLine(1),T=!this._label.isArea(0)||this._label.allPositionsEqual(0,we.EXTERIOR),W=!this._label.isArea(1)||this._label.allPositionsEqual(1,we.EXTERIOR);return f&&T&&W}},{key:"setEdgeRing",value:function(f){this._edgeRing=f}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var f=this._edge.getDepthDelta();return this._isForward||(f=-f),f}},{key:"setInResult",value:function(f){this._isInResult=f}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(f){this.print(f),f.print(" "),this._isForward?this._edge.print(f):this._edge.printReverse(f)}},{key:"setSym",value:function(f){this._sym=f}},{key:"setVisitedEdge",value:function(f){this.setVisited(f),this._sym.setVisited(f)}},{key:"setEdgeDepths",value:function(f,T){var W=this.getEdge().getDepthDelta();this._isForward||(W=-W);var me=1;f===Pe.LEFT&&(me=-1);var ze=Pe.opposite(f),tt=T+W*me;this.setDepth(f,T),this.setDepth(ze,tt)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(f){this._next=f}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var f=arguments[0],T=arguments[1];if(oo.constructor_.call(this,f),this._isForward=T,T)this.init(f.getCoordinate(0),f.getCoordinate(1));else{var W=f.getNumPoints()-1;this.init(f.getCoordinate(W),f.getCoordinate(W-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(f,T){return f===we.EXTERIOR&&T===we.INTERIOR?1:f===we.INTERIOR&&T===we.EXTERIOR?-1:0}}])}(oo),Ta=function(){return n(function I(){E(this,I)},[{key:"createNode",value:function(I){return new Ml(I,null)}}])}(),la=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(I){I.println("Edges:");for(var c=0;c<this._edges.size();c++){I.println("edge "+c+":");var f=this._edges.get(c);f.print(I),f.eiList.print(I)}}},{key:"find",value:function(I){return this._nodes.find(I)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ml){var I=arguments[0];return this._nodes.addNode(I)}if(arguments[0]instanceof ue){var c=arguments[0];return this._nodes.addNode(c)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var I=this._nodes.iterator();I.hasNext();)I.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(I){Ln.out.println(I)}},{key:"isBoundaryNode",value:function(I,c){var f=this._nodes.find(c);if(f===null)return!1;var T=f.getLabel();return T!==null&&T.getLocation(I)===we.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var I=this._nodes.iterator();I.hasNext();)I.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(I,c,f,T){return!!I.equals(f)&&gn.index(I,c,T)===gn.COLLINEAR&&Cs.quadrant(I,c)===Cs.quadrant(f,T)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(I){Ln.out.print(I)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(I,c){for(var f=0;f<this._edges.size();f++){var T=this._edges.get(f),W=T.getCoordinates();if(this.matchInSameDirection(I,c,W[0],W[1])||this.matchInSameDirection(I,c,W[W.length-1],W[W.length-2]))return T}return null}},{key:"insertEdge",value:function(I){this._edges.add(I)}},{key:"findEdgeEnd",value:function(I){for(var c=this.getEdgeEnds().iterator();c.hasNext();){var f=c.next();if(f.getEdge()===I)return f}return null}},{key:"addEdges",value:function(I){for(var c=I.iterator();c.hasNext();){var f=c.next();this._edges.add(f);var T=new qi(f,!0),W=new qi(f,!1);T.setSym(W),W.setSym(T),this.add(T),this.add(W)}}},{key:"add",value:function(I){this._nodes.add(I),this._edgeEndList.add(I)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(I,c){for(var f=0;f<this._edges.size();f++){var T=this._edges.get(f),W=T.getCoordinates();if(I.equals(W[0])&&c.equals(W[1]))return T}return null}}],[{key:"constructor_",value:function(){if(this._edges=new Gn,this._nodes=null,this._edgeEndList=new Gn,arguments.length===0)this._nodes=new zs(new Ta);else if(arguments.length===1){var I=arguments[0];this._nodes=new zs(I)}}},{key:"linkResultDirectedEdges",value:function(I){for(var c=I.iterator();c.hasNext();)c.next().getEdges().linkResultDirectedEdges()}}])}(),Os=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"sortShellsAndHoles",value:function(c,f,T){for(var W=c.iterator();W.hasNext();){var me=W.next();me.isHole()?T.add(me):f.add(me)}}},{key:"computePolygons",value:function(c){for(var f=new Gn,T=c.iterator();T.hasNext();){var W=T.next().toPolygon(this._geometryFactory);f.add(W)}return f}},{key:"placeFreeHoles",value:function(c,f){for(var T=f.iterator();T.hasNext();){var W=T.next();if(W.getShell()===null){var me=I.findEdgeRingContaining(W,c);if(me===null)throw new Sr("unable to assign hole to a shell",W.getCoordinate(0));W.setShell(me)}}}},{key:"buildMinimalEdgeRings",value:function(c,f,T){for(var W=new Gn,me=c.iterator();me.hasNext();){var ze=me.next();if(ze.getMaxNodeDegree()>2){ze.linkDirectedEdgesForMinimalEdgeRings();var tt=ze.buildMinimalRings(),It=this.findShell(tt);It!==null?(this.placePolygonHoles(It,tt),f.add(It)):T.addAll(tt)}else W.add(ze)}return W}},{key:"buildMaximalEdgeRings",value:function(c){for(var f=new Gn,T=c.iterator();T.hasNext();){var W=T.next();if(W.isInResult()&&W.getLabel().isArea()&&W.getEdgeRing()===null){var me=new ho(W,this._geometryFactory);f.add(me),me.setInResult()}}return f}},{key:"placePolygonHoles",value:function(c,f){for(var T=f.iterator();T.hasNext();){var W=T.next();W.isHole()&&W.setShell(c)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(c){for(var f=0,T=null,W=c.iterator();W.hasNext();){var me=W.next();me.isHole()||(T=me,f++)}return Qe.isTrue(f<=1,"found two shells in MinimalEdgeRing list"),T}},{key:"add",value:function(){if(arguments.length===1){var c=arguments[0];this.add(c.getEdgeEnds(),c.getNodes())}else if(arguments.length===2){var f=arguments[0],T=arguments[1];la.linkResultDirectedEdges(T);var W=this.buildMaximalEdgeRings(f),me=new Gn,ze=this.buildMinimalEdgeRings(W,this._shellList,me);this.sortShellsAndHoles(ze,this._shellList,me),this.placeFreeHoles(this._shellList,me)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new Gn;var c=arguments[0];this._geometryFactory=c}},{key:"findEdgeRingContaining",value:function(c,f){for(var T=c.getLinearRing(),W=T.getEnvelopeInternal(),me=T.getCoordinateN(0),ze=null,tt=null,It=f.iterator();It.hasNext();){var ne=It.next(),ge=ne.getLinearRing(),xe=ge.getEnvelopeInternal();if(!xe.equals(W)&&xe.contains(W)){me=_n.ptNotInList(T.getCoordinates(),ge.getCoordinates());var xt=!1;Hs.isInRing(me,ge.getCoordinates())&&(xt=!0),xt&&(ze===null||tt.contains(xe))&&(tt=(ze=ne).getLinearRing().getEnvelopeInternal())}}return ze}}])}(),Vl=function(){return n(function I(){E(this,I)},[{key:"getBounds",value:function(){}}])}(),ns=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Vl,Se]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var I=arguments[0],c=arguments[1];this._bounds=I,this._item=c}}])}(),yu=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var I=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),I}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(I){for(var c=null,f=this._items.get(I);2*I<=this._size&&((c=2*I)!==this._size&&this._items.get(c+1).compareTo(this._items.get(c))<0&&c++,this._items.get(c).compareTo(f)<0);I=c)this._items.set(I,this._items.get(c));this._items.set(I,f)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(I){this._items.add(null),this._size+=1;var c=this._size;for(this._items.set(0,I);I.compareTo(this._items.get(Math.trunc(c/2)))<0;c/=2)this._items.set(c,this._items.get(Math.trunc(c/2)));this._items.set(c,I)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new Gn,this._items.add(null)}}])}(),Fs=function(){return n(function I(){E(this,I)},[{key:"insert",value:function(I,c){}},{key:"remove",value:function(I,c){}},{key:"query",value:function(){}}])}(),bs=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(I){Qe.isTrue(this._bounds===null),this._childBoundables.add(I)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Vl,Se]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new Gn,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var I=arguments[0];this._level=I}}}}])}(),cs={reverseOrder:function(){return{compare:function(I,c){return c.compareTo(I)}}},min:function(I){return cs.sort(I),I.get(0)},sort:function(I,c){var f=I.toArray();c?zr.sort(f,c):zr.sort(f);for(var T=I.iterator(),W=0,me=f.length;W<me;W++)T.next(),T.set(f[W])},singletonList:function(I){var c=new Gn;return c.add(I),c}},Gl=function(){function I(){E(this,I)}return n(I,null,[{key:"maxDistance",value:function(c,f,T,W,me,ze,tt,It){var ne=I.distance(c,f,me,ze);return ne=Math.max(ne,I.distance(c,f,tt,It)),ne=Math.max(ne,I.distance(T,W,me,ze)),ne=Math.max(ne,I.distance(T,W,tt,It))}},{key:"distance",value:function(c,f,T,W){var me=T-c,ze=W-f;return Math.sqrt(me*me+ze*ze)}},{key:"maximumDistance",value:function(c,f){var T=Math.min(c.getMinX(),f.getMinX()),W=Math.min(c.getMinY(),f.getMinY()),me=Math.max(c.getMaxX(),f.getMaxX()),ze=Math.max(c.getMaxY(),f.getMaxY());return I.distance(T,W,me,ze)}},{key:"minMaxDistance",value:function(c,f){var T=c.getMinX(),W=c.getMinY(),me=c.getMaxX(),ze=c.getMaxY(),tt=f.getMinX(),It=f.getMinY(),ne=f.getMaxX(),ge=f.getMaxY(),xe=I.maxDistance(T,W,T,ze,tt,It,tt,ge);return xe=Math.min(xe,I.maxDistance(T,W,T,ze,tt,It,ne,It)),xe=Math.min(xe,I.maxDistance(T,W,T,ze,ne,ge,tt,ge)),xe=Math.min(xe,I.maxDistance(T,W,T,ze,ne,ge,ne,It)),xe=Math.min(xe,I.maxDistance(T,W,me,W,tt,It,tt,ge)),xe=Math.min(xe,I.maxDistance(T,W,me,W,tt,It,ne,It)),xe=Math.min(xe,I.maxDistance(T,W,me,W,ne,ge,tt,ge)),xe=Math.min(xe,I.maxDistance(T,W,me,W,ne,ge,ne,It)),xe=Math.min(xe,I.maxDistance(me,ze,T,ze,tt,It,tt,ge)),xe=Math.min(xe,I.maxDistance(me,ze,T,ze,tt,It,ne,It)),xe=Math.min(xe,I.maxDistance(me,ze,T,ze,ne,ge,tt,ge)),xe=Math.min(xe,I.maxDistance(me,ze,T,ze,ne,ge,ne,It)),xe=Math.min(xe,I.maxDistance(me,ze,me,W,tt,It,tt,ge)),xe=Math.min(xe,I.maxDistance(me,ze,me,W,tt,It,ne,It)),xe=Math.min(xe,I.maxDistance(me,ze,me,W,ne,ge,tt,ge)),xe=Math.min(xe,I.maxDistance(me,ze,me,W,ne,ge,ne,It))}}])}(),Dl=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"maximumDistance",value:function(){return Gl.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(c,f){var T=I.isComposite(this._boundable1),W=I.isComposite(this._boundable2);if(T&&W)return I.area(this._boundable1)>I.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,c,f),null):(this.expand(this._boundable2,this._boundable1,!0,c,f),null);if(T)return this.expand(this._boundable1,this._boundable2,!1,c,f),null;if(W)return this.expand(this._boundable2,this._boundable1,!0,c,f),null;throw new Ee("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(I.isComposite(this._boundable1)||I.isComposite(this._boundable2))}},{key:"compareTo",value:function(c){var f=c;return this._distance<f._distance?-1:this._distance>f._distance?1:0}},{key:"expand",value:function(c,f,T,W,me){for(var ze=c.getChildBoundables().iterator();ze.hasNext();){var tt=ze.next(),It=null;(It=T?new I(f,tt,this._itemDistance):new I(tt,f,this._itemDistance)).getDistance()<me&&W.add(It)}}},{key:"getBoundable",value:function(c){return c===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var c=arguments[0],f=arguments[1],T=arguments[2];this._boundable1=c,this._boundable2=f,this._itemDistance=T,this._distance=this.distance()}},{key:"area",value:function(c){return c.getBounds().getArea()}},{key:"isComposite",value:function(c){return c instanceof bs}}])}(),fs=function(){return n(function I(){E(this,I)},[{key:"visitItem",value:function(I){}}])}(),ws=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"queryInternal",value:function(){if(Me(arguments[2],fs)&&arguments[0]instanceof Object&&arguments[1]instanceof bs)for(var c=arguments[0],f=arguments[2],T=arguments[1].getChildBoundables(),W=0;W<T.size();W++){var me=T.get(W);this.getIntersectsOp().intersects(me.getBounds(),c)&&(me instanceof bs?this.queryInternal(c,me,f):me instanceof ns?f.visitItem(me.getItem()):Qe.shouldNeverReachHere())}else if(Me(arguments[2],gt)&&arguments[0]instanceof Object&&arguments[1]instanceof bs)for(var ze=arguments[0],tt=arguments[2],It=arguments[1].getChildBoundables(),ne=0;ne<It.size();ne++){var ge=It.get(ne);this.getIntersectsOp().intersects(ge.getBounds(),ze)&&(ge instanceof bs?this.queryInternal(ze,ge,tt):ge instanceof ns?tt.add(ge.getItem()):Qe.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(c){return c.get(c.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var c=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var T=f.next();T instanceof bs?c+=this.size(T):T instanceof ns&&(c+=1)}return c}}},{key:"removeItem",value:function(c,f){for(var T=null,W=c.getChildBoundables().iterator();W.hasNext();){var me=W.next();me instanceof ns&&me.getItem()===f&&(T=me)}return T!==null&&(c.getChildBoundables().remove(T),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var c=this.itemsTree(this._root);return c===null?new Gn:c}if(arguments.length===1){for(var f=arguments[0],T=new Gn,W=f.getChildBoundables().iterator();W.hasNext();){var me=W.next();if(me instanceof bs){var ze=this.itemsTree(me);ze!==null&&T.add(ze)}else me instanceof ns?T.add(me.getItem()):Qe.shouldNeverReachHere()}return T.size()<=0?null:T}}},{key:"insert",value:function(c,f){Qe.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ns(c,f))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var c=arguments[0],f=new Gn;return this.boundablesAtLevel(c,this._root,f),f}if(arguments.length===3){var T=arguments[0],W=arguments[1],me=arguments[2];if(Qe.isTrue(T>-2),W.getLevel()===T)return me.add(W),null;for(var ze=W.getChildBoundables().iterator();ze.hasNext();){var tt=ze.next();tt instanceof bs?this.boundablesAtLevel(T,tt,me):(Qe.isTrue(tt instanceof ns),T===-1&&me.add(tt))}return null}}},{key:"query",value:function(){if(arguments.length===1){var c=arguments[0];this.build();var f=new Gn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.queryInternal(c,this._root,f),f}if(arguments.length===2){var T=arguments[0],W=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),T)&&this.queryInternal(T,this._root,W)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var c=arguments[0],f=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.remove(c,this._root,f)}if(arguments.length===3){var T=arguments[0],W=arguments[1],me=arguments[2],ze=this.removeItem(W,me);if(ze)return!0;for(var tt=null,It=W.getChildBoundables().iterator();It.hasNext();){var ne=It.next();if(this.getIntersectsOp().intersects(ne.getBounds(),T)&&ne instanceof bs&&(ze=this.remove(T,ne,me))){tt=ne;break}}return tt!==null&&tt.getChildBoundables().isEmpty()&&W.getChildBoundables().remove(tt),ze}}},{key:"createHigherLevels",value:function(c,f){Qe.isTrue(!c.isEmpty());var T=this.createParentBoundables(c,f+1);return T.size()===1?T.get(0):this.createHigherLevels(T,f+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var c=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var T=f.next();if(T instanceof bs){var W=this.depth(T);W>c&&(c=W)}}return c+1}}},{key:"createParentBoundables",value:function(c,f){Qe.isTrue(!c.isEmpty());var T=new Gn;T.add(this.createNode(f));var W=new Gn(c);cs.sort(W,this.getComparator());for(var me=W.iterator();me.hasNext();){var ze=me.next();this.lastNode(T).getChildBoundables().size()===this.getNodeCapacity()&&T.add(this.createNode(f)),this.lastNode(T).addChildBoundable(ze)}return T}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[Se]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new Gn,this._nodeCapacity=null,arguments.length===0)I.constructor_.call(this,I.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var c=arguments[0];Qe.isTrue(c>1,"Node capacity must be greater than 1"),this._nodeCapacity=c}}},{key:"compareDoubles",value:function(c,f){return c>f?1:c<f?-1:0}}])}();ws.IntersectsOp=function(){},ws.DEFAULT_NODE_CAPACITY=10;var ps=function(){return n(function I(){E(this,I)},[{key:"distance",value:function(I,c){}}])}(),Za=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"createParentBoundablesFromVerticalSlices",value:function(f,T){Qe.isTrue(f.length>0);for(var W=new Gn,me=0;me<f.length;me++)W.addAll(this.createParentBoundablesFromVerticalSlice(f[me],T));return W}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var f=arguments[0],T=arguments[1];return this.nearestNeighbourK(f,He.POSITIVE_INFINITY,T)}if(arguments.length===3){var W=arguments[0],me=arguments[2],ze=arguments[1],tt=new yu;tt.add(W);for(var It=new yu;!tt.isEmpty()&&ze>=0;){var ne=tt.poll(),ge=ne.getDistance();if(ge>=ze)break;ne.isLeaves()?It.size()<me?It.add(ne):(It.peek().getDistance()>ge&&(It.poll(),It.add(ne)),ze=It.peek().getDistance()):ne.expandToQueue(tt,ze)}return c.getItems(It)}}},{key:"createNode",value:function(f){return new ru(f)}},{key:"size",value:function(){return arguments.length===0?B(c,"size",this,1).call(this):B(c,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof le))return B(c,"insert",this,1).apply(this,arguments);var f=arguments[0],T=arguments[1];if(f.isNull())return null;B(c,"insert",this,1).call(this,f,T)}},{key:"getIntersectsOp",value:function(){return c.intersectsOp}},{key:"verticalSlices",value:function(f,T){for(var W=Math.trunc(Math.ceil(f.size()/T)),me=new Array(T).fill(null),ze=f.iterator(),tt=0;tt<T;tt++){me[tt]=new Gn;for(var It=0;ze.hasNext()&&It<W;){var ne=ze.next();me[tt].add(ne),It++}}return me}},{key:"query",value:function(){if(arguments.length===1){var f=arguments[0];return B(c,"query",this,1).call(this,f)}if(arguments.length===2){var T=arguments[0],W=arguments[1];B(c,"query",this,1).call(this,T,W)}}},{key:"getComparator",value:function(){return c.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(f,T){return B(c,"createParentBoundables",this,1).call(this,f,T)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof le){var f=arguments[0],T=arguments[1];return B(c,"remove",this,1).call(this,f,T)}return B(c,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?B(c,"depth",this,1).call(this):B(c,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(f,T){Qe.isTrue(!f.isEmpty());var W=Math.trunc(Math.ceil(f.size()/this.getNodeCapacity())),me=new Gn(f);cs.sort(me,c.xComparator);var ze=this.verticalSlices(me,Math.trunc(Math.ceil(Math.sqrt(W))));return this.createParentBoundablesFromVerticalSlices(ze,T)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Me(arguments[0],ps)){var f=arguments[0];if(this.isEmpty())return null;var T=new Dl(this.getRoot(),this.getRoot(),f);return this.nearestNeighbour(T)}if(arguments[0]instanceof Dl){var W=arguments[0],me=He.POSITIVE_INFINITY,ze=null,tt=new yu;for(tt.add(W);!tt.isEmpty()&&me>0;){var It=tt.poll(),ne=It.getDistance();if(ne>=me)break;It.isLeaves()?(me=ne,ze=It):It.expandToQueue(tt,me)}return ze===null?null:[ze.getBoundable(0).getItem(),ze.getBoundable(1).getItem()]}}else{if(arguments.length===2){var ge=arguments[0],xe=arguments[1];if(this.isEmpty()||ge.isEmpty())return null;var xt=new Dl(this.getRoot(),ge.getRoot(),xe);return this.nearestNeighbour(xt)}if(arguments.length===3){var pn=arguments[2],Mn=new ns(arguments[0],arguments[1]),Hn=new Dl(this.getRoot(),Mn,pn);return this.nearestNeighbour(Hn)[0]}if(arguments.length===4){var Qn=arguments[2],tr=arguments[3],Ir=new ns(arguments[0],arguments[1]),oi=new Dl(this.getRoot(),Ir,Qn);return this.nearestNeighbourK(oi,tr)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var f=arguments[0],T=arguments[1],W=He.POSITIVE_INFINITY,me=new yu;for(me.add(f);!me.isEmpty();){var ze=me.poll(),tt=ze.getDistance();if(tt>T)return!1;if(ze.maximumDistance()<=T)return!0;if(ze.isLeaves()){if((W=tt)<=T)return!0}else ze.expandToQueue(me,W)}return!1}if(arguments.length===3){var It=arguments[0],ne=arguments[1],ge=arguments[2],xe=new Dl(this.getRoot(),It.getRoot(),ne);return this.isWithinDistance(xe,ge)}}},{key:"interfaces_",get:function(){return[Fs,Se]}}],[{key:"constructor_",value:function(){if(arguments.length===0)c.constructor_.call(this,c.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var f=arguments[0];ws.constructor_.call(this,f)}}},{key:"centreX",value:function(f){return c.avg(f.getMinX(),f.getMaxX())}},{key:"avg",value:function(f,T){return(f+T)/2}},{key:"getItems",value:function(f){for(var T=new Array(f.size()).fill(null),W=0;!f.isEmpty();){var me=f.poll();T[W]=me.getBoundable(0).getItem(),W++}return T}},{key:"centreY",value:function(f){return c.avg(f.getMinY(),f.getMaxY())}}])}(ws),ru=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"computeBounds",value:function(){for(var f=null,T=this.getChildBoundables().iterator();T.hasNext();){var W=T.next();f===null?f=new le(W.getBounds()):f.expandToInclude(W.getBounds())}return f}}],[{key:"constructor_",value:function(){var f=arguments[0];bs.constructor_.call(this,f)}}])}(bs);Za.STRtreeNode=ru,Za.xComparator=new(function(){return n(function I(){E(this,I)},[{key:"interfaces_",get:function(){return[bt]}},{key:"compare",value:function(I,c){return ws.compareDoubles(Za.centreX(I.getBounds()),Za.centreX(c.getBounds()))}}])}()),Za.yComparator=new(function(){return n(function I(){E(this,I)},[{key:"interfaces_",get:function(){return[bt]}},{key:"compare",value:function(I,c){return ws.compareDoubles(Za.centreY(I.getBounds()),Za.centreY(c.getBounds()))}}])}()),Za.intersectsOp=new(function(){return n(function I(){E(this,I)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(I,c){return I.intersects(c)}}])}()),Za.DEFAULT_NODE_CAPACITY=10;var Es=function(){function I(){E(this,I)}return n(I,null,[{key:"relativeSign",value:function(c,f){return c<f?-1:c>f?1:0}},{key:"compare",value:function(c,f,T){if(f.equals2D(T))return 0;var W=I.relativeSign(f.x,T.x),me=I.relativeSign(f.y,T.y);switch(c){case 0:return I.compareValue(W,me);case 1:return I.compareValue(me,W);case 2:return I.compareValue(me,-W);case 3:return I.compareValue(-W,me);case 4:return I.compareValue(-W,-me);case 5:return I.compareValue(-me,-W);case 6:return I.compareValue(-me,W);case 7:return I.compareValue(W,-me)}return Qe.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(c,f){return c<0?-1:c>0?1:f<0?-1:f>0?1:0}}])}(),xu=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(I){I.print(this.coord),I.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(I){var c=I;return this.segmentIndex<c.segmentIndex?-1:this.segmentIndex>c.segmentIndex?1:this.coord.equals2D(c.coord)?0:this._isInterior?c._isInterior?Es.compare(this._segmentOctant,this.coord,c.coord):1:-1}},{key:"isEndPoint",value:function(I){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===I}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var I=arguments[0],c=arguments[1],f=arguments[2],T=arguments[3];this._segString=I,this.coord=new ue(c),this.segmentIndex=f,this._segmentOctant=T,this._isInterior=!c.equals2D(I.getCoordinate(f))}}])}(),Yu=function(){return n(function I(){E(this,I)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),ol=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var I=new jn;this.addEndpoints();for(var c=this.iterator(),f=c.next();c.hasNext();){var T=c.next();this.addEdgeCoordinates(f,T,I),f=T}return I.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var I=new Gn;this.findCollapsesFromInsertedNodes(I),this.findCollapsesFromExistingVertices(I);for(var c=I.iterator();c.hasNext();){var f=c.next().intValue();this.add(this._edge.getCoordinate(f),f)}}},{key:"createSplitEdgePts",value:function(I,c){var f=c.segmentIndex-I.segmentIndex+2;if(f===2)return[new ue(I.coord),new ue(c.coord)];var T=this._edge.getCoordinate(c.segmentIndex),W=c.isInterior()||!c.coord.equals2D(T);W||f--;var me=new Array(f).fill(null),ze=0;me[ze++]=new ue(I.coord);for(var tt=I.segmentIndex+1;tt<=c.segmentIndex;tt++)me[ze++]=this._edge.getCoordinate(tt);return W&&(me[ze]=new ue(c.coord)),me}},{key:"print",value:function(I){I.println("Intersections:");for(var c=this.iterator();c.hasNext();)c.next().print(I)}},{key:"findCollapsesFromExistingVertices",value:function(I){for(var c=0;c<this._edge.size()-2;c++){var f=this._edge.getCoordinate(c);this._edge.getCoordinate(c+1);var T=this._edge.getCoordinate(c+2);f.equals2D(T)&&I.add(Bt.valueOf(c+1))}}},{key:"addEdgeCoordinates",value:function(I,c,f){var T=this.createSplitEdgePts(I,c);f.add(T,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(I){this.addEndpoints(),this.addCollapsedNodes();for(var c=this.iterator(),f=c.next();c.hasNext();){var T=c.next(),W=this.createSplitEdge(f,T);I.add(W),f=T}}},{key:"findCollapseIndex",value:function(I,c,f){if(!I.coord.equals2D(c.coord))return!1;var T=c.segmentIndex-I.segmentIndex;return c.isInterior()||T--,T===1&&(f[0]=I.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(I){for(var c=new Array(1).fill(null),f=this.iterator(),T=f.next();f.hasNext();){var W=f.next();this.findCollapseIndex(T,W,c)&&I.add(Bt.valueOf(c[0])),T=W}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var I=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(I),I)}},{key:"createSplitEdge",value:function(I,c){var f=this.createSplitEdgePts(I,c);return new Ql(f,this._edge.getData())}},{key:"add",value:function(I,c){var f=new xu(this._edge,I,c,this._edge.getSegmentOctant(c)),T=this._nodeMap.get(f);return T!==null?(Qe.isTrue(T.coord.equals2D(I),"Found equal nodes with different coordinates"),T):(this._nodeMap.put(f,f),f)}},{key:"checkSplitEdgesCorrectness",value:function(I){var c=this._edge.getCoordinates(),f=I.get(0).getCoordinate(0);if(!f.equals2D(c[0]))throw new Tt("bad split edge start point at "+f);var T=I.get(I.size()-1).getCoordinates(),W=T[T.length-1];if(!W.equals2D(c[c.length-1]))throw new Tt("bad split edge end point at "+W)}}],[{key:"constructor_",value:function(){this._nodeMap=new Jl,this._edge=null;var I=arguments[0];this._edge=I}}])}(),Sc=function(){function I(){E(this,I)}return n(I,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],f=arguments[1];if(c===0&&f===0)throw new Ee("Cannot compute the octant for point ( "+c+", "+f+" )");var T=Math.abs(c),W=Math.abs(f);return c>=0?f>=0?T>=W?0:1:T>=W?7:6:f>=0?T>=W?3:2:T>=W?4:5}if(arguments[0]instanceof ue&&arguments[1]instanceof ue){var me=arguments[0],ze=arguments[1],tt=ze.x-me.x,It=ze.y-me.y;if(tt===0&&It===0)throw new Ee("Cannot compute the octant for two identical points "+me);return I.octant(tt,It)}}}])}(),Pu=function(){return n(function I(){E(this,I)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(I){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(I){}},{key:"getData",value:function(){}}])}(),Lc=function(){return n(function I(){E(this,I)},[{key:"addIntersection",value:function(I,c){}},{key:"interfaces_",get:function(){return[Pu]}}])}(),Ql=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(c){return this._pts[c]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(c){return c===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(c),this.getCoordinate(c+1))}},{key:"setData",value:function(c){this._data=c}},{key:"safeOctant",value:function(c,f){return c.equals2D(f)?0:Sc.octant(c,f)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var c=arguments[0],f=arguments[1];this.addIntersectionNode(c,f)}else if(arguments.length===4){var T=arguments[1],W=arguments[3],me=new ue(arguments[0].getIntersection(W));this.addIntersection(me,T)}}},{key:"toString",value:function(){return Ma.toLineString(new qr(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(c,f){var T=f,W=T+1;if(W<this._pts.length){var me=this._pts[W];c.equals2D(me)&&(T=W)}return this._nodeList.add(c,T)}},{key:"addIntersections",value:function(c,f,T){for(var W=0;W<c.getIntersectionNum();W++)this.addIntersection(c,f,T,W)}},{key:"interfaces_",get:function(){return[Lc]}}],[{key:"constructor_",value:function(){this._nodeList=new ol(this),this._pts=null,this._data=null;var c=arguments[0],f=arguments[1];this._pts=c,this._data=f}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var c=arguments[0],f=new Gn;return I.getNodedSubstrings(c,f),f}if(arguments.length===2)for(var T=arguments[1],W=arguments[0].iterator();W.hasNext();)W.next().getNodeList().addSplitEdges(T)}}])}(),ms=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof I){var c=arguments[0],f=gn.index(this.p0,this.p1,c.p0),T=gn.index(this.p0,this.p1,c.p1);return f>=0&&T>=0||f<=0&&T<=0?Math.max(f,T):0}if(arguments[0]instanceof ue){var W=arguments[0];return gn.index(this.p0,this.p1,W)}}},{key:"toGeometry",value:function(c){return c.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(c){if(!(c instanceof I))return!1;var f=c;return this.p0.equals(f.p0)&&this.p1.equals(f.p1)}},{key:"intersection",value:function(c){var f=new No;return f.computeIntersection(this.p0,this.p1,c.p0,c.p1),f.hasIntersection()?f.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof ue){var c=arguments[0];if(c.equals(this.p0)||c.equals(this.p1))return new ue(c);var f=this.projectionFactor(c),T=new ue;return T.x=this.p0.x+f*(this.p1.x-this.p0.x),T.y=this.p0.y+f*(this.p1.y-this.p0.y),T}if(arguments[0]instanceof I){var W=arguments[0],me=this.projectionFactor(W.p0),ze=this.projectionFactor(W.p1);if(me>=1&&ze>=1||me<=0&&ze<=0)return null;var tt=this.project(W.p0);me<0&&(tt=this.p0),me>1&&(tt=this.p1);var It=this.project(W.p1);return ze<0&&(It=this.p0),ze>1&&(It=this.p1),new I(tt,It)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(c){return c===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(c){return mr.pointToLinePerpendicular(c,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return I.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(c){if(c.equals(this.p0))return 0;if(c.equals(this.p1))return 1;var f=this.p1.x-this.p0.x,T=this.p1.y-this.p0.y,W=f*f+T*T;return W<=0?He.NaN:((c.x-this.p0.x)*f+(c.y-this.p0.y)*T)/W}},{key:"closestPoints",value:function(c){var f=this.intersection(c);if(f!==null)return[f,f];var T=new Array(2).fill(null),W=He.MAX_VALUE,me=null,ze=this.closestPoint(c.p0);W=ze.distance(c.p0),T[0]=ze,T[1]=c.p0;var tt=this.closestPoint(c.p1);(me=tt.distance(c.p1))<W&&(W=me,T[0]=tt,T[1]=c.p1);var It=c.closestPoint(this.p0);(me=It.distance(this.p0))<W&&(W=me,T[0]=this.p0,T[1]=It);var ne=c.closestPoint(this.p1);return(me=ne.distance(this.p1))<W&&(W=me,T[0]=this.p1,T[1]=ne),T}},{key:"closestPoint",value:function(c){var f=this.projectionFactor(c);return f>0&&f<1?this.project(c):this.p0.distance(c)<this.p1.distance(c)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(c){var f=c,T=this.p0.compareTo(f.p0);return T!==0?T:this.p1.compareTo(f.p1)}},{key:"reverse",value:function(){var c=this.p0;this.p0=this.p1,this.p1=c}},{key:"equalsTopo",value:function(c){return this.p0.equals(c.p0)&&this.p1.equals(c.p1)||this.p0.equals(c.p1)&&this.p1.equals(c.p0)}},{key:"lineIntersection",value:function(c){return cn.intersection(this.p0,this.p1,c.p0,c.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(c,f){var T=this.p0.x+c*(this.p1.x-this.p0.x),W=this.p0.y+c*(this.p1.y-this.p0.y),me=this.p1.x-this.p0.x,ze=this.p1.y-this.p0.y,tt=Math.sqrt(me*me+ze*ze),It=0,ne=0;if(f!==0){if(tt<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");It=f*me/tt,ne=f*ze/tt}return new ue(T-ne,W+It)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var c=arguments[0];this.setCoordinates(c.p0,c.p1)}else if(arguments.length===2){var f=arguments[0],T=arguments[1];this.p0.x=f.x,this.p0.y=f.y,this.p1.x=T.x,this.p1.y=T.y}}},{key:"segmentFraction",value:function(c){var f=this.projectionFactor(c);return f<0?f=0:(f>1||He.isNaN(f))&&(f=1),f}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(c){var f=this.p1.getY()-this.p0.getY(),T=this.p0.getX()-this.p1.getX(),W=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),me=f*f+T*T,ze=f*f-T*T,tt=c.getX(),It=c.getY();return new ue((-ze*tt-2*f*T*It-2*f*W)/me,(ze*It-2*f*T*tt-2*T*W)/me)}},{key:"distance",value:function(){if(arguments[0]instanceof I){var c=arguments[0];return mr.segmentToSegment(this.p0,this.p1,c.p0,c.p1)}if(arguments[0]instanceof ue){var f=arguments[0];return mr.pointToSegment(f,this.p0,this.p1)}}},{key:"pointAlong",value:function(c){var f=new ue;return f.x=this.p0.x+c*(this.p1.x-this.p0.x),f.y=this.p0.y+c*(this.p1.y-this.p0.y),f}},{key:"hashCode",value:function(){var c=He.doubleToLongBits(this.p0.x);c^=31*He.doubleToLongBits(this.p0.y);var f=Math.trunc(c)^Math.trunc(c>>32),T=He.doubleToLongBits(this.p1.x);return T^=31*He.doubleToLongBits(this.p1.y),f^(Math.trunc(T)^Math.trunc(T>>32))}},{key:"interfaces_",get:function(){return[ke,Se]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)I.constructor_.call(this,new ue,new ue);else if(arguments.length===1){var c=arguments[0];I.constructor_.call(this,c.p0,c.p1)}else if(arguments.length===2){var f=arguments[0],T=arguments[1];this.p0=f,this.p1=T}else if(arguments.length===4){var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3];I.constructor_.call(this,new ue(W,me),new ue(ze,tt))}}},{key:"midPoint",value:function(c,f){return new ue((c.x+f.x)/2,(c.y+f.y)/2)}}])}(),cu=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var I=arguments[1],c=arguments[2],f=arguments[3];arguments[0].getLineSegment(I,this._overlapSeg1),c.getLineSegment(f,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ms,this._overlapSeg2=new ms}}])}(),Tc=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(I,c){c.p0=this._pts[I],c.p1=this._pts[I+1]}},{key:"computeSelect",value:function(I,c,f,T){var W=this._pts[c],me=this._pts[f];if(f-c==1)return T.select(this,c),null;if(!I.intersects(W,me))return null;var ze=Math.trunc((c+f)/2);c<ze&&this.computeSelect(I,c,ze,T),ze<f&&this.computeSelect(I,ze,f,T)}},{key:"getCoordinates",value:function(){for(var I=new Array(this._end-this._start+1).fill(null),c=0,f=this._start;f<=this._end;f++)I[c++]=this._pts[f];return I}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var I=arguments[0],c=arguments[1];this.computeOverlaps(this._start,this._end,I,I._start,I._end,c)}else if(arguments.length===6){var f=arguments[0],T=arguments[1],W=arguments[2],me=arguments[3],ze=arguments[4],tt=arguments[5];if(T-f==1&&ze-me==1)return tt.overlap(this,f,W,me),null;if(!this.overlaps(f,T,W,me,ze))return null;var It=Math.trunc((f+T)/2),ne=Math.trunc((me+ze)/2);f<It&&(me<ne&&this.computeOverlaps(f,It,W,me,ne,tt),ne<ze&&this.computeOverlaps(f,It,W,ne,ze,tt)),It<T&&(me<ne&&this.computeOverlaps(It,T,W,me,ne,tt),ne<ze&&this.computeOverlaps(It,T,W,ne,ze,tt))}}},{key:"setId",value:function(I){this._id=I}},{key:"select",value:function(I,c){this.computeSelect(I,this._start,this._end,c)}},{key:"getEnvelope",value:function(){if(this._env===null){var I=this._pts[this._start],c=this._pts[this._end];this._env=new le(I,c)}return this._env}},{key:"overlaps",value:function(I,c,f,T,W){return le.intersects(this._pts[I],this._pts[c],f._pts[T],f._pts[W])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var I=arguments[0],c=arguments[1],f=arguments[2],T=arguments[3];this._pts=I,this._start=c,this._end=f,this._context=T}}])}(),Ic=function(){function I(){E(this,I)}return n(I,null,[{key:"findChainEnd",value:function(c,f){for(var T=f;T<c.length-1&&c[T].equals2D(c[T+1]);)T++;if(T>=c.length-1)return c.length-1;for(var W=Cs.quadrant(c[T],c[T+1]),me=f+1;me<c.length&&!(!c[me-1].equals2D(c[me])&&Cs.quadrant(c[me-1],c[me])!==W);)me++;return me-1}},{key:"getChains",value:function(){if(arguments.length===1){var c=arguments[0];return I.getChains(c,null)}if(arguments.length===2){var f=arguments[0],T=arguments[1],W=new Gn,me=0;do{var ze=I.findChainEnd(f,me),tt=new Tc(f,me,ze,T);W.add(tt),me=ze}while(me<f.length-1);return W}}}])}(),bu=function(){return n(function I(){E(this,I)},[{key:"computeNodes",value:function(I){}},{key:"getNodedSubstrings",value:function(){}}])}(),Dc=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(I){this._segInt=I}},{key:"interfaces_",get:function(){return[bu]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var I=arguments[0];this.setSegmentIntersector(I)}}}}])}(),kc=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Ql.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(f){for(var T=Ic.getChains(f.getCoordinates(),f).iterator();T.hasNext();){var W=T.next();W.setId(this._idCounter++),this._index.insert(W.getEnvelope(),W),this._monoChains.add(W)}}},{key:"computeNodes",value:function(f){this._nodedSegStrings=f;for(var T=f.iterator();T.hasNext();)this.add(T.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var f=new du(this._segInt),T=this._monoChains.iterator();T.hasNext();)for(var W=T.next(),me=this._index.query(W.getEnvelope()).iterator();me.hasNext();){var ze=me.next();if(ze.getId()>W.getId()&&(W.computeOverlaps(ze,f),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new Gn,this._index=new Za,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var f=arguments[0];Dc.constructor_.call(this,f)}}}}])}(Dc),du=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"overlap",value:function(){if(arguments.length!==4)return B(c,"overlap",this,1).apply(this,arguments);var f=arguments[1],T=arguments[2],W=arguments[3],me=arguments[0].getContext(),ze=T.getContext();this._si.processIntersections(me,f,ze,W)}}],[{key:"constructor_",value:function(){this._si=null;var f=arguments[0];this._si=f}}])}(cu);kc.SegmentOverlapAction=du;var ql=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"isDeletable",value:function(c,f,T,W){var me=this._inputLine[c],ze=this._inputLine[f],tt=this._inputLine[T];return!!this.isConcave(me,ze,tt)&&!!this.isShallow(me,ze,tt,W)&&this.isShallowSampled(me,ze,c,T,W)}},{key:"deleteShallowConcavities",value:function(){for(var c=1,f=this.findNextNonDeletedIndex(c),T=this.findNextNonDeletedIndex(f),W=!1;T<this._inputLine.length;){var me=!1;this.isDeletable(c,f,T,this._distanceTol)&&(this._isDeleted[f]=I.DELETE,me=!0,W=!0),c=me?T:f,f=this.findNextNonDeletedIndex(c),T=this.findNextNonDeletedIndex(f)}return W}},{key:"isShallowConcavity",value:function(c,f,T,W){return gn.index(c,f,T)===this._angleOrientation&&mr.pointToSegment(f,c,T)<W}},{key:"isShallowSampled",value:function(c,f,T,W,me){var ze=Math.trunc((W-T)/I.NUM_PTS_TO_CHECK);ze<=0&&(ze=1);for(var tt=T;tt<W;tt+=ze)if(!this.isShallow(c,f,this._inputLine[tt],me))return!1;return!0}},{key:"isConcave",value:function(c,f,T){var W=gn.index(c,f,T)===this._angleOrientation;return W}},{key:"simplify",value:function(c){this._distanceTol=Math.abs(c),c<0&&(this._angleOrientation=gn.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var f=!1;do f=this.deleteShallowConcavities();while(f);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(c){for(var f=c+1;f<this._inputLine.length&&this._isDeleted[f]===I.DELETE;)f++;return f}},{key:"isShallow",value:function(c,f,T,W){return mr.pointToSegment(f,c,T)<W}},{key:"collapseLine",value:function(){for(var c=new jn,f=0;f<this._inputLine.length;f++)this._isDeleted[f]!==I.DELETE&&c.add(this._inputLine[f]);return c.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=gn.COUNTERCLOCKWISE;var c=arguments[0];this._inputLine=c}},{key:"simplify",value:function(c,f){return new I(c).simplify(f)}}])}();ql.INIT=0,ql.DELETE=1,ql.KEEP=1,ql.NUM_PTS_TO_CHECK=10;var wu=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getCoordinates",value:function(){return this._ptList.toArray(I.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(c){this._precisionModel=c}},{key:"addPt",value:function(c){var f=new ue(c);if(this._precisionModel.makePrecise(f),this.isRedundant(f))return null;this._ptList.add(f)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(c,f){if(f)for(var T=0;T<c.length;T++)this.addPt(c[T]);else for(var W=c.length-1;W>=0;W--)this.addPt(c[W])}},{key:"isRedundant",value:function(c){if(this._ptList.size()<1)return!1;var f=this._ptList.get(this._ptList.size()-1);return c.distance(f)<this._minimimVertexDistance}},{key:"toString",value:function(){return new po().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var c=new ue(this._ptList.get(0)),f=this._ptList.get(this._ptList.size()-1);if(c.equals(f))return null;this._ptList.add(c)}},{key:"setMinimumVertexDistance",value:function(c){this._minimimVertexDistance=c}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Gn}}])}();wu.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Qs=function(){function I(){E(this,I)}return n(I,null,[{key:"toDegrees",value:function(c){return 180*c/Math.PI}},{key:"normalize",value:function(c){for(;c>Math.PI;)c-=I.PI_TIMES_2;for(;c<=-Math.PI;)c+=I.PI_TIMES_2;return c}},{key:"angle",value:function(){if(arguments.length===1){var c=arguments[0];return Math.atan2(c.y,c.x)}if(arguments.length===2){var f=arguments[0],T=arguments[1],W=T.x-f.x,me=T.y-f.y;return Math.atan2(me,W)}}},{key:"isAcute",value:function(c,f,T){var W=c.x-f.x,me=c.y-f.y;return W*(T.x-f.x)+me*(T.y-f.y)>0}},{key:"isObtuse",value:function(c,f,T){var W=c.x-f.x,me=c.y-f.y;return W*(T.x-f.x)+me*(T.y-f.y)<0}},{key:"interiorAngle",value:function(c,f,T){var W=I.angle(f,c),me=I.angle(f,T);return Math.abs(me-W)}},{key:"normalizePositive",value:function(c){if(c<0){for(;c<0;)c+=I.PI_TIMES_2;c>=I.PI_TIMES_2&&(c=0)}else{for(;c>=I.PI_TIMES_2;)c-=I.PI_TIMES_2;c<0&&(c=0)}return c}},{key:"angleBetween",value:function(c,f,T){var W=I.angle(f,c),me=I.angle(f,T);return I.diff(W,me)}},{key:"diff",value:function(c,f){var T=null;return(T=c<f?f-c:c-f)>Math.PI&&(T=2*Math.PI-T),T}},{key:"toRadians",value:function(c){return c*Math.PI/180}},{key:"getTurn",value:function(c,f){var T=Math.sin(f-c);return T>0?I.COUNTERCLOCKWISE:T<0?I.CLOCKWISE:I.NONE}},{key:"angleBetweenOriented",value:function(c,f,T){var W=I.angle(f,c),me=I.angle(f,T)-W;return me<=-Math.PI?me+I.PI_TIMES_2:me>Math.PI?me-I.PI_TIMES_2:me}}])}();Qs.PI_TIMES_2=2*Math.PI,Qs.PI_OVER_2=Math.PI/2,Qs.PI_OVER_4=Math.PI/4,Qs.COUNTERCLOCKWISE=gn.COUNTERCLOCKWISE,Qs.CLOCKWISE=gn.CLOCKWISE,Qs.NONE=gn.COLLINEAR;var Cl=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"addNextSegment",value:function(c,f){if(this._s0=this._s1,this._s1=this._s2,this._s2=c,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var T=gn.index(this._s0,this._s1,this._s2),W=T===gn.CLOCKWISE&&this._side===Pe.LEFT||T===gn.COUNTERCLOCKWISE&&this._side===Pe.RIGHT;T===0?this.addCollinear(f):W?this.addOutsideTurn(T,f):this.addInsideTurn(T,f)}},{key:"addLineEndCap",value:function(c,f){var T=new ms(c,f),W=new ms;this.computeOffsetSegment(T,Pe.LEFT,this._distance,W);var me=new ms;this.computeOffsetSegment(T,Pe.RIGHT,this._distance,me);var ze=f.x-c.x,tt=f.y-c.y,It=Math.atan2(tt,ze);switch(this._bufParams.getEndCapStyle()){case ae.CAP_ROUND:this._segList.addPt(W.p1),this.addDirectedFillet(f,It+Math.PI/2,It-Math.PI/2,gn.CLOCKWISE,this._distance),this._segList.addPt(me.p1);break;case ae.CAP_FLAT:this._segList.addPt(W.p1),this._segList.addPt(me.p1);break;case ae.CAP_SQUARE:var ne=new ue;ne.x=Math.abs(this._distance)*Math.cos(It),ne.y=Math.abs(this._distance)*Math.sin(It);var ge=new ue(W.p1.x+ne.x,W.p1.y+ne.y),xe=new ue(me.p1.x+ne.x,me.p1.y+ne.y);this._segList.addPt(ge),this._segList.addPt(xe)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(c,f,T,W){var me=cn.intersection(f.p0,f.p1,T.p0,T.p1);if(me!==null&&(W<=0?1:me.distance(c)/Math.abs(W))<=this._bufParams.getMitreLimit())return this._segList.addPt(me),null;this.addLimitedMitreJoin(f,T,W,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(c,f){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*I.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ae.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ae.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(f&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,c,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(c){this._segList.addPt(new ue(c.x+this._distance,c.y+this._distance)),this._segList.addPt(new ue(c.x+this._distance,c.y-this._distance)),this._segList.addPt(new ue(c.x-this._distance,c.y-this._distance)),this._segList.addPt(new ue(c.x-this._distance,c.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(c,f){this._segList.addPts(c,f)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(c,f,T,W,me){var ze=f.x-c.x,tt=f.y-c.y,It=Math.atan2(tt,ze),ne=T.x-c.x,ge=T.y-c.y,xe=Math.atan2(ge,ne);W===gn.CLOCKWISE?It<=xe&&(It+=2*Math.PI):It>=xe&&(It-=2*Math.PI),this._segList.addPt(f),this.addDirectedFillet(c,It,xe,W,me),this._segList.addPt(T)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(c,f,T){this._s1=c,this._s2=f,this._side=T,this._seg1.setCoordinates(c,f),this.computeOffsetSegment(this._seg1,T,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(c,f,T,W){var me=this._seg0.p1,ze=Qs.angle(me,this._seg0.p0),tt=Qs.angleBetweenOriented(this._seg0.p0,me,this._seg1.p1)/2,It=Qs.normalize(ze+tt),ne=Qs.normalize(It+Math.PI),ge=W*T,xe=T-ge*Math.abs(Math.sin(tt)),xt=me.x+ge*Math.cos(ne),pn=me.y+ge*Math.sin(ne),Mn=new ue(xt,pn),Hn=new ms(me,Mn),Qn=Hn.pointAlongOffset(1,xe),tr=Hn.pointAlongOffset(1,-xe);this._side===Pe.LEFT?(this._segList.addPt(Qn),this._segList.addPt(tr)):(this._segList.addPt(tr),this._segList.addPt(Qn))}},{key:"addDirectedFillet",value:function(c,f,T,W,me){var ze=W===gn.CLOCKWISE?-1:1,tt=Math.abs(f-T),It=Math.trunc(tt/this._filletAngleQuantum+.5);if(It<1)return null;for(var ne=tt/It,ge=new ue,xe=0;xe<It;xe++){var xt=f+ze*xe*ne;ge.x=c.x+me*Math.cos(xt),ge.y=c.y+me*Math.sin(xt),this._segList.addPt(ge)}}},{key:"computeOffsetSegment",value:function(c,f,T,W){var me=f===Pe.LEFT?1:-1,ze=c.p1.x-c.p0.x,tt=c.p1.y-c.p0.y,It=Math.sqrt(ze*ze+tt*tt),ne=me*T*ze/It,ge=me*T*tt/It;W.p0.x=c.p0.x-ge,W.p0.y=c.p0.y+ne,W.p1.x=c.p1.x-ge,W.p1.y=c.p1.y+ne}},{key:"addInsideTurn",value:function(c,f){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*I.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var T=new ue((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(T);var W=new ue((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(W)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(c){var f=new ue(c.x+this._distance,c.y);this._segList.addPt(f),this.addDirectedFillet(c,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(c,f){this._segList.addPt(c.p1),this._segList.addPt(f.p0)}},{key:"init",value:function(c){this._distance=c,this._maxCurveSegmentError=c*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new wu,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(c*I.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(c){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===ae.JOIN_BEVEL||this._bufParams.getJoinStyle()===ae.JOIN_MITRE?(c&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,gn.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ms,this._seg1=new ms,this._offset0=new ms,this._offset1=new ms,this._side=0,this._hasNarrowConcaveAngle=!1;var c=arguments[0],f=arguments[1],T=arguments[2];this._precisionModel=c,this._bufParams=f,this._li=new No,this._filletAngleQuantum=Math.PI/2/f.getQuadrantSegments(),f.getQuadrantSegments()>=8&&f.getJoinStyle()===ae.JOIN_ROUND&&(this._closingSegLengthFactor=I.MAX_CLOSING_SEG_LEN_FACTOR),this.init(T)}}])}();Cl.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Cl.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Cl.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Cl.MAX_CLOSING_SEG_LEN_FACTOR=80;var Al=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getOffsetCurve",value:function(c,f){if(this._distance=f,f===0)return null;var T=f<0,W=Math.abs(f),me=this.getSegGen(W);c.length<=1?this.computePointCurve(c[0],me):this.computeOffsetCurve(c,T,me);var ze=me.getCoordinates();return T&&_n.reverse(ze),ze}},{key:"computeSingleSidedBufferCurve",value:function(c,f,T){var W=this.simplifyTolerance(this._distance);if(f){T.addSegments(c,!0);var me=ql.simplify(c,-W),ze=me.length-1;T.initSideSegments(me[ze],me[ze-1],Pe.LEFT),T.addFirstSegment();for(var tt=ze-2;tt>=0;tt--)T.addNextSegment(me[tt],!0)}else{T.addSegments(c,!1);var It=ql.simplify(c,W),ne=It.length-1;T.initSideSegments(It[0],It[1],Pe.LEFT),T.addFirstSegment();for(var ge=2;ge<=ne;ge++)T.addNextSegment(It[ge],!0)}T.addLastSegment(),T.closeRing()}},{key:"computeRingBufferCurve",value:function(c,f,T){var W=this.simplifyTolerance(this._distance);f===Pe.RIGHT&&(W=-W);var me=ql.simplify(c,W),ze=me.length-1;T.initSideSegments(me[ze-1],me[0],f);for(var tt=1;tt<=ze;tt++){var It=tt!==1;T.addNextSegment(me[tt],It)}T.closeRing()}},{key:"computeLineBufferCurve",value:function(c,f){var T=this.simplifyTolerance(this._distance),W=ql.simplify(c,T),me=W.length-1;f.initSideSegments(W[0],W[1],Pe.LEFT);for(var ze=2;ze<=me;ze++)f.addNextSegment(W[ze],!0);f.addLastSegment(),f.addLineEndCap(W[me-1],W[me]);var tt=ql.simplify(c,-T),It=tt.length-1;f.initSideSegments(tt[It],tt[It-1],Pe.LEFT);for(var ne=It-2;ne>=0;ne--)f.addNextSegment(tt[ne],!0);f.addLastSegment(),f.addLineEndCap(tt[1],tt[0]),f.closeRing()}},{key:"computePointCurve",value:function(c,f){switch(this._bufParams.getEndCapStyle()){case ae.CAP_ROUND:f.createCircle(c);break;case ae.CAP_SQUARE:f.createSquare(c)}}},{key:"getLineCurve",value:function(c,f){if(this._distance=f,this.isLineOffsetEmpty(f))return null;var T=Math.abs(f),W=this.getSegGen(T);if(c.length<=1)this.computePointCurve(c[0],W);else if(this._bufParams.isSingleSided()){var me=f<0;this.computeSingleSidedBufferCurve(c,me,W)}else this.computeLineBufferCurve(c,W);return W.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(c){return c*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(c,f,T){if(this._distance=T,c.length<=2)return this.getLineCurve(c,T);if(T===0)return I.copyCoordinates(c);var W=this.getSegGen(T);return this.computeRingBufferCurve(c,f,W),W.getCoordinates()}},{key:"computeOffsetCurve",value:function(c,f,T){var W=this.simplifyTolerance(this._distance);if(f){var me=ql.simplify(c,-W),ze=me.length-1;T.initSideSegments(me[ze],me[ze-1],Pe.LEFT),T.addFirstSegment();for(var tt=ze-2;tt>=0;tt--)T.addNextSegment(me[tt],!0)}else{var It=ql.simplify(c,W),ne=It.length-1;T.initSideSegments(It[0],It[1],Pe.LEFT),T.addFirstSegment();for(var ge=2;ge<=ne;ge++)T.addNextSegment(It[ge],!0)}T.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(c){return c===0||c<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(c){return new Cl(this._precisionModel,this._bufParams,c)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var c=arguments[0],f=arguments[1];this._precisionModel=c,this._bufParams=f}},{key:"copyCoordinates",value:function(c){for(var f=new Array(c.length).fill(null),T=0;T<f.length;T++)f[T]=new ue(c[T]);return f}}])}(),eu=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var I=arguments[0],c=new Gn,f=this._subgraphs.iterator();f.hasNext();){var T=f.next(),W=T.getEnvelope();I.y<W.getMinY()||I.y>W.getMaxY()||this.findStabbedSegments(I,T.getDirectedEdges(),c)}return c}if(arguments.length===3){if(Me(arguments[2],gt)&&arguments[0]instanceof ue&&arguments[1]instanceof qi){for(var me=arguments[0],ze=arguments[1],tt=arguments[2],It=ze.getEdge().getCoordinates(),ne=0;ne<It.length-1;ne++)if(this._seg.p0=It[ne],this._seg.p1=It[ne+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<me.x||this._seg.isHorizontal()||me.y<this._seg.p0.y||me.y>this._seg.p1.y||gn.index(this._seg.p0,this._seg.p1,me)===gn.RIGHT)){var ge=ze.getDepth(Pe.LEFT);this._seg.p0.equals(It[ne])||(ge=ze.getDepth(Pe.RIGHT));var xe=new Eu(this._seg,ge);tt.add(xe)}}else if(Me(arguments[2],gt)&&arguments[0]instanceof ue&&Me(arguments[1],gt))for(var xt=arguments[0],pn=arguments[2],Mn=arguments[1].iterator();Mn.hasNext();){var Hn=Mn.next();Hn.isForward()&&this.findStabbedSegments(xt,Hn,pn)}}}},{key:"getDepth",value:function(I){var c=this.findStabbedSegments(I);return c.size()===0?0:cs.min(c)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ms;var I=arguments[0];this._subgraphs=I}}])}(),Eu=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(I){var c=I;if(this._upwardSeg.minX()>=c._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=c._upwardSeg.minX())return-1;var f=this._upwardSeg.orientationIndex(c._upwardSeg);return f!==0||(f=-1*c._upwardSeg.orientationIndex(this._upwardSeg))!==0?f:this._upwardSeg.compareTo(c._upwardSeg)}},{key:"compareX",value:function(I,c){var f=I.p0.compareTo(c.p0);return f!==0?f:I.p1.compareTo(c.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var I=arguments[0],c=arguments[1];this._upwardSeg=new ms(I),this._leftDepth=c}}])}();eu.DepthSegment=Eu;var Nc=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,null,[{key:"constructor_",value:function(){se.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(se),Mc=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getY",value:function(){var c=this.y/this.w;if(He.isNaN(c)||He.isInfinite(c))throw new Nc;return c}},{key:"getX",value:function(){var c=this.x/this.w;if(He.isNaN(c)||He.isInfinite(c))throw new Nc;return c}},{key:"getCoordinate",value:function(){var c=new ue;return c.x=this.getX(),c.y=this.getY(),c}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var c=arguments[0];this.x=c.x,this.y=c.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var f=arguments[0],T=arguments[1];this.x=f,this.y=T,this.w=1}else if(arguments[0]instanceof I&&arguments[1]instanceof I){var W=arguments[0],me=arguments[1];this.x=W.y*me.w-me.y*W.w,this.y=me.x*W.w-W.x*me.w,this.w=W.x*me.y-me.x*W.y}else if(arguments[0]instanceof ue&&arguments[1]instanceof ue){var ze=arguments[0],tt=arguments[1];this.x=ze.y-tt.y,this.y=tt.x-ze.x,this.w=ze.x*tt.y-tt.x*ze.y}}else if(arguments.length===3){var It=arguments[0],ne=arguments[1],ge=arguments[2];this.x=It,this.y=ne,this.w=ge}else if(arguments.length===4){var xe=arguments[0],xt=arguments[1],pn=arguments[2],Mn=arguments[3],Hn=xe.y-xt.y,Qn=xt.x-xe.x,tr=xe.x*xt.y-xt.x*xe.y,Ir=pn.y-Mn.y,oi=Mn.x-pn.x,ni=pn.x*Mn.y-Mn.x*pn.y;this.x=Qn*ni-oi*tr,this.y=Ir*tr-Hn*ni,this.w=Hn*oi-Ir*Qn}}}])}(),fd=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"area",value:function(){return I.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return I.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(c){if(c===null)throw new Ee("Supplied point is null.");return I.interpolateZ(c,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return I.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return I.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return I.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return I.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return I.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return I.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var c=arguments[0],f=arguments[1],T=arguments[2];this.p0=c,this.p1=f,this.p2=T}},{key:"area",value:function(c,f,T){return Math.abs(((T.x-c.x)*(f.y-c.y)-(f.x-c.x)*(T.y-c.y))/2)}},{key:"signedArea",value:function(c,f,T){return((T.x-c.x)*(f.y-c.y)-(f.x-c.x)*(T.y-c.y))/2}},{key:"det",value:function(c,f,T,W){return c*W-f*T}},{key:"interpolateZ",value:function(c,f,T,W){var me=f.x,ze=f.y,tt=T.x-me,It=W.x-me,ne=T.y-ze,ge=W.y-ze,xe=tt*ge-It*ne,xt=c.x-me,pn=c.y-ze,Mn=(ge*xt-It*pn)/xe,Hn=(-ne*xt+tt*pn)/xe;return f.getZ()+Mn*(T.getZ()-f.getZ())+Hn*(W.getZ()-f.getZ())}},{key:"longestSideLength",value:function(c,f,T){var W=c.distance(f),me=f.distance(T),ze=T.distance(c),tt=W;return me>tt&&(tt=me),ze>tt&&(tt=ze),tt}},{key:"circumcentreDD",value:function(c,f,T){var W=Lt.valueOf(c.x).subtract(T.x),me=Lt.valueOf(c.y).subtract(T.y),ze=Lt.valueOf(f.x).subtract(T.x),tt=Lt.valueOf(f.y).subtract(T.y),It=Lt.determinant(W,me,ze,tt).multiply(2),ne=W.sqr().add(me.sqr()),ge=ze.sqr().add(tt.sqr()),xe=Lt.determinant(me,ne,tt,ge),xt=Lt.determinant(W,ne,ze,ge),pn=Lt.valueOf(T.x).subtract(xe.divide(It)).doubleValue(),Mn=Lt.valueOf(T.y).add(xt.divide(It)).doubleValue();return new ue(pn,Mn)}},{key:"isAcute",value:function(c,f,T){return!!Qs.isAcute(c,f,T)&&!!Qs.isAcute(f,T,c)&&!!Qs.isAcute(T,c,f)}},{key:"circumcentre",value:function(c,f,T){var W=T.x,me=T.y,ze=c.x-W,tt=c.y-me,It=f.x-W,ne=f.y-me,ge=2*I.det(ze,tt,It,ne),xe=I.det(tt,ze*ze+tt*tt,ne,It*It+ne*ne),xt=I.det(ze,ze*ze+tt*tt,It,It*It+ne*ne);return new ue(W-xe/ge,me+xt/ge)}},{key:"perpendicularBisector",value:function(c,f){var T=f.x-c.x,W=f.y-c.y,me=new Mc(c.x+T/2,c.y+W/2,1),ze=new Mc(c.x-W+T/2,c.y+T+W/2,1);return new Mc(me,ze)}},{key:"angleBisector",value:function(c,f,T){var W=f.distance(c),me=W/(W+f.distance(T)),ze=T.x-c.x,tt=T.y-c.y;return new ue(c.x+me*ze,c.y+me*tt)}},{key:"area3D",value:function(c,f,T){var W=f.x-c.x,me=f.y-c.y,ze=f.getZ()-c.getZ(),tt=T.x-c.x,It=T.y-c.y,ne=T.getZ()-c.getZ(),ge=me*ne-ze*It,xe=ze*tt-W*ne,xt=W*It-me*tt,pn=ge*ge+xe*xe+xt*xt,Mn=Math.sqrt(pn)/2;return Mn}},{key:"centroid",value:function(c,f,T){var W=(c.x+f.x+T.x)/3,me=(c.y+f.y+T.y)/3;return new ue(W,me)}},{key:"inCentre",value:function(c,f,T){var W=f.distance(T),me=c.distance(T),ze=c.distance(f),tt=W+me+ze,It=(W*c.x+me*f.x+ze*T.x)/tt,ne=(W*c.y+me*f.y+ze*T.y)/tt;return new ue(It,ne)}}])}(),Ad=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(I,c,f,T,W){if(c===0&&I.length<sn.MINIMUM_VALID_SIZE)return null;var me=T,ze=W;I.length>=sn.MINIMUM_VALID_SIZE&&gn.isCCW(I)&&(me=W,ze=T,f=Pe.opposite(f));var tt=this._curveBuilder.getRingCurve(I,f,c);this.addCurve(tt,me,ze)}},{key:"addRingBothSides",value:function(I,c){this.addRingSide(I,c,Pe.LEFT,we.EXTERIOR,we.INTERIOR),this.addRingSide(I,c,Pe.RIGHT,we.INTERIOR,we.EXTERIOR)}},{key:"addPoint",value:function(I){if(this._distance<=0)return null;var c=I.getCoordinates(),f=this._curveBuilder.getLineCurve(c,this._distance);this.addCurve(f,we.EXTERIOR,we.INTERIOR)}},{key:"addPolygon",value:function(I){var c=this._distance,f=Pe.LEFT;this._distance<0&&(c=-this._distance,f=Pe.RIGHT);var T=I.getExteriorRing(),W=_n.removeRepeatedPoints(T.getCoordinates());if(this._distance<0&&this.isErodedCompletely(T,this._distance)||this._distance<=0&&W.length<3)return null;this.addRingSide(W,c,f,we.EXTERIOR,we.INTERIOR);for(var me=0;me<I.getNumInteriorRing();me++){var ze=I.getInteriorRingN(me),tt=_n.removeRepeatedPoints(ze.getCoordinates());this._distance>0&&this.isErodedCompletely(ze,-this._distance)||this.addRingSide(tt,c,Pe.opposite(f),we.INTERIOR,we.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(I,c){var f=new fd(I[0],I[1],I[2]),T=f.inCentre();return mr.pointToSegment(T,f.p0,f.p1)<Math.abs(c)}},{key:"addLineString",value:function(I){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var c=_n.removeRepeatedPoints(I.getCoordinates());if(_n.isRing(c)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(c,this._distance);else{var f=this._curveBuilder.getLineCurve(c,this._distance);this.addCurve(f,we.EXTERIOR,we.INTERIOR)}}},{key:"addCurve",value:function(I,c,f){if(I===null||I.length<2)return null;var T=new Ql(I,new es(0,we.BOUNDARY,c,f));this._curveList.add(T)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(I){if(I.isEmpty())return null;if(I instanceof fn)this.addPolygon(I);else if(I instanceof Jn)this.addLineString(I);else if(I instanceof Br)this.addPoint(I);else if(I instanceof jt)this.addCollection(I);else if(I instanceof yo)this.addCollection(I);else if(I instanceof ci)this.addCollection(I);else{if(!(I instanceof Dt))throw new or(I.getGeometryType());this.addCollection(I)}}},{key:"isErodedCompletely",value:function(I,c){var f=I.getCoordinates();if(f.length<4)return c<0;if(f.length===4)return this.isTriangleErodedCompletely(f,c);var T=I.getEnvelopeInternal(),W=Math.min(T.getHeight(),T.getWidth());return c<0&&2*Math.abs(c)>W}},{key:"addCollection",value:function(I){for(var c=0;c<I.getNumGeometries();c++){var f=I.getGeometryN(c);this.add(f)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Gn;var I=arguments[0],c=arguments[1],f=arguments[2];this._inputGeom=I,this._distance=c,this._curveBuilder=f}}])}(),jo=function(){return n(function I(){E(this,I)},[{key:"locate",value:function(I){}}])}(),aa=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,I.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Mt;var c=this._parent.getGeometryN(this._index++);return c instanceof Dt?(this._subcollectionIterator=new I(c),this._subcollectionIterator.next()):c}},{key:"remove",value:function(){throw new or(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Yu]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var c=arguments[0];this._parent=c,this._atStart=!0,this._index=0,this._max=c.getNumGeometries()}},{key:"isAtomic",value:function(c){return!(c instanceof Dt)}}])}(),go=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"locate",value:function(c){return I.locate(c,this._geom)}},{key:"interfaces_",get:function(){return[jo]}}],[{key:"constructor_",value:function(){this._geom=null;var c=arguments[0];this._geom=c}},{key:"locatePointInPolygon",value:function(c,f){if(f.isEmpty())return we.EXTERIOR;var T=f.getExteriorRing(),W=I.locatePointInRing(c,T);if(W!==we.INTERIOR)return W;for(var me=0;me<f.getNumInteriorRing();me++){var ze=f.getInteriorRingN(me),tt=I.locatePointInRing(c,ze);if(tt===we.BOUNDARY)return we.BOUNDARY;if(tt===we.INTERIOR)return we.EXTERIOR}return we.INTERIOR}},{key:"locatePointInRing",value:function(c,f){return f.getEnvelopeInternal().intersects(c)?Hs.locateInRing(c,f.getCoordinates()):we.EXTERIOR}},{key:"containsPointInPolygon",value:function(c,f){return we.EXTERIOR!==I.locatePointInPolygon(c,f)}},{key:"locateInGeometry",value:function(c,f){if(f instanceof fn)return I.locatePointInPolygon(c,f);if(f instanceof Dt)for(var T=new aa(f);T.hasNext();){var W=T.next();if(W!==f){var me=I.locateInGeometry(c,W);if(me!==we.EXTERIOR)return me}}return we.EXTERIOR}},{key:"isContained",value:function(c,f){return we.EXTERIOR!==I.locate(c,f)}},{key:"locate",value:function(c,f){return f.isEmpty()?we.EXTERIOR:f.getEnvelopeInternal().intersects(c)?I.locateInGeometry(c,f):we.EXTERIOR}}])}(),Ui=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(I){this.getEdges();var c=this._edgeList.indexOf(I),f=c-1;return c===0&&(f=this._edgeList.size()-1),this._edgeList.get(f)}},{key:"propagateSideLabels",value:function(I){for(var c=we.NONE,f=this.iterator();f.hasNext();){var T=f.next().getLabel();T.isArea(I)&&T.getLocation(I,Pe.LEFT)!==we.NONE&&(c=T.getLocation(I,Pe.LEFT))}if(c===we.NONE)return null;for(var W=c,me=this.iterator();me.hasNext();){var ze=me.next(),tt=ze.getLabel();if(tt.getLocation(I,Pe.ON)===we.NONE&&tt.setLocation(I,Pe.ON,W),tt.isArea(I)){var It=tt.getLocation(I,Pe.LEFT),ne=tt.getLocation(I,Pe.RIGHT);if(ne!==we.NONE){if(ne!==W)throw new Sr("side location conflict",ze.getCoordinate());It===we.NONE&&Qe.shouldNeverReachHere("found single null side (at "+ze.getCoordinate()+")"),W=It}else Qe.isTrue(tt.getLocation(I,Pe.LEFT)===we.NONE,"found single null side"),tt.setLocation(I,Pe.RIGHT,W),tt.setLocation(I,Pe.LEFT,W)}}}},{key:"getCoordinate",value:function(){var I=this.iterator();return I.hasNext()?I.next().getCoordinate():null}},{key:"print",value:function(I){Ln.out.println("EdgeEndStar:   "+this.getCoordinate());for(var c=this.iterator();c.hasNext();)c.next().print(I)}},{key:"isAreaLabelsConsistent",value:function(I){return this.computeEdgeEndLabels(I.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(I){var c=this.getEdges();if(c.size()<=0)return!0;var f=c.size()-1,T=c.get(f).getLabel().getLocation(I,Pe.LEFT);Qe.isTrue(T!==we.NONE,"Found unlabelled area edge");for(var W=T,me=this.iterator();me.hasNext();){var ze=me.next().getLabel();Qe.isTrue(ze.isArea(I),"Found non-area edge");var tt=ze.getLocation(I,Pe.LEFT),It=ze.getLocation(I,Pe.RIGHT);if(tt===It||It!==W)return!1;W=tt}return!0}},{key:"findIndex",value:function(I){this.iterator();for(var c=0;c<this._edgeList.size();c++)if(this._edgeList.get(c)===I)return c;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new Gn(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(I,c,f){return this._ptInAreaLocation[I]===we.NONE&&(this._ptInAreaLocation[I]=go.locate(c,f[I].getGeometry())),this._ptInAreaLocation[I]}},{key:"toString",value:function(){var I=new At;I.append("EdgeEndStar:   "+this.getCoordinate()),I.append(`
`);for(var c=this.iterator();c.hasNext();){var f=c.next();I.append(f),I.append(`
`)}return I.toString()}},{key:"computeEdgeEndLabels",value:function(I){for(var c=this.iterator();c.hasNext();)c.next().computeLabel(I)}},{key:"computeLabelling",value:function(I){this.computeEdgeEndLabels(I[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var c=[!1,!1],f=this.iterator();f.hasNext();)for(var T=f.next().getLabel(),W=0;W<2;W++)T.isLine(W)&&T.getLocation(W)===we.BOUNDARY&&(c[W]=!0);for(var me=this.iterator();me.hasNext();)for(var ze=me.next(),tt=ze.getLabel(),It=0;It<2;It++)if(tt.isAnyNull(It)){var ne=we.NONE;if(c[It])ne=we.EXTERIOR;else{var ge=ze.getCoordinate();ne=this.getLocation(It,ge,I)}tt.setAllLocationsIfNull(It,ne)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(I,c){this._edgeMap.put(I,c),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Jl,this._edgeList=null,this._ptInAreaLocation=[we.NONE,we.NONE]}}])}(),qs=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var f=null,T=null,W=this._SCANNING_FOR_INCOMING,me=0;me<this._resultAreaEdgeList.size();me++){var ze=this._resultAreaEdgeList.get(me),tt=ze.getSym();if(ze.getLabel().isArea())switch(f===null&&ze.isInResult()&&(f=ze),W){case this._SCANNING_FOR_INCOMING:if(!tt.isInResult())continue;T=tt,W=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!ze.isInResult())continue;T.setNext(ze),W=this._SCANNING_FOR_INCOMING}}if(W===this._LINKING_TO_OUTGOING){if(f===null)throw new Sr("no outgoing dirEdge found",this.getCoordinate());Qe.isTrue(f.isInResult(),"unable to link last incoming dirEdge"),T.setNext(f)}}},{key:"insert",value:function(f){var T=f;this.insertEdgeEnd(T,T)}},{key:"getRightmostEdge",value:function(){var f=this.getEdges(),T=f.size();if(T<1)return null;var W=f.get(0);if(T===1)return W;var me=f.get(T-1),ze=W.getQuadrant(),tt=me.getQuadrant();return Cs.isNorthern(ze)&&Cs.isNorthern(tt)?W:Cs.isNorthern(ze)||Cs.isNorthern(tt)?W.getDy()!==0?W:me.getDy()!==0?me:(Qe.shouldNeverReachHere("found two horizontal edges incident on node"),null):me}},{key:"print",value:function(f){Ln.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var T=this.iterator();T.hasNext();){var W=T.next();f.print("out "),W.print(f),f.println(),f.print("in "),W.getSym().print(f),f.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Gn;for(var f=this.iterator();f.hasNext();){var T=f.next();(T.isInResult()||T.getSym().isInResult())&&this._resultAreaEdgeList.add(T)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(f){for(var T=this.iterator();T.hasNext();){var W=T.next().getLabel();W.setAllLocationsIfNull(0,f.getLocation(0)),W.setAllLocationsIfNull(1,f.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var f=null,T=null,W=this._edgeList.size()-1;W>=0;W--){var me=this._edgeList.get(W),ze=me.getSym();T===null&&(T=ze),f!==null&&ze.setNext(f),f=me}T.setNext(f)}},{key:"computeDepths",value:function(){if(arguments.length===1){var f=arguments[0],T=this.findIndex(f),W=f.getDepth(Pe.LEFT),me=f.getDepth(Pe.RIGHT),ze=this.computeDepths(T+1,this._edgeList.size(),W);if(this.computeDepths(0,T,ze)!==me)throw new Sr("depth mismatch at "+f.getCoordinate())}else if(arguments.length===3){for(var tt=arguments[1],It=arguments[2],ne=arguments[0];ne<tt;ne++){var ge=this._edgeList.get(ne);ge.setEdgeDepths(Pe.RIGHT,It),It=ge.getDepth(Pe.LEFT)}return It}}},{key:"mergeSymLabels",value:function(){for(var f=this.iterator();f.hasNext();){var T=f.next();T.getLabel().merge(T.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(f){for(var T=null,W=null,me=this._SCANNING_FOR_INCOMING,ze=this._resultAreaEdgeList.size()-1;ze>=0;ze--){var tt=this._resultAreaEdgeList.get(ze),It=tt.getSym();switch(T===null&&tt.getEdgeRing()===f&&(T=tt),me){case this._SCANNING_FOR_INCOMING:if(It.getEdgeRing()!==f)continue;W=It,me=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(tt.getEdgeRing()!==f)continue;W.setNextMin(tt),me=this._SCANNING_FOR_INCOMING}}me===this._LINKING_TO_OUTGOING&&(Qe.isTrue(T!==null,"found null for first outgoing dirEdge"),Qe.isTrue(T.getEdgeRing()===f,"unable to link last incoming dirEdge"),W.setNextMin(T))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var f=0,T=this.iterator();T.hasNext();)T.next().isInResult()&&f++;return f}if(arguments.length===1){for(var W=arguments[0],me=0,ze=this.iterator();ze.hasNext();)ze.next().getEdgeRing()===W&&me++;return me}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var f=we.NONE,T=this.iterator();T.hasNext();){var W=T.next(),me=W.getSym();if(!W.isLineEdge()){if(W.isInResult()){f=we.INTERIOR;break}if(me.isInResult()){f=we.EXTERIOR;break}}}if(f===we.NONE)return null;for(var ze=f,tt=this.iterator();tt.hasNext();){var It=tt.next(),ne=It.getSym();It.isLineEdge()?It.getEdge().setCovered(ze===we.INTERIOR):(It.isInResult()&&(ze=we.EXTERIOR),ne.isInResult()&&(ze=we.INTERIOR))}}},{key:"computeLabelling",value:function(f){B(c,"computeLabelling",this,1).call(this,f),this._label=new es(we.NONE);for(var T=this.iterator();T.hasNext();)for(var W=T.next().getEdge().getLabel(),me=0;me<2;me++){var ze=W.getLocation(me);ze!==we.INTERIOR&&ze!==we.BOUNDARY||this._label.setLocation(me,we.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Ui),Io=function(I){function c(){return E(this,c),i(this,c)}return Y(c,I),n(c,[{key:"createNode",value:function(f){return new Ml(f,new qs)}}])}(Ta),Nu=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"compareTo",value:function(c){var f=c;return I.compareOriented(this._pts,this._orientation,f._pts,f._orientation)}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var c=arguments[0];this._pts=c,this._orientation=I.orientation(c)}},{key:"orientation",value:function(c){return _n.increasingDirection(c)===1}},{key:"compareOriented",value:function(c,f,T,W){for(var me=f?1:-1,ze=W?1:-1,tt=f?c.length:-1,It=W?T.length:-1,ne=f?0:c.length-1,ge=W?0:T.length-1;;){var xe=c[ne].compareTo(T[ge]);if(xe!==0)return xe;var xt=(ne+=me)===tt,pn=(ge+=ze)===It;if(xt&&!pn)return-1;if(!xt&&pn)return 1;if(xt&&pn)return 0}}}])}(),Cc=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"print",value:function(I){I.print("MULTILINESTRING ( ");for(var c=0;c<this._edges.size();c++){var f=this._edges.get(c);c>0&&I.print(","),I.print("(");for(var T=f.getCoordinates(),W=0;W<T.length;W++)W>0&&I.print(","),I.print(T[W].x+" "+T[W].y);I.println(")")}I.print(")  ")}},{key:"addAll",value:function(I){for(var c=I.iterator();c.hasNext();)this.add(c.next())}},{key:"findEdgeIndex",value:function(I){for(var c=0;c<this._edges.size();c++)if(this._edges.get(c).equals(I))return c;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(I){return this._edges.get(I)}},{key:"findEqualEdge",value:function(I){var c=new Nu(I.getCoordinates());return this._ocaMap.get(c)}},{key:"add",value:function(I){this._edges.add(I);var c=new Nu(I.getCoordinates());this._ocaMap.put(c,I)}}],[{key:"constructor_",value:function(){this._edges=new Gn,this._ocaMap=new Jl}}])}(),Mo=function(){return n(function I(){E(this,I)},[{key:"processIntersections",value:function(I,c,f,T){}},{key:"isDone",value:function(){}}])}(),Zc=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"isTrivialIntersection",value:function(c,f,T,W){if(c===T&&this._li.getIntersectionNum()===1){if(I.isAdjacentSegments(f,W))return!0;if(c.isClosed()){var me=c.size()-1;if(f===0&&W===me||W===0&&f===me)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(c,f,T,W){if(c===T&&f===W)return null;this.numTests++;var me=c.getCoordinates()[f],ze=c.getCoordinates()[f+1],tt=T.getCoordinates()[W],It=T.getCoordinates()[W+1];this._li.computeIntersection(me,ze,tt,It),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(c,f,T,W)||(this._hasIntersection=!0,c.addIntersections(this._li,f,0),T.addIntersections(this._li,W,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Mo]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var c=arguments[0];this._li=c}},{key:"isAdjacentSegments",value:function(c,f){return Math.abs(c-f)===1}}])}(),gc=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(I){I.print(this.coord),I.print(" seg # = "+this.segmentIndex),I.println(" dist = "+this.dist)}},{key:"compareTo",value:function(I){var c=I;return this.compare(c.segmentIndex,c.dist)}},{key:"isEndPoint",value:function(I){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===I}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(I,c){return this.segmentIndex<I?-1:this.segmentIndex>I?1:this.dist<c?-1:this.dist>c?1:0}},{key:"interfaces_",get:function(){return[ke]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var I=arguments[0],c=arguments[1],f=arguments[2];this.coord=new ue(I),this.segmentIndex=c,this.dist=f}}])}(),Pd=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"print",value:function(I){I.println("Intersections:");for(var c=this.iterator();c.hasNext();)c.next().print(I)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(I){this.addEndpoints();for(var c=this.iterator(),f=c.next();c.hasNext();){var T=c.next(),W=this.createSplitEdge(f,T);I.add(W),f=T}}},{key:"addEndpoints",value:function(){var I=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[I],I,0)}},{key:"createSplitEdge",value:function(I,c){var f=c.segmentIndex-I.segmentIndex+2,T=this.edge.pts[c.segmentIndex],W=c.dist>0||!c.coord.equals2D(T);W||f--;var me=new Array(f).fill(null),ze=0;me[ze++]=new ue(I.coord);for(var tt=I.segmentIndex+1;tt<=c.segmentIndex;tt++)me[ze++]=this.edge.pts[tt];return W&&(me[ze]=c.coord),new vr(me,new es(this.edge._label))}},{key:"add",value:function(I,c,f){var T=new gc(I,c,f),W=this._nodeMap.get(T);return W!==null?W:(this._nodeMap.put(T,T),T)}},{key:"isIntersection",value:function(I){for(var c=this.iterator();c.hasNext();)if(c.next().coord.equals(I))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Jl,this.edge=null;var I=arguments[0];this.edge=I}}])}(),Wc=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])||I.isTrue(this._matrix[we.INTERIOR][we.BOUNDARY])||I.isTrue(this._matrix[we.BOUNDARY][we.INTERIOR])||I.isTrue(this._matrix[we.BOUNDARY][we.BOUNDARY]))&&this._matrix[we.EXTERIOR][we.INTERIOR]===Xe.FALSE&&this._matrix[we.EXTERIOR][we.BOUNDARY]===Xe.FALSE}},{key:"isCoveredBy",value:function(){return(I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])||I.isTrue(this._matrix[we.INTERIOR][we.BOUNDARY])||I.isTrue(this._matrix[we.BOUNDARY][we.INTERIOR])||I.isTrue(this._matrix[we.BOUNDARY][we.BOUNDARY]))&&this._matrix[we.INTERIOR][we.EXTERIOR]===Xe.FALSE&&this._matrix[we.BOUNDARY][we.EXTERIOR]===Xe.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var c=arguments[0],f=0;f<c.length;f++){var T=Math.trunc(f/3),W=f%3;this._matrix[T][W]=Xe.toDimensionValue(c.charAt(f))}else if(arguments.length===3){var me=arguments[0],ze=arguments[1],tt=arguments[2];this._matrix[me][ze]=tt}}},{key:"isContains",value:function(){return I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])&&this._matrix[we.EXTERIOR][we.INTERIOR]===Xe.FALSE&&this._matrix[we.EXTERIOR][we.BOUNDARY]===Xe.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var c=arguments[0],f=0;f<c.length;f++){var T=Math.trunc(f/3),W=f%3;this.setAtLeast(T,W,Xe.toDimensionValue(c.charAt(f)))}else if(arguments.length===3){var me=arguments[0],ze=arguments[1],tt=arguments[2];this._matrix[me][ze]<tt&&(this._matrix[me][ze]=tt)}}},{key:"setAtLeastIfValid",value:function(c,f,T){c>=0&&f>=0&&this.setAtLeast(c,f,T)}},{key:"isWithin",value:function(){return I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])&&this._matrix[we.INTERIOR][we.EXTERIOR]===Xe.FALSE&&this._matrix[we.BOUNDARY][we.EXTERIOR]===Xe.FALSE}},{key:"isTouches",value:function(c,f){return c>f?this.isTouches(f,c):(c===Xe.A&&f===Xe.A||c===Xe.L&&f===Xe.L||c===Xe.L&&f===Xe.A||c===Xe.P&&f===Xe.A||c===Xe.P&&f===Xe.L)&&this._matrix[we.INTERIOR][we.INTERIOR]===Xe.FALSE&&(I.isTrue(this._matrix[we.INTERIOR][we.BOUNDARY])||I.isTrue(this._matrix[we.BOUNDARY][we.INTERIOR])||I.isTrue(this._matrix[we.BOUNDARY][we.BOUNDARY]))}},{key:"isOverlaps",value:function(c,f){return c===Xe.P&&f===Xe.P||c===Xe.A&&f===Xe.A?I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])&&I.isTrue(this._matrix[we.INTERIOR][we.EXTERIOR])&&I.isTrue(this._matrix[we.EXTERIOR][we.INTERIOR]):c===Xe.L&&f===Xe.L&&this._matrix[we.INTERIOR][we.INTERIOR]===1&&I.isTrue(this._matrix[we.INTERIOR][we.EXTERIOR])&&I.isTrue(this._matrix[we.EXTERIOR][we.INTERIOR])}},{key:"isEquals",value:function(c,f){return c===f&&I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])&&this._matrix[we.INTERIOR][we.EXTERIOR]===Xe.FALSE&&this._matrix[we.BOUNDARY][we.EXTERIOR]===Xe.FALSE&&this._matrix[we.EXTERIOR][we.INTERIOR]===Xe.FALSE&&this._matrix[we.EXTERIOR][we.BOUNDARY]===Xe.FALSE}},{key:"toString",value:function(){for(var c=new Yr("123456789"),f=0;f<3;f++)for(var T=0;T<3;T++)c.setCharAt(3*f+T,Xe.toDimensionSymbol(this._matrix[f][T]));return c.toString()}},{key:"setAll",value:function(c){for(var f=0;f<3;f++)for(var T=0;T<3;T++)this._matrix[f][T]=c}},{key:"get",value:function(c,f){return this._matrix[c][f]}},{key:"transpose",value:function(){var c=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=c,c=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=c,c=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=c,this}},{key:"matches",value:function(c){if(c.length!==9)throw new Ee("Should be length 9: "+c);for(var f=0;f<3;f++)for(var T=0;T<3;T++)if(!I.matches(this._matrix[f][T],c.charAt(3*f+T)))return!1;return!0}},{key:"add",value:function(c){for(var f=0;f<3;f++)for(var T=0;T<3;T++)this.setAtLeast(f,T,c.get(f,T))}},{key:"isDisjoint",value:function(){return this._matrix[we.INTERIOR][we.INTERIOR]===Xe.FALSE&&this._matrix[we.INTERIOR][we.BOUNDARY]===Xe.FALSE&&this._matrix[we.BOUNDARY][we.INTERIOR]===Xe.FALSE&&this._matrix[we.BOUNDARY][we.BOUNDARY]===Xe.FALSE}},{key:"isCrosses",value:function(c,f){return c===Xe.P&&f===Xe.L||c===Xe.P&&f===Xe.A||c===Xe.L&&f===Xe.A?I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])&&I.isTrue(this._matrix[we.INTERIOR][we.EXTERIOR]):c===Xe.L&&f===Xe.P||c===Xe.A&&f===Xe.P||c===Xe.A&&f===Xe.L?I.isTrue(this._matrix[we.INTERIOR][we.INTERIOR])&&I.isTrue(this._matrix[we.EXTERIOR][we.INTERIOR]):c===Xe.L&&f===Xe.L&&this._matrix[we.INTERIOR][we.INTERIOR]===0}},{key:"interfaces_",get:function(){return[ye]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Xe.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var c=arguments[0];I.constructor_.call(this),this.set(c)}else if(arguments[0]instanceof I){var f=arguments[0];I.constructor_.call(this),this._matrix[we.INTERIOR][we.INTERIOR]=f._matrix[we.INTERIOR][we.INTERIOR],this._matrix[we.INTERIOR][we.BOUNDARY]=f._matrix[we.INTERIOR][we.BOUNDARY],this._matrix[we.INTERIOR][we.EXTERIOR]=f._matrix[we.INTERIOR][we.EXTERIOR],this._matrix[we.BOUNDARY][we.INTERIOR]=f._matrix[we.BOUNDARY][we.INTERIOR],this._matrix[we.BOUNDARY][we.BOUNDARY]=f._matrix[we.BOUNDARY][we.BOUNDARY],this._matrix[we.BOUNDARY][we.EXTERIOR]=f._matrix[we.BOUNDARY][we.EXTERIOR],this._matrix[we.EXTERIOR][we.INTERIOR]=f._matrix[we.EXTERIOR][we.INTERIOR],this._matrix[we.EXTERIOR][we.BOUNDARY]=f._matrix[we.EXTERIOR][we.BOUNDARY],this._matrix[we.EXTERIOR][we.EXTERIOR]=f._matrix[we.EXTERIOR][we.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var c=arguments[0],f=arguments[1];return f===Xe.SYM_DONTCARE||f===Xe.SYM_TRUE&&(c>=0||c===Xe.TRUE)||f===Xe.SYM_FALSE&&c===Xe.FALSE||f===Xe.SYM_P&&c===Xe.P||f===Xe.SYM_L&&c===Xe.L||f===Xe.SYM_A&&c===Xe.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var T=arguments[1];return new I(arguments[0]).matches(T)}}},{key:"isTrue",value:function(c){return c>=0||c===Xe.TRUE}}])}(),kl=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(c){return c===null||c.length===0?null:(this.ensureCapacity(this._size+c.length),Ln.arraycopy(c,0,this._data,this._size,c.length),void(this._size+=c.length))}},{key:"ensureCapacity",value:function(c){if(c<=this._data.length)return null;var f=Math.max(c,2*this._data.length);this._data=zr.copyOf(this._data,f)}},{key:"toArray",value:function(){var c=new Array(this._size).fill(null);return Ln.arraycopy(this._data,0,c,0,this._size),c}},{key:"add",value:function(c){this.ensureCapacity(this._size+1),this._data[this._size]=c,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)I.constructor_.call(this,10);else if(arguments.length===1){var c=arguments[0];this._data=new Array(c).fill(null)}}}])}(),zt=function(){function I(){E(this,I)}return n(I,[{key:"getChainStartIndices",value:function(c){var f=0,T=new kl(Math.trunc(c.length/2));T.add(f);do{var W=this.findChainEnd(c,f);T.add(W),f=W}while(f<c.length-1);return T.toArray()}},{key:"findChainEnd",value:function(c,f){for(var T=Cs.quadrant(c[f],c[f+1]),W=f+1;W<c.length&&Cs.quadrant(c[W-1],c[W])===T;)W++;return W-1}},{key:"OLDgetChainStartIndices",value:function(c){var f=0,T=new Gn;T.add(f);do{var W=this.findChainEnd(c,f);T.add(W),f=W}while(f<c.length-1);return I.toIntArray(T)}}],[{key:"toIntArray",value:function(c){for(var f=new Array(c.size()).fill(null),T=0;T<f.length;T++)f[T]=c.get(T).intValue();return f}}])}(),Ft=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(I){var c=this.pts[this.startIndex[I]].x,f=this.pts[this.startIndex[I+1]].x;return c>f?c:f}},{key:"getMinX",value:function(I){var c=this.pts[this.startIndex[I]].x,f=this.pts[this.startIndex[I+1]].x;return c<f?c:f}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var I=arguments[0],c=arguments[1],f=arguments[2],T=arguments[3];this.computeIntersectsForChain(this.startIndex[I],this.startIndex[I+1],c,c.startIndex[f],c.startIndex[f+1],T)}else if(arguments.length===6){var W=arguments[0],me=arguments[1],ze=arguments[2],tt=arguments[3],It=arguments[4],ne=arguments[5];if(me-W==1&&It-tt==1)return ne.addIntersections(this.e,W,ze.e,tt),null;if(!this.overlaps(W,me,ze,tt,It))return null;var ge=Math.trunc((W+me)/2),xe=Math.trunc((tt+It)/2);W<ge&&(tt<xe&&this.computeIntersectsForChain(W,ge,ze,tt,xe,ne),xe<It&&this.computeIntersectsForChain(W,ge,ze,xe,It,ne)),ge<me&&(tt<xe&&this.computeIntersectsForChain(ge,me,ze,tt,xe,ne),xe<It&&this.computeIntersectsForChain(ge,me,ze,xe,It,ne))}}},{key:"overlaps",value:function(I,c,f,T,W){return le.intersects(this.pts[I],this.pts[c],f.pts[T],f.pts[W])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(I,c){for(var f=0;f<this.startIndex.length-1;f++)for(var T=0;T<I.startIndex.length-1;T++)this.computeIntersectsForChain(f,I,T,c)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var I=arguments[0];this.e=I,this.pts=I.getCoordinates();var c=new zt;this.startIndex=c.getChainStartIndices(this.pts)}}])}(),Tn=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"getDepth",value:function(c,f){return this._depth[c][f]}},{key:"setDepth",value:function(c,f,T){this._depth[c][f]=T}},{key:"isNull",value:function(){if(arguments.length===0){for(var c=0;c<2;c++)for(var f=0;f<3;f++)if(this._depth[c][f]!==I.NULL_VALUE)return!1;return!0}if(arguments.length===1){var T=arguments[0];return this._depth[T][1]===I.NULL_VALUE}if(arguments.length===2){var W=arguments[0],me=arguments[1];return this._depth[W][me]===I.NULL_VALUE}}},{key:"normalize",value:function(){for(var c=0;c<2;c++)if(!this.isNull(c)){var f=this._depth[c][1];this._depth[c][2]<f&&(f=this._depth[c][2]),f<0&&(f=0);for(var T=1;T<3;T++){var W=0;this._depth[c][T]>f&&(W=1),this._depth[c][T]=W}}}},{key:"getDelta",value:function(c){return this._depth[c][Pe.RIGHT]-this._depth[c][Pe.LEFT]}},{key:"getLocation",value:function(c,f){return this._depth[c][f]<=0?we.EXTERIOR:we.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var c=arguments[0],f=0;f<2;f++)for(var T=1;T<3;T++){var W=c.getLocation(f,T);W!==we.EXTERIOR&&W!==we.INTERIOR||(this.isNull(f,T)?this._depth[f][T]=I.depthAtLocation(W):this._depth[f][T]+=I.depthAtLocation(W))}else if(arguments.length===3){var me=arguments[0],ze=arguments[1];arguments[2]===we.INTERIOR&&this._depth[me][ze]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var c=0;c<2;c++)for(var f=0;f<3;f++)this._depth[c][f]=I.NULL_VALUE}},{key:"depthAtLocation",value:function(c){return c===we.EXTERIOR?0:c===we.INTERIOR?1:I.NULL_VALUE}}])}();Tn.NULL_VALUE=-1;var vr=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var f=new Array(2).fill(null);return f[0]=this.pts[0],f[1]=this.pts[1],new c(f,es.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(f){this._isIsolated=f}},{key:"setName",value:function(f){this._name=f}},{key:"equals",value:function(f){if(!(f instanceof c))return!1;var T=f;if(this.pts.length!==T.pts.length)return!1;for(var W=!0,me=!0,ze=this.pts.length,tt=0;tt<this.pts.length;tt++)if(this.pts[tt].equals2D(T.pts[tt])||(W=!1),this.pts[tt].equals2D(T.pts[--ze])||(me=!1),!W&&!me)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var f=arguments[0];return this.pts[f]}}},{key:"print",value:function(f){f.print("edge "+this._name+": "),f.print("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&f.print(","),f.print(this.pts[T].x+" "+this.pts[T].y);f.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(f){c.updateIM(this._label,f)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(f){f.print("edge "+this._name+": ");for(var T=this.pts.length-1;T>=0;T--)f.print(this.pts[T]+" ");f.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Ft(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new le;for(var f=0;f<this.pts.length;f++)this._env.expandToInclude(this.pts[f])}return this._env}},{key:"addIntersection",value:function(f,T,W,me){var ze=new ue(f.getIntersection(me)),tt=T,It=f.getEdgeDistance(W,me),ne=tt+1;if(ne<this.pts.length){var ge=this.pts[ne];ze.equals2D(ge)&&(tt=ne,It=0)}this.eiList.add(ze,tt,It)}},{key:"toString",value:function(){var f=new Yr;f.append("edge "+this._name+": "),f.append("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&f.append(","),f.append(this.pts[T].x+" "+this.pts[T].y);return f.append(")  "+this._label+" "+this._depthDelta),f.toString()}},{key:"isPointwiseEqual",value:function(f){if(this.pts.length!==f.pts.length)return!1;for(var T=0;T<this.pts.length;T++)if(!this.pts[T].equals2D(f.pts[T]))return!1;return!0}},{key:"setDepthDelta",value:function(f){this._depthDelta=f}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(f,T,W){for(var me=0;me<f.getIntersectionNum();me++)this.addIntersection(f,T,W,me)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Pd(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Tn,this._depthDelta=0,arguments.length===1){var f=arguments[0];c.constructor_.call(this,f,null)}else if(arguments.length===2){var T=arguments[0],W=arguments[1];this.pts=T,this._label=W}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Wc&&arguments[0]instanceof es))return B(c,"updateIM",this).apply(this,arguments);var f=arguments[0],T=arguments[1];T.setAtLeastIfValid(f.getLocation(0,Pe.ON),f.getLocation(1,Pe.ON),1),f.isArea()&&(T.setAtLeastIfValid(f.getLocation(0,Pe.LEFT),f.getLocation(1,Pe.LEFT),2),T.setAtLeastIfValid(f.getLocation(0,Pe.RIGHT),f.getLocation(1,Pe.RIGHT),2))}}])}(Ul),cr=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"setWorkingPrecisionModel",value:function(c){this._workingPrecisionModel=c}},{key:"insertUniqueEdge",value:function(c){var f=this._edgeList.findEqualEdge(c);if(f!==null){var T=f.getLabel(),W=c.getLabel();f.isPointwiseEqual(c)||(W=new es(c.getLabel())).flip(),T.merge(W);var me=I.depthDelta(W),ze=f.getDepthDelta()+me;f.setDepthDelta(ze)}else this._edgeList.add(c),c.setDepthDelta(I.depthDelta(c.getLabel()))}},{key:"buildSubgraphs",value:function(c,f){for(var T=new Gn,W=c.iterator();W.hasNext();){var me=W.next(),ze=me.getRightmostCoordinate(),tt=new eu(T).getDepth(ze);me.computeDepth(tt),me.findResultEdges(),T.add(me),f.add(me.getDirectedEdges(),me.getNodes())}}},{key:"createSubgraphs",value:function(c){for(var f=new Gn,T=c.getNodes().iterator();T.hasNext();){var W=T.next();if(!W.isVisited()){var me=new mn;me.create(W),f.add(me)}}return cs.sort(f,cs.reverseOrder()),f}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(c){if(this._workingNoder!==null)return this._workingNoder;var f=new kc,T=new No;return T.setPrecisionModel(c),f.setSegmentIntersector(new Zc(T)),f}},{key:"buffer",value:function(c,f){var T=this._workingPrecisionModel;T===null&&(T=c.getPrecisionModel()),this._geomFact=c.getFactory();var W=new Al(T,this._bufParams),me=new Ad(c,f,W).getCurves();if(me.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(me,T),this._graph=new la(new Io),this._graph.addEdges(this._edgeList.getEdges());var ze=this.createSubgraphs(this._graph),tt=new Os(this._geomFact);this.buildSubgraphs(ze,tt);var It=tt.getPolygons();return It.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(It)}},{key:"computeNodedEdges",value:function(c,f){var T=this.getNoder(f);T.computeNodes(c);for(var W=T.getNodedSubstrings().iterator();W.hasNext();){var me=W.next(),ze=me.getCoordinates();if(ze.length!==2||!ze[0].equals2D(ze[1])){var tt=me.getData(),It=new vr(me.getCoordinates(),new es(tt));this.insertUniqueEdge(It)}}}},{key:"setNoder",value:function(c){this._workingNoder=c}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Cc;var c=arguments[0];this._bufParams=c}},{key:"depthDelta",value:function(c){var f=c.getLocation(0,Pe.LEFT),T=c.getLocation(0,Pe.RIGHT);return f===we.INTERIOR&&T===we.EXTERIOR?1:f===we.EXTERIOR&&T===we.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(c){for(var f=new po,T=new Gn;c.hasNext();){var W=c.next(),me=f.createLineString(W.getCoordinates());T.add(me)}return f.buildGeometry(T)}}])}(),Nr=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"rescale",value:function(){if(Me(arguments[0],Pn))for(var c=arguments[0].iterator();c.hasNext();){var f=c.next();this.rescale(f.getCoordinates())}else if(arguments[0]instanceof Array){for(var T=arguments[0],W=0;W<T.length;W++)T[W].x=T[W].x/this._scaleFactor+this._offsetX,T[W].y=T[W].y/this._scaleFactor+this._offsetY;T.length===2&&T[0].equals2D(T[1])&&Ln.out.println(T)}}},{key:"scale",value:function(){if(Me(arguments[0],Pn)){for(var c=arguments[0],f=new Gn(c.size()),T=c.iterator();T.hasNext();){var W=T.next();f.add(new Ql(this.scale(W.getCoordinates()),W.getData()))}return f}if(arguments[0]instanceof Array){for(var me=arguments[0],ze=new Array(me.length).fill(null),tt=0;tt<me.length;tt++)ze[tt]=new ue(Math.round((me[tt].x-this._offsetX)*this._scaleFactor),Math.round((me[tt].y-this._offsetY)*this._scaleFactor),me[tt].getZ());return _n.removeRepeatedPoints(ze)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var c=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(c),c}},{key:"computeNodes",value:function(c){var f=c;this._isScaled&&(f=this.scale(c)),this._noder.computeNodes(f)}},{key:"interfaces_",get:function(){return[bu]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var c=arguments[0],f=arguments[1];I.constructor_.call(this,c,f,0,0)}else if(arguments.length===4){var T=arguments[0],W=arguments[1];this._noder=T,this._scaleFactor=W,this._isScaled=!this.isIntegerPrecision()}}}])}(),Lr=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var c=this._segStrings.iterator();c.hasNext();){var f=c.next().getCoordinates();this.checkEndPtVertexIntersections(f[0],this._segStrings),this.checkEndPtVertexIntersections(f[f.length-1],this._segStrings)}else if(arguments.length===2){for(var T=arguments[0],W=arguments[1].iterator();W.hasNext();)for(var me=W.next().getCoordinates(),ze=1;ze<me.length-1;ze++)if(me[ze].equals(T))throw new Tt("found endpt/interior pt intersection at index "+ze+" :pt "+T)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var c=this._segStrings.iterator();c.hasNext();)for(var f=c.next(),T=this._segStrings.iterator();T.hasNext();){var W=T.next();this.checkInteriorIntersections(f,W)}else if(arguments.length===2)for(var me=arguments[0],ze=arguments[1],tt=me.getCoordinates(),It=ze.getCoordinates(),ne=0;ne<tt.length-1;ne++)for(var ge=0;ge<It.length-1;ge++)this.checkInteriorIntersections(me,ne,ze,ge);else if(arguments.length===4){var xe=arguments[0],xt=arguments[1],pn=arguments[2],Mn=arguments[3];if(xe===pn&&xt===Mn)return null;var Hn=xe.getCoordinates()[xt],Qn=xe.getCoordinates()[xt+1],tr=pn.getCoordinates()[Mn],Ir=pn.getCoordinates()[Mn+1];if(this._li.computeIntersection(Hn,Qn,tr,Ir),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Hn,Qn)||this.hasInteriorIntersection(this._li,tr,Ir)))throw new Tt("found non-noded intersection at "+Hn+"-"+Qn+" and "+tr+"-"+Ir)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var c=this._segStrings.iterator();c.hasNext();){var f=c.next();this.checkCollapses(f)}else if(arguments.length===1)for(var T=arguments[0].getCoordinates(),W=0;W<T.length-2;W++)this.checkCollapse(T[W],T[W+1],T[W+2])}},{key:"hasInteriorIntersection",value:function(c,f,T){for(var W=0;W<c.getIntersectionNum();W++){var me=c.getIntersection(W);if(!me.equals(f)&&!me.equals(T))return!0}return!1}},{key:"checkCollapse",value:function(c,f,T){if(c.equals(T))throw new Tt("found non-noded collapse at "+I.fact.createLineString([c,f,T]))}}],[{key:"constructor_",value:function(){this._li=new No,this._segStrings=null;var c=arguments[0];this._segStrings=c}}])}();Lr.fact=new po;var Qr=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"intersectsScaled",value:function(c,f){var T=Math.min(c.x,f.x),W=Math.max(c.x,f.x),me=Math.min(c.y,f.y),ze=Math.max(c.y,f.y),tt=this._maxx<T||this._minx>W||this._maxy<me||this._miny>ze;if(tt)return!1;var It=this.intersectsToleranceSquare(c,f);return Qe.isTrue(!(tt&&It),"Found bad envelope test"),It}},{key:"initCorners",value:function(c){var f=.5;this._minx=c.x-f,this._maxx=c.x+f,this._miny=c.y-f,this._maxy=c.y+f,this._corner[0]=new ue(this._maxx,this._maxy),this._corner[1]=new ue(this._minx,this._maxy),this._corner[2]=new ue(this._minx,this._miny),this._corner[3]=new ue(this._maxx,this._miny)}},{key:"intersects",value:function(c,f){return this._scaleFactor===1?this.intersectsScaled(c,f):(this.copyScaled(c,this._p0Scaled),this.copyScaled(f,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(c){return Math.round(c*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(c,f){f.x=this.scale(c.x),f.y=this.scale(c.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var c=I.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new le(this._originalPt.x-c,this._originalPt.x+c,this._originalPt.y-c,this._originalPt.y+c)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(c,f){return this._li.computeIntersection(c,f,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(c,f){var T=!1,W=!1;return this._li.computeIntersection(c,f,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(c,f,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(T=!0),this._li.computeIntersection(c,f,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(W=!0),this._li.computeIntersection(c,f,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!T||!W)||!!c.equals(this._pt)||!!f.equals(this._pt))))}},{key:"addSnappedNode",value:function(c,f){var T=c.getCoordinate(f),W=c.getCoordinate(f+1);return!!this.intersects(T,W)&&(c.addIntersection(this.getCoordinate(),f),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var c=arguments[0],f=arguments[1],T=arguments[2];if(this._originalPt=c,this._pt=c,this._scaleFactor=f,this._li=T,f<=0)throw new Ee("Scale factor must be non-zero");f!==1&&(this._pt=new ue(this.scale(c.x),this.scale(c.y)),this._p0Scaled=new ue,this._p1Scaled=new ue),this.initCorners(this._pt)}}])}();Qr.SAFE_ENV_EXPANSION_FACTOR=.75;var ui=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var I=arguments[1];arguments[0].getLineSegment(I,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ms}}])}(),Ii=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var I=arguments[0];return this.snap(I,null,-1)}if(arguments.length===3){var c=arguments[0],f=arguments[1],T=arguments[2],W=c.getSafeEnvelope(),me=new Ur(c,f,T);return this._index.query(W,new(function(){return n(function ze(){E(this,ze)},[{key:"interfaces_",get:function(){return[fs]}},{key:"visitItem",value:function(ze){ze.select(W,me)}}])}())),me.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var I=arguments[0];this._index=I}}])}(),Ur=function(I){function c(){var f;return E(this,c),f=i(this,c),c.constructor_.apply(f,arguments),f}return Y(c,I),n(c,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Tc))return B(c,"select",this,1).apply(this,arguments);var f=arguments[1],T=arguments[0].getContext();if(this._parentEdge===T&&(f===this._hotPixelVertexIndex||f+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(T,f)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var f=arguments[0],T=arguments[1],W=arguments[2];this._hotPixel=f,this._parentEdge=T,this._hotPixelVertexIndex=W}}])}(ui);Ii.HotPixelSnapAction=Ur;var Ai=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(I,c,f,T){if(I===f&&c===T)return null;var W=I.getCoordinates()[c],me=I.getCoordinates()[c+1],ze=f.getCoordinates()[T],tt=f.getCoordinates()[T+1];if(this._li.computeIntersection(W,me,ze,tt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var It=0;It<this._li.getIntersectionNum();It++)this._interiorIntersections.add(this._li.getIntersection(It));I.addIntersections(this._li,c,0),f.addIntersections(this._li,T,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Mo]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var I=arguments[0];this._li=I,this._interiorIntersections=new Gn}}])}(),Zi=function(){return n(function I(){E(this,I),I.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(I){var c=Ql.getNodedSubstrings(I),f=new Lr(c);try{f.checkValid()}catch(T){if(!(T instanceof se))throw T;T.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Ql.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(I,c){var f=this.findInteriorIntersections(I,c);this.computeIntersectionSnaps(f),this.computeVertexSnaps(I)}},{key:"findInteriorIntersections",value:function(I,c){var f=new Ai(c);return this._noder.setSegmentIntersector(f),this._noder.computeNodes(I),f.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Me(arguments[0],Pn))for(var I=arguments[0].iterator();I.hasNext();){var c=I.next();this.computeVertexSnaps(c)}else if(arguments[0]instanceof Ql)for(var f=arguments[0],T=f.getCoordinates(),W=0;W<T.length;W++){var me=new Qr(T[W],this._scaleFactor,this._li);this._pointSnapper.snap(me,f,W)&&f.addIntersection(T[W],W)}}},{key:"computeNodes",value:function(I){this._nodedSegStrings=I,this._noder=new kc,this._pointSnapper=new Ii(this._noder.getIndex()),this.snapRound(I,this._li)}},{key:"computeIntersectionSnaps",value:function(I){for(var c=I.iterator();c.hasNext();){var f=c.next(),T=new Qr(f,this._scaleFactor,this._li);this._pointSnapper.snap(T)}}},{key:"interfaces_",get:function(){return[bu]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var I=arguments[0];this._pm=I,this._li=new No,this._li.setPrecisionModel(I),this._scaleFactor=I.getScale()}}])}(),Ji=function(){function I(){E(this,I),I.constructor_.apply(this,arguments)}return n(I,[{key:"bufferFixedPrecision",value:function(c){var f=new Nr(new Zi(new Bi(1)),c.getScale()),T=new cr(this._bufParams);T.setWorkingPrecisionModel(c),T.setNoder(f),this._resultGeometry=T.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var c=I.MAX_PRECISION_DIGITS;c>=0;c--){try{this.bufferReducedPrecision(c)}catch(me){if(!(me instanceof Sr))throw me;this._saveException=me}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var f=arguments[0],T=I.precisionScaleFactor(this._argGeom,this._distance,f),W=new Bi(T);this.bufferFixedPrecision(W)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var c=this._argGeom.getFactory().getPrecisionModel();c.getType()===Bi.FIXED?this.bufferFixedPrecision(c):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(c){this._bufParams.setQuadrantSegments(c)}},{key:"bufferOriginalPrecision",value:function(){try{var c=new cr(this._bufParams);this._resultGeometry=c.buffer(this._argGeom,this._distance)}catch(f){if(!(f instanceof Tt))throw f;this._saveException=f}}},{key:"getResultGeometry",value:function(c){return this._distance=c,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(c){this._bufParams.setEndCapStyle(c)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new ae,this._resultGeometry=null,this._saveException=null,arguments.length===1){var c=arguments[0];this._argGeom=c}else if(arguments.length===2){var f=arguments[0],T=arguments[1];this._argGeom=f,this._bufParams=T}}},{key:"bufferOp",value:function(){if(arguments.length===2){var c=arguments[1];return new I(arguments[0]).getResultGeometry(c)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Je&&typeof arguments[1]=="number"){var f=arguments[1],T=arguments[2],W=new I(arguments[0]);return W.setQuadrantSegments(T),W.getResultGeometry(f)}if(arguments[2]instanceof ae&&arguments[0]instanceof Je&&typeof arguments[1]=="number"){var me=arguments[1];return new I(arguments[0],arguments[2]).getResultGeometry(me)}}else if(arguments.length===4){var ze=arguments[1],tt=arguments[2],It=arguments[3],ne=new I(arguments[0]);return ne.setQuadrantSegments(tt),ne.setEndCapStyle(It),ne.getResultGeometry(ze)}}},{key:"precisionScaleFactor",value:function(c,f,T){var W=c.getEnvelopeInternal(),me=Er.max(Math.abs(W.getMaxX()),Math.abs(W.getMaxY()),Math.abs(W.getMinX()),Math.abs(W.getMinY()))+2*(f>0?f:0),ze=T-Math.trunc(Math.log(me)/Math.log(10)+1);return Math.pow(10,ze)}}])}();Ji.CAP_ROUND=ae.CAP_ROUND,Ji.CAP_BUTT=ae.CAP_FLAT,Ji.CAP_FLAT=ae.CAP_FLAT,Ji.CAP_SQUARE=ae.CAP_SQUARE,Ji.MAX_PRECISION_DIGITS=12;var no=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Lo=function(){return n(function I(c){E(this,I),this.geometryFactory=c||new po},[{key:"read",value:function(I){var c,f=(c=typeof I=="string"?JSON.parse(I):I).type;if(!mo[f])throw new Error("Unknown GeoJSON type: "+c.type);return no.indexOf(f)!==-1?mo[f].call(this,c.coordinates):f==="GeometryCollection"?mo[f].call(this,c.geometries):mo[f].call(this,c)}},{key:"write",value:function(I){var c=I.getGeometryType();if(!Po[c])throw new Error("Geometry is not supported");return Po[c].call(this,I)}}])}(),mo={Feature:function(I){var c={};for(var f in I)c[f]=I[f];if(I.geometry){var T=I.geometry.type;if(!mo[T])throw new Error("Unknown GeoJSON type: "+I.type);c.geometry=this.read(I.geometry)}return I.bbox&&(c.bbox=mo.bbox.call(this,I.bbox)),c},FeatureCollection:function(I){var c={};if(I.features){c.features=[];for(var f=0;f<I.features.length;++f)c.features.push(this.read(I.features[f]))}return I.bbox&&(c.bbox=this.parse.bbox.call(this,I.bbox)),c},coordinates:function(I){for(var c=[],f=0;f<I.length;++f){var T=I[f];c.push(M(ue,K(T)))}return c},bbox:function(I){return this.geometryFactory.createLinearRing([new ue(I[0],I[1]),new ue(I[2],I[1]),new ue(I[2],I[3]),new ue(I[0],I[3]),new ue(I[0],I[1])])},Point:function(I){var c=M(ue,K(I));return this.geometryFactory.createPoint(c)},MultiPoint:function(I){for(var c=[],f=0;f<I.length;++f)c.push(mo.Point.call(this,I[f]));return this.geometryFactory.createMultiPoint(c)},LineString:function(I){var c=mo.coordinates.call(this,I);return this.geometryFactory.createLineString(c)},MultiLineString:function(I){for(var c=[],f=0;f<I.length;++f)c.push(mo.LineString.call(this,I[f]));return this.geometryFactory.createMultiLineString(c)},Polygon:function(I){for(var c=mo.coordinates.call(this,I[0]),f=this.geometryFactory.createLinearRing(c),T=[],W=1;W<I.length;++W){var me=I[W],ze=mo.coordinates.call(this,me),tt=this.geometryFactory.createLinearRing(ze);T.push(tt)}return this.geometryFactory.createPolygon(f,T)},MultiPolygon:function(I){for(var c=[],f=0;f<I.length;++f){var T=I[f];c.push(mo.Polygon.call(this,T))}return this.geometryFactory.createMultiPolygon(c)},GeometryCollection:function(I){for(var c=[],f=0;f<I.length;++f){var T=I[f];c.push(this.read(T))}return this.geometryFactory.createGeometryCollection(c)}},Po={coordinate:function(I){var c=[I.x,I.y];return I.z&&c.push(I.z),I.m&&c.push(I.m),c},Point:function(I){return{type:"Point",coordinates:Po.coordinate.call(this,I.getCoordinate())}},MultiPoint:function(I){for(var c=[],f=0;f<I._geometries.length;++f){var T=I._geometries[f],W=Po.Point.call(this,T);c.push(W.coordinates)}return{type:"MultiPoint",coordinates:c}},LineString:function(I){for(var c=[],f=I.getCoordinates(),T=0;T<f.length;++T){var W=f[T];c.push(Po.coordinate.call(this,W))}return{type:"LineString",coordinates:c}},MultiLineString:function(I){for(var c=[],f=0;f<I._geometries.length;++f){var T=I._geometries[f],W=Po.LineString.call(this,T);c.push(W.coordinates)}return{type:"MultiLineString",coordinates:c}},Polygon:function(I){var c=[],f=Po.LineString.call(this,I._shell);c.push(f.coordinates);for(var T=0;T<I._holes.length;++T){var W=I._holes[T],me=Po.LineString.call(this,W);c.push(me.coordinates)}return{type:"Polygon",coordinates:c}},MultiPolygon:function(I){for(var c=[],f=0;f<I._geometries.length;++f){var T=I._geometries[f],W=Po.Polygon.call(this,T);c.push(W.coordinates)}return{type:"MultiPolygon",coordinates:c}},GeometryCollection:function(I){for(var c=[],f=0;f<I._geometries.length;++f){var T=I._geometries[f],W=T.getGeometryType();c.push(Po[W].call(this,T))}return{type:"GeometryCollection",geometries:c}}};return{BufferOp:Ji,GeoJSONReader:function(){return n(function I(c){E(this,I),this.parser=new Lo(c||new po)},[{key:"read",value:function(I){return this.parser.read(I)}}])}(),GeoJSONWriter:function(){return n(function I(){E(this,I),this.parser=new Lo(this.geometryFactory)},[{key:"write",value:function(I){return this.parser.write(I)}}])}()}})},28440:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},24497:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},64889:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},36588:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},71758:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},10619:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},93198:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},20780:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},95362:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},7937:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},48626:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},71938:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},97655:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},20411:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},95087:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},95103:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},72556:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},22131:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},99842:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},75412:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},31275:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},70953:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},34675:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},6609:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},81433:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},43203:function(H,Q,i){"use strict";var E=i(59753),M=i(65539),C=i(61138),n=i(15927),j=i(35610),$=i(96485),U=i(96753),Y=i(9e3),te=i(35603),X=i(62093),B=i(87833),K=i(28877),de=i(75271),he=i(52676);function J(){var Ee=useRouteMeta(),Le=Ee.texts;return _jsx(_Fragment,{})}function ae(){return _jsx(DumiPage,{children:_jsx(Suspense,{fallback:_jsx(LoadingComponent,{}),children:_jsx(J,{})})})}var se=null},35603:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return n}});var E=i(87833),M=i(52676),C=function($){var U=$.link,Y=$.imgUrl,te=$.title,X=$.width,B=$.height,K=(0,E.s0)(),de=typeof X=="number"?"".concat(X,"px"):X,he=typeof B=="number"?"".concat(B,"px"):B;return(0,M.jsxs)("div",{className:"card",style:{width:de||"48%",height:he||"14rem"},onClick:function(){return K(U)},children:[(0,M.jsx)("div",{className:"card-img",style:{backgroundImage:"url(".concat(Y,")")}}),(0,M.jsx)("div",{className:"card-title",children:te})]})},n=C},62093:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return Y}});var E=i(48305),M=i.n(E),C=i(87833),n=i(60023),j=i(52676),$=(0,n.MapFactory)({accessToken:"pk.eyJ1IjoiMnBpYyIsImEiOiJjbTczaXFxbGwwMGNtMm9zYjhjcW1hd3ZkIn0.YCpsYVQawB15Cf5Zyljscg"}),U=function(X){var B=(0,C.s0)(),K=X.title,de=K===void 0?"React-Mapboxgl-Zt":K,he=X.desc,J=he===void 0?"\u4E00\u4E2A\u57FA\u4E8EReact\u548CMapboxGl\u7684\u5730\u56FE\u7EC4\u4EF6\u5E93":he,ae=(0,C.OI)(),se=M()(ae,1),Ee=se[0];return console.log(Ee),(0,j.jsxs)("div",{className:"main",children:[(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)("div",{className:"title",style:{color:Ee==="dark"?"#000":"#fff"},children:de}),(0,j.jsxs)("div",{className:"desc",style:{color:Ee==="dark"?"#000":"#fff"},children:[" ",J]}),(0,j.jsx)("div",{className:"map",style:{backgroundColor:Ee==="dark"?"#ccc":"#fff"},children:(0,j.jsx)($,{})}),(0,j.jsx)("button",{type:"button",style:{color:Ee==="dark"?"#fff":"#000",background:Ee==="dark"?"#000":"#fff"},onClick:function(){return B("/base/start")},children:"Get Started"})]}),(0,j.jsxs)("div",{className:"feature",children:[(0,j.jsxs)("div",{className:"feature-item",children:[(0,j.jsx)("img",{src:"/react-mapboxgl-zt/imgs/react.svg",alt:""}),(0,j.jsx)("span",{children:"\u7528\u4E8E\u6784\u5EFA Web \u548C\u539F\u751F\u4EA4\u4E92\u754C\u9762\u7684\u5E93"})]}),(0,j.jsxs)("div",{className:"feature-item",children:[(0,j.jsx)("img",{src:"/react-mapboxgl-zt/imgs/map.svg",alt:""}),(0,j.jsx)("span",{children:"\u7528\u4E8E\u63D0\u4F9B\u5730\u56FE\u6570\u636E\u548C\u5730\u56FE\u6E32\u67D3"})]}),(0,j.jsxs)("div",{className:"feature-item",children:[(0,j.jsx)("img",{src:"/react-mapboxgl-zt/imgs/fast.svg",alt:""}),(0,j.jsx)("span",{children:"\u5E2E\u52A9\u4F60\u5FEB\u901F\u4E0A\u624B\u5F00\u53D1\u5730\u56FE\u5E94\u7528"})]})]})]})},Y=U},67137:function(H,Q,i){"use strict";i.d(Q,{fi:function(){return Y},m8:function(){return $}});var E=i(31759),M=i.n(E),C=i(26068),n=i.n(C),j=i(18280),$,U="/";function Y(K){var de;return K.type==="hash"?de=(0,j.q_)():K.type==="memory"?de=(0,j.PP)(K):de=(0,j.lX)(),K.basename&&(U=K.basename),$=n()(n()({},de),{},{push:function(J,ae){de.push(X(J,de),ae)},replace:function(J,ae){de.replace(X(J,de),ae)},get location(){return de.location},get action(){return de.action}}),de}function te(K){K&&($=K)}function X(K,de){if(typeof K=="string")return"".concat(B(U)).concat(K);if(M()(K)==="object"){var he=de.location.pathname;return n()(n()({},K),{},{pathname:K.pathname?"".concat(B(U)).concat(K.pathname):he})}else throw new Error("Unexpected to: ".concat(K))}function B(K){return K.slice(-1)==="/"?K.slice(0,-1):K}},53077:function(H,Q,i){"use strict";i.d(Q,{gD:function(){return Ie},We:function(){return Ot}});var E={};i.r(E),i.d(E,{modifyClientRenderOpts:function(){return Y}});var M={};i.r(M),i.d(M,{innerProvider:function(){return K}});var C={};i.r(C),i.d(C,{patchRoutes:function(){return Ee}});var n={};i.r(n),i.d(n,{i18nProvider:function(){return hn}});var j={};i.r(j),i.d(j,{modifyClientRenderOpts:function(){return mn}});var $=i(26068),U=i.n($);function Y(St){var at=St.history,Xe=St.hydrate;return U()(U()({},St),{},{hydrate:Xe&&!["/~demos/:id"].includes(at.location.pathname)})}var te=i(75271),X=i(33810),B={},K=function(at){return te.createElement(X.B6,{context:B},at)},de=i(22217),he=i(12454),J=i.n(he),ae=i(59130);function se(St,at,Xe){Object.defineProperty(St,at,{get:function(){return(0,de.Kp)(!1,"'".concat(at,"' return empty in latest version, please use `useRouteMeta` instead.")),Xe}})}var Ee=function(at){var Xe=at.routes;Object.values(Xe).forEach(function(Nt){var Nn=(0,ae.lZ)(Nt.id,{syncOnly:!0});if(Nn){var Jn,rr;if((Jn=Nt.meta)!==null&&Jn!==void 0&&(Jn=Jn.frontmatter)!==null&&Jn!==void 0&&Jn.debug||(rr=Nn.frontmatter)!==null&&rr!==void 0&&rr.debug)delete Xe[Nt.id];else{var Br;Nt.meta=J()(Nt.meta,Nn),se(Nt.meta,"toc",[]),se(Nt.meta,"texts",[]),(Br=Nt.meta.tabs)===null||Br===void 0||Br.forEach(function(Hr){se(Hr,"toc",[]),se(Hr,"texts",[])})}}})},Le=i(48305),ke=i.n(Le),ye=i(87833),Se=i(38757),be=i(15767),Ue=i(81799),qe=i(43659),je=i(23905);function nt(St,at){return Object.keys(St).reduce(function(Xe,Nt){return Xe[Nt]=(0,be.pi)({timeZone:at},St[Nt]),Xe},{})}function Ct(St,at){var Xe=Object.keys((0,be.pi)((0,be.pi)({},St),at));return Xe.reduce(function(Nt,Nn){return Nt[Nn]=(0,be.pi)((0,be.pi)({},St[Nn]||{}),at[Nn]||{}),Nt},{})}function ft(St,at){if(!at)return St;var Xe=qe.C.formats;return(0,be.pi)((0,be.pi)((0,be.pi)({},Xe),St),{date:Ct(nt(Xe.date,at),nt(St.date||{},at)),time:Ct(nt(Xe.time,at),nt(St.time||{},at))})}var Et=function(St,at,Xe,Nt,Nn){var Jn=St.locale,rr=St.formats,Br=St.messages,Hr=St.defaultLocale,zr=St.defaultFormats,Tr=St.fallbackOnEmptyString,fn=St.onError,Ne=St.timeZone,Ge=St.defaultRichTextElements;Xe===void 0&&(Xe={id:""});var ot=Xe.id,Dt=Xe.defaultMessage;(0,Se.kG)(!!ot,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var jt=String(ot),sn=Br&&Object.prototype.hasOwnProperty.call(Br,jt)&&Br[jt];if(Array.isArray(sn)&&sn.length===1&&sn[0].type===Ue.wD.literal)return sn[0].value;if(!Nt&&sn&&typeof sn=="string"&&!Ge)return sn.replace(/'\{(.*?)\}'/gi,"{$1}");if(Nt=(0,be.pi)((0,be.pi)({},Ge),Nt||{}),rr=ft(rr,Ne),zr=ft(zr,Ne),!sn){if(Tr===!1&&sn==="")return sn;if((!Dt||Jn&&Jn.toLowerCase()!==Hr.toLowerCase())&&fn(new je.$6(Xe,Jn)),Dt)try{var xn=at.getMessageFormat(Dt,Hr,zr,Nn);return xn.format(Nt)}catch(rn){return fn(new je.X9('Error formatting default message for: "'.concat(jt,'", rendering default message verbatim'),Jn,Xe,rn)),typeof Dt=="string"?Dt:jt}return jt}try{var xn=at.getMessageFormat(sn,Jn,rr,(0,be.pi)({formatters:at},Nn||{}));return xn.format(Nt)}catch(rn){fn(new je.X9('Error formatting message: "'.concat(jt,'", using ').concat(Dt?"default message":"id"," as fallback."),Jn,Xe,rn))}if(Dt)try{var xn=at.getMessageFormat(Dt,Hr,zr,Nn);return xn.format(Nt)}catch(rn){fn(new je.X9('Error formatting the default message for: "'.concat(jt,'", rendering message verbatim'),Jn,Xe,rn))}return typeof sn=="string"?sn:typeof Dt=="string"?Dt:jt},yt=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function _t(St,at,Xe,Nt){var Nn=St.locale,Jn=St.formats,rr=St.onError,Br=St.timeZone;Nt===void 0&&(Nt={});var Hr=Nt.format,zr=(0,be.pi)((0,be.pi)({},Br&&{timeZone:Br}),Hr&&(0,Se.TB)(Jn,at,Hr,rr)),Tr=(0,Se.L6)(Nt,yt,zr);return at==="time"&&!Tr.hour&&!Tr.minute&&!Tr.second&&!Tr.timeStyle&&!Tr.dateStyle&&(Tr=(0,be.pi)((0,be.pi)({},Tr),{hour:"numeric",minute:"numeric"})),Xe(Nn,Tr)}function He(St,at){for(var Xe=[],Nt=2;Nt<arguments.length;Nt++)Xe[Nt-2]=arguments[Nt];var Nn=Xe[0],Jn=Xe[1],rr=Jn===void 0?{}:Jn,Br=typeof Nn=="string"?new Date(Nn||0):Nn;try{return _t(St,"date",at,rr).format(Br)}catch(Hr){St.onError(new je.Qe("Error formatting date.",St.locale,Hr))}return String(Br)}function bt(St,at){for(var Xe=[],Nt=2;Nt<arguments.length;Nt++)Xe[Nt-2]=arguments[Nt];var Nn=Xe[0],Jn=Xe[1],rr=Jn===void 0?{}:Jn,Br=typeof Nn=="string"?new Date(Nn||0):Nn;try{return _t(St,"time",at,rr).format(Br)}catch(Hr){St.onError(new je.Qe("Error formatting time.",St.locale,Hr))}return String(Br)}function Tt(St,at){for(var Xe=[],Nt=2;Nt<arguments.length;Nt++)Xe[Nt-2]=arguments[Nt];var Nn=Xe[0],Jn=Xe[1],rr=Xe[2],Br=rr===void 0?{}:rr,Hr=typeof Nn=="string"?new Date(Nn||0):Nn,zr=typeof Jn=="string"?new Date(Jn||0):Jn;try{return _t(St,"dateTimeRange",at,Br).formatRange(Hr,zr)}catch(Tr){St.onError(new je.Qe("Error formatting date time range.",St.locale,Tr))}return String(Hr)}function st(St,at){for(var Xe=[],Nt=2;Nt<arguments.length;Nt++)Xe[Nt-2]=arguments[Nt];var Nn=Xe[0],Jn=Xe[1],rr=Jn===void 0?{}:Jn,Br=typeof Nn=="string"?new Date(Nn||0):Nn;try{return _t(St,"date",at,rr).formatToParts(Br)}catch(Hr){St.onError(new je.Qe("Error formatting date.",St.locale,Hr))}return[]}function Qe(St,at){for(var Xe=[],Nt=2;Nt<arguments.length;Nt++)Xe[Nt-2]=arguments[Nt];var Nn=Xe[0],Jn=Xe[1],rr=Jn===void 0?{}:Jn,Br=typeof Nn=="string"?new Date(Nn||0):Nn;try{return _t(St,"time",at,rr).formatToParts(Br)}catch(Hr){St.onError(new je.Qe("Error formatting time.",St.locale,Hr))}return[]}var mt=i(91483),Ht=["style","type","fallback","languageDisplay"];function vt(St,at,Xe,Nt){var Nn=St.locale,Jn=St.onError,rr=Intl.DisplayNames;rr||Jn(new mt.u_(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,mt.jK.MISSING_INTL_API));var Br=(0,Se.L6)(Nt,Ht);try{return at(Nn,Br).of(Xe)}catch(Hr){Jn(new je.Qe("Error formatting display name.",Nn,Hr))}}var ue=["type","style"],lt=Date.now();function le(St){return"".concat(lt,"_").concat(St,"_").concat(lt)}function Je(St,at,Xe,Nt){Nt===void 0&&(Nt={});var Nn=we(St,at,Xe,Nt).reduce(function(Jn,rr){var Br=rr.value;return typeof Br!="string"?Jn.push(Br):typeof Jn[Jn.length-1]=="string"?Jn[Jn.length-1]+=Br:Jn.push(Br),Jn},[]);return Nn.length===1?Nn[0]:Nn.length===0?"":Nn}function we(St,at,Xe,Nt){var Nn=St.locale,Jn=St.onError;Nt===void 0&&(Nt={});var rr=Intl.ListFormat;rr||Jn(new mt.u_(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,mt.jK.MISSING_INTL_API));var Br=(0,Se.L6)(Nt,ue);try{var Hr={},zr=Xe.map(function(Tr,fn){if(typeof Tr=="object"){var Ne=le(fn);return Hr[Ne]=Tr,Ne}return String(Tr)});return at(Nn,Br).formatToParts(zr).map(function(Tr){return Tr.type==="literal"?Tr:(0,be.pi)((0,be.pi)({},Tr),{value:Hr[Tr.value]||Tr.value})})}catch(Tr){Jn(new je.Qe("Error formatting list.",Nn,Tr))}return Xe}var Pn=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function Mt(St,at,Xe){var Nt=St.locale,Nn=St.formats,Jn=St.onError;Xe===void 0&&(Xe={});var rr=Xe.format,Br=rr&&(0,Se.TB)(Nn,"number",rr,Jn)||{},Hr=(0,Se.L6)(Xe,Pn,Br);return at(Nt,Hr)}function or(St,at,Xe,Nt){Nt===void 0&&(Nt={});try{return Mt(St,at,Nt).format(Xe)}catch(Nn){St.onError(new je.Qe("Error formatting number.",St.locale,Nn))}return String(Xe)}function wr(St,at,Xe,Nt){Nt===void 0&&(Nt={});try{return Mt(St,at,Nt).formatToParts(Xe)}catch(Nn){St.onError(new je.Qe("Error formatting number.",St.locale,Nn))}return[]}var Dr=["type"];function lr(St,at,Xe,Nt){var Nn=St.locale,Jn=St.onError;Nt===void 0&&(Nt={}),Intl.PluralRules||Jn(new mt.u_(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,mt.jK.MISSING_INTL_API));var rr=(0,Se.L6)(Nt,Dr);try{return at(Nn,rr).select(Xe)}catch(Br){Jn(new je.Qe("Error formatting plural.",Nn,Br))}return"other"}var Pe=["numeric","style"];function ut(St,at,Xe){var Nt=St.locale,Nn=St.formats,Jn=St.onError;Xe===void 0&&(Xe={});var rr=Xe.format,Br=!!rr&&(0,Se.TB)(Nn,"relative",rr,Jn)||{},Hr=(0,Se.L6)(Xe,Pe,Br);return at(Nt,Hr)}function Ve(St,at,Xe,Nt,Nn){Nn===void 0&&(Nn={}),Nt||(Nt="second");var Jn=Intl.RelativeTimeFormat;Jn||St.onError(new mt.u_(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,mt.jK.MISSING_INTL_API));try{return ut(St,at,Nn).format(Xe,Nt)}catch(rr){St.onError(new je.Qe("Error formatting relative time.",St.locale,rr))}return String(Xe)}function gt(St){var at=St?St[Object.keys(St)[0]]:void 0;return typeof at=="string"}function Gt(St){St.onWarn&&St.defaultRichTextElements&&gt(St.messages||{})&&St.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function Me(St,at){var Xe=(0,Se.ax)(at),Nt=(0,be.pi)((0,be.pi)({},Se.Z0),St),Nn=Nt.locale,Jn=Nt.defaultLocale,rr=Nt.onError;return Nn?!Intl.NumberFormat.supportedLocalesOf(Nn).length&&rr?rr(new je.gb('Missing locale data for locale: "'.concat(Nn,'" in Intl.NumberFormat. Using default locale: "').concat(Jn,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(Nn).length&&rr&&rr(new je.gb('Missing locale data for locale: "'.concat(Nn,'" in Intl.DateTimeFormat. Using default locale: "').concat(Jn,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(rr&&rr(new je.OV('"locale" was not configured, using "'.concat(Jn,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),Nt.locale=Nt.defaultLocale||"en"),Gt(Nt),(0,be.pi)((0,be.pi)({},Nt),{formatters:Xe,formatNumber:or.bind(null,Nt,Xe.getNumberFormat),formatNumberToParts:wr.bind(null,Nt,Xe.getNumberFormat),formatRelativeTime:Ve.bind(null,Nt,Xe.getRelativeTimeFormat),formatDate:He.bind(null,Nt,Xe.getDateTimeFormat),formatDateToParts:st.bind(null,Nt,Xe.getDateTimeFormat),formatTime:bt.bind(null,Nt,Xe.getDateTimeFormat),formatDateTimeRange:Tt.bind(null,Nt,Xe.getDateTimeFormat),formatTimeToParts:Qe.bind(null,Nt,Xe.getDateTimeFormat),formatPlural:lr.bind(null,Nt,Xe.getPluralRules),formatMessage:Et.bind(null,Nt,Xe),$t:Et.bind(null,Nt,Xe),formatList:Je.bind(null,Nt,Xe.getListFormat),formatListToParts:we.bind(null,Nt,Xe.getListFormat),formatDisplayName:vt.bind(null,Nt,Xe.getDisplayNames)})}var At=i(53766),Bt=i(93725);function Sn(St){return St&&Object.keys(St).reduce(function(at,Xe){var Nt=St[Xe];return at[Xe]=(0,At.Gt)(Nt)?(0,Bt.dt)(Nt):Nt,at},{})}var Lt=function(St,at,Xe,Nt){for(var Nn=[],Jn=4;Jn<arguments.length;Jn++)Nn[Jn-4]=arguments[Jn];var rr=Sn(Nt),Br=Et.apply(void 0,(0,be.ev)([St,at,Xe,rr],Nn,!1));return Array.isArray(Br)?te.Children.toArray(Br):Br},Bn=function(St,at){var Xe=St.defaultRichTextElements,Nt=(0,be._T)(St,["defaultRichTextElements"]),Nn=Sn(Xe),Jn=Me((0,be.pi)((0,be.pi)((0,be.pi)({},Bt.Z0),Nt),{defaultRichTextElements:Nn}),at),rr={locale:Jn.locale,timeZone:Jn.timeZone,fallbackOnEmptyString:Jn.fallbackOnEmptyString,formats:Jn.formats,defaultLocale:Jn.defaultLocale,defaultFormats:Jn.defaultFormats,messages:Jn.messages,onError:Jn.onError,defaultRichTextElements:Nn};return(0,be.pi)((0,be.pi)({},Jn),{formatMessage:Lt.bind(null,rr,Jn.formatters),$t:Lt.bind(null,rr,Jn.formatters)})},en=i(68565),gn=i(43037),ar=i(94726),Sr=i(52676),In=(0,Se.Sn)(),Gn=function(at){var Xe=(0,te.useCallback)(function(){var Br="/react-mapboxgl-zt",Hr=ar.k.slice().reverse().find(function(Ne){return"suffix"in Ne?ye.m8.location.pathname.replace(/([^/])\/$/,"$1").endsWith(Ne.suffix):ye.m8.location.pathname.replace(/([^/])\/$/,"$1").startsWith(Br+Ne.base)}),zr=Hr?Hr.id:ar.k[0].id;if(ye.m8.location.pathname.startsWith(Br+"/~demos")){var Tr=new URLSearchParams(ye.m8.location.search);Tr.get("locale")&&(zr=Tr.get("locale"))}var fn=ar.s[zr]||{};return fn["$internal.edit.link"]=void 0,fn["$internal.api.sourceLink"]=void 0,Bn({locale:zr,messages:fn},In)},[]),Nt=(0,te.useState)(function(){return Xe()}),Nn=ke()(Nt,2),Jn=Nn[0],rr=Nn[1];return(0,gn.LI)(function(){return ye.m8.listen(function(){rr(Xe())})},[]),(0,Sr.jsx)(en.zt,{value:Jn,children:at.children},Jn.locale)};function hn(St){return te.createElement(Gn,null,St)}function mn(St){var at=St.history,Xe=St.hydrate;return U()(U()({},St),{},{hydrate:Xe&&!at.location.pathname.startsWith("/~demos")})}var cn=i(23920);function Ln(St){return St.default?typeof St.default=="function"?St.default():St.default:St}function Er(){return[{apply:E,path:void 0},{apply:M,path:void 0},{apply:C,path:void 0},{apply:n,path:void 0},{apply:j,path:void 0}]}function mr(){return["patchRoutes","patchClientRoutes","modifyContextOpts","modifyClientRenderOpts","rootContainer","innerProvider","i18nProvider","accessProvider","dataflowProvider","outerProvider","render","onRouteChange","modifyCodeSandboxData","modifyStackBlitzData"]}var Jr=null;function Ie(){return Jr=cn.Q$.create({plugins:Er(),validKeys:mr()}),Jr}function Ot(){return Jr}},87833:function(H,Q,i){"use strict";i.d(Q,{Ac:function(){return E.Ac},Dl:function(){return je},dY:function(){return Pe},_H:function(){return te},ql:function(){return E.ql},rU:function(){return E.rU},OL:function(){return E.OL},EQ:function(){return It.EQ},TR:function(){return It.TR},lZ:function(){return It.lZ},p6:function(){return E.p6},m8:function(){return E.m8},fp:function(){return E.fp},il:function(){return gn},Sc:function(){return xs},Ov:function(){return E.Ov},FO:function(){return It.FO},yh:function(){return Vl},YB:function(){return j.Z},kw:function(){return Hs},bU:function(){return $i.b},TH:function(){return E.TH},OK:function(){return ms},s0:function(){return E.s0},pC:function(){return E.pC},UO:function(){return E.UO},OI:function(){return Mc},Qt:function(){return E.Qt},eL:function(){return Wc},lr:function(){return E.lr},tx:function(){return Fs},WF:function(){return ut.W},OO:function(){return tt},zh:function(){return we}});var E=i(23920),M=i(15767),C=i(75271),n=i(93725),j=i(22078);function $(ne,ge){var xe=ne.values,xt=(0,M._T)(ne,["values"]),pn=ge.values,Mn=(0,M._T)(ge,["values"]);return(0,n.wU)(pn,xe)&&(0,n.wU)(xt,Mn)}function U(ne){var ge=(0,j.Z)(),xe=ge.formatMessage,xt=ge.textComponent,pn=xt===void 0?C.Fragment:xt,Mn=ne.id,Hn=ne.description,Qn=ne.defaultMessage,tr=ne.values,Ir=ne.children,oi=ne.tagName,ni=oi===void 0?pn:oi,_i=ne.ignoreTag,wi={id:Mn,description:Hn,defaultMessage:Qn},Si=xe(wi,tr,{ignoreTag:_i});return typeof Ir=="function"?Ir(Array.isArray(Si)?Si:[Si]):ni?C.createElement(ni,null,C.Children.toArray(Si)):C.createElement(C.Fragment,null,Si)}U.displayName="FormattedMessage";var Y=C.memo(U,$);Y.displayName="MemoizedFormattedMessage";var te=Y,X=i(15909),B=i(4280),K=i(35610),de=i(67235),he=i(15927);const J=(0,C.createContext)(null),ae={didCatch:!1,error:null};class se extends C.Component{constructor(ge){super(ge),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=ae}static getDerivedStateFromError(ge){return{didCatch:!0,error:ge}}resetErrorBoundary(){const{error:ge}=this.state;if(ge!==null){for(var xe,xt,pn=arguments.length,Mn=new Array(pn),Hn=0;Hn<pn;Hn++)Mn[Hn]=arguments[Hn];(xe=(xt=this.props).onReset)===null||xe===void 0||xe.call(xt,{args:Mn,reason:"imperative-api"}),this.setState(ae)}}componentDidCatch(ge,xe){var xt,pn;(xt=(pn=this.props).onError)===null||xt===void 0||xt.call(pn,ge,xe)}componentDidUpdate(ge,xe){const{didCatch:xt}=this.state,{resetKeys:pn}=this.props;if(xt&&xe.error!==null&&Ee(ge.resetKeys,pn)){var Mn,Hn;(Mn=(Hn=this.props).onReset)===null||Mn===void 0||Mn.call(Hn,{next:pn,prev:ge.resetKeys,reason:"keys"}),this.setState(ae)}}render(){const{children:ge,fallbackRender:xe,FallbackComponent:xt,fallback:pn}=this.props,{didCatch:Mn,error:Hn}=this.state;let Qn=ge;if(Mn){const tr={error:Hn,resetErrorBoundary:this.resetErrorBoundary};if(typeof xe=="function")Qn=xe(tr);else if(xt)Qn=(0,C.createElement)(xt,tr);else if(pn!==void 0)Qn=pn;else throw Hn}return(0,C.createElement)(J.Provider,{value:{didCatch:Mn,error:Hn,resetErrorBoundary:this.resetErrorBoundary}},Qn)}}function Ee(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return ne.length!==ge.length||ne.some((xe,xt)=>!Object.is(xe,ge[xt]))}function Le(ne){if(ne==null||typeof ne.didCatch!="boolean"||typeof ne.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function ke(){const ne=useContext(J);Le(ne);const[ge,xe]=useState({error:null,hasError:!1}),xt=useMemo(()=>({resetBoundary:()=>{ne.resetErrorBoundary(),xe({error:null,hasError:!1})},showBoundary:pn=>xe({error:pn,hasError:!0})}),[ne.resetErrorBoundary]);if(ge.hasError)throw ge.error;return xt}function ye(ne,ge){const xe=forwardRef((pn,Mn)=>createElement(se,ge,createElement(ne,k1(E_({},pn),{ref:Mn})))),xt=ne.displayName||ne.name||"Unknown";return xe.displayName="withErrorBoundary(".concat(xt,")"),xe}var Se=function(ge){return C.createElement(se,{fallbackRender:function(xt){var pn=xt.error;return C.createElement(he.Z,{type:"error"},C.createElement("p",null,C.createElement("strong",null,pn.message||"This demo has been crashed.")),pn.stack&&C.createElement("p",null,C.createElement("details",{open:!0},C.createElement("summary",null,"Error stack"),C.createElement("pre",null,pn.stack))))}},ge.children)},be=Se;function Ue(){return Ue=Object.assign?Object.assign.bind():function(ne){for(var ge=1;ge<arguments.length;ge++){var xe=arguments[ge];for(var xt in xe)Object.prototype.hasOwnProperty.call(xe,xt)&&(ne[xt]=xe[xt])}return ne},Ue.apply(this,arguments)}var qe=function(ge){var xe=(0,ut.W)(),xt=xe.historyType,pn=(0,E.Ov)(),Mn=pn.basename,Hn=ge.demo.id,Qn=(0,It.FO)(Hn),tr=Qn.component,Ir=Qn.asset,oi=Qn.renderOpts,ni=(0,de.m)({id:Hn,renderOpts:Qn.renderOpts,component:Qn.component}),_i=ni.canvasRef;if(ge.previewerProps.debug)return null;var wi=C.createElement(be,null,oi!=null&&oi.renderer?C.createElement("div",{ref:_i}):(0,C.createElement)(tr));if(ge.demo.inline)return wi;var Si=xt==="hash";return C.createElement(K.Z,Ue({asset:Ir,demoUrl:ge.previewerProps.demoUrl||"".concat(Si?"#":"").concat(Mn).concat(B.SP_ROUTE_PREFIX,"demos/").concat(ge.demo.id)},ge.previewerProps),ge.previewerProps.iframe?null:wi)},je=C.memo(qe,function(ne,ge){return JSON.stringify(ne).length===JSON.stringify(ge).length});function nt(){return nt=Object.assign?Object.assign.bind():function(ne){for(var ge=1;ge<arguments.length;ge++){var xe=arguments[ge];for(var xt in xe)Object.prototype.hasOwnProperty.call(xe,xt)&&(ne[xt]=xe[xt])}return ne},nt.apply(this,arguments)}function Ct(ne,ge){return He(ne)||_t(ne,ge)||Et(ne,ge)||ft()}function ft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(ne,ge){if(ne){if(typeof ne=="string")return yt(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return yt(ne,ge)}}function yt(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function _t(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function He(ne){if(Array.isArray(ne))return ne}var bt=function(ge){var xe=useRouteMeta(),xt=xe.frontmatter,pn=useCallback(function(Ir,oi){var ni,_i=[],wi=oi.filter(function(So){return!So.previewerProps.debug});if((ni=Ir.demo)!==null&&ni!==void 0&&ni.cols&&Ir.demo.cols>1&&(typeof window=="undefined"||window.innerWidth>1024)){for(var Si=0;Si<wi.length;Si+=Ir.demo.cols)wi.slice(Si,Si+Ir.demo.cols).forEach(function(So,io){var Wi;(Wi=_i[io])!==null&&Wi!==void 0||(_i[io]=[]),_i[io].push(So)});return _i}else _i.push(wi);return _i},[]),Mn=useState(function(){return pn(xt,ge.items)}),Hn=Ct(Mn,2),Qn=Hn[0],tr=Hn[1];return useEffect(function(){var Ir=function(){return tr(pn(xt,ge.items))};return window.addEventListener("resize",Ir),Ir(),function(){return window.removeEventListener("resize",Ir)}},[ge.items,xt.demo]),React.createElement("div",{style:{display:"flex",margin:-8},"data-dumi-demo-grid":!0},Qn.map(function(Ir,oi){return React.createElement("section",{style:{flex:1,padding:8,width:0},key:String(oi)},Ir.map(function(ni){return ge.demoRender?ge.demoRender(ni):React.createElement(DumiDemo,nt({key:ni.demo.id},ni))}))}))},Tt=function(ge){var xe=ge.tabs,xt=ge.tabKey,pn=ge.onChange,Mn=(0,j.Z)();return xe!=null&&xe.length?C.createElement("ul",{className:"dumi-default-content-tabs"},C.createElement("li",{onClick:function(){return pn()},"data-active":!xt||void 0},C.createElement("button",{type:"button"},Mn.formatMessage({id:"content.tabs.default"}))),xe.map(function(Hn){return C.createElement("li",{key:Hn.key,onClick:function(){return pn(Hn)},"data-active":xt===Hn.key||void 0},C.createElement("button",{type:"button"},Hn.titleIntlId?Mn.formatMessage({id:Hn.titleIntlId}):Hn.meta.frontmatter.title))})):null},st=Tt;function Qe(ne,ge){return lt(ne)||ue(ne,ge)||Ht(ne,ge)||mt()}function mt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(ne,ge){if(ne){if(typeof ne=="string")return vt(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return vt(ne,ge)}}function vt(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function ue(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function lt(ne){if(Array.isArray(ne))return ne}var le="tab",Je=function(){var ge=(0,E.TH)(),xe=ge.pathname,xt=(0,E.lr)(),pn=Qe(xt,1),Mn=pn[0],Hn=(0,C.useCallback)(function(Qn){Qn?Mn.set(le,Qn):Mn.delete(le),E.m8.push({pathname:xe,search:"?".concat(Mn.toString())})},[Mn,xe]);return[Mn.get(le),Hn]},we=function(){var ge,xe=Wc(),xt=xe.tabs,pn=Je(),Mn=Qe(pn,1),Hn=Mn[0];return xt==null||(ge=xt.find(function(Qn){var tr=Qn.key;return Hn===tr}))===null||ge===void 0?void 0:ge.meta};function Pn(ne,ge){return lr(ne)||Dr(ne,ge)||or(ne,ge)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function or(ne,ge){if(ne){if(typeof ne=="string")return wr(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return wr(ne,ge)}}function wr(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function Dr(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function lr(ne){if(Array.isArray(ne))return ne}var Pe=function(ge){var xe=Wc(),xt=xe.tabs,pn=Je(),Mn=Pn(pn,2),Hn=Mn[0],Qn=Mn[1],tr=(0,C.useState)(function(){return xt==null?void 0:xt.find(function(_i){var wi=_i.key;return wi===Hn})}),Ir=Pn(tr,2),oi=Ir[0],ni=Ir[1];return C.createElement(C.Fragment,null,C.createElement(st,{tabs:xt,tabKey:Hn,onChange:function(wi){ni(wi),Qn(wi==null?void 0:wi.key)}}),oi?C.createElement(oi.components.default):ge.children)},ut=i(26205),Ve=i(14978),gt=i(43037);function Gt(ne,ge){return Lt(ne)||Sn(ne,ge)||At(ne,ge)||Me()}function Me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function At(ne,ge){if(ne){if(typeof ne=="string")return Bt(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return Bt(ne,ge)}}function Bt(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function Sn(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function Lt(ne){if(Array.isArray(ne))return ne}var Bn="https://codesandbox.io/api/v1/sandboxes/define";function en(ne){var ge,xe,xt,pn,Mn,Hn=!!(!((ge=ne.asset.dependencies)===null||ge===void 0)&&ge["index.tsx"]),Qn=Hn?".tsx":".jsx",tr={},Ir={},oi="index".concat(Qn);Object.entries(ne.asset.dependencies).forEach(function(_i){var wi=Gt(_i,2),Si=wi[0],So=wi[1],io=So.type,Wi=So.value;io==="NPM"?Ir[Si]=Wi:tr[Si===oi?"App".concat(Qn):Si]={content:Wi,isBinary:!1}}),(xt=Ir[xe="react"])!==null&&xt!==void 0||(Ir[xe]="latest"),(Mn=Ir[pn="react-dom"])!==null&&Mn!==void 0||(Ir[pn]=Ir.react),tr["sandbox.config.json"]={content:JSON.stringify({template:"create-react-app"},null,2),isBinary:!1},tr["package.json"]={content:JSON.stringify({name:ne.title,description:ne.description||"An auto-generated demo by dumi",main:oi,dependencies:Ir,devDependencies:Hn?{typescript:"^4"}:{}},null,2),isBinary:!1},tr["index.html"]={content:'<div style="margin: 16px;" id="root"></div>',isBinary:!1},tr[oi]={content:(0,gt.AM)(Ir.react),isBinary:!1};var ni=gt.EV.applyPlugins({type:E.Ac.modify,key:"modifyCodeSandboxData",initialValue:{files:tr},args:ne});return(0,Ve.Z)(ni)}var gn=function(ge,xe){var xt,pn=document.createElement("form"),Mn=document.createElement("input"),Hn=en(ge);pn.method="POST",pn.target="_blank",pn.style.display="none",pn.action=(xe==null?void 0:xe.api)||Bn,pn.appendChild(Mn),pn.setAttribute("data-demo",((xt=ge.assets)===null||xt===void 0?void 0:xt.id)||""),Mn.name="parameters",Mn.value=Hn,document.body.appendChild(pn),pn.submit(),pn.remove()},ar=i(26068),Sr=i.n(ar),In=i(25298),Gn=i.n(In),hn=i(17069),mn=i.n(hn),cn=i(31759),Ln=i.n(cn),Er=i(48305),mr=i.n(Er),Jr=500,Ie=20,Ot=300,St="https://stackblitz.com",at=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],Xe=["project","search","ports","settings"],Nt=["light","dark"],Nn=["editor","preview"],Jn={clickToLoad:function(ge){return Br("ctl",ge)},devToolsHeight:function(ge){return zr("devtoolsheight",ge)},forceEmbedLayout:function(ge){return Br("embed",ge)},hideDevTools:function(ge){return Br("hidedevtools",ge)},hideExplorer:function(ge){return Br("hideExplorer",ge)},hideNavigation:function(ge){return Br("hideNavigation",ge)},openFile:function(ge){return fn("file",ge)},showSidebar:function(ge){return Hr("showSidebar",ge)},sidebarView:function(ge){return Tr("sidebarView",ge,Xe)},startScript:function(ge){return fn("startScript",ge)},terminalHeight:function(ge){return zr("terminalHeight",ge)},theme:function(ge){return Tr("theme",ge,Nt)},view:function(ge){return Tr("view",ge,Nn)},zenMode:function(ge){return Br("zenMode",ge)},organization:function(ge){return"".concat(fn("orgName",ge==null?void 0:ge.name),"&").concat(fn("orgProvider",ge==null?void 0:ge.provider))},crossOriginIsolated:function(ge){return Br("corp",ge)}};function rr(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=Object.entries(ne).map(function(xe){var xt=mr()(xe,2),pn=xt[0],Mn=xt[1];return Mn!=null&&Jn.hasOwnProperty(pn)?Jn[pn](Mn):""}).filter(Boolean);return ge.length?"?".concat(ge.join("&")):""}function Br(ne,ge){return ge===!0?"".concat(ne,"=1"):""}function Hr(ne,ge){return typeof ge=="boolean"?"".concat(ne,"=").concat(ge?"1":"0"):""}function zr(ne,ge){if(typeof ge=="number"&&!Number.isNaN(ge)){var xe=Math.min(100,Math.max(0,ge));return"".concat(ne,"=").concat(encodeURIComponent(Math.round(xe)))}return""}function Tr(ne){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return xe.includes(ge)?"".concat(ne,"=").concat(encodeURIComponent(ge)):""}function fn(ne,ge){var xe=Array.isArray(ge)?ge:[ge];return xe.filter(function(xt){return typeof xt=="string"&&xt.trim()!==""}).map(function(xt){return"".concat(ne,"=").concat(encodeURIComponent(xt))}).join("&")}function Ne(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function Ge(ne,ge){return"".concat(Dt(ge)).concat(ne).concat(rr(ge))}function ot(ne,ge){var xe={forceEmbedLayout:!0};return ge&&Ln()(ge)==="object"&&Object.assign(xe,ge),"".concat(Dt(xe)).concat(ne).concat(rr(xe))}function Dt(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=typeof ne.origin=="string"?ne.origin:St;return ge.replace(/\/$/,"")}function jt(ne,ge,xe){if(!ge||!ne||!ne.parentNode)throw new Error("Invalid Element");ne.id&&(ge.id=ne.id),ne.className&&(ge.className=ne.className),rn(ge,xe),Fn(ne,ge,xe),ne.replaceWith(ge)}function sn(ne){if(typeof ne=="string"){var ge=document.getElementById(ne);if(!ge)throw new Error("Could not find element with id '".concat(ne,"'"));return ge}else if(ne instanceof HTMLElement)return ne;throw new Error("Invalid element: ".concat(ne))}function xn(ne){return ne&&ne.newWindow===!1?"_self":"_blank"}function rn(ne){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=Object.hasOwnProperty.call(ge,"height")?"".concat(ge.height):"".concat(Ot),xt=Object.hasOwnProperty.call(ge,"width")?"".concat(ge.width):void 0;ne.setAttribute("height",xe),xt?ne.setAttribute("width",xt):ne.setAttribute("style","width:100%;")}function Fn(ne,ge){var xe,xt,pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Mn=(xe=(xt=ne.allow)===null||xt===void 0||(xt=xt.split(";"))===null||xt===void 0?void 0:xt.map(function(Hn){return Hn.trim()}))!==null&&xe!==void 0?xe:[];pn.crossOriginIsolated&&!Mn.includes("cross-origin-isolated")&&Mn.push("cross-origin-isolated"),Mn.length>0&&(ge.allow=Mn.join("; "))}var Un=function(){function ne(ge){Gn()(this,ne),this.pending={},this.port=ge,this.port.onmessage=this.messageListener.bind(this)}return mn()(ne,[{key:"request",value:function(xe){var xt=this,pn=xe.type,Mn=xe.payload;return new Promise(function(Hn,Qn){var tr=Ne();xt.pending[tr]={resolve:Hn,reject:Qn},xt.port.postMessage({type:pn,payload:Sr()(Sr()({},Mn),{},{__reqid:tr})})})}},{key:"messageListener",value:function(xe){var xt;if(typeof((xt=xe.data.payload)===null||xt===void 0?void 0:xt.__reqid)=="string"){var pn=xe.data,Mn=pn.type,Hn=pn.payload,Qn=Hn.__reqid,tr=Hn.__success,Ir=Hn.__error;this.pending[Qn]&&(tr?this.pending[Qn].resolve(this.cleanResult(Hn)):this.pending[Qn].reject(Ir?"".concat(Mn,": ").concat(Ir):Mn),delete this.pending[Qn])}}},{key:"cleanResult",value:function(xe){var xt=Sr()({},xe);return delete xt.__reqid,delete xt.__success,delete xt.__error,Object.keys(xt).length?xt:null}}]),ne}(),jn=function(){function ne(ge,xe){var xt=this;Gn()(this,ne),this.editor={openFile:function(Mn){return xt._rdc.request({type:"SDK_OPEN_FILE",payload:{path:Mn}})},setCurrentFile:function(Mn){return xt._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:Mn}})},setTheme:function(Mn){return xt._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:Mn}})},setView:function(Mn){return xt._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:Mn}})},showSidebar:function(){var Mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return xt._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:Mn}})}},this.preview={origin:"",getUrl:function(){return xt._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(function(Mn){var Hn;return(Hn=Mn==null?void 0:Mn.url)!==null&&Hn!==void 0?Hn:null})},setUrl:function(){var Mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/";if(typeof Mn!="string"||!Mn.startsWith("/"))throw new Error("Invalid argument: expected a path starting with '/', got '".concat(Mn,"'"));return xt._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:Mn}})}},this._rdc=new Un(ge),Object.defineProperty(this.preview,"origin",{value:typeof xe.previewOrigin=="string"?xe.previewOrigin:null,writable:!1})}return mn()(ne,[{key:"applyFsDiff",value:function(xe){var xt=function(Mn){return Mn!==null&&Ln()(Mn)==="object"};if(!xt(xe)||!xt(xe.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(xe.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:xe})}},{key:"getDependencies",value:function(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}},{key:"getFsSnapshot",value:function(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}]),ne}(),_n=[],Xn=mn()(function ne(ge){var xe=this;Gn()(this,ne),this.id=Ne(),this.element=ge,this.pending=new Promise(function(xt,pn){var Mn=function(ni){var _i=ni.data,wi=ni.ports;(_i==null?void 0:_i.action)==="SDK_INIT_SUCCESS"&&_i.id===xe.id&&(xe.vm=new jn(wi[0],_i.payload),xt(xe.vm),Qn())},Hn=function(){var ni;(ni=xe.element.contentWindow)===null||ni===void 0||ni.postMessage({action:"SDK_INIT",id:xe.id},"*")};function Qn(){window.clearInterval(Ir),window.removeEventListener("message",Mn)}window.addEventListener("message",Mn),Hn();var tr=0,Ir=window.setInterval(function(){if(xe.vm){Qn();return}if(tr>=Ie){Qn(),pn("Timeout: Unable to establish a connection with the StackBlitz VM"),_n.forEach(function(oi,ni){oi.id===xe.id&&_n.splice(ni,1)});return}tr++,Hn()},Jr)}),_n.push(this)}),er=function(ge){var xe,xt=ge instanceof Element?"element":"id";return(xe=_n.find(function(pn){return pn[xt]===ge}))!==null&&xe!==void 0?xe:null};function Yr(ne,ge){var xe=document.createElement("input");return xe.type="hidden",xe.name=ne,xe.value=ge,xe}function qr(ne){return ne.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function Gr(ne){var ge=ne.template,xe=ne.title,xt=ne.description,pn=ne.dependencies,Mn=ne.files,Hn=ne.settings;if(!at.includes(ge)){var Qn=at.map(function(ni){return"'".concat(ni,"'")}).join(", ");console.warn("Unsupported project.template: must be one of ".concat(Qn))}var tr=[],Ir=function(_i,wi){var Si=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";tr.push(Yr(_i,typeof wi=="string"?wi:Si))};Ir("project[title]",xe),typeof xt=="string"&&xt.length>0&&Ir("project[description]",xt),Ir("project[template]",ge,"javascript"),pn&&(ge==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):Ir("project[dependencies]",JSON.stringify(pn))),Hn&&Ir("project[settings]",JSON.stringify(Hn)),Object.entries(Mn).forEach(function(ni){var _i=mr()(ni,2),wi=_i[0],Si=_i[1];Ir("project[files][".concat(qr(wi),"]"),Si)});var oi=document.createElement("form");return oi.method="POST",oi.setAttribute("style","display:none!important;"),oi.append.apply(oi,tr),oi}function ci(ne,ge){var xe=Gr(ne);xe.action=ot("/run",ge),xe.id="sb_run";var xt=`<!doctype html>
<html>
<head><title></title></head>
<body>
  `.concat(xe.outerHTML,`
  <script>document.getElementById('`).concat(xe.id,`').submit();<\/script>
</body>
</html>`);return xt}function Ci(ne,ge){var xe=Gr(ne);xe.action=Ge("/run",ge),xe.target=xn(ge),document.body.appendChild(xe),xe.submit(),document.body.removeChild(xe)}function Ki(ne){var ge;if(!(ne!=null&&ne.contentWindow))return Promise.reject("Provided element is not an iframe.");var xe=(ge=er(ne))!==null&&ge!==void 0?ge:new Xn(ne);return xe.pending}function Bi(ne,ge){Ci(ne,ge)}function Di(ne,ge){var xe=Ge("/edit/".concat(ne),ge),xt=xn(ge);window.open(xe,xt)}function yo(ne,ge){var xe=Ge("/github/".concat(ne),ge),xt=xn(ge);window.open(xe,xt)}function po(ne,ge,xe){var xt,pn=sn(ne),Mn=ci(ge,xe),Hn=document.createElement("iframe");return jt(pn,Hn,xe),(xt=Hn.contentDocument)===null||xt===void 0||xt.write(Mn),Ki(Hn)}function Vo(ne,ge,xe){var xt=sn(ne),pn=document.createElement("iframe");return pn.src=ot("/edit/".concat(ge),xe),jt(xt,pn,xe),Ki(pn)}function Xo(ne,ge,xe){var xt=sn(ne),pn=document.createElement("iframe");return pn.src=ot("/github/".concat(ge),xe),jt(xt,pn,xe),Ki(pn)}var $o={connect:Ki,embedGithubProject:Xo,embedProject:po,embedProjectId:Vo,openGithubProject:yo,openProject:Bi,openProjectId:Di};function Aa(ne,ge){return Fa(ne)||oa(ne,ge)||Oo(ne,ge)||qa()}function qa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oo(ne,ge){if(ne){if(typeof ne=="string")return Do(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return Do(ne,ge)}}function Do(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function oa(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function Fa(ne){if(Array.isArray(ne))return ne}var xs=function(ge){var xe,xt,pn,Mn,Hn,Qn=!!(!((xe=ge.asset.dependencies)===null||xe===void 0)&&xe["index.tsx"]),tr=Qn?".tsx":".jsx",Ir={},oi="index".concat(tr),ni={"index.html":'<div style="margin: 16px;" id="root"></div>'},_i={title:ge.title||"",description:ge.description||"An auto-generated demo by dumi",template:"create-react-app",files:{}};Object.entries(ge.asset.dependencies).forEach(function(Si){var So=Aa(Si,2),io=So[0],Wi=So[1],xo=Wi.type,Qi=Wi.value;xo==="NPM"?Ir[io]=Qi:ni[io===oi?"App".concat(tr):io]=Qi}),(pn=Ir[xt="react"])!==null&&pn!==void 0||(Ir[xt]="latest"),(Hn=Ir[Mn="react-dom"])!==null&&Hn!==void 0||(Ir[Mn]=Ir.react),ni["package.json"]=JSON.stringify({name:ge.title,description:ge.description||"An auto-generated demo by dumi",dependencies:Ir,devDependencies:Qn?{typescript:"^4"}:{}},null,2),ni[oi]=(0,gt.AM)(Ir.react),_i.files=ni;var wi=gt.EV.applyPlugins({type:E.Ac.modify,key:"modifyStackBlitzData",initialValue:_i,args:ge});$o.openProject(wi)},tl=function(){var ge=useSiteData(),xe=ge.components;return{components:xe}},Na=i(30826),ro=i.n(Na);function xa(ne){"@babel/helpers - typeof";return xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},xa(ne)}function Ba(){"use strict";Ba=function(){return ne};var ne={},ge=Object.prototype,xe=ge.hasOwnProperty,xt=Object.defineProperty||function(fr,nr,_r){fr[nr]=_r.value},pn=typeof Symbol=="function"?Symbol:{},Mn=pn.iterator||"@@iterator",Hn=pn.asyncIterator||"@@asyncIterator",Qn=pn.toStringTag||"@@toStringTag";function tr(fr,nr,_r){return Object.defineProperty(fr,nr,{value:_r,enumerable:!0,configurable:!0,writable:!0}),fr[nr]}try{tr({},"")}catch(fr){tr=function(_r,ei,Xr){return _r[ei]=Xr}}function Ir(fr,nr,_r,ei){var Xr=nr&&nr.prototype instanceof _i?nr:_i,fi=Object.create(Xr.prototype),Vi=new Go(ei||[]);return xt(fi,"_invoke",{value:La(fr,_r,Vi)}),fi}function oi(fr,nr,_r){try{return{type:"normal",arg:fr.call(nr,_r)}}catch(ei){return{type:"throw",arg:ei}}}ne.wrap=Ir;var ni={};function _i(){}function wi(){}function Si(){}var So={};tr(So,Mn,function(){return this});var io=Object.getPrototypeOf,Wi=io&&io(io(Ti([])));Wi&&Wi!==ge&&xe.call(Wi,Mn)&&(So=Wi);var xo=Si.prototype=_i.prototype=Object.create(So);function Qi(fr){["next","throw","return"].forEach(function(nr){tr(fr,nr,function(_r){return this._invoke(nr,_r)})})}function Ho(fr,nr){function _r(Xr,fi,Vi,vo){var Ro=oi(fr[Xr],fr,fi);if(Ro.type!=="throw"){var _a=Ro.arg,ca=_a.value;return ca&&xa(ca)=="object"&&xe.call(ca,"__await")?nr.resolve(ca.__await).then(function(ta){_r("next",ta,Vi,vo)},function(ta){_r("throw",ta,Vi,vo)}):nr.resolve(ca).then(function(ta){_a.value=ta,Vi(_a)},function(ta){return _r("throw",ta,Vi,vo)})}vo(Ro.arg)}var ei;xt(this,"_invoke",{value:function(fi,Vi){function vo(){return new nr(function(Ro,_a){_r(fi,Vi,Ro,_a)})}return ei=ei?ei.then(vo,vo):vo()}})}function La(fr,nr,_r){var ei="suspendedStart";return function(Xr,fi){if(ei==="executing")throw new Error("Generator is already running");if(ei==="completed"){if(Xr==="throw")throw fi;return Ei()}for(_r.method=Xr,_r.arg=fi;;){var Vi=_r.delegate;if(Vi){var vo=as(Vi,_r);if(vo){if(vo===ni)continue;return vo}}if(_r.method==="next")_r.sent=_r._sent=_r.arg;else if(_r.method==="throw"){if(ei==="suspendedStart")throw ei="completed",_r.arg;_r.dispatchException(_r.arg)}else _r.method==="return"&&_r.abrupt("return",_r.arg);ei="executing";var Ro=oi(fr,nr,_r);if(Ro.type==="normal"){if(ei=_r.done?"completed":"suspendedYield",Ro.arg===ni)continue;return{value:Ro.arg,done:_r.done}}Ro.type==="throw"&&(ei="completed",_r.method="throw",_r.arg=Ro.arg)}}}function as(fr,nr){var _r=nr.method,ei=fr.iterator[_r];if(ei===void 0)return nr.delegate=null,_r==="throw"&&fr.iterator.return&&(nr.method="return",nr.arg=void 0,as(fr,nr),nr.method==="throw")||_r!=="return"&&(nr.method="throw",nr.arg=new TypeError("The iterator does not provide a '"+_r+"' method")),ni;var Xr=oi(ei,fr.iterator,nr.arg);if(Xr.type==="throw")return nr.method="throw",nr.arg=Xr.arg,nr.delegate=null,ni;var fi=Xr.arg;return fi?fi.done?(nr[fr.resultName]=fi.value,nr.next=fr.nextLoc,nr.method!=="return"&&(nr.method="next",nr.arg=void 0),nr.delegate=null,ni):fi:(nr.method="throw",nr.arg=new TypeError("iterator result is not an object"),nr.delegate=null,ni)}function Ja(fr){var nr={tryLoc:fr[0]};1 in fr&&(nr.catchLoc=fr[1]),2 in fr&&(nr.finallyLoc=fr[2],nr.afterLoc=fr[3]),this.tryEntries.push(nr)}function Rs(fr){var nr=fr.completion||{};nr.type="normal",delete nr.arg,fr.completion=nr}function Go(fr){this.tryEntries=[{tryLoc:"root"}],fr.forEach(Ja,this),this.reset(!0)}function Ti(fr){if(fr){var nr=fr[Mn];if(nr)return nr.call(fr);if(typeof fr.next=="function")return fr;if(!isNaN(fr.length)){var _r=-1,ei=function Xr(){for(;++_r<fr.length;)if(xe.call(fr,_r))return Xr.value=fr[_r],Xr.done=!1,Xr;return Xr.value=void 0,Xr.done=!0,Xr};return ei.next=ei}}return{next:Ei}}function Ei(){return{value:void 0,done:!0}}return wi.prototype=Si,xt(xo,"constructor",{value:Si,configurable:!0}),xt(Si,"constructor",{value:wi,configurable:!0}),wi.displayName=tr(Si,Qn,"GeneratorFunction"),ne.isGeneratorFunction=function(fr){var nr=typeof fr=="function"&&fr.constructor;return!!nr&&(nr===wi||(nr.displayName||nr.name)==="GeneratorFunction")},ne.mark=function(fr){return Object.setPrototypeOf?Object.setPrototypeOf(fr,Si):(fr.__proto__=Si,tr(fr,Qn,"GeneratorFunction")),fr.prototype=Object.create(xo),fr},ne.awrap=function(fr){return{__await:fr}},Qi(Ho.prototype),tr(Ho.prototype,Hn,function(){return this}),ne.AsyncIterator=Ho,ne.async=function(fr,nr,_r,ei,Xr){Xr===void 0&&(Xr=Promise);var fi=new Ho(Ir(fr,nr,_r,ei),Xr);return ne.isGeneratorFunction(nr)?fi:fi.next().then(function(Vi){return Vi.done?Vi.value:fi.next()})},Qi(xo),tr(xo,Qn,"Generator"),tr(xo,Mn,function(){return this}),tr(xo,"toString",function(){return"[object Generator]"}),ne.keys=function(fr){var nr=Object(fr),_r=[];for(var ei in nr)_r.push(ei);return _r.reverse(),function Xr(){for(;_r.length;){var fi=_r.pop();if(fi in nr)return Xr.value=fi,Xr.done=!1,Xr}return Xr.done=!0,Xr}},ne.values=Ti,Go.prototype={constructor:Go,reset:function(nr){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Rs),!nr)for(var _r in this)_r.charAt(0)==="t"&&xe.call(this,_r)&&!isNaN(+_r.slice(1))&&(this[_r]=void 0)},stop:function(){this.done=!0;var nr=this.tryEntries[0].completion;if(nr.type==="throw")throw nr.arg;return this.rval},dispatchException:function(nr){if(this.done)throw nr;var _r=this;function ei(_a,ca){return Vi.type="throw",Vi.arg=nr,_r.next=_a,ca&&(_r.method="next",_r.arg=void 0),!!ca}for(var Xr=this.tryEntries.length-1;Xr>=0;--Xr){var fi=this.tryEntries[Xr],Vi=fi.completion;if(fi.tryLoc==="root")return ei("end");if(fi.tryLoc<=this.prev){var vo=xe.call(fi,"catchLoc"),Ro=xe.call(fi,"finallyLoc");if(vo&&Ro){if(this.prev<fi.catchLoc)return ei(fi.catchLoc,!0);if(this.prev<fi.finallyLoc)return ei(fi.finallyLoc)}else if(vo){if(this.prev<fi.catchLoc)return ei(fi.catchLoc,!0)}else{if(!Ro)throw new Error("try statement without catch or finally");if(this.prev<fi.finallyLoc)return ei(fi.finallyLoc)}}}},abrupt:function(nr,_r){for(var ei=this.tryEntries.length-1;ei>=0;--ei){var Xr=this.tryEntries[ei];if(Xr.tryLoc<=this.prev&&xe.call(Xr,"finallyLoc")&&this.prev<Xr.finallyLoc){var fi=Xr;break}}fi&&(nr==="break"||nr==="continue")&&fi.tryLoc<=_r&&_r<=fi.finallyLoc&&(fi=null);var Vi=fi?fi.completion:{};return Vi.type=nr,Vi.arg=_r,fi?(this.method="next",this.next=fi.finallyLoc,ni):this.complete(Vi)},complete:function(nr,_r){if(nr.type==="throw")throw nr.arg;return nr.type==="break"||nr.type==="continue"?this.next=nr.arg:nr.type==="return"?(this.rval=this.arg=nr.arg,this.method="return",this.next="end"):nr.type==="normal"&&_r&&(this.next=_r),ni},finish:function(nr){for(var _r=this.tryEntries.length-1;_r>=0;--_r){var ei=this.tryEntries[_r];if(ei.finallyLoc===nr)return this.complete(ei.completion,ei.afterLoc),Rs(ei),ni}},catch:function(nr){for(var _r=this.tryEntries.length-1;_r>=0;--_r){var ei=this.tryEntries[_r];if(ei.tryLoc===nr){var Xr=ei.completion;if(Xr.type==="throw"){var fi=Xr.arg;Rs(ei)}return fi}}throw new Error("illegal catch attempt")},delegateYield:function(nr,_r,ei){return this.delegate={iterator:Ti(nr),resultName:_r,nextLoc:ei},this.method==="next"&&(this.arg=void 0),ni}},ne}function ma(ne,ge,xe,xt,pn,Mn,Hn){try{var Qn=ne[Mn](Hn),tr=Qn.value}catch(Ir){xe(Ir);return}Qn.done?ge(tr):Promise.resolve(tr).then(xt,pn)}function ja(ne){return function(){var ge=this,xe=arguments;return new Promise(function(xt,pn){var Mn=ne.apply(ge,xe);function Hn(tr){ma(Mn,xt,pn,Hn,Qn,"next",tr)}function Qn(tr){ma(Mn,xt,pn,Hn,Qn,"throw",tr)}Hn(void 0)})}}function Sa(ne,ge){return ko(ne)||Ma(ne,ge)||ua(ne,ge)||us()}function us(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(ne,ge){if(ne){if(typeof ne=="string")return ao(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return ao(ne,ge)}}function ao(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function Ma(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function ko(ne){if(Array.isArray(ne))return ne}var No=500;function Uo(ne,ge){var xe=ge.module,xt=ge.exports,pn=ge.require;new Function("module","exports","require",ne)(xe,xt,pn)}var Hs=function(ge,xe){var xt=(0,It.FO)(ge),pn=(0,C.useState)(!1),Mn=Sa(pn,2),Hn=Mn[0],Qn=Mn[1],tr=(0,C.useRef)(),Ir=(0,C.useRef)();function oi(){clearTimeout(tr.current),Qn(!1)}var ni=xt.context,_i=ni===void 0?{}:ni,wi=xt.asset,Si=xt.renderOpts,So=(0,C.useState)(null),io=Sa(So,2),Wi=io[0],xo=io[1],Qi=(0,de.m)({id:ge,renderOpts:xt.renderOpts,onResolved:function(){oi()}}),Ho=Qi.canvasRef,La=Qi.setComponent,as=(0,C.useState)(),Ja=Sa(as,2),Rs=Ja[0],Go=Ja[1],Ti=(0,C.useCallback)(ro()(function(){var Ei=ja(Ba().mark(function fr(nr){var _r,ei,Xr,fi,Vi,vo,Ro,_a,ca,ta,ds,iu,Ks,Ou,bl;return Ba().wrap(function(Co){for(;;)switch(Co.prev=Co.next){case 0:if(tr.current=window.setTimeout(function(){Qn(!0)},No-1),!(xe!=null&&xe.iframe&&xe!==null&&xe!==void 0&&(_r=xe.containerRef)!==null&&_r!==void 0&&_r.current)){Co.next=7;break}return ei=xe.containerRef.current.querySelector("iframe").contentWindow,Co.next=5,new Promise(function(Pl){var As=function nl(Ol){Ol.data.type.startsWith("dumi.liveDemo.compileDone")&&(ei.removeEventListener("message",nl),xo(Ol.data.value.err),Pl())};ei.addEventListener("message",As),ei.postMessage({type:"dumi.liveDemo.setSource",value:nr})});case 5:Co.next=74;break;case 7:if(Xr=Object.keys(wi.dependencies).find(function(Pl){return wi.dependencies[Pl].type==="FILE"}),fi=function(As){if(As in _i)return _i[As];throw new Error("Cannot find module: ".concat(As))},Vi=Ir.current=Math.random(),vo=nr[Xr],!(Si!=null&&Si.compile)){Co.next=23;break}return Co.prev=12,Co.next=15,Si.compile(vo,{filename:"".concat(ge,"-").concat(Xr)});case 15:vo=Co.sent,Co.next=23;break;case 18:return Co.prev=18,Co.t0=Co.catch(12),xo(Co.t0),oi(),Co.abrupt("return");case 23:if(!(Si!=null&&Si.renderer&&Si!==null&&Si!==void 0&&Si.compile)){Co.next=44;break}return Co.prev=24,Ro={},_a={exports:Ro},Uo(vo,{exports:Ro,module:_a,require:fi}),Co.next=30,(0,gt.Ns)(Ro);case 30:if(ca=Co.sent,!Si.preflight){Co.next=34;break}return Co.next=34,Si.preflight(ca);case 34:La(ca),Go((0,C.createElement)("div",{ref:Ho})),xo(null),Co.next=43;break;case 39:Co.prev=39,Co.t1=Co.catch(24),xo(Co.t1),oi();case 43:return Co.abrupt("return");case 44:if(Co.prev=44,ta=i.e(27).then(i.t.bind(i,60027,19)).then(function(Pl){var As=Pl.renderToStaticMarkup;return As}),Vi===Ir.current){Co.next=48;break}return Co.abrupt("return");case 48:return ds={},iu={exports:ds},Uo(vo,{exports:ds,module:iu,require:fi}),Ks=(0,C.createElement)(be,null,(0,C.createElement)(ds.default)),Ou=console.error,console.error=function(){for(var Pl=arguments.length,As=new Array(Pl),nl=0;nl<Pl;nl++)As[nl]=arguments[nl];return!As[0].includes("useLayoutEffect does nothing on the server")&&Ou.apply(console,As)},Co.prev=54,Co.next=57,ta;case 57:Co.t2=Co.sent,(0,Co.t2)(Ks),Co.next=66;break;case 61:if(Co.prev=61,Co.t3=Co.catch(54),bl=B.SHOULD_SKIP_LIVEDEMO_ERROR.some(function(Pl){return Co.t3.message.includes(Pl)}),bl){Co.next=66;break}throw Co.t3;case 66:console.error=Ou,Go(Ks),xo(null),Co.next=74;break;case 71:Co.prev=71,Co.t4=Co.catch(44),xo(Co.t4);case 74:oi();case 75:case"end":return Co.stop()}},fr,null,[[12,18],[24,39],[44,71],[54,61]])}));return function(fr){return Ei.apply(this,arguments)}}(),No,{leading:!0}),[_i,wi,Si]);return{node:Rs,loading:Hn,error:Wi,setSource:Ti}},$i=i(91655);function es(ne){"@babel/helpers - typeof";return es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},es(ne)}function Ll(ne,ge){var xe=Object.keys(ne);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(ne);ge&&(xt=xt.filter(function(pn){return Object.getOwnPropertyDescriptor(ne,pn).enumerable})),xe.push.apply(xe,xt)}return xe}function hl(ne){for(var ge=1;ge<arguments.length;ge++){var xe=arguments[ge]!=null?arguments[ge]:{};ge%2?Ll(Object(xe),!0).forEach(function(xt){ho(ne,xt,xe[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(xe)):Ll(Object(xe)).forEach(function(xt){Object.defineProperty(ne,xt,Object.getOwnPropertyDescriptor(xe,xt))})}return ne}function ho(ne,ge,xe){return ge=Ul(ge),ge in ne?Object.defineProperty(ne,ge,{value:xe,enumerable:!0,configurable:!0,writable:!0}):ne[ge]=xe,ne}function Ul(ne){var ge=Ml(ne,"string");return es(ge)==="symbol"?ge:String(ge)}function Ml(ne,ge){if(es(ne)!=="object"||ne===null)return ne;var xe=ne[Symbol.toPrimitive];if(xe!==void 0){var xt=xe.call(ne,ge||"default");if(es(xt)!=="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ge==="string"?String:Number)(ne)}function Ri(ne,ge){var xe=typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(!xe){if(Array.isArray(ne)||(xe=zs(ne))||ge&&ne&&typeof ne.length=="number"){xe&&(ne=xe);var xt=0,pn=function(){};return{s:pn,n:function(){return xt>=ne.length?{done:!0}:{done:!1,value:ne[xt++]}},e:function(Ir){throw Ir},f:pn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mn=!0,Hn=!1,Qn;return{s:function(){xe=xe.call(ne)},n:function(){var Ir=xe.next();return Mn=Ir.done,Ir},e:function(Ir){Hn=!0,Qn=Ir},f:function(){try{!Mn&&xe.return!=null&&xe.return()}finally{if(Hn)throw Qn}}}}function Wo(ne){return il(ne)||ts(ne)||zs(ne)||fo()}function fo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(ne){if(typeof Symbol!="undefined"&&ne[Symbol.iterator]!=null||ne["@@iterator"]!=null)return Array.from(ne)}function il(ne){if(Array.isArray(ne))return Cs(ne)}function Jo(ne,ge){return qi(ne)||oo(ne,ge)||zs(ne,ge)||Jl()}function Jl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zs(ne,ge){if(ne){if(typeof ne=="string")return Cs(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return Cs(ne,ge)}}function Cs(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function oo(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function qi(ne){if(Array.isArray(ne))return ne}var Ta="$default-group-title",la=function(ge,xe){return"base"in xe?ge.replace(xe.base.slice(1),"").replace(/^\//,""):ge};function Os(ne,ge){var xe=ge.meta,xt=ge.is2LevelNav,pn=ge.locale,Mn=new RegExp("/index(\\.".concat(pn.id,")?.md$")),Hn=(xe==null?void 0:xe.frontmatter.filename)&&Mn.test(xe.frontmatter.filename)&&!xe._atom_route&&xt,Qn=ne.split("/").filter(Boolean),tr=Math.min(Math.max(Hn?Qn.length:Qn.length-1,1),xt?2:1/0);return Qn.slice(0,tr).join("/")}var Vl=function(){var ge=(0,$i.b)(),xe=(0,gt.RX)(),xt=(0,ut.W)(),pn=xt.themeConfig,Mn=xt._2_level_nav_available,Hn=(0,gt.M7)(),Qn=(0,C.useState)(function(){var oi=Object.values(xe).reduce(function(_i,wi){var Si=la(wi.path,ge);if(Si&&wi.meta){var So,io,Wi,xo="/".concat(wi.path.replace(Si,function(Ja){return Os(Ja,{is2LevelNav:Mn,meta:wi.meta,locale:ge})})),Qi=(0,gt.qu)({order:0},"group",wi.meta.frontmatter),Ho=Qi.title,La=Qi.order,as=Ho||Ta;(So=_i[xo])!==null&&So!==void 0||(_i[xo]={}),_i[xo][as]={title:Ho,order:((io=_i[xo][as])===null||io===void 0?void 0:io.order)||La,children:[].concat(Wo(((Wi=_i[xo][as])===null||Wi===void 0?void 0:Wi.children)||[]),[{title:wi.meta.frontmatter.title,link:"/".concat(wi.path),order:wi.meta.frontmatter.order||0,frontmatter:wi.meta.frontmatter}])}}return _i},{}),ni=Object.entries(oi).reduce(function(_i,wi){var Si=Jo(wi,2),So=Si[0],io=Si[1];return _i[So]=Object.values(io).sort(Hn),_i[So].forEach(function(Wi){return Wi.children.sort(Hn)}),_i},{});return Object.assign(ni,pn.sidebar)}),tr=Jo(Qn,1),Ir=tr[0];return Ir};function ns(ne){var ge={order:0,title:""},xe=Ri(ne),xt;try{for(xe.s();!(xt=xe.n()).done;){var pn=xt.value,Mn=Ri(pn.children),Hn;try{for(Mn.s();!(Hn=Mn.n()).done;){var Qn=Hn.value;"frontmatter"in Qn&&pickRouteSortMeta(ge,"nav",Qn.frontmatter)}}catch(tr){Mn.e(tr)}finally{Mn.f()}}}catch(tr){xe.e(tr)}finally{xe.f()}return ge}var yu=function(){var ge=Vl(),xe=useRouteDataComparer(),xt=useState(function(){var Hn=Object.entries(ge).sort(function(Qn,tr){return tr[0].split("/").length-Qn[0].split("/").length}).reduce(function(Qn,tr){var Ir=Jo(tr,2),oi=Ir[0],ni=Ir[1],_i=oi.replace(/\/[^/]+$/,"");if(_i){var wi;if((wi=Qn[_i])!==null&&wi!==void 0||(Qn[_i]=hl({path:_i,children:ge[_i]||[]},ns(ge[_i]||[]))),Qn[oi])Qn[oi].children.sort(xe),Qn[_i].children.push(Qn[oi]),delete Qn[oi];else{var Si;(Si=Qn[_i].children).push.apply(Si,Wo(ni))}}else ni.sort(xe),Qn[oi]=hl({path:oi,children:ni},ns(ni));return Qn},{});return Object.values(Hn)}),pn=Jo(xt,1),Mn=pn[0];return Mn},Fs=function(){var ge=(0,$i.b)(),xe=Vl(),xt=(0,ut.W)(),pn=xt._2_level_nav_available,Mn=(0,E.TH)(),Hn=Mn.pathname,Qn=Wc(),tr=la(Hn.slice(1),ge),Ir=tr?Hn.replace(tr,function(oi){return Os(oi,{is2LevelNav:pn,meta:Qn,locale:ge})}):Hn;return Ir?xe[Ir]:[]};function bs(ne){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},bs(ne)}function cs(ne){return fs(ne)||Dl(ne)||Za(ne)||Gl()}function Gl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dl(ne){if(typeof Symbol!="undefined"&&ne[Symbol.iterator]!=null||ne["@@iterator"]!=null)return Array.from(ne)}function fs(ne){if(Array.isArray(ne))return ru(ne)}function ws(ne,ge){return xu(ne)||Es(ne,ge)||Za(ne,ge)||ps()}function ps(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Za(ne,ge){if(ne){if(typeof ne=="string")return ru(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return ru(ne,ge)}}function ru(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function Es(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function xu(ne){if(Array.isArray(ne))return ne}function Yu(ne,ge){var xe=Object.keys(ne);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(ne);ge&&(xt=xt.filter(function(pn){return Object.getOwnPropertyDescriptor(ne,pn).enumerable})),xe.push.apply(xe,xt)}return xe}function ol(ne){for(var ge=1;ge<arguments.length;ge++){var xe=arguments[ge]!=null?arguments[ge]:{};ge%2?Yu(Object(xe),!0).forEach(function(xt){Sc(ne,xt,xe[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(xe)):Yu(Object(xe)).forEach(function(xt){Object.defineProperty(ne,xt,Object.getOwnPropertyDescriptor(xe,xt))})}return ne}function Sc(ne,ge,xe){return ge=Pu(ge),ge in ne?Object.defineProperty(ne,ge,{value:xe,enumerable:!0,configurable:!0,writable:!0}):ne[ge]=xe,ne}function Pu(ne){var ge=Lc(ne,"string");return bs(ge)==="symbol"?ge:String(ge)}function Lc(ne,ge){if(bs(ne)!=="object"||ne===null)return ne;var xe=ne[Symbol.toPrimitive];if(xe!==void 0){var xt=xe.call(ne,ge||"default");if(bs(xt)!=="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ge==="string"?String:Number)(ne)}function Ql(ne,ge,xe,xt){return ol({title:ne.title||ge[0].title||ge[0].children[0].title,order:ne.order||0,activePath:xe},xt?{link:xt}:{})}var ms=function(){var ge=(0,$i.b)(),xe=(0,gt.RX)(),xt=(0,ut.W)(),pn=xt.themeConfig,Mn=xt._2_level_nav_available,Hn=Vl(),Qn=(0,gt.M7)(),tr=(0,C.useState)(function(){var ni=[],_i;if(pn.nav&&("mode"in pn.nav&&typeof pn.nav.mode=="string"?(_i=pn.nav.mode,ni=(0,gt.m7)(pn.nav.value,ge)):"mode"in pn.nav||(ni=(0,gt.m7)(pn.nav,ge)),!_i||_i==="override"))return ni;var wi=Object.values(Object.entries(Hn).sort(function(Si,So){var io=ws(Si,1),Wi=io[0],xo=ws(So,1),Qi=xo[0];return Wi.split("/").length-Qi.split("/").length}).reduce(function(Si,So){var io=ws(So,2),Wi=io[0],xo=io[1],Qi=la(Wi.replace(/^\//,""),ge),Ho=Wi.replace(Qi,function(_r){return Os(_r,{is2LevelNav:Mn,locale:ge})}),La=Wi.length>Ho.length&&Mn,as=Object.values(xe).reduce(function(_r,ei){return ei.path.startsWith(Wi.slice(1))&&((0,gt.qu)(_r[0],"nav",ei.meta.frontmatter),La&&(0,gt.qu)(_r[1],"nav.second",ei.meta.frontmatter)),_r},[{},{}]),Ja=ws(as,2),Rs=Ja[0],Go=Ja[1];if(La){var Ti,Ei,fr;(Ti=Rs.title)!==null&&Ti!==void 0||(Rs.title=Ho.split("/").pop().replace(/^[a-z]/,function(_r){return _r.toUpperCase()}));var nr=(Ei=Si[Ho])!==null&&Ei!==void 0?Ei:Si[Ho]=Ql(Rs,xo,Ho);(fr=nr.children)!==null&&fr!==void 0||(nr.children=[]),nr.children.push(Ql(Go,xo,Wi,xo[0].children[0].link))}else Si[Wi]=Ql(Rs,xo,Wi,xo[0].children[0].link);return Si},{}));return wi.forEach(function(Si,So){var io;if(!Si.link&&((io=Si.children)===null||io===void 0?void 0:io.length)===1){var Wi=Si.children[0];wi[So]=ol(ol({},Wi),{},{title:(Si==null?void 0:Si.title)||Wi.title})}else Si.children&&Si.children.sort(Qn)}),wi.sort(Qn),_i==="prepend"?wi.unshift.apply(wi,cs(ni)):_i==="append"&&wi.push.apply(wi,cs(ni)),wi}),Ir=ws(tr,1),oi=Ir[0];return oi};function cu(ne){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},cu(ne)}function Tc(ne,ge){return du(ne)||kc(ne,ge)||bu(ne,ge)||Ic()}function Ic(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bu(ne,ge){if(ne){if(typeof ne=="string")return Dc(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return Dc(ne,ge)}}function Dc(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function kc(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function du(ne){if(Array.isArray(ne))return ne}function ql(ne,ge){if(!(ne instanceof ge))throw new TypeError("Cannot call a class as a function")}function wu(ne,ge){for(var xe=0;xe<ge.length;xe++){var xt=ge[xe];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(ne,Al(xt.key),xt)}}function Qs(ne,ge,xe){return ge&&wu(ne.prototype,ge),xe&&wu(ne,xe),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function Cl(ne,ge,xe){return ge=Al(ge),ge in ne?Object.defineProperty(ne,ge,{value:xe,enumerable:!0,configurable:!0,writable:!0}):ne[ge]=xe,ne}function Al(ne){var ge=eu(ne,"string");return cu(ge)==="symbol"?ge:String(ge)}function eu(ne,ge){if(cu(ne)!=="object"||ne===null)return ne;var xe=ne[Symbol.toPrimitive];if(xe!==void 0){var xt=xe.call(ne,ge||"default");if(cu(xt)!=="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ge==="string"?String:Number)(ne)}var Eu,Nc=function(){function ne(ge){var xe=this;ql(this,ne),Cl(this,"color",void 0),Cl(this,"prefersColor",void 0),Cl(this,"callbacks",[]),this.prefersColor=navigator.cookieEnabled&&localStorage.getItem(B.PREFERS_COLOR_LS_KEY)||ge.default,this.color=document.documentElement.getAttribute(B.PREFERS_COLOR_ATTR),["light","dark"].forEach(function(xt){var pn=xe.getColorMedia(xt),Mn=function(Qn){Qn.matches&&xe.prefersColor==="auto"&&(xe.color=xt,document.documentElement.setAttribute(B.PREFERS_COLOR_ATTR,xt),xe.applyCallbacks())};pn.addEventListener?pn.addEventListener("change",Mn):pn.addListener&&pn.addListener(Mn)})}return Qs(ne,[{key:"getColorMedia",value:function(xe){return window.matchMedia("(prefers-color-scheme: ".concat(xe,")"))}},{key:"isColorMode",value:function(xe){return this.getColorMedia(xe).matches}},{key:"applyCallbacks",value:function(){var xe=this;this.callbacks.forEach(function(xt){return xt({color:xe.color,prefersColor:xe.prefersColor})})}},{key:"listen",value:function(xe){this.callbacks.push(xe)}},{key:"unlisten",value:function(xe){this.callbacks.splice(this.callbacks.indexOf(xe),1)}},{key:"tryPrefersColor",value:function(xe){return navigator.cookieEnabled&&localStorage.setItem(B.PREFERS_COLOR_LS_KEY,xe),this.prefersColor=xe,this.color=xe==="auto"?this.isColorMode("dark")?"dark":"light":xe,document.documentElement.setAttribute(B.PREFERS_COLOR_ATTR,this.color),this.applyCallbacks(),xe}}]),ne}(),Mc=function(){var ge=(0,ut.W)(),xe=ge.themeConfig,xt=(0,C.useState)(),pn=Tc(xt,2),Mn=pn[0],Hn=pn[1],Qn=(0,C.useState)(),tr=Tc(Qn,2),Ir=tr[0],oi=tr[1],ni=(0,C.useCallback)(function(wi){Eu.tryPrefersColor(wi)},[]),_i=(0,C.useCallback)(function(wi){Hn(wi.color),oi(wi.prefersColor)},[]);return(0,C.useEffect)(function(){var wi;return(wi=Eu)!==null&&wi!==void 0||(Eu=new Nc({default:xe.prefersColor.default})),Eu.listen(_i),Hn(Eu.color),oi(Eu.prefersColor),function(){return Eu.unlisten(_i)}},[]),[Mn,Ir,ni]},fd=i(12454),Ad=i.n(fd);function jo(ne,ge){return Io(ne)||qs(ne,ge)||go(ne,ge)||aa()}function aa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function go(ne,ge){if(ne){if(typeof ne=="string")return Ui(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return Ui(ne,ge)}}function Ui(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function qs(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function Io(ne){if(Array.isArray(ne))return ne}var Nu=new Map,Cc=new Map,Mo={frontmatter:{},toc:[],texts:[]},Zc=["texts"];function gc(ne){var ge=ne.id;if(!Nu.get(ge)){var xe,xt=function(){var tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mo;return ne.meta&&(Object.keys(ne.meta).forEach(function(Ir){var oi,ni;(ni=(oi=tr)[Ir])!==null&&ni!==void 0||(oi[Ir]=ne.meta[Ir])}),tr.frontmatter=Ad()(tr.frontmatter,ne.meta.frontmatter,{arrayMerge:function(oi,ni){return ni}})),tr},pn=xt((0,It.lZ)(ne.id,{syncOnly:!0})),Mn=function(tr,Ir){if(Zc.includes(Ir)){if(!Cc.get(ge)){var oi=(0,It.lZ)(ne.id);oi&&Cc.set(ge,oi.then(function(_i){return Nu.set(ge,xt(_i)).get(ge)}))}var ni=Cc.get(ge);if(ni)throw ni}return tr[Ir]};(xe=pn.tabs)===null||xe===void 0||xe.forEach(function(Qn){Qn.meta=new Proxy(Qn.meta,{get:Mn})});var Hn=new Proxy(pn,{get:Mn});Nu.set(ge,Hn)}return Nu.get(ge)}var Pd=function(){var ge=(0,E.Qt)(),xe=ge.route,xt=(0,E.TH)(),pn=xt.pathname,Mn=(0,E.Ov)(),Hn=Mn.clientRoutes,Qn=(0,C.useCallback)(function(){var _i;if(xe.path===pn&&!("isLayout"in xe))_i=xe;else{var wi,Si=(wi=(0,E.fp)(Hn,pn))===null||wi===void 0?void 0:wi.pop();_i=Si==null?void 0:Si.route}return _i},[Hn.length,pn]),tr=(0,C.useState)(Qn),Ir=jo(tr,2),oi=Ir[0],ni=Ir[1];return(0,gt.LI)(function(){ni(Qn)},[Hn.length,pn]),oi},Wc=function(){var ge=Pd();return gc(ge)};function kl(ne){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},kl(ne)}var zt=["renderOpts","component","context"];function Ft(){"use strict";Ft=function(){return ne};var ne={},ge=Object.prototype,xe=ge.hasOwnProperty,xt=Object.defineProperty||function(fr,nr,_r){fr[nr]=_r.value},pn=typeof Symbol=="function"?Symbol:{},Mn=pn.iterator||"@@iterator",Hn=pn.asyncIterator||"@@asyncIterator",Qn=pn.toStringTag||"@@toStringTag";function tr(fr,nr,_r){return Object.defineProperty(fr,nr,{value:_r,enumerable:!0,configurable:!0,writable:!0}),fr[nr]}try{tr({},"")}catch(fr){tr=function(_r,ei,Xr){return _r[ei]=Xr}}function Ir(fr,nr,_r,ei){var Xr=nr&&nr.prototype instanceof _i?nr:_i,fi=Object.create(Xr.prototype),Vi=new Go(ei||[]);return xt(fi,"_invoke",{value:La(fr,_r,Vi)}),fi}function oi(fr,nr,_r){try{return{type:"normal",arg:fr.call(nr,_r)}}catch(ei){return{type:"throw",arg:ei}}}ne.wrap=Ir;var ni={};function _i(){}function wi(){}function Si(){}var So={};tr(So,Mn,function(){return this});var io=Object.getPrototypeOf,Wi=io&&io(io(Ti([])));Wi&&Wi!==ge&&xe.call(Wi,Mn)&&(So=Wi);var xo=Si.prototype=_i.prototype=Object.create(So);function Qi(fr){["next","throw","return"].forEach(function(nr){tr(fr,nr,function(_r){return this._invoke(nr,_r)})})}function Ho(fr,nr){function _r(Xr,fi,Vi,vo){var Ro=oi(fr[Xr],fr,fi);if(Ro.type!=="throw"){var _a=Ro.arg,ca=_a.value;return ca&&kl(ca)=="object"&&xe.call(ca,"__await")?nr.resolve(ca.__await).then(function(ta){_r("next",ta,Vi,vo)},function(ta){_r("throw",ta,Vi,vo)}):nr.resolve(ca).then(function(ta){_a.value=ta,Vi(_a)},function(ta){return _r("throw",ta,Vi,vo)})}vo(Ro.arg)}var ei;xt(this,"_invoke",{value:function(fi,Vi){function vo(){return new nr(function(Ro,_a){_r(fi,Vi,Ro,_a)})}return ei=ei?ei.then(vo,vo):vo()}})}function La(fr,nr,_r){var ei="suspendedStart";return function(Xr,fi){if(ei==="executing")throw new Error("Generator is already running");if(ei==="completed"){if(Xr==="throw")throw fi;return Ei()}for(_r.method=Xr,_r.arg=fi;;){var Vi=_r.delegate;if(Vi){var vo=as(Vi,_r);if(vo){if(vo===ni)continue;return vo}}if(_r.method==="next")_r.sent=_r._sent=_r.arg;else if(_r.method==="throw"){if(ei==="suspendedStart")throw ei="completed",_r.arg;_r.dispatchException(_r.arg)}else _r.method==="return"&&_r.abrupt("return",_r.arg);ei="executing";var Ro=oi(fr,nr,_r);if(Ro.type==="normal"){if(ei=_r.done?"completed":"suspendedYield",Ro.arg===ni)continue;return{value:Ro.arg,done:_r.done}}Ro.type==="throw"&&(ei="completed",_r.method="throw",_r.arg=Ro.arg)}}}function as(fr,nr){var _r=nr.method,ei=fr.iterator[_r];if(ei===void 0)return nr.delegate=null,_r==="throw"&&fr.iterator.return&&(nr.method="return",nr.arg=void 0,as(fr,nr),nr.method==="throw")||_r!=="return"&&(nr.method="throw",nr.arg=new TypeError("The iterator does not provide a '"+_r+"' method")),ni;var Xr=oi(ei,fr.iterator,nr.arg);if(Xr.type==="throw")return nr.method="throw",nr.arg=Xr.arg,nr.delegate=null,ni;var fi=Xr.arg;return fi?fi.done?(nr[fr.resultName]=fi.value,nr.next=fr.nextLoc,nr.method!=="return"&&(nr.method="next",nr.arg=void 0),nr.delegate=null,ni):fi:(nr.method="throw",nr.arg=new TypeError("iterator result is not an object"),nr.delegate=null,ni)}function Ja(fr){var nr={tryLoc:fr[0]};1 in fr&&(nr.catchLoc=fr[1]),2 in fr&&(nr.finallyLoc=fr[2],nr.afterLoc=fr[3]),this.tryEntries.push(nr)}function Rs(fr){var nr=fr.completion||{};nr.type="normal",delete nr.arg,fr.completion=nr}function Go(fr){this.tryEntries=[{tryLoc:"root"}],fr.forEach(Ja,this),this.reset(!0)}function Ti(fr){if(fr){var nr=fr[Mn];if(nr)return nr.call(fr);if(typeof fr.next=="function")return fr;if(!isNaN(fr.length)){var _r=-1,ei=function Xr(){for(;++_r<fr.length;)if(xe.call(fr,_r))return Xr.value=fr[_r],Xr.done=!1,Xr;return Xr.value=void 0,Xr.done=!0,Xr};return ei.next=ei}}return{next:Ei}}function Ei(){return{value:void 0,done:!0}}return wi.prototype=Si,xt(xo,"constructor",{value:Si,configurable:!0}),xt(Si,"constructor",{value:wi,configurable:!0}),wi.displayName=tr(Si,Qn,"GeneratorFunction"),ne.isGeneratorFunction=function(fr){var nr=typeof fr=="function"&&fr.constructor;return!!nr&&(nr===wi||(nr.displayName||nr.name)==="GeneratorFunction")},ne.mark=function(fr){return Object.setPrototypeOf?Object.setPrototypeOf(fr,Si):(fr.__proto__=Si,tr(fr,Qn,"GeneratorFunction")),fr.prototype=Object.create(xo),fr},ne.awrap=function(fr){return{__await:fr}},Qi(Ho.prototype),tr(Ho.prototype,Hn,function(){return this}),ne.AsyncIterator=Ho,ne.async=function(fr,nr,_r,ei,Xr){Xr===void 0&&(Xr=Promise);var fi=new Ho(Ir(fr,nr,_r,ei),Xr);return ne.isGeneratorFunction(nr)?fi:fi.next().then(function(Vi){return Vi.done?Vi.value:fi.next()})},Qi(xo),tr(xo,Qn,"Generator"),tr(xo,Mn,function(){return this}),tr(xo,"toString",function(){return"[object Generator]"}),ne.keys=function(fr){var nr=Object(fr),_r=[];for(var ei in nr)_r.push(ei);return _r.reverse(),function Xr(){for(;_r.length;){var fi=_r.pop();if(fi in nr)return Xr.value=fi,Xr.done=!1,Xr}return Xr.done=!0,Xr}},ne.values=Ti,Go.prototype={constructor:Go,reset:function(nr){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Rs),!nr)for(var _r in this)_r.charAt(0)==="t"&&xe.call(this,_r)&&!isNaN(+_r.slice(1))&&(this[_r]=void 0)},stop:function(){this.done=!0;var nr=this.tryEntries[0].completion;if(nr.type==="throw")throw nr.arg;return this.rval},dispatchException:function(nr){if(this.done)throw nr;var _r=this;function ei(_a,ca){return Vi.type="throw",Vi.arg=nr,_r.next=_a,ca&&(_r.method="next",_r.arg=void 0),!!ca}for(var Xr=this.tryEntries.length-1;Xr>=0;--Xr){var fi=this.tryEntries[Xr],Vi=fi.completion;if(fi.tryLoc==="root")return ei("end");if(fi.tryLoc<=this.prev){var vo=xe.call(fi,"catchLoc"),Ro=xe.call(fi,"finallyLoc");if(vo&&Ro){if(this.prev<fi.catchLoc)return ei(fi.catchLoc,!0);if(this.prev<fi.finallyLoc)return ei(fi.finallyLoc)}else if(vo){if(this.prev<fi.catchLoc)return ei(fi.catchLoc,!0)}else{if(!Ro)throw new Error("try statement without catch or finally");if(this.prev<fi.finallyLoc)return ei(fi.finallyLoc)}}}},abrupt:function(nr,_r){for(var ei=this.tryEntries.length-1;ei>=0;--ei){var Xr=this.tryEntries[ei];if(Xr.tryLoc<=this.prev&&xe.call(Xr,"finallyLoc")&&this.prev<Xr.finallyLoc){var fi=Xr;break}}fi&&(nr==="break"||nr==="continue")&&fi.tryLoc<=_r&&_r<=fi.finallyLoc&&(fi=null);var Vi=fi?fi.completion:{};return Vi.type=nr,Vi.arg=_r,fi?(this.method="next",this.next=fi.finallyLoc,ni):this.complete(Vi)},complete:function(nr,_r){if(nr.type==="throw")throw nr.arg;return nr.type==="break"||nr.type==="continue"?this.next=nr.arg:nr.type==="return"?(this.rval=this.arg=nr.arg,this.method="return",this.next="end"):nr.type==="normal"&&_r&&(this.next=_r),ni},finish:function(nr){for(var _r=this.tryEntries.length-1;_r>=0;--_r){var ei=this.tryEntries[_r];if(ei.finallyLoc===nr)return this.complete(ei.completion,ei.afterLoc),Rs(ei),ni}},catch:function(nr){for(var _r=this.tryEntries.length-1;_r>=0;--_r){var ei=this.tryEntries[_r];if(ei.tryLoc===nr){var Xr=ei.completion;if(Xr.type==="throw"){var fi=Xr.arg;Rs(ei)}return fi}}throw new Error("illegal catch attempt")},delegateYield:function(nr,_r,ei){return this.delegate={iterator:Ti(nr),resultName:_r,nextLoc:ei},this.method==="next"&&(this.arg=void 0),ni}},ne}function Tn(ne,ge){if(ne==null)return{};var xe=vr(ne,ge),xt,pn;if(Object.getOwnPropertySymbols){var Mn=Object.getOwnPropertySymbols(ne);for(pn=0;pn<Mn.length;pn++)xt=Mn[pn],!(ge.indexOf(xt)>=0)&&Object.prototype.propertyIsEnumerable.call(ne,xt)&&(xe[xt]=ne[xt])}return xe}function vr(ne,ge){if(ne==null)return{};var xe={},xt=Object.keys(ne),pn,Mn;for(Mn=0;Mn<xt.length;Mn++)pn=xt[Mn],!(ge.indexOf(pn)>=0)&&(xe[pn]=ne[pn]);return xe}function cr(ne,ge){var xe=Object.keys(ne);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(ne);ge&&(xt=xt.filter(function(pn){return Object.getOwnPropertyDescriptor(ne,pn).enumerable})),xe.push.apply(xe,xt)}return xe}function Nr(ne){for(var ge=1;ge<arguments.length;ge++){var xe=arguments[ge]!=null?arguments[ge]:{};ge%2?cr(Object(xe),!0).forEach(function(xt){Lr(ne,xt,xe[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(xe)):cr(Object(xe)).forEach(function(xt){Object.defineProperty(ne,xt,Object.getOwnPropertyDescriptor(xe,xt))})}return ne}function Lr(ne,ge,xe){return ge=Qr(ge),ge in ne?Object.defineProperty(ne,ge,{value:xe,enumerable:!0,configurable:!0,writable:!0}):ne[ge]=xe,ne}function Qr(ne){var ge=ui(ne,"string");return kl(ge)==="symbol"?ge:String(ge)}function ui(ne,ge){if(kl(ne)!=="object"||ne===null)return ne;var xe=ne[Symbol.toPrimitive];if(xe!==void 0){var xt=xe.call(ne,ge||"default");if(kl(xt)!=="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ge==="string"?String:Number)(ne)}function Ii(ne,ge,xe,xt,pn,Mn,Hn){try{var Qn=ne[Mn](Hn),tr=Qn.value}catch(Ir){xe(Ir);return}Qn.done?ge(tr):Promise.resolve(tr).then(xt,pn)}function Ur(ne){return function(){var ge=this,xe=arguments;return new Promise(function(xt,pn){var Mn=ne.apply(ge,xe);function Hn(tr){Ii(Mn,xt,pn,Hn,Qn,"next",tr)}function Qn(tr){Ii(Mn,xt,pn,Hn,Qn,"throw",tr)}Hn(void 0)})}}function Ai(ne,ge){return mo(ne)||Lo(ne,ge)||Ji(ne,ge)||Zi()}function Zi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ji(ne,ge){if(ne){if(typeof ne=="string")return no(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return no(ne,ge)}}function no(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function Lo(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function mo(ne){if(Array.isArray(ne))return ne}function Po(){var ne=(0,gt.RX)(),ge=(0,C.useState)(null),xe=Ai(ge,2),xt=xe[0],pn=xe[1],Mn=(0,C.useRef)(!1),Hn=(0,C.useCallback)(Ur(Ft().mark(function Qn(){var tr,Ir,oi;return Ft().wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:if(!(!Mn.current&&!xt)){_i.next=12;break}return _i.next=3,(0,It.TR)();case 3:return tr=_i.sent,_i.next=6,(0,It.EQ)();case 6:Ir=_i.sent,oi={},Object.keys(ne).forEach(function(wi){oi[wi]=Nr(Nr({},ne[wi]),{},{meta:tr[wi]})}),Object.entries(Ir).forEach(function(wi){var Si=Ai(wi,2),So=Si[0],io=Si[1],Wi=io.renderOpts,xo=io.component,Qi=io.context,Ho=Tn(io,zt);Ir[So]=Ho}),pn([oi,Ir]),Mn.current=!1;case 12:case"end":return _i.stop()}},Qn)})),[xt]);return[xt,Hn]}function I(ne,ge){return me(ne)||W(ne,ge)||f(ne,ge)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(ne,ge){if(ne){if(typeof ne=="string")return T(ne,ge);var xe=Object.prototype.toString.call(ne).slice(8,-1);if(xe==="Object"&&ne.constructor&&(xe=ne.constructor.name),xe==="Map"||xe==="Set")return Array.from(ne);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return T(ne,ge)}}function T(ne,ge){(ge==null||ge>ne.length)&&(ge=ne.length);for(var xe=0,xt=new Array(ge);xe<ge;xe++)xt[xe]=ne[xe];return xt}function W(ne,ge){var xe=ne==null?null:typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(xe!=null){var xt,pn,Mn,Hn,Qn=[],tr=!0,Ir=!1;try{if(Mn=(xe=xe.call(ne)).next,ge===0){if(Object(xe)!==xe)return;tr=!1}else for(;!(tr=(xt=Mn.call(xe)).done)&&(Qn.push(xt.value),Qn.length!==ge);tr=!0);}catch(oi){Ir=!0,pn=oi}finally{try{if(!tr&&xe.return!=null&&(Hn=xe.return(),Object(Hn)!==Hn))return}finally{if(Ir)throw pn}}return Qn}}function me(ne){if(Array.isArray(ne))return ne}var ze;typeof window!="undefined"&&(ze=new Worker(URL.createObjectURL(new Blob(['"use strict";(()=>{var P=Object.create;var I=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var O=(e,t,i)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,M=(e,t)=>{for(var i in t||(t={}))E.call(t,i)&&O(e,i,t[i]);if(R)for(var i of R(t))L.call(t,i)&&O(e,i,t[i]);return e};var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var N=(e,t,i,h)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of D(t))!E.call(e,a)&&a!==i&&I(e,a,{get:()=>t[a],enumerable:!(h=z(t,a))||h.enumerable});return e};var W=(e,t,i)=>(i=e!=null?P(B(e)):{},N(t||!e||!e.__esModule?I(i,"default",{value:e,enumerable:!0}):i,e));var j=F((K,w)=>{w.exports=function(e){var t={};function i(h){if(t[h])return t[h].exports;var a=t[h]={exports:{},id:h,loaded:!1};return e[h].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=i(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return h.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return h.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return h.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return h.findChunks}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.findAll=function(s){var n=s.autoEscape,g=s.caseSensitive,f=g===void 0?!1:g,p=s.findChunks,u=p===void 0?a:p,c=s.sanitize,v=s.searchWords,T=s.textToHighlight;return l({chunksToHighlight:h({chunks:u({autoEscape:n,caseSensitive:f,sanitize:c,searchWords:v,textToHighlight:T})}),totalLength:T?T.length:0})},h=t.combineChunks=function(s){var n=s.chunks;return n=n.sort(function(g,f){return g.start-f.start}).reduce(function(g,f){if(g.length===0)return[f];var p=g.pop();if(f.start<=p.end){var u=Math.max(p.end,f.end);g.push({highlight:!1,start:p.start,end:u})}else g.push(p,f);return g},[]),n},a=function(s){var n=s.autoEscape,g=s.caseSensitive,f=s.sanitize,p=f===void 0?d:f,u=s.searchWords,c=s.textToHighlight;return c=p(c),u.filter(function(v){return v}).reduce(function(v,T){T=p(T),n&&(T=r(T));for(var m=new RegExp(T,g?"g":"gi"),x=void 0;x=m.exec(c);){var S=x.index,$=m.lastIndex;$>S&&v.push({highlight:!1,start:S,end:$}),x.index===m.lastIndex&&m.lastIndex++}return v},[])};t.findChunks=a;var l=t.fillInChunks=function(s){var n=s.chunksToHighlight,g=s.totalLength,f=[],p=function(v,T,m){T-v>0&&f.push({start:v,end:T,highlight:m})};if(n.length===0)p(0,g,!1);else{var u=0;n.forEach(function(c){p(u,c.start,!1),p(c.start,c.end,!0),u=c.end}),p(u,g,!1)}return f};function d(o){return o}function r(o){return o.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,"\\\\$&")}}])});var C=W(j());var H="tab";function k(e,t,i,h,a){let l=a!==void 0;return h.reduce((r,o)=>(o.tocIndex===a&&(r[o.paraId]=(r[o.paraId]||"").concat(o.value)),r),[]).filter(Boolean).length||l?{rawTitle:e,title:t,link:i,paragraphs:h.reduce((r,o)=>{var s,n;return o.tocIndex===a&&((n=r[s=o.paraId])!=null||(r[s]=""),r[o.paraId]+=o.value),r},[]).filter(Boolean)}:null}function y(e){return[e.title,e.subtitle].filter(Boolean).join(" ")}function _(e,t,i){let h=[],a=Object.values(t).reduce((l,d)=>{var r,o;return d.asset&&((o=l[r=d.routeId])!=null||(l[r]=[]),l[d.routeId].push(d)),l},{});return Object.values(e).forEach(l=>{var d;if("meta"in l&&!("isLayout"in l)){let r=l.meta,o=l.path.replace(/^([^/])/,"/$1")||"/",s=i.find(u=>o===u.link||o.startsWith(`${u.activePath}/`)),n=(a[l.id]||[]).map(u=>{var c;return(c=u.asset)==null?void 0:c.id}),g=k("",y(r.frontmatter),o,r.texts),f=r.toc.reduce((u,c,v)=>{if(!n.includes(c.id)&&c.depth>=1){let T=y(r.frontmatter);c.depth!==1&&(T=`${T} - ${c.title}`),u.push(k(c.title,T,`${o}#${c.id}`,r.texts,v))}return u},[]),p=(r.tabs||[]).reduce((u,{key:c,meta:v})=>{let T=k("",`${y(r.frontmatter)} - ${v.frontmatter.title}`,`${o}?${H}=${c}`,v.texts);return T&&u.push(T),u.push(...v.toc.map((m,x)=>k(m.title,`${y(r.frontmatter)} - ${v.frontmatter.title} - ${m.title}`,`${o}?${H}=${c}#${m.id}`,v.texts,x))),u},[]);h.push({navTitle:s==null?void 0:s.title,navOrder:s?i.indexOf(s):1/0,title:y(r.frontmatter),link:o,sections:[...g?[g]:[],...f,...p],demos:((d=a[l.id])==null?void 0:d.map(u=>({link:`${o}#${u.asset.id}`,rawTitle:u.asset.title||"",title:u.asset.title||y(r.frontmatter),description:u.asset.description||"",keywords:u.asset.keywords||[]})))||[]})}}),h}function b(e="",t,i=1){let h=(0,C.findAll)({textToHighlight:e,searchWords:t,autoEscape:!0}),a={};return[h.map(({start:l,end:d,highlight:r},o)=>{let s={text:e.slice(l,d)};return o===0&&!r&&h.length>1&&s.text.length>20&&(s.text=`...${s.text.slice(-20)}`),r&&(s.highlighted=!0,a[t.find(n=>s.text.includes(n))]=i),s}),a]}function Y(e,t){let i=t.split(" "),h=new RegExp(t.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&").replace(/\\s+/g,"|"),"i"),a={};return e.forEach(l=>{var o,s;let d=l.title,r=[];if(l.sections.forEach(n=>{for(let g of n.paragraphs)if(h.test(g)){let[f,p]=b(n.title,i,10),[u,c]=b(g,i);r.push({type:"content",link:n.link,priority:Object.values(M(M({},c),p)).reduce((v,T)=>v+T,0),highlightTitleTexts:f,highlightTexts:u,pageTitle:d});return}if(h.test(n.rawTitle)&&!h.test(l.title)){let[g,f]=b(n.title,i,10);r.push({type:"title",link:n.link,priority:Object.values(f).reduce((p,u)=>p+u,0),highlightTitleTexts:g,highlightTexts:b(n.paragraphs[0]||"",i)[0],pageTitle:d})}}),l.demos.forEach(n=>{if(h.test(n.rawTitle)||h.test(n.description)){let[g,f]=b(n.title,i,10),[p,u]=b(n.description,i);r.push({type:"demo",link:n.link,priority:Object.values(M(M({},u),f)).reduce((c,v)=>c+v,0),highlightTitleTexts:g,highlightTexts:p,pageTitle:d})}}),h.test(l.title)){let[n,g]=b(l.title,i,100);r.push({type:"page",link:l.link,priority:Object.values(g).reduce((f,p)=>f+p,0),highlightTitleTexts:n,highlightTexts:b(((o=l.sections[0])==null?void 0:o.paragraphs[0])||"",i)[0],pageTitle:d})}if(r.length){let n=l.navTitle||"$ROOT";(s=a[n])!=null||(a[n]={title:l.navTitle,priority:l.navOrder*1e3,hints:[]}),a[n].hints.push(...r)}}),Object.values(a).forEach(({hints:l})=>{l.sort((d,r)=>r.priority-d.priority)}),Object.values(a).sort((l,d)=>d.priority-l.priority)}var A;self.onmessage=({data:e})=>{switch(e.action){case"generate-metadata":A=_(e.args.routes,e.args.demos,e.args.nav);break;case"get-search-result":self.postMessage(Y(A,e.args.keywords));break;default:}};})();\n'],{type:"application/javascript"}))));var tt=function(){var ge=(0,C.useRef)(),xe=(0,C.useState)(!1),xt=I(xe,2),pn=xt[0],Mn=xt[1],Hn=(0,C.useState)(""),Qn=I(Hn,2),tr=Qn[0],Ir=Qn[1],oi=ms(),ni=(0,C.useState)([]),_i=I(ni,2),wi=_i[0],Si=_i[1],So=Po(),io=I(So,2),Wi=io[0],xo=io[1],Qi=(0,C.useCallback)(function(as){xo(),Mn(!0),Ir(as)},[]),Ho=Wi==null?void 0:Wi[0],La=Wi==null?void 0:Wi[1];return(0,C.useEffect)(function(){ze.onmessage=function(as){Si(as.data),Mn(!1)}},[]),(0,C.useEffect)(function(){!Ho||!La||ze.postMessage({action:"generate-metadata",args:{routes:JSON.parse(JSON.stringify(Ho)),nav:oi,demos:La}})},[Ho,La,oi]),(0,C.useEffect)(function(){if(Ho){var as=tr.trim();as?(clearTimeout(ge.current),ge.current=window.setTimeout(function(){ze.postMessage({action:"get-search-result",args:{keywords:as}})},200)):Si([])}},[tr,Ho]),{keywords:tr,setKeywords:Qi,result:wi,loading:pn,load:xo}},It=i(59130)},94726:function(H,Q,i){"use strict";i.d(Q,{k:function(){return E},s:function(){return M}});var E=[{id:"zh-CN",name:"\u4E2D\u6587",base:"/"}],M={"en-US":{"header.search.placeholder":"Type keywords...","header.color.mode.light":"Light Mode","header.color.mode.dark":"Dark Mode","header.color.mode.auto":"Follow System","header.social.github":"GitHub","header.social.weibo":"Weibo","header.social.twitter":"Twitter","header.social.x":"X","header.social.gitlab":"GitLab","header.social.facebook":"Facebook","header.social.zhihu":"Zhihu","header.social.yuque":"Yuque","header.social.linkedin":"Linkedin","previewer.actions.code.expand":"Show Code","previewer.actions.code.shrink":"Hide Code","previewer.actions.code.editable":"Edit code with real-time preview","previewer.actions.code.readonly":"Only index file is editable","previewer.actions.sketch":"Copy to Sketch app","previewer.actions.sketch.group":"Copy as Sketch Group","previewer.actions.sketch.symbol":"Copy as Sketch Symbol","previewer.actions.sketch.divider":"------------------------","previewer.actions.sketch.guide":"How to paste to Sketch?","previewer.actions.codesandbox":"Open in CodeSandbox","previewer.actions.codepen":"Open in CodePen (Not implemented)","previewer.actions.stackblitz":"Open in StackBlitz","previewer.actions.separate":"Open in separate page","404.title":"PAGE NOT FOUND","404.back":"Back to homepage","api.component.name":"Name","api.component.description":"Description","api.component.type":"Type","api.component.default":"Default","api.component.required":"(required)","api.component.release.alpha":"Alpha","api.component.release.beta":"Beta","api.component.release.experimental":"Experimental","api.component.release.deprecated":"Deprecated","api.component.unavailable":"Properties definition is resolving, wait a moment...","api.component.loading":"Properties definition is resolving, wait a moment...","api.component.not.found":"Properties definition not found for {id} component","content.tabs.default":"Doc","content.footer.last.updated":"Last updated: ","content.footer.actions.edit":"Improve this documentation","content.footer.actions.previous":"PREV","content.footer.actions.next":"NEXT","search.not.found":"No content was found","search.loading":"Loading...","layout.sidebar.btn":"Sidebar"},"zh-CN":{"header.search.placeholder":"\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22...","header.color.mode.light":"\u4EAE\u8272\u6A21\u5F0F","header.color.mode.dark":"\u6697\u8272\u6A21\u5F0F","header.color.mode.auto":"\u8DDF\u968F\u7CFB\u7EDF","header.social.github":"GitHub","header.social.weibo":"\u5FAE\u535A","header.social.twitter":"Twitter","header.social.x":"X","header.social.gitlab":"GitLab","header.social.facebook":"Facebook","header.social.zhihu":"\u77E5\u4E4E","header.social.yuque":"\u8BED\u96C0","header.social.linkedin":"Linkedin","previewer.actions.code.expand":"\u5C55\u5F00\u4EE3\u7801","previewer.actions.code.shrink":"\u6536\u8D77\u4EE3\u7801","previewer.actions.code.editable":"\u7F16\u8F91\u4EE3\u7801\u53EF\u5B9E\u65F6\u9884\u89C8","previewer.actions.code.readonly":"\u4EC5 index \u53EF\u7F16\u8F91","previewer.actions.codesandbox":"\u5728 CodeSandbox \u4E2D\u6253\u5F00","previewer.actions.sketch":"\u62F7\u8D1D\u5230 Sketch","previewer.actions.sketch.group":"\u62F7\u8D1D\u4E3A Sketch Group","previewer.actions.sketch.symbol":"\u62F7\u8D1D\u4E3A Sketch Symbol","previewer.actions.sketch.divider":"----------------------","previewer.actions.sketch.guide":"\u5982\u4F55\u7C98\u8D34\u5230 SKetch\uFF1F","previewer.actions.stackblitz":"\u5728 StackBlitz \u4E2D\u6253\u5F00","previewer.actions.separate":"\u5728\u72EC\u7ACB\u9875\u9762\u4E2D\u6253\u5F00","404.title":"\u9875\u9762\u672A\u627E\u5230","404.back":"\u8FD4\u56DE\u9996\u9875","api.component.name":"\u5C5E\u6027\u540D","api.component.description":"\u63CF\u8FF0","api.component.type":"\u7C7B\u578B","api.component.default":"\u9ED8\u8BA4\u503C","api.component.required":"(\u5FC5\u9009)","api.component.release.alpha":"Alpha","api.component.release.beta":"Beta","api.component.release.experimental":"\u5B9E\u9A8C\u6027","api.component.release.deprecated":"\u5E9F\u5F03","api.component.unavailable":"\u5C5E\u6027\u5B9A\u4E49\u6B63\u5728\u89E3\u6790\u4E2D\uFF0C\u7A0D\u7B49\u7247\u523B...","api.component.loading":"\u5C5E\u6027\u5B9A\u4E49\u6B63\u5728\u89E3\u6790\u4E2D\uFF0C\u7A0D\u7B49\u7247\u523B...","api.component.not.found":"\u672A\u627E\u5230 {id} \u7EC4\u4EF6\u7684\u5C5E\u6027\u5B9A\u4E49","content.tabs.default":"\u6587\u6863","content.footer.last.updated":"\u6700\u540E\u66F4\u65B0\u65F6\u95F4\uFF1A","content.footer.actions.edit":"\u5E2E\u52A9\u6539\u8FDB\u6B64\u6587\u6863","content.footer.actions.previous":"\u4E0A\u4E00\u7BC7","content.footer.actions.next":"\u4E0B\u4E00\u7BC7","search.not.found":"\u672A\u627E\u5230\u76F8\u5173\u5185\u5BB9","search.loading":"\u52A0\u8F7D\u4E2D...","layout.sidebar.btn":"\u4FA7\u8FB9\u83DC\u5355"}}},59130:function(H,Q,i){"use strict";i.d(Q,{EQ:function(){return Do},TR:function(){return tl},lZ:function(){return xs},FO:function(){return Oo}});var E=i(48305),M=i.n(E),C=i(90228),n=i.n(C),j=i(26068),$=i.n(j),U=i(87999),Y=i.n(U),te=i(20411);const X=[{id:"\u9F20\u6807\u4F4D\u7F6E\u63A7\u4EF6",depth:2,title:"\u9F20\u6807\u4F4D\u7F6E\u63A7\u4EF6"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u4F4D\u7F6E",depth:3,title:"2.\u8BBE\u7F6E\u4F4D\u7F6E"},{id:"3\u8BBE\u7F6E\u7CBE\u5EA6",depth:3,title:"3.\u8BBE\u7F6E\u7CBE\u5EA6"},{id:"api",depth:2,title:"API"},{id:"mousepositioncontrol-api",depth:3,title:"MousePositionControl API"}],B={title:"\u9F20\u6807\u4F4D\u7F6E\u63A7\u4EF6",toc:"content",filename:"docs/components/mousePositionControl.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u63A7\u4EF6",order:2},order:4,description:"\u9F20\u6807\u4F4D\u7F6E\u63A7\u4EF6\u53EF\u4EE5\u7528\u6765\u663E\u793A\u5F53\u524D\u9F20\u6807\u6240\u5728\u7684\u5730\u7406\u4F4D\u7F6E\u3002"},K={ids:["docs-components-mouse-position-control-demo-demo1","docs-components-mouse-position-control-demo-demo2","docs-components-mouse-position-control-demo-demo3"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,63876))};var de=i(95362);const he=[{id:"\u51E0\u4F55\u8BA1\u7B97",depth:2,title:"\u51E0\u4F55\u8BA1\u7B97"},{id:"distance",depth:3,title:"distance"},{id:"pointtolinedistance",depth:3,title:"pointToLineDistance"},{id:"length",depth:3,title:"length"},{id:"area",depth:3,title:"area"}],J={title:"\u51E0\u4F55\u8BA1\u7B97",toc:"content",filename:"docs/components/geometryCalculation.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u5DE5\u5177",order:5},order:1,description:"\u51E0\u4F55\u8BA1\u7B97\u662F\u7528\u6765\u8BA1\u7B97\u7A7A\u95F4\u8981\u7D20\u7684\u8DDD\u79BB\u3001\u957F\u5EA6\u548C\u9762\u79EF\u3002"},ae={ids:["docs-components-geometry-calculation-demo-demo1","docs-components-geometry-calculation-demo-demo2","docs-components-geometry-calculation-demo-demo3","docs-components-geometry-calculation-demo-demo4"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,25534))};var se=i(75412);const Ee=[{id:"\u7A7A\u95F4\u8BA1\u7B97",depth:2,title:"\u7A7A\u95F4\u8BA1\u7B97"},{id:"nearestpointonline",depth:3,title:"nearestPointOnLine"},{id:"pointalongline",depth:3,title:"pointAlongLine"},{id:"buffer",depth:3,title:"buffer"},{id:"intersection",depth:3,title:"intersection"},{id:"union",depth:3,title:"union"},{id:"difference",depth:3,title:"difference"},{id:"bbox",depth:3,title:"bbox"},{id:"bboxpolygon",depth:3,title:"bboxPolygon"},{id:"centroid",depth:3,title:"centroid"},{id:"center",depth:3,title:"center"}],Le={title:"\u7A7A\u95F4\u8BA1\u7B97",toc:"content",filename:"docs/components/spatialCalculation.md",lastUpdated:1742916172e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u5DE5\u5177",order:5},order:2,description:"\u7A7A\u95F4\u8BA1\u7B97\u662F\u901A\u8FC7\u8981\u7D20\u7684\u7A7A\u95F4\u5173\u7CFB\u6765\u8BA1\u7B97\u7A7A\u95F4\u8981\u7D20\u7684\u8FC7\u7A0B\u3002"},ke={ids:["docs-components-spatial-calculation-demo-demo1","docs-components-spatial-calculation-demo-demo2","docs-components-spatial-calculation-demo-demo3","docs-components-spatial-calculation-demo-demo4","docs-components-spatial-calculation-demo-demo5","docs-components-spatial-calculation-demo-demo6","docs-components-spatial-calculation-demo-demo7","docs-components-spatial-calculation-demo-demo8","docs-components-spatial-calculation-demo-demo9","docs-components-spatial-calculation-demo-demo10"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,32915))};var ye=i(20780);const Se=[{id:"\u5168\u5C4F\u63A7\u4EF6",depth:2,title:"\u5168\u5C4F\u63A7\u4EF6"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u4F4D\u7F6E",depth:3,title:"2.\u8BBE\u7F6E\u4F4D\u7F6E"},{id:"3\u8BBE\u7F6E\u5168\u5C4F-dom-\u5143\u7D20",depth:3,title:"3.\u8BBE\u7F6E\u5168\u5C4F dom \u5143\u7D20"},{id:"api",depth:2,title:"API"},{id:"fullscreencontrol-api",depth:3,title:"FullscreenControl API"}],be={title:"\u5168\u5C4F\u63A7\u4EF6",toc:"content",filename:"docs/components/fullscreenControl.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u63A7\u4EF6",order:2},order:3,description:"\u5168\u5C4F\u63A7\u4EF6\u53EF\u4EE5\u7528\u6765\u5207\u6362\u5730\u56FE\u7684\u5168\u5C4F\u663E\u793A\u72B6\u6001\u3002"},Ue={ids:["docs-components-fullscreen-control-demo-demo1","docs-components-fullscreen-control-demo-demo2","docs-components-fullscreen-control-demo-demo3"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,18734))};var qe=i(95087);const je=[{id:"\u5BFC\u822A\u63A7\u4EF6",depth:2,title:"\u5BFC\u822A\u63A7\u4EF6"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u4F4D\u7F6E",depth:3,title:"2.\u8BBE\u7F6E\u4F4D\u7F6E"},{id:"3\u663E\u793A\u8BBE\u7F6E",depth:3,title:"3.\u663E\u793A\u8BBE\u7F6E"},{id:"4\u6307\u9488\u63A7\u5236\u4FEF\u4EF0\u89D2\u5EA6",depth:3,title:"4.\u6307\u9488\u63A7\u5236\u4FEF\u4EF0\u89D2\u5EA6"},{id:"api",depth:2,title:"API"},{id:"navigationcontrol-api",depth:3,title:"NavigationControl API"}],nt={title:"\u5BFC\u822A\u63A7\u4EF6",toc:"content",filename:"docs/components/navigationControl.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u63A7\u4EF6",order:2},order:2,description:"\u5BFC\u822A\u63A7\u4EF6\u53EF\u4EE5\u7528\u6765\u63A7\u5236\u5730\u56FE\u7684\u7F29\u653E\u7EA7\u522B\u3001\u4FEF\u4EF0\u89D2\u5EA6\u548C\u65CB\u8F6C\u89D2\u5EA6\u3002"},Ct={ids:["docs-components-navigation-control-demo-demo1","docs-components-navigation-control-demo-demo2","docs-components-navigation-control-demo-demo3","docs-components-navigation-control-demo-demo4"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,13413))};var ft=i(64889);const Et=[{id:"\u80CC\u666F\u56FE\u5C42",depth:2,title:"\u80CC\u666F\u56FE\u5C42"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"3\u8BBE\u7F6E\u56FE\u7247",depth:3,title:"3.\u8BBE\u7F6E\u56FE\u7247"},{id:"api",depth:2,title:"API"},{id:"backgroundlayer-api",depth:3,title:"BackgroundLayer API"}],yt={title:"\u80CC\u666F\u56FE\u5C42",toc:"content",filename:"docs/components/backgroundLayer.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u56FE\u5C42\u7EC4\u4EF6",order:3},order:2,description:"\u80CC\u666F\u56FE\u5C42\u662F\u4E00\u79CD\u6700\u7B80\u5355\u7684\u56FE\u5C42\u7C7B\u578B\uFF0C\u5B83\u53EF\u4EE5\u7528\u6765\u7ED8\u5236\u80CC\u666F\uFF0C\u5E76\u8986\u76D6\u5230\u5730\u56FE\u4E0A\u3002"},_t={ids:["docs-components-background-layer-demo-demo1","docs-components-background-layer-demo-demo2","docs-components-background-layer-demo-demo3"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,77410))};var He=i(99842);const bt=[{id:"\u7A7A\u95F4\u5206\u6790",depth:2,title:"\u7A7A\u95F4\u5206\u6790"},{id:"ispointonline",depth:3,title:"isPointOnLine"},{id:"ispointonpolygon",depth:3,title:"isPointOnPolygon"},{id:"isintersects",depth:3,title:"isIntersects"},{id:"iswithin",depth:3,title:"isWithin"},{id:"iscontains",depth:3,title:"isContains"},{id:"isoverlap",depth:3,title:"isOverlap"}],Tt={title:"\u7A7A\u95F4\u5206\u6790",toc:"content",filename:"docs/components/spatialAnalysis.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u5DE5\u5177",order:5},order:3,description:"\u7A7A\u95F4\u5206\u6790\u662F\u7528\u6765\u5206\u6790\u7A7A\u95F4\u8981\u7D20\u4E4B\u95F4\u7684\u7A7A\u95F4\u5173\u7CFB\u3002"},st={ids:["docs-components-spatial-analysis-demo-demo1","docs-components-spatial-analysis-demo-demo2","docs-components-spatial-analysis-demo-demo3","docs-components-spatial-analysis-demo-demo4","docs-components-spatial-analysis-demo-demo5","docs-components-spatial-analysis-demo-demo6"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,92761))};var Qe=i(71758);const mt=[{id:"\u81EA\u5B9A\u4E49\u63A7\u4EF6",depth:2,title:"\u81EA\u5B9A\u4E49\u63A7\u4EF6"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u4F4D\u7F6E",depth:3,title:"2.\u8BBE\u7F6E\u4F4D\u7F6E"},{id:"3\u83B7\u53D6\u81EA\u5B9A\u4E49\u63A7\u4EF6\u5B9E\u4F8B",depth:3,title:"3.\u83B7\u53D6\u81EA\u5B9A\u4E49\u63A7\u4EF6\u5B9E\u4F8B"},{id:"api",depth:2,title:"API"},{id:"customcontrol-api",depth:3,title:"CustomControl API"},{id:"customcontrol-event",depth:3,title:"CustomControl Event"}],Ht={title:"\u81EA\u5B9A\u4E49\u63A7\u4EF6",toc:"content",filename:"docs/components/customControl.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u63A7\u4EF6",order:2},order:6,description:"\u672C\u7EC4\u4EF6\u5E93\u63D0\u4F9B\u4E86\u81EA\u5B9A\u4E49\u63A7\u4EF6\u529F\u80FD\u6765\u5B9E\u73B0\u4E00\u4E9B\u5B9A\u5236\u5316\u7684\u529F\u80FD\uFF0C\u6BD4\u5982\u6DFB\u52A0\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684\u6309\u94AE\u6216\u8005\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684\u4EA4\u4E92\u6548\u679C\u3002"},vt={ids:["docs-components-custom-control-demo-demo1","docs-components-custom-control-demo-demo2","docs-components-custom-control-demo-demo3"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,72066))};var ue=i(22131);const lt=[{id:"\u6BD4\u4F8B\u5C3A\u63A7\u4EF6",depth:2,title:"\u6BD4\u4F8B\u5C3A\u63A7\u4EF6"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u4F4D\u7F6E",depth:3,title:"2.\u8BBE\u7F6E\u4F4D\u7F6E"},{id:"3\u8BBE\u7F6E\u5355\u4F4D",depth:3,title:"3.\u8BBE\u7F6E\u5355\u4F4D"},{id:"4\u83B7\u53D6\u6BD4\u4F8B\u5C3A\u63A7\u4EF6\u5B9E\u4F8B",depth:3,title:"4.\u83B7\u53D6\u6BD4\u4F8B\u5C3A\u63A7\u4EF6\u5B9E\u4F8B"},{id:"api",depth:2,title:"API"},{id:"scalecontrol-api",depth:3,title:"ScaleControl API"},{id:"scalecontrol-methods",depth:3,title:"ScaleControl Methods"}],le={title:"\u6BD4\u4F8B\u5C3A\u63A7\u4EF6",toc:"content",filename:"docs/components/scaleControl.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u63A7\u4EF6",order:2},order:1,description:"\u6BD4\u4F8B\u5C3A\u63A7\u4EF6\u53EF\u4EE5\u7528\u6765\u663E\u793A\u5730\u56FE\u4E0A\u7684\u8DDD\u79BB\u4E0E\u5B9E\u9645\u8DDD\u79BB\u7684\u6BD4\u4F8B\u3002"},Je={ids:["docs-components-scale-control-demo-demo1","docs-components-scale-control-demo-demo2","docs-components-scale-control-demo-demo3","docs-components-scale-control-demo-demo4"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,75124))};var we=i(36588);const Pn=[{id:"\u70B9\u56FE\u5C42",depth:2,title:"\u70B9\u56FE\u5C42"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"3\u9AD8\u7EA7\u6837\u5F0F",depth:3,title:"3.\u9AD8\u7EA7\u6837\u5F0F"},{id:"4\u56FE\u5C42\u4E8B\u4EF6",depth:3,title:"4.\u56FE\u5C42\u4E8B\u4EF6"},{id:"api",depth:2,title:"API"},{id:"circlelayer-api",depth:3,title:"CircleLayer API"},{id:"circlelayer-event",depth:3,title:"CircleLayer Event"}],Mt={title:"\u70B9\u56FE\u5C42",toc:"content",filename:"docs/components/circleLayer.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u56FE\u5C42\u7EC4\u4EF6",order:3},order:2,description:"\u70B9\u56FE\u5C42\u662F\u4E00\u79CD\u6700\u7B80\u5355\u7684\u56FE\u5C42\u7C7B\u578B\uFF0C\u5B83\u53EF\u4EE5\u7528\u6765\u7ED8\u5236\u70B9\u3001\u5706\u70B9\u7B49\u7B26\u53F7"},or={ids:["docs-components-circle-layer-demo-demo1","docs-components-circle-layer-demo-demo2","docs-components-circle-layer-demo-demo3","docs-components-circle-layer-demo-demo4"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,3006))};var wr=i(10619);const Dr=[{id:"\u7ED8\u56FE\u63A7\u4EF6",depth:2,title:"\u7ED8\u56FE\u63A7\u4EF6"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u81EA\u5B9A\u4E49\u6309\u94AE\u5C55\u793A",depth:3,title:"2.\u81EA\u5B9A\u4E49\u6309\u94AE\u5C55\u793A"},{id:"3\u4FEE\u6539\u6837\u5F0F",depth:3,title:"3.\u4FEE\u6539\u6837\u5F0F"},{id:"4\u83B7\u53D6\u7ED8\u56FE\u7EC4\u4EF6\u5B9E\u4F8B",depth:3,title:"4.\u83B7\u53D6\u7ED8\u56FE\u7EC4\u4EF6\u5B9E\u4F8B"},{id:"5\u6DFB\u52A0\u4E8B\u4EF6",depth:3,title:"5.\u6DFB\u52A0\u4E8B\u4EF6"},{id:"api",depth:2,title:"API"},{id:"drawcontrol-api",depth:3,title:"DrawControl API"},{id:"drawcontrol-event",depth:3,title:"DrawControl Event"},{id:"drawcontrol-method",depth:3,title:"DrawControl Method"}],lr={title:"\u7ED8\u56FE\u63A7\u4EF6",toc:"content",filename:"docs/components/drawControl.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u63A7\u4EF6",order:2},order:5,description:"\u7ED8\u56FE\u63A7\u4EF6\u53EF\u4EE5\u7528\u6765\u663E\u793A\u5730\u56FE\u4E0A\u7ED8\u5236\u7684\u56FE\u5F62\uFF0C\u6BD4\u5982\u70B9\u3001\u7EBF\u3001\u9762\u3001\u77E9\u5F62\u3001\u5706\u5F62\u7B49\u3002"},Pe={ids:["docs-components-draw-control-demo-demo1","docs-components-draw-control-demo-demo2","docs-components-draw-control-demo-demo3","docs-components-draw-control-demo-demo4","docs-components-draw-control-demo-demo5"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,79668))};var ut=i(72556);const Ve=[{id:"\u6805\u683C\u56FE\u5C42",depth:2,title:"\u6805\u683C\u56FE\u5C42"},{id:"1tile-layer",depth:3,title:"1.Tile Layer"},{id:"2wms-layer",depth:3,title:"2.WMS Layer"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"api",depth:2,title:"API"},{id:"rasterlayer-api",depth:3,title:"RasterLayer API"}],gt={title:"\u6805\u683C\u56FE\u5C42",toc:"content",filename:"docs/components/rasterLayer.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u56FE\u5C42\u7EC4\u4EF6",order:3},order:6,description:"\u6805\u683C\u56FE\u5C42\u662F\u4E00\u79CD\u4E13\u95E8\u7528\u4E8E\u6E32\u67D3\u6805\u683C\u5207\u7247\u670D\u52A1\u7684\u56FE\u5C42\u3002\u4E3B\u8981\u7684\u5730\u56FE\u670D\u52A1\u5305\u62EC WMS Layer \u548C Tile Layer \u7B49\u670D\u52A1\u3002"},Gt={ids:["docs-components-raster-layer-demo-demo1","docs-components-raster-layer-demo-demo2","docs-components-raster-layer-demo-demo3"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,68588))};var Me=i(93198);const At=[{id:"\u9762\u56FE\u5C42",depth:2,title:"\u9762\u56FE\u5C42"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"3\u9AD8\u7EA7\u6837\u5F0F",depth:3,title:"3.\u9AD8\u7EA7\u6837\u5F0F"},{id:"4\u8BBE\u7F6E\u56FE\u7247",depth:3,title:"4.\u8BBE\u7F6E\u56FE\u7247"},{id:"5\u56FE\u5C42\u4E8B\u4EF6",depth:3,title:"5.\u56FE\u5C42\u4E8B\u4EF6"},{id:"api",depth:2,title:"API"},{id:"filllayer-api",depth:3,title:"FillLayer API"},{id:"filllayer-event",depth:3,title:"FillLayer Event"}],Bt={title:"\u9762\u56FE\u5C42",toc:"content",filename:"docs/components/fillLayer.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u56FE\u5C42\u7EC4\u4EF6",order:3},order:4,description:"\u9762\u56FE\u5C42\u53EF\u4EE5\u5728\u5730\u56FE\u4E0A\u7ED8\u5236\u9762\u8981\u7D20\u3002"},Sn={ids:["docs-components-fill-layer-demo-demo1","docs-components-fill-layer-demo-demo2","docs-components-fill-layer-demo-demo3","docs-components-fill-layer-demo-demo4","docs-components-fill-layer-demo-demo5"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,6260))};var Lt=i(48626);const Bn=[{id:"\u7EBF\u56FE\u5C42",depth:2,title:"\u7EBF\u56FE\u5C42"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"3\u6E10\u53D8\u989C\u8272",depth:3,title:"3.\u6E10\u53D8\u989C\u8272"},{id:"4\u9AD8\u7EA7\u6837\u5F0F",depth:3,title:"4.\u9AD8\u7EA7\u6837\u5F0F"},{id:"5\u8BBE\u7F6E\u56FE\u7247",depth:3,title:"5.\u8BBE\u7F6E\u56FE\u7247"},{id:"6\u56FE\u5C42\u4E8B\u4EF6",depth:3,title:"6.\u56FE\u5C42\u4E8B\u4EF6"},{id:"api",depth:2,title:"API"},{id:"linelayer-api",depth:3,title:"LineLayer API"},{id:"linelayer-event",depth:3,title:"LineLayer Event"}],en={title:"\u7EBF\u56FE\u5C42",toc:"content",filename:"docs/components/lineLayer.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u56FE\u5C42\u7EC4\u4EF6",order:3},order:3,description:"\u7EBF\u56FE\u5C42\u53EF\u4EE5\u5728\u5730\u56FE\u4E0A\u7ED8\u5236\u7EBF\u8981\u7D20\u3002"},gn={ids:["docs-components-line-layer-demo-demo1","docs-components-line-layer-demo-demo2","docs-components-line-layer-demo-demo3","docs-components-line-layer-demo-demo4","docs-components-line-layer-demo-demo5","docs-components-line-layer-demo-demo6"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,58044))};var ar=i(7937);const Sr=[{id:"\u70ED\u529B\u56FE\u56FE\u5C42",depth:2,title:"\u70ED\u529B\u56FE\u56FE\u5C42"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"api",depth:2,title:"API"},{id:"heatmaplayer-api",depth:3,title:"HeatmapLayer API"}],In={title:"\u70ED\u529B\u56FE\u56FE\u5C42",toc:"content",filename:"docs/components/heatmap.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u56FE\u5C42\u7EC4\u4EF6",order:3},order:4,description:"\u70ED\u529B\u56FE\u56FE\u5C42\u53EF\u4EE5\u7528\u6765\u5C55\u793A\u5927\u91CF\u7684\u70B9\u6570\u636E\uFF0C\u901A\u8FC7\u989C\u8272\u7684\u6DF1\u6D45\u6765\u8868\u73B0\u6570\u636E\u5BC6\u5EA6\u3002"},Gn={ids:["docs-components-heatmap-demo-demo1","docs-components-heatmap-demo-demo2"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,92859))};var hn=i(28440);const mn=[{id:"\u4E00\u81F4-consistency-",depth:2,title:"\u4E00\u81F4 Consistency \u{1F91D}"},{id:"\u53CD\u9988-feedback-",depth:2,title:"\u53CD\u9988 Feedback \u{1F44D}"},{id:"\u6548\u7387-efficiency-",depth:2,title:"\u6548\u7387 Efficiency \u{1F680}"},{id:"\u53EF\u63A7-controllability-",depth:2,title:"\u53EF\u63A7 Controllability \u{1F527}"}],cn={title:"\u4ECB\u7ECD",toc:"content",filename:"docs/base/introduction.md",lastUpdated:1740678917e3,nav:{title:"\u5FEB\u901F\u5F00\u59CB",order:1},group:{title:"\u57FA\u7840",order:1},description:"\u4E0E\u73B0\u5B9E\u751F\u6D3B\u4E00\u81F4\uFF1A \u4E0E\u73B0\u5B9E\u751F\u6D3B\u7684\u6D41\u7A0B\u3001\u903B\u8F91\u4FDD\u6301\u4E00\u81F4\uFF0C\u9075\u5FAA\u7528\u6237\u4E60\u60EF\u7684\u8BED\u8A00\u548C\u6982\u5FF5\uFF1B"},Ln={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,46411))};var Er=i(97655);const mr=[{id:"\u5730\u56FE\u6807\u8BB0",depth:2,title:"\u5730\u56FE\u6807\u8BB0"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"3\u81EA\u5B9A\u4E49\u5185\u5BB9",depth:3,title:"3.\u81EA\u5B9A\u4E49\u5185\u5BB9"},{id:"4\u62D6\u62FD\u4E0E\u4E8B\u4EF6",depth:3,title:"4.\u62D6\u62FD\u4E0E\u4E8B\u4EF6"},{id:"5\u83B7\u53D6-marker-\u5B9E\u4F8B",depth:3,title:"5.\u83B7\u53D6 Marker \u5B9E\u4F8B"},{id:"api",depth:2,title:"API"},{id:"marker-api",depth:3,title:"Marker API"},{id:"marker-event",depth:3,title:"Marker Event"},{id:"marker-method",depth:3,title:"Marker Method"}],Jr={title:"\u5730\u56FE\u6807\u8BB0",toc:"content",filename:"docs/components/marker.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u8986\u76D6\u7269",order:4},order:1,description:"\u5730\u56FE\u6807\u8BB0\u53EF\u4EE5\u7528\u6765\u5728\u5730\u56FE\u4E0A\u5C55\u793A\u56FE\u5F62\u6216\u8005\u5143\u7D20\u3002"},Ie={ids:["docs-components-marker-demo-demo1","docs-components-marker-demo-demo2","docs-components-marker-demo-demo3","docs-components-marker-demo-demo4","docs-components-marker-demo-demo5"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,91083))};var Ot=i(95103);const St=[{id:"\u5730\u56FE\u6807\u8BB0",depth:2,title:"\u5730\u56FE\u6807\u8BB0"},{id:"1\u57FA\u672C\u4F7F\u7528",depth:3,title:"1.\u57FA\u672C\u4F7F\u7528"},{id:"2\u8BBE\u7F6E\u6837\u5F0F",depth:3,title:"2.\u8BBE\u7F6E\u6837\u5F0F"},{id:"3\u5F39\u7A97\u4E8B\u4EF6",depth:3,title:"3.\u5F39\u7A97\u4E8B\u4EF6"},{id:"4\u83B7\u53D6-popup-\u5B9E\u4F8B",depth:3,title:"4.\u83B7\u53D6 Popup \u5B9E\u4F8B"},{id:"api",depth:2,title:"API"},{id:"popup-api",depth:3,title:"Popup API"},{id:"popup-event",depth:3,title:"Popup Event"},{id:"popup-method",depth:3,title:"Popup Method"}],at={title:"\u5730\u56FE\u5F39\u7A97",toc:"content",filename:"docs/components/popup.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u8986\u76D6\u7269",order:4},order:2,description:"Popup\u7EC4\u4EF6\u7528\u6765\u5728\u5730\u56FE\u4E0A\u5C55\u793A\u5F39\u7A97\u4FE1\u606F\u3002"},Xe={ids:["docs-components-popup-demo-demo1","docs-components-popup-demo-demo2","docs-components-popup-demo-demo3","docs-components-popup-demo-demo4"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,7587))};var Nt=i(70953);const Nn=[{id:"\u5730\u56FE\u63A7\u4EF6",depth:2,title:"\u5730\u56FE\u63A7\u4EF6"},{id:"1-\u6BD4\u4F8B\u5C3A\u63A7\u4EF6",depth:3,title:"1. \u6BD4\u4F8B\u5C3A\u63A7\u4EF6"},{id:"2-\u5BFC\u822A\u63A7\u4EF6",depth:3,title:"2. \u5BFC\u822A\u63A7\u4EF6"},{id:"3\u5168\u5C4F\u63A7\u4EF6",depth:3,title:"3.\u5168\u5C4F\u63A7\u4EF6"},{id:"4\u9F20\u6807\u4F4D\u7F6E\u63A7\u4EF6",depth:3,title:"4.\u9F20\u6807\u4F4D\u7F6E\u63A7\u4EF6"},{id:"5\u7ED8\u56FE\u63A7\u4EF6",depth:3,title:"5.\u7ED8\u56FE\u63A7\u4EF6"},{id:"6\u81EA\u5B9A\u4E49\u63A7\u4EF6",depth:3,title:"6.\u81EA\u5B9A\u4E49\u63A7\u4EF6"}],Jn={title:"\u5730\u56FE\u63A7\u4EF6",toc:"content",filename:"docs/preview/control.md",lastUpdated:1742833323e3,nav:{title:"\u7EC4\u4EF6\u9884\u89C8",order:2},order:2},rr={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,77498))};var Br=i(81433);const Hr=[{id:"\u5730\u56FE\u8986\u76D6\u7269",depth:2,title:"\u5730\u56FE\u8986\u76D6\u7269"},{id:"1\u5730\u56FE\u6807\u8BB0",depth:3,title:"1.\u5730\u56FE\u6807\u8BB0"},{id:"2\u5730\u56FE\u5F39\u7A97",depth:3,title:"2.\u5730\u56FE\u5F39\u7A97"}],zr={title:"\u5730\u56FE\u8986\u76D6\u7269",toc:"content",filename:"docs/preview/overlap.md",lastUpdated:1742833323e3,nav:{title:"\u7EC4\u4EF6\u9884\u89C8",order:2},order:4},Tr={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,73860))};var fn=i(71938);const Ne=[{id:"\u57FA\u7840\u5730\u56FE",depth:2,title:"\u57FA\u7840\u5730\u56FE"},{id:"1\u57FA\u7840\u7528\u6CD5",depth:3,title:"1.\u57FA\u7840\u7528\u6CD5"},{id:"2\u7981\u7528\u5730\u56FE\u4EA4\u4E92",depth:3,title:"2.\u7981\u7528\u5730\u56FE\u4EA4\u4E92"},{id:"3\u8BBE\u7F6E\u5730\u56FE\u72B6\u6001",depth:3,title:"3.\u8BBE\u7F6E\u5730\u56FE\u72B6\u6001"},{id:"4\u8BBE\u7F6E\u5730\u56FE\u6837\u5F0F",depth:3,title:"4.\u8BBE\u7F6E\u5730\u56FE\u6837\u5F0F"},{id:"5\u5730\u56FE\u4E8B\u4EF6",depth:3,title:"5.\u5730\u56FE\u4E8B\u4EF6"},{id:"6\u5B50\u7EC4\u4EF6\u83B7\u53D6\u5730\u56FE\u5B9E\u4F8B",depth:3,title:"6.\u5B50\u7EC4\u4EF6\u83B7\u53D6\u5730\u56FE\u5B9E\u4F8B"},{id:"api",depth:2,title:"API"},{id:"mapfactory-api",depth:3,title:"MapFactory API"},{id:"map-api",depth:3,title:"Map API"},{id:"map-event",depth:3,title:"Map Event"}],Ge={title:"\u57FA\u7840\u5730\u56FE",toc:"content",filename:"docs/components/map.md",lastUpdated:1742831675e3,nav:{title:"\u7EC4\u4EF6",order:3},group:{title:"\u5730\u56FE\u7EC4\u4EF6",order:1},description:"\u57FA\u7840\u5730\u56FE\u7EC4\u4EF6\uFF0C\u63D0\u4F9B\u57FA\u7840\u7684\u5730\u56FE\u5C55\u793A\u529F\u80FD\u3002Layer\u3001Control\u7B49\u7EC4\u4EF6\u5FC5\u987B\u4F5C\u4E3A\u5730\u56FE\u7EC4\u4EF6\u7684\u5B50\u7EC4\u4EF6\u4F7F\u7528\uFF0C\u4EE5\u4FBF\u83B7\u53D6\u5230\u5730\u56FE\u5B9E\u4F8B\u5BF9\u8C61\u3002"},ot={ids:["docs-components-map-demo-demo1","docs-components-map-demo-demo2","docs-components-map-demo-demo3","docs-components-map-demo-demo4","docs-components-map-demo-demo5","docs-components-map-demo-demo6"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,70366))};var Dt=i(34675);const jt=[{id:"\u56FE\u5C42\u7EC4\u4EF6",depth:2,title:"\u56FE\u5C42\u7EC4\u4EF6"},{id:"1-\u80CC\u666F\u56FE\u5C42",depth:3,title:"1. \u80CC\u666F\u56FE\u5C42"},{id:"2-\u70B9\u56FE\u5C42",depth:3,title:"2. \u70B9\u56FE\u5C42"},{id:"3\u7EBF\u56FE\u5C42",depth:3,title:"3.\u7EBF\u56FE\u5C42"},{id:"4\u9762\u56FE\u5C42",depth:3,title:"4.\u9762\u56FE\u5C42"},{id:"5\u70ED\u529B\u56FE\u56FE\u5C42",depth:3,title:"5.\u70ED\u529B\u56FE\u56FE\u5C42"},{id:"6\u6805\u683C\u56FE\u5C42",depth:3,title:"6.\u6805\u683C\u56FE\u5C42"}],sn={title:"\u56FE\u5C42\u7EC4\u4EF6",toc:"content",filename:"docs/preview/layer.md",lastUpdated:1742833323e3,nav:{title:"\u7EC4\u4EF6\u9884\u89C8",order:2},order:3},xn={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,64610))};var rn=i(43203);const Fn=[{id:"\u5730\u56FE\u5DE5\u5177",depth:2,title:"\u5730\u56FE\u5DE5\u5177"},{id:"1-\u51E0\u4F55\u8BA1\u7B97",depth:3,title:"1. \u51E0\u4F55\u8BA1\u7B97"},{id:"2-\u7A7A\u95F4\u8BA1\u7B97",depth:3,title:"2. \u7A7A\u95F4\u8BA1\u7B97"},{id:"4-\u7A7A\u95F4\u5206\u6790",depth:3,title:"4. \u7A7A\u95F4\u5206\u6790"}],Un={title:"\u5730\u56FE\u5DE5\u5177",toc:"content",filename:"docs/preview/tool.md",lastUpdated:1742908996e3,nav:{title:"\u7EC4\u4EF6\u9884\u89C8",order:2},order:5},jn={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,77401))};var _n=i(6609);const Xn=[{id:"\u57FA\u7840\u5730\u56FE",depth:2,title:"\u57FA\u7840\u5730\u56FE"},{id:"1-\u57FA\u7840\u5730\u56FE",depth:3,title:"1. \u57FA\u7840\u5730\u56FE"}],er={title:"\u57FA\u7840\u5730\u56FE",toc:"content",filename:"docs/preview/map.md",lastUpdated:1742833323e3,nav:{title:"\u7EC4\u4EF6\u9884\u89C8",order:2},order:1},Yr={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,27412))};var qr=i(24497);const Gr=[{id:"\u5165\u95E8",depth:2,title:"\u5165\u95E8"},{id:"\u5B89\u88C5",depth:2,title:"\u5B89\u88C5"},{id:"1\u4F7F\u7528\u5305\u7BA1\u7406\u5668",depth:3,title:"1.\u4F7F\u7528\u5305\u7BA1\u7406\u5668"},{id:"2\u6D4F\u89C8\u5668\u76F4\u63A5\u5F15\u5165",depth:3,title:"2.\u6D4F\u89C8\u5668\u76F4\u63A5\u5F15\u5165"},{id:"\u793A\u4F8B",depth:2,title:"\u793A\u4F8B"}],ci={title:"\u5FEB\u901F\u5F00\u59CB",toc:"content",filename:"docs/base/start.md",lastUpdated:1742747476e3,nav:{title:"\u5FEB\u901F\u5F00\u59CB",order:1},group:{title:"\u57FA\u7840",order:2},description:"\u672C\u7EC4\u4EF6\u662F\u57FA\u4E8E mapboxgl \u5F00\u53D1\u7684\uFF0C\u4EE5\u8FBE\u5230\u7B80\u5316\u5730\u56FE\u5E94\u7528\u5F00\u53D1\u7684\u76EE\u7684\uFF0C\u5E76\u4E14\u672C\u7EC4\u4EF6\u7684api\u4E0E\u5B98\u65B9\u57FA\u672C\u4FDD\u6301\u4E00\u81F4\uFF0C\u56E0\u6B64\uFF0C\u5F00\u53D1\u8005\u5728\u4F7F\u7528\u4E4B\u524D\u6700\u597D\u5BF9mapboxgl\u7684\u57FA\u672C\u7528\u6CD5\u6709\u4E00\u5B9A\u7684\u4E86\u89E3\uFF0C\u5177\u4F53\u53EF\u4EE5\u53C2\u8003\u5B98\u65B9\u6587\u6863\u3002"},Ci={ids:["docs-base-start-demo-hellowolrd"],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,30238))};var Ki=i(31275);const Bi=[],Di={title:"Docs",toc:"menu",filename:"docs/index.md",lastUpdated:1743012831e3},yo={ids:[],getter:()=>Promise.all([i.e(860),i.e(904)]).then(i.bind(i,25079))};var po={},Vo={"docs/components/mousePositionControl":{frontmatter:B,toc:X,demoIndex:K,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,45700))}},"docs/components/geometryCalculation":{frontmatter:J,toc:he,demoIndex:ae,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,2312))}},"docs/components/spatialCalculation":{frontmatter:Le,toc:Ee,demoIndex:ke,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,63467))}},"docs/components/fullscreenControl":{frontmatter:be,toc:Se,demoIndex:Ue,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,19971))}},"docs/components/navigationControl":{frontmatter:nt,toc:je,demoIndex:Ct,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,83792))}},"docs/components/backgroundLayer":{frontmatter:yt,toc:Et,demoIndex:_t,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,43815))}},"docs/components/spatialAnalysis":{frontmatter:Tt,toc:bt,demoIndex:st,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,39142))}},"docs/components/customControl":{frontmatter:Ht,toc:mt,demoIndex:vt,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,70902))}},"docs/components/scaleControl":{frontmatter:le,toc:lt,demoIndex:Je,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,63062))}},"docs/components/circleLayer":{frontmatter:Mt,toc:Pn,demoIndex:or,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,44719))}},"docs/components/drawControl":{frontmatter:lr,toc:Dr,demoIndex:Pe,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,6212))}},"docs/components/rasterLayer":{frontmatter:gt,toc:Ve,demoIndex:Gt,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,77769))}},"docs/components/fillLayer":{frontmatter:Bt,toc:At,demoIndex:Sn,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,94089))}},"docs/components/lineLayer":{frontmatter:en,toc:Bn,demoIndex:gn,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,53531))}},"docs/components/heatmap":{frontmatter:In,toc:Sr,demoIndex:Gn,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,93660))}},"docs/base/introduction":{frontmatter:cn,toc:mn,demoIndex:Ln,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,46640))}},"docs/components/marker":{frontmatter:Jr,toc:mr,demoIndex:Ie,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,27143))}},"docs/components/popup":{frontmatter:at,toc:St,demoIndex:Xe,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,32536))}},"docs/preview/control":{frontmatter:Jn,toc:Nn,demoIndex:rr,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,84210))}},"docs/preview/overlap":{frontmatter:zr,toc:Hr,demoIndex:Tr,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,94574))}},"docs/components/map":{frontmatter:Ge,toc:Ne,demoIndex:ot,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,32338))}},"docs/preview/layer":{frontmatter:sn,toc:jt,demoIndex:xn,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,8141))}},"docs/preview/tool":{frontmatter:Un,toc:Fn,demoIndex:jn,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,42210))}},"docs/preview/map":{frontmatter:er,toc:Xn,demoIndex:Yr,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,76752))}},"docs/base/start":{frontmatter:ci,toc:Gr,demoIndex:Ci,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,95968))}},"docs/index":{frontmatter:Di,toc:Bi,demoIndex:yo,textGetter:function(){return Promise.all([i.e(860),i.e(904)]).then(i.bind(i,33667))}}};function Xo(ro){if(ro.status==="fulfilled")return ro.value;throw ro.status==="rejected"?ro.reason:(ro.status==="pending"||(ro.status="pending",ro.then(function(xa){ro.status="fulfilled",ro.value=xa},function(xa){ro.status="rejected",ro.reason=xa})),ro)}var $o=Object.keys(Vo).reduce(function(ro,xa){if(Vo[xa].demoIndex){var Ba=Vo[xa].demoIndex,ma=Ba.ids,ja=Ba.getter;ma.forEach(function(Sa){ro[Sa]=ja})}return ro},{}),Aa=new Map;function qa(ro){ro&&Object.keys(ro).forEach(function(xa){var Ba,ma=(Ba=xa.match(/^(.+)\.(js|jsx|ts|tsx|json)$/))===null||Ba===void 0?void 0:Ba[1];ma&&!ro[ma]&&(ro[ma]=ro[xa])})}function Oo(ro){if(!Aa.get(ro)){var xa;Aa.set(ro,(xa=$o[ro])===null||xa===void 0?void 0:xa.call($o).then(function(Ba){var ma=Ba.demos;return qa(ma[ro].context),ma[ro]}))}return Xo(Aa.get(ro))}function Do(){return oa.apply(this,arguments)}function oa(){return oa=Y()(n()().mark(function ro(){var xa;return n()().wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return xa=Object.entries(Vo).filter(function(ja){var Sa=M()(ja,2),us=Sa[0],ua=Sa[1];return ua.demoIndex}),ma.abrupt("return",Promise.all(xa.map(function(){var ja=Y()(n()().mark(function Sa(us){var ua,ao,Ma;return n()().wrap(function(No){for(;;)switch(No.prev=No.next){case 0:return ua=M()(us,2),ao=ua[0],Ma=ua[1],No.t0=ao,No.next=4,Ma.demoIndex.getter();case 4:return No.t1=No.sent.demos,No.abrupt("return",{id:No.t0,demos:No.t1});case 6:case"end":return No.stop()}},Sa)}));return function(Sa){return ja.apply(this,arguments)}}())).then(function(ja){return ja.reduce(function(Sa,us){var ua=us.id,ao=us.demos;return Object.values(ao).forEach(function(Ma){Ma.routeId=ua,qa(Ma.context)}),Object.assign(Sa,ao),Sa},{})}));case 2:case"end":return ma.stop()}},ro)})),oa.apply(this,arguments)}function Fa(ro,xa){return $()($()({},po[ro]),{},{meta:xa!=null?xa:{frontmatter:{title:po[ro].title},toc:[],texts:[]}})}function xs(ro,xa){if(Vo[ro]){var Ba=Vo[ro],ma=Ba.frontmatter,ja=Ba.toc,Sa=Ba.textGetter,us=Ba.tabs,ua={frontmatter:ma,toc:ja,texts:[]};return xa!=null&&xa.syncOnly?(us&&(ua.tabs=us.map(function(ao){return Fa(ao,xs(ao,xa))})),ua):new Promise(function(){var ao=Y()(n()().mark(function Ma(ko){var No;return n()().wrap(function(Hs){for(;;)switch(Hs.prev=Hs.next){case 0:if(!Sa){Hs.next=5;break}return Hs.next=3,Sa();case 3:No=Hs.sent,ua.texts=No.texts;case 5:if(!us){Hs.next=9;break}return Hs.next=8,Promise.all(us.map(function(){var $i=Y()(n()().mark(function es(Ll){return n()().wrap(function(ho){for(;;)switch(ho.prev=ho.next){case 0:return ho.t0=Fa,ho.t1=Ll,ho.next=4,xs(Ll,xa);case 4:return ho.t2=ho.sent,ho.abrupt("return",(0,ho.t0)(ho.t1,ho.t2));case 6:case"end":return ho.stop()}},es)}));return function(es){return $i.apply(this,arguments)}}()));case 8:ua.tabs=Hs.sent;case 9:ko(ua);case 10:case"end":return Hs.stop()}},Ma)}));return function(Ma){return ao.apply(this,arguments)}}())}}function tl(){return Na.apply(this,arguments)}function Na(){return Na=Y()(n()().mark(function ro(){return n()().wrap(function(Ba){for(;;)switch(Ba.prev=Ba.next){case 0:return Ba.next=2,Promise.all(Object.keys(Vo).map(function(){var ma=Y()(n()().mark(function ja(Sa){return n()().wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:return ua.t0=Sa,ua.next=3,xs(Sa);case 3:return ua.t1=ua.sent,ua.abrupt("return",{id:ua.t0,meta:ua.t1});case 5:case"end":return ua.stop()}},ja)}));return function(ja){return ma.apply(this,arguments)}}())).then(function(ma){return ma.reduce(function(ja,Sa){var us=Sa.id,ua=Sa.meta;return ja[us]=ua,ja},{})});case 2:return Ba.abrupt("return",Ba.sent);case 3:case"end":return Ba.stop()}},ro)})),Na.apply(this,arguments)}},77926:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E.Z}});var E=i(96485)},28877:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return he}});var E=i(29981),M=i.n(E),C=i(75271);const n=C.createContext({}),j=!0;function $({baseColor:J,highlightColor:ae,width:se,height:Ee,borderRadius:Le,circle:ke,direction:ye,duration:Se,enableAnimation:be=j,customHighlightBackground:Ue}){const qe={};return ye==="rtl"&&(qe["--animation-direction"]="reverse"),typeof Se=="number"&&(qe["--animation-duration"]=`${Se}s`),be||(qe["--pseudo-element-display"]="none"),(typeof se=="string"||typeof se=="number")&&(qe.width=se),(typeof Ee=="string"||typeof Ee=="number")&&(qe.height=Ee),(typeof Le=="string"||typeof Le=="number")&&(qe.borderRadius=Le),ke&&(qe.borderRadius="50%"),typeof J!="undefined"&&(qe["--base-color"]=J),typeof ae!="undefined"&&(qe["--highlight-color"]=ae),typeof Ue=="string"&&(qe["--custom-highlight-background"]=Ue),qe}function U(be){var Ue=be,{count:J=1,wrapper:ae,className:se,containerClassName:Ee,containerTestId:Le,circle:ke=!1,style:ye}=Ue,Se=Zy(Ue,["count","wrapper","className","containerClassName","containerTestId","circle","style"]);var qe,je,nt;const Ct=C.useContext(n),ft=E_({},Se);for(const[st,Qe]of Object.entries(Se))typeof Qe=="undefined"&&delete ft[st];const Et=k1(E_(E_({},Ct),ft),{circle:ke}),yt=E_(E_({},ye),$(Et));let _t="react-loading-skeleton";se&&(_t+=` ${se}`);const He=(qe=Et.inline)!==null&&qe!==void 0?qe:!1,bt=[],Tt=Math.ceil(J);for(let st=0;st<Tt;st++){let Qe=yt;if(Tt>J&&st===Tt-1){const Ht=(je=Qe.width)!==null&&je!==void 0?je:"100%",vt=J%1,ue=typeof Ht=="number"?Ht*vt:`calc(${Ht} * ${vt})`;Qe=k1(E_({},Qe),{width:ue})}const mt=C.createElement("span",{className:_t,style:Qe,key:st},"\u200C");He?bt.push(mt):bt.push(C.createElement(C.Fragment,{key:st},mt,C.createElement("br",null)))}return C.createElement("span",{className:Ee,"data-testid":Le,"aria-live":"polite","aria-busy":(nt=Et.enableAnimation)!==null&&nt!==void 0?nt:j},ae?bt.map((st,Qe)=>C.createElement(ae,{key:Qe},st)):bt)}function Y(se){var Ee=se,{children:J}=Ee,ae=Zy(Ee,["children"]);return React.createElement(n.Provider,{value:ae},J)}var te=function(){return C.createElement("div",{className:"dumi-default-loading-skeleton"},C.createElement(U,{className:"first-line",count:1}),C.createElement(U,{count:2}),C.createElement(U,{count:1,width:"75%"}))},X=te,B=i(87833),K=i(52676),de=function(){var ae=(0,B.WF)(),se=ae.setLoading;return(0,C.useLayoutEffect)(function(){return se(!0),M().start(),function(){se(!1),M().done()}},[]),(0,K.jsx)(X,{})},he=de},23920:function(H,Q,i){"use strict";i.d(Q,{Ac:function(){return Gt},ql:function(){return Tt.ql},rU:function(){return bt},OL:function(){return be},Q$:function(){return Me},p6:function(){return te},m8:function(){return At.m8},fp:function(){return B.fp},Ov:function(){return ft.Ov},TH:function(){return B.TH},s0:function(){return B.s0},pC:function(){return B.pC},UO:function(){return B.UO},Qt:function(){return st.Q},lr:function(){return qe}});var E=i(90228),M=i(87999),C=i(87833),n=i(53077),j=typeof window!="undefined"?window.html2sketch:null;function $(hn,mn){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function hn(mn,cn){return _regeneratorRuntime().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:if(cn.type!=="group"){Er.next=6;break}return Er.next=3,j.nodeToGroup(mn);case 3:Er.t0=Er.sent.toSketchJSON(),Er.next=9;break;case 6:return Er.next=8,j.nodeToSymbol(mn);case 8:Er.t0=Er.sent.toSketchJSON();case 9:return Er.abrupt("return",Er.t0);case 10:case"end":return Er.stop()}},hn)})),U.apply(this,arguments)}function Y(hn,mn){return getPluginManager().applyPlugins({key:"toSketchJSON",type:ApplyPluginsType.modify,initialValue:null,args:{target:hn,opts:mn},async:!0})}var te=null,X=i(75271),B=i(5791),K=i(18280);function de(){return de=Object.assign||function(hn){for(var mn=1;mn<arguments.length;mn++){var cn=arguments[mn];for(var Ln in cn)Object.prototype.hasOwnProperty.call(cn,Ln)&&(hn[Ln]=cn[Ln])}return hn},de.apply(this,arguments)}function he(hn,mn){if(hn==null)return{};var cn={},Ln=Object.keys(hn),Er,mr;for(mr=0;mr<Ln.length;mr++)Er=Ln[mr],!(mn.indexOf(Er)>=0)&&(cn[Er]=hn[Er]);return cn}const J=["onClick","reloadDocument","replace","state","target","to"],ae=["aria-current","caseSensitive","className","end","style","to","children"];function se(hn,mn){if(!hn){typeof console!="undefined"&&console.warn(mn);try{throw new Error(mn)}catch(cn){}}}function Ee(hn){let{basename:mn,children:cn,window:Ln}=hn,Er=useRef();Er.current==null&&(Er.current=createBrowserHistory({window:Ln}));let mr=Er.current,[Jr,Ie]=useState({action:mr.action,location:mr.location});return useLayoutEffect(()=>mr.listen(Ie),[mr]),createElement(Router,{basename:mn,children:cn,location:Jr.location,navigationType:Jr.action,navigator:mr})}function Le(hn){let{basename:mn,children:cn,window:Ln}=hn,Er=useRef();Er.current==null&&(Er.current=createHashHistory({window:Ln}));let mr=Er.current,[Jr,Ie]=useState({action:mr.action,location:mr.location});return useLayoutEffect(()=>mr.listen(Ie),[mr]),createElement(Router,{basename:mn,children:cn,location:Jr.location,navigationType:Jr.action,navigator:mr})}function ke(hn){let{basename:mn,children:cn,history:Ln}=hn;const[Er,mr]=useState({action:Ln.action,location:Ln.location});return useLayoutEffect(()=>Ln.listen(mr),[Ln]),createElement(Router,{basename:mn,children:cn,location:Er.location,navigationType:Er.action,navigator:Ln})}function ye(hn){return!!(hn.metaKey||hn.altKey||hn.ctrlKey||hn.shiftKey)}const Se=(0,X.forwardRef)(function(mn,cn){let{onClick:Ln,reloadDocument:Er,replace:mr=!1,state:Jr,target:Ie,to:Ot}=mn,St=he(mn,J),at=(0,B.oQ)(Ot),Xe=Ue(Ot,{replace:mr,state:Jr,target:Ie});function Nt(Nn){Ln&&Ln(Nn),!Nn.defaultPrevented&&!Er&&Xe(Nn)}return(0,X.createElement)("a",de({},St,{href:at,onClick:Nt,ref:cn,target:Ie}))}),be=(0,X.forwardRef)(function(mn,cn){let{"aria-current":Ln="page",caseSensitive:Er=!1,className:mr="",end:Jr=!1,style:Ie,to:Ot,children:St}=mn,at=he(mn,ae),Xe=(0,B.TH)(),Nt=(0,B.WU)(Ot),Nn=Xe.pathname,Jn=Nt.pathname;Er||(Nn=Nn.toLowerCase(),Jn=Jn.toLowerCase());let rr=Nn===Jn||!Jr&&Nn.startsWith(Jn)&&Nn.charAt(Jn.length)==="/",Br=rr?Ln:void 0,Hr;typeof mr=="function"?Hr=mr({isActive:rr}):Hr=[mr,rr?"active":null].filter(Boolean).join(" ");let zr=typeof Ie=="function"?Ie({isActive:rr}):Ie;return(0,X.createElement)(Se,de({},at,{"aria-current":Br,className:Hr,ref:cn,style:zr,to:Ot}),typeof St=="function"?St({isActive:rr}):St)});function Ue(hn,mn){let{target:cn,replace:Ln,state:Er}=mn===void 0?{}:mn,mr=(0,B.s0)(),Jr=(0,B.TH)(),Ie=(0,B.WU)(hn);return(0,X.useCallback)(Ot=>{if(Ot.button===0&&(!cn||cn==="_self")&&!ye(Ot)){Ot.preventDefault();let St=!!Ln||(0,K.Ep)(Jr)===(0,K.Ep)(Ie);mr(hn,{replace:St,state:Er})}},[Jr,mr,Ie,Ln,Er,cn,hn])}function qe(hn){let mn=(0,X.useRef)(je(hn)),cn=(0,B.TH)(),Ln=(0,X.useMemo)(()=>{let Jr=je(cn.search);for(let Ie of mn.current.keys())Jr.has(Ie)||mn.current.getAll(Ie).forEach(Ot=>{Jr.append(Ie,Ot)});return Jr},[cn.search]),Er=(0,B.s0)(),mr=(0,X.useCallback)((Jr,Ie)=>{Er("?"+je(Jr),Ie)},[Er]);return[Ln,mr]}function je(hn){return hn===void 0&&(hn=""),new URLSearchParams(typeof hn=="string"||Array.isArray(hn)||hn instanceof URLSearchParams?hn:Object.keys(hn).reduce((mn,cn)=>{let Ln=hn[cn];return mn.concat(Array.isArray(Ln)?Ln.map(Er=>[cn,Er]):[[cn,Ln]])},[]))}var nt=i(56920),Ct=i(48385),ft=i(69536),Et=i(90885);function yt(hn,mn){var cn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ln=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(typeof IntersectionObserver!="function")return null;var Er=X.useRef(typeof IntersectionObserver=="function"),mr=X.useRef(null);return X.useEffect(function(){if(!(!hn.current||!Er.current||Ln.disabled))return mr.current=new IntersectionObserver(function(Jr){var Ie=(0,Et.Z)(Jr,1),Ot=Ie[0];mn(Ot)},cn),mr.current.observe(hn.current),function(){var Jr;(Jr=mr.current)===null||Jr===void 0||Jr.disconnect()}},[mn,cn,Ln.disabled,hn]),mr.current}var _t=["prefetch"];function He(hn){var mn=X.useRef(null);return X.useEffect(function(){hn&&(typeof hn=="function"?hn(mn.current):hn.current=mn.current)}),mn}var bt=X.forwardRef(function(hn,mn){var cn,Ln=hn.prefetch,Er=(0,Ct.Z)(hn,_t),mr=typeof window!="undefined"&&window.__umi_route_prefetch__||{defaultPrefetch:"none",defaultPrefetchTimeout:50},Jr=mr.defaultPrefetch,Ie=mr.defaultPrefetchTimeout,Ot=(Ln===!0?"intent":Ln===!1?"none":Ln)||Jr;if(!["intent","render","viewport","none"].includes(Ot))throw new Error("Invalid prefetch value ".concat(Ot," found in Link component"));var St=(0,ft.Ov)(),at=typeof hn.to=="string"?hn.to:(cn=hn.to)===null||cn===void 0?void 0:cn.pathname,Xe=X.useRef(!1),Nt=He(mn),Nn=function(Br){if(Ot==="intent"){var Hr=Br.target||{};Hr.preloadTimeout||(Hr.preloadTimeout=setTimeout(function(){var zr;Hr.preloadTimeout=null,(zr=St.preloadRoute)===null||zr===void 0||zr.call(St,at)},hn.prefetchTimeout||Ie))}},Jn=function(Br){if(Ot==="intent"){var Hr=Br.target||{};Hr.preloadTimeout&&(clearTimeout(Hr.preloadTimeout),Hr.preloadTimeout=null)}};return(0,X.useLayoutEffect)(function(){if(Ot==="render"&&!Xe.current){var rr;(rr=St.preloadRoute)===null||rr===void 0||rr.call(St,at),Xe.current=!0}},[Ot,at]),yt(Nt,function(rr){if(rr!=null&&rr.isIntersecting){var Br;(Br=St.preloadRoute)===null||Br===void 0||Br.call(St,at)}},{rootMargin:"100px"},{disabled:Ot!=="viewport"}),at?X.createElement(Se,(0,nt.Z)({onMouseEnter:Nn,onMouseLeave:Jn,ref:Nt},Er),hn.children):null}),Tt=i(33810),st=i(83123),Qe=i(91744);function mt(){"use strict";mt=function(){return mn};var hn,mn={},cn=Object.prototype,Ln=cn.hasOwnProperty,Er=Object.defineProperty||function(_n,Xn,er){_n[Xn]=er.value},mr=typeof Symbol=="function"?Symbol:{},Jr=mr.iterator||"@@iterator",Ie=mr.asyncIterator||"@@asyncIterator",Ot=mr.toStringTag||"@@toStringTag";function St(_n,Xn,er){return Object.defineProperty(_n,Xn,{value:er,enumerable:!0,configurable:!0,writable:!0}),_n[Xn]}try{St({},"")}catch(_n){St=function(er,Yr,qr){return er[Yr]=qr}}function at(_n,Xn,er,Yr){var qr=Xn&&Xn.prototype instanceof Hr?Xn:Hr,Gr=Object.create(qr.prototype),ci=new Un(Yr||[]);return Er(Gr,"_invoke",{value:sn(_n,er,ci)}),Gr}function Xe(_n,Xn,er){try{return{type:"normal",arg:_n.call(Xn,er)}}catch(Yr){return{type:"throw",arg:Yr}}}mn.wrap=at;var Nt="suspendedStart",Nn="suspendedYield",Jn="executing",rr="completed",Br={};function Hr(){}function zr(){}function Tr(){}var fn={};St(fn,Jr,function(){return this});var Ne=Object.getPrototypeOf,Ge=Ne&&Ne(Ne(jn([])));Ge&&Ge!==cn&&Ln.call(Ge,Jr)&&(fn=Ge);var ot=Tr.prototype=Hr.prototype=Object.create(fn);function Dt(_n){["next","throw","return"].forEach(function(Xn){St(_n,Xn,function(er){return this._invoke(Xn,er)})})}function jt(_n,Xn){function er(qr,Gr,ci,Ci){var Ki=Xe(_n[qr],_n,Gr);if(Ki.type!=="throw"){var Bi=Ki.arg,Di=Bi.value;return Di&&(0,Qe.Z)(Di)=="object"&&Ln.call(Di,"__await")?Xn.resolve(Di.__await).then(function(yo){er("next",yo,ci,Ci)},function(yo){er("throw",yo,ci,Ci)}):Xn.resolve(Di).then(function(yo){Bi.value=yo,ci(Bi)},function(yo){return er("throw",yo,ci,Ci)})}Ci(Ki.arg)}var Yr;Er(this,"_invoke",{value:function(Gr,ci){function Ci(){return new Xn(function(Ki,Bi){er(Gr,ci,Ki,Bi)})}return Yr=Yr?Yr.then(Ci,Ci):Ci()}})}function sn(_n,Xn,er){var Yr=Nt;return function(qr,Gr){if(Yr===Jn)throw new Error("Generator is already running");if(Yr===rr){if(qr==="throw")throw Gr;return{value:hn,done:!0}}for(er.method=qr,er.arg=Gr;;){var ci=er.delegate;if(ci){var Ci=xn(ci,er);if(Ci){if(Ci===Br)continue;return Ci}}if(er.method==="next")er.sent=er._sent=er.arg;else if(er.method==="throw"){if(Yr===Nt)throw Yr=rr,er.arg;er.dispatchException(er.arg)}else er.method==="return"&&er.abrupt("return",er.arg);Yr=Jn;var Ki=Xe(_n,Xn,er);if(Ki.type==="normal"){if(Yr=er.done?rr:Nn,Ki.arg===Br)continue;return{value:Ki.arg,done:er.done}}Ki.type==="throw"&&(Yr=rr,er.method="throw",er.arg=Ki.arg)}}}function xn(_n,Xn){var er=Xn.method,Yr=_n.iterator[er];if(Yr===hn)return Xn.delegate=null,er==="throw"&&_n.iterator.return&&(Xn.method="return",Xn.arg=hn,xn(_n,Xn),Xn.method==="throw")||er!=="return"&&(Xn.method="throw",Xn.arg=new TypeError("The iterator does not provide a '"+er+"' method")),Br;var qr=Xe(Yr,_n.iterator,Xn.arg);if(qr.type==="throw")return Xn.method="throw",Xn.arg=qr.arg,Xn.delegate=null,Br;var Gr=qr.arg;return Gr?Gr.done?(Xn[_n.resultName]=Gr.value,Xn.next=_n.nextLoc,Xn.method!=="return"&&(Xn.method="next",Xn.arg=hn),Xn.delegate=null,Br):Gr:(Xn.method="throw",Xn.arg=new TypeError("iterator result is not an object"),Xn.delegate=null,Br)}function rn(_n){var Xn={tryLoc:_n[0]};1 in _n&&(Xn.catchLoc=_n[1]),2 in _n&&(Xn.finallyLoc=_n[2],Xn.afterLoc=_n[3]),this.tryEntries.push(Xn)}function Fn(_n){var Xn=_n.completion||{};Xn.type="normal",delete Xn.arg,_n.completion=Xn}function Un(_n){this.tryEntries=[{tryLoc:"root"}],_n.forEach(rn,this),this.reset(!0)}function jn(_n){if(_n||_n===""){var Xn=_n[Jr];if(Xn)return Xn.call(_n);if(typeof _n.next=="function")return _n;if(!isNaN(_n.length)){var er=-1,Yr=function qr(){for(;++er<_n.length;)if(Ln.call(_n,er))return qr.value=_n[er],qr.done=!1,qr;return qr.value=hn,qr.done=!0,qr};return Yr.next=Yr}}throw new TypeError((0,Qe.Z)(_n)+" is not iterable")}return zr.prototype=Tr,Er(ot,"constructor",{value:Tr,configurable:!0}),Er(Tr,"constructor",{value:zr,configurable:!0}),zr.displayName=St(Tr,Ot,"GeneratorFunction"),mn.isGeneratorFunction=function(_n){var Xn=typeof _n=="function"&&_n.constructor;return!!Xn&&(Xn===zr||(Xn.displayName||Xn.name)==="GeneratorFunction")},mn.mark=function(_n){return Object.setPrototypeOf?Object.setPrototypeOf(_n,Tr):(_n.__proto__=Tr,St(_n,Ot,"GeneratorFunction")),_n.prototype=Object.create(ot),_n},mn.awrap=function(_n){return{__await:_n}},Dt(jt.prototype),St(jt.prototype,Ie,function(){return this}),mn.AsyncIterator=jt,mn.async=function(_n,Xn,er,Yr,qr){qr===void 0&&(qr=Promise);var Gr=new jt(at(_n,Xn,er,Yr),qr);return mn.isGeneratorFunction(Xn)?Gr:Gr.next().then(function(ci){return ci.done?ci.value:Gr.next()})},Dt(ot),St(ot,Ot,"Generator"),St(ot,Jr,function(){return this}),St(ot,"toString",function(){return"[object Generator]"}),mn.keys=function(_n){var Xn=Object(_n),er=[];for(var Yr in Xn)er.push(Yr);return er.reverse(),function qr(){for(;er.length;){var Gr=er.pop();if(Gr in Xn)return qr.value=Gr,qr.done=!1,qr}return qr.done=!0,qr}},mn.values=jn,Un.prototype={constructor:Un,reset:function(Xn){if(this.prev=0,this.next=0,this.sent=this._sent=hn,this.done=!1,this.delegate=null,this.method="next",this.arg=hn,this.tryEntries.forEach(Fn),!Xn)for(var er in this)er.charAt(0)==="t"&&Ln.call(this,er)&&!isNaN(+er.slice(1))&&(this[er]=hn)},stop:function(){this.done=!0;var Xn=this.tryEntries[0].completion;if(Xn.type==="throw")throw Xn.arg;return this.rval},dispatchException:function(Xn){if(this.done)throw Xn;var er=this;function Yr(Bi,Di){return ci.type="throw",ci.arg=Xn,er.next=Bi,Di&&(er.method="next",er.arg=hn),!!Di}for(var qr=this.tryEntries.length-1;qr>=0;--qr){var Gr=this.tryEntries[qr],ci=Gr.completion;if(Gr.tryLoc==="root")return Yr("end");if(Gr.tryLoc<=this.prev){var Ci=Ln.call(Gr,"catchLoc"),Ki=Ln.call(Gr,"finallyLoc");if(Ci&&Ki){if(this.prev<Gr.catchLoc)return Yr(Gr.catchLoc,!0);if(this.prev<Gr.finallyLoc)return Yr(Gr.finallyLoc)}else if(Ci){if(this.prev<Gr.catchLoc)return Yr(Gr.catchLoc,!0)}else{if(!Ki)throw new Error("try statement without catch or finally");if(this.prev<Gr.finallyLoc)return Yr(Gr.finallyLoc)}}}},abrupt:function(Xn,er){for(var Yr=this.tryEntries.length-1;Yr>=0;--Yr){var qr=this.tryEntries[Yr];if(qr.tryLoc<=this.prev&&Ln.call(qr,"finallyLoc")&&this.prev<qr.finallyLoc){var Gr=qr;break}}Gr&&(Xn==="break"||Xn==="continue")&&Gr.tryLoc<=er&&er<=Gr.finallyLoc&&(Gr=null);var ci=Gr?Gr.completion:{};return ci.type=Xn,ci.arg=er,Gr?(this.method="next",this.next=Gr.finallyLoc,Br):this.complete(ci)},complete:function(Xn,er){if(Xn.type==="throw")throw Xn.arg;return Xn.type==="break"||Xn.type==="continue"?this.next=Xn.arg:Xn.type==="return"?(this.rval=this.arg=Xn.arg,this.method="return",this.next="end"):Xn.type==="normal"&&er&&(this.next=er),Br},finish:function(Xn){for(var er=this.tryEntries.length-1;er>=0;--er){var Yr=this.tryEntries[er];if(Yr.finallyLoc===Xn)return this.complete(Yr.completion,Yr.afterLoc),Fn(Yr),Br}},catch:function(Xn){for(var er=this.tryEntries.length-1;er>=0;--er){var Yr=this.tryEntries[er];if(Yr.tryLoc===Xn){var qr=Yr.completion;if(qr.type==="throw"){var Gr=qr.arg;Fn(Yr)}return Gr}}throw new Error("illegal catch attempt")},delegateYield:function(Xn,er,Yr){return this.delegate={iterator:jn(Xn),resultName:er,nextLoc:Yr},this.method==="next"&&(this.arg=hn),Br}},mn}var Ht=i(93914);function vt(hn,mn,cn,Ln,Er,mr,Jr){try{var Ie=hn[mr](Jr),Ot=Ie.value}catch(St){cn(St);return}Ie.done?mn(Ot):Promise.resolve(Ot).then(Ln,Er)}function ue(hn){return function(){var mn=this,cn=arguments;return new Promise(function(Ln,Er){var mr=hn.apply(mn,cn);function Jr(Ot){vt(mr,Ln,Er,Jr,Ie,"next",Ot)}function Ie(Ot){vt(mr,Ln,Er,Jr,Ie,"throw",Ot)}Jr(void 0)})}}var lt=i(76059);function le(hn,mn){var cn=typeof Symbol!="undefined"&&hn[Symbol.iterator]||hn["@@iterator"];if(!cn){if(Array.isArray(hn)||(cn=(0,lt.Z)(hn))||mn&&hn&&typeof hn.length=="number"){cn&&(hn=cn);var Ln=0,Er=function(){};return{s:Er,n:function(){return Ln>=hn.length?{done:!0}:{done:!1,value:hn[Ln++]}},e:function(St){throw St},f:Er}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mr=!0,Jr=!1,Ie;return{s:function(){cn=cn.call(hn)},n:function(){var St=cn.next();return mr=St.done,St},e:function(St){Jr=!0,Ie=St},f:function(){try{!mr&&cn.return!=null&&cn.return()}finally{if(Jr)throw Ie}}}}var Je=i(82385);function we(hn){if(typeof Symbol!="undefined"&&hn[Symbol.iterator]!=null||hn["@@iterator"]!=null)return Array.from(hn)}var Pn=i(67213);function Mt(hn){return(0,Je.Z)(hn)||we(hn)||(0,lt.Z)(hn)||(0,Pn.Z)()}function or(hn,mn){if(!(hn instanceof mn))throw new TypeError("Cannot call a class as a function")}var wr=i(40394);function Dr(hn,mn){for(var cn=0;cn<mn.length;cn++){var Ln=mn[cn];Ln.enumerable=Ln.enumerable||!1,Ln.configurable=!0,"value"in Ln&&(Ln.writable=!0),Object.defineProperty(hn,(0,wr.Z)(Ln.key),Ln)}}function lr(hn,mn,cn){return mn&&Dr(hn.prototype,mn),cn&&Dr(hn,cn),Object.defineProperty(hn,"prototype",{writable:!1}),hn}var Pe=i(25940);function ut(hn,mn){if(!hn)throw new Error(mn)}function Ve(hn){var mn=hn.fns,cn=hn.args;if(mn.length===1)return mn[0];var Ln=mn.pop();return mn.reduce(function(Er,mr){return function(){return mr(Er,cn)}},Ln)}function gt(hn){return!!hn&&(0,Qe.Z)(hn)==="object"&&typeof hn.then=="function"}var Gt=function(hn){return hn.compose="compose",hn.modify="modify",hn.event="event",hn}({}),Me=function(){function hn(mn){or(this,hn),(0,Pe.Z)(this,"opts",void 0),(0,Pe.Z)(this,"hooks",{}),this.opts=mn}return lr(hn,[{key:"register",value:function(cn){var Ln=this;ut(cn.apply,"plugin register failed, apply must supplied"),Object.keys(cn.apply).forEach(function(Er){ut(Ln.opts.validKeys.indexOf(Er)>-1,"register failed, invalid key ".concat(Er," ").concat(cn.path?"from plugin ".concat(cn.path):"",".")),Ln.hooks[Er]=(Ln.hooks[Er]||[]).concat(cn.apply[Er])})}},{key:"getHooks",value:function(cn){var Ln=cn.split("."),Er=Mt(Ln),mr=Er[0],Jr=Er.slice(1),Ie=this.hooks[mr]||[];return Jr.length&&(Ie=Ie.map(function(Ot){try{var St=Ot,at=le(Jr),Xe;try{for(at.s();!(Xe=at.n()).done;){var Nt=Xe.value;St=St[Nt]}}catch(Nn){at.e(Nn)}finally{at.f()}return St}catch(Nn){return null}}).filter(Boolean)),Ie}},{key:"applyPlugins",value:function(cn){var Ln=cn.key,Er=cn.type,mr=cn.initialValue,Jr=cn.args,Ie=cn.async,Ot=this.getHooks(Ln)||[];switch(Jr&&ut((0,Qe.Z)(Jr)==="object","applyPlugins failed, args must be plain object."),Ie&&ut(Er===Gt.modify||Er===Gt.event,"async only works with modify and event type."),Er){case Gt.modify:return Ie?Ot.reduce(function(){var St=ue(mt().mark(function at(Xe,Nt){var Nn;return mt().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(ut(typeof Nt=="function"||(0,Qe.Z)(Nt)==="object"||gt(Nt),"applyPlugins failed, all hooks for key ".concat(Ln," must be function, plain object or Promise.")),!gt(Xe)){rr.next=5;break}return rr.next=4,Xe;case 4:Xe=rr.sent;case 5:if(typeof Nt!="function"){rr.next=16;break}if(Nn=Nt(Xe,Jr),!gt(Nn)){rr.next=13;break}return rr.next=10,Nn;case 10:return rr.abrupt("return",rr.sent);case 13:return rr.abrupt("return",Nn);case 14:rr.next=21;break;case 16:if(!gt(Nt)){rr.next=20;break}return rr.next=19,Nt;case 19:Nt=rr.sent;case 20:return rr.abrupt("return",(0,Ht.Z)((0,Ht.Z)({},Xe),Nt));case 21:case"end":return rr.stop()}},at)}));return function(at,Xe){return St.apply(this,arguments)}}(),gt(mr)?mr:Promise.resolve(mr)):Ot.reduce(function(St,at){return ut(typeof at=="function"||(0,Qe.Z)(at)==="object","applyPlugins failed, all hooks for key ".concat(Ln," must be function or plain object.")),typeof at=="function"?at(St,Jr):(0,Ht.Z)((0,Ht.Z)({},St),at)},mr);case Gt.event:return ue(mt().mark(function St(){var at,Xe,Nt,Nn;return mt().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:at=le(Ot),rr.prev=1,at.s();case 3:if((Xe=at.n()).done){rr.next=12;break}if(Nt=Xe.value,ut(typeof Nt=="function","applyPlugins failed, all hooks for key ".concat(Ln," must be function.")),Nn=Nt(Jr),!(Ie&&gt(Nn))){rr.next=10;break}return rr.next=10,Nn;case 10:rr.next=3;break;case 12:rr.next=17;break;case 14:rr.prev=14,rr.t0=rr.catch(1),at.e(rr.t0);case 17:return rr.prev=17,at.f(),rr.finish(17);case 20:case"end":return rr.stop()}},St,null,[[1,14,17,20]])}))();case Gt.compose:return function(){return Ve({fns:Ot.concat(mr),args:Jr})()}}}}],[{key:"create",value:function(cn){var Ln=new hn({validKeys:cn.validKeys});return cn.plugins.forEach(function(Er){Ln.register(Er)}),Ln}}]),hn}(),At=i(67137),Bt=i(31759),Sn=i.n(Bt),Lt=0,Bn=0;function en(hn,mn){if(0)var cn}function gn(hn){return JSON.stringify(hn,null,2)}function ar(hn){var mn=hn.length>1?hn.map(Sr).join(" "):hn[0];return Sn()(mn)==="object"?"".concat(gn(mn)):mn.toString()}function Sr(hn){return Sn()(hn)==="object"?"".concat(JSON.stringify(hn)):hn.toString()}var In={log:function(){for(var mn=arguments.length,cn=new Array(mn),Ln=0;Ln<mn;Ln++)cn[Ln]=arguments[Ln];en("log",ar(cn))},info:function(){for(var mn=arguments.length,cn=new Array(mn),Ln=0;Ln<mn;Ln++)cn[Ln]=arguments[Ln];en("info",ar(cn))},warn:function(){for(var mn=arguments.length,cn=new Array(mn),Ln=0;Ln<mn;Ln++)cn[Ln]=arguments[Ln];en("warn",ar(cn))},error:function(){for(var mn=arguments.length,cn=new Array(mn),Ln=0;Ln<mn;Ln++)cn[Ln]=arguments[Ln];en("error",ar(cn))},group:function(){Bn++},groupCollapsed:function(){Bn++},groupEnd:function(){Bn&&--Bn},clear:function(){en("clear")},trace:function(){var mn;(mn=console).trace.apply(mn,arguments)},profile:function(){var mn;(mn=console).profile.apply(mn,arguments)},profileEnd:function(){var mn;(mn=console).profileEnd.apply(mn,arguments)}},Gn=function(){}},60023:function(H,Q,i){"use strict";var pb,mb,_b,gb;i.r(Q),i.d(Q,{BackgroundLayer:function(){return Is},CircleLayer:function(){return Zo},CustomControl:function(){return Pi},DrawControl:function(){return Ff},FillLayer:function(){return t},FullscreenControl:function(){return Td},HeatmapLayer:function(){return d},LineLayer:function(){return b},MapContext:function(){return Qo},MapFactory:function(){return Fi},MapTool:function(){return Jb},Marker:function(){return re},MousePositionControl:function(){return Wd},NavigationControl:function(){return yl},Popup:function(){return pe},RasterLayer:function(){return k},ScaleControl:function(){return dc}});var E={};i.r(E),i.d(E,{LAT_MAX:function(){return Bd},LAT_MIN:function(){return gd},LAT_RENDERED_MAX:function(){return uc},LAT_RENDERED_MIN:function(){return jc},LNG_MAX:function(){return jd},LNG_MIN:function(){return Ts},activeStates:function(){return Fl},classes:function(){return mu},cursors:function(){return rs},events:function(){return Xs},geojsonTypes:function(){return To},interactions:function(){return _d},meta:function(){return ll},modes:function(){return is},sources:function(){return sl},types:function(){return Wa},updateActions:function(){return zl}});var M={};i.r(M),i.d(M,{isActiveFeature:function(){return Xc},isEnterKey:function(){return Ld},isEscapeKey:function(){return df},isFeature:function(){return uf},isInactiveFeature:function(){return lf},isOfMetaType:function(){return Gh},isShiftDown:function(){return cf},isShiftMousedown:function(){return sf},isTrue:function(){return kf},isVertex:function(){return $d},noTarget:function(){return sd}});var C={};i.r(C),i.d(C,{CommonSelectors:function(){return M},ModeHandler:function(){return Bc},StringSet:function(){return di},constrainFeatureMovement:function(){return lm},createMidPoint:function(){return ff},createSupplementaryPoints:function(){return ap},createVertex:function(){return ih},doubleClickZoom:function(){return wd},euclideanDistance:function(){return rf},featuresAt:function(){return vd},getFeatureAtAndSetCursors:function(){return yd},isClick:function(){return nh},isEventAtCoordinates:function(){return Eh},isTap:function(){return Ud},mapEventToBoundingBox:function(){return Kc},moveFeatures:function(){return Cp},sortFeatures:function(){return Zl},stringSetsAreEqual:function(){return Zh},theme:function(){return Df},toDenseArray:function(){return Gd}});var n=i(31759),j=i.n(n),$=i(26068),U=i.n($),Y=i(48305),te=i.n(Y),X=i(95959),B=i.n(X),K=i(75271),de=i(82187),he=i.n(de);function J(){this.__data__=[],this.size=0}var ae=J;function se(p,g){return p===g||p!==p&&g!==g}var Ee=se;function Le(p,g){for(var x=p.length;x--;)if(Ee(p[x][0],g))return x;return-1}var ke=Le,ye=Array.prototype,Se=ye.splice;function be(p){var g=this.__data__,x=ke(g,p);if(x<0)return!1;var L=g.length-1;return x==L?g.pop():Se.call(g,x,1),--this.size,!0}var Ue=be;function qe(p){var g=this.__data__,x=ke(g,p);return x<0?void 0:g[x][1]}var je=qe;function nt(p){return ke(this.__data__,p)>-1}var Ct=nt;function ft(p,g){var x=this.__data__,L=ke(x,p);return L<0?(++this.size,x.push([p,g])):x[L][1]=g,this}var Et=ft;function yt(p){var g=-1,x=p==null?0:p.length;for(this.clear();++g<x;){var L=p[g];this.set(L[0],L[1])}}yt.prototype.clear=ae,yt.prototype.delete=Ue,yt.prototype.get=je,yt.prototype.has=Ct,yt.prototype.set=Et;var _t=yt;function He(){this.__data__=new _t,this.size=0}var bt=He;function Tt(p){var g=this.__data__,x=g.delete(p);return this.size=g.size,x}var st=Tt;function Qe(p){return this.__data__.get(p)}var mt=Qe;function Ht(p){return this.__data__.has(p)}var vt=Ht,ue=typeof global=="object"&&global&&global.Object===Object&&global,lt=ue,le=typeof self=="object"&&self&&self.Object===Object&&self,Je=lt||le||Function("return this")(),we=Je,Pn=we.Symbol,Mt=Pn,or=Object.prototype,wr=or.hasOwnProperty,Dr=or.toString,lr=Mt?Mt.toStringTag:void 0;function Pe(p){var g=wr.call(p,lr),x=p[lr];try{p[lr]=void 0;var L=!0}catch(ee){}var V=Dr.call(p);return L&&(g?p[lr]=x:delete p[lr]),V}var ut=Pe,Ve=Object.prototype,gt=Ve.toString;function Gt(p){return gt.call(p)}var Me=Gt,At="[object Null]",Bt="[object Undefined]",Sn=Mt?Mt.toStringTag:void 0;function Lt(p){return p==null?p===void 0?Bt:At:Sn&&Sn in Object(p)?ut(p):Me(p)}var Bn=Lt;function en(p){var g=typeof p;return p!=null&&(g=="object"||g=="function")}var gn=en,ar="[object AsyncFunction]",Sr="[object Function]",In="[object GeneratorFunction]",Gn="[object Proxy]";function hn(p){if(!gn(p))return!1;var g=Bn(p);return g==Sr||g==In||g==ar||g==Gn}var mn=hn,cn=we["__core-js_shared__"],Ln=cn,Er=function(){var p=/[^.]+$/.exec(Ln&&Ln.keys&&Ln.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}();function mr(p){return!!Er&&Er in p}var Jr=mr,Ie=Function.prototype,Ot=Ie.toString;function St(p){if(p!=null){try{return Ot.call(p)}catch(g){}try{return p+""}catch(g){}}return""}var at=St,Xe=/[\\^$.*+?()[\]{}|]/g,Nt=/^\[object .+?Constructor\]$/,Nn=Function.prototype,Jn=Object.prototype,rr=Nn.toString,Br=Jn.hasOwnProperty,Hr=RegExp("^"+rr.call(Br).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zr(p){if(!gn(p)||Jr(p))return!1;var g=mn(p)?Hr:Nt;return g.test(at(p))}var Tr=zr;function fn(p,g){return p==null?void 0:p[g]}var Ne=fn;function Ge(p,g){var x=Ne(p,g);return Tr(x)?x:void 0}var ot=Ge,Dt=ot(we,"Map"),jt=Dt,sn=ot(Object,"create"),xn=sn;function rn(){this.__data__=xn?xn(null):{},this.size=0}var Fn=rn;function Un(p){var g=this.has(p)&&delete this.__data__[p];return this.size-=g?1:0,g}var jn=Un,_n="__lodash_hash_undefined__",Xn=Object.prototype,er=Xn.hasOwnProperty;function Yr(p){var g=this.__data__;if(xn){var x=g[p];return x===_n?void 0:x}return er.call(g,p)?g[p]:void 0}var qr=Yr,Gr=Object.prototype,ci=Gr.hasOwnProperty;function Ci(p){var g=this.__data__;return xn?g[p]!==void 0:ci.call(g,p)}var Ki=Ci,Bi="__lodash_hash_undefined__";function Di(p,g){var x=this.__data__;return this.size+=this.has(p)?0:1,x[p]=xn&&g===void 0?Bi:g,this}var yo=Di;function po(p){var g=-1,x=p==null?0:p.length;for(this.clear();++g<x;){var L=p[g];this.set(L[0],L[1])}}po.prototype.clear=Fn,po.prototype.delete=jn,po.prototype.get=qr,po.prototype.has=Ki,po.prototype.set=yo;var Vo=po;function Xo(){this.size=0,this.__data__={hash:new Vo,map:new(jt||_t),string:new Vo}}var $o=Xo;function Aa(p){var g=typeof p;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?p!=="__proto__":p===null}var qa=Aa;function Oo(p,g){var x=p.__data__;return qa(g)?x[typeof g=="string"?"string":"hash"]:x.map}var Do=Oo;function oa(p){var g=Do(this,p).delete(p);return this.size-=g?1:0,g}var Fa=oa;function xs(p){return Do(this,p).get(p)}var tl=xs;function Na(p){return Do(this,p).has(p)}var ro=Na;function xa(p,g){var x=Do(this,p),L=x.size;return x.set(p,g),this.size+=x.size==L?0:1,this}var Ba=xa;function ma(p){var g=-1,x=p==null?0:p.length;for(this.clear();++g<x;){var L=p[g];this.set(L[0],L[1])}}ma.prototype.clear=$o,ma.prototype.delete=Fa,ma.prototype.get=tl,ma.prototype.has=ro,ma.prototype.set=Ba;var ja=ma,Sa=200;function us(p,g){var x=this.__data__;if(x instanceof _t){var L=x.__data__;if(!jt||L.length<Sa-1)return L.push([p,g]),this.size=++x.size,this;x=this.__data__=new ja(L)}return x.set(p,g),this.size=x.size,this}var ua=us;function ao(p){var g=this.__data__=new _t(p);this.size=g.size}ao.prototype.clear=bt,ao.prototype.delete=st,ao.prototype.get=mt,ao.prototype.has=vt,ao.prototype.set=ua;var Ma=ao,ko="__lodash_hash_undefined__";function No(p){return this.__data__.set(p,ko),this}var Uo=No;function Hs(p){return this.__data__.has(p)}var $i=Hs;function es(p){var g=-1,x=p==null?0:p.length;for(this.__data__=new ja;++g<x;)this.add(p[g])}es.prototype.add=es.prototype.push=Uo,es.prototype.has=$i;var Ll=es;function hl(p,g){for(var x=-1,L=p==null?0:p.length;++x<L;)if(g(p[x],x,p))return!0;return!1}var ho=hl;function Ul(p,g){return p.has(g)}var Ml=Ul,Ri=1,Wo=2;function fo(p,g,x,L,V,ee){var _e=x&Ri,Ce=p.length,Be=g.length;if(Ce!=Be&&!(_e&&Be>Ce))return!1;var De=ee.get(p),$e=ee.get(g);if(De&&$e)return De==g&&$e==p;var dt=-1,Ke=!0,pt=x&Wo?new Ll:void 0;for(ee.set(p,g),ee.set(g,p);++dt<Ce;){var $t=p[dt],Pt=g[dt];if(L)var an=_e?L(Pt,$t,dt,g,p,ee):L($t,Pt,dt,p,g,ee);if(an!==void 0){if(an)continue;Ke=!1;break}if(pt){if(!ho(g,function(An,un){if(!Ml(pt,un)&&($t===An||V($t,An,x,L,ee)))return pt.push(un)})){Ke=!1;break}}else if(!($t===Pt||V($t,Pt,x,L,ee))){Ke=!1;break}}return ee.delete(p),ee.delete(g),Ke}var ts=fo,il=we.Uint8Array,Jo=il;function Jl(p){var g=-1,x=Array(p.size);return p.forEach(function(L,V){x[++g]=[V,L]}),x}var zs=Jl;function Cs(p){var g=-1,x=Array(p.size);return p.forEach(function(L){x[++g]=L}),x}var oo=Cs,qi=1,Ta=2,la="[object Boolean]",Os="[object Date]",Vl="[object Error]",ns="[object Map]",yu="[object Number]",Fs="[object RegExp]",bs="[object Set]",cs="[object String]",Gl="[object Symbol]",Dl="[object ArrayBuffer]",fs="[object DataView]",ws=Mt?Mt.prototype:void 0,ps=ws?ws.valueOf:void 0;function Za(p,g,x,L,V,ee,_e){switch(x){case fs:if(p.byteLength!=g.byteLength||p.byteOffset!=g.byteOffset)return!1;p=p.buffer,g=g.buffer;case Dl:return!(p.byteLength!=g.byteLength||!ee(new Jo(p),new Jo(g)));case la:case Os:case yu:return Ee(+p,+g);case Vl:return p.name==g.name&&p.message==g.message;case Fs:case cs:return p==g+"";case ns:var Ce=zs;case bs:var Be=L&qi;if(Ce||(Ce=oo),p.size!=g.size&&!Be)return!1;var De=_e.get(p);if(De)return De==g;L|=Ta,_e.set(p,g);var $e=ts(Ce(p),Ce(g),L,V,ee,_e);return _e.delete(p),$e;case Gl:if(ps)return ps.call(p)==ps.call(g)}return!1}var ru=Za;function Es(p,g){for(var x=-1,L=g.length,V=p.length;++x<L;)p[V+x]=g[x];return p}var xu=Es,Yu=Array.isArray,ol=Yu;function Sc(p,g,x){var L=g(p);return ol(p)?L:xu(L,x(p))}var Pu=Sc;function Lc(p,g){for(var x=-1,L=p==null?0:p.length,V=0,ee=[];++x<L;){var _e=p[x];g(_e,x,p)&&(ee[V++]=_e)}return ee}var Ql=Lc;function ms(){return[]}var cu=ms,Tc=Object.prototype,Ic=Tc.propertyIsEnumerable,bu=Object.getOwnPropertySymbols,Dc=bu?function(p){return p==null?[]:(p=Object(p),Ql(bu(p),function(g){return Ic.call(p,g)}))}:cu,kc=Dc;function du(p,g){for(var x=-1,L=Array(p);++x<p;)L[x]=g(x);return L}var ql=du;function wu(p){return p!=null&&typeof p=="object"}var Qs=wu,Cl="[object Arguments]";function Al(p){return Qs(p)&&Bn(p)==Cl}var eu=Al,Eu=Object.prototype,Nc=Eu.hasOwnProperty,Mc=Eu.propertyIsEnumerable,fd=eu(function(){return arguments}())?eu:function(p){return Qs(p)&&Nc.call(p,"callee")&&!Mc.call(p,"callee")},Ad=fd;function jo(){return!1}var aa=jo,go=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ui=go&&typeof module=="object"&&module&&!module.nodeType&&module,qs=Ui&&Ui.exports===go,Io=qs?we.Buffer:void 0,Nu=Io?Io.isBuffer:void 0,Cc=Nu||aa,Mo=Cc,Zc=9007199254740991,gc=/^(?:0|[1-9]\d*)$/;function Pd(p,g){var x=typeof p;return g=g==null?Zc:g,!!g&&(x=="number"||x!="symbol"&&gc.test(p))&&p>-1&&p%1==0&&p<g}var Wc=Pd,kl=9007199254740991;function zt(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=kl}var Ft=zt,Tn="[object Arguments]",vr="[object Array]",cr="[object Boolean]",Nr="[object Date]",Lr="[object Error]",Qr="[object Function]",ui="[object Map]",Ii="[object Number]",Ur="[object Object]",Ai="[object RegExp]",Zi="[object Set]",Ji="[object String]",no="[object WeakMap]",Lo="[object ArrayBuffer]",mo="[object DataView]",Po="[object Float32Array]",I="[object Float64Array]",c="[object Int8Array]",f="[object Int16Array]",T="[object Int32Array]",W="[object Uint8Array]",me="[object Uint8ClampedArray]",ze="[object Uint16Array]",tt="[object Uint32Array]",It={};It[Po]=It[I]=It[c]=It[f]=It[T]=It[W]=It[me]=It[ze]=It[tt]=!0,It[Tn]=It[vr]=It[Lo]=It[cr]=It[mo]=It[Nr]=It[Lr]=It[Qr]=It[ui]=It[Ii]=It[Ur]=It[Ai]=It[Zi]=It[Ji]=It[no]=!1;function ne(p){return Qs(p)&&Ft(p.length)&&!!It[Bn(p)]}var ge=ne;function xe(p){return function(g){return p(g)}}var xt=xe,pn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mn=pn&&typeof module=="object"&&module&&!module.nodeType&&module,Hn=Mn&&Mn.exports===pn,Qn=Hn&&lt.process,tr=function(){try{var p=Mn&&Mn.require&&Mn.require("util").types;return p||Qn&&Qn.binding&&Qn.binding("util")}catch(g){}}(),Ir=tr,oi=Ir&&Ir.isTypedArray,ni=oi?xt(oi):ge,_i=ni,wi=Object.prototype,Si=wi.hasOwnProperty;function So(p,g){var x=ol(p),L=!x&&Ad(p),V=!x&&!L&&Mo(p),ee=!x&&!L&&!V&&_i(p),_e=x||L||V||ee,Ce=_e?ql(p.length,String):[],Be=Ce.length;for(var De in p)(g||Si.call(p,De))&&!(_e&&(De=="length"||V&&(De=="offset"||De=="parent")||ee&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||Wc(De,Be)))&&Ce.push(De);return Ce}var io=So,Wi=Object.prototype;function xo(p){var g=p&&p.constructor,x=typeof g=="function"&&g.prototype||Wi;return p===x}var Qi=xo;function Ho(p,g){return function(x){return p(g(x))}}var La=Ho,as=La(Object.keys,Object),Ja=as,Rs=Object.prototype,Go=Rs.hasOwnProperty;function Ti(p){if(!Qi(p))return Ja(p);var g=[];for(var x in Object(p))Go.call(p,x)&&x!="constructor"&&g.push(x);return g}var Ei=Ti;function fr(p){return p!=null&&Ft(p.length)&&!mn(p)}var nr=fr;function _r(p){return nr(p)?io(p):Ei(p)}var ei=_r;function Xr(p){return Pu(p,ei,kc)}var fi=Xr,Vi=1,vo=Object.prototype,Ro=vo.hasOwnProperty;function _a(p,g,x,L,V,ee){var _e=x&Vi,Ce=fi(p),Be=Ce.length,De=fi(g),$e=De.length;if(Be!=$e&&!_e)return!1;for(var dt=Be;dt--;){var Ke=Ce[dt];if(!(_e?Ke in g:Ro.call(g,Ke)))return!1}var pt=ee.get(p),$t=ee.get(g);if(pt&&$t)return pt==g&&$t==p;var Pt=!0;ee.set(p,g),ee.set(g,p);for(var an=_e;++dt<Be;){Ke=Ce[dt];var An=p[Ke],un=g[Ke];if(L)var yn=_e?L(un,An,Ke,g,p,ee):L(An,un,Ke,p,g,ee);if(!(yn===void 0?An===un||V(An,un,x,L,ee):yn)){Pt=!1;break}an||(an=Ke=="constructor")}if(Pt&&!an){var pr=p.constructor,ur=g.constructor;pr!=ur&&"constructor"in p&&"constructor"in g&&!(typeof pr=="function"&&pr instanceof pr&&typeof ur=="function"&&ur instanceof ur)&&(Pt=!1)}return ee.delete(p),ee.delete(g),Pt}var ca=_a,ta=ot(we,"DataView"),ds=ta,iu=ot(we,"Promise"),Ks=iu,Ou=ot(we,"Set"),bl=Ou,vs=ot(we,"WeakMap"),Co=vs,Pl="[object Map]",As="[object Object]",nl="[object Promise]",Ol="[object Set]",Ac="[object WeakMap]",Su="[object DataView]",Bs=at(ds),hs=at(jt),ou=at(Ks),fl=at(bl),pl=at(Co),Rl=Bn;(ds&&Rl(new ds(new ArrayBuffer(1)))!=Su||jt&&Rl(new jt)!=Pl||Ks&&Rl(Ks.resolve())!=nl||bl&&Rl(new bl)!=Ol||Co&&Rl(new Co)!=Ac)&&(Rl=function(p){var g=Bn(p),x=g==As?p.constructor:void 0,L=x?at(x):"";if(L)switch(L){case Bs:return Su;case hs:return Pl;case ou:return nl;case fl:return Ol;case pl:return Ac}return g});var au=Rl,Xu=1,Ys="[object Arguments]",sc="[object Array]",hu="[object Object]",vc=Object.prototype,js=vc.hasOwnProperty;function lc(p,g,x,L,V,ee){var _e=ol(p),Ce=ol(g),Be=_e?sc:au(p),De=Ce?sc:au(g);Be=Be==Ys?hu:Be,De=De==Ys?hu:De;var $e=Be==hu,dt=De==hu,Ke=Be==De;if(Ke&&Mo(p)){if(!Mo(g))return!1;_e=!0,$e=!1}if(Ke&&!$e)return ee||(ee=new Ma),_e||_i(p)?ts(p,g,x,L,V,ee):ru(p,g,Be,x,L,V,ee);if(!(x&Xu)){var pt=$e&&js.call(p,"__wrapped__"),$t=dt&&js.call(g,"__wrapped__");if(pt||$t){var Pt=pt?p.value():p,an=$t?g.value():g;return ee||(ee=new Ma),V(Pt,an,x,L,ee)}}return Ke?(ee||(ee=new Ma),ca(p,g,x,L,V,ee)):!1}var $l=lc;function tu(p,g,x,L,V){return p===g?!0:p==null||g==null||!Qs(p)&&!Qs(g)?p!==p&&g!==g:$l(p,g,x,L,tu,V)}var zu=tu;function _s(p,g){return zu(p,g)}var Xi=_s,Qo=(0,K.createContext)(null),Ua={onResize:"resize",onIdle:"idle",onRemove:"remove",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseOver:"mouseover",onMouseMove:"mousemove",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseOut:"mouseout",onPreClick:"preclick",onClick:"click",onDblClick:"dblclick",onContextMenu:"contextmenu",onWheel:"wheel",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onMoveStart:"movestart",onMove:"move",onMoveEnd:"moveend",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend",onZoomStart:"zoomstart",onZoom:"zoom",onZoomEnd:"zoomend",onRotateStart:"rotatestart",onRotate:"rotate",onRotateEnd:"rotateend",onPitchStart:"pitchstart",onPitch:"pitch",onPitchEnd:"pitchend",onBoxZoomStart:"boxzoomstart",onBoxZoomEnd:"boxzoomend",onBoxZoomCancel:"boxzoomcancel",onRenderStart:"renderstart",onRender:"render",onError:"error",onWebglContextLost:"webglcontextlost",onWebglContextRestored:"webglcontextrestored",onData:"data",onStyleData:"styledata",onSourceData:"sourcedata",onDataLoading:"dataloading",onStyleDataLoading:"styledataloading",onSourceDataLoading:"sourcedataloading",onStyleImageMissing:"styleimagemissing",onStyleLoad:"style.load",onStyleImportLoad:"style.import.load"},al={onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseOver:"mouseover",onMouseMove:"mousemove",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseOut:"mouseout",onClick:"click",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchCancel:"touchcancel"},ml={onOpen:"open",onClose:"close",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend"},Ls={onDrawCreate:"draw.create",onDrawUpdate:"draw.update",onDrawDelete:"draw.delete",onDrawCombine:"draw.combine",onDrawUncombine:"draw.uncombine",onDrawRender:"draw.render",onDrawSelectionChange:"draw.selectionchange",onDrawModeChange:"draw.modechange",onDrawActionable:"draw.actionable"},Tu=U()(U()(U()(U()({},Ua),al),ml),Ls),Hc=function(g){var x=(0,K.useRef)({}),L=function(_e,Ce){if(!(!_e||!x)){var Be=Object.keys(x).filter(function($e){return x.current[$e]&&typeof g[$e]!="function"}),De=Object.keys(Tu).filter(function($e){return!x.current[$e]&&typeof g[$e]=="function"});Ce?Be.forEach(function($e){_e.off(Tu[$e],Ce,x.current[$e]),delete x.current[$e]}):Be.forEach(function($e){_e.off(Tu[$e],x.current[$e]),delete x.current[$e]}),De.forEach(function($e){var dt=Tu[$e],Ke=g[$e];if(dt&&typeof Ke=="function"){var pt=function(Pt){Ke(Pt)};Ce?_e.on(dt,Ce,pt):_e.on(dt,pt),x.current[$e]=pt}})}},V=function(_e,Ce){!_e||!x||(Ce?Object.keys(x).forEach(function(Be){_e.off(Tu[Be],Ce,x.current[Be]),delete x.current[Be]}):Object.keys(x).forEach(function(Be){_e.off(Tu[Be],x.current[Be]),delete x.current[Be]}))};return{listeners:x,updateEvents:L,offEvents:V}},$s=Hc,Iu=i(52676),Fu=10,rd=[113.94,22.52],zc=0,pd=0,Bu=85,Ju=0,Pc=22,md=0,eh="flyTo",fu="mapbox://styles/mapbox/streets-v11",ju=function(g){var x=g.accessToken,L=g.apiUrl,V=g.antialias,ee=V===void 0?!1:V,_e=g.attributionControl,Ce=_e===void 0?!1:_e,Be=g.bearingSnap,De=Be===void 0?7:Be,$e=g.boxZoom,dt=$e===void 0?!0:$e,Ke=g.clickTolerance,pt=Ke===void 0?3:Ke,$t=g.collectResourceTiming,Pt=$t===void 0?!1:$t,an=g.config,An=g.cooperativeGestures,un=An===void 0?!1:An,yn=g.crossSourceCollisions,pr=yn===void 0?!0:yn,ur=g.customAttribution,br=g.doubleClickZoom,sr=br===void 0?!0:br,ht=g.dragPan,Rt=ht===void 0?!0:ht,Jt=g.dragRotate,On=Jt===void 0?!0:Jt,bn=g.fadeDuration,kn=bn===void 0?300:bn,wt=g.failIfMajorPerformanceCaveat,Vt=wt===void 0?!1:wt,tn=g.hash,Dn=tn===void 0?!1:tn,Wt=g.interactive,ln=Wt===void 0?!0:Wt,wn=g.keyboard,xr=wn===void 0?!0:wn,jr=g.language,Ar=g.locale,Vr=g.localFontFamily,ai=g.localIdeographFontFamily,ki=ai===void 0?"sans-serif":ai,Oi=g.logoPosition,co=Oi===void 0?"bottom-right":Oi,_o=g.maxTileCacheSize,Fo=g.minTileCacheSize,Mi=g.performanceMetricsCollection,eo=Mi===void 0?!0:Mi,Bo=g.pitchWithRotate,$a=Bo===void 0?!0:Bo,Ca=g.preserveDrawingBuffer,ls=Ca===void 0?!1:Ca,va=g.projection,Ps=va===void 0?{name:"mercator"}:va,uu=g.refreshExpiredTiles,_c=uu===void 0?!0:uu,Ec=g.renderWorldCopies,hd=Ec===void 0?!0:Ec,Sg=g.respectPrefersReducedMotion,nf=Sg===void 0?!0:Sg,Tp=g.scrollZoom,b1=Tp===void 0?!0:Tp,jy=g.spriteFormat,w1=jy===void 0?"auto":jy,Uy=g.touchPitch,E1=Uy===void 0?!0:Uy,Vy=g.touchZoomRotate,Qb=Vy===void 0?!0:Vy,vb=g.trackResize,qb=vb===void 0?!0:vb,ew=g.transformRequest;return function(Cd){var yb=Cd.center,Gy=yb===void 0?rd:yb,xb=Cd.zoom,S1=xb===void 0?Fu:xb,bb=Cd.bearing,T1=bb===void 0?pd:bb,wb=Cd.pitch,I1=wb===void 0?zc:wb,M1=Cd.bounds,jx=Cd.fitBoundsOptions,C1=Cd.maxBounds,Eb=Cd.maxPitch,A1=Eb===void 0?Bu:Eb,Sb=Cd.minPitch,P1=Sb===void 0?Ju:Sb,Tb=Cd.maxZoom,O1=Tb===void 0?Pc:Tb,Ib=Cd.minZoom,R1=Ib===void 0?md:Ib,Mb=Cd.style,Tg=Mb===void 0?fu:Mb,tw=Cd.className,Cb=Cd.moveMethod,nw=Cb===void 0?eh:Cb,rw=Cd.cameraOptions,Ab=Cd.animationOptions,iw=Ab===void 0?{}:Ab,ow=Cd.children,Pb=Cd.onMapLoad,aw=(0,K.useState)(null),Ob=te()(aw,2),Ku=Ob[0],sw=Ob[1],Rb=(0,K.useRef)(null),Lb=$s(Cd),lw=Lb.updateEvents,uw=Lb.offEvents;return(0,K.useEffect)(function(){B().accessToken=x,L&&(B().config.API_URL=L);var L1={container:Rb.current,center:Gy,zoom:S1,pitch:I1,bearing:T1,bounds:M1,style:Tg,fitBoundsOptions:jx,maxBounds:C1,maxPitch:A1,minPitch:P1,maxZoom:O1,minZoom:R1,antialias:ee,attributionControl:Ce,bearingSnap:De,boxZoom:dt,clickTolerance:pt,collectResourceTiming:Pt,config:an,cooperativeGestures:un,crossSourceCollisions:pr,customAttribution:ur,doubleClickZoom:sr,dragPan:Rt,dragRotate:On,fadeDuration:kn,failIfMajorPerformanceCaveat:Vt,hash:Dn,interactive:ln,keyboard:xr,language:jr,locale:Ar,localFontFamily:Vr,localIdeographFontFamily:ki,logoPosition:co,maxTileCacheSize:_o,minTileCacheSize:Fo,performanceMetricsCollection:eo,pitchWithRotate:$a,preserveDrawingBuffer:ls,projection:Ps,refreshExpiredTiles:_c,renderWorldCopies:hd,respectPrefersReducedMotion:nf,scrollZoom:b1,spriteFormat:w1,touchPitch:E1,touchZoomRotate:Qb,trackResize:qb,transformRequest:ew},$y=new(B()).Map(L1);return $y.on("load",function(){Pb&&Pb($y),sw($y)}),function(){Ku&&Ku.remove(),uw(Ku)}},[]),(0,K.useEffect)(function(){if(Ku){var L1=Ku.getCenter(),$y=Ku.getZoom(),cw=Ku.getBearing(),dw=Ku.getPitch(),hw=L1.lng!==Gy[0]||L1.lat!==Gy[1],fw=$y!==S1,pw=cw!==T1,mw=dw!==I1;(hw||fw||pw||mw)&&Ku[nw](U()(U()(U()({},rw),iw),{},{center:Gy,zoom:S1,bearing:T1,pitch:I1})),M1&&Ku.fitBounds(M1,jx),C1&&Ku.setMaxBounds(C1),A1!==Ku.getMaxPitch()&&Ku.setMaxPitch(A1),P1!==Ku.getMinPitch()&&Ku.setMinPitch(P1),O1!==Ku.getMaxZoom()&&Ku.setMaxZoom(O1),R1!==Ku.getMinZoom()&&Ku.setMinZoom(R1)}},[JSON.stringify(Gy),S1,I1,T1,JSON.stringify(M1),JSON.stringify(C1),JSON.stringify(jx),A1,P1,O1,R1]),(0,K.useEffect)(function(){if(Ku){if(typeof Tg=="string"){Ku.setStyle(Tg);return}j()(Tg)==="object"&&!Xi(Tg,Ku.getStyle())&&Ku.setStyle(Tg)}},[Tg]),Ku&&lw(Ku),(0,Iu.jsx)(Qo.Provider,{value:Ku,children:(0,Iu.jsx)("div",{className:he()("map-container",tw),ref:Rb,children:Ku&&ow})})}},Fi=ju,Fc=i(67825),Oc=i.n(Fc),nu=["controlClass","position","onAdd"],ss=function(g){var x=g.controlClass,L=g.position,V=L===void 0?"bottom-right":L,ee=g.onAdd,_e=Oc()(g,nu),Ce=(0,K.useContext)(Qo),Be=(0,K.useRef)(null);return(0,K.useEffect)(function(){if(Ce)return Be.current&&Ce.removeControl(Be.current),Be.current=new x(_e),Ce.addControl(Be.current,V),ee&&ee(Be.current),function(){Be.current&&Ce.removeControl(Be.current),Be.current=null}},[Ce,V]),null},Pi=ss,Ss=i(15558),Nl=i.n(Ss),Bc=function(p,g){const x={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},L={on(ee,_e,Ce){if(x[ee]===void 0)throw new Error(`Invalid event type: ${ee}`);x[ee].push({selector:_e,fn:Ce})},render(ee){g.store.featureChanged(ee)}},V=function(ee,_e){const Ce=x[ee];let Be=Ce.length;for(;Be--;){const De=Ce[Be];if(De.selector(_e)){De.fn.call(L,_e)||g.store.render(),g.ui.updateMapClasses();break}}};return p.start.call(L),{render:p.render,stop(){p.stop&&p.stop()},trash(){p.trash&&(p.trash(),g.store.render())},combineFeatures(){p.combineFeatures&&p.combineFeatures()},uncombineFeatures(){p.uncombineFeatures&&p.uncombineFeatures()},drag(ee){V("drag",ee)},click(ee){V("click",ee)},mousemove(ee){V("mousemove",ee)},mousedown(ee){V("mousedown",ee)},mouseup(ee){V("mouseup",ee)},mouseout(ee){V("mouseout",ee)},keydown(ee){V("keydown",ee)},keyup(ee){V("keyup",ee)},touchstart(ee){V("touchstart",ee)},touchmove(ee){V("touchmove",ee)},touchend(ee){V("touchend",ee)},tap(ee){V("tap",ee)}}},id=i(12398);const mu={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sl={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},rs={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Wa={POLYGON:"polygon",LINE:"line_string",POINT:"point"},To={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},is={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},Xs={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},zl={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},ll={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},Fl={ACTIVE:"true",INACTIVE:"false"},_d=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],gd=-90,jc=-85,Bd=90,uc=85,Ts=-270,jd=270,qo={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Va(p,g){const x=qo[p.geometry.type]-qo[g.geometry.type];return x===0&&p.geometry.type===To.POLYGON?p.area-g.area:x}function _l(p){return p.map(g=>(g.geometry.type===To.POLYGON&&(g.area=id.geometry({type:To.FEATURE,property:{},geometry:g.geometry})),g)).sort(Va).map(g=>(delete g.area,g))}var Zl=_l;function ul(p,g=0){return[[p.point.x-g,p.point.y-g],[p.point.x+g,p.point.y+g]]}var Kc=ul;function Qu(p){if(this._items={},this._nums={},this._length=p?p.length:0,!!p)for(let g=0,x=p.length;g<x;g++)this.add(p[g]),p[g]!==void 0&&(typeof p[g]=="string"?this._items[p[g]]=g:this._nums[p[g]]=g)}Qu.prototype.add=function(p){return this.has(p)?this:(this._length++,typeof p=="string"?this._items[p]=this._length:this._nums[p]=this._length,this)},Qu.prototype.delete=function(p){return this.has(p)===!1?this:(this._length--,delete this._items[p],delete this._nums[p],this)},Qu.prototype.has=function(p){return typeof p!="string"&&typeof p!="number"?!1:this._items[p]!==void 0||this._nums[p]!==void 0},Qu.prototype.values=function(){const p=[];return Object.keys(this._items).forEach(g=>{p.push({k:g,v:this._items[g]})}),Object.keys(this._nums).forEach(g=>{p.push({k:JSON.parse(g),v:this._nums[g]})}),p.sort((g,x)=>g.v-x.v).map(g=>g.k)},Qu.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var di=Qu;const Ni=[ll.FEATURE,ll.MIDPOINT,ll.VERTEX];var vd={click:gl,touch:gr};function gl(p,g,x){return od(p,g,x,x.options.clickBuffer)}function gr(p,g,x){return od(p,g,x,x.options.touchBuffer)}function od(p,g,x,L){if(x.map===null)return[];const V=p?Kc(p,L):g,ee={};x.options.styles&&(ee.layers=x.options.styles.map(De=>De.id).filter(De=>x.map.getLayer(De)!=null));const _e=x.map.queryRenderedFeatures(V,ee).filter(De=>Ni.indexOf(De.properties.meta)!==-1),Ce=new di,Be=[];return _e.forEach(De=>{const $e=De.properties.id;Ce.has($e)||(Ce.add($e),Be.push(De))}),Zl(Be)}function yd(p,g){const x=vd.click(p,null,g),L={mouse:rs.NONE};return x[0]&&(L.mouse=x[0].properties.active===Fl.ACTIVE?rs.MOVE:rs.POINTER,L.feature=x[0].properties.meta),g.events.currentModeName().indexOf("draw")!==-1&&(L.mouse=rs.ADD),g.ui.queueMapClasses(L),g.ui.updateMapClasses(),x[0]}function rf(p,g){const x=p.x-g.x,L=p.y-g.y;return Math.sqrt(x*x+L*L)}const sm=4,th=12,yh=500;function nh(p,g,x={}){const L=x.fineTolerance!=null?x.fineTolerance:sm,V=x.grossTolerance!=null?x.grossTolerance:th,ee=x.interval!=null?x.interval:yh;p.point=p.point||g.point,p.time=p.time||g.time;const _e=rf(p.point,g.point);return _e<L||_e<V&&g.time-p.time<ee}const km=25,xh=250;function Ud(p,g,x={}){const L=x.tolerance!=null?x.tolerance:km,V=x.interval!=null?x.interval:xh;return p.point=p.point||g.point,p.time=p.time||g.time,rf(p.point,g.point)<L&&g.time-p.time<V}let of="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",bh=(p,g=21)=>(x=g)=>{let L="",V=x|0;for(;V--;)L+=p[Math.random()*p.length|0];return L},rp=(p=21)=>{let g="",x=p|0;for(;x--;)g+=of[Math.random()*64|0];return g};const Ip=bh("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function xd(){return Ip()}const qu=function(p,g){this.ctx=p,this.properties=g.properties||{},this.coordinates=g.geometry.coordinates,this.id=g.id||xd(),this.type=g.geometry.type};qu.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},qu.prototype.incomingCoords=function(p){this.setCoordinates(p)},qu.prototype.setCoordinates=function(p){this.coordinates=p,this.changed()},qu.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},qu.prototype.setProperty=function(p,g){this.properties[p]=g},qu.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:To.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},qu.prototype.internal=function(p){const g={id:this.id,meta:ll.FEATURE,"meta:type":this.type,active:Fl.INACTIVE,mode:p};if(this.ctx.options.userProperties)for(const x in this.properties)g[`user_${x}`]=this.properties[x];return{type:To.FEATURE,properties:g,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Uu=qu;const Rc=function(p,g){Uu.call(this,p,g)};Rc.prototype=Object.create(Uu.prototype),Rc.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Rc.prototype.updateCoordinate=function(p,g,x){arguments.length===3?this.coordinates=[g,x]:this.coordinates=[p,g],this.changed()},Rc.prototype.getCoordinate=function(){return this.getCoordinates()};var Vd=Rc;const Bl=function(p,g){Uu.call(this,p,g)};Bl.prototype=Object.create(Uu.prototype),Bl.prototype.isValid=function(){return this.coordinates.length>1},Bl.prototype.addCoordinate=function(p,g,x){this.changed();const L=parseInt(p,10);this.coordinates.splice(L,0,[g,x])},Bl.prototype.getCoordinate=function(p){const g=parseInt(p,10);return JSON.parse(JSON.stringify(this.coordinates[g]))},Bl.prototype.removeCoordinate=function(p){this.changed(),this.coordinates.splice(parseInt(p,10),1)},Bl.prototype.updateCoordinate=function(p,g,x){const L=parseInt(p,10);this.coordinates[L]=[g,x],this.changed()};var wh=Bl;const Yc=function(p,g){Uu.call(this,p,g),this.coordinates=this.coordinates.map(x=>x.slice(0,-1))};Yc.prototype=Object.create(Uu.prototype),Yc.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(p=>p.length>2)},Yc.prototype.incomingCoords=function(p){this.coordinates=p.map(g=>g.slice(0,-1)),this.changed()},Yc.prototype.setCoordinates=function(p){this.coordinates=p,this.changed()},Yc.prototype.addCoordinate=function(p,g,x){this.changed();const L=p.split(".").map(ee=>parseInt(ee,10));this.coordinates[L[0]].splice(L[1],0,[g,x])},Yc.prototype.removeCoordinate=function(p){this.changed();const g=p.split(".").map(L=>parseInt(L,10)),x=this.coordinates[g[0]];x&&(x.splice(g[1],1),x.length<3&&this.coordinates.splice(g[0],1))},Yc.prototype.getCoordinate=function(p){const g=p.split(".").map(L=>parseInt(L,10)),x=this.coordinates[g[0]];return JSON.parse(JSON.stringify(x[g[1]]))},Yc.prototype.getCoordinates=function(){return this.coordinates.map(p=>p.concat([p[0]]))},Yc.prototype.updateCoordinate=function(p,g,x){this.changed();const L=p.split("."),V=parseInt(L[0],10),ee=parseInt(L[1],10);this.coordinates[V]===void 0&&(this.coordinates[V]=[]),this.coordinates[V][ee]=[g,x]};var ks=Yc;const ra={MultiPoint:Vd,MultiLineString:wh,MultiPolygon:ks},Uh=(p,g,x,L,V)=>{const ee=x.split("."),_e=parseInt(ee[0],10),Ce=ee[1]?ee.slice(1).join("."):null;return p[_e][g](Ce,L,V)},Vu=function(p,g){if(Uu.call(this,p,g),delete this.coordinates,this.model=ra[g.geometry.type],this.model===void 0)throw new TypeError(`${g.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(g.geometry.coordinates)};Vu.prototype=Object.create(Uu.prototype),Vu.prototype._coordinatesToFeatures=function(p){const g=this.model.bind(this);return p.map(x=>new g(this.ctx,{id:xd(),type:To.FEATURE,properties:{},geometry:{coordinates:x,type:this.type.replace("Multi","")}}))},Vu.prototype.isValid=function(){return this.features.every(p=>p.isValid())},Vu.prototype.setCoordinates=function(p){this.features=this._coordinatesToFeatures(p),this.changed()},Vu.prototype.getCoordinate=function(p){return Uh(this.features,"getCoordinate",p)},Vu.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(p=>p.type===To.POLYGON?p.getCoordinates():p.coordinates)))},Vu.prototype.updateCoordinate=function(p,g,x){Uh(this.features,"updateCoordinate",p,g,x),this.changed()},Vu.prototype.addCoordinate=function(p,g,x){Uh(this.features,"addCoordinate",p,g,x),this.changed()},Vu.prototype.removeCoordinate=function(p){Uh(this.features,"removeCoordinate",p),this.changed()},Vu.prototype.getFeatures=function(){return this.features};var Od=Vu;function Ha(p){this.map=p.map,this.drawConfig=JSON.parse(JSON.stringify(p.options||{})),this._ctx=p}Ha.prototype.setSelected=function(p){return this._ctx.store.setSelected(p)},Ha.prototype.setSelectedCoordinates=function(p){this._ctx.store.setSelectedCoordinates(p),p.reduce((g,x)=>(g[x.feature_id]===void 0&&(g[x.feature_id]=!0,this._ctx.store.get(x.feature_id).changed()),g),{})},Ha.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ha.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ha.prototype.isSelected=function(p){return this._ctx.store.isSelected(p)},Ha.prototype.getFeature=function(p){return this._ctx.store.get(p)},Ha.prototype.select=function(p){return this._ctx.store.select(p)},Ha.prototype.deselect=function(p){return this._ctx.store.deselect(p)},Ha.prototype.deleteFeature=function(p,g={}){return this._ctx.store.delete(p,g)},Ha.prototype.addFeature=function(p,g={}){return this._ctx.store.add(p,g)},Ha.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ha.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ha.prototype.setActionableState=function(p={}){const g={trash:p.trash||!1,combineFeatures:p.combineFeatures||!1,uncombineFeatures:p.uncombineFeatures||!1};return this._ctx.events.actionable(g)},Ha.prototype.changeMode=function(p,g={},x={}){return this._ctx.events.changeMode(p,g,x)},Ha.prototype.fire=function(p,g){return this._ctx.events.fire(p,g)},Ha.prototype.updateUIClasses=function(p){return this._ctx.ui.queueMapClasses(p)},Ha.prototype.activateUIButton=function(p){return this._ctx.ui.setActiveButton(p)},Ha.prototype.featuresAt=function(p,g,x="click"){if(x!=="click"&&x!=="touch")throw new Error("invalid buffer type");return vd[x](p,g,this._ctx)},Ha.prototype.newFeature=function(p){const g=p.geometry.type;return g===To.POINT?new Vd(this._ctx,p):g===To.LINE_STRING?new wh(this._ctx,p):g===To.POLYGON?new ks(this._ctx,p):new Od(this._ctx,p)},Ha.prototype.isInstanceOf=function(p,g){if(p===To.POINT)return g instanceof Vd;if(p===To.LINE_STRING)return g instanceof wh;if(p===To.POLYGON)return g instanceof ks;if(p==="MultiFeature")return g instanceof Od;throw new Error(`Unknown feature class: ${p}`)},Ha.prototype.doRender=function(p){return this._ctx.store.featureChanged(p)};var Rf=Ha;Ha.prototype.onSetup=function(){},Ha.prototype.onDrag=function(){},Ha.prototype.onClick=function(){},Ha.prototype.onMouseMove=function(){},Ha.prototype.onMouseDown=function(){},Ha.prototype.onMouseUp=function(){},Ha.prototype.onMouseOut=function(){},Ha.prototype.onKeyUp=function(){},Ha.prototype.onKeyDown=function(){},Ha.prototype.onTouchStart=function(){},Ha.prototype.onTouchMove=function(){},Ha.prototype.onTouchEnd=function(){},Ha.prototype.onTap=function(){},Ha.prototype.onStop=function(){},Ha.prototype.onTrash=function(){},Ha.prototype.onCombineFeature=function(){},Ha.prototype.onUncombineFeature=function(){},Ha.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const Rd={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},cl=Object.keys(Rd);function Js(p){const g=Object.keys(p);return function(x,L={}){let V={};const ee=g.reduce((Ce,Be)=>(Ce[Be]=p[Be],Ce),new Rf(x));function _e(Ce){return Be=>ee[Ce](V,Be)}return{start(){V=ee.onSetup(L),cl.forEach(Ce=>{const Be=Rd[Ce];let De=()=>!1;p[Be]&&(De=()=>!0),this.on(Ce,De,_e(Be))})},stop(){ee.onStop(V)},trash(){ee.onTrash(V)},combineFeatures(){ee.onCombineFeatures(V)},uncombineFeatures(){ee.onUncombineFeatures(V)},render(Ce,Be){ee.toDisplayFeatures(V,Ce,Be)}}}}function Gu(p){const g=Object.keys(p.options.modes).reduce((Ke,pt)=>(Ke[pt]=Js(p.options.modes[pt]),Ke),{});let x={},L={};const V={};let ee=null,_e=null;V.drag=function(Ke,pt){pt({point:Ke.point,time:new Date().getTime()})?(p.ui.queueMapClasses({mouse:rs.DRAG}),_e.drag(Ke)):Ke.originalEvent.stopPropagation()},V.mousedrag=function(Ke){V.drag(Ke,pt=>!nh(x,pt))},V.touchdrag=function(Ke){V.drag(Ke,pt=>!Ud(L,pt))},V.mousemove=function(Ke){if((Ke.originalEvent.buttons!==void 0?Ke.originalEvent.buttons:Ke.originalEvent.which)===1)return V.mousedrag(Ke);const $t=yd(Ke,p);Ke.featureTarget=$t,_e.mousemove(Ke)},V.mousedown=function(Ke){x={time:new Date().getTime(),point:Ke.point};const pt=yd(Ke,p);Ke.featureTarget=pt,_e.mousedown(Ke)},V.mouseup=function(Ke){const pt=yd(Ke,p);Ke.featureTarget=pt,nh(x,{point:Ke.point,time:new Date().getTime()})?_e.click(Ke):_e.mouseup(Ke)},V.mouseout=function(Ke){_e.mouseout(Ke)},V.touchstart=function(Ke){if(!p.options.touchEnabled)return;L={time:new Date().getTime(),point:Ke.point};const pt=vd.touch(Ke,null,p)[0];Ke.featureTarget=pt,_e.touchstart(Ke)},V.touchmove=function(Ke){if(p.options.touchEnabled)return _e.touchmove(Ke),V.touchdrag(Ke)},V.touchend=function(Ke){if(Ke.originalEvent.preventDefault(),!p.options.touchEnabled)return;const pt=vd.touch(Ke,null,p)[0];Ke.featureTarget=pt,Ud(L,{time:new Date().getTime(),point:Ke.point})?_e.tap(Ke):_e.touchend(Ke)};const Ce=Ke=>!(Ke===8||Ke===46||Ke>=48&&Ke<=57);V.keydown=function(Ke){(Ke.srcElement||Ke.target).classList.contains(mu.CANVAS)&&((Ke.keyCode===8||Ke.keyCode===46)&&p.options.controls.trash?(Ke.preventDefault(),_e.trash()):Ce(Ke.keyCode)?_e.keydown(Ke):Ke.keyCode===49&&p.options.controls.point?Be(is.DRAW_POINT):Ke.keyCode===50&&p.options.controls.line_string?Be(is.DRAW_LINE_STRING):Ke.keyCode===51&&p.options.controls.polygon&&Be(is.DRAW_POLYGON))},V.keyup=function(Ke){Ce(Ke.keyCode)&&_e.keyup(Ke)},V.zoomend=function(){p.store.changeZoom()},V.data=function(Ke){if(Ke.dataType==="style"){const{setup:pt,map:$t,options:Pt,store:an}=p;Pt.styles.some(un=>$t.getLayer(un.id))||(pt.addLayers(),an.setDirty(),an.render())}};function Be(Ke,pt,$t={}){_e.stop();const Pt=g[Ke];if(Pt===void 0)throw new Error(`${Ke} is not valid`);ee=Ke;const an=Pt(p,pt);_e=Bc(an,p),$t.silent||p.map.fire(Xs.MODE_CHANGE,{mode:Ke}),p.store.setDirty(),p.store.render()}const De={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function $e(Ke){let pt=!1;Object.keys(Ke).forEach($t=>{if(De[$t]===void 0)throw new Error("Invalid action type");De[$t]!==Ke[$t]&&(pt=!0),De[$t]=Ke[$t]}),pt&&p.map.fire(Xs.ACTIONABLE,{actions:De})}return{start(){ee=p.options.defaultMode,_e=Bc(g[ee](p),p)},changeMode:Be,actionable:$e,currentModeName(){return ee},currentModeRender(Ke,pt){return _e.render(Ke,pt)},fire(Ke,pt){p.map&&p.map.fire(Ke,pt)},addEventListeners(){p.map.on("mousemove",V.mousemove),p.map.on("mousedown",V.mousedown),p.map.on("mouseup",V.mouseup),p.map.on("data",V.data),p.map.on("touchmove",V.touchmove),p.map.on("touchstart",V.touchstart),p.map.on("touchend",V.touchend),p.container.addEventListener("mouseout",V.mouseout),p.options.keybindings&&(p.container.addEventListener("keydown",V.keydown),p.container.addEventListener("keyup",V.keyup))},removeEventListeners(){p.map.off("mousemove",V.mousemove),p.map.off("mousedown",V.mousedown),p.map.off("mouseup",V.mouseup),p.map.off("data",V.data),p.map.off("touchmove",V.touchmove),p.map.off("touchstart",V.touchstart),p.map.off("touchend",V.touchend),p.container.removeEventListener("mouseout",V.mouseout),p.options.keybindings&&(p.container.removeEventListener("keydown",V.keydown),p.container.removeEventListener("keyup",V.keyup))},trash(Ke){_e.trash(Ke)},combineFeatures(){_e.combineFeatures()},uncombineFeatures(){_e.uncombineFeatures()},getMode(){return ee}}}function Vh(p){return[].concat(p).filter(g=>g!==void 0)}var Gd=Vh;function af(){const p=this;if(!(p.ctx.map&&p.ctx.map.getSource(sl.HOT)!==void 0))return Be();const x=p.ctx.events.currentModeName();p.ctx.ui.queueMapClasses({mode:x});let L=[],V=[];p.isDirty?V=p.getAllIds():(L=p.getChangedIds().filter(De=>p.get(De)!==void 0),V=p.sources.hot.filter(De=>De.properties.id&&L.indexOf(De.properties.id)===-1&&p.get(De.properties.id)!==void 0).map(De=>De.properties.id)),p.sources.hot=[];const ee=p.sources.cold.length;p.sources.cold=p.isDirty?[]:p.sources.cold.filter(De=>{const $e=De.properties.id||De.properties.parent;return L.indexOf($e)===-1});const _e=ee!==p.sources.cold.length||V.length>0;L.forEach(De=>Ce(De,"hot")),V.forEach(De=>Ce(De,"cold"));function Ce(De,$e){const Ke=p.get(De).internal(x);p.ctx.events.currentModeRender(Ke,pt=>{pt.properties.mode=x,p.sources[$e].push(pt)})}_e&&p.ctx.map.getSource(sl.COLD).setData({type:To.FEATURE_COLLECTION,features:p.sources.cold}),p.ctx.map.getSource(sl.HOT).setData({type:To.FEATURE_COLLECTION,features:p.sources.hot}),Be();function Be(){p.isDirty=!1,p.clearChangedIds()}}function dl(p){this._features={},this._featureIds=new di,this._selectedFeatureIds=new di,this._selectedCoordinates=[],this._changedFeatureIds=new di,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=p,this.sources={hot:[],cold:[]};let g;this.render=()=>{g||(g=requestAnimationFrame(()=>{g=null,af.call(this),this._emitSelectionChange&&(this.ctx.events.fire(Xs.SELECTION_CHANGE,{features:this.getSelected().map(x=>x.toGeoJSON()),points:this.getSelectedCoordinates().map(x=>({type:To.FEATURE,properties:{},geometry:{type:To.POINT,coordinates:x.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(Xs.RENDER,{})}))},this.isDirty=!1}dl.prototype.createRenderBatch=function(){const p=this.render;let g=0;return this.render=function(){g++},()=>{this.render=p,g>0&&this.render()}},dl.prototype.setDirty=function(){return this.isDirty=!0,this},dl.prototype.featureCreated=function(p,g={}){if(this._changedFeatureIds.add(p),(g.silent!=null?g.silent:this.ctx.options.suppressAPIEvents)!==!0){const L=this.get(p);this.ctx.events.fire(Xs.CREATE,{features:[L.toGeoJSON()]})}return this},dl.prototype.featureChanged=function(p,g={}){return this._changedFeatureIds.add(p),(g.silent!=null?g.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(Xs.UPDATE,{action:g.action?g.action:zl.CHANGE_COORDINATES,features:[this.get(p).toGeoJSON()]}),this},dl.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},dl.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},dl.prototype.getAllIds=function(){return this._featureIds.values()},dl.prototype.add=function(p,g={}){return this._features[p.id]=p,this._featureIds.add(p.id),this.featureCreated(p.id,{silent:g.silent}),this},dl.prototype.delete=function(p,g={}){const x=[];return Gd(p).forEach(L=>{this._featureIds.has(L)&&(this._featureIds.delete(L),this._selectedFeatureIds.delete(L),g.silent||x.indexOf(this._features[L])===-1&&x.push(this._features[L].toGeoJSON()),delete this._features[L],this.isDirty=!0)}),x.length&&this.ctx.events.fire(Xs.DELETE,{features:x}),cc(this,g),this},dl.prototype.get=function(p){return this._features[p]},dl.prototype.getAll=function(){return Object.keys(this._features).map(p=>this._features[p])},dl.prototype.select=function(p,g={}){return Gd(p).forEach(x=>{this._selectedFeatureIds.has(x)||(this._selectedFeatureIds.add(x),this._changedFeatureIds.add(x),g.silent||(this._emitSelectionChange=!0))}),this},dl.prototype.deselect=function(p,g={}){return Gd(p).forEach(x=>{this._selectedFeatureIds.has(x)&&(this._selectedFeatureIds.delete(x),this._changedFeatureIds.add(x),g.silent||(this._emitSelectionChange=!0))}),cc(this,g),this},dl.prototype.clearSelected=function(p={}){return this.deselect(this._selectedFeatureIds.values(),{silent:p.silent}),this},dl.prototype.setSelected=function(p,g={}){return p=Gd(p),this.deselect(this._selectedFeatureIds.values().filter(x=>p.indexOf(x)===-1),{silent:g.silent}),this.select(p.filter(x=>!this._selectedFeatureIds.has(x)),{silent:g.silent}),this},dl.prototype.setSelectedCoordinates=function(p){return this._selectedCoordinates=p,this._emitSelectionChange=!0,this},dl.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},dl.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},dl.prototype.getSelected=function(){return this.getSelectedIds().map(p=>this.get(p))},dl.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(g=>({coordinates:this.get(g.feature_id).getCoordinate(g.coord_path)}))},dl.prototype.isSelected=function(p){return this._selectedFeatureIds.has(p)},dl.prototype.setFeatureProperty=function(p,g,x,L={}){this.get(p).setProperty(g,x),this.featureChanged(p,{silent:L.silent,action:zl.CHANGE_PROPERTIES})};function cc(p,g={}){const x=p._selectedCoordinates.filter(L=>p._selectedFeatureIds.has(L.feature_id));p._selectedCoordinates.length!==x.length&&!g.silent&&(p._emitSelectionChange=!0),p._selectedCoordinates=x}dl.prototype.storeMapConfig=function(){_d.forEach(p=>{this.ctx.map[p]&&(this._mapInitialConfig[p]=this.ctx.map[p].isEnabled())})},dl.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(p=>{this._mapInitialConfig[p]?this.ctx.map[p].enable():this.ctx.map[p].disable()})},dl.prototype.getInitialConfigValue=function(p){return this._mapInitialConfig[p]!==void 0?this._mapInitialConfig[p]:!0};const rh=["mode","feature","mouse"];function ip(p){const g={};let x=null,L={mode:null,feature:null,mouse:null},V={mode:null,feature:null,mouse:null};function ee(){_e({mode:null,feature:null,mouse:null}),Ce()}function _e(pt){V=Object.assign(V,pt)}function Ce(){if(!p.container)return;const pt=[],$t=[];rh.forEach(Pt=>{V[Pt]!==L[Pt]&&(pt.push(`${Pt}-${L[Pt]}`),V[Pt]!==null&&$t.push(`${Pt}-${V[Pt]}`))}),pt.length>0&&p.container.classList.remove(...pt),$t.length>0&&p.container.classList.add(...$t),L=Object.assign(L,V)}function Be(pt,$t={}){const Pt=document.createElement("button");return Pt.className=`${mu.CONTROL_BUTTON} ${$t.className}`,Pt.setAttribute("title",$t.title),$t.container.appendChild(Pt),Pt.addEventListener("click",an=>{if(an.preventDefault(),an.stopPropagation(),an.target===x){De(),$t.onDeactivate();return}$e(pt),$t.onActivate()},!0),Pt}function De(){x&&(x.classList.remove(mu.ACTIVE_BUTTON),x=null)}function $e(pt){De();const $t=g[pt];$t&&$t&&pt!=="trash"&&($t.classList.add(mu.ACTIVE_BUTTON),x=$t)}function dt(){const pt=p.options.controls,$t=document.createElement("div");return $t.className=`${mu.CONTROL_GROUP} ${mu.CONTROL_BASE}`,pt&&(pt[Wa.LINE]&&(g[Wa.LINE]=Be(Wa.LINE,{container:$t,className:mu.CONTROL_BUTTON_LINE,title:`LineString tool ${p.options.keybindings?"(l)":""}`,onActivate:()=>p.events.changeMode(is.DRAW_LINE_STRING),onDeactivate:()=>p.events.trash()})),pt[Wa.POLYGON]&&(g[Wa.POLYGON]=Be(Wa.POLYGON,{container:$t,className:mu.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${p.options.keybindings?"(p)":""}`,onActivate:()=>p.events.changeMode(is.DRAW_POLYGON),onDeactivate:()=>p.events.trash()})),pt[Wa.POINT]&&(g[Wa.POINT]=Be(Wa.POINT,{container:$t,className:mu.CONTROL_BUTTON_POINT,title:`Marker tool ${p.options.keybindings?"(m)":""}`,onActivate:()=>p.events.changeMode(is.DRAW_POINT),onDeactivate:()=>p.events.trash()})),pt.trash&&(g.trash=Be("trash",{container:$t,className:mu.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{p.events.trash()}})),pt.combine_features&&(g.combine_features=Be("combineFeatures",{container:$t,className:mu.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{p.events.combineFeatures()}})),pt.uncombine_features&&(g.uncombine_features=Be("uncombineFeatures",{container:$t,className:mu.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{p.events.uncombineFeatures()}}))),$t}function Ke(){Object.keys(g).forEach(pt=>{const $t=g[pt];$t.parentNode&&$t.parentNode.removeChild($t),delete g[pt]})}return{setActiveButton:$e,queueMapClasses:_e,updateMapClasses:Ce,clearMapClasses:ee,addButtons:dt,removeButtons:Ke}}function Lf(p){let g=null,x=null;const L={onRemove(){return p.map.off("load",L.connect),clearInterval(x),L.removeLayers(),p.store.restoreMapConfig(),p.ui.removeButtons(),p.events.removeEventListeners(),p.ui.clearMapClasses(),p.boxZoomInitial&&p.map.boxZoom.enable(),p.map=null,p.container=null,p.store=null,g&&g.parentNode&&g.parentNode.removeChild(g),g=null,this},connect(){p.map.off("load",L.connect),clearInterval(x),L.addLayers(),p.store.storeMapConfig(),p.events.addEventListeners()},onAdd(V){if(p.map=V,p.events=Gu(p),p.ui=ip(p),p.container=V.getContainer(),p.store=new dl(p),g=p.ui.addButtons(),p.options.boxSelect){p.boxZoomInitial=V.boxZoom.isEnabled(),V.boxZoom.disable();const ee=V.dragPan.isEnabled();V.dragPan.disable(),V.dragPan.enable(),ee||V.dragPan.disable()}return V.loaded()?L.connect():(V.on("load",L.connect),x=setInterval(()=>{V.loaded()&&L.connect()},16)),p.events.start(),g},addLayers(){p.map.addSource(sl.COLD,{data:{type:To.FEATURE_COLLECTION,features:[]},type:"geojson"}),p.map.addSource(sl.HOT,{data:{type:To.FEATURE_COLLECTION,features:[]},type:"geojson"}),p.options.styles.forEach(V=>{p.map.addLayer(V)}),p.store.setDirty(!0),p.store.render()},removeLayers(){p.options.styles.forEach(V=>{p.map.getLayer(V.id)&&p.map.removeLayer(V.id)}),p.map.getSource(sl.COLD)&&p.map.removeSource(sl.COLD),p.map.getSource(sl.HOT)&&p.map.removeSource(sl.HOT)}};return p.setup=L,L}const ad="#3bb2d0",yc="#fbb03b",_u="#fff";var Df=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],yc,ad],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],yc,ad],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":_u}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],yc,ad]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":_u}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":yc}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":yc}}];function Gh(p){return function(g){const x=g.featureTarget;return!x||!x.properties?!1:x.properties.meta===p}}function sf(p){return!p.originalEvent||!p.originalEvent.shiftKey?!1:p.originalEvent.button===0}function Xc(p){return!p.featureTarget||!p.featureTarget.properties?!1:p.featureTarget.properties.active===Fl.ACTIVE&&p.featureTarget.properties.meta===ll.FEATURE}function lf(p){return!p.featureTarget||!p.featureTarget.properties?!1:p.featureTarget.properties.active===Fl.INACTIVE&&p.featureTarget.properties.meta===ll.FEATURE}function sd(p){return p.featureTarget===void 0}function uf(p){return!p.featureTarget||!p.featureTarget.properties?!1:p.featureTarget.properties.meta===ll.FEATURE}function $d(p){const g=p.featureTarget;return!g||!g.properties?!1:g.properties.meta===ll.VERTEX}function cf(p){return p.originalEvent?p.originalEvent.shiftKey===!0:!1}function df(p){return p.keyCode===27}function Ld(p){return p.keyCode===13}function kf(){return!0}function bd(p,g){this.x=p,this.y=g}bd.prototype={clone(){return new bd(this.x,this.y)},add(p){return this.clone()._add(p)},sub(p){return this.clone()._sub(p)},multByPoint(p){return this.clone()._multByPoint(p)},divByPoint(p){return this.clone()._divByPoint(p)},mult(p){return this.clone()._mult(p)},div(p){return this.clone()._div(p)},rotate(p){return this.clone()._rotate(p)},rotateAround(p,g){return this.clone()._rotateAround(p,g)},matMult(p){return this.clone()._matMult(p)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(p){return this.x===p.x&&this.y===p.y},dist(p){return Math.sqrt(this.distSqr(p))},distSqr(p){const g=p.x-this.x,x=p.y-this.y;return g*g+x*x},angle(){return Math.atan2(this.y,this.x)},angleTo(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith(p){return this.angleWithSep(p.x,p.y)},angleWithSep(p,g){return Math.atan2(this.x*g-this.y*p,this.x*p+this.y*g)},_matMult(p){const g=p[0]*this.x+p[1]*this.y,x=p[2]*this.x+p[3]*this.y;return this.x=g,this.y=x,this},_add(p){return this.x+=p.x,this.y+=p.y,this},_sub(p){return this.x-=p.x,this.y-=p.y,this},_mult(p){return this.x*=p,this.y*=p,this},_div(p){return this.x/=p,this.y/=p,this},_multByPoint(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint(p){return this.x/=p.x,this.y/=p.y,this},_unit(){return this._div(this.mag()),this},_perp(){const p=this.y;return this.y=this.x,this.x=-p,this},_rotate(p){const g=Math.cos(p),x=Math.sin(p),L=g*this.x-x*this.y,V=x*this.x+g*this.y;return this.x=L,this.y=V,this},_rotateAround(p,g){const x=Math.cos(p),L=Math.sin(p),V=g.x+x*(this.x-g.x)-L*(this.y-g.y),ee=g.y+L*(this.x-g.x)+x*(this.y-g.y);return this.x=V,this.y=ee,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:bd},bd.convert=function(p){if(p instanceof bd)return p;if(Array.isArray(p))return new bd(+p[0],+p[1]);if(p.x!==void 0&&p.y!==void 0)return new bd(+p.x,+p.y);throw new Error("Expected [x, y] or {x, y} point format")};function hf(p,g){const x=g.getBoundingClientRect();return new bd(p.clientX-x.left-(g.clientLeft||0),p.clientY-x.top-(g.clientTop||0))}var op=hf;function ih(p,g,x,L){return{type:To.FEATURE,properties:{meta:ll.VERTEX,parent:p,coord_path:x,active:L?Fl.ACTIVE:Fl.INACTIVE},geometry:{type:To.POINT,coordinates:g}}}function ff(p,g,x){const L=g.geometry.coordinates,V=x.geometry.coordinates;if(L[1]>uc||L[1]<jc||V[1]>uc||V[1]<jc)return null;const ee={lng:(L[0]+V[0])/2,lat:(L[1]+V[1])/2};return{type:To.FEATURE,properties:{meta:ll.MIDPOINT,parent:p,lng:ee.lng,lat:ee.lat,coord_path:x.properties.coord_path},geometry:{type:To.POINT,coordinates:[ee.lng,ee.lat]}}}function Mp(p,g={},x=null){const{type:L,coordinates:V}=p.geometry,ee=p.properties&&p.properties.id;let _e=[];L===To.POINT?_e.push(ih(ee,V,x,Be(x))):L===To.POLYGON?V.forEach(($e,dt)=>{Ce($e,x!==null?`${x}.${dt}`:String(dt))}):L===To.LINE_STRING?Ce(V,x):L.indexOf(To.MULTI_PREFIX)===0&&De();function Ce($e,dt){let Ke="",pt=null;$e.forEach(($t,Pt)=>{const an=dt!=null?`${dt}.${Pt}`:String(Pt),An=ih(ee,$t,an,Be(an));if(g.midpoints&&pt){const yn=ff(ee,pt,An);yn&&_e.push(yn)}pt=An;const un=JSON.stringify($t);Ke!==un&&_e.push(An),Pt===0&&(Ke=un)})}function Be($e){return g.selectedPaths?g.selectedPaths.indexOf($e)!==-1:!1}function De(){const $e=L.replace(To.MULTI_PREFIX,"");V.forEach((dt,Ke)=>{const pt={type:To.FEATURE,properties:p.properties,geometry:{type:$e,coordinates:dt}};_e=_e.concat(Mp(pt,g,Ke))})}return _e}var ap=Mp,wd={enable(p){setTimeout(()=>{!p.map||!p.map.doubleClickZoom||!p._ctx||!p._ctx.store||!p._ctx.store.getInitialConfigValue||p._ctx.store.getInitialConfigValue("doubleClickZoom")&&p.map.doubleClickZoom.enable()},0)},disable(p){setTimeout(()=>{!p.map||!p.map.doubleClickZoom||p.map.doubleClickZoom.disable()},0)}};const{LAT_MIN:pf,LAT_MAX:Nf,LAT_RENDERED_MIN:mf,LAT_RENDERED_MAX:_f,LNG_MIN:Jc,LNG_MAX:gf}=E;function Nm(p){const g={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[p.geometry.type],x=[p.geometry.coordinates].flat(g),L=x.map(Ce=>Ce[0]),V=x.map(Ce=>Ce[1]),ee=Ce=>Math.min.apply(null,Ce),_e=Ce=>Math.max.apply(null,Ce);return[ee(L),ee(V),_e(L),_e(V)]}function lm(p,g){let x=pf,L=Nf,V=pf,ee=Nf,_e=gf,Ce=Jc;p.forEach(De=>{const $e=Nm(De),dt=$e[1],Ke=$e[3],pt=$e[0],$t=$e[2];dt>x&&(x=dt),Ke<L&&(L=Ke),Ke>V&&(V=Ke),dt<ee&&(ee=dt),pt<_e&&(_e=pt),$t>Ce&&(Ce=$t)});const Be=g;return x+Be.lat>_f&&(Be.lat=_f-x),V+Be.lat>Nf&&(Be.lat=Nf-V),L+Be.lat<mf&&(Be.lat=mf-L),ee+Be.lat<pf&&(Be.lat=pf-ee),_e+Be.lng<=Jc&&(Be.lng+=Math.ceil(Math.abs(Be.lng)/360)*360),Ce+Be.lng>=gf&&(Be.lng-=Math.ceil(Math.abs(Be.lng)/360)*360),Be}function Cp(p,g){const x=lm(p.map(L=>L.toGeoJSON()),g);p.forEach(L=>{const V=L.getCoordinates(),ee=De=>{const $e={lng:De[0]+x.lng,lat:De[1]+x.lat};return[$e.lng,$e.lat]},_e=De=>De.map($e=>ee($e)),Ce=De=>De.map($e=>_e($e));let Be;L.type===To.POINT?Be=ee(V):L.type===To.LINE_STRING||L.type===To.MULTI_POINT?Be=V.map(ee):L.type===To.POLYGON||L.type===To.MULTI_LINE_STRING?Be=V.map(_e):L.type===To.MULTI_POLYGON&&(Be=V.map(Ce)),L.incomingCoords(Be)})}const za={};za.onSetup=function(p){const g={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:p.featureIds||[]};return this.setSelected(g.initiallySelectedFeatureIds.filter(x=>this.getFeature(x)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),g},za.fireUpdate=function(){this.fire(Xs.UPDATE,{action:zl.MOVE,features:this.getSelected().map(p=>p.toGeoJSON())})},za.fireActionable=function(){const p=this.getSelected(),g=p.filter(ee=>this.isInstanceOf("MultiFeature",ee));let x=!1;if(p.length>1){x=!0;const ee=p[0].type.replace("Multi","");p.forEach(_e=>{_e.type.replace("Multi","")!==ee&&(x=!1)})}const L=g.length>0,V=p.length>0;this.setActionableState({combineFeatures:x,uncombineFeatures:L,trash:V})},za.getUniqueIds=function(p){return p.length?p.map(x=>x.properties.id).filter(x=>x!==void 0).reduce((x,L)=>(x.add(L),x),new di).values():[]},za.stopExtendedInteractions=function(p){p.boxSelectElement&&(p.boxSelectElement.parentNode&&p.boxSelectElement.parentNode.removeChild(p.boxSelectElement),p.boxSelectElement=null),(p.canDragMove||p.canBoxSelect)&&p.initialDragPanState===!0&&this.map.dragPan.enable(),p.boxSelecting=!1,p.canBoxSelect=!1,p.dragMoving=!1,p.canDragMove=!1},za.onStop=function(){wd.enable(this)},za.onMouseMove=function(p,g){return uf(g)&&p.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(p),!0},za.onMouseOut=function(p){return p.dragMoving?this.fireUpdate():!0},za.onTap=za.onClick=function(p,g){if(sd(g))return this.clickAnywhere(p,g);if(Gh(ll.VERTEX)(g))return this.clickOnVertex(p,g);if(uf(g))return this.clickOnFeature(p,g)},za.clickAnywhere=function(p){const g=this.getSelectedIds();g.length&&(this.clearSelectedFeatures(),g.forEach(x=>this.doRender(x))),wd.enable(this),this.stopExtendedInteractions(p)},za.clickOnVertex=function(p,g){this.changeMode(is.DIRECT_SELECT,{featureId:g.featureTarget.properties.parent,coordPath:g.featureTarget.properties.coord_path,startPos:g.lngLat}),this.updateUIClasses({mouse:rs.MOVE})},za.startOnActiveFeature=function(p,g){this.stopExtendedInteractions(p),this.map.dragPan.disable(),this.doRender(g.featureTarget.properties.id),p.canDragMove=!0,p.dragMoveLocation=g.lngLat},za.clickOnFeature=function(p,g){wd.disable(this),this.stopExtendedInteractions(p);const x=cf(g),L=this.getSelectedIds(),V=g.featureTarget.properties.id,ee=this.isSelected(V);if(!x&&ee&&this.getFeature(V).type!==To.POINT)return this.changeMode(is.DIRECT_SELECT,{featureId:V});ee&&x?(this.deselect(V),this.updateUIClasses({mouse:rs.POINTER}),L.length===1&&wd.enable(this)):!ee&&x?(this.select(V),this.updateUIClasses({mouse:rs.MOVE})):!ee&&!x&&(L.forEach(_e=>this.doRender(_e)),this.setSelected(V),this.updateUIClasses({mouse:rs.MOVE})),this.doRender(V)},za.onMouseDown=function(p,g){if(p.initialDragPanState=this.map.dragPan.isEnabled(),Xc(g))return this.startOnActiveFeature(p,g);if(this.drawConfig.boxSelect&&sf(g))return this.startBoxSelect(p,g)},za.startBoxSelect=function(p,g){this.stopExtendedInteractions(p),this.map.dragPan.disable(),p.boxSelectStartLocation=op(g.originalEvent,this.map.getContainer()),p.canBoxSelect=!0},za.onTouchStart=function(p,g){if(Xc(g))return this.startOnActiveFeature(p,g)},za.onDrag=function(p,g){if(p.canDragMove)return this.dragMove(p,g);if(this.drawConfig.boxSelect&&p.canBoxSelect)return this.whileBoxSelect(p,g)},za.whileBoxSelect=function(p,g){p.boxSelecting=!0,this.updateUIClasses({mouse:rs.ADD}),p.boxSelectElement||(p.boxSelectElement=document.createElement("div"),p.boxSelectElement.classList.add(mu.BOX_SELECT),this.map.getContainer().appendChild(p.boxSelectElement));const x=op(g.originalEvent,this.map.getContainer()),L=Math.min(p.boxSelectStartLocation.x,x.x),V=Math.max(p.boxSelectStartLocation.x,x.x),ee=Math.min(p.boxSelectStartLocation.y,x.y),_e=Math.max(p.boxSelectStartLocation.y,x.y),Ce=`translate(${L}px, ${ee}px)`;p.boxSelectElement.style.transform=Ce,p.boxSelectElement.style.WebkitTransform=Ce,p.boxSelectElement.style.width=`${V-L}px`,p.boxSelectElement.style.height=`${_e-ee}px`},za.dragMove=function(p,g){p.dragMoving=!0,g.originalEvent.stopPropagation();const x={lng:g.lngLat.lng-p.dragMoveLocation.lng,lat:g.lngLat.lat-p.dragMoveLocation.lat};Cp(this.getSelected(),x),p.dragMoveLocation=g.lngLat},za.onTouchEnd=za.onMouseUp=function(p,g){if(p.dragMoving)this.fireUpdate();else if(p.boxSelecting){const x=[p.boxSelectStartLocation,op(g.originalEvent,this.map.getContainer())],L=this.featuresAt(null,x,"click"),V=this.getUniqueIds(L).filter(ee=>!this.isSelected(ee));V.length&&(this.select(V),V.forEach(ee=>this.doRender(ee)),this.updateUIClasses({mouse:rs.MOVE}))}this.stopExtendedInteractions(p)},za.toDisplayFeatures=function(p,g,x){g.properties.active=this.isSelected(g.properties.id)?Fl.ACTIVE:Fl.INACTIVE,x(g),this.fireActionable(),!(g.properties.active!==Fl.ACTIVE||g.geometry.type===To.POINT)&&ap(g).forEach(x)},za.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},za.onCombineFeatures=function(){const p=this.getSelected();if(p.length===0||p.length<2)return;const g=[],x=[],L=p[0].type.replace("Multi","");for(let V=0;V<p.length;V++){const ee=p[V];if(ee.type.replace("Multi","")!==L)return;ee.type.includes("Multi")?ee.getCoordinates().forEach(_e=>{g.push(_e)}):g.push(ee.getCoordinates()),x.push(ee.toGeoJSON())}if(x.length>1){const V=this.newFeature({type:To.FEATURE,properties:x[0].properties,geometry:{type:`Multi${L}`,coordinates:g}});this.addFeature(V),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([V.id]),this.fire(Xs.COMBINE_FEATURES,{createdFeatures:[V.toGeoJSON()],deletedFeatures:x})}this.fireActionable()},za.onUncombineFeatures=function(){const p=this.getSelected();if(p.length===0)return;const g=[],x=[];for(let L=0;L<p.length;L++){const V=p[L];this.isInstanceOf("MultiFeature",V)&&(V.getFeatures().forEach(ee=>{this.addFeature(ee),ee.properties=V.properties,g.push(ee.toGeoJSON()),this.select([ee.id])}),this.deleteFeature(V.id,{silent:!0}),x.push(V.toGeoJSON()))}g.length>1&&this.fire(Xs.UNCOMBINE_FEATURES,{createdFeatures:g,deletedFeatures:x}),this.fireActionable()};var sp=za;const lp=Gh(ll.VERTEX),Ap=Gh(ll.MIDPOINT),vl={};vl.fireUpdate=function(){this.fire(Xs.UPDATE,{action:zl.CHANGE_COORDINATES,features:this.getSelected().map(p=>p.toGeoJSON())})},vl.fireActionable=function(p){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:p.selectedCoordPaths.length>0})},vl.startDragging=function(p,g){p.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),p.canDragMove=!0,p.dragMoveLocation=g.lngLat},vl.stopDragging=function(p){p.canDragMove&&p.initialDragPanState===!0&&this.map.dragPan.enable(),p.dragMoving=!1,p.canDragMove=!1,p.dragMoveLocation=null},vl.onVertex=function(p,g){this.startDragging(p,g);const x=g.featureTarget.properties,L=p.selectedCoordPaths.indexOf(x.coord_path);!cf(g)&&L===-1?p.selectedCoordPaths=[x.coord_path]:cf(g)&&L===-1&&p.selectedCoordPaths.push(x.coord_path);const V=this.pathsToCoordinates(p.featureId,p.selectedCoordPaths);this.setSelectedCoordinates(V)},vl.onMidpoint=function(p,g){this.startDragging(p,g);const x=g.featureTarget.properties;p.feature.addCoordinate(x.coord_path,x.lng,x.lat),this.fireUpdate(),p.selectedCoordPaths=[x.coord_path]},vl.pathsToCoordinates=function(p,g){return g.map(x=>({feature_id:p,coord_path:x}))},vl.onFeature=function(p,g){p.selectedCoordPaths.length===0?this.startDragging(p,g):this.stopDragging(p)},vl.dragFeature=function(p,g,x){Cp(this.getSelected(),x),p.dragMoveLocation=g.lngLat},vl.dragVertex=function(p,g,x){const L=p.selectedCoordPaths.map(_e=>p.feature.getCoordinate(_e)),V=L.map(_e=>({type:To.FEATURE,properties:{},geometry:{type:To.POINT,coordinates:_e}})),ee=lm(V,x);for(let _e=0;_e<L.length;_e++){const Ce=L[_e];p.feature.updateCoordinate(p.selectedCoordPaths[_e],Ce[0]+ee.lng,Ce[1]+ee.lat)}},vl.clickNoTarget=function(){this.changeMode(is.SIMPLE_SELECT)},vl.clickInactive=function(){this.changeMode(is.SIMPLE_SELECT)},vl.clickActiveFeature=function(p){p.selectedCoordPaths=[],this.clearSelectedCoordinates(),p.feature.changed()},vl.onSetup=function(p){const g=p.featureId,x=this.getFeature(g);if(!x)throw new Error("You must provide a featureId to enter direct_select mode");if(x.type===To.POINT)throw new TypeError("direct_select mode doesn't handle point features");const L={featureId:g,feature:x,dragMoveLocation:p.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:p.coordPath?[p.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(g,L.selectedCoordPaths)),this.setSelected(g),wd.disable(this),this.setActionableState({trash:!0}),L},vl.onStop=function(){wd.enable(this),this.clearSelectedCoordinates()},vl.toDisplayFeatures=function(p,g,x){p.featureId===g.properties.id?(g.properties.active=Fl.ACTIVE,x(g),ap(g,{map:this.map,midpoints:!0,selectedPaths:p.selectedCoordPaths}).forEach(x)):(g.properties.active=Fl.INACTIVE,x(g)),this.fireActionable(p)},vl.onTrash=function(p){p.selectedCoordPaths.sort((g,x)=>x.localeCompare(g,"en",{numeric:!0})).forEach(g=>p.feature.removeCoordinate(g)),this.fireUpdate(),p.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(p),p.feature.isValid()===!1&&(this.deleteFeature([p.featureId]),this.changeMode(is.SIMPLE_SELECT,{}))},vl.onMouseMove=function(p,g){const x=Xc(g),L=lp(g),V=Ap(g),ee=p.selectedCoordPaths.length===0;return x&&ee?this.updateUIClasses({mouse:rs.MOVE}):L&&!ee?this.updateUIClasses({mouse:rs.MOVE}):this.updateUIClasses({mouse:rs.NONE}),(L||x||V)&&p.dragMoving&&this.fireUpdate(),this.stopDragging(p),!0},vl.onMouseOut=function(p){return p.dragMoving&&this.fireUpdate(),!0},vl.onTouchStart=vl.onMouseDown=function(p,g){if(lp(g))return this.onVertex(p,g);if(Xc(g))return this.onFeature(p,g);if(Ap(g))return this.onMidpoint(p,g)},vl.onDrag=function(p,g){if(p.canDragMove!==!0)return;p.dragMoving=!0,g.originalEvent.stopPropagation();const x={lng:g.lngLat.lng-p.dragMoveLocation.lng,lat:g.lngLat.lat-p.dragMoveLocation.lat};p.selectedCoordPaths.length>0?this.dragVertex(p,g,x):this.dragFeature(p,g,x),p.dragMoveLocation=g.lngLat},vl.onClick=function(p,g){if(sd(g))return this.clickNoTarget(p,g);if(Xc(g))return this.clickActiveFeature(p,g);if(lf(g))return this.clickInactive(p,g);this.stopDragging(p)},vl.onTap=function(p,g){if(sd(g))return this.clickNoTarget(p,g);if(Xc(g))return this.clickActiveFeature(p,g);if(lf(g))return this.clickInactive(p,g)},vl.onTouchEnd=vl.onMouseUp=function(p){p.dragMoving&&this.fireUpdate(),this.stopDragging(p)};var zm=vl;const gu={};gu.onSetup=function(){const p=this.newFeature({type:To.FEATURE,properties:{},geometry:{type:To.POINT,coordinates:[]}});return this.addFeature(p),this.clearSelectedFeatures(),this.updateUIClasses({mouse:rs.ADD}),this.activateUIButton(Wa.POINT),this.setActionableState({trash:!0}),{point:p}},gu.stopDrawingAndRemove=function(p){this.deleteFeature([p.point.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT)},gu.onTap=gu.onClick=function(p,g){this.updateUIClasses({mouse:rs.MOVE}),p.point.updateCoordinate("",g.lngLat.lng,g.lngLat.lat),this.fire(Xs.CREATE,{features:[p.point.toGeoJSON()]}),this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.point.id]})},gu.onStop=function(p){this.activateUIButton(),p.point.getCoordinate().length||this.deleteFeature([p.point.id],{silent:!0})},gu.toDisplayFeatures=function(p,g,x){const L=g.properties.id===p.point.id;if(g.properties.active=L?Fl.ACTIVE:Fl.INACTIVE,!L)return x(g)},gu.onTrash=gu.stopDrawingAndRemove,gu.onKeyUp=function(p,g){if(df(g)||Ld(g))return this.stopDrawingAndRemove(p,g)};var zf=gu;function Ed(p,g){return p.lngLat?p.lngLat.lng===g[0]&&p.lngLat.lat===g[1]:!1}var Eh=Ed;const Zs={};Zs.onSetup=function(){const p=this.newFeature({type:To.FEATURE,properties:{},geometry:{type:To.POLYGON,coordinates:[[]]}});return this.addFeature(p),this.clearSelectedFeatures(),wd.disable(this),this.updateUIClasses({mouse:rs.ADD}),this.activateUIButton(Wa.POLYGON),this.setActionableState({trash:!0}),{polygon:p,currentVertexPosition:0}},Zs.clickAnywhere=function(p,g){if(p.currentVertexPosition>0&&Eh(g,p.polygon.coordinates[0][p.currentVertexPosition-1]))return this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.polygon.id]});this.updateUIClasses({mouse:rs.ADD}),p.polygon.updateCoordinate(`0.${p.currentVertexPosition}`,g.lngLat.lng,g.lngLat.lat),p.currentVertexPosition++,p.polygon.updateCoordinate(`0.${p.currentVertexPosition}`,g.lngLat.lng,g.lngLat.lat)},Zs.clickOnVertex=function(p){return this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.polygon.id]})},Zs.onMouseMove=function(p,g){p.polygon.updateCoordinate(`0.${p.currentVertexPosition}`,g.lngLat.lng,g.lngLat.lat),$d(g)&&this.updateUIClasses({mouse:rs.POINTER})},Zs.onTap=Zs.onClick=function(p,g){return $d(g)?this.clickOnVertex(p,g):this.clickAnywhere(p,g)},Zs.onKeyUp=function(p,g){df(g)?(this.deleteFeature([p.polygon.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT)):Ld(g)&&this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.polygon.id]})},Zs.onStop=function(p){this.updateUIClasses({mouse:rs.NONE}),wd.enable(this),this.activateUIButton(),this.getFeature(p.polygon.id)!==void 0&&(p.polygon.removeCoordinate(`0.${p.currentVertexPosition}`),p.polygon.isValid()?this.fire(Xs.CREATE,{features:[p.polygon.toGeoJSON()]}):(this.deleteFeature([p.polygon.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT,{},{silent:!0})))},Zs.toDisplayFeatures=function(p,g,x){const L=g.properties.id===p.polygon.id;if(g.properties.active=L?Fl.ACTIVE:Fl.INACTIVE,!L)return x(g);if(g.geometry.coordinates.length===0)return;const V=g.geometry.coordinates[0].length;if(!(V<3)){if(g.properties.meta=ll.FEATURE,x(ih(p.polygon.id,g.geometry.coordinates[0][0],"0.0",!1)),V>3){const ee=g.geometry.coordinates[0].length-3;x(ih(p.polygon.id,g.geometry.coordinates[0][ee],`0.${ee}`,!1))}if(V<=4){const ee=[[g.geometry.coordinates[0][0][0],g.geometry.coordinates[0][0][1]],[g.geometry.coordinates[0][1][0],g.geometry.coordinates[0][1][1]]];if(x({type:To.FEATURE,properties:g.properties,geometry:{coordinates:ee,type:To.LINE_STRING}}),V===3)return}return x(g)}},Zs.onTrash=function(p){this.deleteFeature([p.polygon.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT)};var Sd=Zs;const xc={};xc.onSetup=function(p){p=p||{};const g=p.featureId;let x,L,V="forward";if(g){if(x=this.getFeature(g),!x)throw new Error("Could not find a feature with the provided featureId");let ee=p.from;if(ee&&ee.type==="Feature"&&ee.geometry&&ee.geometry.type==="Point"&&(ee=ee.geometry),ee&&ee.type==="Point"&&ee.coordinates&&ee.coordinates.length===2&&(ee=ee.coordinates),!ee||!Array.isArray(ee))throw new Error("Please use the `from` property to indicate which point to continue the line from");const _e=x.coordinates.length-1;if(x.coordinates[_e][0]===ee[0]&&x.coordinates[_e][1]===ee[1])L=_e+1,x.addCoordinate(L,...x.coordinates[_e]);else if(x.coordinates[0][0]===ee[0]&&x.coordinates[0][1]===ee[1])V="backwards",L=0,x.addCoordinate(L,...x.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else x=this.newFeature({type:To.FEATURE,properties:{},geometry:{type:To.LINE_STRING,coordinates:[]}}),L=0,this.addFeature(x);return this.clearSelectedFeatures(),wd.disable(this),this.updateUIClasses({mouse:rs.ADD}),this.activateUIButton(Wa.LINE),this.setActionableState({trash:!0}),{line:x,currentVertexPosition:L,direction:V}},xc.clickAnywhere=function(p,g){if(p.currentVertexPosition>0&&Eh(g,p.line.coordinates[p.currentVertexPosition-1])||p.direction==="backwards"&&Eh(g,p.line.coordinates[p.currentVertexPosition+1]))return this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.line.id]});this.updateUIClasses({mouse:rs.ADD}),p.line.updateCoordinate(p.currentVertexPosition,g.lngLat.lng,g.lngLat.lat),p.direction==="forward"?(p.currentVertexPosition++,p.line.updateCoordinate(p.currentVertexPosition,g.lngLat.lng,g.lngLat.lat)):p.line.addCoordinate(0,g.lngLat.lng,g.lngLat.lat)},xc.clickOnVertex=function(p){return this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.line.id]})},xc.onMouseMove=function(p,g){p.line.updateCoordinate(p.currentVertexPosition,g.lngLat.lng,g.lngLat.lat),$d(g)&&this.updateUIClasses({mouse:rs.POINTER})},xc.onTap=xc.onClick=function(p,g){if($d(g))return this.clickOnVertex(p,g);this.clickAnywhere(p,g)},xc.onKeyUp=function(p,g){Ld(g)?this.changeMode(is.SIMPLE_SELECT,{featureIds:[p.line.id]}):df(g)&&(this.deleteFeature([p.line.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT))},xc.onStop=function(p){wd.enable(this),this.activateUIButton(),this.getFeature(p.line.id)!==void 0&&(p.line.removeCoordinate(`${p.currentVertexPosition}`),p.line.isValid()?this.fire(Xs.CREATE,{features:[p.line.toGeoJSON()]}):(this.deleteFeature([p.line.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT,{},{silent:!0})))},xc.onTrash=function(p){this.deleteFeature([p.line.id],{silent:!0}),this.changeMode(is.SIMPLE_SELECT)},xc.toDisplayFeatures=function(p,g,x){const L=g.properties.id===p.line.id;if(g.properties.active=L?Fl.ACTIVE:Fl.INACTIVE,!L)return x(g);g.geometry.coordinates.length<2||(g.properties.meta=ll.FEATURE,x(ih(p.line.id,g.geometry.coordinates[p.direction==="forward"?g.geometry.coordinates.length-2:1],`${p.direction==="forward"?g.geometry.coordinates.length-2:1}`,!1)),x(g))};var oh=xc,up={simple_select:sp,direct_select:zm,draw_point:zf,draw_polygon:Sd,draw_line_string:oh};const Pp={defaultMode:is.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Df,modes:up,controls:{},userProperties:!1,suppressAPIEvents:!0},cp={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Op={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function um(p,g){return p.map(x=>x.source?x:Object.assign({},x,{id:`${x.id}.${g}`,source:g==="hot"?sl.HOT:sl.COLD}))}function Rp(p={}){let g=Object.assign({},p);return p.controls||(g.controls={}),p.displayControlsDefault===!1?g.controls=Object.assign({},Op,p.controls):g.controls=Object.assign({},cp,p.controls),g=Object.assign({},Pp,g),g.styles=um(g.styles,"cold").concat(um(g.styles,"hot")),g}var ah=i(3341),$h=i(74444);function Zh(p,g){return p.length!==g.length?!1:JSON.stringify(p.map(x=>x).sort())===JSON.stringify(g.map(x=>x).sort())}const Ru={Polygon:ks,LineString:wh,Point:Vd,MultiPolygon:Od,MultiLineString:Od,MultiPoint:Od};function su(p,g){g.modes=is;const x=p.options.suppressAPIEvents!==void 0?!!p.options.suppressAPIEvents:!0;return g.getFeatureIdsAt=function(L){return vd.click({point:L},null,p).map(ee=>ee.properties.id)},g.getSelectedIds=function(){return p.store.getSelectedIds()},g.getSelected=function(){return{type:To.FEATURE_COLLECTION,features:p.store.getSelectedIds().map(L=>p.store.get(L)).map(L=>L.toGeoJSON())}},g.getSelectedPoints=function(){return{type:To.FEATURE_COLLECTION,features:p.store.getSelectedCoordinates().map(L=>({type:To.FEATURE,properties:{},geometry:{type:To.POINT,coordinates:L.coordinates}}))}},g.set=function(L){if(L.type===void 0||L.type!==To.FEATURE_COLLECTION||!Array.isArray(L.features))throw new Error("Invalid FeatureCollection");const V=p.store.createRenderBatch();let ee=p.store.getAllIds().slice();const _e=g.add(L),Ce=new di(_e);return ee=ee.filter(Be=>!Ce.has(Be)),ee.length&&g.delete(ee),V(),_e},g.add=function(L){const ee=JSON.parse(JSON.stringify($h(L))).features.map(_e=>{if(_e.id=_e.id||xd(),_e.geometry===null)throw new Error("Invalid geometry: null");if(p.store.get(_e.id)===void 0||p.store.get(_e.id).type!==_e.geometry.type){const Ce=Ru[_e.geometry.type];if(Ce===void 0)throw new Error(`Invalid geometry type: ${_e.geometry.type}.`);const Be=new Ce(p,_e);p.store.add(Be,{silent:x})}else{const Ce=p.store.get(_e.id),Be=Ce.properties;Ce.properties=_e.properties,ah(Be,_e.properties)||p.store.featureChanged(Ce.id,{silent:x}),ah(Ce.getCoordinates(),_e.geometry.coordinates)||Ce.incomingCoords(_e.geometry.coordinates)}return _e.id});return p.store.render(),ee},g.get=function(L){const V=p.store.get(L);if(V)return V.toGeoJSON()},g.getAll=function(){return{type:To.FEATURE_COLLECTION,features:p.store.getAll().map(L=>L.toGeoJSON())}},g.delete=function(L){return p.store.delete(L,{silent:x}),g.getMode()===is.DIRECT_SELECT&&!p.store.getSelectedIds().length?p.events.changeMode(is.SIMPLE_SELECT,void 0,{silent:x}):p.store.render(),g},g.deleteAll=function(){return p.store.delete(p.store.getAllIds(),{silent:x}),g.getMode()===is.DIRECT_SELECT?p.events.changeMode(is.SIMPLE_SELECT,void 0,{silent:x}):p.store.render(),g},g.changeMode=function(L,V={}){return L===is.SIMPLE_SELECT&&g.getMode()===is.SIMPLE_SELECT?(Zh(V.featureIds||[],p.store.getSelectedIds())||(p.store.setSelected(V.featureIds,{silent:x}),p.store.render()),g):(L===is.DIRECT_SELECT&&g.getMode()===is.DIRECT_SELECT&&V.featureId===p.store.getSelectedIds()[0]||p.events.changeMode(L,V,{silent:x}),g)},g.getMode=function(){return p.events.getMode()},g.trash=function(){return p.events.trash({silent:x}),g},g.combineFeatures=function(){return p.events.combineFeatures({silent:x}),g},g.uncombineFeatures=function(){return p.events.uncombineFeatures({silent:x}),g},g.setFeatureProperty=function(L,V,ee){return p.store.setFeatureProperty(L,V,ee,{silent:x}),g},g}const Sh=function(p,g){p=Rp(p);const x={options:p};g=su(x,g),x.api=g;const L=Lf(x);return g.onAdd=L.onAdd,g.onRemove=L.onRemove,g.types=Wa,g.options=p,g};function Zd(p){Sh(p,this)}Zd.modes=up,Zd.constants=E,Zd.lib=C;var sh=Zd;function Fm(p,g,x){var L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},V=arguments.length>4?arguments[4]:void 0;if(!(p.getElementsByClassName(x).length>0)){var ee=p.getElementsByClassName("mapbox-gl-draw_ctrl-draw-btn"),_e=ee[0].parentElement;if(_e){var Ce=document.createElement("button");Ce.classList.add("mapbox-gl-draw_ctrl-draw-btn",x),Object.entries(L).forEach(function(De){var $e=te()(De,2),dt=$e[0],Ke=$e[1];Ce.setAttribute(dt,Ke)}),Ce.onclick=V;var Be=_e.children[g];Be?_e.insertBefore(Ce,Be):_e.appendChild(Ce)}}}var Bm={onSetup:function(){return this.setActionableState({trash:!1,combineFeatures:!1,uncombineFeatures:!1}),{}},toDisplayFeatures:function(g,x,L){L(x)}},cm=Bm,vf="#3bb2d0",Wh="#fbb03b",bc="#fff",lh="#000000",Lp=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],Wh,vf],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],Wh,vf],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":bc}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],Wh,vf]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":bc}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":Wh}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":Wh}},{id:"stact-point",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","mode","static"]],paint:{"circle-radius":5,"circle-color":lh}},{id:"static-line",type:"line",filter:["all",["==","$type","LineString"],["==","meta","feature"],["==","mode","static"]],paint:{"line-color":lh,"line-width":2}},{id:"static-polygon",type:"fill",filter:["all",["==","$type","Polygon"],["==","meta","feature"],["==","mode","static"]],paint:{"fill-color":lh,"fill-opacity":.3}},{id:"static-polygon-outline",type:"line",filter:["all",["==","$type","Polygon"],["==","meta","feature"],["==","mode","static"]],paint:{"line-color":lh,"line-width":2}}],Dp={static:!0,point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!1,uncombine_features:!1},yf=function(g){var x=g.position,L=x===void 0?"top-right":x,V=g.keybindings,ee=V===void 0?!0:V,_e=g.touchEnabled,Ce=_e===void 0?!0:_e,Be=g.boxSelect,De=Be===void 0?!0:Be,$e=g.clickBuffer,dt=$e===void 0?2:$e,Ke=g.touchBuffer,pt=Ke===void 0?25:Ke,$t=g.controls,Pt=$t===void 0?{}:$t,an=g.styles,An=an===void 0?[]:an,un=g.modes,yn=un===void 0?{}:un,pr=g.defaultMode,ur=pr===void 0?"static":pr,br=g.userProperties,sr=br===void 0?!1:br,ht=g.onAdd,Rt=(0,K.useContext)(Qo),Jt=(0,K.useRef)(null),On=$s(g),bn=On.updateEvents,kn=On.offEvents;return(0,K.useEffect)(function(){if(Rt){Jt.current&&Rt.removeControl(Jt.current);var wt={keybindings:ee,touchEnabled:Ce,boxSelect:De,clickBuffer:dt,touchBuffer:pt,controls:U()(U()({},Dp),Pt),modes:U()(U()(U()({},sh.modes),yn),{},{static:cm}),styles:[].concat(Nl()(Lp),Nl()(An)),defaultMode:ur,userProperties:sr};return Jt.current=new sh(wt),Rt.addControl(Jt.current,L),ht&&ht(Jt.current),wt.controls.static&&Fm(Rt.getContainer(),0,"mapbox-gl-draw_static",{title:"static"},function(){var Vt;if(((Vt=Jt.current)===null||Vt===void 0?void 0:Vt.getMode())==="static"){var tn;(tn=Jt.current)===null||tn===void 0||tn.changeMode("simple_select")}else{var Dn;(Dn=Jt.current)===null||Dn===void 0||Dn.changeMode("static")}}),function(){Jt.current&&Rt.removeControl(Jt.current),Jt.current=null,kn(Rt)}}},[Rt,L,ee,Ce,De,dt,pt,JSON.stringify(Pt),JSON.stringify(An),JSON.stringify(yn),ur,sr]),Rt&&bn(Rt),null},Ff=yf,Uc=function(g){var x=g.position,L=x===void 0?"top-right":x,V=g.container,ee=(0,K.useContext)(Qo),_e=(0,K.useRef)(null);return(0,K.useEffect)(function(){if(ee)return _e.current&&ee.removeControl(_e.current),_e.current=new(B()).FullscreenControl({container:V}),ee.addControl(_e.current,L),function(){_e.current&&ee.removeControl(_e.current),_e.current=null}},[ee,L,V]),null},Td=Uc,xf=i(25298),uh=i.n(xf),Hh=i(17069),bf=i.n(Hh),Da=i(82092),ch=i.n(Da),jm=function(){function p(g){var x=g.decimals;uh()(this,p),ch()(this,"_map",null),ch()(this,"_container",null),ch()(this,"_decimals",void 0),this._decimals=x}return bf()(p,[{key:"_updatePosition",value:function(x){if(this._container){var L=x.lngLat.lng.toFixed(this._decimals),V=x.lngLat.lat.toFixed(this._decimals);this._container.innerText="".concat(L," , ").concat(V)}}},{key:"onAdd",value:function(x){this._map=x;var L=x.getCenter().lng.toFixed(this._decimals),V=x.getCenter().lat.toFixed(this._decimals);return this._container=document.createElement("div"),this._container.classList.add("mapboxgl-ctrl"),this._container.classList.add("mapboxgl-ctrl-group"),this._container.classList.add("mapboxgl-ctrl-mouse-position"),this._container.innerText="".concat(L," , ").concat(V),this._map.on("mousemove",this._updatePosition.bind(this)),this._container}},{key:"onRemove",value:function(){this._map&&this._map.off("mousemove",this._updatePosition),this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._map=null,this._container=null}}]),p}(),dm=jm,dp=function(g){var x=g.position,L=x===void 0?"bottom":x,V=g.decimals,ee=V===void 0?6:V,_e=(0,K.useContext)(Qo),Ce=(0,K.useRef)(null);return(0,K.useEffect)(function(){if(_e)return Ce.current&&_e.removeControl(Ce.current),Ce.current=new dm({decimals:ee}),_e.addControl(Ce.current,L),function(){Ce.current&&_e.removeControl(Ce.current),Ce.current=null}},[_e,L,ee]),null},Wd=dp,Qc=function(g){var x=g.showCompass,L=x===void 0?!0:x,V=g.showZoom,ee=V===void 0?!0:V,_e=g.visualizePitch,Ce=_e===void 0?!0:_e,Be=g.position,De=Be===void 0?"top-left":Be,$e=(0,K.useContext)(Qo),dt=(0,K.useRef)(null);return(0,K.useEffect)(function(){if($e)return dt.current&&$e.removeControl(dt.current),dt.current=new(B()).NavigationControl({showCompass:L,showZoom:ee,visualizePitch:Ce}),$e.addControl(dt.current,De),function(){dt.current&&$e.removeControl(dt.current),dt.current=null}},[$e,De,L,ee,Ce]),null},yl=Qc,ld=function(g){var x=g.position,L=x===void 0?"bottom-left":x,V=g.maxWidth,ee=V===void 0?100:V,_e=g.unit,Ce=_e===void 0?"metric":_e,Be=g.onAdd,De=(0,K.useContext)(Qo),$e=(0,K.useRef)(null);return(0,K.useEffect)(function(){if(De)return $e.current&&De.removeControl($e.current),$e.current=new(B()).ScaleControl({maxWidth:ee,unit:Ce}),De.addControl($e.current,L),Be&&Be($e.current),function(){$e.current&&De.removeControl($e.current),$e.current=null}},[De,L,ee,Ce]),null},dc=ld,hp=function(g){var x=g.id,L=g.filter,V=g.maxzoom,ee=V===void 0?24:V,_e=g.minzoom,Ce=_e===void 0?0:_e,Be=g.slot,De=g.color,$e=De===void 0?"#000000":De,dt=g.emissiveStrength,Ke=dt===void 0?0:dt,pt=g.opacity,$t=pt===void 0?1:pt,Pt=g.imgUrl,an=g.visibility,An=an===void 0?"visible":an,un=g.beforeId,yn=(0,K.useContext)(Qo),pr=(0,K.useRef)(null),ur=function(sr){return new Promise(function(ht){yn.loadImage(sr,function(Rt,Jt){if(Rt)throw Rt;yn.hasImage(x)&&yn.removeImage(x),Jt&&yn.addImage(x,Jt),ht(x)})})};return(0,K.useEffect)(function(){if(yn){var br={id:x,type:"background"},sr={},ht={};return L&&(br.filter=L),Be&&(br.slot=Be),br.maxzoom=ee,br.minzoom=Ce,sr["background-color"]=$e,sr["background-emissive-strength"]=Ke,sr["background-opacity"]=$t,ht.visibility=An,br.paint=sr,br.layout=ht,Pt?ur(Pt).then(function(Rt){br.paint["background-pattern"]=Rt,yn.getLayer(x)&&yn.removeLayer(x),yn.addLayer(br,un)}):(yn.getLayer(x)&&yn.removeLayer(x),yn.addLayer(br)),function(){yn!=null&&yn.getLayer(x)&&yn.removeLayer(x),pr.current=null}}},[yn,x]),(0,K.useEffect)(function(){if(yn){if(!pr.current){pr.current=g;return}Xi(L,pr.current.filter)||yn.setFilter(x,L),(ee!==pr.current.maxzoom||Ce!==pr.current.minzoom)&&yn.setLayerZoomRange(x,Ce,ee),Be!==pr.current.slot&&yn.setSlot(x,Be),$e!==pr.current.color&&yn.setPaintProperty(x,"background-color",$e),Ke!==pr.current.emissiveStrength&&yn.setPaintProperty(x,"background-emissive-strength",Ke),$t!==pr.current.opacity&&yn.setPaintProperty(x,"background-opacity",$t),An!==pr.current.visibility&&yn.setLayoutProperty(x,"visibility",An),un!==pr.current.beforeId&&yn.moveLayer(x,un),Pt&&Pt!==pr.current.imgUrl&&ur(Pt),pr.current=g}},[JSON.stringify(L),ee,Ce,Be,$e,Ke,$t,An,un,Pt]),null},Is=hp,hm=function(g){var x=g.id,L=g.source,V=g.sourceLayer,ee=g.filter,_e=g.maxzoom,Ce=_e===void 0?24:_e,Be=g.minzoom,De=Be===void 0?0:Be,$e=g.slot,dt=g.beforeId,Ke=g.visibility,pt=Ke===void 0?"visible":Ke,$t=g.blur,Pt=$t===void 0?0:$t,an=g.color,An=an===void 0?"#000000":an,un=g.emissiveStrength,yn=un===void 0?0:un,pr=g.opacity,ur=pr===void 0?1:pr,br=g.pitchAlignment,sr=br===void 0?"viewport":br,ht=g.pitchScale,Rt=ht===void 0?"map":ht,Jt=g.radius,On=Jt===void 0?5:Jt,bn=g.sortKey,kn=g.strokeColor,wt=kn===void 0?"#000000":kn,Vt=g.strokeOpacity,tn=Vt===void 0?1:Vt,Dn=g.strokeWidth,Wt=Dn===void 0?0:Dn,ln=g.translate,wn=ln===void 0?[0,0]:ln,xr=g.translateAnchor,jr=xr===void 0?"map":xr,Ar=(0,K.useContext)(Qo),Vr=(0,K.useRef)(null),ai=$s(g),ki=ai.updateEvents,Oi=ai.offEvents;return(0,K.useEffect)(function(){if(Ar){var co={id:x,type:"circle",source:x},_o={},Fo={};return V&&(co["source-layer"]=V),ee&&(co.filter=ee),$e&&(co.slot=$e),bn&&(Fo["circle-sort-key"]=bn),co.maxzoom=Ce,co.minzoom=De,_o["circle-blur"]=Pt,_o["circle-color"]=An,_o["circle-emissive-strength"]=yn,_o["circle-opacity"]=ur,_o["circle-pitch-alignment"]=sr,_o["circle-pitch-scale"]=Rt,_o["circle-radius"]=On,_o["circle-stroke-color"]=wt,_o["circle-stroke-opacity"]=tn,_o["circle-stroke-width"]=Wt,_o["circle-translate"]=wn,_o["circle-translate-anchor"]=jr,Fo.visibility=pt,co.paint=_o,co.layout=Fo,Ar.getLayer(x)&&Ar.removeLayer(x),Ar.getSource(x)&&Ar.removeSource(x),Ar.addSource(x,L),Ar.addLayer(co,dt),function(){Ar.getLayer(x)&&Ar.removeLayer(x),Ar.getSource(x)&&Ar.removeSource(x),Oi(Ar,x),Vr.current=null}}},[Ar,x]),(0,K.useEffect)(function(){if(Ar){var co=Ar.getLayer(x);if(co){if(!Vr.current){Vr.current=g;return}Xi(L,Vr.current.source)||(Ar.removeLayer(x),Ar.removeSource(x),Ar.addSource(x,L),Ar.addLayer(co)),V!==Vr.current.sourceLayer&&(co["source-layer"]=V,Ar.removeLayer(x),Ar.addLayer(co)),Xi(ee,Vr.current.filter)||Ar.setFilter(x,ee),(Ce!==Vr.current.maxzoom||De!==Vr.current.minzoom)&&Ar.setLayerZoomRange(x,De,Ce),$e!==Vr.current.slot&&Ar.setSlot(x,$e),pt!==Vr.current.visibility&&Ar.setLayoutProperty(x,"visibility",pt),Xi(Pt,Vr.current.blur)||Ar.setPaintProperty(x,"circle-blur",Pt),Xi(An,Vr.current.color)||Ar.setPaintProperty(x,"circle-color",An),yn!==Vr.current.emissiveStrength&&Ar.setPaintProperty(x,"circle-emissive-strength",yn),Xi(ur,Vr.current.opacity)||Ar.setPaintProperty(x,"circle-opacity",ur),sr!==Vr.current.pitchAlignment&&Ar.setPaintProperty(x,"circle-pitch-alignment",sr),Rt!==Vr.current.pitchScale&&Ar.setPaintProperty(x,"circle-pitch-scale",Rt),Xi(On,Vr.current.radius)||Ar.setPaintProperty(x,"circle-radius",On),bn!==Vr.current.sortKey&&Ar.setLayoutProperty(x,"circle-sort-key",bn),Xi(wt,Vr.current.strokeColor)||Ar.setPaintProperty(x,"circle-stroke-color",wt),Xi(tn,Vr.current.strokeOpacity)||Ar.setPaintProperty(x,"circle-stroke-opacity",tn),Xi(Wt,Vr.current.strokeWidth)||Ar.setPaintProperty(x,"circle-stroke-width",Wt),Xi(wn,Vr.current.translate)||Ar.setPaintProperty(x,"circle-translate",wn),jr!==Vr.current.translateAnchor&&Ar.setPaintProperty(x,"circle-translate-anchor",jr),dt!==Vr.current.beforeId&&Ar.moveLayer(x,dt),Vr.current=g}}},[L,V,JSON.stringify(ee),Ce,De,$e,pt,JSON.stringify(Pt),JSON.stringify(An),JSON.stringify(yn),JSON.stringify(ur),sr,Rt,JSON.stringify(On),bn,JSON.stringify(wt),JSON.stringify(tn),JSON.stringify(Wt),JSON.stringify(wn),jr,dt]),Ar&&ki(Ar,x),null},Zo=hm,u=function(g){var x=g.id,L=g.source,V=g.sourceLayer,ee=g.filter,_e=g.maxzoom,Ce=_e===void 0?24:_e,Be=g.minzoom,De=Be===void 0?0:Be,$e=g.slot,dt=g.beforeId,Ke=g.visibility,pt=Ke===void 0?"visible":Ke,$t=g.antialias,Pt=$t===void 0?!0:$t,an=g.color,An=an===void 0?"#000000":an,un=g.emissiveStrength,yn=un===void 0?0:un,pr=g.opacity,ur=pr===void 0?1:pr,br=g.outlineColor,sr=g.imgUrl,ht=g.sortKey,Rt=g.translate,Jt=Rt===void 0?[0,0]:Rt,On=g.translateAnchor,bn=On===void 0?"map":On,kn=(0,K.useContext)(Qo),wt=(0,K.useRef)(null),Vt=$s(g),tn=Vt.updateEvents,Dn=Vt.offEvents,Wt=function(wn){return new Promise(function(xr){kn.loadImage(wn,function(jr,Ar){if(jr)throw jr;kn.hasImage(x)&&kn.removeImage(x),Ar&&kn.addImage(x,Ar),xr(x)})})};return(0,K.useEffect)(function(){if(kn){var ln={id:x,type:"fill",source:x},wn={},xr={};return V&&(ln["source-layer"]=V),ee&&(ln.filter=ee),$e&&(ln.slot=$e),ht&&(xr["fill-sort-key"]=ht),br&&(wn["fill-outline-color"]=br),ln.maxzoom=Ce,ln.minzoom=De,wn["fill-antialias"]=Pt,wn["fill-color"]=An,wn["fill-emissive-strength"]=yn,wn["fill-opacity"]=ur,wn["fill-translate"]=Jt,wn["fill-translate-anchor"]=bn,xr.visibility=pt,ln.paint=wn,ln.layout=xr,sr?Wt(sr).then(function(jr){ln.paint["fill-pattern"]=jr,kn.getLayer(x)&&kn.removeLayer(x),kn.getSource(x)&&kn.removeSource(x),kn.addSource(x,L),kn.addLayer(ln,dt)}):(kn.getLayer(x)&&kn.removeLayer(x),kn.getSource(x)&&kn.removeSource(x),kn.addSource(x,L),kn.addLayer(ln,dt)),function(){kn.getLayer(x)&&kn.removeLayer(x),kn.getSource(x)&&kn.removeSource(x),Dn(kn,x),wt.current=null}}},[kn,x]),(0,K.useEffect)(function(){if(kn){var ln=kn.getLayer(x);if(ln){if(!wt.current){wt.current=g;return}Xi(L,wt.current.source)||(kn.removeLayer(x),kn.removeSource(x),kn.addSource(x,L),kn.addLayer(ln)),V!==wt.current.sourceLayer&&(ln["source-layer"]=V,kn.removeLayer(x),kn.addLayer(ln)),Xi(ee,wt.current.filter)||kn.setFilter(x,ee),(Ce!==wt.current.maxzoom||De!==wt.current.minzoom)&&kn.setLayerZoomRange(x,De,Ce),$e!==wt.current.slot&&kn.setSlot(x,$e),Pt!==wt.current.antialias&&kn.setPaintProperty(x,"fill-antialias",Pt),Xi(An,wt.current.color)||kn.setPaintProperty(x,"fill-color",An),yn!==wt.current.emissiveStrength&&kn.setPaintProperty(x,"fill-emissive-strength",yn),Xi(ur,wt.current.opacity)||kn.setPaintProperty(x,"fill-opacity",ur),Xi(br,wt.current.outlineColor)||kn.setPaintProperty(x,"fill-outline-color",br),ht!==wt.current.sortKey&&kn.setLayoutProperty(x,"fill-sort-key",ht),Xi(Jt,wt.current.translate)||kn.setPaintProperty(x,"fill-translate",Jt),bn!==wt.current.translateAnchor&&kn.setPaintProperty(x,"fill-translate-anchor",bn),pt!==wt.current.visibility&&kn.setLayoutProperty(x,"visibility",pt),dt!==wt.current.beforeId&&kn.moveLayer(x,dt),sr&&sr!==wt.current.imgUrl&&Wt(sr),wt.current=g}}},[L,V,JSON.stringify(ee),Ce,De,$e,pt,dt,Pt,JSON.stringify(An),JSON.stringify(yn),JSON.stringify(ur),JSON.stringify(br),ht,JSON.stringify(Jt),bn,sr]),kn&&tn(kn,x),null},t=u,o=function(g){var x=g.id,L=g.source,V=g.sourceLayer,ee=g.filter,_e=g.maxzoom,Ce=_e===void 0?24:_e,Be=g.minzoom,De=Be===void 0?0:Be,$e=g.slot,dt=g.beforeId,Ke=g.visibility,pt=Ke===void 0?"visible":Ke,$t=g.color,Pt=$t===void 0?["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"]:$t,an=g.intensity,An=an===void 0?1:an,un=g.opacity,yn=un===void 0?1:un,pr=g.radius,ur=pr===void 0?30:pr,br=g.weight,sr=br===void 0?1:br,ht=(0,K.useContext)(Qo),Rt=(0,K.useRef)(null);return(0,K.useEffect)(function(){if(ht){var Jt={id:x,type:"heatmap",source:x},On={},bn={};return V&&(Jt["source-layer"]=V),ee&&(Jt.filter=ee),$e&&(Jt.slot=$e),Jt.maxzoom=Ce,Jt.minzoom=De,On["heatmap-color"]=Pt,On["heatmap-intensity"]=An,On["heatmap-opacity"]=yn,On["heatmap-radius"]=ur,On["heatmap-weight"]=sr,Jt.paint=On,Jt.layout=bn,ht.getLayer(x)&&ht.removeLayer(x),ht.getSource(x)&&ht.removeSource(x),ht.addSource(x,L),ht.addLayer(Jt,dt),function(){ht!=null&&ht.getLayer(x)&&ht.removeLayer(x),ht!=null&&ht.getSource(x)&&ht.removeSource(x),Rt.current=null}}},[ht,x]),(0,K.useEffect)(function(){if(ht){var Jt=ht.getLayer(x);if(Jt){if(!Rt.current){Rt.current=g;return}Xi(L,Rt.current.source)||(ht.removeLayer(x),ht.removeSource(x),ht.addSource(x,L),ht.addLayer(Jt)),V!==Rt.current.sourceLayer&&(Jt["source-layer"]=V,ht.removeLayer(x),ht.addLayer(Jt)),Xi(ee,Rt.current.filter)||ht.setFilter(x,ee),(Ce!==Rt.current.maxzoom||De!==Rt.current.minzoom)&&ht.setLayerZoomRange(x,De,Ce),$e!==Rt.current.slot&&ht.setSlot(x,$e),pt!==Rt.current.visibility&&ht.setLayoutProperty(x,"visibility",pt),dt!==Rt.current.beforeId&&ht.moveLayer(x,dt),Xi(Pt,Rt.current.color)||ht.setPaintProperty(x,"heatmap-color",Pt),Xi(An,Rt.current.intensity)||ht.setPaintProperty(x,"heatmap-intensity",An),Xi(yn,Rt.current.opacity)||ht.setPaintProperty(x,"heatmap-opacity",yn),Xi(ur,Rt.current.radius)||ht.setPaintProperty(x,"heatmap-radius",ur),Xi(sr,Rt.current.weight)||ht.setPaintProperty(x,"heatmap-weight",sr),Rt.current=g}}},[L,V,JSON.stringify(ee),Ce,De,$e,pt,dt,JSON.stringify(Pt),JSON.stringify(An),JSON.stringify(yn),JSON.stringify(ur),JSON.stringify(sr)]),null},d=o,v=function(g){var x=g.id,L=g.source,V=g.sourceLayer,ee=g.filter,_e=g.maxzoom,Ce=_e===void 0?24:_e,Be=g.minzoom,De=Be===void 0?0:Be,$e=g.slot,dt=g.beforeId,Ke=g.visibility,pt=Ke===void 0?"visible":Ke,$t=g.imgUrl,Pt=g.blur,an=Pt===void 0?0:Pt,An=g.cap,un=An===void 0?"butt":An,yn=g.color,pr=yn===void 0?"#000000":yn,ur=g.dasharray,br=g.emissiveStrength,sr=br===void 0?0:br,ht=g.gapWidth,Rt=ht===void 0?0:ht,Jt=g.gradient,On=g.join,bn=On===void 0?"miter":On,kn=g.miterLimit,wt=kn===void 0?2:kn,Vt=g.occlusionOpacity,tn=Vt===void 0?0:Vt,Dn=g.offset,Wt=Dn===void 0?0:Dn,ln=g.opacity,wn=ln===void 0?1:ln,xr=g.roundLimit,jr=xr===void 0?1.05:xr,Ar=g.sortKey,Vr=g.translate,ai=Vr===void 0?[0,0]:Vr,ki=g.translateAnchor,Oi=ki===void 0?"map":ki,co=g.trimOffset,_o=g.width,Fo=_o===void 0?1:_o,Mi=(0,K.useContext)(Qo),eo=(0,K.useRef)(null),Bo=$s(g),$a=Bo.updateEvents,Ca=Bo.offEvents,ls=function(Ps){return new Promise(function(uu){Mi.loadImage(Ps,function(_c,Ec){if(_c)throw _c;Mi.hasImage(x)&&Mi.removeImage(x),Ec&&Mi.addImage(x,Ec),uu(x)})})};return(0,K.useEffect)(function(){if(Mi){var va={id:x,type:"line",source:x},Ps={},uu={};return V&&(va["source-layer"]=V),ee&&(va.filter=ee),$e&&(va.slot=$e),ur&&(Ps["line-dasharray"]=ur),Jt&&(Ps["line-gradient"]=Jt),Ar&&(uu["line-sort-key"]=Ar),co&&(Ps["line-trim-offset"]=co),va.maxzoom=Ce,va.minzoom=De,Ps["line-blur"]=an,Ps["line-color"]=pr,Ps["line-emissive-strength"]=0,Ps["line-gap-width"]=Rt,Ps["line-occlusion-opacity"]=tn,Ps["line-offset"]=Wt,Ps["line-opacity"]=wn,Ps["line-translate"]=ai,Ps["line-translate-anchor"]=Oi,Ps["line-width"]=Fo,uu["line-round-limit"]=jr,uu["line-miter-limit"]=wt,uu["line-join"]=bn,uu["line-cap"]=un,uu.visibility=pt,va.paint=Ps,va.layout=uu,$t?ls($t).then(function(_c){va.paint["line-pattern"]=_c,Mi.getLayer(x)&&Mi.removeLayer(x),Mi.getSource(x)&&Mi.removeSource(x),Mi.addSource(x,L),Mi.addLayer(va,dt)}):(Mi.getLayer(x)&&Mi.removeLayer(x),Mi.getSource(x)&&Mi.removeSource(x),Mi.addSource(x,L),Mi.addLayer(va,dt)),function(){Mi.getLayer(x)&&Mi.removeLayer(x),Mi.getSource(x)&&Mi.removeSource(x),Ca(Mi,x),eo.current=null}}},[Mi,x]),(0,K.useEffect)(function(){if(Mi){var va=Mi.getLayer(x);if(va){if(!eo.current){eo.current=g;return}Xi(L,eo.current.source)||(Mi.removeLayer(x),Mi.removeSource(x),Mi.addSource(x,L),Mi.addLayer(va)),V!==eo.current.sourceLayer&&(va["source-layer"]=V,Mi.removeLayer(x),Mi.addLayer(va)),Xi(ee,eo.current.filter)||Mi.setFilter(x,ee),(Ce!==eo.current.maxzoom||De!==eo.current.minzoom)&&Mi.setLayerZoomRange(x,De,Ce),$e!==eo.current.slot&&Mi.setSlot(x,$e),Xi(an,eo.current.blur)||Mi.setPaintProperty(x,"line-blur",an),un!==eo.current.cap&&Mi.setLayoutProperty(x,"line-cap",un),Xi(pr,eo.current.color)||Mi.setPaintProperty(x,"line-color",pr),Xi(ur,eo.current.dasharray)||Mi.setPaintProperty(x,"line-dasharray",ur),sr!==eo.current.emissiveStrength&&Mi.setPaintProperty(x,"line-emissive-strength",sr),Xi(Rt,eo.current.gapWidth)||Mi.setPaintProperty(x,"line-gap-width",Rt),Xi(Jt,eo.current.gradient)||Mi.setPaintProperty(x,"line-gradient",Jt),bn!==eo.current.join&&Mi.setLayoutProperty(x,"line-join",bn),Xi(wt,eo.current.miterLimit)||Mi.setLayoutProperty(x,"line-miter-limit",wt),Xi(tn,eo.current.occlusionOpacity)||Mi.setPaintProperty(x,"line-occlusion-opacity",tn),Xi(Wt,eo.current.offset)||Mi.setPaintProperty(x,"line-offset",Wt),Xi(wn,eo.current.opacity)||Mi.setPaintProperty(x,"line-opacity",wn),Xi(jr,eo.current.roundLimit)||Mi.setLayoutProperty(x,"line-round-limit",jr),Ar!==eo.current.sortKey&&Mi.setLayoutProperty(x,"line-sort-key",Ar),Xi(ai,eo.current.translate)||Mi.setPaintProperty(x,"line-translate",ai),Oi!==eo.current.translateAnchor&&Mi.setPaintProperty(x,"line-translate-anchor",Oi),Xi(co,eo.current.trimOffset)||Mi.setPaintProperty(x,"line-trim-offset",co),Xi(Fo,eo.current.width)||Mi.setPaintProperty(x,"line-width",Fo),pt!==eo.current.visibility&&Mi.setLayoutProperty(x,"visibility",pt),dt!==eo.current.beforeId&&Mi.moveLayer(x,dt),$t&&$t!==eo.current.imgUrl&&ls($t),eo.current=g}}},[L,V,JSON.stringify(ee),Ce,De,$e,pt,dt,JSON.stringify(an),un,JSON.stringify(pr),JSON.stringify(ur),JSON.stringify(sr),Rt,JSON.stringify(Jt),bn,JSON.stringify(wt),JSON.stringify(tn),JSON.stringify(Wt),JSON.stringify(wn),JSON.stringify(jr),Ar,JSON.stringify(ai),Oi,JSON.stringify(co),JSON.stringify(Fo),$t]),Mi&&$a(Mi,x),null},b=v,A=function(g){var x=g.id,L=g.source,V=g.maxzoom,ee=V===void 0?24:V,_e=g.minzoom,Ce=_e===void 0?0:_e,Be=g.slot,De=g.filter,$e=g.beforeId,dt=g.visibility,Ke=dt===void 0?"visible":dt,pt=g.brightnessMax,$t=pt===void 0?1:pt,Pt=g.brightnessMin,an=Pt===void 0?0:Pt,An=g.color,un=g.colorMix,yn=un===void 0?[.2126,.7152,.0722,0]:un,pr=g.colorRange,ur=g.contrast,br=ur===void 0?0:ur,sr=g.emissiveStrength,ht=sr===void 0?0:sr,Rt=g.fadeDuration,Jt=Rt===void 0?300:Rt,On=g.hueRotate,bn=On===void 0?0:On,kn=g.opacity,wt=kn===void 0?1:kn,Vt=g.resampling,tn=Vt===void 0?"linear":Vt,Dn=g.saturation,Wt=Dn===void 0?0:Dn,ln=(0,K.useContext)(Qo),wn=(0,K.useRef)(null);return(0,K.useEffect)(function(){if(ln){var xr={id:x,type:"raster",source:x},jr={},Ar={};return De&&(xr.filter=De),Be&&(xr.slot=Be),xr.maxzoom=ee,xr.minzoom=Ce,An&&(jr["raster-color"]=An),pr&&(jr["raster-color-range"]=pr),jr["raster-brightness-max"]=$t,jr["raster-brightness-min"]=an,jr["raster-color-mix"]=yn,jr["raster-contrast"]=br,jr["raster-emissive-strength"]=ht,jr["raster-fade-duration"]=Jt,jr["raster-hue-rotate"]=bn,jr["raster-opacity"]=wt,jr["raster-resampling"]=tn,jr["raster-saturation"]=Wt,Ar.visibility=Ke,xr.paint=jr,xr.layout=Ar,ln.getLayer(x)&&ln.removeLayer(x),ln.getSource(x)&&ln.removeSource(x),ln.addSource(x,L),ln.addLayer(xr,$e),function(){ln!=null&&ln.getLayer(x)&&ln.removeLayer(x),ln!=null&&ln.getSource(x)&&ln.removeSource(x),wn.current=null}}},[ln,x]),(0,K.useEffect)(function(){if(ln){var xr=ln.getLayer(x);if(xr){if(!wn.current){wn.current=g;return}Xi(L,wn.current.source)||(ln.removeLayer(x),ln.removeSource(x),ln.addSource(x,L),ln.addLayer(xr,$e)),Xi(De,wn.current.filter)||ln.setFilter(x,De),(ee!==wn.current.maxzoom||Ce!==wn.current.minzoom)&&ln.setLayerZoomRange(x,Ce,ee),Be!==wn.current.slot&&ln.setSlot(x,Be),Ke!==wn.current.visibility&&ln.setLayoutProperty(x,"visibility",Ke),tn!==wn.current.resampling&&ln.setPaintProperty(x,"raster-resampling",tn),Xi($t,wn.current.brightnessMax)||ln.setPaintProperty(x,"raster-brightness-max",$t),Xi(an,wn.current.brightnessMin)||ln.setPaintProperty(x,"raster-brightness-min",an),Xi(An,wn.current.color)||ln.setPaintProperty(x,"raster-color",An),Xi(yn,wn.current.colorMix)||ln.setPaintProperty(x,"raster-color-mix",yn),Xi(pr,wn.current.colorRange)||ln.setPaintProperty(x,"raster-color-range",pr),Xi(br,wn.current.contrast)||ln.setPaintProperty(x,"raster-contrast",br),Xi(ht,wn.current.emissiveStrength)||ln.setPaintProperty(x,"raster-emissive-strength",ht),Xi(Jt,wn.current.fadeDuration)||ln.setPaintProperty(x,"raster-fade-duration",Jt),Xi(bn,wn.current.hueRotate)||ln.setPaintProperty(x,"raster-hue-rotate",bn),Xi(wt,wn.current.opacity)||ln.setPaintProperty(x,"raster-opacity",wt),Xi(Wt,wn.current.saturation)||ln.setPaintProperty(x,"raster-saturation",Wt),$e!==wn.current.beforeId&&ln.moveLayer(x,$e),wn.current=g}}},[L,ee,Ce,Be,JSON.stringify(De),$e,Ke,tn,JSON.stringify($t),JSON.stringify(an),JSON.stringify(An),JSON.stringify(yn),JSON.stringify(pr),JSON.stringify(br),JSON.stringify(ht),JSON.stringify(Jt),JSON.stringify(bn),JSON.stringify(wt),JSON.stringify(Wt)]),null},k=A,Z=i(30967),q=function(g){var x=g.lngLat,L=x===void 0?[180,90]:x,V=g.anchor,ee=V===void 0?"center":V,_e=g.className,Ce=g.clickTolerance,Be=Ce===void 0?0:Ce,De=g.color,$e=De===void 0?"#3FB1CE":De,dt=g.draggable,Ke=dt===void 0?!1:dt,pt=g.occludedOpacity,$t=pt===void 0?.2:pt,Pt=g.offset,an=g.pitchAlignment,An=an===void 0?"auto":an,un=g.rotation,yn=un===void 0?0:un,pr=g.rotationAlignment,ur=pr===void 0?"auto":pr,br=g.scale,sr=br===void 0?1:br,ht=g.onAdd,Rt=g.children,Jt=(0,K.useContext)(Qo),On=(0,K.useRef)(null),bn=(0,K.useRef)(null),kn=$s(g),wt=kn.updateEvents,Vt=kn.offEvents,tn=(0,K.useState)(!1),Dn=te()(tn,2),Wt=Dn[1];return(0,K.useEffect)(function(){if(Jt){On.current&&On.current.remove();var ln={};if(ee&&(ln.anchor=ee),_e&&(ln.className=_e),Pt&&(ln.offset=Pt),ln.clickTolerance=Be,ln.color=$e,ln.draggable=Ke,ln.occludedOpacity=$t,ln.pitchAlignment=An,ln.rotation=yn,ln.rotationAlignment=ur,ln.scale=sr,Rt){var wn=document.createElement("div");wn.classList.add("mapboxgl-marker-content__inner"),bn.current=wn,ln.element=bn.current}return On.current=new(B()).Marker(ln),On.current.setLngLat(L),On.current.addTo(Jt),ht&&ht(On.current),Wt(!0),function(){On.current&&(On.current.remove(),Vt(On.current)),On.current=null,bn.current=null}}},[Jt,ee,_e,Be,$e,Ke,$t,An,yn,ur,sr,JSON.stringify(Pt)]),(0,K.useEffect)(function(){Jt&&On.current&&L&&On.current.setLngLat(L)},[JSON.stringify(L)]),On.current&&wt(On.current),bn.current?(0,Z.createPortal)(Rt,bn.current):null},re=q,fe=function(g){var x=g.lngLat,L=g.anchor,V=g.className,ee=g.closeButton,_e=ee===void 0?!0:ee,Ce=g.closeOnClick,Be=Ce===void 0?!1:Ce,De=g.closeOnMove,$e=De===void 0?!1:De,dt=g.focusAfterOpen,Ke=dt===void 0?!1:dt,pt=g.maxWidth,$t=pt===void 0?"240px":pt,Pt=g.offset,an=g.onAdd,An=g.children,un=(0,K.useContext)(Qo),yn=(0,K.useRef)(null),pr=(0,K.useRef)(null),ur=$s(g),br=ur.updateEvents,sr=ur.offEvents,ht=(0,K.useState)(!1),Rt=te()(ht,2),Jt=Rt[1];return(0,K.useEffect)(function(){if(un){yn.current&&yn.current.remove();var On={};if(L&&(On.anchor=L),V&&(On.className=V),Pt&&(On.offset=Pt),On.closeButton=_e,On.closeOnClick=Be,On.closeOnMove=$e,On.focusAfterOpen=Ke,On.maxWidth=$t,yn.current=new(B()).Popup(On),x&&yn.current.setLngLat(x),An){var bn=document.createElement("div");bn.classList.add("mapboxgl-popup-content__inner"),pr.current=bn,yn.current.setDOMContent(pr.current)}return yn.current.addTo(un),an&&an(yn.current),Jt(!0),function(){yn.current&&(yn.current.remove(),sr(yn.current)),yn.current=null,pr.current=null}}},[un,L,V,_e,Be,$e,Ke,$t,JSON.stringify(Pt)]),(0,K.useEffect)(function(){un&&yn.current&&x&&yn.current.setLngLat(x)},[JSON.stringify(x)]),yn.current&&br(yn.current),pr.current?(0,Z.createPortal)(An,pr.current):null},pe=fe,Te=63710088e-1,et={centimeters:Te*100,centimetres:Te*100,degrees:360/(2*Math.PI),feet:Te*3.28084,inches:Te*39.37,kilometers:Te/1e3,kilometres:Te/1e3,meters:Te,metres:Te,miles:Te/1609.344,millimeters:Te*1e3,millimetres:Te*1e3,nauticalmiles:Te/1852,radians:1,yards:Te*1.0936},We={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function rt(p,g,x={}){const L={type:"Feature"};return(x.id===0||x.id)&&(L.id=x.id),x.bbox&&(L.bbox=x.bbox),L.properties=g||{},L.geometry=p,L}function it(p,g,x={}){switch(p){case"Point":return kt(g).geometry;case"LineString":return on(g).geometry;case"Polygon":return Qt(g).geometry;case"MultiPoint":return $n(g).geometry;case"MultiLineString":return Rn(g).geometry;case"MultiPolygon":return Pr(g).geometry;default:throw new Error(p+" is invalid")}}function kt(p,g,x={}){if(!p)throw new Error("coordinates is required");if(!Array.isArray(p))throw new Error("coordinates must be an Array");if(p.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Kr(p[0])||!Kr(p[1]))throw new Error("coordinates must contain numbers");return rt({type:"Point",coordinates:p},g,x)}function qt(p,g,x={}){return nn(p.map(L=>kt(L,g)),x)}function Qt(p,g,x={}){for(const V of p){if(V.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(V[V.length-1].length!==V[0].length)throw new Error("First and last Position are not equivalent.");for(let ee=0;ee<V[V.length-1].length;ee++)if(V[V.length-1][ee]!==V[0][ee])throw new Error("First and last Position are not equivalent.")}return rt({type:"Polygon",coordinates:p},g,x)}function vn(p,g,x={}){return nn(p.map(L=>Qt(L,g)),x)}function on(p,g,x={}){if(p.length<2)throw new Error("coordinates must be an array of two or more positions");return rt({type:"LineString",coordinates:p},g,x)}function dn(p,g,x={}){return nn(p.map(L=>on(L,g)),x)}function nn(p,g={}){const x={type:"FeatureCollection"};return g.id&&(x.id=g.id),g.bbox&&(x.bbox=g.bbox),x.features=p,x}function Rn(p,g,x={}){return rt({type:"MultiLineString",coordinates:p},g,x)}function $n(p,g,x={}){return rt({type:"MultiPoint",coordinates:p},g,x)}function Pr(p,g,x={}){return rt({type:"MultiPolygon",coordinates:p},g,x)}function dr(p,g,x={}){return rt({type:"GeometryCollection",geometries:p},g,x)}function Or(p,g=0){if(g&&!(g>=0))throw new Error("precision must be a positive number");const x=Math.pow(10,g||0);return Math.round(p*x)/x}function kr(p,g="kilometers"){const x=et[g];if(!x)throw new Error(g+" units is invalid");return p*x}function Yn(p,g="kilometers"){const x=et[g];if(!x)throw new Error(g+" units is invalid");return p/x}function Mr(p,g){return Fr(Yn(p,g))}function ti(p){let g=p%360;return g<0&&(g+=360),g}function ir(p){return p=p%360,p>180?p-360:p<-180?p+360:p}function Fr(p){return p%(2*Math.PI)*180/Math.PI}function Cr(p){return p%360*Math.PI/180}function xi(p,g="kilometers",x="kilometers"){if(!(p>=0))throw new Error("length must be a positive number");return kr(Yn(p,g),x)}function ri(p,g="meters",x="kilometers"){if(!(p>=0))throw new Error("area must be a positive number");const L=We[g];if(!L)throw new Error("invalid original units");const V=We[x];if(!V)throw new Error("invalid final units");return p/L*V}function Kr(p){return!isNaN(p)&&p!==null&&!Array.isArray(p)}function mi(p){return p!==null&&typeof p=="object"&&!Array.isArray(p)}function gi(p){if(!p)throw new Error("bbox is required");if(!Array.isArray(p))throw new Error("bbox must be an Array");if(p.length!==4&&p.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");p.forEach(g=>{if(!Kr(g))throw new Error("bbox must only contain numbers")})}function Gi(p){if(!p)throw new Error("id is required");if(["string","number"].indexOf(typeof p)===-1)throw new Error("id must be a number or a string")}function Li(p){if(!p)throw new Error("coord is required");if(!Array.isArray(p)){if(p.type==="Feature"&&p.geometry!==null&&p.geometry.type==="Point")return[...p.geometry.coordinates];if(p.type==="Point")return[...p.coordinates]}if(Array.isArray(p)&&p.length>=2&&!Array.isArray(p[0])&&!Array.isArray(p[1]))return[...p];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bo(p){if(Array.isArray(p))return p;if(p.type==="Feature"){if(p.geometry!==null)return p.geometry.coordinates}else if(p.coordinates)return p.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function wo(p){if(p.length>1&&isNumber(p[0])&&isNumber(p[1]))return!0;if(Array.isArray(p[0])&&p[0].length)return wo(p[0]);throw new Error("coordinates must only contain numbers")}function Ao(p,g,x){if(!g||!x)throw new Error("type and name required");if(!p||p.type!==g)throw new Error("Invalid input to "+x+": must be a "+g+", given "+p.type)}function zo(p,g,x){if(!p)throw new Error("No feature passed");if(!x)throw new Error(".featureOf() requires a name");if(!p||p.type!=="Feature"||!p.geometry)throw new Error("Invalid input to "+x+", Feature with geometry required");if(!p.geometry||p.geometry.type!==g)throw new Error("Invalid input to "+x+": must be a "+g+", given "+p.geometry.type)}function Ga(p,g,x){if(!p)throw new Error("No featureCollection passed");if(!x)throw new Error(".collectionOf() requires a name");if(!p||p.type!=="FeatureCollection")throw new Error("Invalid input to "+x+", FeatureCollection required");for(const L of p.features){if(!L||L.type!=="Feature"||!L.geometry)throw new Error("Invalid input to "+x+", Feature with geometry required");if(!L.geometry||L.geometry.type!==g)throw new Error("Invalid input to "+x+": must be a "+g+", given "+L.geometry.type)}}function ba(p){return p.type==="Feature"?p.geometry:p}function wl(p,g){return p.type==="FeatureCollection"?"FeatureCollection":p.type==="GeometryCollection"?"GeometryCollection":p.type==="Feature"&&p.geometry!==null?p.geometry.type:p.type}function os(p,g,x={}){var L=Li(p),V=Li(g),ee=Cr(V[1]-L[1]),_e=Cr(V[0]-L[0]),Ce=Cr(L[1]),Be=Cr(V[1]),De=Math.pow(Math.sin(ee/2),2)+Math.pow(Math.sin(_e/2),2)*Math.cos(Ce)*Math.cos(Be);return kr(2*Math.atan2(Math.sqrt(De),Math.sqrt(1-De)),x.units)}var ia=null;function Pa(p,g,x){if(p!==null)for(var L,V,ee,_e,Ce,Be,De,$e=0,dt=0,Ke,pt=p.type,$t=pt==="FeatureCollection",Pt=pt==="Feature",an=$t?p.features.length:1,An=0;An<an;An++){De=$t?p.features[An].geometry:Pt?p.geometry:p,Ke=De?De.type==="GeometryCollection":!1,Ce=Ke?De.geometries.length:1;for(var un=0;un<Ce;un++){var yn=0,pr=0;if(_e=Ke?De.geometries[un]:De,_e!==null){Be=_e.coordinates;var ur=_e.type;switch($e=x&&(ur==="Polygon"||ur==="MultiPolygon")?1:0,ur){case null:break;case"Point":if(g(Be,dt,An,yn,pr)===!1)return!1;dt++,yn++;break;case"LineString":case"MultiPoint":for(L=0;L<Be.length;L++){if(g(Be[L],dt,An,yn,pr)===!1)return!1;dt++,ur==="MultiPoint"&&yn++}ur==="LineString"&&yn++;break;case"Polygon":case"MultiLineString":for(L=0;L<Be.length;L++){for(V=0;V<Be[L].length-$e;V++){if(g(Be[L][V],dt,An,yn,pr)===!1)return!1;dt++}ur==="MultiLineString"&&yn++,ur==="Polygon"&&pr++}ur==="Polygon"&&yn++;break;case"MultiPolygon":for(L=0;L<Be.length;L++){for(pr=0,V=0;V<Be[L].length;V++){for(ee=0;ee<Be[L][V].length-$e;ee++){if(g(Be[L][V][ee],dt,An,yn,pr)===!1)return!1;dt++}pr++}yn++}break;case"GeometryCollection":for(L=0;L<_e.geometries.length;L++)if(Pa(_e.geometries[L],g,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function uo(p,g,x,L){var V=x;return Pa(p,function(ee,_e,Ce,Be,De){_e===0&&x===void 0?V=ee:V=g(V,ee,_e,Ce,Be,De)},L),V}function na(p,g){var x;switch(p.type){case"FeatureCollection":for(x=0;x<p.features.length&&g(p.features[x].properties,x)!==!1;x++);break;case"Feature":g(p.properties,0);break}}function Ya(p,g,x){var L=x;return na(p,function(V,ee){ee===0&&x===void 0?L=V:L=g(L,V,ee)}),L}function Ia(p,g){if(p.type==="Feature")g(p,0);else if(p.type==="FeatureCollection")for(var x=0;x<p.features.length&&g(p.features[x],x)!==!1;x++);}function Ms(p,g,x){var L=x;return Ia(p,function(V,ee){ee===0&&x===void 0?L=V:L=g(L,V,ee)}),L}function $u(p){var g=[];return Pa(p,function(x){g.push(x)}),g}function xl(p,g){var x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke=0,pt=p.type==="FeatureCollection",$t=p.type==="Feature",Pt=pt?p.features.length:1;for(x=0;x<Pt;x++){for(Ce=pt?p.features[x].geometry:$t?p.geometry:p,De=pt?p.features[x].properties:$t?p.properties:{},$e=pt?p.features[x].bbox:$t?p.bbox:void 0,dt=pt?p.features[x].id:$t?p.id:void 0,Be=Ce?Ce.type==="GeometryCollection":!1,_e=Be?Ce.geometries.length:1,V=0;V<_e;V++){if(ee=Be?Ce.geometries[V]:Ce,ee===null){if(g(null,Ke,De,$e,dt)===!1)return!1;continue}switch(ee.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(ee,Ke,De,$e,dt)===!1)return!1;break}case"GeometryCollection":{for(L=0;L<ee.geometries.length;L++)if(g(ee.geometries[L],Ke,De,$e,dt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ke++}}function lu(p,g,x){var L=x;return xl(p,function(V,ee,_e,Ce,Be){ee===0&&x===void 0?L=V:L=g(L,V,ee,_e,Ce,Be)}),L}function Zu(p,g){xl(p,function(x,L,V,ee,_e){var Ce=x===null?null:x.type;switch(Ce){case null:case"Point":case"LineString":case"Polygon":return g(rt(x,V,{bbox:ee,id:_e}),L,0)===!1?!1:void 0}var Be;switch(Ce){case"MultiPoint":Be="Point";break;case"MultiLineString":Be="LineString";break;case"MultiPolygon":Be="Polygon";break}for(var De=0;De<x.coordinates.length;De++){var $e=x.coordinates[De],dt={type:Be,coordinates:$e};if(g(rt(dt,V),L,De)===!1)return!1}})}function Mu(p,g,x){var L=x;return Zu(p,function(V,ee,_e){ee===0&&_e===0&&x===void 0?L=V:L=g(L,V,ee,_e)}),L}function Ws(p,g){Zu(p,function(x,L,V){var ee=0;if(x.geometry){var _e=x.geometry.type;if(!(_e==="Point"||_e==="MultiPoint")){var Ce,Be=0,De=0,$e=0;if(Pa(x,function(dt,Ke,pt,$t,Pt){if(Ce===void 0||L>Be||$t>De||Pt>$e){Ce=dt,Be=L,De=$t,$e=Pt,ee=0;return}var an=on([Ce,dt],x.properties);if(g(an,L,V,Pt,ee)===!1)return!1;ee++,Ce=dt})===!1)return!1}}})}function Us(p,g,x){var L=x,V=!1;return Ws(p,function(ee,_e,Ce,Be,De){V===!1&&x===void 0?L=ee:L=g(L,ee,_e,Ce,Be,De),V=!0}),L}function gs(p,g){if(!p)throw new Error("geojson is required");Zu(p,function(x,L,V){if(x.geometry!==null){var ee=x.geometry.type,_e=x.geometry.coordinates;switch(ee){case"LineString":if(g(x,L,V,0,0)===!1)return!1;break;case"Polygon":for(var Ce=0;Ce<_e.length;Ce++)if(g(lineString(_e[Ce],x.properties),L,V,Ce)===!1)return!1;break}}})}function Xa(p,g,x){var L=x;return gs(p,function(V,ee,_e,Ce){ee===0&&x===void 0?L=V:L=g(L,V,ee,_e,Ce)}),L}function El(p,g){if(g=g||{},!isObject(g))throw new Error("options is invalid");var x=g.featureIndex||0,L=g.multiFeatureIndex||0,V=g.geometryIndex||0,ee=g.segmentIndex||0,_e=g.properties,Ce;switch(p.type){case"FeatureCollection":x<0&&(x=p.features.length+x),_e=_e||p.features[x].properties,Ce=p.features[x].geometry;break;case"Feature":_e=_e||p.properties,Ce=p.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ce=p;break;default:throw new Error("geojson is invalid")}if(Ce===null)return null;var Be=Ce.coordinates;switch(Ce.type){case"Point":case"MultiPoint":return null;case"LineString":return ee<0&&(ee=Be.length+ee-1),lineString([Be[ee],Be[ee+1]],_e,g);case"Polygon":return V<0&&(V=Be.length+V),ee<0&&(ee=Be[V].length+ee-1),lineString([Be[V][ee],Be[V][ee+1]],_e,g);case"MultiLineString":return L<0&&(L=Be.length+L),ee<0&&(ee=Be[L].length+ee-1),lineString([Be[L][ee],Be[L][ee+1]],_e,g);case"MultiPolygon":return L<0&&(L=Be.length+L),V<0&&(V=Be[L].length+V),ee<0&&(ee=Be[L][V].length-ee-1),lineString([Be[L][V][ee],Be[L][V][ee+1]],_e,g)}throw new Error("geojson is invalid")}function Wu(p,g){if(g=g||{},!isObject(g))throw new Error("options is invalid");var x=g.featureIndex||0,L=g.multiFeatureIndex||0,V=g.geometryIndex||0,ee=g.coordIndex||0,_e=g.properties,Ce;switch(p.type){case"FeatureCollection":x<0&&(x=p.features.length+x),_e=_e||p.features[x].properties,Ce=p.features[x].geometry;break;case"Feature":_e=_e||p.properties,Ce=p.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ce=p;break;default:throw new Error("geojson is invalid")}if(Ce===null)return null;var Be=Ce.coordinates;switch(Ce.type){case"Point":return point(Be,_e,g);case"MultiPoint":return L<0&&(L=Be.length+L),point(Be[L],_e,g);case"LineString":return ee<0&&(ee=Be.length+ee),point(Be[ee],_e,g);case"Polygon":return V<0&&(V=Be.length+V),ee<0&&(ee=Be[V].length+ee),point(Be[V][ee],_e,g);case"MultiLineString":return L<0&&(L=Be.length+L),ee<0&&(ee=Be[L].length+ee),point(Be[L][ee],_e,g);case"MultiPolygon":return L<0&&(L=Be.length+L),V<0&&(V=Be[L].length+V),ee<0&&(ee=Be[L][V].length-ee),point(Be[L][V][ee],_e,g)}throw new Error("geojson is invalid")}var Vs=Object.defineProperty,hc=Object.defineProperties,qc=Object.getOwnPropertyDescriptors,ed=Object.getOwnPropertySymbols,td=Object.prototype.hasOwnProperty,Hd=Object.prototype.propertyIsEnumerable,ud=(p,g,x)=>g in p?Vs(p,g,{enumerable:!0,configurable:!0,writable:!0,value:x}):p[g]=x,ec=(p,g)=>{for(var x in g||(g={}))td.call(g,x)&&ud(p,x,g[x]);if(ed)for(var x of ed(g))Hd.call(g,x)&&ud(p,x,g[x]);return p},Kh=(p,g)=>hc(p,qc(g));function tc(p,g,x={}){if(!p||!g)throw new Error("lines and pt are required arguments");const L=Li(g);let V=kt([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),ee=0;return Zu(p,function(_e,Ce,Be){const De=bo(_e);for(let $e=0;$e<De.length-1;$e++){const dt=kt(De[$e]);dt.properties.dist=os(g,dt,x);const Ke=Li(dt),pt=kt(De[$e+1]);pt.properties.dist=os(g,pt,x);const $t=Li(pt),Pt=os(dt,pt,x);let an,An;Ke[0]===L[0]&&Ke[1]===L[1]?[an,,An]=[Ke,void 0,!1]:$t[0]===L[0]&&$t[1]===L[1]?[an,,An]=[$t,void 0,!0]:[an,,An]=Ig(dt.geometry.coordinates,pt.geometry.coordinates,Li(g));let un;an&&(un=kt(an,{dist:os(g,an,x),multiFeatureIndex:Be,location:ee+os(dt,an,x)})),un&&un.properties.dist<V.properties.dist&&(V=Kh(ec({},un),{properties:Kh(ec({},un.properties),{index:An?$e+1:$e})})),ee+=Pt}}),V}function Yh(p,g){const[x,L,V]=p,[ee,_e,Ce]=g;return x*ee+L*_e+V*Ce}function Wl(p,g){const[x,L,V]=p,[ee,_e,Ce]=g;return[L*Ce-V*_e,V*ee-x*Ce,x*_e-L*ee]}function fp(p){return Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)+Math.pow(p[2],2))}function dh(p,g){const x=Yh(p,g)/(fp(p)*fp(g));return Math.acos(Math.min(Math.max(x,-1),1))}function Um(p){const g=Cr(p[1]),x=Cr(p[0]);return[Math.cos(g)*Math.cos(x),Math.cos(g)*Math.sin(x),Math.sin(g)]}function pp(p){const[g,x,L]=p,V=Fr(Math.asin(L));return[Fr(Math.atan2(x,g)),V]}function Ig(p,g,x){const L=Um(p),V=Um(g),ee=Um(x),[_e,Ce,Be]=ee,[De,$e,dt]=Wl(L,V),Ke=$e*Be-dt*Ce,pt=dt*_e-De*Be,$t=De*Ce-$e*_e,Pt=$t*$e-pt*dt,an=Ke*dt-$t*De,An=pt*De-Ke*$e,un=1/Math.sqrt(Math.pow(Pt,2)+Math.pow(an,2)+Math.pow(An,2)),yn=[Pt*un,an*un,An*un],pr=[-1*Pt*un,-1*an*un,-1*An*un],ur=dh(L,V),br=dh(L,yn),sr=dh(V,yn),ht=dh(L,pr),Rt=dh(V,pr);let Jt;return br<ht&&br<Rt||sr<ht&&sr<Rt?Jt=yn:Jt=pr,dh(L,Jt)>ur||dh(V,Jt)>ur?os(pp(Jt),pp(L))<=os(pp(Jt),pp(V))?[pp(L),!0,!1]:[pp(V),!1,!0]:[pp(Jt),!1,!1]}var Mg=null;function Vm(p,g,x={}){const L=Li(p),V=Li(g);V[0]+=V[0]-L[0]>180?-360:L[0]-V[0]>180?360:0;const ee=Kd(L,V);return xi(ee,"meters",x.units)}function Kd(p,g,x){x=x===void 0?Te:Number(x);const L=x,V=p[1]*Math.PI/180,ee=g[1]*Math.PI/180,_e=ee-V;let Ce=Math.abs(g[0]-p[0])*Math.PI/180;Ce>Math.PI&&(Ce-=2*Math.PI);const Be=Math.log(Math.tan(ee/2+Math.PI/4)/Math.tan(V/2+Math.PI/4)),De=Math.abs(Be)>1e-11?_e/Be:Math.cos(V);return Math.sqrt(_e*_e+De*De*Ce*Ce)*L}var S_=null;function Cg(p,g,x={}){var L,V;const ee=(L=x.method)!=null?L:"geodesic",_e=(V=x.units)!=null?V:"kilometers";if(!p)throw new Error("pt is required");if(Array.isArray(p)?p=kt(p):p.type==="Point"?p=rt(p):zo(p,"Point","point"),!g)throw new Error("line is required");Array.isArray(g)?g=on(g):g.type==="LineString"?g=rt(g):zo(g,"LineString","line");let Ce=1/0;const Be=p.geometry.coordinates;return Ws(g,De=>{if(De){const $e=De.geometry.coordinates[0],dt=De.geometry.coordinates[1],Ke=wf(Be,$e,dt,{method:ee});Ke<Ce&&(Ce=Ke)}}),xi(Ce,"degrees",_e)}function wf(p,g,x,L){if(L.method==="geodesic")return tc(on([g,x]).geometry,p,{units:"degrees"}).properties.dist;const V=[x[0]-g[0],x[1]-g[1]],ee=[p[0]-g[0],p[1]-g[1]],_e=kp(ee,V);if(_e<=0)return Vm(p,g,{units:"degrees"});const Ce=kp(V,V);if(Ce<=_e)return Vm(p,x,{units:"degrees"});const Be=_e/Ce,De=[g[0]+Be*V[0],g[1]+Be*V[1]];return Vm(p,De,{units:"degrees"})}function kp(p,g){return p[0]*g[0]+p[1]*g[1]}var Bf=null;function Th(p,g={}){return Us(p,(x,L)=>{const V=L.geometry.coordinates;return x+os(V[0],V[1],g)},0)}var fc=null;function Gm(p){return lu(p,(g,x)=>g+fm(x),0)}function fm(p){let g=0,x;switch(p.type){case"Polygon":return $m(p.coordinates);case"MultiPolygon":for(x=0;x<p.coordinates.length;x++)g+=$m(p.coordinates[x]);return g;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function $m(p){let g=0;if(p&&p.length>0){g+=Math.abs(Zm(p[0]));for(let x=1;x<p.length;x++)g-=Math.abs(Zm(p[x]))}return g}var Pv=Te*Te/2,jf=Math.PI/180;function Zm(p){const g=p.length-1;if(g<=2)return 0;let x=0,L=0;for(;L<g;){const V=p[L],ee=p[L+1===g?0:L+1],_e=p[L+2>=g?(L+2)%g:L+2],Ce=V[0]*jf,Be=ee[1]*jf,De=_e[0]*jf;x+=(De-Ce)*Math.sin(Be),L++}return x*Pv}var Ef=null;function Sf(p,g,x={}){if(x.final===!0)return Ag(p,g);const L=Li(p),V=Li(g),ee=Cr(L[0]),_e=Cr(V[0]),Ce=Cr(L[1]),Be=Cr(V[1]),De=Math.sin(_e-ee)*Math.cos(Be),$e=Math.cos(Ce)*Math.sin(Be)-Math.sin(Ce)*Math.cos(Be)*Math.cos(_e-ee);return Fr(Math.atan2(De,$e))}function Ag(p,g){let x=Sf(g,p);return x=(x+180)%360,x}var Pg=null;function Ov(p,g,x,L={}){const V=Li(p),ee=Cr(V[0]),_e=Cr(V[1]),Ce=Cr(x),Be=Yn(g,L.units),De=Math.asin(Math.sin(_e)*Math.cos(Be)+Math.cos(_e)*Math.sin(Be)*Math.cos(Ce)),$e=ee+Math.atan2(Math.sin(Ce)*Math.sin(Be)*Math.cos(_e),Math.cos(Be)-Math.sin(_e)*Math.sin(De)),dt=Fr($e),Ke=Fr(De);return kt([dt,Ke],L.properties)}var Rv=null;function T_(p,g,x={}){const V=ba(p).coordinates;let ee=0;for(let _e=0;_e<V.length&&!(g>=ee&&_e===V.length-1);_e++)if(ee>=g){const Ce=g-ee;if(Ce){const Be=Sf(V[_e],V[_e-1])-180;return Ov(V[_e],Ce,Be,x)}else return kt(V[_e])}else ee+=os(V[_e],V[_e+1],x);return kt(V[V.length-1])}var I_=null;function Vc(p,g={}){if(p.bbox!=null&&g.recompute!==!0)return p.bbox;const x=[1/0,1/0,-1/0,-1/0];return Pa(p,L=>{x[0]>L[0]&&(x[0]=L[0]),x[1]>L[1]&&(x[1]=L[1]),x[2]<L[0]&&(x[2]=L[0]),x[3]<L[1]&&(x[3]=L[1])}),x}var pm=null;function M_(p,g={}){const x=Vc(p),L=(x[0]+x[2])/2,V=(x[1]+x[3])/2;return kt([L,V],g.properties,g)}var mm=null,Wm=i(31054);function jl(){return new Ih}function Ih(){this.reset()}Ih.prototype={constructor:Ih,reset:function(){this.s=this.t=0},add:function(p){Uf(_m,p,this.t),Uf(this,_m.s,this.s),this.s?this.t+=_m.t:this.s=_m.t},valueOf:function(){return this.s}};var _m=new Ih;function Uf(p,g,x){var L=p.s=g+x,V=L-g,ee=L-V;p.t=g-ee+(x-V)}var _=1e-6,y=1e-12,F=Math.PI,ie=F/2,Re=F/4,Ze=F*2,Xt=180/F,Wn=F/180,yr=Math.abs,hi=Math.atan,Hi=Math.atan2,bi=Math.cos,to=Math.ceil,Ko=Math.exp,da=Math.floor,ha=Math.log,nc=Math.pow,Rr=Math.sin,$r=Math.sign||function(p){return p>0?1:p<0?-1:0},ii=Math.sqrt,Eo=Math.tan;function ya(p){return p>1?0:p<-1?F:Math.acos(p)}function wa(p){return p>1?ie:p<-1?-ie:Math.asin(p)}function Qa(p){return(p=Rr(p/2))*p}function ea(){}function pc(p,g){p&&Xh.hasOwnProperty(p.type)&&Xh[p.type](p,g)}var rl={Feature:function(p,g){pc(p.geometry,g)},FeatureCollection:function(p,g){for(var x=p.features,L=-1,V=x.length;++L<V;)pc(x[L].geometry,g)}},Xh={Sphere:function(p,g){g.sphere()},Point:function(p,g){p=p.coordinates,g.point(p[0],p[1],p[2])},MultiPoint:function(p,g){for(var x=p.coordinates,L=-1,V=x.length;++L<V;)p=x[L],g.point(p[0],p[1],p[2])},LineString:function(p,g){gm(p.coordinates,g,0)},MultiLineString:function(p,g){for(var x=p.coordinates,L=-1,V=x.length;++L<V;)gm(x[L],g,0)},Polygon:function(p,g){Lv(p.coordinates,g)},MultiPolygon:function(p,g){for(var x=p.coordinates,L=-1,V=x.length;++L<V;)Lv(x[L],g)},GeometryCollection:function(p,g){for(var x=p.geometries,L=-1,V=x.length;++L<V;)pc(x[L],g)}};function gm(p,g,x){var L=-1,V=p.length-x,ee;for(g.lineStart();++L<V;)ee=p[L],g.point(ee[0],ee[1],ee[2]);g.lineEnd()}function Lv(p,g){var x=-1,L=p.length;for(g.polygonStart();++x<L;)gm(p[x],g,1);g.polygonEnd()}function Og(p,g){p&&rl.hasOwnProperty(p.type)?rl[p.type](p,g):pc(p,g)}var C_=jl(),A_=jl(),P_,Dv,Rg,Lg,Np,Dd={point:ea,lineStart:ea,lineEnd:ea,polygonStart:function(){C_.reset(),Dd.lineStart=Hy,Dd.lineEnd=Dg},polygonEnd:function(){var p=+C_;A_.add(p<0?Ze+p:p),this.lineStart=this.lineEnd=this.point=ea},sphere:function(){A_.add(Ze)}};function Hy(){Dd.point=Ky}function Dg(){kv(P_,Dv)}function Ky(p,g){Dd.point=kv,P_=p,Dv=g,p*=Wn,g*=Wn,Rg=p,Lg=bi(g=g/2+Re),Np=Rr(g)}function kv(p,g){p*=Wn,g*=Wn,g=g/2+Re;var x=p-Rg,L=x>=0?1:-1,V=L*x,ee=bi(g),_e=Rr(g),Ce=Np*_e,Be=Lg*ee+Ce*bi(V),De=Ce*L*Rr(V);C_.add(Hi(De,Be)),Rg=p,Lg=ee,Np=_e}function Nv(p){return A_.reset(),stream(p,Dd),A_*2}function O_(p){return[Hi(p[1],p[0]),wa(p[2])]}function Vf(p){var g=p[0],x=p[1],L=bi(x);return[L*bi(g),L*Rr(g),Rr(x)]}function R_(p,g){return p[0]*g[0]+p[1]*g[1]+p[2]*g[2]}function zp(p,g){return[p[1]*g[2]-p[2]*g[1],p[2]*g[0]-p[0]*g[2],p[0]*g[1]-p[1]*g[0]]}function L_(p,g){p[0]+=g[0],p[1]+=g[1],p[2]+=g[2]}function D_(p,g){return[p[0]*g,p[1]*g,p[2]*g]}function kg(p){var g=ii(p[0]*p[0]+p[1]*p[1]+p[2]*p[2]);p[0]/=g,p[1]/=g,p[2]/=g}var mc,hh,wc,Mh,mp,zv,Ng,Hm,k_=jl(),Fp,_p,Gf={point:$f,lineStart:Ym,lineEnd:N_,polygonStart:function(){Gf.point=Xm,Gf.lineStart=Yy,Gf.lineEnd=Xy,k_.reset(),Dd.polygonStart()},polygonEnd:function(){Dd.polygonEnd(),Gf.point=$f,Gf.lineStart=Ym,Gf.lineEnd=N_,C_<0?(mc=-(wc=180),hh=-(Mh=90)):k_>_?Mh=90:k_<-_&&(hh=-90),_p[0]=mc,_p[1]=wc}};function $f(p,g){Fp.push(_p=[mc=p,wc=p]),g<hh&&(hh=g),g>Mh&&(Mh=g)}function Km(p,g){var x=Vf([p*Wn,g*Wn]);if(Hm){var L=zp(Hm,x),V=[L[1],-L[0],0],ee=zp(V,L);kg(ee),ee=O_(ee);var _e=p-mp,Ce=_e>0?1:-1,Be=ee[0]*Xt*Ce,De,$e=yr(_e)>180;$e^(Ce*mp<Be&&Be<Ce*p)?(De=ee[1]*Xt,De>Mh&&(Mh=De)):(Be=(Be+360)%360-180,$e^(Ce*mp<Be&&Be<Ce*p)?(De=-ee[1]*Xt,De<hh&&(hh=De)):(g<hh&&(hh=g),g>Mh&&(Mh=g))),$e?p<mp?fh(mc,p)>fh(mc,wc)&&(wc=p):fh(p,wc)>fh(mc,wc)&&(mc=p):wc>=mc?(p<mc&&(mc=p),p>wc&&(wc=p)):p>mp?fh(mc,p)>fh(mc,wc)&&(wc=p):fh(p,wc)>fh(mc,wc)&&(mc=p)}else Fp.push(_p=[mc=p,wc=p]);g<hh&&(hh=g),g>Mh&&(Mh=g),Hm=x,mp=p}function Ym(){Gf.point=Km}function N_(){_p[0]=mc,_p[1]=wc,Gf.point=$f,Hm=null}function Xm(p,g){if(Hm){var x=p-mp;k_.add(yr(x)>180?x+(x>0?360:-360):x)}else zv=p,Ng=g;Dd.point(p,g),Km(p,g)}function Yy(){Dd.lineStart()}function Xy(){Xm(zv,Ng),Dd.lineEnd(),yr(k_)>_&&(mc=-(wc=180)),_p[0]=mc,_p[1]=wc,Hm=null}function fh(p,g){return(g-=p)<0?g+360:g}function Jy(p,g){return p[0]-g[0]}function Qy(p,g){return p[0]<=p[1]?p[0]<=g&&g<=p[1]:g<p[0]||p[1]<g}function Gx(p){var g,x,L,V,ee,_e,Ce;if(Mh=wc=-(mc=hh=1/0),Fp=[],stream(p,Gf),x=Fp.length){for(Fp.sort(Jy),g=1,L=Fp[0],ee=[L];g<x;++g)V=Fp[g],Qy(L,V[0])||Qy(L,V[1])?(fh(L[0],V[1])>fh(L[0],L[1])&&(L[1]=V[1]),fh(V[0],L[1])>fh(L[0],L[1])&&(L[0]=V[0])):ee.push(L=V);for(_e=-1/0,x=ee.length-1,g=0,L=ee[x];g<=x;L=V,++g)V=ee[g],(Ce=fh(L[1],V[0]))>_e&&(_e=Ce,mc=V[0],wc=L[1])}return Fp=_p=null,mc===1/0||hh===1/0?[[NaN,NaN],[NaN,NaN]]:[[mc,hh],[wc,Mh]]}var Jm,vm,z_,zg,F_,Qm,B_,j_,Fg,Bg,jg,qy,Fv,kd,nd,Nd,Jh={sphere:ea,point:Bv,lineStart:e0,lineEnd:t0,polygonStart:function(){Jh.lineStart=B1,Jh.lineEnd=n0},polygonEnd:function(){Jh.lineStart=e0,Jh.lineEnd=t0}};function Bv(p,g){p*=Wn,g*=Wn;var x=bi(g);U_(x*bi(p),x*Rr(p),Rr(g))}function U_(p,g,x){++Jm,z_+=(p-z_)/Jm,zg+=(g-zg)/Jm,F_+=(x-F_)/Jm}function e0(){Jh.point=z1}function z1(p,g){p*=Wn,g*=Wn;var x=bi(g);kd=x*bi(p),nd=x*Rr(p),Nd=Rr(g),Jh.point=F1,U_(kd,nd,Nd)}function F1(p,g){p*=Wn,g*=Wn;var x=bi(g),L=x*bi(p),V=x*Rr(p),ee=Rr(g),_e=Hi(ii((_e=nd*ee-Nd*V)*_e+(_e=Nd*L-kd*ee)*_e+(_e=kd*V-nd*L)*_e),kd*L+nd*V+Nd*ee);vm+=_e,Qm+=_e*(kd+(kd=L)),B_+=_e*(nd+(nd=V)),j_+=_e*(Nd+(Nd=ee)),U_(kd,nd,Nd)}function t0(){Jh.point=Bv}function B1(){Jh.point=j1}function n0(){r0(qy,Fv),Jh.point=Bv}function j1(p,g){qy=p,Fv=g,p*=Wn,g*=Wn,Jh.point=r0;var x=bi(g);kd=x*bi(p),nd=x*Rr(p),Nd=Rr(g),U_(kd,nd,Nd)}function r0(p,g){p*=Wn,g*=Wn;var x=bi(g),L=x*bi(p),V=x*Rr(p),ee=Rr(g),_e=nd*ee-Nd*V,Ce=Nd*L-kd*ee,Be=kd*V-nd*L,De=ii(_e*_e+Ce*Ce+Be*Be),$e=wa(De),dt=De&&-$e/De;Fg+=dt*_e,Bg+=dt*Ce,jg+=dt*Be,vm+=$e,Qm+=$e*(kd+(kd=L)),B_+=$e*(nd+(nd=V)),j_+=$e*(Nd+(Nd=ee)),U_(kd,nd,Nd)}function $x(p){Jm=vm=z_=zg=F_=Qm=B_=j_=Fg=Bg=jg=0,stream(p,Jh);var g=Fg,x=Bg,L=jg,V=g*g+x*x+L*L;return V<epsilon2&&(g=Qm,x=B_,L=j_,vm<epsilon&&(g=z_,x=zg,L=F_),V=g*g+x*x+L*L,V<epsilon2)?[NaN,NaN]:[atan2(x,g)*degrees,asin(L/sqrt(V))*degrees]}function Ug(p,g){function x(L,V){return L=p(L,V),g(L[0],L[1])}return p.invert&&g.invert&&(x.invert=function(L,V){return L=g.invert(L,V),L&&p.invert(L[0],L[1])}),x}function V_(p,g){return[p>F?p-Ze:p<-F?p+Ze:p,g]}V_.invert=V_;function jv(p,g,x){return(p%=Ze)?g||x?Ug(Vv(p),Gv(g,x)):Vv(p):g||x?Gv(g,x):V_}function Uv(p){return function(g,x){return g+=p,[g>F?g-Ze:g<-F?g+Ze:g,x]}}function Vv(p){var g=Uv(p);return g.invert=Uv(-p),g}function Gv(p,g){var x=bi(p),L=Rr(p),V=bi(g),ee=Rr(g);function _e(Ce,Be){var De=bi(Be),$e=bi(Ce)*De,dt=Rr(Ce)*De,Ke=Rr(Be),pt=Ke*x+$e*L;return[Hi(dt*V-pt*ee,$e*x-Ke*L),wa(pt*V+dt*ee)]}return _e.invert=function(Ce,Be){var De=bi(Be),$e=bi(Ce)*De,dt=Rr(Ce)*De,Ke=Rr(Be),pt=Ke*V-dt*ee;return[Hi(dt*V+Ke*ee,$e*x+pt*L),wa(pt*x-$e*L)]},_e}function U1(p){p=jv(p[0]*radians,p[1]*radians,p.length>2?p[2]*radians:0);function g(x){return x=p(x[0]*radians,x[1]*radians),x[0]*=degrees,x[1]*=degrees,x}return g.invert=function(x){return x=p.invert(x[0]*radians,x[1]*radians),x[0]*=degrees,x[1]*=degrees,x},g}function $v(p,g,x,L,V,ee){if(x){var _e=bi(g),Ce=Rr(g),Be=L*x;V==null?(V=g+L*Ze,ee=g-Be/2):(V=Zv(_e,V),ee=Zv(_e,ee),(L>0?V<ee:V>ee)&&(V+=L*Ze));for(var De,$e=V;L>0?$e>ee:$e<ee;$e-=Be)De=O_([_e,-Ce*bi($e),-Ce*Rr($e)]),p.point(De[0],De[1])}}function Zv(p,g){g=Vf(g),g[0]-=p,kg(g);var x=ya(-g[1]);return((-g[2]<0?-x:x)+Ze-_)%Ze}function V1(){var p=constant([0,0]),g=constant(90),x=constant(6),L,V,ee={point:_e};function _e(Be,De){L.push(Be=V(Be,De)),Be[0]*=degrees,Be[1]*=degrees}function Ce(){var Be=p.apply(this,arguments),De=g.apply(this,arguments)*radians,$e=x.apply(this,arguments)*radians;return L=[],V=rotateRadians(-Be[0]*radians,-Be[1]*radians,0).invert,$v(ee,De,$e,1),Be={type:"Polygon",coordinates:[L]},L=V=null,Be}return Ce.center=function(Be){return arguments.length?(p=typeof Be=="function"?Be:constant([+Be[0],+Be[1]]),Ce):p},Ce.radius=function(Be){return arguments.length?(g=typeof Be=="function"?Be:constant(+Be),Ce):g},Ce.precision=function(Be){return arguments.length?(x=typeof Be=="function"?Be:constant(+Be),Ce):x},Ce}function Vg(){var p=[],g;return{point:function(x,L){g.push([x,L])},lineStart:function(){p.push(g=[])},lineEnd:ea,rejoin:function(){p.length>1&&p.push(p.pop().concat(p.shift()))},result:function(){var x=p;return p=[],g=null,x}}}function i0(p,g,x,L,V,ee){var _e=p[0],Ce=p[1],Be=g[0],De=g[1],$e=0,dt=1,Ke=Be-_e,pt=De-Ce,$t;if($t=x-_e,!(!Ke&&$t>0)){if($t/=Ke,Ke<0){if($t<$e)return;$t<dt&&(dt=$t)}else if(Ke>0){if($t>dt)return;$t>$e&&($e=$t)}if($t=V-_e,!(!Ke&&$t<0)){if($t/=Ke,Ke<0){if($t>dt)return;$t>$e&&($e=$t)}else if(Ke>0){if($t<$e)return;$t<dt&&(dt=$t)}if($t=L-Ce,!(!pt&&$t>0)){if($t/=pt,pt<0){if($t<$e)return;$t<dt&&(dt=$t)}else if(pt>0){if($t>dt)return;$t>$e&&($e=$t)}if($t=ee-Ce,!(!pt&&$t<0)){if($t/=pt,pt<0){if($t>dt)return;$t>$e&&($e=$t)}else if(pt>0){if($t<$e)return;$t<dt&&(dt=$t)}return $e>0&&(p[0]=_e+$e*Ke,p[1]=Ce+$e*pt),dt<1&&(g[0]=_e+dt*Ke,g[1]=Ce+dt*pt),!0}}}}}function Gg(p,g){return yr(p[0]-g[0])<_&&yr(p[1]-g[1])<_}function Bp(p,g,x,L){this.x=p,this.z=g,this.o=x,this.e=L,this.v=!1,this.n=this.p=null}function Wv(p,g,x,L,V){var ee=[],_e=[],Ce,Be;if(p.forEach(function($t){if(!((Pt=$t.length-1)<=0)){var Pt,an=$t[0],An=$t[Pt],un;if(Gg(an,An)){for(V.lineStart(),Ce=0;Ce<Pt;++Ce)V.point((an=$t[Ce])[0],an[1]);V.lineEnd();return}ee.push(un=new Bp(an,$t,null,!0)),_e.push(un.o=new Bp(an,null,un,!1)),ee.push(un=new Bp(An,$t,null,!1)),_e.push(un.o=new Bp(An,null,un,!0))}}),!!ee.length){for(_e.sort(g),o0(ee),o0(_e),Ce=0,Be=_e.length;Ce<Be;++Ce)_e[Ce].e=x=!x;for(var De=ee[0],$e,dt;;){for(var Ke=De,pt=!0;Ke.v;)if((Ke=Ke.n)===De)return;$e=Ke.z,V.lineStart();do{if(Ke.v=Ke.o.v=!0,Ke.e){if(pt)for(Ce=0,Be=$e.length;Ce<Be;++Ce)V.point((dt=$e[Ce])[0],dt[1]);else L(Ke.x,Ke.n.x,1,V);Ke=Ke.n}else{if(pt)for($e=Ke.p.z,Ce=$e.length-1;Ce>=0;--Ce)V.point((dt=$e[Ce])[0],dt[1]);else L(Ke.x,Ke.p.x,-1,V);Ke=Ke.p}Ke=Ke.o,$e=Ke.z,pt=!pt}while(!Ke.v);V.lineEnd()}}}function o0(p){if(g=p.length){for(var g,x=0,L=p[0],V;++x<g;)L.n=V=p[x],V.p=L,L=V;L.n=V=p[0],V.p=L}}function a0(p,g){return p<g?-1:p>g?1:p>=g?0:NaN}function G1(p){return p.length===1&&(p=$1(p)),{left:function(g,x,L,V){for(L==null&&(L=0),V==null&&(V=g.length);L<V;){var ee=L+V>>>1;p(g[ee],x)<0?L=ee+1:V=ee}return L},right:function(g,x,L,V){for(L==null&&(L=0),V==null&&(V=g.length);L<V;){var ee=L+V>>>1;p(g[ee],x)>0?V=ee:L=ee+1}return L}}}function $1(p){return function(g,x){return a0(p(g),x)}}var s0=G1(a0),Zx=s0.right,Wx=s0.left,Z1=null,l0=Array.prototype,cd=l0.slice,Zf=l0.map,G_=Math.sqrt(50),$_=Math.sqrt(10),qm=Math.sqrt(2);function Z_(p,g,x){var L,V=-1,ee,_e,Ce;if(g=+g,p=+p,x=+x,p===g&&x>0)return[p];if((L=g<p)&&(ee=p,p=g,g=ee),(Ce=W1(p,g,x))===0||!isFinite(Ce))return[];if(Ce>0)for(p=Math.ceil(p/Ce),g=Math.floor(g/Ce),_e=new Array(ee=Math.ceil(g-p+1));++V<ee;)_e[V]=(p+V)*Ce;else for(p=Math.floor(p*Ce),g=Math.ceil(g*Ce),_e=new Array(ee=Math.ceil(p-g+1));++V<ee;)_e[V]=(p-V)/Ce;return L&&_e.reverse(),_e}function W1(p,g,x){var L=(g-p)/Math.max(0,x),V=Math.floor(Math.log(L)/Math.LN10),ee=L/Math.pow(10,V);return V>=0?(ee>=G_?10:ee>=$_?5:ee>=qm?2:1)*Math.pow(10,V):-Math.pow(10,-V)/(ee>=G_?10:ee>=$_?5:ee>=qm?2:1)}function Hx(p,g,x){var L=Math.abs(g-p)/Math.max(0,x),V=Math.pow(10,Math.floor(Math.log(L)/Math.LN10)),ee=L/V;return ee>=G_?V*=10:ee>=$_?V*=5:ee>=qm&&(V*=2),g<p?-V:V}function $g(){var p=identity,g=extent,x=sturges;function L(V){var ee,_e=V.length,Ce,Be=new Array(_e);for(ee=0;ee<_e;++ee)Be[ee]=p(V[ee],ee,V);var De=g(Be),$e=De[0],dt=De[1],Ke=x(Be,$e,dt);Array.isArray(Ke)||(Ke=tickStep($e,dt,Ke),Ke=range(Math.ceil($e/Ke)*Ke,dt,Ke));for(var pt=Ke.length;Ke[0]<=$e;)Ke.shift(),--pt;for(;Ke[pt-1]>dt;)Ke.pop(),--pt;var $t=new Array(pt+1),Pt;for(ee=0;ee<=pt;++ee)Pt=$t[ee]=[],Pt.x0=ee>0?Ke[ee-1]:$e,Pt.x1=ee<pt?Ke[ee]:dt;for(ee=0;ee<_e;++ee)Ce=Be[ee],$e<=Ce&&Ce<=dt&&$t[bisect(Ke,Ce,0,pt)].push(V[ee]);return $t}return L.value=function(V){return arguments.length?(p=typeof V=="function"?V:constant(V),L):p},L.domain=function(V){return arguments.length?(g=typeof V=="function"?V:constant([V[0],V[1]]),L):g},L.thresholds=function(V){return arguments.length?(x=typeof V=="function"?V:Array.isArray(V)?constant(slice.call(V)):constant(V),L):x},L}function Kx(p,g,x){return p=map.call(p,number).sort(ascending),Math.ceil((x-g)/(2*(quantile(p,.75)-quantile(p,.25))*Math.pow(p.length,-.3333333333333333)))}function u0(p){for(var g=p.length,x,L=-1,V=0,ee,_e;++L<g;)V+=p[L].length;for(ee=new Array(V);--g>=0;)for(_e=p[g],x=_e.length;--x>=0;)ee[--V]=_e[x];return ee}var e_=1e9,t_=-e_;function Hv(p,g,x,L){function V(De,$e){return p<=De&&De<=x&&g<=$e&&$e<=L}function ee(De,$e,dt,Ke){var pt=0,$t=0;if(De==null||(pt=_e(De,dt))!==($t=_e($e,dt))||Be(De,$e)<0^dt>0)do Ke.point(pt===0||pt===3?p:x,pt>1?L:g);while((pt=(pt+dt+4)%4)!==$t);else Ke.point($e[0],$e[1])}function _e(De,$e){return yr(De[0]-p)<_?$e>0?0:3:yr(De[0]-x)<_?$e>0?2:1:yr(De[1]-g)<_?$e>0?1:0:$e>0?3:2}function Ce(De,$e){return Be(De.x,$e.x)}function Be(De,$e){var dt=_e(De,1),Ke=_e($e,1);return dt!==Ke?dt-Ke:dt===0?$e[1]-De[1]:dt===1?De[0]-$e[0]:dt===2?De[1]-$e[1]:$e[0]-De[0]}return function(De){var $e=De,dt=Vg(),Ke,pt,$t,Pt,an,An,un,yn,pr,ur,br,sr={point:ht,lineStart:bn,lineEnd:kn,polygonStart:Jt,polygonEnd:On};function ht(Vt,tn){V(Vt,tn)&&$e.point(Vt,tn)}function Rt(){for(var Vt=0,tn=0,Dn=pt.length;tn<Dn;++tn)for(var Wt=pt[tn],ln=1,wn=Wt.length,xr=Wt[0],jr,Ar,Vr=xr[0],ai=xr[1];ln<wn;++ln)jr=Vr,Ar=ai,xr=Wt[ln],Vr=xr[0],ai=xr[1],Ar<=L?ai>L&&(Vr-jr)*(L-Ar)>(ai-Ar)*(p-jr)&&++Vt:ai<=L&&(Vr-jr)*(L-Ar)<(ai-Ar)*(p-jr)&&--Vt;return Vt}function Jt(){$e=dt,Ke=[],pt=[],br=!0}function On(){var Vt=Rt(),tn=br&&Vt,Dn=(Ke=u0(Ke)).length;(tn||Dn)&&(De.polygonStart(),tn&&(De.lineStart(),ee(null,null,1,De),De.lineEnd()),Dn&&Wv(Ke,Ce,Vt,ee,De),De.polygonEnd()),$e=De,Ke=pt=$t=null}function bn(){sr.point=wt,pt&&pt.push($t=[]),ur=!0,pr=!1,un=yn=NaN}function kn(){Ke&&(wt(Pt,an),An&&pr&&dt.rejoin(),Ke.push(dt.result())),sr.point=ht,pr&&$e.lineEnd()}function wt(Vt,tn){var Dn=V(Vt,tn);if(pt&&$t.push([Vt,tn]),ur)Pt=Vt,an=tn,An=Dn,ur=!1,Dn&&($e.lineStart(),$e.point(Vt,tn));else if(Dn&&pr)$e.point(Vt,tn);else{var Wt=[un=Math.max(t_,Math.min(e_,un)),yn=Math.max(t_,Math.min(e_,yn))],ln=[Vt=Math.max(t_,Math.min(e_,Vt)),tn=Math.max(t_,Math.min(e_,tn))];i0(Wt,ln,p,g,x,L)?(pr||($e.lineStart(),$e.point(Wt[0],Wt[1])),$e.point(ln[0],ln[1]),Dn||$e.lineEnd(),br=!1):Dn&&($e.lineStart(),$e.point(Vt,tn),br=!1)}un=Vt,yn=tn,pr=Dn}return sr}}function c0(){var p=0,g=0,x=960,L=500,V,ee,_e;return _e={stream:function(Ce){return V&&ee===Ce?V:V=Hv(p,g,x,L)(ee=Ce)},extent:function(Ce){return arguments.length?(p=+Ce[0][0],g=+Ce[0][1],x=+Ce[1][0],L=+Ce[1][1],V=ee=null,_e):[[p,g],[x,L]]}}}var Kv=jl();function Yv(p,g){var x=g[0],L=g[1],V=[Rr(x),-bi(x),0],ee=0,_e=0;Kv.reset();for(var Ce=0,Be=p.length;Ce<Be;++Ce)if($e=(De=p[Ce]).length)for(var De,$e,dt=De[$e-1],Ke=dt[0],pt=dt[1]/2+Re,$t=Rr(pt),Pt=bi(pt),an=0;an<$e;++an,Ke=un,$t=pr,Pt=ur,dt=An){var An=De[an],un=An[0],yn=An[1]/2+Re,pr=Rr(yn),ur=bi(yn),br=un-Ke,sr=br>=0?1:-1,ht=sr*br,Rt=ht>F,Jt=$t*pr;if(Kv.add(Hi(Jt*sr*Rr(ht),Pt*ur+Jt*bi(ht))),ee+=Rt?br+sr*Ze:br,Rt^Ke>=x^un>=x){var On=zp(Vf(dt),Vf(An));kg(On);var bn=zp(V,On);kg(bn);var kn=(Rt^br>=0?-1:1)*wa(bn[2]);(L>kn||L===kn&&(On[0]||On[1]))&&(_e+=Rt^br>=0?1:-1)}}return(ee<-_||ee<_&&Kv<-_)^_e&1}var n_=jl(),W_,Zg,Wg,r_={sphere:ea,point:ea,lineStart:d0,lineEnd:ea,polygonStart:ea,polygonEnd:ea};function d0(){r_.point=H_,r_.lineEnd=Ch}function Ch(){r_.point=r_.lineEnd=ea}function H_(p,g){p*=Wn,g*=Wn,W_=p,Zg=Rr(g),Wg=bi(g),r_.point=i_}function i_(p,g){p*=Wn,g*=Wn;var x=Rr(g),L=bi(g),V=yr(p-W_),ee=bi(V),_e=Rr(V),Ce=L*_e,Be=Wg*x-Zg*L*ee,De=Zg*x+Wg*L*ee;n_.add(Hi(ii(Ce*Ce+Be*Be),De)),W_=p,Zg=x,Wg=L}function Xv(p){return n_.reset(),Og(p,r_),+n_}var o_=[null,null],H1={type:"LineString",coordinates:o_};function K_(p,g){return o_[0]=p,o_[1]=g,Xv(H1)}var Jv={Feature:function(p,g){return Y_(p.geometry,g)},FeatureCollection:function(p,g){for(var x=p.features,L=-1,V=x.length;++L<V;)if(Y_(x[L].geometry,g))return!0;return!1}},h0={Sphere:function(){return!0},Point:function(p,g){return Qv(p.coordinates,g)},MultiPoint:function(p,g){for(var x=p.coordinates,L=-1,V=x.length;++L<V;)if(Qv(x[L],g))return!0;return!1},LineString:function(p,g){return Hg(p.coordinates,g)},MultiLineString:function(p,g){for(var x=p.coordinates,L=-1,V=x.length;++L<V;)if(Hg(x[L],g))return!0;return!1},Polygon:function(p,g){return qv(p.coordinates,g)},MultiPolygon:function(p,g){for(var x=p.coordinates,L=-1,V=x.length;++L<V;)if(qv(x[L],g))return!0;return!1},GeometryCollection:function(p,g){for(var x=p.geometries,L=-1,V=x.length;++L<V;)if(Y_(x[L],g))return!0;return!1}};function Y_(p,g){return p&&h0.hasOwnProperty(p.type)?h0[p.type](p,g):!1}function Qv(p,g){return K_(p,g)===0}function Hg(p,g){var x=K_(p[0],p[1]),L=K_(p[0],g),V=K_(g,p[1]);return L+V<=x+_}function qv(p,g){return!!Yv(p.map(K1),ey(g))}function K1(p){return p=p.map(ey),p.pop(),p}function ey(p){return[p[0]*Wn,p[1]*Wn]}function jp(p,g){return(p&&Jv.hasOwnProperty(p.type)?Jv[p.type]:Y_)(p,g)}function ty(p,g,x){var L=range(p,g-epsilon,x).concat(g);return function(V){return L.map(function(ee){return[V,ee]})}}function ny(p,g,x){var L=range(p,g-epsilon,x).concat(g);return function(V){return L.map(function(ee){return[ee,V]})}}function f0(){var p,g,x,L,V,ee,_e,Ce,Be=10,De=Be,$e=90,dt=360,Ke,pt,$t,Pt,an=2.5;function An(){return{type:"MultiLineString",coordinates:un()}}function un(){return range(ceil(L/$e)*$e,x,$e).map($t).concat(range(ceil(Ce/dt)*dt,_e,dt).map(Pt)).concat(range(ceil(g/Be)*Be,p,Be).filter(function(yn){return abs(yn%$e)>epsilon}).map(Ke)).concat(range(ceil(ee/De)*De,V,De).filter(function(yn){return abs(yn%dt)>epsilon}).map(pt))}return An.lines=function(){return un().map(function(yn){return{type:"LineString",coordinates:yn}})},An.outline=function(){return{type:"Polygon",coordinates:[$t(L).concat(Pt(_e).slice(1),$t(x).reverse().slice(1),Pt(Ce).reverse().slice(1))]}},An.extent=function(yn){return arguments.length?An.extentMajor(yn).extentMinor(yn):An.extentMinor()},An.extentMajor=function(yn){return arguments.length?(L=+yn[0][0],x=+yn[1][0],Ce=+yn[0][1],_e=+yn[1][1],L>x&&(yn=L,L=x,x=yn),Ce>_e&&(yn=Ce,Ce=_e,_e=yn),An.precision(an)):[[L,Ce],[x,_e]]},An.extentMinor=function(yn){return arguments.length?(g=+yn[0][0],p=+yn[1][0],ee=+yn[0][1],V=+yn[1][1],g>p&&(yn=g,g=p,p=yn),ee>V&&(yn=ee,ee=V,V=yn),An.precision(an)):[[g,ee],[p,V]]},An.step=function(yn){return arguments.length?An.stepMajor(yn).stepMinor(yn):An.stepMinor()},An.stepMajor=function(yn){return arguments.length?($e=+yn[0],dt=+yn[1],An):[$e,dt]},An.stepMinor=function(yn){return arguments.length?(Be=+yn[0],De=+yn[1],An):[Be,De]},An.precision=function(yn){return arguments.length?(an=+yn,Ke=ty(ee,V,90),pt=ny(g,p,an),$t=ty(Ce,_e,90),Pt=ny(L,x,an),An):an},An.extentMajor([[-180,-90+epsilon],[180,90-epsilon]]).extentMinor([[-180,-80-epsilon],[180,80+epsilon]])}function Y1(){return f0()()}function Yx(p,g){var x=p[0]*radians,L=p[1]*radians,V=g[0]*radians,ee=g[1]*radians,_e=cos(L),Ce=sin(L),Be=cos(ee),De=sin(ee),$e=_e*cos(x),dt=_e*sin(x),Ke=Be*cos(V),pt=Be*sin(V),$t=2*asin(sqrt(haversin(ee-L)+_e*Be*haversin(V-x))),Pt=sin($t),an=$t?function(An){var un=sin(An*=$t)/Pt,yn=sin($t-An)/Pt,pr=yn*$e+un*Ke,ur=yn*dt+un*pt,br=yn*Ce+un*De;return[atan2(ur,pr)*degrees,atan2(br,sqrt(pr*pr+ur*ur))*degrees]}:function(){return[x*degrees,L*degrees]};return an.distance=$t,an}var ry=jl(),Kg=jl(),iy,oy,ym,xm,Up={point:ea,lineStart:ea,lineEnd:ea,polygonStart:function(){Up.lineStart=X_,Up.lineEnd=Tf},polygonEnd:function(){Up.lineStart=Up.lineEnd=Up.point=ea,ry.add(yr(Kg)),Kg.reset()},result:function(){var p=ry/2;return ry.reset(),p}};function X_(){Up.point=p0}function p0(p,g){Up.point=ay,iy=ym=p,oy=xm=g}function ay(p,g){Kg.add(xm*p-ym*g),ym=p,xm=g}function Tf(){ay(iy,oy)}var m0=null,If=1/0,Mf=If,a_=-If,J_=a_,Yg={point:_0,lineStart:ea,lineEnd:ea,polygonStart:ea,polygonEnd:ea,result:function(){var p=[[If,Mf],[a_,J_]];return a_=J_=-(Mf=If=1/0),p}};function _0(p,g){p<If&&(If=p),p>a_&&(a_=p),g<Mf&&(Mf=g),g>J_&&(J_=g)}var Q_=Yg,s_=0,sy=0,q_=0,Xg=0,gp=0,Vp=0,ly=0,Jg=0,bm=0,g0,l_,Id,Cf,Af={point:Wf,lineStart:Qg,lineEnd:u_,polygonStart:function(){Af.lineStart=y0,Af.lineEnd=J1},polygonEnd:function(){Af.point=Wf,Af.lineStart=Qg,Af.lineEnd=u_},result:function(){var p=bm?[ly/bm,Jg/bm]:Vp?[Xg/Vp,gp/Vp]:q_?[s_/q_,sy/q_]:[NaN,NaN];return s_=sy=q_=Xg=gp=Vp=ly=Jg=bm=0,p}};function Wf(p,g){s_+=p,sy+=g,++q_}function Qg(){Af.point=X1}function X1(p,g){Af.point=v0,Wf(Id=p,Cf=g)}function v0(p,g){var x=p-Id,L=g-Cf,V=ii(x*x+L*L);Xg+=V*(Id+p)/2,gp+=V*(Cf+g)/2,Vp+=V,Wf(Id=p,Cf=g)}function u_(){Af.point=Wf}function y0(){Af.point=Gp}function J1(){x0(g0,l_)}function Gp(p,g){Af.point=x0,Wf(g0=Id=p,l_=Cf=g)}function x0(p,g){var x=p-Id,L=g-Cf,V=ii(x*x+L*L);Xg+=V*(Id+p)/2,gp+=V*(Cf+g)/2,Vp+=V,V=Cf*p-Id*g,ly+=V*(Id+p),Jg+=V*(Cf+g),bm+=V*3,Wf(Id=p,Cf=g)}var qg=null;function eg(p){this._context=p}eg.prototype={_radius:4.5,pointRadius:function(p){return this._radius=p,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(p,g){switch(this._point){case 0:{this._context.moveTo(p,g),this._point=1;break}case 1:{this._context.lineTo(p,g);break}default:{this._context.moveTo(p+this._radius,g),this._context.arc(p,g,this._radius,0,Ze);break}}},result:ea};var wm=jl(),Em,tg,b0,ng,Hf,c_={point:ea,lineStart:function(){c_.point=Q1},lineEnd:function(){Em&&uy(tg,b0),c_.point=ea},polygonStart:function(){Em=!0},polygonEnd:function(){Em=null},result:function(){var p=+wm;return wm.reset(),p}};function Q1(p,g){c_.point=uy,tg=ng=p,b0=Hf=g}function uy(p,g){ng-=p,Hf-=g,wm.add(ii(ng*ng+Hf*Hf)),ng=p,Hf=g}var q1=null;function ex(){this._string=[]}ex.prototype={_radius:4.5,_circle:cy(4.5),pointRadius:function(p){return(p=+p)!==this._radius&&(this._radius=p,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(p,g){switch(this._point){case 0:{this._string.push("M",p,",",g),this._point=1;break}case 1:{this._string.push("L",p,",",g);break}default:{this._circle==null&&(this._circle=cy(this._radius)),this._string.push("M",p,",",g,this._circle);break}}},result:function(){if(this._string.length){var p=this._string.join("");return this._string=[],p}else return null}};function cy(p){return"m0,"+p+"a"+p+","+p+" 0 1,1 0,"+-2*p+"a"+p+","+p+" 0 1,1 0,"+2*p+"z"}function Xx(p,g){var x=4.5,L,V;function ee(_e){return _e&&(typeof x=="function"&&V.pointRadius(+x.apply(this,arguments)),stream(_e,L(V))),V.result()}return ee.area=function(_e){return stream(_e,L(pathArea)),pathArea.result()},ee.measure=function(_e){return stream(_e,L(pathMeasure)),pathMeasure.result()},ee.bounds=function(_e){return stream(_e,L(pathBounds)),pathBounds.result()},ee.centroid=function(_e){return stream(_e,L(pathCentroid)),pathCentroid.result()},ee.projection=function(_e){return arguments.length?(L=_e==null?(p=null,identity):(p=_e).stream,ee):p},ee.context=function(_e){return arguments.length?(V=_e==null?(g=null,new PathString):new PathContext(g=_e),typeof x!="function"&&V.pointRadius(x),ee):g},ee.pointRadius=function(_e){return arguments.length?(x=typeof _e=="function"?_e:(V.pointRadius(+_e),+_e),ee):x},ee.projection(p).context(g)}function dy(p,g,x,L){return function(V,ee){var _e=g(ee),Ce=V.invert(L[0],L[1]),Be=Vg(),De=g(Be),$e=!1,dt,Ke,pt,$t={point:Pt,lineStart:An,lineEnd:un,polygonStart:function(){$t.point=yn,$t.lineStart=pr,$t.lineEnd=ur,Ke=[],dt=[]},polygonEnd:function(){$t.point=Pt,$t.lineStart=An,$t.lineEnd=un,Ke=u0(Ke);var br=Yv(dt,Ce);Ke.length?($e||(ee.polygonStart(),$e=!0),Wv(Ke,w0,br,x,ee)):br&&($e||(ee.polygonStart(),$e=!0),ee.lineStart(),x(null,null,1,ee),ee.lineEnd()),$e&&(ee.polygonEnd(),$e=!1),Ke=dt=null},sphere:function(){ee.polygonStart(),ee.lineStart(),x(null,null,1,ee),ee.lineEnd(),ee.polygonEnd()}};function Pt(br,sr){var ht=V(br,sr);p(br=ht[0],sr=ht[1])&&ee.point(br,sr)}function an(br,sr){var ht=V(br,sr);_e.point(ht[0],ht[1])}function An(){$t.point=an,_e.lineStart()}function un(){$t.point=Pt,_e.lineEnd()}function yn(br,sr){pt.push([br,sr]);var ht=V(br,sr);De.point(ht[0],ht[1])}function pr(){De.lineStart(),pt=[]}function ur(){yn(pt[0][0],pt[0][1]),De.lineEnd();var br=De.clean(),sr=Be.result(),ht,Rt=sr.length,Jt,On,bn;if(pt.pop(),dt.push(pt),pt=null,!!Rt){if(br&1){if(On=sr[0],(Jt=On.length-1)>0){for($e||(ee.polygonStart(),$e=!0),ee.lineStart(),ht=0;ht<Jt;++ht)ee.point((bn=On[ht])[0],bn[1]);ee.lineEnd()}return}Rt>1&&br&2&&sr.push(sr.pop().concat(sr.shift())),Ke.push(sr.filter(tx))}}return $t}}function tx(p){return p.length>1}function w0(p,g){return((p=p.x)[0]<0?p[1]-ie-_:ie-p[1])-((g=g.x)[0]<0?g[1]-ie-_:ie-g[1])}var E0=dy(function(){return!0},nx,tv,[-F,-ie]);function nx(p){var g=NaN,x=NaN,L=NaN,V;return{lineStart:function(){p.lineStart(),V=1},point:function(ee,_e){var Ce=ee>0?F:-F,Be=yr(ee-g);yr(Be-F)<_?(p.point(g,x=(x+_e)/2>0?ie:-ie),p.point(L,x),p.lineEnd(),p.lineStart(),p.point(Ce,x),p.point(ee,x),V=0):L!==Ce&&Be>=F&&(yr(g-L)<_&&(g-=L*_),yr(ee-Ce)<_&&(ee-=Ce*_),x=ev(g,x,ee,_e),p.point(L,x),p.lineEnd(),p.lineStart(),p.point(Ce,x),V=0),p.point(g=ee,x=_e),L=Ce},lineEnd:function(){p.lineEnd(),g=x=NaN},clean:function(){return 2-V}}}function ev(p,g,x,L){var V,ee,_e=Rr(p-x);return yr(_e)>_?hi((Rr(g)*(ee=bi(L))*Rr(x)-Rr(L)*(V=bi(g))*Rr(p))/(V*ee*_e)):(g+L)/2}function tv(p,g,x,L){var V;if(p==null)V=x*ie,L.point(-F,V),L.point(0,V),L.point(F,V),L.point(F,0),L.point(F,-V),L.point(0,-V),L.point(-F,-V),L.point(-F,0),L.point(-F,V);else if(yr(p[0]-g[0])>_){var ee=p[0]<g[0]?F:-F;V=x*ee/2,L.point(-ee,V),L.point(0,V),L.point(ee,V)}else L.point(g[0],g[1])}function nv(p,g){var x=bi(p),L=x>0,V=yr(x)>_;function ee($e,dt,Ke,pt){$v(pt,p,g,Ke,$e,dt)}function _e($e,dt){return bi($e)*bi(dt)>x}function Ce($e){var dt,Ke,pt,$t,Pt;return{lineStart:function(){$t=pt=!1,Pt=1},point:function(an,An){var un=[an,An],yn,pr=_e(an,An),ur=L?pr?0:De(an,An):pr?De(an+(an<0?F:-F),An):0;if(!dt&&($t=pt=pr)&&$e.lineStart(),pr!==pt&&(yn=Be(dt,un),(!yn||Gg(dt,yn)||Gg(un,yn))&&(un[0]+=_,un[1]+=_,pr=_e(un[0],un[1]))),pr!==pt)Pt=0,pr?($e.lineStart(),yn=Be(un,dt),$e.point(yn[0],yn[1])):(yn=Be(dt,un),$e.point(yn[0],yn[1]),$e.lineEnd()),dt=yn;else if(V&&dt&&L^pr){var br;!(ur&Ke)&&(br=Be(un,dt,!0))&&(Pt=0,L?($e.lineStart(),$e.point(br[0][0],br[0][1]),$e.point(br[1][0],br[1][1]),$e.lineEnd()):($e.point(br[1][0],br[1][1]),$e.lineEnd(),$e.lineStart(),$e.point(br[0][0],br[0][1])))}pr&&(!dt||!Gg(dt,un))&&$e.point(un[0],un[1]),dt=un,pt=pr,Ke=ur},lineEnd:function(){pt&&$e.lineEnd(),dt=null},clean:function(){return Pt|($t&&pt)<<1}}}function Be($e,dt,Ke){var pt=Vf($e),$t=Vf(dt),Pt=[1,0,0],an=zp(pt,$t),An=R_(an,an),un=an[0],yn=An-un*un;if(!yn)return!Ke&&$e;var pr=x*An/yn,ur=-x*un/yn,br=zp(Pt,an),sr=D_(Pt,pr),ht=D_(an,ur);L_(sr,ht);var Rt=br,Jt=R_(sr,Rt),On=R_(Rt,Rt),bn=Jt*Jt-On*(R_(sr,sr)-1);if(!(bn<0)){var kn=ii(bn),wt=D_(Rt,(-Jt-kn)/On);if(L_(wt,sr),wt=O_(wt),!Ke)return wt;var Vt=$e[0],tn=dt[0],Dn=$e[1],Wt=dt[1],ln;tn<Vt&&(ln=Vt,Vt=tn,tn=ln);var wn=tn-Vt,xr=yr(wn-F)<_,jr=xr||wn<_;if(!xr&&Wt<Dn&&(ln=Dn,Dn=Wt,Wt=ln),jr?xr?Dn+Wt>0^wt[1]<(yr(wt[0]-Vt)<_?Dn:Wt):Dn<=wt[1]&&wt[1]<=Wt:wn>F^(Vt<=wt[0]&&wt[0]<=tn)){var Ar=D_(Rt,(-Jt+kn)/On);return L_(Ar,sr),[wt,O_(Ar)]}}}function De($e,dt){var Ke=L?p:F-p,pt=0;return $e<-Ke?pt|=1:$e>Ke&&(pt|=2),dt<-Ke?pt|=4:dt>Ke&&(pt|=8),pt}return dy(_e,Ce,ee,L?[0,-p]:[-F,p-F])}function rg(p){return p}function Jx(p){return{stream:ig(p)}}function ig(p){return function(g){var x=new og;for(var L in p)x[L]=p[L];return x.stream=g,x}}function og(){}og.prototype={constructor:og,point:function(p,g){this.stream.point(p,g)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ag(p,g,x){var L=g[1][0]-g[0][0],V=g[1][1]-g[0][1],ee=p.clipExtent&&p.clipExtent();p.scale(150).translate([0,0]),ee!=null&&p.clipExtent(null),Og(x,p.stream(Q_));var _e=Q_.result(),Ce=Math.min(L/(_e[1][0]-_e[0][0]),V/(_e[1][1]-_e[0][1])),Be=+g[0][0]+(L-Ce*(_e[1][0]+_e[0][0]))/2,De=+g[0][1]+(V-Ce*(_e[1][1]+_e[0][1]))/2;return ee!=null&&p.clipExtent(ee),p.scale(Ce*150).translate([Be,De])}function S0(p,g,x){return ag(p,[[0,0],g],x)}var hy=16,fy=bi(30*Wn);function py(p,g){return+g?rv(p,g):my(p)}function my(p){return ig({point:function(g,x){g=p(g,x),this.stream.point(g[0],g[1])}})}function rv(p,g){function x(L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t,Pt,an){var An=De-L,un=$e-V,yn=An*An+un*un;if(yn>4*g&&Pt--){var pr=_e+Ke,ur=Ce+pt,br=Be+$t,sr=ii(pr*pr+ur*ur+br*br),ht=wa(br/=sr),Rt=yr(yr(br)-1)<_||yr(ee-dt)<_?(ee+dt)/2:Hi(ur,pr),Jt=p(Rt,ht),On=Jt[0],bn=Jt[1],kn=On-L,wt=bn-V,Vt=un*kn-An*wt;(Vt*Vt/yn>g||yr((An*kn+un*wt)/yn-.5)>.3||_e*Ke+Ce*pt+Be*$t<fy)&&(x(L,V,ee,_e,Ce,Be,On,bn,Rt,pr/=sr,ur/=sr,br,Pt,an),an.point(On,bn),x(On,bn,Rt,pr,ur,br,De,$e,dt,Ke,pt,$t,Pt,an))}}return function(L){var V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t,Pt,an={point:An,lineStart:un,lineEnd:pr,polygonStart:function(){L.polygonStart(),an.lineStart=ur},polygonEnd:function(){L.polygonEnd(),an.lineStart=un}};function An(ht,Rt){ht=p(ht,Rt),L.point(ht[0],ht[1])}function un(){dt=NaN,an.point=yn,L.lineStart()}function yn(ht,Rt){var Jt=Vf([ht,Rt]),On=p(ht,Rt);x(dt,Ke,$e,pt,$t,Pt,dt=On[0],Ke=On[1],$e=ht,pt=Jt[0],$t=Jt[1],Pt=Jt[2],hy,L),L.point(dt,Ke)}function pr(){an.point=An,L.lineEnd()}function ur(){un(),an.point=br,an.lineEnd=sr}function br(ht,Rt){yn(V=ht,Rt),ee=dt,_e=Ke,Ce=pt,Be=$t,De=Pt,an.point=yn}function sr(){x(dt,Ke,$e,pt,$t,Pt,ee,_e,V,Ce,Be,De,hy,L),an.lineEnd=pr,pr()}return an}}var T0=ig({point:function(p,g){this.stream.point(p*Wn,g*Wn)}});function I0(p){return M0(function(){return p})()}function M0(p){var g,x=150,L=480,V=250,ee,_e,Ce=0,Be=0,De=0,$e=0,dt=0,Ke,pt,$t=null,Pt=E0,an=null,An,un,yn,pr=rg,ur=.5,br=py(On,ur),sr,ht;function Rt(wt){return wt=pt(wt[0]*Wn,wt[1]*Wn),[wt[0]*x+ee,_e-wt[1]*x]}function Jt(wt){return wt=pt.invert((wt[0]-ee)/x,(_e-wt[1])/x),wt&&[wt[0]*Xt,wt[1]*Xt]}function On(wt,Vt){return wt=g(wt,Vt),[wt[0]*x+ee,_e-wt[1]*x]}Rt.stream=function(wt){return sr&&ht===wt?sr:sr=T0(Pt(Ke,br(pr(ht=wt))))},Rt.clipAngle=function(wt){return arguments.length?(Pt=+wt?nv($t=wt*Wn,6*Wn):($t=null,E0),kn()):$t*Xt},Rt.clipExtent=function(wt){return arguments.length?(pr=wt==null?(an=An=un=yn=null,rg):Hv(an=+wt[0][0],An=+wt[0][1],un=+wt[1][0],yn=+wt[1][1]),kn()):an==null?null:[[an,An],[un,yn]]},Rt.scale=function(wt){return arguments.length?(x=+wt,bn()):x},Rt.translate=function(wt){return arguments.length?(L=+wt[0],V=+wt[1],bn()):[L,V]},Rt.center=function(wt){return arguments.length?(Ce=wt[0]%360*Wn,Be=wt[1]%360*Wn,bn()):[Ce*Xt,Be*Xt]},Rt.rotate=function(wt){return arguments.length?(De=wt[0]%360*Wn,$e=wt[1]%360*Wn,dt=wt.length>2?wt[2]%360*Wn:0,bn()):[De*Xt,$e*Xt,dt*Xt]},Rt.precision=function(wt){return arguments.length?(br=py(On,ur=wt*wt),kn()):ii(ur)},Rt.fitExtent=function(wt,Vt){return ag(Rt,wt,Vt)},Rt.fitSize=function(wt,Vt){return S0(Rt,wt,Vt)};function bn(){pt=Ug(Ke=jv(De,$e,dt),g);var wt=g(Ce,Be);return ee=L-wt[0]*x,_e=V+wt[1]*x,kn()}function kn(){return sr=ht=null,Rt}return function(){return g=p.apply(this,arguments),Rt.invert=g.invert&&Jt,bn()}}function rx(p){var g=0,x=pi/3,L=projectionMutator(p),V=L(g,x);return V.parallels=function(ee){return arguments.length?L(g=ee[0]*radians,x=ee[1]*radians):[g*degrees,x*degrees]},V}function C0(p){var g=cos(p);function x(L,V){return[L*g,sin(V)/g]}return x.invert=function(L,V){return[L/g,asin(V*g)]},x}function _y(p,g){var x=sin(p),L=(x+sin(g))/2;if(abs(L)<epsilon)return cylindricalEqualAreaRaw(p);var V=1+x*(2*L-x),ee=sqrt(V)/L;function _e(Ce,Be){var De=sqrt(V-2*L*sin(Be))/L;return[De*sin(Ce*=L),ee-De*cos(Ce)]}return _e.invert=function(Ce,Be){var De=ee-Be;return[atan2(Ce,abs(De))/L*sign(De),asin((V-(Ce*Ce+De*De)*L*L)/(2*L))]},_e}function A0(){return conicProjection(_y).scale(155.424).center([0,33.6442])}function P0(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function iv(p){var g=p.length;return{point:function(x,L){for(var V=-1;++V<g;)p[V].point(x,L)},sphere:function(){for(var x=-1;++x<g;)p[x].sphere()},lineStart:function(){for(var x=-1;++x<g;)p[x].lineStart()},lineEnd:function(){for(var x=-1;++x<g;)p[x].lineEnd()},polygonStart:function(){for(var x=-1;++x<g;)p[x].polygonStart()},polygonEnd:function(){for(var x=-1;++x<g;)p[x].polygonEnd()}}}function gy(){var p,g,x=albers(),L,V=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ee,_e=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ce,Be,De={point:function(Ke,pt){Be=[Ke,pt]}};function $e(Ke){var pt=Ke[0],$t=Ke[1];return Be=null,L.point(pt,$t),Be||(ee.point(pt,$t),Be)||(Ce.point(pt,$t),Be)}$e.invert=function(Ke){var pt=x.scale(),$t=x.translate(),Pt=(Ke[0]-$t[0])/pt,an=(Ke[1]-$t[1])/pt;return(an>=.12&&an<.234&&Pt>=-.425&&Pt<-.214?V:an>=.166&&an<.234&&Pt>=-.214&&Pt<-.115?_e:x).invert(Ke)},$e.stream=function(Ke){return p&&g===Ke?p:p=iv([x.stream(g=Ke),V.stream(Ke),_e.stream(Ke)])},$e.precision=function(Ke){return arguments.length?(x.precision(Ke),V.precision(Ke),_e.precision(Ke),dt()):x.precision()},$e.scale=function(Ke){return arguments.length?(x.scale(Ke),V.scale(Ke*.35),_e.scale(Ke),$e.translate(x.translate())):x.scale()},$e.translate=function(Ke){if(!arguments.length)return x.translate();var pt=x.scale(),$t=+Ke[0],Pt=+Ke[1];return L=x.translate(Ke).clipExtent([[$t-.455*pt,Pt-.238*pt],[$t+.455*pt,Pt+.238*pt]]).stream(De),ee=V.translate([$t-.307*pt,Pt+.201*pt]).clipExtent([[$t-.425*pt+epsilon,Pt+.12*pt+epsilon],[$t-.214*pt-epsilon,Pt+.234*pt-epsilon]]).stream(De),Ce=_e.translate([$t-.205*pt,Pt+.212*pt]).clipExtent([[$t-.214*pt+epsilon,Pt+.166*pt+epsilon],[$t-.115*pt-epsilon,Pt+.234*pt-epsilon]]).stream(De),dt()},$e.fitExtent=function(Ke,pt){return fitExtent($e,Ke,pt)},$e.fitSize=function(Ke,pt){return fitSize($e,Ke,pt)};function dt(){return p=g=null,$e}return $e.scale(1070)}function vy(p){return function(g,x){var L=bi(g),V=bi(x),ee=p(L*V);return[ee*V*Rr(g),ee*Rr(x)]}}function $p(p){return function(g,x){var L=ii(g*g+x*x),V=p(L),ee=Rr(V),_e=bi(V);return[Hi(g*ee,L*_e),wa(L&&x*ee/L)]}}var yy=vy(function(p){return ii(2/(1+p))});yy.invert=$p(function(p){return 2*wa(p/2)});function Qx(){return projection(yy).scale(124.75).clipAngle(179.999)}var xy=vy(function(p){return(p=ya(p))&&p/Rr(p)});xy.invert=$p(function(p){return p});function O0(){return I0(xy).scale(79.4188).clipAngle(179.999)}function ov(p,g){return[p,ha(Eo((ie+g)/2))]}ov.invert=function(p,g){return[p,2*hi(Ko(g))-ie]};function ix(){return R0(ov).scale(961/tau)}function R0(p){var g=projection(p),x=g.center,L=g.scale,V=g.translate,ee=g.clipExtent,_e=null,Ce,Be,De;g.scale=function(dt){return arguments.length?(L(dt),$e()):L()},g.translate=function(dt){return arguments.length?(V(dt),$e()):V()},g.center=function(dt){return arguments.length?(x(dt),$e()):x()},g.clipExtent=function(dt){return arguments.length?(dt==null?_e=Ce=Be=De=null:(_e=+dt[0][0],Ce=+dt[0][1],Be=+dt[1][0],De=+dt[1][1]),$e()):_e==null?null:[[_e,Ce],[Be,De]]};function $e(){var dt=pi*L(),Ke=g(rotation(g.rotate()).invert([0,0]));return ee(_e==null?[[Ke[0]-dt,Ke[1]-dt],[Ke[0]+dt,Ke[1]+dt]]:p===ov?[[Math.max(Ke[0]-dt,_e),Ce],[Math.min(Ke[0]+dt,Be),De]]:[[_e,Math.max(Ke[1]-dt,Ce)],[Be,Math.min(Ke[1]+dt,De)]])}return $e()}function sg(p){return tan((halfPi+p)/2)}function L0(p,g){var x=cos(p),L=p===g?sin(p):log(x/cos(g))/log(sg(g)/sg(p)),V=x*pow(sg(p),L)/L;if(!L)return mercatorRaw;function ee(_e,Ce){V>0?Ce<-halfPi+epsilon&&(Ce=-halfPi+epsilon):Ce>halfPi-epsilon&&(Ce=halfPi-epsilon);var Be=V/pow(sg(Ce),L);return[Be*sin(L*_e),V-Be*cos(L*_e)]}return ee.invert=function(_e,Ce){var Be=V-Ce,De=sign(L)*sqrt(_e*_e+Be*Be);return[atan2(_e,abs(Be))/L*sign(Be),2*atan(pow(V/De,1/L))-halfPi]},ee}function qx(){return conicProjection(L0).scale(109.5).parallels([30,30])}function lg(p,g){return[p,g]}lg.invert=lg;function ox(){return projection(lg).scale(152.63)}function D0(p,g){var x=cos(p),L=p===g?sin(p):(x-cos(g))/(g-p),V=x/L+p;if(abs(L)<epsilon)return equirectangularRaw;function ee(_e,Ce){var Be=V-Ce,De=L*_e;return[Be*sin(De),V-Be*cos(De)]}return ee.invert=function(_e,Ce){var Be=V-Ce;return[atan2(_e,abs(Be))/L*sign(Be),V-sign(L)*sqrt(_e*_e+Be*Be)]},ee}function by(){return conicProjection(D0).scale(131.154).center([0,13.9389])}function vp(p,g){var x=bi(g),L=bi(p)*x;return[x*Rr(p)/L,Rr(g)/L]}vp.invert=$p(hi);function k0(){return projection(vp).scale(144.049).clipAngle(60)}function ug(p,g,x,L){return p===1&&g===1&&x===0&&L===0?identity:transformer({point:function(V,ee){this.stream.point(V*p+x,ee*g+L)}})}function ax(){var p=1,g=0,x=0,L=1,V=1,ee=identity,_e=null,Ce,Be,De,$e=identity,dt,Ke,pt;function $t(){return dt=Ke=null,pt}return pt={stream:function(Pt){return dt&&Ke===Pt?dt:dt=ee($e(Ke=Pt))},clipExtent:function(Pt){return arguments.length?($e=Pt==null?(_e=Ce=Be=De=null,identity):clipExtent(_e=+Pt[0][0],Ce=+Pt[0][1],Be=+Pt[1][0],De=+Pt[1][1]),$t()):_e==null?null:[[_e,Ce],[Be,De]]},scale:function(Pt){return arguments.length?(ee=ug((p=+Pt)*L,p*V,g,x),$t()):p},translate:function(Pt){return arguments.length?(ee=ug(p*L,p*V,g=+Pt[0],x=+Pt[1]),$t()):[g,x]},reflectX:function(Pt){return arguments.length?(ee=ug(p*(L=Pt?-1:1),p*V,g,x),$t()):L<0},reflectY:function(Pt){return arguments.length?(ee=ug(p*L,p*(V=Pt?-1:1),g,x),$t()):V<0},fitExtent:function(Pt,an){return fitExtent(pt,Pt,an)},fitSize:function(Pt,an){return fitSize(pt,Pt,an)}}}function cg(p,g){var x=g*g,L=x*x;return[p*(.8707-.131979*x+L*(-.013791+L*(.003971*x-.001529*L))),g*(1.007226+x*(.015085+L*(-.044475+.028874*x-.005916*L)))]}cg.invert=function(p,g){var x=g,L=25,V;do{var ee=x*x,_e=ee*ee;x-=V=(x*(1.007226+ee*(.015085+_e*(-.044475+.028874*ee-.005916*_e)))-g)/(1.007226+ee*(.045255+_e*(-.311325+.259866*ee-.06507600000000001*_e)))}while(yr(V)>_&&--L>0);return[p/(.8707+(ee=x*x)*(-.131979+ee*(-.013791+ee*ee*ee*(.003971-.001529*ee)))),x]};function N0(){return projection(cg).scale(175.295)}function wy(p,g){return[bi(g)*Rr(p),Rr(g)]}wy.invert=$p(wa);function eb(){return projection(wy).scale(249.5).clipAngle(90+epsilon)}function z0(p,g){var x=bi(g),L=1+bi(p)*x;return[x*Rr(p)/L,Rr(g)/L]}z0.invert=$p(function(p){return 2*hi(p)});function tb(){return projection(z0).scale(250).clipAngle(142)}function F0(p,g){return[ha(Eo((ie+g)/2)),-p]}F0.invert=function(p,g){return[-g,2*hi(Ko(p))-ie]};function nb(){var p=mercatorProjection(F0),g=p.center,x=p.rotate;return p.center=function(L){return arguments.length?g([-L[1],L[0]]):(L=g(),[L[1],-L[0]])},p.rotate=function(L){return arguments.length?x([L[0],L[1],L.length>2?L[2]+90:90]):(L=x(),[L[0],L[1],L[2]-90])},x([0,0,90]).scale(159.155)}var{BufferOp:sx,GeoJSONReader:lx,GeoJSONWriter:B0}=Wm;function av(p,g,x){x=x||{};var L=x.units||"kilometers",V=x.steps||8;if(!p)throw new Error("geojson is required");if(typeof x!="object")throw new Error("options must be an object");if(typeof V!="number")throw new Error("steps must be an number");if(g===void 0)throw new Error("radius is required");if(V<=0)throw new Error("steps must be greater than 0");var ee=[];switch(p.type){case"GeometryCollection":return xl(p,function(_e){var Ce=dg(_e,g,L,V);Ce&&ee.push(Ce)}),nn(ee);case"FeatureCollection":return Ia(p,function(_e){var Ce=dg(_e,g,L,V);Ce&&Ia(Ce,function(Be){Be&&ee.push(Be)})}),nn(ee)}return dg(p,g,L,V)}function dg(p,g,x,L){var V=p.properties||{},ee=p.type==="Feature"?p.geometry:p;if(ee.type==="GeometryCollection"){var _e=[];return xl(p,function(Pt){var an=dg(Pt,g,x,L);an&&_e.push(an)}),nn(_e)}var Ce=j0(ee),Be={type:ee.type,coordinates:Sy(ee.coordinates,Ce)},De=new lx,$e=De.read(Be),dt=kr(Yn(g,x),"meters"),Ke=sx.bufferOp($e,dt,L),pt=new B0;if(Ke=pt.write(Ke),!Ey(Ke.coordinates)){var $t={type:Ke.type,coordinates:sv(Ke.coordinates,Ce)};return rt($t,V)}}function Ey(p){return Array.isArray(p[0])?Ey(p[0]):isNaN(p[0])}function Sy(p,g){return typeof p[0]!="object"?g(p):p.map(function(x){return Sy(x,g)})}function sv(p,g){return typeof p[0]!="object"?g.invert(p):p.map(function(x){return sv(x,g)})}function j0(p){var g=M_(p).geometry.coordinates,x=[-g[0],-g[1]];return O0().rotate(x).scale(Te)}var ux=null,Sm=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Zp=Math.ceil,Ah=Math.floor,dd="[BigNumber Error] ",U0=dd+"Number primitive has more than 15 significant digits: ",Ph=1e14,ys=14,hg=9007199254740991,Wp=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Kf=1e7,rc=1e9;function Ty(p){var g,x,L,V=un.prototype={constructor:un,toString:null,valueOf:null},ee=new un(1),_e=20,Ce=4,Be=-7,De=21,$e=-1e7,dt=1e7,Ke=!1,pt=1,$t=0,Pt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},an="0123456789abcdefghijklmnopqrstuvwxyz",An=!0;function un(ht,Rt){var Jt,On,bn,kn,wt,Vt,tn,Dn,Wt=this;if(!(Wt instanceof un))return new un(ht,Rt);if(Rt==null){if(ht&&ht._isBigNumber===!0){Wt.s=ht.s,!ht.c||ht.e>dt?Wt.c=Wt.e=null:ht.e<$e?Wt.c=[Wt.e=0]:(Wt.e=ht.e,Wt.c=ht.c.slice());return}if((Vt=typeof ht=="number")&&ht*0==0){if(Wt.s=1/ht<0?(ht=-ht,-1):1,ht===~~ht){for(kn=0,wt=ht;wt>=10;wt/=10,kn++);kn>dt?Wt.c=Wt.e=null:(Wt.e=kn,Wt.c=[ht]);return}Dn=String(ht)}else{if(!Sm.test(Dn=String(ht)))return L(Wt,Dn,Vt);Wt.s=Dn.charCodeAt(0)==45?(Dn=Dn.slice(1),-1):1}(kn=Dn.indexOf("."))>-1&&(Dn=Dn.replace(".","")),(wt=Dn.search(/e/i))>0?(kn<0&&(kn=wt),kn+=+Dn.slice(wt+1),Dn=Dn.substring(0,wt)):kn<0&&(kn=Dn.length)}else{if(Lu(Rt,2,an.length,"Base"),Rt==10&&An)return Wt=new un(ht),br(Wt,_e+Wt.e+1,Ce);if(Dn=String(ht),Vt=typeof ht=="number"){if(ht*0!=0)return L(Wt,Dn,Vt,Rt);if(Wt.s=1/ht<0?(Dn=Dn.slice(1),-1):1,un.DEBUG&&Dn.replace(/^0\.0*|\./,"").length>15)throw Error(U0+ht)}else Wt.s=Dn.charCodeAt(0)===45?(Dn=Dn.slice(1),-1):1;for(Jt=an.slice(0,Rt),kn=wt=0,tn=Dn.length;wt<tn;wt++)if(Jt.indexOf(On=Dn.charAt(wt))<0){if(On=="."){if(wt>kn){kn=tn;continue}}else if(!bn&&(Dn==Dn.toUpperCase()&&(Dn=Dn.toLowerCase())||Dn==Dn.toLowerCase()&&(Dn=Dn.toUpperCase()))){bn=!0,wt=-1,kn=0;continue}return L(Wt,String(ht),Vt,Rt)}Vt=!1,Dn=x(Dn,Rt,10,Wt.s),(kn=Dn.indexOf("."))>-1?Dn=Dn.replace(".",""):kn=Dn.length}for(wt=0;Dn.charCodeAt(wt)===48;wt++);for(tn=Dn.length;Dn.charCodeAt(--tn)===48;);if(Dn=Dn.slice(wt,++tn)){if(tn-=wt,Vt&&un.DEBUG&&tn>15&&(ht>hg||ht!==Ah(ht)))throw Error(U0+Wt.s*ht);if((kn=kn-wt-1)>dt)Wt.c=Wt.e=null;else if(kn<$e)Wt.c=[Wt.e=0];else{if(Wt.e=kn,Wt.c=[],wt=(kn+1)%ys,kn<0&&(wt+=ys),wt<tn){for(wt&&Wt.c.push(+Dn.slice(0,wt)),tn-=ys;wt<tn;)Wt.c.push(+Dn.slice(wt,wt+=ys));wt=ys-(Dn=Dn.slice(wt)).length}else wt-=tn;for(;wt--;Dn+="0");Wt.c.push(+Dn)}}else Wt.c=[Wt.e=0]}un.clone=Ty,un.ROUND_UP=0,un.ROUND_DOWN=1,un.ROUND_CEIL=2,un.ROUND_FLOOR=3,un.ROUND_HALF_UP=4,un.ROUND_HALF_DOWN=5,un.ROUND_HALF_EVEN=6,un.ROUND_HALF_CEIL=7,un.ROUND_HALF_FLOOR=8,un.EUCLID=9,un.config=un.set=function(ht){var Rt,Jt;if(ht!=null)if(typeof ht=="object"){if(ht.hasOwnProperty(Rt="DECIMAL_PLACES")&&(Jt=ht[Rt],Lu(Jt,0,rc,Rt),_e=Jt),ht.hasOwnProperty(Rt="ROUNDING_MODE")&&(Jt=ht[Rt],Lu(Jt,0,8,Rt),Ce=Jt),ht.hasOwnProperty(Rt="EXPONENTIAL_AT")&&(Jt=ht[Rt],Jt&&Jt.pop?(Lu(Jt[0],-rc,0,Rt),Lu(Jt[1],0,rc,Rt),Be=Jt[0],De=Jt[1]):(Lu(Jt,-rc,rc,Rt),Be=-(De=Jt<0?-Jt:Jt))),ht.hasOwnProperty(Rt="RANGE"))if(Jt=ht[Rt],Jt&&Jt.pop)Lu(Jt[0],-rc,-1,Rt),Lu(Jt[1],1,rc,Rt),$e=Jt[0],dt=Jt[1];else if(Lu(Jt,-rc,rc,Rt),Jt)$e=-(dt=Jt<0?-Jt:Jt);else throw Error(dd+Rt+" cannot be zero: "+Jt);if(ht.hasOwnProperty(Rt="CRYPTO"))if(Jt=ht[Rt],Jt===!!Jt)if(Jt)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ke=Jt;else throw Ke=!Jt,Error(dd+"crypto unavailable");else Ke=Jt;else throw Error(dd+Rt+" not true or false: "+Jt);if(ht.hasOwnProperty(Rt="MODULO_MODE")&&(Jt=ht[Rt],Lu(Jt,0,9,Rt),pt=Jt),ht.hasOwnProperty(Rt="POW_PRECISION")&&(Jt=ht[Rt],Lu(Jt,0,rc,Rt),$t=Jt),ht.hasOwnProperty(Rt="FORMAT"))if(Jt=ht[Rt],typeof Jt=="object")Pt=Jt;else throw Error(dd+Rt+" not an object: "+Jt);if(ht.hasOwnProperty(Rt="ALPHABET"))if(Jt=ht[Rt],typeof Jt=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Jt))An=Jt.slice(0,10)=="0123456789",an=Jt;else throw Error(dd+Rt+" invalid: "+Jt)}else throw Error(dd+"Object expected: "+ht);return{DECIMAL_PLACES:_e,ROUNDING_MODE:Ce,EXPONENTIAL_AT:[Be,De],RANGE:[$e,dt],CRYPTO:Ke,MODULO_MODE:pt,POW_PRECISION:$t,FORMAT:Pt,ALPHABET:an}},un.isBigNumber=function(ht){if(!ht||ht._isBigNumber!==!0)return!1;if(!un.DEBUG)return!0;var Rt,Jt,On=ht.c,bn=ht.e,kn=ht.s;e:if({}.toString.call(On)=="[object Array]"){if((kn===1||kn===-1)&&bn>=-rc&&bn<=rc&&bn===Ah(bn)){if(On[0]===0){if(bn===0&&On.length===1)return!0;break e}if(Rt=(bn+1)%ys,Rt<1&&(Rt+=ys),String(On[0]).length==Rt){for(Rt=0;Rt<On.length;Rt++)if(Jt=On[Rt],Jt<0||Jt>=Ph||Jt!==Ah(Jt))break e;if(Jt!==0)return!0}}}else if(On===null&&bn===null&&(kn===null||kn===1||kn===-1))return!0;throw Error(dd+"Invalid BigNumber: "+ht)},un.maximum=un.max=function(){return pr(arguments,-1)},un.minimum=un.min=function(){return pr(arguments,1)},un.random=function(){var ht=9007199254740992,Rt=Math.random()*ht&2097151?function(){return Ah(Math.random()*ht)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Jt){var On,bn,kn,wt,Vt,tn=0,Dn=[],Wt=new un(ee);if(Jt==null?Jt=_e:Lu(Jt,0,rc),wt=Zp(Jt/ys),Ke)if(crypto.getRandomValues){for(On=crypto.getRandomValues(new Uint32Array(wt*=2));tn<wt;)Vt=On[tn]*131072+(On[tn+1]>>>11),Vt>=9e15?(bn=crypto.getRandomValues(new Uint32Array(2)),On[tn]=bn[0],On[tn+1]=bn[1]):(Dn.push(Vt%1e14),tn+=2);tn=wt/2}else if(crypto.randomBytes){for(On=crypto.randomBytes(wt*=7);tn<wt;)Vt=(On[tn]&31)*281474976710656+On[tn+1]*1099511627776+On[tn+2]*4294967296+On[tn+3]*16777216+(On[tn+4]<<16)+(On[tn+5]<<8)+On[tn+6],Vt>=9e15?crypto.randomBytes(7).copy(On,tn):(Dn.push(Vt%1e14),tn+=7);tn=wt/7}else throw Ke=!1,Error(dd+"crypto unavailable");if(!Ke)for(;tn<wt;)Vt=Rt(),Vt<9e15&&(Dn[tn++]=Vt%1e14);for(wt=Dn[--tn],Jt%=ys,wt&&Jt&&(Vt=Wp[ys-Jt],Dn[tn]=Ah(wt/Vt)*Vt);Dn[tn]===0;Dn.pop(),tn--);if(tn<0)Dn=[kn=0];else{for(kn=-1;Dn[0]===0;Dn.splice(0,1),kn-=ys);for(tn=1,Vt=Dn[0];Vt>=10;Vt/=10,tn++);tn<ys&&(kn-=ys-tn)}return Wt.e=kn,Wt.c=Dn,Wt}}(),un.sum=function(){for(var ht=1,Rt=arguments,Jt=new un(Rt[0]);ht<Rt.length;)Jt=Jt.plus(Rt[ht++]);return Jt},x=function(){var ht="0123456789";function Rt(Jt,On,bn,kn){for(var wt,Vt=[0],tn,Dn=0,Wt=Jt.length;Dn<Wt;){for(tn=Vt.length;tn--;Vt[tn]*=On);for(Vt[0]+=kn.indexOf(Jt.charAt(Dn++)),wt=0;wt<Vt.length;wt++)Vt[wt]>bn-1&&(Vt[wt+1]==null&&(Vt[wt+1]=0),Vt[wt+1]+=Vt[wt]/bn|0,Vt[wt]%=bn)}return Vt.reverse()}return function(Jt,On,bn,kn,wt){var Vt,tn,Dn,Wt,ln,wn,xr,jr,Ar=Jt.indexOf("."),Vr=_e,ai=Ce;for(Ar>=0&&(Wt=$t,$t=0,Jt=Jt.replace(".",""),jr=new un(On),wn=jr.pow(Jt.length-Ar),$t=Wt,jr.c=Rt(yp(Rh(wn.c),wn.e,"0"),10,bn,ht),jr.e=jr.c.length),xr=Rt(Jt,On,bn,wt?(Vt=an,ht):(Vt=ht,an)),Dn=Wt=xr.length;xr[--Wt]==0;xr.pop());if(!xr[0])return Vt.charAt(0);if(Ar<0?--Dn:(wn.c=xr,wn.e=Dn,wn.s=kn,wn=g(wn,jr,Vr,ai,bn),xr=wn.c,ln=wn.r,Dn=wn.e),tn=Dn+Vr+1,Ar=xr[tn],Wt=bn/2,ln=ln||tn<0||xr[tn+1]!=null,ln=ai<4?(Ar!=null||ln)&&(ai==0||ai==(wn.s<0?3:2)):Ar>Wt||Ar==Wt&&(ai==4||ln||ai==6&&xr[tn-1]&1||ai==(wn.s<0?8:7)),tn<1||!xr[0])Jt=ln?yp(Vt.charAt(1),-Vr,Vt.charAt(0)):Vt.charAt(0);else{if(xr.length=tn,ln)for(--bn;++xr[--tn]>bn;)xr[tn]=0,tn||(++Dn,xr=[1].concat(xr));for(Wt=xr.length;!xr[--Wt];);for(Ar=0,Jt="";Ar<=Wt;Jt+=Vt.charAt(xr[Ar++]));Jt=yp(Jt,Dn,Vt.charAt(0))}return Jt}}(),g=function(){function ht(On,bn,kn){var wt,Vt,tn,Dn,Wt=0,ln=On.length,wn=bn%Kf,xr=bn/Kf|0;for(On=On.slice();ln--;)tn=On[ln]%Kf,Dn=On[ln]/Kf|0,wt=xr*tn+Dn*wn,Vt=wn*tn+wt%Kf*Kf+Wt,Wt=(Vt/kn|0)+(wt/Kf|0)+xr*Dn,On[ln]=Vt%kn;return Wt&&(On=[Wt].concat(On)),On}function Rt(On,bn,kn,wt){var Vt,tn;if(kn!=wt)tn=kn>wt?1:-1;else for(Vt=tn=0;Vt<kn;Vt++)if(On[Vt]!=bn[Vt]){tn=On[Vt]>bn[Vt]?1:-1;break}return tn}function Jt(On,bn,kn,wt){for(var Vt=0;kn--;)On[kn]-=Vt,Vt=On[kn]<bn[kn]?1:0,On[kn]=Vt*wt+On[kn]-bn[kn];for(;!On[0]&&On.length>1;On.splice(0,1));}return function(On,bn,kn,wt,Vt){var tn,Dn,Wt,ln,wn,xr,jr,Ar,Vr,ai,ki,Oi,co,_o,Fo,Mi,eo,Bo=On.s==bn.s?1:-1,$a=On.c,Ca=bn.c;if(!$a||!$a[0]||!Ca||!Ca[0])return new un(!On.s||!bn.s||($a?Ca&&$a[0]==Ca[0]:!Ca)?NaN:$a&&$a[0]==0||!Ca?Bo*0:Bo/0);for(Ar=new un(Bo),Vr=Ar.c=[],Dn=On.e-bn.e,Bo=kn+Dn+1,Vt||(Vt=Ph,Dn=Oh(On.e/ys)-Oh(bn.e/ys),Bo=Bo/ys|0),Wt=0;Ca[Wt]==($a[Wt]||0);Wt++);if(Ca[Wt]>($a[Wt]||0)&&Dn--,Bo<0)Vr.push(1),ln=!0;else{for(_o=$a.length,Mi=Ca.length,Wt=0,Bo+=2,wn=Ah(Vt/(Ca[0]+1)),wn>1&&(Ca=ht(Ca,wn,Vt),$a=ht($a,wn,Vt),Mi=Ca.length,_o=$a.length),co=Mi,ai=$a.slice(0,Mi),ki=ai.length;ki<Mi;ai[ki++]=0);eo=Ca.slice(),eo=[0].concat(eo),Fo=Ca[0],Ca[1]>=Vt/2&&Fo++;do{if(wn=0,tn=Rt(Ca,ai,Mi,ki),tn<0){if(Oi=ai[0],Mi!=ki&&(Oi=Oi*Vt+(ai[1]||0)),wn=Ah(Oi/Fo),wn>1)for(wn>=Vt&&(wn=Vt-1),xr=ht(Ca,wn,Vt),jr=xr.length,ki=ai.length;Rt(xr,ai,jr,ki)==1;)wn--,Jt(xr,Mi<jr?eo:Ca,jr,Vt),jr=xr.length,tn=1;else wn==0&&(tn=wn=1),xr=Ca.slice(),jr=xr.length;if(jr<ki&&(xr=[0].concat(xr)),Jt(ai,xr,ki,Vt),ki=ai.length,tn==-1)for(;Rt(Ca,ai,Mi,ki)<1;)wn++,Jt(ai,Mi<ki?eo:Ca,ki,Vt),ki=ai.length}else tn===0&&(wn++,ai=[0]);Vr[Wt++]=wn,ai[0]?ai[ki++]=$a[co]||0:(ai=[$a[co]],ki=1)}while((co++<_o||ai[0]!=null)&&Bo--);ln=ai[0]!=null,Vr[0]||Vr.splice(0,1)}if(Vt==Ph){for(Wt=1,Bo=Vr[0];Bo>=10;Bo/=10,Wt++);br(Ar,kn+(Ar.e=Wt+Dn*ys-1)+1,wt,ln)}else Ar.e=Dn,Ar.r=+ln;return Ar}}();function yn(ht,Rt,Jt,On){var bn,kn,wt,Vt,tn;if(Jt==null?Jt=Ce:Lu(Jt,0,8),!ht.c)return ht.toString();if(bn=ht.c[0],wt=ht.e,Rt==null)tn=Rh(ht.c),tn=On==1||On==2&&(wt<=Be||wt>=De)?lv(tn,wt):yp(tn,wt,"0");else if(ht=br(new un(ht),Rt,Jt),kn=ht.e,tn=Rh(ht.c),Vt=tn.length,On==1||On==2&&(Rt<=kn||kn<=Be)){for(;Vt<Rt;tn+="0",Vt++);tn=lv(tn,kn)}else if(Rt-=wt,tn=yp(tn,kn,"0"),kn+1>Vt){if(--Rt>0)for(tn+=".";Rt--;tn+="0");}else if(Rt+=kn-Vt,Rt>0)for(kn+1==Vt&&(tn+=".");Rt--;tn+="0");return ht.s<0&&bn?"-"+tn:tn}function pr(ht,Rt){for(var Jt,On,bn=1,kn=new un(ht[0]);bn<ht.length;bn++)On=new un(ht[bn]),(!On.s||(Jt=Hp(kn,On))===Rt||Jt===0&&kn.s===Rt)&&(kn=On);return kn}function ur(ht,Rt,Jt){for(var On=1,bn=Rt.length;!Rt[--bn];Rt.pop());for(bn=Rt[0];bn>=10;bn/=10,On++);return(Jt=On+Jt*ys-1)>dt?ht.c=ht.e=null:Jt<$e?ht.c=[ht.e=0]:(ht.e=Jt,ht.c=Rt),ht}L=function(){var ht=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Rt=/^([^.]+)\.$/,Jt=/^\.([^.]+)$/,On=/^-?(Infinity|NaN)$/,bn=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(kn,wt,Vt,tn){var Dn,Wt=Vt?wt:wt.replace(bn,"");if(On.test(Wt))kn.s=isNaN(Wt)?null:Wt<0?-1:1;else{if(!Vt&&(Wt=Wt.replace(ht,function(ln,wn,xr){return Dn=(xr=xr.toLowerCase())=="x"?16:xr=="b"?2:8,!tn||tn==Dn?wn:ln}),tn&&(Dn=tn,Wt=Wt.replace(Rt,"$1").replace(Jt,"0.$1")),wt!=Wt))return new un(Wt,Dn);if(un.DEBUG)throw Error(dd+"Not a"+(tn?" base "+tn:"")+" number: "+wt);kn.s=null}kn.c=kn.e=null}}();function br(ht,Rt,Jt,On){var bn,kn,wt,Vt,tn,Dn,Wt,ln=ht.c,wn=Wp;if(ln){e:{for(bn=1,Vt=ln[0];Vt>=10;Vt/=10,bn++);if(kn=Rt-bn,kn<0)kn+=ys,wt=Rt,tn=ln[Dn=0],Wt=Ah(tn/wn[bn-wt-1]%10);else if(Dn=Zp((kn+1)/ys),Dn>=ln.length)if(On){for(;ln.length<=Dn;ln.push(0));tn=Wt=0,bn=1,kn%=ys,wt=kn-ys+1}else break e;else{for(tn=Vt=ln[Dn],bn=1;Vt>=10;Vt/=10,bn++);kn%=ys,wt=kn-ys+bn,Wt=wt<0?0:Ah(tn/wn[bn-wt-1]%10)}if(On=On||Rt<0||ln[Dn+1]!=null||(wt<0?tn:tn%wn[bn-wt-1]),On=Jt<4?(Wt||On)&&(Jt==0||Jt==(ht.s<0?3:2)):Wt>5||Wt==5&&(Jt==4||On||Jt==6&&(kn>0?wt>0?tn/wn[bn-wt]:0:ln[Dn-1])%10&1||Jt==(ht.s<0?8:7)),Rt<1||!ln[0])return ln.length=0,On?(Rt-=ht.e+1,ln[0]=wn[(ys-Rt%ys)%ys],ht.e=-Rt||0):ln[0]=ht.e=0,ht;if(kn==0?(ln.length=Dn,Vt=1,Dn--):(ln.length=Dn+1,Vt=wn[ys-kn],ln[Dn]=wt>0?Ah(tn/wn[bn-wt]%wn[wt])*Vt:0),On)for(;;)if(Dn==0){for(kn=1,wt=ln[0];wt>=10;wt/=10,kn++);for(wt=ln[0]+=Vt,Vt=1;wt>=10;wt/=10,Vt++);kn!=Vt&&(ht.e++,ln[0]==Ph&&(ln[0]=1));break}else{if(ln[Dn]+=Vt,ln[Dn]!=Ph)break;ln[Dn--]=0,Vt=1}for(kn=ln.length;ln[--kn]===0;ln.pop());}ht.e>dt?ht.c=ht.e=null:ht.e<$e&&(ht.c=[ht.e=0])}return ht}function sr(ht){var Rt,Jt=ht.e;return Jt===null?ht.toString():(Rt=Rh(ht.c),Rt=Jt<=Be||Jt>=De?lv(Rt,Jt):yp(Rt,Jt,"0"),ht.s<0?"-"+Rt:Rt)}return V.absoluteValue=V.abs=function(){var ht=new un(this);return ht.s<0&&(ht.s=1),ht},V.comparedTo=function(ht,Rt){return Hp(this,new un(ht,Rt))},V.decimalPlaces=V.dp=function(ht,Rt){var Jt,On,bn,kn=this;if(ht!=null)return Lu(ht,0,rc),Rt==null?Rt=Ce:Lu(Rt,0,8),br(new un(kn),ht+kn.e+1,Rt);if(!(Jt=kn.c))return null;if(On=((bn=Jt.length-1)-Oh(this.e/ys))*ys,bn=Jt[bn])for(;bn%10==0;bn/=10,On--);return On<0&&(On=0),On},V.dividedBy=V.div=function(ht,Rt){return g(this,new un(ht,Rt),_e,Ce)},V.dividedToIntegerBy=V.idiv=function(ht,Rt){return g(this,new un(ht,Rt),0,1)},V.exponentiatedBy=V.pow=function(ht,Rt){var Jt,On,bn,kn,wt,Vt,tn,Dn,Wt,ln=this;if(ht=new un(ht),ht.c&&!ht.isInteger())throw Error(dd+"Exponent not an integer: "+sr(ht));if(Rt!=null&&(Rt=new un(Rt)),Vt=ht.e>14,!ln.c||!ln.c[0]||ln.c[0]==1&&!ln.e&&ln.c.length==1||!ht.c||!ht.c[0])return Wt=new un(Math.pow(+sr(ln),Vt?ht.s*(2-Kp(ht)):+sr(ht))),Rt?Wt.mod(Rt):Wt;if(tn=ht.s<0,Rt){if(Rt.c?!Rt.c[0]:!Rt.s)return new un(NaN);On=!tn&&ln.isInteger()&&Rt.isInteger(),On&&(ln=ln.mod(Rt))}else{if(ht.e>9&&(ln.e>0||ln.e<-1||(ln.e==0?ln.c[0]>1||Vt&&ln.c[1]>=24e7:ln.c[0]<8e13||Vt&&ln.c[0]<=9999975e7)))return kn=ln.s<0&&Kp(ht)?-0:0,ln.e>-1&&(kn=1/kn),new un(tn?1/kn:kn);$t&&(kn=Zp($t/ys+2))}for(Vt?(Jt=new un(.5),tn&&(ht.s=1),Dn=Kp(ht)):(bn=Math.abs(+sr(ht)),Dn=bn%2),Wt=new un(ee);;){if(Dn){if(Wt=Wt.times(ln),!Wt.c)break;kn?Wt.c.length>kn&&(Wt.c.length=kn):On&&(Wt=Wt.mod(Rt))}if(bn){if(bn=Ah(bn/2),bn===0)break;Dn=bn%2}else if(ht=ht.times(Jt),br(ht,ht.e+1,1),ht.e>14)Dn=Kp(ht);else{if(bn=+sr(ht),bn===0)break;Dn=bn%2}ln=ln.times(ln),kn?ln.c&&ln.c.length>kn&&(ln.c.length=kn):On&&(ln=ln.mod(Rt))}return On?Wt:(tn&&(Wt=ee.div(Wt)),Rt?Wt.mod(Rt):kn?br(Wt,$t,Ce,wt):Wt)},V.integerValue=function(ht){var Rt=new un(this);return ht==null?ht=Ce:Lu(ht,0,8),br(Rt,Rt.e+1,ht)},V.isEqualTo=V.eq=function(ht,Rt){return Hp(this,new un(ht,Rt))===0},V.isFinite=function(){return!!this.c},V.isGreaterThan=V.gt=function(ht,Rt){return Hp(this,new un(ht,Rt))>0},V.isGreaterThanOrEqualTo=V.gte=function(ht,Rt){return(Rt=Hp(this,new un(ht,Rt)))===1||Rt===0},V.isInteger=function(){return!!this.c&&Oh(this.e/ys)>this.c.length-2},V.isLessThan=V.lt=function(ht,Rt){return Hp(this,new un(ht,Rt))<0},V.isLessThanOrEqualTo=V.lte=function(ht,Rt){return(Rt=Hp(this,new un(ht,Rt)))===-1||Rt===0},V.isNaN=function(){return!this.s},V.isNegative=function(){return this.s<0},V.isPositive=function(){return this.s>0},V.isZero=function(){return!!this.c&&this.c[0]==0},V.minus=function(ht,Rt){var Jt,On,bn,kn,wt=this,Vt=wt.s;if(ht=new un(ht,Rt),Rt=ht.s,!Vt||!Rt)return new un(NaN);if(Vt!=Rt)return ht.s=-Rt,wt.plus(ht);var tn=wt.e/ys,Dn=ht.e/ys,Wt=wt.c,ln=ht.c;if(!tn||!Dn){if(!Wt||!ln)return Wt?(ht.s=-Rt,ht):new un(ln?wt:NaN);if(!Wt[0]||!ln[0])return ln[0]?(ht.s=-Rt,ht):new un(Wt[0]?wt:Ce==3?-0:0)}if(tn=Oh(tn),Dn=Oh(Dn),Wt=Wt.slice(),Vt=tn-Dn){for((kn=Vt<0)?(Vt=-Vt,bn=Wt):(Dn=tn,bn=ln),bn.reverse(),Rt=Vt;Rt--;bn.push(0));bn.reverse()}else for(On=(kn=(Vt=Wt.length)<(Rt=ln.length))?Vt:Rt,Vt=Rt=0;Rt<On;Rt++)if(Wt[Rt]!=ln[Rt]){kn=Wt[Rt]<ln[Rt];break}if(kn&&(bn=Wt,Wt=ln,ln=bn,ht.s=-ht.s),Rt=(On=ln.length)-(Jt=Wt.length),Rt>0)for(;Rt--;Wt[Jt++]=0);for(Rt=Ph-1;On>Vt;){if(Wt[--On]<ln[On]){for(Jt=On;Jt&&!Wt[--Jt];Wt[Jt]=Rt);--Wt[Jt],Wt[On]+=Ph}Wt[On]-=ln[On]}for(;Wt[0]==0;Wt.splice(0,1),--Dn);return Wt[0]?ur(ht,Wt,Dn):(ht.s=Ce==3?-1:1,ht.c=[ht.e=0],ht)},V.modulo=V.mod=function(ht,Rt){var Jt,On,bn=this;return ht=new un(ht,Rt),!bn.c||!ht.s||ht.c&&!ht.c[0]?new un(NaN):!ht.c||bn.c&&!bn.c[0]?new un(bn):(pt==9?(On=ht.s,ht.s=1,Jt=g(bn,ht,0,3),ht.s=On,Jt.s*=On):Jt=g(bn,ht,0,pt),ht=bn.minus(Jt.times(ht)),!ht.c[0]&&pt==1&&(ht.s=bn.s),ht)},V.multipliedBy=V.times=function(ht,Rt){var Jt,On,bn,kn,wt,Vt,tn,Dn,Wt,ln,wn,xr,jr,Ar,Vr,ai=this,ki=ai.c,Oi=(ht=new un(ht,Rt)).c;if(!ki||!Oi||!ki[0]||!Oi[0])return!ai.s||!ht.s||ki&&!ki[0]&&!Oi||Oi&&!Oi[0]&&!ki?ht.c=ht.e=ht.s=null:(ht.s*=ai.s,!ki||!Oi?ht.c=ht.e=null:(ht.c=[0],ht.e=0)),ht;for(On=Oh(ai.e/ys)+Oh(ht.e/ys),ht.s*=ai.s,tn=ki.length,ln=Oi.length,tn<ln&&(jr=ki,ki=Oi,Oi=jr,bn=tn,tn=ln,ln=bn),bn=tn+ln,jr=[];bn--;jr.push(0));for(Ar=Ph,Vr=Kf,bn=ln;--bn>=0;){for(Jt=0,wn=Oi[bn]%Vr,xr=Oi[bn]/Vr|0,wt=tn,kn=bn+wt;kn>bn;)Dn=ki[--wt]%Vr,Wt=ki[wt]/Vr|0,Vt=xr*Dn+Wt*wn,Dn=wn*Dn+Vt%Vr*Vr+jr[kn]+Jt,Jt=(Dn/Ar|0)+(Vt/Vr|0)+xr*Wt,jr[kn--]=Dn%Ar;jr[kn]=Jt}return Jt?++On:jr.splice(0,1),ur(ht,jr,On)},V.negated=function(){var ht=new un(this);return ht.s=-ht.s||null,ht},V.plus=function(ht,Rt){var Jt,On=this,bn=On.s;if(ht=new un(ht,Rt),Rt=ht.s,!bn||!Rt)return new un(NaN);if(bn!=Rt)return ht.s=-Rt,On.minus(ht);var kn=On.e/ys,wt=ht.e/ys,Vt=On.c,tn=ht.c;if(!kn||!wt){if(!Vt||!tn)return new un(bn/0);if(!Vt[0]||!tn[0])return tn[0]?ht:new un(Vt[0]?On:bn*0)}if(kn=Oh(kn),wt=Oh(wt),Vt=Vt.slice(),bn=kn-wt){for(bn>0?(wt=kn,Jt=tn):(bn=-bn,Jt=Vt),Jt.reverse();bn--;Jt.push(0));Jt.reverse()}for(bn=Vt.length,Rt=tn.length,bn-Rt<0&&(Jt=tn,tn=Vt,Vt=Jt,Rt=bn),bn=0;Rt;)bn=(Vt[--Rt]=Vt[Rt]+tn[Rt]+bn)/Ph|0,Vt[Rt]=Ph===Vt[Rt]?0:Vt[Rt]%Ph;return bn&&(Vt=[bn].concat(Vt),++wt),ur(ht,Vt,wt)},V.precision=V.sd=function(ht,Rt){var Jt,On,bn,kn=this;if(ht!=null&&ht!==!!ht)return Lu(ht,1,rc),Rt==null?Rt=Ce:Lu(Rt,0,8),br(new un(kn),ht,Rt);if(!(Jt=kn.c))return null;if(bn=Jt.length-1,On=bn*ys+1,bn=Jt[bn]){for(;bn%10==0;bn/=10,On--);for(bn=Jt[0];bn>=10;bn/=10,On++);}return ht&&kn.e+1>On&&(On=kn.e+1),On},V.shiftedBy=function(ht){return Lu(ht,-hg,hg),this.times("1e"+ht)},V.squareRoot=V.sqrt=function(){var ht,Rt,Jt,On,bn,kn=this,wt=kn.c,Vt=kn.s,tn=kn.e,Dn=_e+4,Wt=new un("0.5");if(Vt!==1||!wt||!wt[0])return new un(!Vt||Vt<0&&(!wt||wt[0])?NaN:wt?kn:1/0);if(Vt=Math.sqrt(+sr(kn)),Vt==0||Vt==1/0?(Rt=Rh(wt),(Rt.length+tn)%2==0&&(Rt+="0"),Vt=Math.sqrt(+Rt),tn=Oh((tn+1)/2)-(tn<0||tn%2),Vt==1/0?Rt="5e"+tn:(Rt=Vt.toExponential(),Rt=Rt.slice(0,Rt.indexOf("e")+1)+tn),Jt=new un(Rt)):Jt=new un(Vt+""),Jt.c[0]){for(tn=Jt.e,Vt=tn+Dn,Vt<3&&(Vt=0);;)if(bn=Jt,Jt=Wt.times(bn.plus(g(kn,bn,Dn,1))),Rh(bn.c).slice(0,Vt)===(Rt=Rh(Jt.c)).slice(0,Vt))if(Jt.e<tn&&--Vt,Rt=Rt.slice(Vt-3,Vt+1),Rt=="9999"||!On&&Rt=="4999"){if(!On&&(br(bn,bn.e+_e+2,0),bn.times(bn).eq(kn))){Jt=bn;break}Dn+=4,Vt+=4,On=1}else{(!+Rt||!+Rt.slice(1)&&Rt.charAt(0)=="5")&&(br(Jt,Jt.e+_e+2,1),ht=!Jt.times(Jt).eq(kn));break}}return br(Jt,Jt.e+_e+1,Ce,ht)},V.toExponential=function(ht,Rt){return ht!=null&&(Lu(ht,0,rc),ht++),yn(this,ht,Rt,1)},V.toFixed=function(ht,Rt){return ht!=null&&(Lu(ht,0,rc),ht=ht+this.e+1),yn(this,ht,Rt)},V.toFormat=function(ht,Rt,Jt){var On,bn=this;if(Jt==null)ht!=null&&Rt&&typeof Rt=="object"?(Jt=Rt,Rt=null):ht&&typeof ht=="object"?(Jt=ht,ht=Rt=null):Jt=Pt;else if(typeof Jt!="object")throw Error(dd+"Argument not an object: "+Jt);if(On=bn.toFixed(ht,Rt),bn.c){var kn,wt=On.split("."),Vt=+Jt.groupSize,tn=+Jt.secondaryGroupSize,Dn=Jt.groupSeparator||"",Wt=wt[0],ln=wt[1],wn=bn.s<0,xr=wn?Wt.slice(1):Wt,jr=xr.length;if(tn&&(kn=Vt,Vt=tn,tn=kn,jr-=kn),Vt>0&&jr>0){for(kn=jr%Vt||Vt,Wt=xr.substr(0,kn);kn<jr;kn+=Vt)Wt+=Dn+xr.substr(kn,Vt);tn>0&&(Wt+=Dn+xr.slice(kn)),wn&&(Wt="-"+Wt)}On=ln?Wt+(Jt.decimalSeparator||"")+((tn=+Jt.fractionGroupSize)?ln.replace(new RegExp("\\d{"+tn+"}\\B","g"),"$&"+(Jt.fractionGroupSeparator||"")):ln):Wt}return(Jt.prefix||"")+On+(Jt.suffix||"")},V.toFraction=function(ht){var Rt,Jt,On,bn,kn,wt,Vt,tn,Dn,Wt,ln,wn,xr=this,jr=xr.c;if(ht!=null&&(Vt=new un(ht),!Vt.isInteger()&&(Vt.c||Vt.s!==1)||Vt.lt(ee)))throw Error(dd+"Argument "+(Vt.isInteger()?"out of range: ":"not an integer: ")+sr(Vt));if(!jr)return new un(xr);for(Rt=new un(ee),Dn=Jt=new un(ee),On=tn=new un(ee),wn=Rh(jr),kn=Rt.e=wn.length-xr.e-1,Rt.c[0]=Wp[(wt=kn%ys)<0?ys+wt:wt],ht=!ht||Vt.comparedTo(Rt)>0?kn>0?Rt:Dn:Vt,wt=dt,dt=1/0,Vt=new un(wn),tn.c[0]=0;Wt=g(Vt,Rt,0,1),bn=Jt.plus(Wt.times(On)),bn.comparedTo(ht)!=1;)Jt=On,On=bn,Dn=tn.plus(Wt.times(bn=Dn)),tn=bn,Rt=Vt.minus(Wt.times(bn=Rt)),Vt=bn;return bn=g(ht.minus(Jt),On,0,1),tn=tn.plus(bn.times(Dn)),Jt=Jt.plus(bn.times(On)),tn.s=Dn.s=xr.s,kn=kn*2,ln=g(Dn,On,kn,Ce).minus(xr).abs().comparedTo(g(tn,Jt,kn,Ce).minus(xr).abs())<1?[Dn,On]:[tn,Jt],dt=wt,ln},V.toNumber=function(){return+sr(this)},V.toPrecision=function(ht,Rt){return ht!=null&&Lu(ht,1,rc),yn(this,ht,Rt,2)},V.toString=function(ht){var Rt,Jt=this,On=Jt.s,bn=Jt.e;return bn===null?On?(Rt="Infinity",On<0&&(Rt="-"+Rt)):Rt="NaN":(ht==null?Rt=bn<=Be||bn>=De?lv(Rh(Jt.c),bn):yp(Rh(Jt.c),bn,"0"):ht===10&&An?(Jt=br(new un(Jt),_e+bn+1,Ce),Rt=yp(Rh(Jt.c),Jt.e,"0")):(Lu(ht,2,an.length,"Base"),Rt=x(yp(Rh(Jt.c),bn,"0"),10,ht,On,!0)),On<0&&Jt.c[0]&&(Rt="-"+Rt)),Rt},V.valueOf=V.toJSON=function(){return sr(this)},V._isBigNumber=!0,V[Symbol.toStringTag]="BigNumber",V[Symbol.for("nodejs.util.inspect.custom")]=V.valueOf,p!=null&&un.set(p),un}function Oh(p){var g=p|0;return p>0||p===g?g:g-1}function Rh(p){for(var g,x,L=1,V=p.length,ee=p[0]+"";L<V;){for(g=p[L++]+"",x=ys-g.length;x--;g="0"+g);ee+=g}for(V=ee.length;ee.charCodeAt(--V)===48;);return ee.slice(0,V+1||1)}function Hp(p,g){var x,L,V=p.c,ee=g.c,_e=p.s,Ce=g.s,Be=p.e,De=g.e;if(!_e||!Ce)return null;if(x=V&&!V[0],L=ee&&!ee[0],x||L)return x?L?0:-Ce:_e;if(_e!=Ce)return _e;if(x=_e<0,L=Be==De,!V||!ee)return L?0:!V^x?1:-1;if(!L)return Be>De^x?1:-1;for(Ce=(Be=V.length)<(De=ee.length)?Be:De,_e=0;_e<Ce;_e++)if(V[_e]!=ee[_e])return V[_e]>ee[_e]^x?1:-1;return Be==De?0:Be>De^x?1:-1}function Lu(p,g,x,L){if(p<g||p>x||p!==Ah(p))throw Error(dd+(L||"Argument")+(typeof p=="number"?p<g||p>x?" out of range: ":" not an integer: ":" not a primitive number: ")+String(p))}function Kp(p){var g=p.c.length-1;return Oh(p.e/ys)==g&&p.c[g]%2!=0}function lv(p,g){return(p.length>1?p.charAt(0)+"."+p.slice(1):p)+(g<0?"e":"e+")+g}function yp(p,g,x){var L,V;if(g<0){for(V=x+".";++g;V+=x);p=V+p}else if(L=p.length,++g>L){for(V=x,g-=L;--g;V+=x);p+=V}else g<L&&(p=p.slice(0,g)+"."+p.slice(g));return p}var V0=Ty(),Yf=V0,G0=class{constructor(p){Ra(this,"key");Ra(this,"left",null);Ra(this,"right",null);this.key=p}},fg=class extends G0{constructor(p){super(p)}},uv=class Nb extends G0{constructor(x,L){super(x);Ra(this,"value");this.value=L}replaceValue(x){const L=new Nb(this.key,x);return L.left=this.left,L.right=this.right,L}},d_=class{constructor(){Ra(this,"size",0);Ra(this,"modificationCount",0);Ra(this,"splayCount",0)}splay(p){const g=this.root;if(g==null)return this.compare(p,p),-1;let x=null,L=null,V=null,ee=null,_e=g;const Ce=this.compare;let Be;for(;;)if(Be=Ce(_e.key,p),Be>0){let De=_e.left;if(De==null||(Be=Ce(De.key,p),Be>0&&(_e.left=De.right,De.right=_e,_e=De,De=_e.left,De==null)))break;x==null?L=_e:x.left=_e,x=_e,_e=De}else if(Be<0){let De=_e.right;if(De==null||(Be=Ce(De.key,p),Be<0&&(_e.right=De.left,De.left=_e,_e=De,De=_e.right,De==null)))break;V==null?ee=_e:V.right=_e,V=_e,_e=De}else break;return V!=null&&(V.right=_e.left,_e.left=ee),x!=null&&(x.left=_e.right,_e.right=L),this.root!==_e&&(this.root=_e,this.splayCount++),Be}splayMin(p){let g=p,x=g.left;for(;x!=null;){const L=x;g.left=L.right,L.right=g,g=L,x=g.left}return g}splayMax(p){let g=p,x=g.right;for(;x!=null;){const L=x;g.right=L.left,L.left=g,g=L,x=g.right}return g}_delete(p){if(this.root==null||this.splay(p)!=0)return null;let x=this.root;const L=x,V=x.left;if(this.size--,V==null)this.root=x.right;else{const ee=x.right;x=this.splayMax(V),x.right=ee,this.root=x}return this.modificationCount++,L}addNewRoot(p,g){this.size++,this.modificationCount++;const x=this.root;if(x==null){this.root=p;return}g<0?(p.left=x,p.right=x.right,x.right=null):(p.right=x,p.left=x.left,x.left=null),this.root=p}_first(){const p=this.root;return p==null?null:(this.root=this.splayMin(p),this.root)}_last(){const p=this.root;return p==null?null:(this.root=this.splayMax(p),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(p){return this.validKey(p)&&this.splay(p)==0}defaultCompare(){return(p,g)=>p<g?-1:p>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:p=>{this.root=p},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:p=>{this.splayCount=p},splay:p=>this.splay(p),has:p=>this.has(p)}}},$0=class extends d_{constructor(g,x){super();Ra(this,"root",null);Ra(this,"compare");Ra(this,"validKey");Ra(this,pb,"[object Map]");this.compare=g!=null?g:this.defaultCompare(),this.validKey=x!=null?x:L=>L!=null&&L!=null}delete(g){return this.validKey(g)?this._delete(g)!=null:!1}forEach(g){const x=new pg(this.wrap());let L;for(;L=x.next(),!L.done;)g(L.value[1],L.value[0],this)}get(g){if(this.validKey(g)&&this.root!=null&&this.splay(g)==0)return this.root.value}hasValue(g){const x=this.splayCount,L=V=>{for(;V!=null;){if(V.value==g)return!0;if(x!=this.splayCount)throw"Concurrent modification during iteration.";if(V.right!=null&&L(V.right))return!0;V=V.left}return!1};return L(this.root)}set(g,x){const L=this.splay(g);return L==0?(this.root=this.root.replaceValue(x),this.splayCount+=1,this):(this.addNewRoot(new uv(g,x),L),this)}setAll(g){g.forEach((x,L)=>{this.set(L,x)})}setIfAbsent(g,x){let L=this.splay(g);if(L==0)return this.root.value;const V=this.modificationCount,ee=this.splayCount,_e=x();if(V!=this.modificationCount)throw"Concurrent modification during iteration.";return ee!=this.splayCount&&(L=this.splay(g)),this.addNewRoot(new uv(g,_e),L),_e}isEmpty(){return this.root==null}isNotEmpty(){return!this.isEmpty()}firstKey(){return this.root==null?null:this._first().key}lastKey(){return this.root==null?null:this._last().key}lastKeyBefore(g){if(g==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(g)<0)return this.root.key;let L=this.root.left;if(L==null)return null;let V=L.right;for(;V!=null;)L=V,V=L.right;return L.key}firstKeyAfter(g){if(g==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(g)>0)return this.root.key;let L=this.root.right;if(L==null)return null;let V=L.left;for(;V!=null;)L=V,V=L.left;return L.key}update(g,x,L){let V=this.splay(g);if(V==0){const ee=this.modificationCount,_e=this.splayCount,Ce=x(this.root.value);if(ee!=this.modificationCount)throw"Concurrent modification during iteration.";return _e!=this.splayCount&&this.splay(g),this.root=this.root.replaceValue(Ce),this.splayCount+=1,Ce}if(L!=null){const ee=this.modificationCount,_e=this.splayCount,Ce=L();if(ee!=this.modificationCount)throw"Concurrent modification during iteration.";return _e!=this.splayCount&&(V=this.splay(g)),this.addNewRoot(new uv(g,Ce),V),Ce}throw"Invalid argument (key): Key not in map."}updateAll(g){if(this.root==null)return;const L=new pg(this.wrap());let V;for(;V=L.next(),!V.done;){const ee=g(...V.value);L.replaceValue(ee)}}keys(){return new h_(this.wrap())}values(){return new cv(this.wrap())}entries(){return this[Symbol.iterator]()}[(mb=Symbol.iterator,pb=Symbol.toStringTag,mb)](){return new pg(this.wrap())}},Xf=class Wy extends d_{constructor(x,L){super();Ra(this,"root",null);Ra(this,"compare");Ra(this,"validKey");Ra(this,_b,"[object Set]");this.compare=x!=null?x:this.defaultCompare(),this.validKey=L!=null?L:V=>V!=null&&V!=null}delete(x){return this.validKey(x)?this._delete(x)!=null:!1}deleteAll(x){for(const L of x)this.delete(L)}forEach(x){const L=this[Symbol.iterator]();let V;for(;V=L.next(),!V.done;)x(V.value,V.value,this)}add(x){const L=this.splay(x);return L!=0&&this.addNewRoot(new fg(x),L),this}addAndReturn(x){const L=this.splay(x);return L!=0&&this.addNewRoot(new fg(x),L),this.root.key}addAll(x){for(const L of x)this.add(L)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(x){if(x==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(x)<0)return this.root.key;let V=this.root.left;if(V==null)return null;let ee=V.right;for(;ee!=null;)V=ee,ee=V.right;return V.key}firstAfter(x){if(x==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(x)>0)return this.root.key;let V=this.root.right;if(V==null)return null;let ee=V.left;for(;ee!=null;)V=ee,ee=V.left;return V.key}retainAll(x){const L=new Wy(this.compare,this.validKey),V=this.modificationCount;for(const ee of x){if(V!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(ee)&&this.splay(ee)==0&&L.add(this.root.key)}L.size!=this.size&&(this.root=L.root,this.size=L.size,this.modificationCount++)}lookup(x){return!this.validKey(x)||this.splay(x)!=0?null:this.root.key}intersection(x){const L=new Wy(this.compare,this.validKey);for(const V of this)x.has(V)&&L.add(V);return L}difference(x){const L=new Wy(this.compare,this.validKey);for(const V of this)x.has(V)||L.add(V);return L}union(x){const L=this.clone();return L.addAll(x),L}clone(){const x=new Wy(this.compare,this.validKey);return x.size=this.size,x.root=this.copyNode(this.root),x}copyNode(x){if(x==null)return null;function L(ee,_e){let Ce,Be;do{if(Ce=ee.left,Be=ee.right,Ce!=null){const De=new fg(Ce.key);_e.left=De,L(Ce,De)}if(Be!=null){const De=new fg(Be.key);_e.right=De,ee=Be,_e=De}}while(Be!=null)}const V=new fg(x.key);return L(x,V),V}toSet(){return this.clone()}entries(){return new Iy(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(gb=Symbol.iterator,_b=Symbol.toStringTag,gb)](){return new h_(this.wrap())}},xp=class{constructor(p){Ra(this,"tree");Ra(this,"path",new Array);Ra(this,"modificationCount",null);Ra(this,"splayCount");this.tree=p,this.splayCount=p.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const p=this.path[this.path.length-1];return this.getValue(p)}rebuildPath(p){this.path.splice(0,this.path.length),this.tree.splay(p),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(p){for(;p!=null;)this.path.push(p),p=p.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let x=this.tree.getRoot();for(;x!=null;)this.path.push(x),x=x.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let p=this.path[this.path.length-1],g=p.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===p;)p=this.path.pop();return this.path.length>0}},h_=class extends xp{getValue(p){return p.key}},Iy=class extends xp{getValue(p){return[p.key,p.key]}},cv=class extends xp{constructor(p){super(p)}getValue(p){return p.value}},pg=class extends xp{constructor(p){super(p)}getValue(p){return[p.key,p.value]}replaceValue(p){if(this.modificationCount!=this.tree.getModificationCount())throw"Concurrent modification during iteration.";this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);const g=this.path.pop(),x=g.replaceValue(p);if(!this.path.length)this.tree.setRoot(x);else{const V=this.path[this.path.length-1];g===V.left?V.left=x:V.right=x}this.path.push(x);const L=this.tree.getSplayCount()+1;this.tree.setSplayCount(L),this.splayCount=L}},dv=p=>()=>p,f_=p=>{const g=p?(x,L)=>L.minus(x).abs().isLessThanOrEqualTo(p):dv(!1);return(x,L)=>g(x,L)?0:x.comparedTo(L)};function mg(p){const g=p?(x,L,V,ee,_e)=>x.exponentiatedBy(2).isLessThanOrEqualTo(ee.minus(L).exponentiatedBy(2).plus(_e.minus(V).exponentiatedBy(2)).times(p)):dv(!1);return(x,L,V)=>{const ee=x.x,_e=x.y,Ce=V.x,Be=V.y,De=_e.minus(Be).times(L.x.minus(Ce)).minus(ee.minus(Ce).times(L.y.minus(Be)));return g(De,ee,_e,Ce,Be)?0:De.comparedTo(0)}}var Z0=p=>p,p_=p=>{if(p){const g=new Xf(f_(p)),x=new Xf(f_(p)),L=(ee,_e)=>_e.addAndReturn(ee),V=ee=>({x:L(ee.x,g),y:L(ee.y,x)});return V({x:new Yf(0),y:new Yf(0)}),V}return Z0},hv=p=>({set:g=>{bp=hv(g)},reset:()=>hv(p),compare:f_(p),snap:p_(p),orient:mg(p)}),bp=hv(),m_=(p,g)=>p.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(p.ur.x)&&p.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(p.ur.y),My=(p,g)=>{if(g.ur.x.isLessThan(p.ll.x)||p.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(p.ll.y)||p.ur.y.isLessThan(g.ll.y))return null;const x=p.ll.x.isLessThan(g.ll.x)?g.ll.x:p.ll.x,L=p.ur.x.isLessThan(g.ur.x)?p.ur.x:g.ur.x,V=p.ll.y.isLessThan(g.ll.y)?g.ll.y:p.ll.y,ee=p.ur.y.isLessThan(g.ur.y)?p.ur.y:g.ur.y;return{ll:{x,y:V},ur:{x:L,y:ee}}},fv=(p,g)=>p.x.times(g.y).minus(p.y.times(g.x)),W0=(p,g)=>p.x.times(g.x).plus(p.y.times(g.y)),pv=p=>W0(p,p).sqrt(),cx=(p,g,x)=>{const L={x:g.x.minus(p.x),y:g.y.minus(p.y)},V={x:x.x.minus(p.x),y:x.y.minus(p.y)};return fv(V,L).div(pv(V)).div(pv(L))},mv=(p,g,x)=>{const L={x:g.x.minus(p.x),y:g.y.minus(p.y)},V={x:x.x.minus(p.x),y:x.y.minus(p.y)};return W0(V,L).div(pv(V)).div(pv(L))},H0=(p,g,x)=>g.y.isZero()?null:{x:p.x.plus(g.x.div(g.y).times(x.minus(p.y))),y:x},K0=(p,g,x)=>g.x.isZero()?null:{x,y:p.y.plus(g.y.div(g.x).times(x.minus(p.x)))},_v=(p,g,x,L)=>{if(g.x.isZero())return K0(x,L,p.x);if(L.x.isZero())return K0(p,g,x.x);if(g.y.isZero())return H0(x,L,p.y);if(L.y.isZero())return H0(p,g,x.y);const V=fv(g,L);if(V.isZero())return null;const ee={x:x.x.minus(p.x),y:x.y.minus(p.y)},_e=fv(ee,g).div(V),Ce=fv(ee,L).div(V),Be=p.x.plus(Ce.times(g.x)),De=x.x.plus(_e.times(L.x)),$e=p.y.plus(Ce.times(g.y)),dt=x.y.plus(_e.times(L.y)),Ke=Be.plus(De).div(2),pt=$e.plus(dt).div(2);return{x:Ke,y:pt}},Jf=class zb{constructor(g,x){Ra(this,"point");Ra(this,"isLeft");Ra(this,"segment");Ra(this,"otherSE");Ra(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=x}static compare(g,x){const L=zb.comparePoints(g.point,x.point);return L!==0?L:(g.point!==x.point&&g.link(x),g.isLeft!==x.isLeft?g.isLeft?1:-1:vv.compare(g.segment,x.segment))}static comparePoints(g,x){return g.x.isLessThan(x.x)?-1:g.x.isGreaterThan(x.x)?1:g.y.isLessThan(x.y)?-1:g.y.isGreaterThan(x.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");const x=g.point.events;for(let L=0,V=x.length;L<V;L++){const ee=x[L];this.point.events.push(ee),ee.point=this.point}this.checkForConsuming()}checkForConsuming(){const g=this.point.events.length;for(let x=0;x<g;x++){const L=this.point.events[x];if(L.segment.consumedBy===void 0)for(let V=x+1;V<g;V++){const ee=this.point.events[V];ee.consumedBy===void 0&&L.otherSE.point.events===ee.otherSE.point.events&&L.segment.consume(ee.segment)}}}getAvailableLinkedEvents(){const g=[];for(let x=0,L=this.point.events.length;x<L;x++){const V=this.point.events[x];V!==this&&!V.segment.ringOut&&V.segment.isInResult()&&g.push(V)}return g}getLeftmostComparator(g){const x=new Map,L=V=>{const ee=V.otherSE;x.set(V,{sine:cx(this.point,g.point,ee.point),cosine:mv(this.point,g.point,ee.point)})};return(V,ee)=>{x.has(V)||L(V),x.has(ee)||L(ee);const{sine:_e,cosine:Ce}=x.get(V),{sine:Be,cosine:De}=x.get(ee);return _e.isGreaterThanOrEqualTo(0)&&Be.isGreaterThanOrEqualTo(0)?Ce.isLessThan(De)?1:Ce.isGreaterThan(De)?-1:0:_e.isLessThan(0)&&Be.isLessThan(0)?Ce.isLessThan(De)?-1:Ce.isGreaterThan(De)?1:0:Be.isLessThan(_e)?-1:Be.isGreaterThan(_e)?1:0}}},dx=class Vx{constructor(g){Ra(this,"events");Ra(this,"poly");Ra(this,"_isExteriorRing");Ra(this,"_enclosingRing");this.events=g;for(let x=0,L=g.length;x<L;x++)g[x].segment.ringOut=this;this.poly=null}static factory(g){const x=[];for(let L=0,V=g.length;L<V;L++){const ee=g[L];if(!ee.isInResult()||ee.ringOut)continue;let _e=null,Ce=ee.leftSE,Be=ee.rightSE;const De=[Ce],$e=Ce.point,dt=[];for(;_e=Ce,Ce=Be,De.push(Ce),Ce.point!==$e;)for(;;){const Ke=Ce.getAvailableLinkedEvents();if(Ke.length===0){const Pt=De[0].point,an=De[De.length-1].point;throw new Error(`Unable to complete output ring starting at [${Pt.x}, ${Pt.y}]. Last matching segment found ends at [${an.x}, ${an.y}].`)}if(Ke.length===1){Be=Ke[0].otherSE;break}let pt=null;for(let Pt=0,an=dt.length;Pt<an;Pt++)if(dt[Pt].point===Ce.point){pt=Pt;break}if(pt!==null){const Pt=dt.splice(pt)[0],an=De.splice(Pt.index);an.unshift(an[0].otherSE),x.push(new Vx(an.reverse()));continue}dt.push({index:De.length,point:Ce.point});const $t=Ce.getLeftmostComparator(_e);Be=Ke.sort($t)[0].otherSE;break}x.push(new Vx(De))}return x}getGeom(){let g=this.events[0].point;const x=[g];for(let De=1,$e=this.events.length-1;De<$e;De++){const dt=this.events[De].point,Ke=this.events[De+1].point;bp.orient(dt,g,Ke)!==0&&(x.push(dt),g=dt)}if(x.length===1)return null;const L=x[0],V=x[1];bp.orient(L,g,V)===0&&x.shift(),x.push(x[0]);const ee=this.isExteriorRing()?1:-1,_e=this.isExteriorRing()?0:x.length-1,Ce=this.isExteriorRing()?x.length:-1,Be=[];for(let De=_e;De!=Ce;De+=ee)Be.push([x[De].x.toNumber(),x[De].y.toNumber()]);return Be}isExteriorRing(){if(this._isExteriorRing===void 0){const g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var V,ee;let g=this.events[0];for(let _e=1,Ce=this.events.length;_e<Ce;_e++){const Be=this.events[_e];Jf.compare(g,Be)>0&&(g=Be)}let x=g.segment.prevInResult(),L=x?x.prevInResult():null;for(;;){if(!x)return null;if(!L)return x.ringOut;if(L.ringOut!==x.ringOut)return((V=L.ringOut)==null?void 0:V.enclosingRing())!==x.ringOut?x.ringOut:(ee=x.ringOut)==null?void 0:ee.enclosingRing();x=L.prevInResult(),L=x?x.prevInResult():null}}},Y0=class{constructor(p){Ra(this,"exteriorRing");Ra(this,"interiorRings");this.exteriorRing=p,p.poly=this,this.interiorRings=[]}addInterior(p){this.interiorRings.push(p),p.poly=this}getGeom(){const p=this.exteriorRing.getGeom();if(p===null)return null;const g=[p];for(let x=0,L=this.interiorRings.length;x<L;x++){const V=this.interiorRings[x].getGeom();V!==null&&g.push(V)}return g}},gv=class{constructor(p){Ra(this,"rings");Ra(this,"polys");this.rings=p,this.polys=this._composePolys(p)}getGeom(){const p=[];for(let g=0,x=this.polys.length;g<x;g++){const L=this.polys[g].getGeom();L!==null&&p.push(L)}return p}_composePolys(p){var x;const g=[];for(let L=0,V=p.length;L<V;L++){const ee=p[L];if(!ee.poly)if(ee.isExteriorRing())g.push(new Y0(ee));else{const _e=ee.enclosingRing();_e!=null&&_e.poly||g.push(new Y0(_e)),(x=_e==null?void 0:_e.poly)==null||x.addInterior(ee)}}return g}},hx=class{constructor(p,g=vv.compare){Ra(this,"queue");Ra(this,"tree");Ra(this,"segments");this.queue=p,this.tree=new Xf(g),this.segments=[]}process(p){const g=p.segment,x=[];if(p.consumedBy)return p.isLeft?this.queue.delete(p.otherSE):this.tree.delete(g),x;p.isLeft&&this.tree.add(g);let L=g,V=g;do L=this.tree.lastBefore(L);while(L!=null&&L.consumedBy!=null);do V=this.tree.firstAfter(V);while(V!=null&&V.consumedBy!=null);if(p.isLeft){let ee=null;if(L){const Ce=L.getIntersection(g);if(Ce!==null&&(g.isAnEndpoint(Ce)||(ee=Ce),!L.isAnEndpoint(Ce))){const Be=this._splitSafely(L,Ce);for(let De=0,$e=Be.length;De<$e;De++)x.push(Be[De])}}let _e=null;if(V){const Ce=V.getIntersection(g);if(Ce!==null&&(g.isAnEndpoint(Ce)||(_e=Ce),!V.isAnEndpoint(Ce))){const Be=this._splitSafely(V,Ce);for(let De=0,$e=Be.length;De<$e;De++)x.push(Be[De])}}if(ee!==null||_e!==null){let Ce=null;ee===null?Ce=_e:_e===null?Ce=ee:Ce=Jf.comparePoints(ee,_e)<=0?ee:_e,this.queue.delete(g.rightSE),x.push(g.rightSE);const Be=g.split(Ce);for(let De=0,$e=Be.length;De<$e;De++)x.push(Be[De])}x.length>0?(this.tree.delete(g),x.push(p)):(this.segments.push(g),g.prev=L)}else{if(L&&V){const ee=L.getIntersection(V);if(ee!==null){if(!L.isAnEndpoint(ee)){const _e=this._splitSafely(L,ee);for(let Ce=0,Be=_e.length;Ce<Be;Ce++)x.push(_e[Ce])}if(!V.isAnEndpoint(ee)){const _e=this._splitSafely(V,ee);for(let Ce=0,Be=_e.length;Ce<Be;Ce++)x.push(_e[Ce])}}}this.tree.delete(g)}return x}_splitSafely(p,g){this.tree.delete(p);const x=p.rightSE;this.queue.delete(x);const L=p.split(g);return L.push(x),p.consumedBy===void 0&&this.tree.add(p),L}},fx=class{constructor(){Ra(this,"type");Ra(this,"numMultiPolys")}run(p,g,x){__.type=p;const L=[new Tm(g,!0)];for(let De=0,$e=x.length;De<$e;De++)L.push(new Tm(x[De],!1));if(__.numMultiPolys=L.length,__.type==="difference"){const De=L[0];let $e=1;for(;$e<L.length;)My(L[$e].bbox,De.bbox)!==null?$e++:L.splice($e,1)}if(__.type==="intersection")for(let De=0,$e=L.length;De<$e;De++){const dt=L[De];for(let Ke=De+1,pt=L.length;Ke<pt;Ke++)if(My(dt.bbox,L[Ke].bbox)===null)return[]}const V=new Xf(Jf.compare);for(let De=0,$e=L.length;De<$e;De++){const dt=L[De].getSweepEvents();for(let Ke=0,pt=dt.length;Ke<pt;Ke++)V.add(dt[Ke])}const ee=new hx(V);let _e=null;for(V.size!=0&&(_e=V.first(),V.delete(_e));_e;){const De=ee.process(_e);for(let $e=0,dt=De.length;$e<dt;$e++){const Ke=De[$e];Ke.consumedBy===void 0&&V.add(Ke)}V.size!=0?(_e=V.first(),V.delete(_e)):_e=null}bp.reset();const Ce=dx.factory(ee.segments);return new gv(Ce).getGeom()}},__=new fx,g_=__,px=0,vv=class N1{constructor(g,x,L,V){Ra(this,"id");Ra(this,"leftSE");Ra(this,"rightSE");Ra(this,"rings");Ra(this,"windings");Ra(this,"ringOut");Ra(this,"consumedBy");Ra(this,"prev");Ra(this,"_prevInResult");Ra(this,"_beforeState");Ra(this,"_afterState");Ra(this,"_isInResult");this.id=++px,this.leftSE=g,g.segment=this,g.otherSE=x,this.rightSE=x,x.segment=this,x.otherSE=g,this.rings=L,this.windings=V}static compare(g,x){const L=g.leftSE.point.x,V=x.leftSE.point.x,ee=g.rightSE.point.x,_e=x.rightSE.point.x;if(_e.isLessThan(L))return 1;if(ee.isLessThan(V))return-1;const Ce=g.leftSE.point.y,Be=x.leftSE.point.y,De=g.rightSE.point.y,$e=x.rightSE.point.y;if(L.isLessThan(V)){if(Be.isLessThan(Ce)&&Be.isLessThan(De))return 1;if(Be.isGreaterThan(Ce)&&Be.isGreaterThan(De))return-1;const dt=g.comparePoint(x.leftSE.point);if(dt<0)return 1;if(dt>0)return-1;const Ke=x.comparePoint(g.rightSE.point);return Ke!==0?Ke:-1}if(L.isGreaterThan(V)){if(Ce.isLessThan(Be)&&Ce.isLessThan($e))return-1;if(Ce.isGreaterThan(Be)&&Ce.isGreaterThan($e))return 1;const dt=x.comparePoint(g.leftSE.point);if(dt!==0)return dt;const Ke=g.comparePoint(x.rightSE.point);return Ke<0?1:Ke>0?-1:1}if(Ce.isLessThan(Be))return-1;if(Ce.isGreaterThan(Be))return 1;if(ee.isLessThan(_e)){const dt=x.comparePoint(g.rightSE.point);if(dt!==0)return dt}if(ee.isGreaterThan(_e)){const dt=g.comparePoint(x.rightSE.point);if(dt<0)return 1;if(dt>0)return-1}if(!ee.eq(_e)){const dt=De.minus(Ce),Ke=ee.minus(L),pt=$e.minus(Be),$t=_e.minus(V);if(dt.isGreaterThan(Ke)&&pt.isLessThan($t))return 1;if(dt.isLessThan(Ke)&&pt.isGreaterThan($t))return-1}return ee.isGreaterThan(_e)?1:ee.isLessThan(_e)||De.isLessThan($e)?-1:De.isGreaterThan($e)?1:g.id<x.id?-1:g.id>x.id?1:0}static fromRing(g,x,L){let V,ee,_e;const Ce=Jf.comparePoints(g,x);if(Ce<0)V=g,ee=x,_e=1;else if(Ce>0)V=x,ee=g,_e=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);const Be=new Jf(V,!0),De=new Jf(ee,!1);return new N1(Be,De,[L],[_e])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const g=this.leftSE.point.y,x=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(x)?g:x},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(x)?g:x}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return bp.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){const x=this.bbox(),L=g.bbox(),V=My(x,L);if(V===null)return null;const ee=this.leftSE.point,_e=this.rightSE.point,Ce=g.leftSE.point,Be=g.rightSE.point,De=m_(x,Ce)&&this.comparePoint(Ce)===0,$e=m_(L,ee)&&g.comparePoint(ee)===0,dt=m_(x,Be)&&this.comparePoint(Be)===0,Ke=m_(L,_e)&&g.comparePoint(_e)===0;if($e&&De)return Ke&&!dt?_e:!Ke&&dt?Be:null;if($e)return dt&&ee.x.eq(Be.x)&&ee.y.eq(Be.y)?null:ee;if(De)return Ke&&_e.x.eq(Ce.x)&&_e.y.eq(Ce.y)?null:Ce;if(Ke&&dt)return null;if(Ke)return _e;if(dt)return Be;const pt=_v(ee,this.vector(),Ce,g.vector());return pt===null||!m_(V,pt)?null:bp.snap(pt)}split(g){const x=[],L=g.events!==void 0,V=new Jf(g,!0),ee=new Jf(g,!1),_e=this.rightSE;this.replaceRightSE(ee),x.push(ee),x.push(V);const Ce=new N1(V,_e,this.rings.slice(),this.windings.slice());return Jf.comparePoints(Ce.leftSE.point,Ce.rightSE.point)>0&&Ce.swapEvents(),Jf.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),L&&(V.checkForConsuming(),ee.checkForConsuming()),x}swapEvents(){const g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let x=0,L=this.windings.length;x<L;x++)this.windings[x]*=-1}consume(g){let x=this,L=g;for(;x.consumedBy;)x=x.consumedBy;for(;L.consumedBy;)L=L.consumedBy;const V=N1.compare(x,L);if(V!==0){if(V>0){const ee=x;x=L,L=ee}if(x.prev===L){const ee=x;x=L,L=ee}for(let ee=0,_e=L.rings.length;ee<_e;ee++){const Ce=L.rings[ee],Be=L.windings[ee],De=x.rings.indexOf(Ce);De===-1?(x.rings.push(Ce),x.windings.push(Be)):x.windings[De]+=Be}L.rings=null,L.windings=null,L.consumedBy=x,L.leftSE.consumedBy=x.leftSE,L.rightSE.consumedBy=x.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};const x=this._afterState.rings,L=this._afterState.windings,V=this._afterState.multiPolys;for(let Ce=0,Be=this.rings.length;Ce<Be;Ce++){const De=this.rings[Ce],$e=this.windings[Ce],dt=x.indexOf(De);dt===-1?(x.push(De),L.push($e)):L[dt]+=$e}const ee=[],_e=[];for(let Ce=0,Be=x.length;Ce<Be;Ce++){if(L[Ce]===0)continue;const De=x[Ce],$e=De.poly;if(_e.indexOf($e)===-1)if(De.isExterior)ee.push($e);else{_e.indexOf($e)===-1&&_e.push($e);const dt=ee.indexOf(De.poly);dt!==-1&&ee.splice(dt,1)}}for(let Ce=0,Be=ee.length;Ce<Be;Ce++){const De=ee[Ce].multiPoly;V.indexOf(De)===-1&&V.push(De)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const g=this.beforeState().multiPolys,x=this.afterState().multiPolys;switch(g_.type){case"union":{const L=g.length===0,V=x.length===0;this._isInResult=L!==V;break}case"intersection":{let L,V;g.length<x.length?(L=g.length,V=x.length):(L=x.length,V=g.length),this._isInResult=V===g_.numMultiPolys&&L<V;break}case"xor":{const L=Math.abs(g.length-x.length);this._isInResult=L%2===1;break}case"difference":{const L=V=>V.length===1&&V[0].isSubject;this._isInResult=L(g)!==L(x);break}}return this._isInResult}},X0=class{constructor(p,g,x){Ra(this,"poly");Ra(this,"isExterior");Ra(this,"segments");Ra(this,"bbox");if(!Array.isArray(p)||p.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=x,this.segments=[],typeof p[0][0]!="number"||typeof p[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const L=bp.snap({x:new Yf(p[0][0]),y:new Yf(p[0][1])});this.bbox={ll:{x:L.x,y:L.y},ur:{x:L.x,y:L.y}};let V=L;for(let ee=1,_e=p.length;ee<_e;ee++){if(typeof p[ee][0]!="number"||typeof p[ee][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Ce=bp.snap({x:new Yf(p[ee][0]),y:new Yf(p[ee][1])});Ce.x.eq(V.x)&&Ce.y.eq(V.y)||(this.segments.push(vv.fromRing(V,Ce,this)),Ce.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=Ce.x),Ce.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=Ce.y),Ce.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=Ce.x),Ce.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=Ce.y),V=Ce)}(!L.x.eq(V.x)||!L.y.eq(V.y))&&this.segments.push(vv.fromRing(V,L,this))}getSweepEvents(){const p=[];for(let g=0,x=this.segments.length;g<x;g++){const L=this.segments[g];p.push(L.leftSE),p.push(L.rightSE)}return p}},mx=class{constructor(p,g){Ra(this,"multiPoly");Ra(this,"exteriorRing");Ra(this,"interiorRings");Ra(this,"bbox");if(!Array.isArray(p))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new X0(p[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let x=1,L=p.length;x<L;x++){const V=new X0(p[x],this,!1);V.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=V.bbox.ll.x),V.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=V.bbox.ll.y),V.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=V.bbox.ur.x),V.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=V.bbox.ur.y),this.interiorRings.push(V)}this.multiPoly=g}getSweepEvents(){const p=this.exteriorRing.getSweepEvents();for(let g=0,x=this.interiorRings.length;g<x;g++){const L=this.interiorRings[g].getSweepEvents();for(let V=0,ee=L.length;V<ee;V++)p.push(L[V])}return p}},Tm=class{constructor(p,g){Ra(this,"isSubject");Ra(this,"polys");Ra(this,"bbox");if(!Array.isArray(p))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof p[0][0][0]=="number"&&(p=[p])}catch(x){}this.polys=[],this.bbox={ll:{x:new Yf(Number.POSITIVE_INFINITY),y:new Yf(Number.POSITIVE_INFINITY)},ur:{x:new Yf(Number.NEGATIVE_INFINITY),y:new Yf(Number.NEGATIVE_INFINITY)}};for(let x=0,L=p.length;x<L;x++){const V=new mx(p[x],this);V.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=V.bbox.ll.x),V.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=V.bbox.ll.y),V.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=V.bbox.ur.x),V.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=V.bbox.ur.y),this.polys.push(V)}this.isSubject=g}getSweepEvents(){const p=[];for(let g=0,x=this.polys.length;g<x;g++){const L=this.polys[g].getSweepEvents();for(let V=0,ee=L.length;V<ee;V++)p.push(L[V])}return p}},_g=(p,...g)=>g_.run("union",p,g),_x=(p,...g)=>g_.run("intersection",p,g),J0=(p,...g)=>g_.run("xor",p,g),Q0=(p,...g)=>g_.run("difference",p,g),gx=bp.set;function q0(p,g={}){const x=[];if(xl(p,V=>{x.push(V.coordinates)}),x.length<2)throw new Error("Must specify at least 2 geometries");const L=_x(x[0],...x.slice(1));return L.length===0?null:L.length===1?Qt(L[0],g.properties):Pr(L,g.properties)}var vx=null;function e1(p,g={}){const x=[];if(xl(p,V=>{x.push(V.coordinates)}),x.length<2)throw new Error("Must have at least 2 geometries");const L=_g(x[0],...x.slice(1));return L.length===0?null:L.length===1?Qt(L[0],g.properties):Pr(L,g.properties)}var yx=null;function t1(p){const g=[];if(xl(p,V=>{g.push(V.coordinates)}),g.length<2)throw new Error("Must have at least two features");const x=p.features[0].properties||{},L=Q0(g[0],...g.slice(1));return L.length===0?null:L.length===1?Qt(L[0],x):Pr(L,x)}var xx=null;function n1(p,g={}){const x=Number(p[0]),L=Number(p[1]),V=Number(p[2]),ee=Number(p[3]);if(p.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const _e=[x,L];return Qt([[_e,[V,L],[V,ee],[x,ee],_e]],g.properties,{bbox:p,id:g.id})}var Cy=null;function r1(p,g={}){let x=0,L=0,V=0;return Pa(p,function(ee){x+=ee[0],L+=ee[1],V++},!0),kt([x/V,L/V],g.properties)}var i1=null;function zd(p,g,x={}){const L=Li(p),V=bo(g);for(let ee=0;ee<V.length-1;ee++){let _e=!1;if(x.ignoreEndVertices&&(ee===0&&(_e="start"),ee===V.length-2&&(_e="end"),ee===0&&ee+1===V.length-1&&(_e="both")),o1(V[ee],V[ee+1],L,_e,typeof x.epsilon=="undefined"?null:x.epsilon))return!0}return!1}function o1(p,g,x,L,V){const ee=x[0],_e=x[1],Ce=p[0],Be=p[1],De=g[0],$e=g[1],dt=x[0]-Ce,Ke=x[1]-Be,pt=De-Ce,$t=$e-Be,Pt=dt*$t-Ke*pt;if(V!==null){if(Math.abs(Pt)>V)return!1}else if(Pt!==0)return!1;if(Math.abs(pt)===Math.abs($t)&&Math.abs(pt)===0)return L?!1:x[0]===p[0]&&x[1]===p[1];if(L){if(L==="start")return Math.abs(pt)>=Math.abs($t)?pt>0?Ce<ee&&ee<=De:De<=ee&&ee<Ce:$t>0?Be<_e&&_e<=$e:$e<=_e&&_e<Be;if(L==="end")return Math.abs(pt)>=Math.abs($t)?pt>0?Ce<=ee&&ee<De:De<ee&&ee<=Ce:$t>0?Be<=_e&&_e<$e:$e<_e&&_e<=Be;if(L==="both")return Math.abs(pt)>=Math.abs($t)?pt>0?Ce<ee&&ee<De:De<ee&&ee<Ce:$t>0?Be<_e&&_e<$e:$e<_e&&_e<Be}else return Math.abs(pt)>=Math.abs($t)?pt>0?Ce<=ee&&ee<=De:De<=ee&&ee<=Ce:$t>0?Be<=_e&&_e<=$e:$e<=_e&&_e<=Be;return!1}var bx=null;const Hl=11102230246251565e-32,Gc=134217729,a1=(3+8*Hl)*Hl;function v_(p,g,x,L,V){let ee,_e,Ce,Be,De=g[0],$e=L[0],dt=0,Ke=0;$e>De==$e>-De?(ee=De,De=g[++dt]):(ee=$e,$e=L[++Ke]);let pt=0;if(dt<p&&Ke<x)for($e>De==$e>-De?(_e=De+ee,Ce=ee-(_e-De),De=g[++dt]):(_e=$e+ee,Ce=ee-(_e-$e),$e=L[++Ke]),ee=_e,Ce!==0&&(V[pt++]=Ce);dt<p&&Ke<x;)$e>De==$e>-De?(_e=ee+De,Be=_e-ee,Ce=ee-(_e-Be)+(De-Be),De=g[++dt]):(_e=ee+$e,Be=_e-ee,Ce=ee-(_e-Be)+($e-Be),$e=L[++Ke]),ee=_e,Ce!==0&&(V[pt++]=Ce);for(;dt<p;)_e=ee+De,Be=_e-ee,Ce=ee-(_e-Be)+(De-Be),De=g[++dt],ee=_e,Ce!==0&&(V[pt++]=Ce);for(;Ke<x;)_e=ee+$e,Be=_e-ee,Ce=ee-(_e-Be)+($e-Be),$e=L[++Ke],ee=_e,Ce!==0&&(V[pt++]=Ce);return(ee!==0||pt===0)&&(V[pt++]=ee),pt}function wx(p,g,x,L,V,ee,_e,Ce){return v_(v_(p,g,x,L,_e),_e,V,ee,Ce)}function Im(p,g,x,L){let V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t;$e=Gc*x,pt=$e-($e-x),$t=x-pt;let Pt=g[0];V=Pt*x,$e=Gc*Pt,dt=$e-($e-Pt),Ke=Pt-dt,_e=Ke*$t-(V-dt*pt-Ke*pt-dt*$t);let an=0;_e!==0&&(L[an++]=_e);for(let An=1;An<p;An++)Pt=g[An],Ce=Pt*x,$e=Gc*Pt,dt=$e-($e-Pt),Ke=Pt-dt,Be=Ke*$t-(Ce-dt*pt-Ke*pt-dt*$t),ee=V+Be,De=ee-V,_e=V-(ee-De)+(Be-De),_e!==0&&(L[an++]=_e),V=Ce+ee,_e=ee-(V-Ce),_e!==0&&(L[an++]=_e);return(V!==0||an===0)&&(L[an++]=V),an}function rb(p,g){for(let x=0;x<p;x++)g[x]=-g[x];return p}function Ex(p,g){let x=g[0];for(let L=1;L<p;L++)x+=g[L];return x}function so(p){return new Float64Array(p)}const yv=(3+16*Hl)*Hl,Sx=(2+12*Hl)*Hl,Tx=(9+64*Hl)*Hl*Hl,y_=so(4),s1=so(8),l1=so(12),u1=so(16),Yd=so(4);function Ix(p,g,x,L,V,ee,_e){let Ce,Be,De,$e,dt,Ke,pt,$t,Pt,an,An,un,yn,pr,ur,br,sr,ht;const Rt=p-V,Jt=x-V,On=g-ee,bn=L-ee;pr=Rt*bn,Ke=Gc*Rt,pt=Ke-(Ke-Rt),$t=Rt-pt,Ke=Gc*bn,Pt=Ke-(Ke-bn),an=bn-Pt,ur=$t*an-(pr-pt*Pt-$t*Pt-pt*an),br=On*Jt,Ke=Gc*On,pt=Ke-(Ke-On),$t=On-pt,Ke=Gc*Jt,Pt=Ke-(Ke-Jt),an=Jt-Pt,sr=$t*an-(br-pt*Pt-$t*Pt-pt*an),An=ur-sr,dt=ur-An,y_[0]=ur-(An+dt)+(dt-sr),un=pr+An,dt=un-pr,yn=pr-(un-dt)+(An-dt),An=yn-br,dt=yn-An,y_[1]=yn-(An+dt)+(dt-br),ht=un+An,dt=ht-un,y_[2]=un-(ht-dt)+(An-dt),y_[3]=ht;let kn=Ex(4,y_),wt=Sx*_e;if(kn>=wt||-kn>=wt||(dt=p-Rt,Ce=p-(Rt+dt)+(dt-V),dt=x-Jt,De=x-(Jt+dt)+(dt-V),dt=g-On,Be=g-(On+dt)+(dt-ee),dt=L-bn,$e=L-(bn+dt)+(dt-ee),Ce===0&&Be===0&&De===0&&$e===0)||(wt=Tx*_e+a1*Math.abs(kn),kn+=Rt*$e+bn*Ce-(On*De+Jt*Be),kn>=wt||-kn>=wt))return kn;pr=Ce*bn,Ke=Gc*Ce,pt=Ke-(Ke-Ce),$t=Ce-pt,Ke=Gc*bn,Pt=Ke-(Ke-bn),an=bn-Pt,ur=$t*an-(pr-pt*Pt-$t*Pt-pt*an),br=Be*Jt,Ke=Gc*Be,pt=Ke-(Ke-Be),$t=Be-pt,Ke=Gc*Jt,Pt=Ke-(Ke-Jt),an=Jt-Pt,sr=$t*an-(br-pt*Pt-$t*Pt-pt*an),An=ur-sr,dt=ur-An,Yd[0]=ur-(An+dt)+(dt-sr),un=pr+An,dt=un-pr,yn=pr-(un-dt)+(An-dt),An=yn-br,dt=yn-An,Yd[1]=yn-(An+dt)+(dt-br),ht=un+An,dt=ht-un,Yd[2]=un-(ht-dt)+(An-dt),Yd[3]=ht;const Vt=v_(4,y_,4,Yd,s1);pr=Rt*$e,Ke=Gc*Rt,pt=Ke-(Ke-Rt),$t=Rt-pt,Ke=Gc*$e,Pt=Ke-(Ke-$e),an=$e-Pt,ur=$t*an-(pr-pt*Pt-$t*Pt-pt*an),br=On*De,Ke=Gc*On,pt=Ke-(Ke-On),$t=On-pt,Ke=Gc*De,Pt=Ke-(Ke-De),an=De-Pt,sr=$t*an-(br-pt*Pt-$t*Pt-pt*an),An=ur-sr,dt=ur-An,Yd[0]=ur-(An+dt)+(dt-sr),un=pr+An,dt=un-pr,yn=pr-(un-dt)+(An-dt),An=yn-br,dt=yn-An,Yd[1]=yn-(An+dt)+(dt-br),ht=un+An,dt=ht-un,Yd[2]=un-(ht-dt)+(An-dt),Yd[3]=ht;const tn=v_(Vt,s1,4,Yd,l1);pr=Ce*$e,Ke=Gc*Ce,pt=Ke-(Ke-Ce),$t=Ce-pt,Ke=Gc*$e,Pt=Ke-(Ke-$e),an=$e-Pt,ur=$t*an-(pr-pt*Pt-$t*Pt-pt*an),br=Be*De,Ke=Gc*Be,pt=Ke-(Ke-Be),$t=Be-pt,Ke=Gc*De,Pt=Ke-(Ke-De),an=De-Pt,sr=$t*an-(br-pt*Pt-$t*Pt-pt*an),An=ur-sr,dt=ur-An,Yd[0]=ur-(An+dt)+(dt-sr),un=pr+An,dt=un-pr,yn=pr-(un-dt)+(An-dt),An=yn-br,dt=yn-An,Yd[1]=yn-(An+dt)+(dt-br),ht=un+An,dt=ht-un,Yd[2]=un-(ht-dt)+(An-dt),Yd[3]=ht;const Dn=v_(tn,l1,4,Yd,u1);return u1[Dn-1]}function Mx(p,g,x,L,V,ee){const _e=(g-ee)*(x-V),Ce=(p-V)*(L-ee),Be=_e-Ce,De=Math.abs(_e+Ce);return Math.abs(Be)>=yv*De?Be:-Ix(p,g,x,L,V,ee,De)}function ib(p,g,x,L,V,ee){return(g-ee)*(x-V)-(p-V)*(L-ee)}const Cx=(7+56*Hl)*Hl,Lh=(3+28*Hl)*Hl,gg=(26+288*Hl)*Hl*Hl,x_=so(4),Mm=so(4),Cm=so(4),c1=so(4),Ay=so(4),Py=so(4),Oy=so(4),d1=so(4),h1=so(4),xv=so(8),Cu=so(8),Yp=so(8),ph=so(4),Xp=so(8),Ry=so(8),mh=so(8),b_=so(12);let Jp=so(192),Dh=so(192);function kh(p,g,x){p=sum(p,Jp,g,x,Dh);const L=Jp;return Jp=Dh,Dh=L,p}function Ly(p,g,x,L,V,ee,_e,Ce){let Be,De,$e,dt,Ke,pt,$t,Pt,an,An,un,yn,pr,ur,br,sr;return p===0?g===0?(_e[0]=0,Ce[0]=0,1):(sr=-g,un=sr*x,De=splitter*sr,$e=De-(De-sr),dt=sr-$e,De=splitter*x,Ke=De-(De-x),pt=x-Ke,_e[0]=dt*pt-(un-$e*Ke-dt*Ke-$e*pt),_e[1]=un,un=g*V,De=splitter*g,$e=De-(De-g),dt=g-$e,De=splitter*V,Ke=De-(De-V),pt=V-Ke,Ce[0]=dt*pt-(un-$e*Ke-dt*Ke-$e*pt),Ce[1]=un,2):g===0?(un=p*L,De=splitter*p,$e=De-(De-p),dt=p-$e,De=splitter*L,Ke=De-(De-L),pt=L-Ke,_e[0]=dt*pt-(un-$e*Ke-dt*Ke-$e*pt),_e[1]=un,sr=-p,un=sr*ee,De=splitter*sr,$e=De-(De-sr),dt=sr-$e,De=splitter*ee,Ke=De-(De-ee),pt=ee-Ke,Ce[0]=dt*pt-(un-$e*Ke-dt*Ke-$e*pt),Ce[1]=un,2):(un=p*L,De=splitter*p,$e=De-(De-p),dt=p-$e,De=splitter*L,Ke=De-(De-L),pt=L-Ke,yn=dt*pt-(un-$e*Ke-dt*Ke-$e*pt),pr=g*x,De=splitter*g,$e=De-(De-g),dt=g-$e,De=splitter*x,Ke=De-(De-x),pt=x-Ke,ur=dt*pt-(pr-$e*Ke-dt*Ke-$e*pt),$t=yn-ur,Be=yn-$t,_e[0]=yn-($t+Be)+(Be-ur),Pt=un+$t,Be=Pt-un,An=un-(Pt-Be)+($t-Be),$t=An-pr,Be=An-$t,_e[1]=An-($t+Be)+(Be-pr),br=Pt+$t,Be=br-Pt,_e[2]=Pt-(br-Be)+($t-Be),_e[3]=br,un=g*V,De=splitter*g,$e=De-(De-g),dt=g-$e,De=splitter*V,Ke=De-(De-V),pt=V-Ke,yn=dt*pt-(un-$e*Ke-dt*Ke-$e*pt),pr=p*ee,De=splitter*p,$e=De-(De-p),dt=p-$e,De=splitter*ee,Ke=De-(De-ee),pt=ee-Ke,ur=dt*pt-(pr-$e*Ke-dt*Ke-$e*pt),$t=yn-ur,Be=yn-$t,Ce[0]=yn-($t+Be)+(Be-ur),Pt=un+$t,Be=Pt-un,An=un-(Pt-Be)+($t-Be),$t=An-pr,Be=An-$t,Ce[1]=An-($t+Be)+(Be-pr),br=Pt+$t,Be=br-Pt,Ce[2]=Pt-(br-Be)+($t-Be),Ce[3]=br,4)}function Fd(p,g,x,L,V){let ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t,Pt,an,An;return Pt=g*x,_e=splitter*g,Ce=_e-(_e-g),Be=g-Ce,_e=splitter*x,De=_e-(_e-x),$e=x-De,an=Be*$e-(Pt-Ce*De-Be*De-Ce*$e),_e=splitter*L,De=_e-(_e-L),$e=L-De,dt=an*L,_e=splitter*an,Ce=_e-(_e-an),Be=an-Ce,ph[0]=Be*$e-(dt-Ce*De-Be*De-Ce*$e),Ke=Pt*L,_e=splitter*Pt,Ce=_e-(_e-Pt),Be=Pt-Ce,$t=Be*$e-(Ke-Ce*De-Be*De-Ce*$e),pt=dt+$t,ee=pt-dt,ph[1]=dt-(pt-ee)+($t-ee),An=Ke+pt,ph[2]=pt-(An-Ke),ph[3]=An,p=kh(p,4,ph),V!==0&&(_e=splitter*V,De=_e-(_e-V),$e=V-De,dt=an*V,_e=splitter*an,Ce=_e-(_e-an),Be=an-Ce,ph[0]=Be*$e-(dt-Ce*De-Be*De-Ce*$e),Ke=Pt*V,_e=splitter*Pt,Ce=_e-(_e-Pt),Be=Pt-Ce,$t=Be*$e-(Ke-Ce*De-Be*De-Ce*$e),pt=dt+$t,ee=pt-dt,ph[1]=dt-(pt-ee)+($t-ee),An=Ke+pt,ph[2]=pt-(An-Ke),ph[3]=An,p=kh(p,4,ph)),p}function Ax(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke){let pt,$t,Pt,an,An,un,yn,pr,ur,br,sr,ht,Rt,Jt,On,bn,kn,wt,Vt,tn,Dn,Wt,ln,wn,xr;const jr=p-De,Ar=L-De,Vr=_e-De,ai=g-$e,ki=V-$e,Oi=Ce-$e,co=x-dt,_o=ee-dt,Fo=Be-dt;Dn=Ar*Oi,ht=splitter*Ar,Rt=ht-(ht-Ar),Jt=Ar-Rt,ht=splitter*Oi,On=ht-(ht-Oi),bn=Oi-On,Wt=Jt*bn-(Dn-Rt*On-Jt*On-Rt*bn),ln=Vr*ki,ht=splitter*Vr,Rt=ht-(ht-Vr),Jt=Vr-Rt,ht=splitter*ki,On=ht-(ht-ki),bn=ki-On,wn=Jt*bn-(ln-Rt*On-Jt*On-Rt*bn),kn=Wt-wn,sr=Wt-kn,x_[0]=Wt-(kn+sr)+(sr-wn),wt=Dn+kn,sr=wt-Dn,tn=Dn-(wt-sr)+(kn-sr),kn=tn-ln,sr=tn-kn,x_[1]=tn-(kn+sr)+(sr-ln),xr=wt+kn,sr=xr-wt,x_[2]=wt-(xr-sr)+(kn-sr),x_[3]=xr,Dn=Vr*ai,ht=splitter*Vr,Rt=ht-(ht-Vr),Jt=Vr-Rt,ht=splitter*ai,On=ht-(ht-ai),bn=ai-On,Wt=Jt*bn-(Dn-Rt*On-Jt*On-Rt*bn),ln=jr*Oi,ht=splitter*jr,Rt=ht-(ht-jr),Jt=jr-Rt,ht=splitter*Oi,On=ht-(ht-Oi),bn=Oi-On,wn=Jt*bn-(ln-Rt*On-Jt*On-Rt*bn),kn=Wt-wn,sr=Wt-kn,Mm[0]=Wt-(kn+sr)+(sr-wn),wt=Dn+kn,sr=wt-Dn,tn=Dn-(wt-sr)+(kn-sr),kn=tn-ln,sr=tn-kn,Mm[1]=tn-(kn+sr)+(sr-ln),xr=wt+kn,sr=xr-wt,Mm[2]=wt-(xr-sr)+(kn-sr),Mm[3]=xr,Dn=jr*ki,ht=splitter*jr,Rt=ht-(ht-jr),Jt=jr-Rt,ht=splitter*ki,On=ht-(ht-ki),bn=ki-On,Wt=Jt*bn-(Dn-Rt*On-Jt*On-Rt*bn),ln=Ar*ai,ht=splitter*Ar,Rt=ht-(ht-Ar),Jt=Ar-Rt,ht=splitter*ai,On=ht-(ht-ai),bn=ai-On,wn=Jt*bn-(ln-Rt*On-Jt*On-Rt*bn),kn=Wt-wn,sr=Wt-kn,Cm[0]=Wt-(kn+sr)+(sr-wn),wt=Dn+kn,sr=wt-Dn,tn=Dn-(wt-sr)+(kn-sr),kn=tn-ln,sr=tn-kn,Cm[1]=tn-(kn+sr)+(sr-ln),xr=wt+kn,sr=xr-wt,Cm[2]=wt-(xr-sr)+(kn-sr),Cm[3]=xr,pt=sum(sum(scale(4,x_,co,Xp),Xp,scale(4,Mm,_o,Ry),Ry,mh),mh,scale(4,Cm,Fo,Xp),Xp,Jp);let Mi=estimate(pt,Jp),eo=Lh*Ke;if(Mi>=eo||-Mi>=eo||(sr=p-jr,$t=p-(jr+sr)+(sr-De),sr=L-Ar,Pt=L-(Ar+sr)+(sr-De),sr=_e-Vr,an=_e-(Vr+sr)+(sr-De),sr=g-ai,An=g-(ai+sr)+(sr-$e),sr=V-ki,un=V-(ki+sr)+(sr-$e),sr=Ce-Oi,yn=Ce-(Oi+sr)+(sr-$e),sr=x-co,pr=x-(co+sr)+(sr-dt),sr=ee-_o,ur=ee-(_o+sr)+(sr-dt),sr=Be-Fo,br=Be-(Fo+sr)+(sr-dt),$t===0&&Pt===0&&an===0&&An===0&&un===0&&yn===0&&pr===0&&ur===0&&br===0)||(eo=gg*Ke+resulterrbound*Math.abs(Mi),Mi+=co*(Ar*yn+Oi*Pt-(ki*an+Vr*un))+pr*(Ar*Oi-ki*Vr)+_o*(Vr*An+ai*an-(Oi*$t+jr*yn))+ur*(Vr*ai-Oi*jr)+Fo*(jr*un+ki*$t-(ai*Pt+Ar*An))+br*(jr*ki-ai*Ar),Mi>=eo||-Mi>=eo))return Mi;const Bo=Ly($t,An,Ar,ki,Vr,Oi,c1,Ay),$a=Ly(Pt,un,Vr,Oi,jr,ai,Py,Oy),Ca=Ly(an,yn,jr,ai,Ar,ki,d1,h1),ls=sum($a,Py,Ca,h1,xv);pt=kh(pt,scale(ls,xv,co,mh),mh);const va=sum(Ca,d1,Bo,Ay,Cu);pt=kh(pt,scale(va,Cu,_o,mh),mh);const Ps=sum(Bo,c1,$a,Oy,Yp);return pt=kh(pt,scale(Ps,Yp,Fo,mh),mh),pr!==0&&(pt=kh(pt,scale(4,x_,pr,b_),b_),pt=kh(pt,scale(ls,xv,pr,mh),mh)),ur!==0&&(pt=kh(pt,scale(4,Mm,ur,b_),b_),pt=kh(pt,scale(va,Cu,ur,mh),mh)),br!==0&&(pt=kh(pt,scale(4,Cm,br,b_),b_),pt=kh(pt,scale(Ps,Yp,br,mh),mh)),$t!==0&&(un!==0&&(pt=Fd(pt,$t,un,Fo,br)),yn!==0&&(pt=Fd(pt,-$t,yn,_o,ur))),Pt!==0&&(yn!==0&&(pt=Fd(pt,Pt,yn,co,pr)),An!==0&&(pt=Fd(pt,-Pt,An,Fo,br))),an!==0&&(An!==0&&(pt=Fd(pt,an,An,_o,ur)),un!==0&&(pt=Fd(pt,-an,un,co,pr))),Jp[pt-1]}function ob(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt){const Ke=p-De,pt=L-De,$t=_e-De,Pt=g-$e,an=V-$e,An=Ce-$e,un=x-dt,yn=ee-dt,pr=Be-dt,ur=pt*An,br=$t*an,sr=$t*Pt,ht=Ke*An,Rt=Ke*an,Jt=pt*Pt,On=un*(ur-br)+yn*(sr-ht)+pr*(Rt-Jt),bn=(Math.abs(ur)+Math.abs(br))*Math.abs(un)+(Math.abs(sr)+Math.abs(ht))*Math.abs(yn)+(Math.abs(Rt)+Math.abs(Jt))*Math.abs(pr),kn=Cx*bn;return On>kn||-On>kn?On:Ax(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,bn)}function ab(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt){const Ke=p-De,pt=L-De,$t=_e-De,Pt=g-$e,an=V-$e,An=Ce-$e,un=x-dt,yn=ee-dt,pr=Be-dt;return Ke*(an*pr-yn*An)+pt*(An*un-pr*Pt)+$t*(Pt*yn-un*an)}const Qh=(10+96*Hl)*Hl,Px=(4+48*Hl)*Hl,f1=(44+576*Hl)*Hl*Hl,Qp=so(4),Qf=so(4),qf=so(4),ep=so(4),Pf=so(4),_h=so(4),Md=so(4),Hu=so(4),qp=so(8),vg=so(8),em=so(8),bv=so(8),wv=so(8),w_=so(8),Ev=so(8),tm=so(8),yg=so(8),wp=so(4),Am=so(4),tp=so(4),fa=so(8),Ka=so(16),Kl=so(16),Yl=so(16),Sl=so(32),Ep=so(32),ic=so(48),Xd=so(64);let qh=so(1152),xg=so(1152);function oc(p,g,x){p=sum(p,qh,g,x,xg);const L=qh;return qh=xg,xg=L,p}function p1(p,g,x,L,V,ee,_e,Ce,Be){let De,$e,dt,Ke,pt,$t,Pt,an,An,un,yn,pr,ur,br,sr,ht,Rt,Jt,On,bn,kn,wt,Vt,tn,Dn,Wt,ln,wn,xr,jr,Ar,Vr,ai,ki,Oi;const co=p-_e,_o=x-_e,Fo=V-_e,Mi=g-Ce,eo=L-Ce,Bo=ee-Ce;Ar=_o*Bo,Vt=splitter*_o,tn=Vt-(Vt-_o),Dn=_o-tn,Vt=splitter*Bo,Wt=Vt-(Vt-Bo),ln=Bo-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=Fo*eo,Vt=splitter*Fo,tn=Vt-(Vt-Fo),Dn=Fo-tn,Vt=splitter*eo,Wt=Vt-(Vt-eo),ln=eo-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr-ki,wt=Vr-wn,Qp[0]=Vr-(wn+wt)+(wt-ki),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr-ai,wt=jr-wn,Qp[1]=jr-(wn+wt)+(wt-ai),Oi=xr+wn,wt=Oi-xr,Qp[2]=xr-(Oi-wt)+(wn-wt),Qp[3]=Oi,Ar=Fo*Mi,Vt=splitter*Fo,tn=Vt-(Vt-Fo),Dn=Fo-tn,Vt=splitter*Mi,Wt=Vt-(Vt-Mi),ln=Mi-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=co*Bo,Vt=splitter*co,tn=Vt-(Vt-co),Dn=co-tn,Vt=splitter*Bo,Wt=Vt-(Vt-Bo),ln=Bo-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr-ki,wt=Vr-wn,Qf[0]=Vr-(wn+wt)+(wt-ki),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr-ai,wt=jr-wn,Qf[1]=jr-(wn+wt)+(wt-ai),Oi=xr+wn,wt=Oi-xr,Qf[2]=xr-(Oi-wt)+(wn-wt),Qf[3]=Oi,Ar=co*eo,Vt=splitter*co,tn=Vt-(Vt-co),Dn=co-tn,Vt=splitter*eo,Wt=Vt-(Vt-eo),ln=eo-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=_o*Mi,Vt=splitter*_o,tn=Vt-(Vt-_o),Dn=_o-tn,Vt=splitter*Mi,Wt=Vt-(Vt-Mi),ln=Mi-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr-ki,wt=Vr-wn,qf[0]=Vr-(wn+wt)+(wt-ki),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr-ai,wt=jr-wn,qf[1]=jr-(wn+wt)+(wt-ai),Oi=xr+wn,wt=Oi-xr,qf[2]=xr-(Oi-wt)+(wn-wt),qf[3]=Oi,De=sum(sum(sum(scale(scale(4,Qp,co,fa),fa,co,Ka),Ka,scale(scale(4,Qp,Mi,fa),fa,Mi,Kl),Kl,Sl),Sl,sum(scale(scale(4,Qf,_o,fa),fa,_o,Ka),Ka,scale(scale(4,Qf,eo,fa),fa,eo,Kl),Kl,Ep),Ep,Xd),Xd,sum(scale(scale(4,qf,Fo,fa),fa,Fo,Ka),Ka,scale(scale(4,qf,Bo,fa),fa,Bo,Kl),Kl,Sl),Sl,qh);let $a=estimate(De,qh),Ca=Px*Be;if($a>=Ca||-$a>=Ca||(wt=p-co,$e=p-(co+wt)+(wt-_e),wt=g-Mi,pt=g-(Mi+wt)+(wt-Ce),wt=x-_o,dt=x-(_o+wt)+(wt-_e),wt=L-eo,$t=L-(eo+wt)+(wt-Ce),wt=V-Fo,Ke=V-(Fo+wt)+(wt-_e),wt=ee-Bo,Pt=ee-(Bo+wt)+(wt-Ce),$e===0&&dt===0&&Ke===0&&pt===0&&$t===0&&Pt===0)||(Ca=f1*Be+resulterrbound*Math.abs($a),$a+=(co*co+Mi*Mi)*(_o*Pt+Bo*dt-(eo*Ke+Fo*$t))+2*(co*$e+Mi*pt)*(_o*Bo-eo*Fo)+((_o*_o+eo*eo)*(Fo*pt+Mi*Ke-(Bo*$e+co*Pt))+2*(_o*dt+eo*$t)*(Fo*Mi-Bo*co))+((Fo*Fo+Bo*Bo)*(co*$t+eo*$e-(Mi*dt+_o*pt))+2*(Fo*Ke+Bo*Pt)*(co*eo-Mi*_o)),$a>=Ca||-$a>=Ca))return $a;if((dt!==0||$t!==0||Ke!==0||Pt!==0)&&(Ar=co*co,Vt=splitter*co,tn=Vt-(Vt-co),Dn=co-tn,Vr=Dn*Dn-(Ar-tn*tn-(tn+tn)*Dn),ai=Mi*Mi,Vt=splitter*Mi,tn=Vt-(Vt-Mi),Dn=Mi-tn,ki=Dn*Dn-(ai-tn*tn-(tn+tn)*Dn),wn=Vr+ki,wt=wn-Vr,ep[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,ep[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,ep[2]=xr-(Oi-wt)+(wn-wt),ep[3]=Oi),(Ke!==0||Pt!==0||$e!==0||pt!==0)&&(Ar=_o*_o,Vt=splitter*_o,tn=Vt-(Vt-_o),Dn=_o-tn,Vr=Dn*Dn-(Ar-tn*tn-(tn+tn)*Dn),ai=eo*eo,Vt=splitter*eo,tn=Vt-(Vt-eo),Dn=eo-tn,ki=Dn*Dn-(ai-tn*tn-(tn+tn)*Dn),wn=Vr+ki,wt=wn-Vr,Pf[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Pf[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Pf[2]=xr-(Oi-wt)+(wn-wt),Pf[3]=Oi),($e!==0||pt!==0||dt!==0||$t!==0)&&(Ar=Fo*Fo,Vt=splitter*Fo,tn=Vt-(Vt-Fo),Dn=Fo-tn,Vr=Dn*Dn-(Ar-tn*tn-(tn+tn)*Dn),ai=Bo*Bo,Vt=splitter*Bo,tn=Vt-(Vt-Bo),Dn=Bo-tn,ki=Dn*Dn-(ai-tn*tn-(tn+tn)*Dn),wn=Vr+ki,wt=wn-Vr,_h[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,_h[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,_h[2]=xr-(Oi-wt)+(wn-wt),_h[3]=Oi),$e!==0&&(an=scale(4,Qp,$e,qp),De=oc(De,sum_three(scale(an,qp,2*co,Ka),Ka,scale(scale(4,_h,$e,fa),fa,eo,Kl),Kl,scale(scale(4,Pf,$e,fa),fa,-Bo,Yl),Yl,Sl,ic),ic)),pt!==0&&(An=scale(4,Qp,pt,vg),De=oc(De,sum_three(scale(An,vg,2*Mi,Ka),Ka,scale(scale(4,Pf,pt,fa),fa,Fo,Kl),Kl,scale(scale(4,_h,pt,fa),fa,-_o,Yl),Yl,Sl,ic),ic)),dt!==0&&(un=scale(4,Qf,dt,em),De=oc(De,sum_three(scale(un,em,2*_o,Ka),Ka,scale(scale(4,ep,dt,fa),fa,Bo,Kl),Kl,scale(scale(4,_h,dt,fa),fa,-Mi,Yl),Yl,Sl,ic),ic)),$t!==0&&(yn=scale(4,Qf,$t,bv),De=oc(De,sum_three(scale(yn,bv,2*eo,Ka),Ka,scale(scale(4,_h,$t,fa),fa,co,Kl),Kl,scale(scale(4,ep,$t,fa),fa,-Fo,Yl),Yl,Sl,ic),ic)),Ke!==0&&(pr=scale(4,qf,Ke,wv),De=oc(De,sum_three(scale(pr,wv,2*Fo,Ka),Ka,scale(scale(4,Pf,Ke,fa),fa,Mi,Kl),Kl,scale(scale(4,ep,Ke,fa),fa,-eo,Yl),Yl,Sl,ic),ic)),Pt!==0&&(ur=scale(4,qf,Pt,w_),De=oc(De,sum_three(scale(ur,w_,2*Bo,Ka),Ka,scale(scale(4,ep,Pt,fa),fa,_o,Kl),Kl,scale(scale(4,Pf,Pt,fa),fa,-co,Yl),Yl,Sl,ic),ic)),$e!==0||pt!==0){if(dt!==0||$t!==0||Ke!==0||Pt!==0?(Ar=dt*Bo,Vt=splitter*dt,tn=Vt-(Vt-dt),Dn=dt-tn,Vt=splitter*Bo,Wt=Vt-(Vt-Bo),ln=Bo-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=_o*Pt,Vt=splitter*_o,tn=Vt-(Vt-_o),Dn=_o-tn,Vt=splitter*Pt,Wt=Vt-(Vt-Pt),ln=Pt-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr+ki,wt=wn-Vr,Md[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Md[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Md[2]=xr-(Oi-wt)+(wn-wt),Md[3]=Oi,Ar=Ke*-eo,Vt=splitter*Ke,tn=Vt-(Vt-Ke),Dn=Ke-tn,Vt=splitter*-eo,Wt=Vt-(Vt- -eo),ln=-eo-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=Fo*-$t,Vt=splitter*Fo,tn=Vt-(Vt-Fo),Dn=Fo-tn,Vt=splitter*-$t,Wt=Vt-(Vt- -$t),ln=-$t-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr+ki,wt=wn-Vr,Hu[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Hu[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Hu[2]=xr-(Oi-wt)+(wn-wt),Hu[3]=Oi,sr=sum(4,Md,4,Hu,tm),Ar=dt*Pt,Vt=splitter*dt,tn=Vt-(Vt-dt),Dn=dt-tn,Vt=splitter*Pt,Wt=Vt-(Vt-Pt),ln=Pt-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=Ke*$t,Vt=splitter*Ke,tn=Vt-(Vt-Ke),Dn=Ke-tn,Vt=splitter*$t,Wt=Vt-(Vt-$t),ln=$t-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr-ki,wt=Vr-wn,Am[0]=Vr-(wn+wt)+(wt-ki),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr-ai,wt=jr-wn,Am[1]=jr-(wn+wt)+(wt-ai),Oi=xr+wn,wt=Oi-xr,Am[2]=xr-(Oi-wt)+(wn-wt),Am[3]=Oi,Jt=4):(tm[0]=0,sr=1,Am[0]=0,Jt=1),$e!==0){const ls=scale(sr,tm,$e,Yl);De=oc(De,sum(scale(an,qp,$e,Ka),Ka,scale(ls,Yl,2*co,Sl),Sl,ic),ic);const va=scale(Jt,Am,$e,fa);De=oc(De,sum_three(scale(va,fa,2*co,Ka),Ka,scale(va,fa,$e,Kl),Kl,scale(ls,Yl,$e,Sl),Sl,Ep,Xd),Xd),$t!==0&&(De=oc(De,scale(scale(4,_h,$e,fa),fa,$t,Ka),Ka)),Pt!==0&&(De=oc(De,scale(scale(4,Pf,-$e,fa),fa,Pt,Ka),Ka))}if(pt!==0){const ls=scale(sr,tm,pt,Yl);De=oc(De,sum(scale(An,vg,pt,Ka),Ka,scale(ls,Yl,2*Mi,Sl),Sl,ic),ic);const va=scale(Jt,Am,pt,fa);De=oc(De,sum_three(scale(va,fa,2*Mi,Ka),Ka,scale(va,fa,pt,Kl),Kl,scale(ls,Yl,pt,Sl),Sl,Ep,Xd),Xd)}}if(dt!==0||$t!==0){if(Ke!==0||Pt!==0||$e!==0||pt!==0?(Ar=Ke*Mi,Vt=splitter*Ke,tn=Vt-(Vt-Ke),Dn=Ke-tn,Vt=splitter*Mi,Wt=Vt-(Vt-Mi),ln=Mi-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=Fo*pt,Vt=splitter*Fo,tn=Vt-(Vt-Fo),Dn=Fo-tn,Vt=splitter*pt,Wt=Vt-(Vt-pt),ln=pt-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr+ki,wt=wn-Vr,Md[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Md[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Md[2]=xr-(Oi-wt)+(wn-wt),Md[3]=Oi,bn=-Bo,kn=-Pt,Ar=$e*bn,Vt=splitter*$e,tn=Vt-(Vt-$e),Dn=$e-tn,Vt=splitter*bn,Wt=Vt-(Vt-bn),ln=bn-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=co*kn,Vt=splitter*co,tn=Vt-(Vt-co),Dn=co-tn,Vt=splitter*kn,Wt=Vt-(Vt-kn),ln=kn-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr+ki,wt=wn-Vr,Hu[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Hu[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Hu[2]=xr-(Oi-wt)+(wn-wt),Hu[3]=Oi,ht=sum(4,Md,4,Hu,yg),Ar=Ke*pt,Vt=splitter*Ke,tn=Vt-(Vt-Ke),Dn=Ke-tn,Vt=splitter*pt,Wt=Vt-(Vt-pt),ln=pt-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=$e*Pt,Vt=splitter*$e,tn=Vt-(Vt-$e),Dn=$e-tn,Vt=splitter*Pt,Wt=Vt-(Vt-Pt),ln=Pt-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr-ki,wt=Vr-wn,tp[0]=Vr-(wn+wt)+(wt-ki),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr-ai,wt=jr-wn,tp[1]=jr-(wn+wt)+(wt-ai),Oi=xr+wn,wt=Oi-xr,tp[2]=xr-(Oi-wt)+(wn-wt),tp[3]=Oi,On=4):(yg[0]=0,ht=1,tp[0]=0,On=1),dt!==0){const ls=scale(ht,yg,dt,Yl);De=oc(De,sum(scale(un,em,dt,Ka),Ka,scale(ls,Yl,2*_o,Sl),Sl,ic),ic);const va=scale(On,tp,dt,fa);De=oc(De,sum_three(scale(va,fa,2*_o,Ka),Ka,scale(va,fa,dt,Kl),Kl,scale(ls,Yl,dt,Sl),Sl,Ep,Xd),Xd),Pt!==0&&(De=oc(De,scale(scale(4,ep,dt,fa),fa,Pt,Ka),Ka)),pt!==0&&(De=oc(De,scale(scale(4,_h,-dt,fa),fa,pt,Ka),Ka))}if($t!==0){const ls=scale(ht,yg,$t,Yl);De=oc(De,sum(scale(yn,bv,$t,Ka),Ka,scale(ls,Yl,2*eo,Sl),Sl,ic),ic);const va=scale(On,tp,$t,fa);De=oc(De,sum_three(scale(va,fa,2*eo,Ka),Ka,scale(va,fa,$t,Kl),Kl,scale(ls,Yl,$t,Sl),Sl,Ep,Xd),Xd)}}if(Ke!==0||Pt!==0){if($e!==0||pt!==0||dt!==0||$t!==0?(Ar=$e*eo,Vt=splitter*$e,tn=Vt-(Vt-$e),Dn=$e-tn,Vt=splitter*eo,Wt=Vt-(Vt-eo),ln=eo-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=co*$t,Vt=splitter*co,tn=Vt-(Vt-co),Dn=co-tn,Vt=splitter*$t,Wt=Vt-(Vt-$t),ln=$t-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr+ki,wt=wn-Vr,Md[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Md[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Md[2]=xr-(Oi-wt)+(wn-wt),Md[3]=Oi,bn=-Mi,kn=-pt,Ar=dt*bn,Vt=splitter*dt,tn=Vt-(Vt-dt),Dn=dt-tn,Vt=splitter*bn,Wt=Vt-(Vt-bn),ln=bn-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=_o*kn,Vt=splitter*_o,tn=Vt-(Vt-_o),Dn=_o-tn,Vt=splitter*kn,Wt=Vt-(Vt-kn),ln=kn-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr+ki,wt=wn-Vr,Hu[0]=Vr-(wn-wt)+(ki-wt),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr+ai,wt=wn-jr,Hu[1]=jr-(wn-wt)+(ai-wt),Oi=xr+wn,wt=Oi-xr,Hu[2]=xr-(Oi-wt)+(wn-wt),Hu[3]=Oi,br=sum(4,Md,4,Hu,Ev),Ar=$e*$t,Vt=splitter*$e,tn=Vt-(Vt-$e),Dn=$e-tn,Vt=splitter*$t,Wt=Vt-(Vt-$t),ln=$t-Wt,Vr=Dn*ln-(Ar-tn*Wt-Dn*Wt-tn*ln),ai=dt*pt,Vt=splitter*dt,tn=Vt-(Vt-dt),Dn=dt-tn,Vt=splitter*pt,Wt=Vt-(Vt-pt),ln=pt-Wt,ki=Dn*ln-(ai-tn*Wt-Dn*Wt-tn*ln),wn=Vr-ki,wt=Vr-wn,wp[0]=Vr-(wn+wt)+(wt-ki),xr=Ar+wn,wt=xr-Ar,jr=Ar-(xr-wt)+(wn-wt),wn=jr-ai,wt=jr-wn,wp[1]=jr-(wn+wt)+(wt-ai),Oi=xr+wn,wt=Oi-xr,wp[2]=xr-(Oi-wt)+(wn-wt),wp[3]=Oi,Rt=4):(Ev[0]=0,br=1,wp[0]=0,Rt=1),Ke!==0){const ls=scale(br,Ev,Ke,Yl);De=oc(De,sum(scale(pr,wv,Ke,Ka),Ka,scale(ls,Yl,2*Fo,Sl),Sl,ic),ic);const va=scale(Rt,wp,Ke,fa);De=oc(De,sum_three(scale(va,fa,2*Fo,Ka),Ka,scale(va,fa,Ke,Kl),Kl,scale(ls,Yl,Ke,Sl),Sl,Ep,Xd),Xd),pt!==0&&(De=oc(De,scale(scale(4,Pf,Ke,fa),fa,pt,Ka),Ka)),$t!==0&&(De=oc(De,scale(scale(4,ep,-Ke,fa),fa,$t,Ka),Ka))}if(Pt!==0){const ls=scale(br,Ev,Pt,Yl);De=oc(De,sum(scale(ur,w_,Pt,Ka),Ka,scale(ls,Yl,2*Bo,Sl),Sl,ic),ic);const va=scale(Rt,wp,Pt,fa);De=oc(De,sum_three(scale(va,fa,2*Bo,Ka),Ka,scale(va,fa,Pt,Kl),Kl,scale(ls,Yl,Pt,Sl),Sl,Ep,Xd),Xd)}}return qh[De-1]}function sb(p,g,x,L,V,ee,_e,Ce){const Be=p-_e,De=x-_e,$e=V-_e,dt=g-Ce,Ke=L-Ce,pt=ee-Ce,$t=De*pt,Pt=$e*Ke,an=Be*Be+dt*dt,An=$e*dt,un=Be*pt,yn=De*De+Ke*Ke,pr=Be*Ke,ur=De*dt,br=$e*$e+pt*pt,sr=an*($t-Pt)+yn*(An-un)+br*(pr-ur),ht=(Math.abs($t)+Math.abs(Pt))*an+(Math.abs(An)+Math.abs(un))*yn+(Math.abs(pr)+Math.abs(ur))*br,Rt=Qh*ht;return sr>Rt||-sr>Rt?sr:p1(p,g,x,L,V,ee,_e,Ce,ht)}function lb(p,g,x,L,V,ee,_e,Ce){const Be=p-_e,De=g-Ce,$e=x-_e,dt=L-Ce,Ke=V-_e,pt=ee-Ce,$t=Be*dt-$e*De,Pt=$e*pt-Ke*dt,an=Ke*De-Be*pt,An=Be*Be+De*De,un=$e*$e+dt*dt,yn=Ke*Ke+pt*pt;return An*Pt+un*an+yn*$t}const Ox=(16+224*Hl)*Hl,m1=(5+72*Hl)*Hl,Rx=(71+1408*Hl)*Hl*Hl,Nh=so(4),gh=so(4),zh=so(4),ef=so(4),nm=so(4),vh=so(4),Fh=so(4),rm=so(4),Jd=so(4),Sp=so(4),Sv=so(24),Pm=so(24),bg=so(24),Tv=so(24),a=so(24),e=so(24),r=so(24),s=so(24),h=so(24),l=so(24),m=so(1152),S=so(1152),O=so(1152),z=so(1152),w=so(1152),R=so(2304),N=so(2304),P=so(3456),D=so(5760),G=so(8),oe=so(8),ce=so(8),Ae=so(16),Oe=so(24),ve=so(48),Fe=so(48),Ye=so(96),ct=so(192),Kt=so(384),Zt=so(384),Ut=so(384),En=so(768);function Yt(p,g,x,L,V,ee,_e){return sum_three(scale(4,p,L,G),G,scale(4,g,V,oe),oe,scale(4,x,ee,ce),ce,Ae,_e)}function Cn(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt){const Ke=sum(sum(p,g,x,L,ve),ve,negate(sum(V,ee,_e,Ce,Fe),Fe),Fe,Ye);return sum_three(scale(scale(Ke,Ye,Be,ct),ct,Be,Kt),Kt,scale(scale(Ke,Ye,De,ct),ct,De,Zt),Zt,scale(scale(Ke,Ye,$e,ct),ct,$e,Ut),Ut,En,dt)}function Vn(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t){let Pt,an,An,un,yn,pr,ur,br,sr,ht,Rt,Jt,On,bn;ht=p*V,an=splitter*p,An=an-(an-p),un=p-An,an=splitter*V,yn=an-(an-V),pr=V-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=L*g,an=splitter*L,An=an-(an-L),un=L-An,an=splitter*g,yn=an-(an-g),pr=g-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,Nh[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,Nh[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,Nh[2]=br-(bn-Pt)+(ur-Pt),Nh[3]=bn,ht=L*Ce,an=splitter*L,An=an-(an-L),un=L-An,an=splitter*Ce,yn=an-(an-Ce),pr=Ce-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=_e*V,an=splitter*_e,An=an-(an-_e),un=_e-An,an=splitter*V,yn=an-(an-V),pr=V-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,gh[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,gh[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,gh[2]=br-(bn-Pt)+(ur-Pt),gh[3]=bn,ht=_e*$e,an=splitter*_e,An=an-(an-_e),un=_e-An,an=splitter*$e,yn=an-(an-$e),pr=$e-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=De*Ce,an=splitter*De,An=an-(an-De),un=De-An,an=splitter*Ce,yn=an-(an-Ce),pr=Ce-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,zh[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,zh[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,zh[2]=br-(bn-Pt)+(ur-Pt),zh[3]=bn,ht=De*pt,an=splitter*De,An=an-(an-De),un=De-An,an=splitter*pt,yn=an-(an-pt),pr=pt-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=Ke*$e,an=splitter*Ke,An=an-(an-Ke),un=Ke-An,an=splitter*$e,yn=an-(an-$e),pr=$e-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,ef[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,ef[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,ef[2]=br-(bn-Pt)+(ur-Pt),ef[3]=bn,ht=Ke*g,an=splitter*Ke,An=an-(an-Ke),un=Ke-An,an=splitter*g,yn=an-(an-g),pr=g-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=p*pt,an=splitter*p,An=an-(an-p),un=p-An,an=splitter*pt,yn=an-(an-pt),pr=pt-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,nm[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,nm[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,nm[2]=br-(bn-Pt)+(ur-Pt),nm[3]=bn,ht=p*Ce,an=splitter*p,An=an-(an-p),un=p-An,an=splitter*Ce,yn=an-(an-Ce),pr=Ce-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=_e*g,an=splitter*_e,An=an-(an-_e),un=_e-An,an=splitter*g,yn=an-(an-g),pr=g-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,vh[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,vh[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,vh[2]=br-(bn-Pt)+(ur-Pt),vh[3]=bn,ht=L*$e,an=splitter*L,An=an-(an-L),un=L-An,an=splitter*$e,yn=an-(an-$e),pr=$e-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=De*V,an=splitter*De,An=an-(an-De),un=De-An,an=splitter*V,yn=an-(an-V),pr=V-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,Fh[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,Fh[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,Fh[2]=br-(bn-Pt)+(ur-Pt),Fh[3]=bn,ht=_e*pt,an=splitter*_e,An=an-(an-_e),un=_e-An,an=splitter*pt,yn=an-(an-pt),pr=pt-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=Ke*Ce,an=splitter*Ke,An=an-(an-Ke),un=Ke-An,an=splitter*Ce,yn=an-(an-Ce),pr=Ce-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,rm[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,rm[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,rm[2]=br-(bn-Pt)+(ur-Pt),rm[3]=bn,ht=De*g,an=splitter*De,An=an-(an-De),un=De-An,an=splitter*g,yn=an-(an-g),pr=g-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=p*$e,an=splitter*p,An=an-(an-p),un=p-An,an=splitter*$e,yn=an-(an-$e),pr=$e-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,Jd[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,Jd[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,Jd[2]=br-(bn-Pt)+(ur-Pt),Jd[3]=bn,ht=Ke*V,an=splitter*Ke,An=an-(an-Ke),un=Ke-An,an=splitter*V,yn=an-(an-V),pr=V-yn,Rt=un*pr-(ht-An*yn-un*yn-An*pr),Jt=L*pt,an=splitter*L,An=an-(an-L),un=L-An,an=splitter*pt,yn=an-(an-pt),pr=pt-yn,On=un*pr-(Jt-An*yn-un*yn-An*pr),ur=Rt-On,Pt=Rt-ur,Sp[0]=Rt-(ur+Pt)+(Pt-On),br=ht+ur,Pt=br-ht,sr=ht-(br-Pt)+(ur-Pt),ur=sr-Jt,Pt=sr-ur,Sp[1]=sr-(ur+Pt)+(Pt-Jt),bn=br+ur,Pt=bn-br,Sp[2]=br-(bn-Pt)+(ur-Pt),Sp[3]=bn;const kn=Yt(Nh,gh,vh,Be,x,-ee,Sv),wt=Yt(gh,zh,Fh,dt,ee,-Be,Pm),Vt=Yt(zh,ef,rm,$t,Be,-dt,bg),tn=Yt(ef,nm,Jd,x,dt,-$t,Tv),Dn=Yt(nm,Nh,Sp,ee,$t,-x,a),Wt=Yt(Nh,Fh,Jd,dt,x,ee,e),ln=Yt(gh,rm,Sp,$t,ee,Be,r),wn=Yt(zh,Jd,vh,x,Be,dt,s),xr=Yt(ef,Sp,Fh,ee,dt,$t,h),jr=Yt(nm,vh,rm,Be,$t,x,l),Ar=sum_three(Cn(Vt,bg,ln,r,xr,h,wt,Pm,p,g,x,m),m,Cn(tn,Tv,wn,s,jr,l,Vt,bg,L,V,ee,S),S,sum_three(Cn(Dn,a,xr,h,Wt,e,tn,Tv,_e,Ce,Be,O),O,Cn(kn,Sv,jr,l,ln,r,Dn,a,De,$e,dt,z),z,Cn(wt,Pm,Wt,e,wn,s,kn,Sv,Ke,pt,$t,w),w,N,P),P,R,D);return D[Ar-1]}const zn=so(96),Zn=so(96),qn=so(96),hr=so(1152);function Kn(p,g,x,L,V,ee,_e,Ce,Be,De){const $e=Yt(p,g,x,L,V,ee,Oe);return sum_three(scale(scale($e,Oe,_e,ve),ve,_e,zn),zn,scale(scale($e,Oe,Ce,ve),ve,Ce,Zn),Zn,scale(scale($e,Oe,Be,ve),ve,Be,qn),qn,ct,De)}function Zr(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t,Pt){let an,An,un,yn,pr,ur,br,sr,ht,Rt,Jt,On,bn,kn,wt,Vt,tn,Dn,Wt,ln,wn,xr,jr,Ar,Vr,ai,ki,Oi,co,_o,Fo;const Mi=p-Ke,eo=L-Ke,Bo=_e-Ke,$a=De-Ke,Ca=g-pt,ls=V-pt,va=Ce-pt,Ps=$e-pt,uu=x-$t,_c=ee-$t,Ec=Be-$t,hd=dt-$t;Oi=Mi*ls,ln=splitter*Mi,wn=ln-(ln-Mi),xr=Mi-wn,ln=splitter*ls,jr=ln-(ln-ls),Ar=ls-jr,co=xr*Ar-(Oi-wn*jr-xr*jr-wn*Ar),_o=eo*Ca,ln=splitter*eo,wn=ln-(ln-eo),xr=eo-wn,ln=splitter*Ca,jr=ln-(ln-Ca),Ar=Ca-jr,Fo=xr*Ar-(_o-wn*jr-xr*jr-wn*Ar),Vr=co-Fo,Wt=co-Vr,Nh[0]=co-(Vr+Wt)+(Wt-Fo),ai=Oi+Vr,Wt=ai-Oi,ki=Oi-(ai-Wt)+(Vr-Wt),Vr=ki-_o,Wt=ki-Vr,Nh[1]=ki-(Vr+Wt)+(Wt-_o),an=ai+Vr,Wt=an-ai,Nh[2]=ai-(an-Wt)+(Vr-Wt),Nh[3]=an,Oi=eo*va,ln=splitter*eo,wn=ln-(ln-eo),xr=eo-wn,ln=splitter*va,jr=ln-(ln-va),Ar=va-jr,co=xr*Ar-(Oi-wn*jr-xr*jr-wn*Ar),_o=Bo*ls,ln=splitter*Bo,wn=ln-(ln-Bo),xr=Bo-wn,ln=splitter*ls,jr=ln-(ln-ls),Ar=ls-jr,Fo=xr*Ar-(_o-wn*jr-xr*jr-wn*Ar),Vr=co-Fo,Wt=co-Vr,gh[0]=co-(Vr+Wt)+(Wt-Fo),ai=Oi+Vr,Wt=ai-Oi,ki=Oi-(ai-Wt)+(Vr-Wt),Vr=ki-_o,Wt=ki-Vr,gh[1]=ki-(Vr+Wt)+(Wt-_o),An=ai+Vr,Wt=An-ai,gh[2]=ai-(An-Wt)+(Vr-Wt),gh[3]=An,Oi=Bo*Ps,ln=splitter*Bo,wn=ln-(ln-Bo),xr=Bo-wn,ln=splitter*Ps,jr=ln-(ln-Ps),Ar=Ps-jr,co=xr*Ar-(Oi-wn*jr-xr*jr-wn*Ar),_o=$a*va,ln=splitter*$a,wn=ln-(ln-$a),xr=$a-wn,ln=splitter*va,jr=ln-(ln-va),Ar=va-jr,Fo=xr*Ar-(_o-wn*jr-xr*jr-wn*Ar),Vr=co-Fo,Wt=co-Vr,zh[0]=co-(Vr+Wt)+(Wt-Fo),ai=Oi+Vr,Wt=ai-Oi,ki=Oi-(ai-Wt)+(Vr-Wt),Vr=ki-_o,Wt=ki-Vr,zh[1]=ki-(Vr+Wt)+(Wt-_o),un=ai+Vr,Wt=un-ai,zh[2]=ai-(un-Wt)+(Vr-Wt),zh[3]=un,Oi=$a*Ca,ln=splitter*$a,wn=ln-(ln-$a),xr=$a-wn,ln=splitter*Ca,jr=ln-(ln-Ca),Ar=Ca-jr,co=xr*Ar-(Oi-wn*jr-xr*jr-wn*Ar),_o=Mi*Ps,ln=splitter*Mi,wn=ln-(ln-Mi),xr=Mi-wn,ln=splitter*Ps,jr=ln-(ln-Ps),Ar=Ps-jr,Fo=xr*Ar-(_o-wn*jr-xr*jr-wn*Ar),Vr=co-Fo,Wt=co-Vr,Jd[0]=co-(Vr+Wt)+(Wt-Fo),ai=Oi+Vr,Wt=ai-Oi,ki=Oi-(ai-Wt)+(Vr-Wt),Vr=ki-_o,Wt=ki-Vr,Jd[1]=ki-(Vr+Wt)+(Wt-_o),yn=ai+Vr,Wt=yn-ai,Jd[2]=ai-(yn-Wt)+(Vr-Wt),Jd[3]=yn,Oi=Mi*va,ln=splitter*Mi,wn=ln-(ln-Mi),xr=Mi-wn,ln=splitter*va,jr=ln-(ln-va),Ar=va-jr,co=xr*Ar-(Oi-wn*jr-xr*jr-wn*Ar),_o=Bo*Ca,ln=splitter*Bo,wn=ln-(ln-Bo),xr=Bo-wn,ln=splitter*Ca,jr=ln-(ln-Ca),Ar=Ca-jr,Fo=xr*Ar-(_o-wn*jr-xr*jr-wn*Ar),Vr=co-Fo,Wt=co-Vr,vh[0]=co-(Vr+Wt)+(Wt-Fo),ai=Oi+Vr,Wt=ai-Oi,ki=Oi-(ai-Wt)+(Vr-Wt),Vr=ki-_o,Wt=ki-Vr,vh[1]=ki-(Vr+Wt)+(Wt-_o),pr=ai+Vr,Wt=pr-ai,vh[2]=ai-(pr-Wt)+(Vr-Wt),vh[3]=pr,Oi=eo*Ps,ln=splitter*eo,wn=ln-(ln-eo),xr=eo-wn,ln=splitter*Ps,jr=ln-(ln-Ps),Ar=Ps-jr,co=xr*Ar-(Oi-wn*jr-xr*jr-wn*Ar),_o=$a*ls,ln=splitter*$a,wn=ln-(ln-$a),xr=$a-wn,ln=splitter*ls,jr=ln-(ln-ls),Ar=ls-jr,Fo=xr*Ar-(_o-wn*jr-xr*jr-wn*Ar),Vr=co-Fo,Wt=co-Vr,Fh[0]=co-(Vr+Wt)+(Wt-Fo),ai=Oi+Vr,Wt=ai-Oi,ki=Oi-(ai-Wt)+(Vr-Wt),Vr=ki-_o,Wt=ki-Vr,Fh[1]=ki-(Vr+Wt)+(Wt-_o),ur=ai+Vr,Wt=ur-ai,Fh[2]=ai-(ur-Wt)+(Vr-Wt),Fh[3]=ur;const Sg=sum(sum(negate(Kn(gh,zh,Fh,hd,_c,-Ec,Mi,Ca,uu,m),m),m,Kn(zh,Jd,vh,uu,Ec,hd,eo,ls,_c,S),S,R),R,sum(negate(Kn(Jd,Nh,Fh,_c,hd,uu,Bo,va,Ec,O),O),O,Kn(Nh,gh,vh,Ec,uu,-_c,$a,Ps,hd,z),z,N),N,hr);let nf=estimate(Sg,hr),Tp=m1*Pt;if(nf>=Tp||-nf>=Tp||(Wt=p-Mi,br=p-(Mi+Wt)+(Wt-Ke),Wt=g-Ca,Jt=g-(Ca+Wt)+(Wt-pt),Wt=x-uu,wt=x-(uu+Wt)+(Wt-$t),Wt=L-eo,sr=L-(eo+Wt)+(Wt-Ke),Wt=V-ls,On=V-(ls+Wt)+(Wt-pt),Wt=ee-_c,Vt=ee-(_c+Wt)+(Wt-$t),Wt=_e-Bo,ht=_e-(Bo+Wt)+(Wt-Ke),Wt=Ce-va,bn=Ce-(va+Wt)+(Wt-pt),Wt=Be-Ec,tn=Be-(Ec+Wt)+(Wt-$t),Wt=De-$a,Rt=De-($a+Wt)+(Wt-Ke),Wt=$e-Ps,kn=$e-(Ps+Wt)+(Wt-pt),Wt=dt-hd,Dn=dt-(hd+Wt)+(Wt-$t),br===0&&Jt===0&&wt===0&&sr===0&&On===0&&Vt===0&&ht===0&&bn===0&&tn===0&&Rt===0&&kn===0&&Dn===0))return nf;Tp=Rx*Pt+resulterrbound*Math.abs(nf);const b1=Mi*On+ls*br-(Ca*sr+eo*Jt),jy=eo*bn+va*sr-(ls*ht+Bo*On),w1=Bo*kn+Ps*ht-(va*Rt+$a*bn),Uy=$a*Jt+Ca*Rt-(Ps*br+Mi*kn),E1=Mi*bn+va*br-(Ca*ht+Bo*Jt),Vy=eo*kn+Ps*sr-(ls*Rt+$a*On);return nf+=(eo*eo+ls*ls+_c*_c)*(Ec*Uy+hd*E1+uu*w1+(tn*yn+Dn*pr+wt*un))+($a*$a+Ps*Ps+hd*hd)*(uu*jy-_c*E1+Ec*b1+(wt*An-Vt*pr+tn*an))-((Mi*Mi+Ca*Ca+uu*uu)*(_c*w1-Ec*Vy+hd*jy+(Vt*un-tn*ur+Dn*An))+(Bo*Bo+va*va+Ec*Ec)*(hd*b1+uu*Vy+_c*Uy+(Dn*an+wt*ur+Vt*yn)))+2*((eo*sr+ls*On+_c*Vt)*(Ec*yn+hd*pr+uu*un)+($a*Rt+Ps*kn+hd*Dn)*(uu*An-_c*pr+Ec*an)-((Mi*br+Ca*Jt+uu*wt)*(_c*un-Ec*ur+hd*An)+(Bo*ht+va*bn+Ec*tn)*(hd*an+uu*ur+_c*yn))),nf>=Tp||-nf>=Tp?nf:Vn(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t)}function si(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t){const Pt=p-Ke,an=L-Ke,An=_e-Ke,un=De-Ke,yn=g-pt,pr=V-pt,ur=Ce-pt,br=$e-pt,sr=x-$t,ht=ee-$t,Rt=Be-$t,Jt=dt-$t,On=Pt*pr,bn=an*yn,kn=On-bn,wt=an*ur,Vt=An*pr,tn=wt-Vt,Dn=An*br,Wt=un*ur,ln=Dn-Wt,wn=un*yn,xr=Pt*br,jr=wn-xr,Ar=Pt*ur,Vr=An*yn,ai=Ar-Vr,ki=an*br,Oi=un*pr,co=ki-Oi,_o=Pt*Pt+yn*yn+sr*sr,Fo=an*an+pr*pr+ht*ht,Mi=An*An+ur*ur+Rt*Rt,eo=un*un+br*br+Jt*Jt,Bo=Mi*(Jt*kn+sr*co+ht*jr)-eo*(sr*tn-ht*ai+Rt*kn)+(_o*(ht*ln-Rt*co+Jt*tn)-Fo*(Rt*jr+Jt*ai+sr*ln)),$a=Math.abs(sr),Ca=Math.abs(ht),ls=Math.abs(Rt),va=Math.abs(Jt),Ps=Math.abs(On)+Math.abs(bn),uu=Math.abs(wt)+Math.abs(Vt),_c=Math.abs(Dn)+Math.abs(Wt),Ec=Math.abs(wn)+Math.abs(xr),hd=Math.abs(Ar)+Math.abs(Vr),Sg=Math.abs(ki)+Math.abs(Oi),nf=(_c*Ca+Sg*ls+uu*va)*_o+(Ec*ls+hd*va+_c*$a)*Fo+(Ps*va+Sg*$a+Ec*Ca)*Mi+(uu*$a+hd*Ca+Ps*ls)*eo,Tp=Ox*nf;return Bo>Tp||-Bo>Tp?Bo:-Zr(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t,nf)}function Wr(p,g,x,L,V,ee,_e,Ce,Be,De,$e,dt,Ke,pt,$t){const Pt=p-Ke,an=L-Ke,An=_e-Ke,un=De-Ke,yn=g-pt,pr=V-pt,ur=Ce-pt,br=$e-pt,sr=x-$t,ht=ee-$t,Rt=Be-$t,Jt=dt-$t,On=Pt*pr-an*yn,bn=an*ur-An*pr,kn=An*br-un*ur,wt=un*yn-Pt*br,Vt=Pt*ur-An*yn,tn=an*br-un*pr,Dn=sr*bn-ht*Vt+Rt*On,Wt=ht*kn-Rt*tn+Jt*bn,ln=Rt*wt+Jt*Vt+sr*kn,wn=Jt*On+sr*tn+ht*wt,xr=Pt*Pt+yn*yn+sr*sr,jr=an*an+pr*pr+ht*ht,Ar=An*An+ur*ur+Rt*Rt,Vr=un*un+br*br+Jt*Jt;return Ar*wn-Vr*Dn+(xr*Wt-jr*ln)}function zi(p,g){var x,L,V=0,ee,_e,Ce,Be,De,$e,dt,Ke=p[0],pt=p[1],$t=g.length;for(x=0;x<$t;x++){L=0;var Pt=g[x],an=Pt.length-1;if($e=Pt[0],$e[0]!==Pt[an][0]&&$e[1]!==Pt[an][1])throw new Error("First and last coordinates in a ring must be the same");for(_e=$e[0]-Ke,Ce=$e[1]-pt,L;L<an;L++){if(dt=Pt[L+1],Be=dt[0]-Ke,De=dt[1]-pt,Ce===0&&De===0){if(Be<=0&&_e>=0||_e<=0&&Be>=0)return 0}else if(De>=0&&Ce<=0||De<=0&&Ce>=0){if(ee=Mx(_e,Be,Ce,De,0,0),ee===0)return 0;(ee>0&&De>0&&Ce<=0||ee<0&&De<=0&&Ce>0)&&V++}$e=dt,Ce=De,_e=Be}}return V%2!==0}function yi(p,g,x={}){if(!p)throw new Error("point is required");if(!g)throw new Error("polygon is required");const L=Li(p),V=ba(g),ee=V.type,_e=g.bbox;let Ce=V.coordinates;if(_e&&vi(L,_e)===!1)return!1;ee==="Polygon"&&(Ce=[Ce]);let Be=!1;for(var De=0;De<Ce.length;++De){const $e=zi(L,Ce[De]);if($e===0)return!x.ignoreBoundary;$e&&(Be=!0)}return Be}function vi(p,g){return g[0]<=p[0]&&g[1]<=p[1]&&g[2]>=p[0]&&g[3]>=p[1]}var li=null;class lo{constructor(g=[],x=ji){if(this.data=g,this.length=this.data.length,this.compare=x,this.length>0)for(let L=(this.length>>1)-1;L>=0;L--)this._down(L)}push(g){this.data.push(g),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const g=this.data[0],x=this.data.pop();return this.length--,this.length>0&&(this.data[0]=x,this._down(0)),g}peek(){return this.data[0]}_up(g){const{data:x,compare:L}=this,V=x[g];for(;g>0;){const ee=g-1>>1,_e=x[ee];if(L(V,_e)>=0)break;x[g]=_e,g=ee}x[g]=V}_down(g){const{data:x,compare:L}=this,V=this.length>>1,ee=x[g];for(;g<V;){let _e=(g<<1)+1,Ce=x[_e];const Be=_e+1;if(Be<this.length&&L(x[Be],Ce)<0&&(_e=Be,Ce=x[Be]),L(Ce,ee)>=0)break;x[g]=Ce,g=_e}x[g]=ee}}function ji(p,g){return p<g?-1:p>g?1:0}function Yi(p,g){return p.p.x>g.p.x?1:p.p.x<g.p.x?-1:p.p.y!==g.p.y?p.p.y>g.p.y?1:-1:1}function Yo(p,g){return p.rightSweepEvent.p.x>g.rightSweepEvent.p.x?1:p.rightSweepEvent.p.x<g.rightSweepEvent.p.x?-1:p.rightSweepEvent.p.y!==g.rightSweepEvent.p.y?p.rightSweepEvent.p.y<g.rightSweepEvent.p.y?1:-1:1}class ga{constructor(g,x,L,V){this.p={x:g[0],y:g[1]},this.featureId=x,this.ringId=L,this.eventId=V,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(g){return this.p.x===g.p.x&&this.p.y===g.p.y}}function Ea(p,g){if(p.type==="FeatureCollection"){const x=p.features;for(let L=0;L<x.length;L++)el(x[L],g)}else el(p,g)}let pa=0,Oa=0,ka=0;function el(p,g){const x=p.type==="Feature"?p.geometry:p;let L=x.coordinates;(x.type==="Polygon"||x.type==="MultiLineString")&&(L=[L]),x.type==="LineString"&&(L=[[L]]);for(let V=0;V<L.length;V++)for(let ee=0;ee<L[V].length;ee++){let _e=L[V][ee][0],Ce=null;Oa=Oa+1;for(let Be=0;Be<L[V][ee].length-1;Be++){Ce=L[V][ee][Be+1];const De=new ga(_e,pa,Oa,ka),$e=new ga(Ce,pa,Oa,ka+1);De.otherEvent=$e,$e.otherEvent=De,Yi(De,$e)>0?($e.isLeftEndpoint=!0,De.isLeftEndpoint=!1):(De.isLeftEndpoint=!0,$e.isLeftEndpoint=!1),g.push(De),g.push($e),_e=Ce,ka=ka+1}}pa=pa+1}class Gs{constructor(g){this.leftSweepEvent=g,this.rightSweepEvent=g.otherEvent}}function sa(p,g){if(p===null||g===null||p.leftSweepEvent.ringId===g.leftSweepEvent.ringId&&(p.rightSweepEvent.isSamePoint(g.leftSweepEvent)||p.rightSweepEvent.isSamePoint(g.leftSweepEvent)||p.rightSweepEvent.isSamePoint(g.rightSweepEvent)||p.leftSweepEvent.isSamePoint(g.leftSweepEvent)||p.leftSweepEvent.isSamePoint(g.rightSweepEvent)))return!1;const x=p.leftSweepEvent.p.x,L=p.leftSweepEvent.p.y,V=p.rightSweepEvent.p.x,ee=p.rightSweepEvent.p.y,_e=g.leftSweepEvent.p.x,Ce=g.leftSweepEvent.p.y,Be=g.rightSweepEvent.p.x,De=g.rightSweepEvent.p.y,$e=(De-Ce)*(V-x)-(Be-_e)*(ee-L),dt=(Be-_e)*(L-Ce)-(De-Ce)*(x-_e),Ke=(V-x)*(L-Ce)-(ee-L)*(x-_e);if($e===0)return!1;const pt=dt/$e,$t=Ke/$e;if(pt>=0&&pt<=1&&$t>=0&&$t<=1){const Pt=x+pt*(V-x),an=L+pt*(ee-L);return[Pt,an]}return!1}function Ds(p,g){g=g||!1;const x=[],L=new lo([],Yo);for(;p.length;){const V=p.pop();if(V.isLeftEndpoint){const ee=new Gs(V);for(let _e=0;_e<L.data.length;_e++){const Ce=L.data[_e];if(g&&Ce.leftSweepEvent.featureId===V.featureId)continue;const Be=sa(ee,Ce);Be!==!1&&x.push(Be)}L.push(ee)}else V.isLeftEndpoint===!1&&L.pop()}return x}function Ns(p,g){const x=new lo([],Yi);return Ea(p,x),Ds(x,g)}var Tl=Ns,Au=Tl;function vu(p,g,x={}){const{removeDuplicates:L=!0,ignoreSelfIntersections:V=!0}=x;let ee=[];p.type==="FeatureCollection"?ee=ee.concat(p.features):p.type==="Feature"?ee.push(p):(p.type==="LineString"||p.type==="Polygon"||p.type==="MultiLineString"||p.type==="MultiPolygon")&&ee.push(rt(p)),g.type==="FeatureCollection"?ee=ee.concat(g.features):g.type==="Feature"?ee.push(g):(g.type==="LineString"||g.type==="Polygon"||g.type==="MultiLineString"||g.type==="MultiPolygon")&&ee.push(rt(g));const _e=Au(nn(ee),V);let Ce=[];if(L){const Be={};_e.forEach(De=>{const $e=De.join(",");Be[$e]||(Be[$e]=!0,Ce.push(De))})}else Ce=_e;return nn(Ce.map(Be=>kt(Be)))}var Du=null;function Xl(p,g={}){const x=ba(p);switch(!g.properties&&p.type==="Feature"&&(g.properties=p.properties),x.type){case"Polygon":return ku(x,g);case"MultiPolygon":return ac(x,g);default:throw new Error("invalid poly")}}function ku(p,g={}){const L=ba(p).coordinates,V=g.properties?g.properties:p.type==="Feature"?p.properties:{};return $c(L,V)}function ac(p,g={}){const L=ba(p).coordinates,V=g.properties?g.properties:p.type==="Feature"?p.properties:{},ee=[];return L.forEach(_e=>{ee.push($c(_e,V))}),nn(ee)}function $c(p,g){return p.length>1?Rn(p,g):on(p[0],g)}var Il=null;function Qd(p,g,{ignoreSelfIntersections:x=!0}={ignoreSelfIntersections:!0}){let L=!0;return Zu(p,V=>{Zu(g,ee=>{if(L===!1)return!1;L=Of(V.geometry,ee.geometry,x)})}),L}function Of(p,g,x){switch(p.type){case"Point":switch(g.type){case"Point":return!wg(p.coordinates,g.coordinates);case"LineString":return!Bh(g,p);case"Polygon":return!yi(p,g)}break;case"LineString":switch(g.type){case"Point":return!Bh(p,g);case"LineString":return!tf(p,g,x);case"Polygon":return!im(g,p,x)}break;case"Polygon":switch(g.type){case"Point":return!yi(g,p);case"LineString":return!im(p,g,x);case"Polygon":return!om(g,p,x)}}return!1}function Bh(p,g){for(let x=0;x<p.coordinates.length-1;x++)if(Om(p.coordinates[x],p.coordinates[x+1],g.coordinates))return!0;return!1}function tf(p,g,x){return vu(p,g,{ignoreSelfIntersections:x}).features.length>0}function im(p,g,x){for(const V of g.coordinates)if(yi(V,p))return!0;return vu(g,Xl(p),{ignoreSelfIntersections:x}).features.length>0}function om(p,g,x){for(const V of p.coordinates[0])if(yi(V,g))return!0;for(const V of g.coordinates[0])if(yi(V,p))return!0;return vu(Xl(p),Xl(g),{ignoreSelfIntersections:x}).features.length>0}function Om(p,g,x){const L=x[0]-p[0],V=x[1]-p[1],ee=g[0]-p[0],_e=g[1]-p[1];return L*_e-V*ee!==0?!1:Math.abs(ee)>=Math.abs(_e)?ee>0?p[0]<=x[0]&&x[0]<=g[0]:g[0]<=x[0]&&x[0]<=p[0]:_e>0?p[1]<=x[1]&&x[1]<=g[1]:g[1]<=x[1]&&x[1]<=p[1]}function wg(p,g){return p[0]===g[0]&&p[1]===g[1]}var Lx=null;function _1(p,g,{ignoreSelfIntersections:x=!0}={}){let L=!1;return Zu(p,V=>{Zu(g,ee=>{if(L===!0)return!0;L=!Qd(V.geometry,ee.geometry,{ignoreSelfIntersections:x})})}),L}var Dx=null;function g1(p,g){var x=ba(p),L=ba(g),V=x.type,ee=L.type;switch(V){case"Point":switch(ee){case"MultiPoint":return v1(x,L);case"LineString":return zd(x,L,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return yi(x,L,{ignoreBoundary:!0});default:throw new Error("feature2 "+ee+" geometry not supported")}case"MultiPoint":switch(ee){case"MultiPoint":return y1(x,L);case"LineString":return Dy(x,L);case"Polygon":case"MultiPolygon":return ky(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}case"LineString":switch(ee){case"LineString":return np(x,L);case"Polygon":case"MultiPolygon":return x1(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}case"Polygon":switch(ee){case"Polygon":case"MultiPolygon":return Rm(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}default:throw new Error("feature1 "+V+" geometry not supported")}}function v1(p,g){var x,L=!1;for(x=0;x<g.coordinates.length;x++)if(Mv(g.coordinates[x],p.coordinates)){L=!0;break}return L}function y1(p,g){for(var x=0;x<p.coordinates.length;x++){for(var L=!1,V=0;V<g.coordinates.length;V++)Mv(p.coordinates[x],g.coordinates[V])&&(L=!0);if(!L)return!1}return!0}function Dy(p,g){for(var x=!1,L=0;L<p.coordinates.length;L++){if(!zd(p.coordinates[L],g))return!1;x||(x=zd(p.coordinates[L],g,{ignoreEndVertices:!0}))}return x}function ky(p,g){for(var x=!0,L=!1,V=!1,ee=0;ee<p.coordinates.length;ee++){if(V=yi(p.coordinates[ee],g),!V){x=!1;break}L||(V=yi(p.coordinates[ee],g,{ignoreBoundary:!0}))}return x&&V}function np(p,g){for(var x=0;x<p.coordinates.length;x++)if(!zd(p.coordinates[x],g))return!1;return!0}function x1(p,g){var x=Vc(g),L=Vc(p);if(!Iv(x,L))return!1;for(var V=!1,ee=0;ee<p.coordinates.length;ee++){if(!yi(p.coordinates[ee],g))return!1;if(V||(V=yi(p.coordinates[ee],g,{ignoreBoundary:!0})),!V&&ee<p.coordinates.length-1){var _e=Ny(p.coordinates[ee],p.coordinates[ee+1]);V=yi(_e,g,{ignoreBoundary:!0})}}return V}function Rm(p,g){var x=Vc(p),L=Vc(g);if(!Iv(L,x))return!1;for(var V=0;V<p.coordinates[0].length;V++)if(!yi(p.coordinates[0][V],g))return!1;return!0}function Iv(p,g){return!(p[0]>g[0]||p[2]<g[2]||p[1]>g[1]||p[3]<g[3])}function Mv(p,g){return p[0]===g[0]&&p[1]===g[1]}function Ny(p,g){return[(p[0]+g[0])/2,(p[1]+g[1])/2]}var Lm=null;function zy(p,g){const x=ba(p),L=ba(g),V=x.type,ee=L.type,_e=x.coordinates,Ce=L.coordinates;switch(V){case"Point":switch(ee){case"Point":return Nx(_e,Ce);default:throw new Error("feature2 "+ee+" geometry not supported")}case"MultiPoint":switch(ee){case"Point":return jh(x,L);case"MultiPoint":return qd(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}case"LineString":switch(ee){case"Point":return zd(L,x,{ignoreEndVertices:!0});case"LineString":return Dm(x,L);case"MultiPoint":return Eg(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}case"Polygon":switch(ee){case"Point":return yi(L,x,{ignoreBoundary:!0});case"LineString":return Bb(x,L);case"Polygon":return ub(x,L);case"MultiPoint":return Fy(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}case"MultiPolygon":switch(ee){case"Polygon":return kx(x,L);default:throw new Error("feature2 "+ee+" geometry not supported")}default:throw new Error("feature1 "+V+" geometry not supported")}}function kx(p,g){return p.coordinates.some(x=>ub({type:"Polygon",coordinates:x},g))}function jh(p,g){let x,L=!1;for(x=0;x<p.coordinates.length;x++)if(Nx(p.coordinates[x],g.coordinates)){L=!0;break}return L}function qd(p,g){for(const x of g.coordinates){let L=!1;for(const V of p.coordinates)if(Nx(x,V)){L=!0;break}if(!L)return!1}return!0}function Eg(p,g){let x=!1;for(const L of g.coordinates)if(zd(L,p,{ignoreEndVertices:!0})&&(x=!0),!zd(L,p))return!1;return!!x}function Fy(p,g){for(const x of g.coordinates)if(!yi(x,p,{ignoreBoundary:!0}))return!1;return!0}function Dm(p,g){let x=!1;for(const L of g.coordinates)if(zd({type:"Point",coordinates:L},p,{ignoreEndVertices:!0})&&(x=!0),!zd({type:"Point",coordinates:L},p,{ignoreEndVertices:!1}))return!1;return x}function Bb(p,g){let x=!1,L=0;const V=Vc(p),ee=Vc(g);if(!cb(V,ee))return!1;for(L;L<g.coordinates.length-1;L++){const _e=jb(g.coordinates[L],g.coordinates[L+1]);if(yi({type:"Point",coordinates:_e},p,{ignoreBoundary:!0})){x=!0;break}}return x}function ub(p,g){if(p.type==="Feature"&&p.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;const x=Vc(p),L=Vc(g);if(!cb(x,L))return!1;const V=ba(g).coordinates;for(const ee of V)for(const _e of ee)if(!yi(_e,p))return!1;return!0}function cb(p,g){return!(p[0]>g[0]||p[2]<g[2]||p[1]>g[1]||p[3]<g[3])}function Nx(p,g){return p[0]===g[0]&&p[1]===g[1]}function jb(p,g){return[(p[0]+g[0])/2,(p[1]+g[1])/2]}var yw=null,am=i(79204);function Ub(p){var g=new am(p);return g.insert=function(x){if(x.type!=="Feature")throw new Error("invalid feature");return x.bbox=x.bbox?x.bbox:Vc(x),am.prototype.insert.call(this,x)},g.load=function(x){var L=[];return Array.isArray(x)?x.forEach(function(V){if(V.type!=="Feature")throw new Error("invalid features");V.bbox=V.bbox?V.bbox:Vc(V),L.push(V)}):Ia(x,function(V){if(V.type!=="Feature")throw new Error("invalid features");V.bbox=V.bbox?V.bbox:Vc(V),L.push(V)}),am.prototype.load.call(this,L)},g.remove=function(x,L){if(x.type!=="Feature")throw new Error("invalid feature");return x.bbox=x.bbox?x.bbox:Vc(x),am.prototype.remove.call(this,x,L)},g.clear=function(){return am.prototype.clear.call(this)},g.search=function(x){var L=am.prototype.search.call(this,this.toBBox(x));return nn(L)},g.collides=function(x){return am.prototype.collides.call(this,this.toBBox(x))},g.all=function(){var x=am.prototype.all.call(this);return nn(x)},g.toJSON=function(){return am.prototype.toJSON.call(this)},g.fromJSON=function(x){return am.prototype.fromJSON.call(this,x)},g.toBBox=function(x){var L;if(x.bbox)L=x.bbox;else if(Array.isArray(x)&&x.length===4)L=x;else if(Array.isArray(x)&&x.length===6)L=[x[0],x[1],x[3],x[4]];else if(x.type==="Feature")L=Vc(x);else if(x.type==="FeatureCollection")L=Vc(x);else throw new Error("invalid geojson");return{minX:L[0],minY:L[1],maxX:L[2],maxY:L[3]}},g}var xw=null;function Vb(p){if(!p)throw new Error("geojson is required");const g=[];return Zu(p,x=>{Gb(x,g)}),nn(g)}function Gb(p,g){let x=[];const L=p.geometry;if(L!==null){switch(L.type){case"Polygon":x=bo(L);break;case"LineString":x=[bo(L)]}x.forEach(V=>{$b(V,p.properties).forEach(_e=>{_e.id=g.length,g.push(_e)})})}}function $b(p,g){const x=[];return p.reduce((L,V)=>{const ee=on([L,V],g);return ee.bbox=Zb(L,V),x.push(ee),V}),x}function Zb(p,g){const x=p[0],L=p[1],V=g[0],ee=g[1],_e=x<V?x:V,Ce=L<ee?L:ee,Be=x>V?x:V,De=L>ee?L:ee;return[_e,Ce,Be,De]}var bw=null;function Wb(p,g,x={}){if(x=x||{},!mi(x))throw new Error("options is invalid");var L=x.tolerance||0,V=[],ee=Ub();const _e=Vb(p);ee.load(_e);var Ce;let Be=[];return Ws(g,function(De){var $e=!1;De&&(Ia(ee.search(De),function(dt){if($e===!1){var Ke=bo(De).sort(),pt=bo(dt).sort();if(ah(Ke,pt))$e=!0,Ce?Ce=zx(Ce,De)||Ce:Ce=De;else if(L===0?zd(Ke[0],dt)&&zd(Ke[1],dt):tc(dt,Ke[0]).properties.dist<=L&&tc(dt,Ke[1]).properties.dist<=L)$e=!0,Ce?Ce=zx(Ce,De)||Ce:Ce=De;else if(L===0?zd(pt[0],De)&&zd(pt[1],De):tc(De,pt[0]).properties.dist<=L&&tc(De,pt[1]).properties.dist<=L)if(Ce){const $t=zx(Ce,dt);$t?Ce=$t:Be.push(dt)}else Ce=dt}}),$e===!1&&Ce&&(V.push(Ce),Be.length&&(V=V.concat(Be),Be=[]),Ce=void 0))}),Ce&&V.push(Ce),nn(V)}function zx(p,g){var x=bo(g),L=bo(p),V=L[0],ee=L[L.length-1],_e=p.geometry.coordinates;if(ah(x[0],V))_e.unshift(x[1]);else if(ah(x[0],ee))_e.push(x[1]);else if(ah(x[1],V))_e.unshift(x[0]);else if(ah(x[1],ee))_e.push(x[0]);else return;return p}var ww=null,Hb=Object.defineProperty,Cv=(p,g)=>Hb(p,"name",{value:g,configurable:!0}),db=class{constructor(g){this.direction=!1,this.compareProperties=!0;var x,L,V;this.precision=Av(10,-((x=g==null?void 0:g.precision)!=null?x:17)),this.direction=(L=g==null?void 0:g.direction)!=null?L:!1,this.compareProperties=(V=g==null?void 0:g.compareProperties)!=null?V:!0}compare(g,x){if(g.type!==x.type||!By(g,x))return!1;switch(g.type){case"Point":return this.compareCoord(g.coordinates,x.coordinates);case"LineString":return this.compareLine(g.coordinates,x.coordinates);case"Polygon":return this.comparePolygon(g,x);case"GeometryCollection":return this.compareGeometryCollection(g,x);case"Feature":return this.compareFeature(g,x);case"FeatureCollection":return this.compareFeatureCollection(g,x);default:if(g.type.startsWith("Multi")){const L=Fx(g),V=Fx(x);return L.every(ee=>V.some(_e=>this.compare(ee,_e)))}}return!1}compareCoord(g,x){return g.length===x.length&&g.every((L,V)=>Math.abs(L-x[V])<this.precision)}compareLine(g,x,L=0,V=!1){if(!By(g,x))return!1;const ee=g;let _e=x;if(V&&!this.compareCoord(ee[0],_e[0])){const Be=this.fixStartIndex(_e,ee);if(Be)_e=Be;else return!1}const Ce=this.compareCoord(ee[L],_e[L]);return this.direction||Ce?this.comparePath(ee,_e):this.compareCoord(ee[L],_e[_e.length-(1+L)])?this.comparePath(ee.slice().reverse(),_e):!1}fixStartIndex(g,x){let L,V=-1;for(let ee=0;ee<g.length;ee++)if(this.compareCoord(g[ee],x[0])){V=ee;break}return V>=0&&(L=[].concat(g.slice(V,g.length),g.slice(1,V+1))),L}comparePath(g,x){return g.every((L,V)=>this.compareCoord(L,x[V]))}comparePolygon(g,x){if(this.compareLine(g.coordinates[0],x.coordinates[0],1,!0)){const L=g.coordinates.slice(1,g.coordinates.length),V=x.coordinates.slice(1,x.coordinates.length);return L.every(ee=>V.some(_e=>this.compareLine(ee,_e,1,!0)))}return!1}compareGeometryCollection(g,x){return By(g.geometries,x.geometries)&&this.compareBBox(g,x)&&g.geometries.every((L,V)=>this.compare(L,x.geometries[V]))}compareFeature(g,x){return g.id===x.id&&(this.compareProperties?Bx(g.properties,x.properties):!0)&&this.compareBBox(g,x)&&this.compare(g.geometry,x.geometry)}compareFeatureCollection(g,x){return By(g.features,x.features)&&this.compareBBox(g,x)&&g.features.every((L,V)=>this.compare(L,x.features[V]))}compareBBox(g,x){return!g.bbox&&!x.bbox||(g.bbox&&x.bbox?this.compareCoord(g.bbox,x.bbox):!1)}};Cv(db,"GeojsonEquality");var Kb=db;function By(p,g){return p.coordinates?p.coordinates.length===g.coordinates.length:p.length===g.length}Cv(By,"sameLength");function Fx(p){return p.coordinates.map(g=>({type:p.type.replace("Multi",""),coordinates:g}))}Cv(Fx,"explode");function hb(p,g,x){return new Kb(x).compare(p,g)}Cv(hb,"geojsonEquality");function Bx(p,g){if(p===null&&g===null)return!0;if(p===null||g===null)return!1;const x=Object.keys(p),L=Object.keys(g);if(x.length!==L.length)return!1;for(var V of x){const ee=p[V],_e=g[V],Ce=fb(ee)&&fb(_e);if(Ce&&!Bx(ee,_e)||!Ce&&ee!==_e)return!1}return!0}Cv(Bx,"equal");var fb=Cv(p=>p!=null&&typeof p=="object","isObject"),Ew=null;function Yb(p,g){const x=ba(p),L=ba(g),V=x.type,ee=L.type;if(V==="MultiPoint"&&ee!=="MultiPoint"||(V==="LineString"||V==="MultiLineString")&&ee!=="LineString"&&ee!=="MultiLineString"||(V==="Polygon"||V==="MultiPolygon")&&ee!=="Polygon"&&ee!=="MultiPolygon")throw new Error("features must be of the same type");if(V==="Point")throw new Error("Point geometry not supported");if(hb(p,g,{precision:6}))return!1;let _e=0;switch(V){case"MultiPoint":for(var Ce=0;Ce<x.coordinates.length;Ce++)for(var Be=0;Be<L.coordinates.length;Be++){var De=x.coordinates[Ce],$e=L.coordinates[Be];if(De[0]===$e[0]&&De[1]===$e[1])return!0}return!1;case"LineString":case"MultiLineString":Ws(p,dt=>{Ws(g,Ke=>{Wb(dt,Ke).features.length&&_e++})});break;case"Polygon":case"MultiPolygon":Ws(p,dt=>{Ws(g,Ke=>{vu(dt,Ke).features.length&&_e++})});break}return _e>0}var Sw=null,Xb=function(){function p(){uh()(this,p)}return bf()(p,[{key:"distance",value:function(x,L){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ee=V.units,_e=V.formatter,Ce=Array.isArray(x)?kt(x):x,Be=Array.isArray(L)?kt(L):L,De=os(Ce,Be,{units:ee||"kilometers"});return _e?_e(De):De}},{key:"pointToLineDistance",value:function(x,L,V){var ee=V.units,_e=V.method,Ce=V.formatter,Be=Array.isArray(x)?kt(x):x,De=Array.isArray(L)?on(L):L,$e=Cg(Be,De,{units:ee||"kilometers",method:_e||"geodesic"});return Ce&&($e=Ce($e)),$e}},{key:"length",value:function(x){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=L.units,ee=L.formatter,_e=Array.isArray(x)?on(x):x,Ce=Th(_e,{units:V||"kilometers"});return ee?ee(Ce):Ce}},{key:"area",value:function(x){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=L.formatter,ee=Array.isArray(x)?Qt(x):x,_e=Gm(ee);return V&&(_e=V(_e)),_e}},{key:"nearestPointOnLine",value:function(x,L){var V=Array.isArray(x)?kt(x):x,ee=Array.isArray(L)?on(L):L,_e=tc(ee,V);return _e}},{key:"pointAlongLine",value:function(x,L){var V=Array.isArray(x)?on(x):x,ee=this.length(x)*L,_e=T_(V,ee);return _e}},{key:"buffer",value:function(x,L){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return av(x,L,V)}},{key:"intersection",value:function(x,L,V){return q0(nn([x,L]),V||{})}},{key:"union",value:function(x,L,V){return e1(nn([x,L]),V||{})}},{key:"difference",value:function(x,L){return t1(nn([x,L]))}},{key:"bbox",value:function(x){return Vc(x)}},{key:"bboxPolygon",value:function(x){var L=this.bbox(x);return n1(L)}},{key:"centroid",value:function(x){return r1(x)}},{key:"center",value:function(x){return M_(x)}},{key:"isPointOnLine",value:function(x,L){var V=Array.isArray(x)?kt(x):x,ee=Array.isArray(L)?on(L):L,_e=zd(V,ee);return _e}},{key:"isPointInPolygon",value:function(x,L){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ee=V.ignoreBoundary,_e=Array.isArray(x)?kt(x):x,Ce=Array.isArray(L)?Qt(L):L,Be=yi(_e,Ce,{ignoreBoundary:ee||!1});return Be}},{key:"isIntersects",value:function(x,L){return _1(x,L)}},{key:"isWithin",value:function(x,L){return g1(x,L)}},{key:"isContains",value:function(x,L){return zy(x,L)}},{key:"isOverlap",value:function(x,L){return Yb(x,L)}}]),p}(),Jb=Xb},15909:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var dumi__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(87833),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(75271);function ownKeys(H,Q){var i=Object.keys(H);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(H);Q&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(H,M).enumerable})),i.push.apply(i,E)}return i}function _objectSpread(H){for(var Q=1;Q<arguments.length;Q++){var i=arguments[Q]!=null?arguments[Q]:{};Q%2?ownKeys(Object(i),!0).forEach(function(E){_defineProperty(H,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(E){Object.defineProperty(H,E,Object.getOwnPropertyDescriptor(i,E))})}return H}function _defineProperty(H,Q,i){return Q=_toPropertyKey(Q),Q in H?Object.defineProperty(H,Q,{value:i,enumerable:!0,configurable:!0,writable:!0}):H[Q]=i,H}function _toPropertyKey(H){var Q=_toPrimitive(H,"string");return _typeof(Q)==="symbol"?Q:String(Q)}function _toPrimitive(H,Q){if(_typeof(H)!=="object"||H===null)return H;var i=H[Symbol.toPrimitive];if(i!==void 0){var E=i.call(H,Q||"default");if(_typeof(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(H)}function _slicedToArray(H,Q){return _arrayWithHoles(H)||_iterableToArrayLimit(H,Q)||_unsupportedIterableToArray(H,Q)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(H,Q){if(H){if(typeof H=="string")return _arrayLikeToArray(H,Q);var i=Object.prototype.toString.call(H).slice(8,-1);if(i==="Object"&&H.constructor&&(i=H.constructor.name),i==="Map"||i==="Set")return Array.from(H);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(H,Q)}}function _arrayLikeToArray(H,Q){(Q==null||Q>H.length)&&(Q=H.length);for(var i=0,E=new Array(Q);i<Q;i++)E[i]=H[i];return E}function _iterableToArrayLimit(H,Q){var i=H==null?null:typeof Symbol!="undefined"&&H[Symbol.iterator]||H["@@iterator"];if(i!=null){var E,M,C,n,j=[],$=!0,U=!1;try{if(C=(i=i.call(H)).next,Q===0){if(Object(i)!==i)return;$=!1}else for(;!($=(E=C.call(i)).done)&&(j.push(E.value),j.length!==Q);$=!0);}catch(Y){U=!0,M=Y}finally{try{if(!$&&i.return!=null&&(n=i.return(),Object(n)!==n))return}finally{if(U)throw M}}return j}}function _arrayWithHoles(H){if(Array.isArray(H))return H}function _typeof(H){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},_typeof(H)}function builtInProcessor(entity,entryExports){var mod;switch(entity.$$__type){case"function":return eval(entity.$$__body.sourceCode);case"element":return mod=entity.$$__body.componentName.split(".").reduce(function(H,Q){return H[Q]},entryExports),mod===void 0?entity.$$__body.componentName:"_InternalPanelDoNotUseOrYouWillBeFired"in mod?mod._InternalPanelDoNotUseOrYouWillBeFired:mod}}function deepReplace(H,Q){return Array.isArray(H)?H.map(function(i){return deepReplace(i,Q)}):_typeof(H)==="object"&&(H==null?void 0:H.$$__type)==="element"?translatePresetToReact(H.$$__body,Q):_typeof(H)==="object"&&Object.prototype.toString.call(H)==="[object Object]"?Object.entries(H).reduce(function(i,E){var M=_slicedToArray(E,2),C=M[0],n=M[1];return _objectSpread(_objectSpread({},i),{},_defineProperty({},C,deepReplace(n,Q)))},{}):H}function translatePresetToReact(H,Q){var i=H.props,E=H.size,M=Q({$$__type:"element",$$__body:H});return React.createElement(M,deepReplace(_objectSpread(_objectSpread({},i),{},{style:_objectSpread(_objectSpread({},i.style),E)}),Q))}var AtomRenderer=function H(Q){var i=useSiteData(),E=i.entryExports;switch(Q.type){case"COMPONENT":return translatePresetToReact(Q.value,function(M){var C,n;return(C=(n=Q.processor)===null||n===void 0?void 0:n.call(Q,M,E))!==null&&C!==void 0?C:builtInProcessor(M,E)});default:return React.createElement(React.Fragment,null,Q.type," atom is not supported.")}}},26205:function(H,Q,i){"use strict";i.d(Q,{D:function(){return M},W:function(){return C}});var E=i(75271),M=(0,E.createContext)({pkg:{},historyType:"browser",entryExports:{},demos:{},components:{},locales:[],themeConfig:{},loading:!1,setLoading:function(){},_2_level_nav_available:!0}),C=function(){return(0,E.useContext)(M)}},91655:function(H,Q,i){"use strict";i.d(Q,{b:function(){return te}});var E=i(87833),M=i(75271);function C(X,B){return Y(X)||U(X,B)||j(X,B)||n()}function n(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(X,B){if(X){if(typeof X=="string")return $(X,B);var K=Object.prototype.toString.call(X).slice(8,-1);if(K==="Object"&&X.constructor&&(K=X.constructor.name),K==="Map"||K==="Set")return Array.from(X);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return $(X,B)}}function $(X,B){(B==null||B>X.length)&&(B=X.length);for(var K=0,de=new Array(B);K<B;K++)de[K]=X[K];return de}function U(X,B){var K=X==null?null:typeof Symbol!="undefined"&&X[Symbol.iterator]||X["@@iterator"];if(K!=null){var de,he,J,ae,se=[],Ee=!0,Le=!1;try{if(J=(K=K.call(X)).next,B===0){if(Object(K)!==K)return;Ee=!1}else for(;!(Ee=(de=J.call(K)).done)&&(se.push(de.value),se.length!==B);Ee=!0);}catch(ke){Le=!0,he=ke}finally{try{if(!Ee&&K.return!=null&&(ae=K.return(),Object(ae)!==ae))return}finally{if(Le)throw he}}return se}}function Y(X){if(Array.isArray(X))return X}var te=function(){var B=(0,E.YB)(),K=(0,E.WF)(),de=K.locales,he=(0,M.useState)(function(){return de.find(function(se){var Ee=se.id;return Ee===B.locale})}),J=C(he,1),ae=J[0];return ae}},67235:function(H,Q,i){"use strict";i.d(Q,{m:function(){return he}});var E=i(75271),M=i(43037);function C(J){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},C(J)}function n(){"use strict";n=function(){return J};var J={},ae=Object.prototype,se=ae.hasOwnProperty,Ee=Object.defineProperty||function(le,Je,we){le[Je]=we.value},Le=typeof Symbol=="function"?Symbol:{},ke=Le.iterator||"@@iterator",ye=Le.asyncIterator||"@@asyncIterator",Se=Le.toStringTag||"@@toStringTag";function be(le,Je,we){return Object.defineProperty(le,Je,{value:we,enumerable:!0,configurable:!0,writable:!0}),le[Je]}try{be({},"")}catch(le){be=function(we,Pn,Mt){return we[Pn]=Mt}}function Ue(le,Je,we,Pn){var Mt=Je&&Je.prototype instanceof nt?Je:nt,or=Object.create(Mt.prototype),wr=new vt(Pn||[]);return Ee(or,"_invoke",{value:st(le,we,wr)}),or}function qe(le,Je,we){try{return{type:"normal",arg:le.call(Je,we)}}catch(Pn){return{type:"throw",arg:Pn}}}J.wrap=Ue;var je={};function nt(){}function Ct(){}function ft(){}var Et={};be(Et,ke,function(){return this});var yt=Object.getPrototypeOf,_t=yt&&yt(yt(ue([])));_t&&_t!==ae&&se.call(_t,ke)&&(Et=_t);var He=ft.prototype=nt.prototype=Object.create(Et);function bt(le){["next","throw","return"].forEach(function(Je){be(le,Je,function(we){return this._invoke(Je,we)})})}function Tt(le,Je){function we(Mt,or,wr,Dr){var lr=qe(le[Mt],le,or);if(lr.type!=="throw"){var Pe=lr.arg,ut=Pe.value;return ut&&C(ut)=="object"&&se.call(ut,"__await")?Je.resolve(ut.__await).then(function(Ve){we("next",Ve,wr,Dr)},function(Ve){we("throw",Ve,wr,Dr)}):Je.resolve(ut).then(function(Ve){Pe.value=Ve,wr(Pe)},function(Ve){return we("throw",Ve,wr,Dr)})}Dr(lr.arg)}var Pn;Ee(this,"_invoke",{value:function(or,wr){function Dr(){return new Je(function(lr,Pe){we(or,wr,lr,Pe)})}return Pn=Pn?Pn.then(Dr,Dr):Dr()}})}function st(le,Je,we){var Pn="suspendedStart";return function(Mt,or){if(Pn==="executing")throw new Error("Generator is already running");if(Pn==="completed"){if(Mt==="throw")throw or;return lt()}for(we.method=Mt,we.arg=or;;){var wr=we.delegate;if(wr){var Dr=Qe(wr,we);if(Dr){if(Dr===je)continue;return Dr}}if(we.method==="next")we.sent=we._sent=we.arg;else if(we.method==="throw"){if(Pn==="suspendedStart")throw Pn="completed",we.arg;we.dispatchException(we.arg)}else we.method==="return"&&we.abrupt("return",we.arg);Pn="executing";var lr=qe(le,Je,we);if(lr.type==="normal"){if(Pn=we.done?"completed":"suspendedYield",lr.arg===je)continue;return{value:lr.arg,done:we.done}}lr.type==="throw"&&(Pn="completed",we.method="throw",we.arg=lr.arg)}}}function Qe(le,Je){var we=Je.method,Pn=le.iterator[we];if(Pn===void 0)return Je.delegate=null,we==="throw"&&le.iterator.return&&(Je.method="return",Je.arg=void 0,Qe(le,Je),Je.method==="throw")||we!=="return"&&(Je.method="throw",Je.arg=new TypeError("The iterator does not provide a '"+we+"' method")),je;var Mt=qe(Pn,le.iterator,Je.arg);if(Mt.type==="throw")return Je.method="throw",Je.arg=Mt.arg,Je.delegate=null,je;var or=Mt.arg;return or?or.done?(Je[le.resultName]=or.value,Je.next=le.nextLoc,Je.method!=="return"&&(Je.method="next",Je.arg=void 0),Je.delegate=null,je):or:(Je.method="throw",Je.arg=new TypeError("iterator result is not an object"),Je.delegate=null,je)}function mt(le){var Je={tryLoc:le[0]};1 in le&&(Je.catchLoc=le[1]),2 in le&&(Je.finallyLoc=le[2],Je.afterLoc=le[3]),this.tryEntries.push(Je)}function Ht(le){var Je=le.completion||{};Je.type="normal",delete Je.arg,le.completion=Je}function vt(le){this.tryEntries=[{tryLoc:"root"}],le.forEach(mt,this),this.reset(!0)}function ue(le){if(le){var Je=le[ke];if(Je)return Je.call(le);if(typeof le.next=="function")return le;if(!isNaN(le.length)){var we=-1,Pn=function Mt(){for(;++we<le.length;)if(se.call(le,we))return Mt.value=le[we],Mt.done=!1,Mt;return Mt.value=void 0,Mt.done=!0,Mt};return Pn.next=Pn}}return{next:lt}}function lt(){return{value:void 0,done:!0}}return Ct.prototype=ft,Ee(He,"constructor",{value:ft,configurable:!0}),Ee(ft,"constructor",{value:Ct,configurable:!0}),Ct.displayName=be(ft,Se,"GeneratorFunction"),J.isGeneratorFunction=function(le){var Je=typeof le=="function"&&le.constructor;return!!Je&&(Je===Ct||(Je.displayName||Je.name)==="GeneratorFunction")},J.mark=function(le){return Object.setPrototypeOf?Object.setPrototypeOf(le,ft):(le.__proto__=ft,be(le,Se,"GeneratorFunction")),le.prototype=Object.create(He),le},J.awrap=function(le){return{__await:le}},bt(Tt.prototype),be(Tt.prototype,ye,function(){return this}),J.AsyncIterator=Tt,J.async=function(le,Je,we,Pn,Mt){Mt===void 0&&(Mt=Promise);var or=new Tt(Ue(le,Je,we,Pn),Mt);return J.isGeneratorFunction(Je)?or:or.next().then(function(wr){return wr.done?wr.value:or.next()})},bt(He),be(He,Se,"Generator"),be(He,ke,function(){return this}),be(He,"toString",function(){return"[object Generator]"}),J.keys=function(le){var Je=Object(le),we=[];for(var Pn in Je)we.push(Pn);return we.reverse(),function Mt(){for(;we.length;){var or=we.pop();if(or in Je)return Mt.value=or,Mt.done=!1,Mt}return Mt.done=!0,Mt}},J.values=ue,vt.prototype={constructor:vt,reset:function(Je){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ht),!Je)for(var we in this)we.charAt(0)==="t"&&se.call(this,we)&&!isNaN(+we.slice(1))&&(this[we]=void 0)},stop:function(){this.done=!0;var Je=this.tryEntries[0].completion;if(Je.type==="throw")throw Je.arg;return this.rval},dispatchException:function(Je){if(this.done)throw Je;var we=this;function Pn(Pe,ut){return wr.type="throw",wr.arg=Je,we.next=Pe,ut&&(we.method="next",we.arg=void 0),!!ut}for(var Mt=this.tryEntries.length-1;Mt>=0;--Mt){var or=this.tryEntries[Mt],wr=or.completion;if(or.tryLoc==="root")return Pn("end");if(or.tryLoc<=this.prev){var Dr=se.call(or,"catchLoc"),lr=se.call(or,"finallyLoc");if(Dr&&lr){if(this.prev<or.catchLoc)return Pn(or.catchLoc,!0);if(this.prev<or.finallyLoc)return Pn(or.finallyLoc)}else if(Dr){if(this.prev<or.catchLoc)return Pn(or.catchLoc,!0)}else{if(!lr)throw new Error("try statement without catch or finally");if(this.prev<or.finallyLoc)return Pn(or.finallyLoc)}}}},abrupt:function(Je,we){for(var Pn=this.tryEntries.length-1;Pn>=0;--Pn){var Mt=this.tryEntries[Pn];if(Mt.tryLoc<=this.prev&&se.call(Mt,"finallyLoc")&&this.prev<Mt.finallyLoc){var or=Mt;break}}or&&(Je==="break"||Je==="continue")&&or.tryLoc<=we&&we<=or.finallyLoc&&(or=null);var wr=or?or.completion:{};return wr.type=Je,wr.arg=we,or?(this.method="next",this.next=or.finallyLoc,je):this.complete(wr)},complete:function(Je,we){if(Je.type==="throw")throw Je.arg;return Je.type==="break"||Je.type==="continue"?this.next=Je.arg:Je.type==="return"?(this.rval=this.arg=Je.arg,this.method="return",this.next="end"):Je.type==="normal"&&we&&(this.next=we),je},finish:function(Je){for(var we=this.tryEntries.length-1;we>=0;--we){var Pn=this.tryEntries[we];if(Pn.finallyLoc===Je)return this.complete(Pn.completion,Pn.afterLoc),Ht(Pn),je}},catch:function(Je){for(var we=this.tryEntries.length-1;we>=0;--we){var Pn=this.tryEntries[we];if(Pn.tryLoc===Je){var Mt=Pn.completion;if(Mt.type==="throw"){var or=Mt.arg;Ht(Pn)}return or}}throw new Error("illegal catch attempt")},delegateYield:function(Je,we,Pn){return this.delegate={iterator:ue(Je),resultName:we,nextLoc:Pn},this.method==="next"&&(this.arg=void 0),je}},J}function j(J,ae,se,Ee,Le,ke,ye){try{var Se=J[ke](ye),be=Se.value}catch(Ue){se(Ue);return}Se.done?ae(be):Promise.resolve(be).then(Ee,Le)}function $(J){return function(){var ae=this,se=arguments;return new Promise(function(Ee,Le){var ke=J.apply(ae,se);function ye(be){j(ke,Ee,Le,ye,Se,"next",be)}function Se(be){j(ke,Ee,Le,ye,Se,"throw",be)}ye(void 0)})}}function U(J,ae){return K(J)||B(J,ae)||te(J,ae)||Y()}function Y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(J,ae){if(J){if(typeof J=="string")return X(J,ae);var se=Object.prototype.toString.call(J).slice(8,-1);if(se==="Object"&&J.constructor&&(se=J.constructor.name),se==="Map"||se==="Set")return Array.from(J);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return X(J,ae)}}function X(J,ae){(ae==null||ae>J.length)&&(ae=J.length);for(var se=0,Ee=new Array(ae);se<ae;se++)Ee[se]=J[se];return Ee}function B(J,ae){var se=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(se!=null){var Ee,Le,ke,ye,Se=[],be=!0,Ue=!1;try{if(ke=(se=se.call(J)).next,ae===0){if(Object(se)!==se)return;be=!1}else for(;!(be=(Ee=ke.call(se)).done)&&(Se.push(Ee.value),Se.length!==ae);be=!0);}catch(qe){Ue=!0,Le=qe}finally{try{if(!be&&se.return!=null&&(ye=se.return(),Object(ye)!==ye))return}finally{if(Ue)throw Le}}return Se}}function K(J){if(Array.isArray(J))return J}var de=new Map,he=function(ae){var se=ae.id,Ee=ae.component,Le=ae.renderOpts,ke=ae.onResolved,ye=(0,E.useState)(Ee?(0,M.Ns)(Ee):null),Se=U(ye,2),be=Se[0],Ue=Se[1],qe=(0,E.useRef)(null),je=(0,E.useRef)(function(){}),nt=(0,E.useRef)(qe.current),Ct=(0,E.useRef)(!1);if(nt.current!==qe.current){if(nt.current===null){var ft=de.get(se);ft!=null&&ft.teardown&&ft!==null&&ft!==void 0&&ft.hostElement&&qe.current&&(qe.current.appendChild(ft.hostElement),je.current=ft.teardown)}nt.current=qe.current}var Et=Le==null?void 0:Le.renderer;return(0,E.useEffect)(function(){function yt(){return _t.apply(this,arguments)}function _t(){return _t=$(n().mark(function He(){var bt,Tt,st,Qe,mt,Ht;return n().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!(!qe.current||!Et||!be)){ue.next=2;break}return ue.abrupt("return");case 2:if(bt=de.get(se),!Ct.current){ue.next=5;break}return ue.abrupt("return");case 5:return Ct.current=!0,Tt=bt==null?void 0:bt.teardown,ue.next=9,be;case 9:return st=ue.sent,Qe=document.createElement("div"),ue.prev=11,qe.current.appendChild(Qe),ue.next=15,Et(Qe,st);case 15:Ht=ue.sent,Tt==null||Tt(),bt==null||(mt=bt.hostElement)===null||mt===void 0||mt.remove(),je.current=function(){Ht(),Qe.remove(),de.delete(se)},de.set(se,{teardown:je.current,hostElement:Qe}),ue.next=26;break;case 22:throw ue.prev=22,ue.t0=ue.catch(11),Qe.remove(),ue.t0;case 26:return ue.prev=26,Ct.current=!1,ke==null||ke(),ue.finish(26);case 30:case"end":return ue.stop()}},He,null,[[11,22,26,30]])})),_t.apply(this,arguments)}yt()},[qe.current,be,Et]),(0,E.useEffect)(function(){return function(){return je.current()}},[]),{canvasRef:qe,setComponent:Ue}}},43037:function(H,Q,i){"use strict";i.d(Q,{AM:function(){return se},EV:function(){return he},LI:function(){return Ee},M7:function(){return Le},Ns:function(){return Se},RX:function(){return ae},m7:function(){return ye},qu:function(){return ke},rl:function(){return J}});var E=i(87833),M=i(75271),C=i(91655);function n(){"use strict";n=function(){return Ue};var Ue={},qe=Object.prototype,je=qe.hasOwnProperty,nt=Object.defineProperty||function(Pe,ut,Ve){Pe[ut]=Ve.value},Ct=typeof Symbol=="function"?Symbol:{},ft=Ct.iterator||"@@iterator",Et=Ct.asyncIterator||"@@asyncIterator",yt=Ct.toStringTag||"@@toStringTag";function _t(Pe,ut,Ve){return Object.defineProperty(Pe,ut,{value:Ve,enumerable:!0,configurable:!0,writable:!0}),Pe[ut]}try{_t({},"")}catch(Pe){_t=function(Ve,gt,Gt){return Ve[gt]=Gt}}function He(Pe,ut,Ve,gt){var Gt=ut&&ut.prototype instanceof st?ut:st,Me=Object.create(Gt.prototype),At=new wr(gt||[]);return nt(Me,"_invoke",{value:we(Pe,Ve,At)}),Me}function bt(Pe,ut,Ve){try{return{type:"normal",arg:Pe.call(ut,Ve)}}catch(gt){return{type:"throw",arg:gt}}}Ue.wrap=He;var Tt={};function st(){}function Qe(){}function mt(){}var Ht={};_t(Ht,ft,function(){return this});var vt=Object.getPrototypeOf,ue=vt&&vt(vt(Dr([])));ue&&ue!==qe&&je.call(ue,ft)&&(Ht=ue);var lt=mt.prototype=st.prototype=Object.create(Ht);function le(Pe){["next","throw","return"].forEach(function(ut){_t(Pe,ut,function(Ve){return this._invoke(ut,Ve)})})}function Je(Pe,ut){function Ve(Gt,Me,At,Bt){var Sn=bt(Pe[Gt],Pe,Me);if(Sn.type!=="throw"){var Lt=Sn.arg,Bn=Lt.value;return Bn&&U(Bn)=="object"&&je.call(Bn,"__await")?ut.resolve(Bn.__await).then(function(en){Ve("next",en,At,Bt)},function(en){Ve("throw",en,At,Bt)}):ut.resolve(Bn).then(function(en){Lt.value=en,At(Lt)},function(en){return Ve("throw",en,At,Bt)})}Bt(Sn.arg)}var gt;nt(this,"_invoke",{value:function(Me,At){function Bt(){return new ut(function(Sn,Lt){Ve(Me,At,Sn,Lt)})}return gt=gt?gt.then(Bt,Bt):Bt()}})}function we(Pe,ut,Ve){var gt="suspendedStart";return function(Gt,Me){if(gt==="executing")throw new Error("Generator is already running");if(gt==="completed"){if(Gt==="throw")throw Me;return lr()}for(Ve.method=Gt,Ve.arg=Me;;){var At=Ve.delegate;if(At){var Bt=Pn(At,Ve);if(Bt){if(Bt===Tt)continue;return Bt}}if(Ve.method==="next")Ve.sent=Ve._sent=Ve.arg;else if(Ve.method==="throw"){if(gt==="suspendedStart")throw gt="completed",Ve.arg;Ve.dispatchException(Ve.arg)}else Ve.method==="return"&&Ve.abrupt("return",Ve.arg);gt="executing";var Sn=bt(Pe,ut,Ve);if(Sn.type==="normal"){if(gt=Ve.done?"completed":"suspendedYield",Sn.arg===Tt)continue;return{value:Sn.arg,done:Ve.done}}Sn.type==="throw"&&(gt="completed",Ve.method="throw",Ve.arg=Sn.arg)}}}function Pn(Pe,ut){var Ve=ut.method,gt=Pe.iterator[Ve];if(gt===void 0)return ut.delegate=null,Ve==="throw"&&Pe.iterator.return&&(ut.method="return",ut.arg=void 0,Pn(Pe,ut),ut.method==="throw")||Ve!=="return"&&(ut.method="throw",ut.arg=new TypeError("The iterator does not provide a '"+Ve+"' method")),Tt;var Gt=bt(gt,Pe.iterator,ut.arg);if(Gt.type==="throw")return ut.method="throw",ut.arg=Gt.arg,ut.delegate=null,Tt;var Me=Gt.arg;return Me?Me.done?(ut[Pe.resultName]=Me.value,ut.next=Pe.nextLoc,ut.method!=="return"&&(ut.method="next",ut.arg=void 0),ut.delegate=null,Tt):Me:(ut.method="throw",ut.arg=new TypeError("iterator result is not an object"),ut.delegate=null,Tt)}function Mt(Pe){var ut={tryLoc:Pe[0]};1 in Pe&&(ut.catchLoc=Pe[1]),2 in Pe&&(ut.finallyLoc=Pe[2],ut.afterLoc=Pe[3]),this.tryEntries.push(ut)}function or(Pe){var ut=Pe.completion||{};ut.type="normal",delete ut.arg,Pe.completion=ut}function wr(Pe){this.tryEntries=[{tryLoc:"root"}],Pe.forEach(Mt,this),this.reset(!0)}function Dr(Pe){if(Pe){var ut=Pe[ft];if(ut)return ut.call(Pe);if(typeof Pe.next=="function")return Pe;if(!isNaN(Pe.length)){var Ve=-1,gt=function Gt(){for(;++Ve<Pe.length;)if(je.call(Pe,Ve))return Gt.value=Pe[Ve],Gt.done=!1,Gt;return Gt.value=void 0,Gt.done=!0,Gt};return gt.next=gt}}return{next:lr}}function lr(){return{value:void 0,done:!0}}return Qe.prototype=mt,nt(lt,"constructor",{value:mt,configurable:!0}),nt(mt,"constructor",{value:Qe,configurable:!0}),Qe.displayName=_t(mt,yt,"GeneratorFunction"),Ue.isGeneratorFunction=function(Pe){var ut=typeof Pe=="function"&&Pe.constructor;return!!ut&&(ut===Qe||(ut.displayName||ut.name)==="GeneratorFunction")},Ue.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,mt):(Pe.__proto__=mt,_t(Pe,yt,"GeneratorFunction")),Pe.prototype=Object.create(lt),Pe},Ue.awrap=function(Pe){return{__await:Pe}},le(Je.prototype),_t(Je.prototype,Et,function(){return this}),Ue.AsyncIterator=Je,Ue.async=function(Pe,ut,Ve,gt,Gt){Gt===void 0&&(Gt=Promise);var Me=new Je(He(Pe,ut,Ve,gt),Gt);return Ue.isGeneratorFunction(ut)?Me:Me.next().then(function(At){return At.done?At.value:Me.next()})},le(lt),_t(lt,yt,"Generator"),_t(lt,ft,function(){return this}),_t(lt,"toString",function(){return"[object Generator]"}),Ue.keys=function(Pe){var ut=Object(Pe),Ve=[];for(var gt in ut)Ve.push(gt);return Ve.reverse(),function Gt(){for(;Ve.length;){var Me=Ve.pop();if(Me in ut)return Gt.value=Me,Gt.done=!1,Gt}return Gt.done=!0,Gt}},Ue.values=Dr,wr.prototype={constructor:wr,reset:function(ut){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(or),!ut)for(var Ve in this)Ve.charAt(0)==="t"&&je.call(this,Ve)&&!isNaN(+Ve.slice(1))&&(this[Ve]=void 0)},stop:function(){this.done=!0;var ut=this.tryEntries[0].completion;if(ut.type==="throw")throw ut.arg;return this.rval},dispatchException:function(ut){if(this.done)throw ut;var Ve=this;function gt(Lt,Bn){return At.type="throw",At.arg=ut,Ve.next=Lt,Bn&&(Ve.method="next",Ve.arg=void 0),!!Bn}for(var Gt=this.tryEntries.length-1;Gt>=0;--Gt){var Me=this.tryEntries[Gt],At=Me.completion;if(Me.tryLoc==="root")return gt("end");if(Me.tryLoc<=this.prev){var Bt=je.call(Me,"catchLoc"),Sn=je.call(Me,"finallyLoc");if(Bt&&Sn){if(this.prev<Me.catchLoc)return gt(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return gt(Me.finallyLoc)}else if(Bt){if(this.prev<Me.catchLoc)return gt(Me.catchLoc,!0)}else{if(!Sn)throw new Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return gt(Me.finallyLoc)}}}},abrupt:function(ut,Ve){for(var gt=this.tryEntries.length-1;gt>=0;--gt){var Gt=this.tryEntries[gt];if(Gt.tryLoc<=this.prev&&je.call(Gt,"finallyLoc")&&this.prev<Gt.finallyLoc){var Me=Gt;break}}Me&&(ut==="break"||ut==="continue")&&Me.tryLoc<=Ve&&Ve<=Me.finallyLoc&&(Me=null);var At=Me?Me.completion:{};return At.type=ut,At.arg=Ve,Me?(this.method="next",this.next=Me.finallyLoc,Tt):this.complete(At)},complete:function(ut,Ve){if(ut.type==="throw")throw ut.arg;return ut.type==="break"||ut.type==="continue"?this.next=ut.arg:ut.type==="return"?(this.rval=this.arg=ut.arg,this.method="return",this.next="end"):ut.type==="normal"&&Ve&&(this.next=Ve),Tt},finish:function(ut){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var gt=this.tryEntries[Ve];if(gt.finallyLoc===ut)return this.complete(gt.completion,gt.afterLoc),or(gt),Tt}},catch:function(ut){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var gt=this.tryEntries[Ve];if(gt.tryLoc===ut){var Gt=gt.completion;if(Gt.type==="throw"){var Me=Gt.arg;or(gt)}return Me}}throw new Error("illegal catch attempt")},delegateYield:function(ut,Ve,gt){return this.delegate={iterator:Dr(ut),resultName:Ve,nextLoc:gt},this.method==="next"&&(this.arg=void 0),Tt}},Ue}function j(Ue,qe,je,nt,Ct,ft,Et){try{var yt=Ue[ft](Et),_t=yt.value}catch(He){je(He);return}yt.done?qe(_t):Promise.resolve(_t).then(nt,Ct)}function $(Ue){return function(){var qe=this,je=arguments;return new Promise(function(nt,Ct){var ft=Ue.apply(qe,je);function Et(_t){j(ft,nt,Ct,Et,yt,"next",_t)}function yt(_t){j(ft,nt,Ct,Et,yt,"throw",_t)}Et(void 0)})}}function U(Ue){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(qe){return typeof qe}:function(qe){return qe&&typeof Symbol=="function"&&qe.constructor===Symbol&&qe!==Symbol.prototype?"symbol":typeof qe},U(Ue)}function Y(Ue,qe){return de(Ue)||K(Ue,qe)||X(Ue,qe)||te()}function te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(Ue,qe){if(Ue){if(typeof Ue=="string")return B(Ue,qe);var je=Object.prototype.toString.call(Ue).slice(8,-1);if(je==="Object"&&Ue.constructor&&(je=Ue.constructor.name),je==="Map"||je==="Set")return Array.from(Ue);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return B(Ue,qe)}}function B(Ue,qe){(qe==null||qe>Ue.length)&&(qe=Ue.length);for(var je=0,nt=new Array(qe);je<qe;je++)nt[je]=Ue[je];return nt}function K(Ue,qe){var je=Ue==null?null:typeof Symbol!="undefined"&&Ue[Symbol.iterator]||Ue["@@iterator"];if(je!=null){var nt,Ct,ft,Et,yt=[],_t=!0,He=!1;try{if(ft=(je=je.call(Ue)).next,qe===0){if(Object(je)!==je)return;_t=!1}else for(;!(_t=(nt=ft.call(je)).done)&&(yt.push(nt.value),yt.length!==qe);_t=!0);}catch(bt){He=!0,Ct=bt}finally{try{if(!_t&&je.return!=null&&(Et=je.return(),Object(Et)!==Et))return}finally{if(He)throw Ct}}return yt}}function de(Ue){if(Array.isArray(Ue))return Ue}var he,J=function(qe){he=qe},ae=function(){var qe=(0,E.YB)(),je=(0,E.Ov)(),nt=je.routes,Ct=(0,E.WF)(),ft=Ct.locales,Et=(0,M.useState)(function(){var He=ft.slice().reverse();return Object.values(nt).reduce(function(bt,Tt){var st=He.find(function(Qe){return"suffix"in Qe?Tt.path.endsWith(Qe.suffix):Tt.path.startsWith(Qe.base.slice(1))});return Tt.parentId==="DocLayout"&&st.id===qe.locale&&(bt[Tt.id]=Tt),bt},{})}),yt=Y(Et,1),_t=yt[0];return _t},se=function(qe){var je=`/**
 * This is an auto-generated demo by dumi
 * if you think it is not working as expected,
 * please report the issue at
 * https://github.com/umijs/dumi/issues
 */`;return qe.startsWith("18.")||qe==="latest"?"".concat(je,`

import React from 'react';
import { createRoot } from "react-dom/client";
import App from "./App";

const rootElement = document.getElementById("root");
const root = createRoot(rootElement);

root.render(<App />);`):"".concat(je,`

import React from 'react';
import ReactDOM from 'react-dom';
import App from './App';

ReactDOM.render(
  <App />,
  document.getElementById('root'),
);`)},Ee=typeof window!="undefined"?M.useLayoutEffect:M.useEffect,Le=function(){var qe=(0,C.b)();return(0,M.useCallback)(function(je,nt){return("order"in je&&"order"in nt?je.order-nt.order:0)||("link"in je&&"link"in nt?je.link.split("/").length-nt.link.split("/").length:0)||("path"in je&&"path"in nt?je.path.split("/").length-nt.path.split("/").length:0)||(je.title?je.title.localeCompare(nt.title||"",qe.id):-1)},[])},ke=function(qe,je,nt){var Ct,ft=je==="nav.second"?U(nt.nav)==="object"?nt.nav.second:{}:nt[je];switch(U(ft)){case"object":qe.title=ft.title||qe.title,qe.order=(Ct=ft.order)!==null&&Ct!==void 0?Ct:qe.order;break;case"string":qe.title=ft||qe.title;break;default:}return qe};function ye(Ue,qe){return Array.isArray(Ue)?Ue:Ue[qe.id]}function Se(Ue){return be.apply(this,arguments)}function be(){return be=$(n().mark(function Ue(qe){var je,nt;return n().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(!(qe instanceof Promise)){ft.next=6;break}return ft.next=3,qe;case 3:ft.t0=ft.sent,ft.next=7;break;case 6:ft.t0=qe;case 7:return nt=ft.t0,ft.abrupt("return",(je=nt.default)!==null&&je!==void 0?je:nt);case 9:case"end":return ft.stop()}},Ue)})),be.apply(this,arguments)}},44689:function(H,Q,i){"use strict";i.d(Q,{r:function(){return Y}});var E=i(75271),M=Object.defineProperty,C=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,$=(X,B,K)=>B in X?M(X,B,{enumerable:!0,configurable:!0,writable:!0,value:K}):X[B]=K,U=(X,B)=>{for(var K in B||(B={}))n.call(B,K)&&$(X,K,B[K]);if(C)for(var K of C(B))j.call(B,K)&&$(X,K,B[K]);return X};const Y=X=>E.createElement("svg",U({viewBox:"64 64 896 896"},X),E.createElement("path",{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}));var te="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNOTEyIDE5MGgtNjkuOWMtOS44IDAtMTkuMSA0LjUtMjUuMSAxMi4yTDQwNC43IDcyNC41IDIwNyA0NzRhMzIgMzIgMCAwIDAtMjUuMS0xMi4ySDExMmMtNi43IDAtMTAuNCA3LjctNi4zIDEyLjlsMjczLjkgMzQ3YzEyLjggMTYuMiAzNy40IDE2LjIgNTAuMyAwbDQ4OC40LTYxOC45YzQuMS01LjEuNC0xMi44LTYuMy0xMi44eiIvPjwvc3ZnPg=="},72840:function(H,Q,i){"use strict";i.d(Q,{r:function(){return Y}});var E=i(75271),M=Object.defineProperty,C=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,$=(X,B,K)=>B in X?M(X,B,{enumerable:!0,configurable:!0,writable:!0,value:K}):X[B]=K,U=(X,B)=>{for(var K in B||(B={}))n.call(B,K)&&$(X,K,B[K]);if(C)for(var K of C(B))j.call(B,K)&&$(X,K,B[K]);return X};const Y=X=>E.createElement("svg",U({viewBox:"64 64 896 896"},X),E.createElement("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}));var te="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNMjU3LjcgNzUyYzIgMCA0LS4yIDYtLjVMNDMxLjkgNzIyYzItLjQgMy45LTEuMyA1LjMtMi44bDQyMy45LTQyMy45YTkuOTYgOS45NiAwIDAgMCAwLTE0LjFMNjk0LjkgMTE0LjljLTEuOS0xLjktNC40LTIuOS03LjEtMi45cy01LjIgMS03LjEgMi45TDI1Ni44IDUzOC44Yy0xLjUgMS41LTIuNCAzLjMtMi44IDUuM2wtMjkuNSAxNjguMmEzMy41IDMzLjUgMCAwIDAgOS40IDI5LjhjNi42IDYuNCAxNC45IDkuOSAyMy44IDkuOXptNjcuNC0xNzQuNEw2ODcuOCAyMTVsNzMuMyA3My4zLTM2Mi43IDM2Mi42LTg4LjkgMTUuNyAxNS42LTg5ek04ODAgODM2SDE0NGMtMTcuNyAwLTMyIDE0LjMtMzIgMzJ2MzZjMCA0LjQgMy42IDggOCA4aDc4NGM0LjQgMCA4LTMuNiA4LTh2LTM2YzAtMTcuNy0xNC4zLTMyLTMyLTMyeiIvPjwvc3ZnPg=="},69536:function(H,Q,i){"use strict";i.d(Q,{Il:function(){return j},Ov:function(){return $},T$:function(){return Y}});var E=i(48385),M=i(75271),C=i(5791),n=["element"],j=M.createContext({});function $(){return M.useContext(j)}function U(){var K=(0,C.TH)(),de=$(),he=de.clientRoutes,J=(0,C.fp)(he,K.pathname);return J||[]}function Y(){var K,de=U().slice(-1),he=((K=de[0])===null||K===void 0?void 0:K.route)||{},J=he.element,ae=(0,E.Z)(he,n);return ae}function te(){var K=U(),de=$(),he=de.serverLoaderData,J=de.basename,ae=React.useState(function(){var ke={},ye=!1;return K.forEach(function(Se){var be=he[Se.route.id];be&&(Object.assign(ke,be),ye=!0)}),ye?ke:void 0}),se=_slicedToArray(ae,2),Ee=se[0],Le=se[1];return React.useEffect(function(){window.__UMI_LOADER_DATA__||Promise.all(K.filter(function(ke){return ke.route.hasServerLoader}).map(function(ke){return new Promise(function(ye){fetchServerLoader({id:ke.route.id,basename:J,cb:ye})})})).then(function(ke){if(ke.length){var ye={};ke.forEach(function(Se){Object.assign(ye,Se)}),Le(ye)}})},[]),{data:Ee}}function X(){var K=useRouteData(),de=$();return{data:de.clientLoaderData[K.route.id]}}function B(){var K=te(),de=X();return{data:_objectSpread(_objectSpread({},K.data),de.data)}}},83123:function(H,Q,i){"use strict";i.d(Q,{Q:function(){return C},X:function(){return M}});var E=i(75271),M=E.createContext(void 0);function C(){return E.useContext(M)}},84875:function(H,Q){var i,E;(function(){"use strict";var M={}.hasOwnProperty,C="[native code]";function n(){for(var j=[],$=0;$<arguments.length;$++){var U=arguments[$];if(U){var Y=typeof U;if(Y==="string"||Y==="number")j.push(U);else if(Array.isArray(U)){if(U.length){var te=n.apply(null,U);te&&j.push(te)}}else if(Y==="object"){if(U.toString!==Object.prototype.toString&&!U.toString.toString().includes("[native code]")){j.push(U.toString());continue}for(var X in U)M.call(U,X)&&U[X]&&j.push(X)}}}return j.join(" ")}H.exports?(n.default=n,H.exports=n):(i=[],E=function(){return n}.apply(Q,i),E!==void 0&&(H.exports=E))})()},14978:function(H,Q,i){"use strict";var E;E={value:!0},Q.Z=void 0;var M=i(37581);function C(j){return M.compressToBase64(j).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function n(j){return C(JSON.stringify(j))}Q.Z=n},874:function(H,Q,i){"use strict";var E=i(16935),M={"text/plain":"Text","text/html":"Url",default:"Text"},C="Copy to clipboard: #{key}, Enter";function n($){var U=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return $.replace(/#{\s*key\s*}/g,U)}function j($,U){var Y,te,X,B,K,de,he=!1;U||(U={}),Y=U.debug||!1;try{X=E(),B=document.createRange(),K=document.getSelection(),de=document.createElement("span"),de.textContent=$,de.ariaHidden="true",de.style.all="unset",de.style.position="fixed",de.style.top=0,de.style.clip="rect(0, 0, 0, 0)",de.style.whiteSpace="pre",de.style.webkitUserSelect="text",de.style.MozUserSelect="text",de.style.msUserSelect="text",de.style.userSelect="text",de.addEventListener("copy",function(ae){if(ae.stopPropagation(),U.format)if(ae.preventDefault(),typeof ae.clipboardData=="undefined"){Y&&console.warn("unable to use e.clipboardData"),Y&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var se=M[U.format]||M.default;window.clipboardData.setData(se,$)}else ae.clipboardData.clearData(),ae.clipboardData.setData(U.format,$);U.onCopy&&(ae.preventDefault(),U.onCopy(ae.clipboardData))}),document.body.appendChild(de),B.selectNodeContents(de),K.addRange(B);var J=document.execCommand("copy");if(!J)throw new Error("copy command was unsuccessful");he=!0}catch(ae){Y&&console.error("unable to copy using execCommand: ",ae),Y&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(U.format||"text",$),U.onCopy&&U.onCopy(window.clipboardData),he=!0}catch(se){Y&&console.error("unable to copy using clipboardData: ",se),Y&&console.error("falling back to prompt"),te=n("message"in U?U.message:C),window.prompt(te,$)}}finally{K&&(typeof K.removeRange=="function"?K.removeRange(B):K.removeAllRanges()),de&&document.body.removeChild(de),X()}return he}H.exports=j},12454:function(H){"use strict";var Q=function(se){return i(se)&&!E(se)};function i(ae){return!!ae&&typeof ae=="object"}function E(ae){var se=Object.prototype.toString.call(ae);return se==="[object RegExp]"||se==="[object Date]"||n(ae)}var M=typeof Symbol=="function"&&Symbol.for,C=M?Symbol.for("react.element"):60103;function n(ae){return ae.$$typeof===C}function j(ae){return Array.isArray(ae)?[]:{}}function $(ae,se){return se.clone!==!1&&se.isMergeableObject(ae)?he(j(ae),ae,se):ae}function U(ae,se,Ee){return ae.concat(se).map(function(Le){return $(Le,Ee)})}function Y(ae,se){if(!se.customMerge)return he;var Ee=se.customMerge(ae);return typeof Ee=="function"?Ee:he}function te(ae){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(ae).filter(function(se){return Object.propertyIsEnumerable.call(ae,se)}):[]}function X(ae){return Object.keys(ae).concat(te(ae))}function B(ae,se){try{return se in ae}catch(Ee){return!1}}function K(ae,se){return B(ae,se)&&!(Object.hasOwnProperty.call(ae,se)&&Object.propertyIsEnumerable.call(ae,se))}function de(ae,se,Ee){var Le={};return Ee.isMergeableObject(ae)&&X(ae).forEach(function(ke){Le[ke]=$(ae[ke],Ee)}),X(se).forEach(function(ke){K(ae,ke)||(B(ae,ke)&&Ee.isMergeableObject(se[ke])?Le[ke]=Y(ke,Ee)(ae[ke],se[ke],Ee):Le[ke]=$(se[ke],Ee))}),Le}function he(ae,se,Ee){Ee=Ee||{},Ee.arrayMerge=Ee.arrayMerge||U,Ee.isMergeableObject=Ee.isMergeableObject||Q,Ee.cloneUnlessOtherwiseSpecified=$;var Le=Array.isArray(se),ke=Array.isArray(ae),ye=Le===ke;return ye?Le?Ee.arrayMerge(ae,se,Ee):de(ae,se,Ee):$(se,Ee)}he.all=function(se,Ee){if(!Array.isArray(se))throw new Error("first argument should be an array");return se.reduce(function(Le,ke){return he(Le,ke,Ee)},{})};var J=he;H.exports=J},4280:function(H){var Q=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,M=Object.prototype.hasOwnProperty,C=(Se,be)=>{for(var Ue in be)Q(Se,Ue,{get:be[Ue],enumerable:!0})},n=(Se,be,Ue,qe)=>{if(be&&typeof be=="object"||typeof be=="function")for(let je of E(be))!M.call(Se,je)&&je!==Ue&&Q(Se,je,{get:()=>be[je],enumerable:!(qe=i(be,je))||qe.enumerable});return Se},j=Se=>n(Q({},"__esModule",{value:!0}),Se),$={};C($,{DEFAULT_DEMO_MODULE_EXTENSIONS:()=>Ee,DEFAULT_DEMO_PLAIN_TEXT_EXTENSIONS:()=>Le,FS_CACHE_DIR:()=>ke,LOCAL_DUMI_DIR:()=>U,LOCAL_PAGES_DIR:()=>te,LOCAL_THEME_DIR:()=>Y,PICKED_PKG_FIELDS:()=>he,PREFERS_COLOR_ATTR:()=>K,PREFERS_COLOR_LS_KEY:()=>de,SHOULD_SKIP_LIVEDEMO_ERROR:()=>ye,SP_ROUTE_PREFIX:()=>B,THEME_PREFIX:()=>X,USELESS_TMP_FILES:()=>J,VERSION_2_DEPRECATE_SOFT_BREAKS:()=>se,VERSION_2_LEVEL_NAV:()=>ae}),H.exports=j($);var U=".dumi",Y=`${U}/theme`,te=`${U}/pages`,X="dumi-theme-",B="~",K="data-prefers-color",de="dumi:prefers-color",he={name:"",description:"",version:"",license:"",repository:"",author:"",authors:""},J=["tsconfig.json","typings.d.ts"],ae="^2.2.0",se="^2.2.0",Ee=[".js",".jsx",".ts",".tsx"],Le=[".css",".less",".sass",".scss",".styl",".json"],ke="node_modules/.cache/dumi",ye=["Unable to find node on an unmounted component","#188","Portals are not currently supported by the server renderer","#257"]},59753:function(H,Q,i){"use strict";var E=i(87833),M=i(75271),C=i(65539),n=i(96753);function j(je){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},j(je)}function $(je,nt){return B(je)||X(je,nt)||Y(je,nt)||U()}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(je,nt){if(je){if(typeof je=="string")return te(je,nt);var Ct=Object.prototype.toString.call(je).slice(8,-1);if(Ct==="Object"&&je.constructor&&(Ct=je.constructor.name),Ct==="Map"||Ct==="Set")return Array.from(je);if(Ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct))return te(je,nt)}}function te(je,nt){(nt==null||nt>je.length)&&(nt=je.length);for(var Ct=0,ft=new Array(nt);Ct<nt;Ct++)ft[Ct]=je[Ct];return ft}function X(je,nt){var Ct=je==null?null:typeof Symbol!="undefined"&&je[Symbol.iterator]||je["@@iterator"];if(Ct!=null){var ft,Et,yt,_t,He=[],bt=!0,Tt=!1;try{if(yt=(Ct=Ct.call(je)).next,nt===0){if(Object(Ct)!==Ct)return;bt=!1}else for(;!(bt=(ft=yt.call(Ct)).done)&&(He.push(ft.value),He.length!==nt);bt=!0);}catch(st){Tt=!0,Et=st}finally{try{if(!bt&&Ct.return!=null&&(_t=Ct.return(),Object(_t)!==_t))return}finally{if(Tt)throw Et}}return He}}function B(je){if(Array.isArray(je))return je}function K(je,nt){var Ct=Object.keys(je);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(je);nt&&(ft=ft.filter(function(Et){return Object.getOwnPropertyDescriptor(je,Et).enumerable})),Ct.push.apply(Ct,ft)}return Ct}function de(je){for(var nt=1;nt<arguments.length;nt++){var Ct=arguments[nt]!=null?arguments[nt]:{};nt%2?K(Object(Ct),!0).forEach(function(ft){he(je,ft,Ct[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Ct)):K(Object(Ct)).forEach(function(ft){Object.defineProperty(je,ft,Object.getOwnPropertyDescriptor(Ct,ft))})}return je}function he(je,nt,Ct){return nt=J(nt),nt in je?Object.defineProperty(je,nt,{value:Ct,enumerable:!0,configurable:!0,writable:!0}):je[nt]=Ct,je}function J(je){var nt=ae(je,"string");return j(nt)==="symbol"?nt:String(nt)}function ae(je,nt){if(j(je)!=="object"||je===null)return je;var Ct=je[Symbol.toPrimitive];if(Ct!==void 0){var ft=Ct.call(je,nt||"default");if(j(ft)!=="object")return ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return(nt==="string"?String:Number)(je)}function se(je){var nt=je.children;return M.createElement("span",{"data-token":nt},nt)}function Ee(je){return je.hasQuestionToken&&typeof je.type=="string"&&(je.type=je.type.replace(/\s+\|\s+undefined\s*$/i,"")),je}var Le=function(nt){var Ct,ft=(0,E.YB)(),Et=(0,E.WF)(),yt=Et.themeConfig;return(Ct=nt.source)!==null&&Ct!==void 0&&Ct[0]&&yt.sourceLink?M.createElement("a",{className:"dumi-default-api-link",href:ft.formatMessage({id:"$internal.api.sourceLink"},de({},nt.source[0])),target:"_blank",rel:"noreferrer"},nt.className):nt.className},ke={toNode:function(nt){return typeof nt.type=="string"&&nt.type in this?"enum"in nt?this.enum(nt):this[nt.type](nt):nt.type?this.getValidClassName(nt)||M.createElement("span",null,nt.type):"const"in nt?M.createElement("span",null,nt.const):"oneOf"in nt?this.oneOf(nt):M.createElement("span",null,"unknown")},string:function(nt){return M.createElement("span",null,nt.type)},number:function(nt){return M.createElement("span",null,nt.type)},boolean:function(nt){return M.createElement("span",null,nt.type)},any:function(nt){return M.createElement("span",null,nt.type)},object:function(nt){var Ct=this,ft=Object.entries(nt.properties||{}),Et=ft.map(function(yt,_t){var He,bt=$(yt,2),Tt=bt[0],st=bt[1];return M.createElement("span",{key:Tt},M.createElement("span",null,Tt),!((He=nt.required)!==null&&He!==void 0&&He.includes(Tt))&&M.createElement(se,null,"?"),M.createElement(se,null,":"),st.type==="object"?M.createElement("span",null,"object"):Ct.toNode(st),_t<ft.length-1&&M.createElement(se,null,";"))});return M.createElement("span",null,M.createElement(se,null,"{"),Et,M.createElement(se,null,"}"))},array:function(nt){var Ct=M.createElement("span",null,"any");if(nt.items){var ft=this.getValidClassName(nt.items);Ct=ft!=null?ft:this.toNode(nt.items)}return M.createElement("span",null,Ct,M.createElement(se,null,"["),M.createElement(se,null,"]"))},element:function(nt){return M.createElement("span",null,M.createElement(se,null,"<"),M.createElement("span",null,nt.componentName),M.createElement(se,null,">"))},function:function(nt){var Ct=this,ft=nt.signature;if(!ft)return M.createElement("span",null,"Function");var Et="oneOf"in ft?ft.oneOf:[ft];return Et.map(function(yt,_t){return M.createElement("span",{key:"".concat(_t)},yt.isAsync?M.createElement(se,null,"async"):"",M.createElement(se,null,"("),yt.arguments.map(function(He,bt){return M.createElement("span",{key:"".concat(_t).concat(bt)},M.createElement("span",null,He.key),He.hasQuestionToken&&M.createElement(se,null,"?"),M.createElement(se,null,":"),Ct.toNode(He.schema?He.schema:Ee(He)),bt<yt.arguments.length-1&&M.createElement(se,null,","))}),M.createElement(se,null,")"),M.createElement(se,null,"=>"),Ct.toNode(yt.returnType),_t<Et.length-1&&M.createElement(se,null,"|"))})},dom:function(nt){return M.createElement("span",null,nt.className||"DOM")},enum:function(nt){var Ct=nt.enum.map(function(ft){return JSON.stringify(ft)});return M.createElement("span",null,Ct.map(function(ft,Et){return M.createElement("span",{key:Et},M.createElement("span",null,ft),Et<Ct.length-1&&M.createElement(se,null,"|"))}))},oneOf:function(nt){var Ct=this;return nt.oneOf.map(function(ft,Et){return M.createElement("span",{key:Et},Ct.getValidClassName(ft)||Ct.toNode(ft),Et<nt.oneOf.length-1&&M.createElement(se,null,"|"))})},reference:function(nt){var Ct=this,ft=nt.typeParameters||[],Et=ft.map(function(yt,_t){return M.createElement("span",{key:_t},Ct.toNode(yt),_t<ft.length-1&&M.createElement(se,null,","))});return M.createElement(M.Fragment,null,M.createElement("a",{className:"dumi-default-api-link",href:nt.externalUrl,target:"_blank",rel:"noreferrer"},nt.name),Et.length?M.createElement(M.Fragment,null,M.createElement(se,null,"<"),Et,M.createElement(se,null,">")):"")},getValidClassName:function(nt){return"className"in nt&&typeof nt.className=="string"&&nt.className!=="__type"?M.createElement(Le,nt):null}},ye=function(nt){var Ct=useState(function(){return ke.toNode(nt)}),ft=$(Ct,2),Et=ft[0],yt=ft[1];return useEffect(function(){yt(ke.toNode(nt))},[nt]),React.createElement("code",{className:"dumi-default-api-type"},Et)};function Se(je){var nt={};return Object.entries(je).forEach(function(Ct){var ft,Et,yt=$(Ct,2),_t=yt[0],He=yt[1],bt=(ft=He.tags)===null||ft===void 0?void 0:ft.modifierTags,Tt=(Et=He.tags)===null||Et===void 0?void 0:Et.blockTags;bt==null||bt.forEach(function(st){(st==="alpha"||st==="beta"||st==="experimental")&&(nt[_t]=[st])}),Tt==null||Tt.forEach(function(st){var Qe=st.tag,mt=st.content;if(Qe==="deprecated"||Qe==="since"){var Ht=mt.map(function(vt){return vt.text}).join("");nt[_t]=[Qe,Ht]}})}),nt}var be=function(nt){var Ct=nt.name,ft=nt.info,Et=useIntl(),yt=$(ft,2),_t=yt[0],He=yt[1],bt=he({className:"dumi-default-api-release-modifer"},"data-release",_t);He&&_t==="deprecated"&&(bt["data-dumi-tooltip"]=He);var Tt=_t==="since"?"".concat(He,"+"):Et.formatMessage({id:"api.component.release.".concat(_t)});return React.createElement("span",{className:"dumi-default-api-release"},React.createElement("span",{className:"dumi-default-api-release-name","data-release":_t},Ct),React.createElement("span",bt,_t==="deprecated"?Tt:React.createElement(Badge,{type:"info"},Tt)))},Ue=function(nt){var Ct=useRouteMeta(),ft=Ct.frontmatter,Et=useAtomAssets(),yt=Et.components,_t=nt.id||ft.atomId,He=useIntl();if(!_t)throw new Error("`id` properties if required for API component!");var bt=yt==null?void 0:yt[_t],Tt={},st=(nt.type||"props").toLowerCase();if(bt){var Qe,mt="".concat(st,"Config");Tt=((Qe=bt[mt])===null||Qe===void 0?void 0:Qe.properties)||{}}var Ht=useMemo(function(){return Se(Tt)},[Tt]);return React.createElement("div",{className:"markdown"},React.createElement(Table,null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,He.formatMessage({id:"api.component.name"})),React.createElement("th",null,He.formatMessage({id:"api.component.description"})),React.createElement("th",null,He.formatMessage({id:"api.component.type"})),st==="props"&&React.createElement("th",null,He.formatMessage({id:"api.component.default"})))),React.createElement("tbody",null,Object.keys(Tt).length?Object.entries(Tt).map(function(vt){var ue,lt=$(vt,2),le=lt[0],Je=lt[1];return React.createElement("tr",{key:le},React.createElement("td",null,Ht[le]?React.createElement(be,{name:le,info:Ht[le]}):le),React.createElement("td",null,Je.description||"--"),React.createElement("td",null,React.createElement(ye,Je)),st==="props"&&React.createElement("td",null,React.createElement("code",null,(ue=bt.propsConfig.required)!==null&&ue!==void 0&&ue.includes(le)?He.formatMessage({id:"api.component.required"}):JSON.stringify(Je.default)||"--")))}):React.createElement("tr",null,React.createElement("td",{colSpan:4},He.formatMessage({id:"api.component.".concat(yt?"not.found":"unavailable")},{id:_t}))))))},qe=null},65539:function(H,Q,i){"use strict";var E=i(75271);function M(){return M=Object.assign?Object.assign.bind():function(j){for(var $=1;$<arguments.length;$++){var U=arguments[$];for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&(j[Y]=U[Y])}return j},M.apply(this,arguments)}var C=function($){return React.createElement("span",M({className:"dumi-default-badge"},$))},n=null},61138:function(H,Q,i){"use strict";var E=i(73377),M=i(77926),C=i(14369),n=i(75271);function j(Y){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},j(Y)}function $(Y){var te=Y.children,X=toArray(te).filter(function(K){var de;return j(K)==="object"&&typeof K.type=="function"&&((de=K.type)===null||de===void 0?void 0:de.name)===SourceCode.name}),B=X.map(function(K,de){var he,J,ae=(he=K.props)!==null&&he!==void 0?he:{},se=ae.lang,Ee=ae.title;return{key:String((J=K.key)!==null&&J!==void 0?J:de),label:Ee||se||"txt",children:K}});return React.createElement(Tabs,{className:"dumi-default-code-group",items:B})}var U=null},15927:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return lt}});var E=i(75271),M=Object.defineProperty,C=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,$=(le,Je,we)=>Je in le?M(le,Je,{enumerable:!0,configurable:!0,writable:!0,value:we}):le[Je]=we,U=(le,Je)=>{for(var we in Je||(Je={}))n.call(Je,we)&&$(le,we,Je[we]);if(C)for(var we of C(Je))j.call(Je,we)&&$(le,we,Je[we]);return le};const Y=le=>E.createElement("svg",U({viewBox:"64 64 896 896"},le),E.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}),E.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}));var te="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNjk5IDM1M2gtNDYuOWMtMTAuMiAwLTE5LjkgNC45LTI1LjkgMTMuM0w0NjkgNTg0LjNsLTcxLjItOTguOGMtNi04LjMtMTUuNi0xMy4zLTI1LjktMTMuM0gzMjVjLTYuNSAwLTEwLjMgNy40LTYuNSAxMi43bDEyNC42IDE3Mi44YTMxLjggMzEuOCAwIDAgMCA1MS43IDBsMjEwLjYtMjkyYzMuOS01LjMuMS0xMi43LTYuNC0xMi43eiIvPjxwYXRoIGQ9Ik01MTIgNjRDMjY0LjYgNjQgNjQgMjY0LjYgNjQgNTEyczIwMC42IDQ0OCA0NDggNDQ4IDQ0OC0yMDAuNiA0NDgtNDQ4Uzc1OS40IDY0IDUxMiA2NHptMCA4MjBjLTIwNS40IDAtMzcyLTE2Ni42LTM3Mi0zNzJzMTY2LjYtMzcyIDM3Mi0zNzIgMzcyIDE2Ni42IDM3MiAzNzItMTY2LjYgMzcyLTM3MiAzNzJ6Ii8+PC9zdmc+",X=Object.defineProperty,B=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,he=(le,Je,we)=>Je in le?X(le,Je,{enumerable:!0,configurable:!0,writable:!0,value:we}):le[Je]=we,J=(le,Je)=>{for(var we in Je||(Je={}))K.call(Je,we)&&he(le,we,Je[we]);if(B)for(var we of B(Je))de.call(Je,we)&&he(le,we,Je[we]);return le};const ae=le=>E.createElement("svg",J({fillRule:"evenodd",viewBox:"64 64 896 896"},le),E.createElement("path",{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 0 1 .05.09.12.12 0 0 1 0 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 0 1 .05.06v.02a.12.12 0 0 1 0 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 0 1-.09.05.12.12 0 0 1-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 0 1-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 0 1-.05-.09.12.12 0 0 1 0-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 0 1-.05-.06l-.01-.02a.12.12 0 0 1 0-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 0 1 .09-.05.12.12 0 0 1 .07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 0 1 .07 0z"}));var se="data:image/svg+xml;base64,PHN2ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiPjxwYXRoIGQ9Ik01MTIgNjRjMjQ3LjQgMCA0NDggMjAwLjYgNDQ4IDQ0OFM3NTkuNCA5NjAgNTEyIDk2MCA2NCA3NTkuNCA2NCA1MTIgMjY0LjYgNjQgNTEyIDY0em0wIDc2Yy0yMDUuNCAwLTM3MiAxNjYuNi0zNzIgMzcyczE2Ni42IDM3MiAzNzIgMzcyIDM3Mi0xNjYuNiAzNzItMzcyLTE2Ni42LTM3Mi0zNzItMzcyem0xMjguMDEgMTk4LjgzYy4wMyAwIC4wNS4wMS4wOS4wNmw0NS4wMiA0NS4wMWEuMi4yIDAgMCAxIC4wNS4wOS4xMi4xMiAwIDAgMSAwIC4wN2MwIC4wMi0uMDEuMDQtLjA1LjA4TDU1Ny4yNSA1MTJsMTI3Ljg3IDEyNy44NmEuMjcuMjcgMCAwIDEgLjA1LjA2di4wMmEuMTIuMTIgMCAwIDEgMCAuMDdjMCAuMDMtLjAxLjA1LS4wNS4wOWwtNDUuMDIgNDUuMDJhLjIuMiAwIDAgMS0uMDkuMDUuMTIuMTIgMCAwIDEtLjA3IDBjLS4wMiAwLS4wNC0uMDEtLjA4LS4wNUw1MTIgNTU3LjI1IDM4NC4xNCA2ODUuMTJjLS4wNC4wNC0uMDYuMDUtLjA4LjA1YS4xMi4xMiAwIDAgMS0uMDcgMGMtLjAzIDAtLjA1LS4wMS0uMDktLjA1bC00NS4wMi00NS4wMmEuMi4yIDAgMCAxLS4wNS0uMDkuMTIuMTIgMCAwIDEgMC0uMDdjMC0uMDIuMDEtLjA0LjA2LS4wOEw0NjYuNzUgNTEyIDMzOC44OCAzODQuMTRhLjI3LjI3IDAgMCAxLS4wNS0uMDZsLS4wMS0uMDJhLjEyLjEyIDAgMCAxIDAtLjA3YzAtLjAzLjAxLS4wNS4wNS0uMDlsNDUuMDItNDUuMDJhLjIuMiAwIDAgMSAuMDktLjA1LjEyLjEyIDAgMCAxIC4wNyAwYy4wMiAwIC4wNC4wMS4wOC4wNkw1MTIgNDY2Ljc1bDEyNy44Ni0xMjcuODZjLjA0LS4wNS4wNi0uMDYuMDgtLjA2YS4xMi4xMiAwIDAgMSAuMDcgMHoiLz48L3N2Zz4=",Ee=Object.defineProperty,Le=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,Se=(le,Je,we)=>Je in le?Ee(le,Je,{enumerable:!0,configurable:!0,writable:!0,value:we}):le[Je]=we,be=(le,Je)=>{for(var we in Je||(Je={}))ke.call(Je,we)&&Se(le,we,Je[we]);if(Le)for(var we of Le(Je))ye.call(Je,we)&&Se(le,we,Je[we]);return le};const Ue=le=>E.createElement("svg",be({viewBox:"64 64 896 896"},le),E.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}),E.createElement("path",{d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}));var qe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNTEyIDY0QzI2NC42IDY0IDY0IDI2NC42IDY0IDUxMnMyMDAuNiA0NDggNDQ4IDQ0OCA0NDgtMjAwLjYgNDQ4LTQ0OFM3NTkuNCA2NCA1MTIgNjR6bTAgODIwYy0yMDUuNCAwLTM3Mi0xNjYuNi0zNzItMzcyczE2Ni42LTM3MiAzNzItMzcyIDM3MiAxNjYuNiAzNzIgMzcyLTE2Ni42IDM3Mi0zNzIgMzcyeiIvPjxwYXRoIGQ9Ik00NjQgMzM2YTQ4IDQ4IDAgMSAwIDk2IDAgNDggNDggMCAxIDAtOTYgMHptNzIgMTEyaC00OGMtNC40IDAtOCAzLjYtOCA4djI3MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjQ1NmMwLTQuNC0zLjYtOC04LTh6Ii8+PC9zdmc+",je=Object.defineProperty,nt=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,Et=(le,Je,we)=>Je in le?je(le,Je,{enumerable:!0,configurable:!0,writable:!0,value:we}):le[Je]=we,yt=(le,Je)=>{for(var we in Je||(Je={}))Ct.call(Je,we)&&Et(le,we,Je[we]);if(nt)for(var we of nt(Je))ft.call(Je,we)&&Et(le,we,Je[we]);return le};const _t=le=>E.createElement("svg",yt({viewBox:"64 64 896 896"},le),E.createElement("path",{d:"M464 720a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}));var He="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNDY0IDcyMGE0OCA0OCAwIDEgMCA5NiAwIDQ4IDQ4IDAgMSAwLTk2IDB6bTE2LTMwNHYxODRjMCA0LjQgMy42IDggOCA4aDQ4YzQuNCAwIDgtMy42IDgtOFY0MTZjMC00LjQtMy42LTgtOC04aC00OGMtNC40IDAtOCAzLjYtOCA4em00NzUuNyA0NDAtNDE2LTcyMGMtNi4yLTEwLjctMTYuOS0xNi0yNy43LTE2cy0yMS42IDUuMy0yNy43IDE2bC00MTYgNzIwQzU2IDg3Ny40IDcxLjQgOTA0IDk2IDkwNGg4MzJjMjQuNiAwIDQwLTI2LjYgMjcuNy00OHptLTc4My41LTI3LjlMNTEyIDIzOS45bDMzOS44IDU4OC4ySDE3Mi4yeiIvPjwvc3ZnPg==";function bt(le,Je){return Ht(le)||mt(le,Je)||st(le,Je)||Tt()}function Tt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(le,Je){if(le){if(typeof le=="string")return Qe(le,Je);var we=Object.prototype.toString.call(le).slice(8,-1);if(we==="Object"&&le.constructor&&(we=le.constructor.name),we==="Map"||we==="Set")return Array.from(le);if(we==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(we))return Qe(le,Je)}}function Qe(le,Je){(Je==null||Je>le.length)&&(Je=le.length);for(var we=0,Pn=new Array(Je);we<Je;we++)Pn[we]=le[we];return Pn}function mt(le,Je){var we=le==null?null:typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(we!=null){var Pn,Mt,or,wr,Dr=[],lr=!0,Pe=!1;try{if(or=(we=we.call(le)).next,Je===0){if(Object(we)!==we)return;lr=!1}else for(;!(lr=(Pn=or.call(we)).done)&&(Dr.push(Pn.value),Dr.length!==Je);lr=!0);}catch(ut){Pe=!0,Mt=ut}finally{try{if(!lr&&we.return!=null&&(wr=we.return(),Object(wr)!==wr))return}finally{if(Pe)throw Mt}}return Dr}}function Ht(le){if(Array.isArray(le))return le}var vt={info:Ue,warning:_t,success:Y,error:ae},ue=function(Je){var we=(0,E.useState)(function(){return vt[Je.type]}),Pn=bt(we,1),Mt=Pn[0];return E.createElement("div",{className:"dumi-default-container markdown","data-type":Je.type},E.createElement(Mt,null),E.createElement("h4",null,Je.title||Je.type.toUpperCase()),E.createElement("section",null,Je.children))},lt=ue},35610:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return St}});var E=i(75271),M=Object.defineProperty,C=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,$=(at,Xe,Nt)=>Xe in at?M(at,Xe,{enumerable:!0,configurable:!0,writable:!0,value:Nt}):at[Xe]=Nt,U=(at,Xe)=>{for(var Nt in Xe||(Xe={}))n.call(Xe,Nt)&&$(at,Nt,Xe[Nt]);if(C)for(var Nt of C(Xe))j.call(Xe,Nt)&&$(at,Nt,Xe[Nt]);return at};const Y=at=>E.createElement("svg",U({fillRule:"evenodd",viewBox:"64 64 896 896"},at),E.createElement("path",{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 0 0-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 0 0-.05.09.12.12 0 0 0 0 .07v.02a.27.27 0 0 0 .06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 0 0 0 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 0 0 .09.05.12.12 0 0 0 .07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 0 0 .07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 0 0 .05-.09.12.12 0 0 0 0-.07v-.02a.27.27 0 0 0-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 0 0 0-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 0 0-.09-.05.12.12 0 0 0-.07 0z"}));var te="data:image/svg+xml;base64,PHN2ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiPjxwYXRoIGQ9Ik01MTIgNjRjMjQ3LjQgMCA0NDggMjAwLjYgNDQ4IDQ0OFM3NTkuNCA5NjAgNTEyIDk2MCA2NCA3NTkuNCA2NCA1MTIgMjY0LjYgNjQgNTEyIDY0em0xMjcuOTggMjc0LjgyaC0uMDRsLS4wOC4wNkw1MTIgNDY2Ljc1IDM4NC4xNCAzMzguODhjLS4wNC0uMDUtLjA2LS4wNi0uMDgtLjA2YS4xMi4xMiAwIDAgMC0uMDcgMGMtLjAzIDAtLjA1LjAxLS4wOS4wNWwtNDUuMDIgNDUuMDJhLjIuMiAwIDAgMC0uMDUuMDkuMTIuMTIgMCAwIDAgMCAuMDd2LjAyYS4yNy4yNyAwIDAgMCAuMDYuMDZMNDY2Ljc1IDUxMiAzMzguODggNjM5Ljg2Yy0uMDUuMDQtLjA2LjA2LS4wNi4wOGEuMTIuMTIgMCAwIDAgMCAuMDdjMCAuMDMuMDEuMDUuMDUuMDlsNDUuMDIgNDUuMDJhLjIuMiAwIDAgMCAuMDkuMDUuMTIuMTIgMCAwIDAgLjA3IDBjLjAyIDAgLjA0LS4wMS4wOC0uMDVMNTEyIDU1Ny4yNWwxMjcuODYgMTI3Ljg3Yy4wNC4wNC4wNi4wNS4wOC4wNWEuMTIuMTIgMCAwIDAgLjA3IDBjLjAzIDAgLjA1LS4wMS4wOS0uMDVsNDUuMDItNDUuMDJhLjIuMiAwIDAgMCAuMDUtLjA5LjEyLjEyIDAgMCAwIDAtLjA3di0uMDJhLjI3LjI3IDAgMCAwLS4wNS0uMDZMNTU3LjI1IDUxMmwxMjcuODctMTI3Ljg2Yy4wNC0uMDQuMDUtLjA2LjA1LS4wOGEuMTIuMTIgMCAwIDAgMC0uMDdjMC0uMDMtLjAxLS4wNS0uMDUtLjA5bC00NS4wMi00NS4wMmEuMi4yIDAgMCAwLS4wOS0uMDUuMTIuMTIgMCAwIDAtLjA3IDB6Ii8+PC9zdmc+",X=i(84875),B=i.n(X),K=i(87833),de=i(73377),he=i(44689),J=Object.defineProperty,ae=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Le=(at,Xe,Nt)=>Xe in at?J(at,Xe,{enumerable:!0,configurable:!0,writable:!0,value:Nt}):at[Xe]=Nt,ke=(at,Xe)=>{for(var Nt in Xe||(Xe={}))se.call(Xe,Nt)&&Le(at,Nt,Xe[Nt]);if(ae)for(var Nt of ae(Xe))Ee.call(Xe,Nt)&&Le(at,Nt,Xe[Nt]);return at};const ye=at=>E.createElement("svg",ke({viewBox:"64 64 896 896"},at),E.createElement("path",{d:"m709.6 210 .4-.2h.2L512 96 313.9 209.8h-.2l.7.3L151.5 304v416L512 928l360.5-208V304l-162.9-94zM482.7 843.6 339.6 761V621.4L210 547.8V372.9l272.7 157.3v313.4zM238.2 321.5l134.7-77.8 138.9 79.7 139.1-79.9 135.2 78-273.9 158-274-158zM814 548.3l-128.8 73.1v139.1l-143.9 83V530.4L814 373.1v175.2z"}));var Se="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJtNzA5LjYgMjEwIC40LS4yaC4yTDUxMiA5NiAzMTMuOSAyMDkuOGgtLjJsLjcuM0wxNTEuNSAzMDR2NDE2TDUxMiA5MjhsMzYwLjUtMjA4VjMwNGwtMTYyLjktOTR6TTQ4Mi43IDg0My42IDMzOS42IDc2MVY2MjEuNEwyMTAgNTQ3LjhWMzcyLjlsMjcyLjcgMTU3LjN2MzEzLjR6TTIzOC4yIDMyMS41bDEzNC43LTc3LjggMTM4LjkgNzkuNyAxMzkuMS03OS45IDEzNS4yIDc4LTI3My45IDE1OC0yNzQtMTU4ek04MTQgNTQ4LjNsLTEyOC44IDczLjF2MTM5LjFsLTE0My45IDgzVjUzMC40TDgxNCAzNzMuMXYxNzUuMnoiLz48L3N2Zz4=",be=i(72840),Ue=Object.defineProperty,qe=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Ct=(at,Xe,Nt)=>Xe in at?Ue(at,Xe,{enumerable:!0,configurable:!0,writable:!0,value:Nt}):at[Xe]=Nt,ft=(at,Xe)=>{for(var Nt in Xe||(Xe={}))je.call(Xe,Nt)&&Ct(at,Nt,Xe[Nt]);if(qe)for(var Nt of qe(Xe))nt.call(Xe,Nt)&&Ct(at,Nt,Xe[Nt]);return at};const Et=at=>E.createElement("svg",ft({viewBox:"64 64 896 896"},at),E.createElement("path",{d:"m925.6 405.1-203-253.7a6.5 6.5 0 0 0-5-2.4H306.4c-1.9 0-3.8.9-5 2.4l-203 253.7a6.5 6.5 0 0 0 .2 8.3l408.6 459.5c1.2 1.4 3 2.1 4.8 2.1 1.8 0 3.5-.8 4.8-2.1l408.6-459.5a6.5 6.5 0 0 0 .2-8.3zM645.2 206.4l34.4 133.9-132.5-133.9h98.1zm8.2 178.5H370.6L512 242l141.4 142.9zM378.8 206.4h98.1L344.3 340.3l34.5-133.9zm-53.4 7-44.1 171.5h-93.1l137.2-171.5zM194.6 434.9H289l125.8 247.7-220.2-247.7zM512 763.4 345.1 434.9h333.7L512 763.4zm97.1-80.8L735 434.9h94.4L609.1 682.6zm133.6-297.7-44.1-171.5 137.2 171.5h-93.1z"}));var yt="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJtOTI1LjYgNDA1LjEtMjAzLTI1My43YTYuNSA2LjUgMCAwIDAtNS0yLjRIMzA2LjRjLTEuOSAwLTMuOC45LTUgMi40bC0yMDMgMjUzLjdhNi41IDYuNSAwIDAgMCAuMiA4LjNsNDA4LjYgNDU5LjVjMS4yIDEuNCAzIDIuMSA0LjggMi4xIDEuOCAwIDMuNS0uOCA0LjgtMi4xbDQwOC42LTQ1OS41YTYuNSA2LjUgMCAwIDAgLjItOC4zek02NDUuMiAyMDYuNGwzNC40IDEzMy45LTEzMi41LTEzMy45aDk4LjF6bTguMiAxNzguNUgzNzAuNkw1MTIgMjQybDE0MS40IDE0Mi45ek0zNzguOCAyMDYuNGg5OC4xTDM0NC4zIDM0MC4zbDM0LjUtMTMzLjl6bS01My40IDctNDQuMSAxNzEuNWgtOTMuMWwxMzcuMi0xNzEuNXpNMTk0LjYgNDM0LjlIMjg5bDEyNS44IDI0Ny43LTIyMC4yLTI0Ny43ek01MTIgNzYzLjQgMzQ1LjEgNDM0LjloMzMzLjdMNTEyIDc2My40em05Ny4xLTgwLjhMNzM1IDQzNC45aDk0LjRMNjA5LjEgNjgyLjZ6bTEzMy42LTI5Ny43LTQ0LjEtMTcxLjUgMTM3LjIgMTcxLjVoLTkzLjF6Ii8+PC9zdmc+",_t=Object.defineProperty,He=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable,st=(at,Xe,Nt)=>Xe in at?_t(at,Xe,{enumerable:!0,configurable:!0,writable:!0,value:Nt}):at[Xe]=Nt,Qe=(at,Xe)=>{for(var Nt in Xe||(Xe={}))bt.call(Xe,Nt)&&st(at,Nt,Xe[Nt]);if(He)for(var Nt of He(Xe))Tt.call(Xe,Nt)&&st(at,Nt,Xe[Nt]);return at};const mt=at=>E.createElement("svg",Qe({viewBox:"64 64 896 896"},at),E.createElement("path",{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}));var Ht="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNODQ4IDM1OS4zSDYyNy43TDgyNS44IDEwOWM0LjEtNS4zLjQtMTMtNi4zLTEzSDQzNmMtMi44IDAtNS41IDEuNS02LjkgNEwxNzAgNTQ3LjVjLTMuMSA1LjMuNyAxMiA2LjkgMTJoMTc0LjRsLTg5LjQgMzU3LjZjLTEuOSA3LjggNy41IDEzLjMgMTMuMyA3LjdMODUzLjUgMzczYzUuMi00LjkgMS43LTEzLjctNS41LTEzLjd6TTM3OC4yIDczMi41bDYwLjMtMjQxSDI4MS4xbDE4OS42LTMyNy40aDIyNC42TDQ4NyA0MjcuNGgyMTFMMzc4LjIgNzMyLjV6Ii8+PC9zdmc+",vt=i(874),ue=i.n(vt),lt=i(77926),le=function(){return E.createElement(E.Fragment,null)},Je=le;function we(){return we=Object.assign?Object.assign.bind():function(at){for(var Xe=1;Xe<arguments.length;Xe++){var Nt=arguments[Xe];for(var Nn in Nt)Object.prototype.hasOwnProperty.call(Nt,Nn)&&(at[Nn]=Nt[Nn])}return at},we.apply(this,arguments)}function Pn(at,Xe){return lr(at)||Dr(at,Xe)||or(at,Xe)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function or(at,Xe){if(at){if(typeof at=="string")return wr(at,Xe);var Nt=Object.prototype.toString.call(at).slice(8,-1);if(Nt==="Object"&&at.constructor&&(Nt=at.constructor.name),Nt==="Map"||Nt==="Set")return Array.from(at);if(Nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nt))return wr(at,Xe)}}function wr(at,Xe){(Xe==null||Xe>at.length)&&(Xe=at.length);for(var Nt=0,Nn=new Array(Xe);Nt<Xe;Nt++)Nn[Nt]=at[Nt];return Nn}function Dr(at,Xe){var Nt=at==null?null:typeof Symbol!="undefined"&&at[Symbol.iterator]||at["@@iterator"];if(Nt!=null){var Nn,Jn,rr,Br,Hr=[],zr=!0,Tr=!1;try{if(rr=(Nt=Nt.call(at)).next,Xe===0){if(Object(Nt)!==Nt)return;zr=!1}else for(;!(zr=(Nn=rr.call(Nt)).done)&&(Hr.push(Nn.value),Hr.length!==Xe);zr=!0);}catch(fn){Tr=!0,Jn=fn}finally{try{if(!zr&&Nt.return!=null&&(Br=Nt.return(),Object(Br)!==Br))return}finally{if(Tr)throw Jn}}return Hr}}function lr(at){if(Array.isArray(at))return at}var Pe=function(Xe){var Nt=(0,E.useRef)(null),Nn=(0,E.useState)(),Jn=Pn(Nn,2),rr=Jn[0],Br=Jn[1],Hr=(0,E.useState)(Xe.initialValue),zr=Pn(Hr,2),Tr=zr[0],fn=zr[1];return(0,E.useEffect)(function(){var Ne,Ge=(Ne=Nt.current)===null||Ne===void 0?void 0:Ne.querySelector("pre");if(Ge){var ot=Ge.querySelector(".line-cell"),Dt=window.getComputedStyle(Ge),jt={fontSize:Dt.fontSize,fontFamily:Dt.fontFamily,lineHeight:Dt.lineHeight,padding:Dt.padding,margin:Dt.margin};ot&&(jt.paddingLeft=ot.offsetLeft),Br(jt)}else console.warn("[dumi] pre element not found in SourceCode component, the SourceCodeEditor will be disabled, you can report an issue to dumi repository.")},[]),E.createElement("div",{className:"dumi-default-source-code-editor",ref:Nt},E.createElement(lt.Z,we({},Xe,{textarea:rr&&E.createElement("textarea",{className:"dumi-default-source-code-editor-textarea",style:rr,value:Tr,onChange:function(Ge){var ot,Dt;fn(Ge.target.value),(ot=Xe.onChange)===null||ot===void 0||ot.call(Xe,Ge.target.value),(Dt=Xe.onTranspile)===null||Dt===void 0||Dt.call(Xe,{err:null,code:Ge.target.value})},onKeyDown:function(Ge){if(Ge.key==="Tab"){Ge.preventDefault();var ot=Ge.currentTarget,Dt=ot.selectionStart,jt=ot.selectionEnd,sn=ot.value.substring(0,Dt),xn=ot.value.substring(jt),rn="  ",Fn=rn.length+Dt;fn("".concat(sn).concat(rn).concat(xn)),setTimeout(function(){ot.setSelectionRange(Fn,Fn)})}},autoComplete:"off",autoCorrect:"off",autoSave:"off",spellCheck:"false"}),extra:rr&&Xe.extra}),Tr))},ut=Pe,Ve=i(75219);function gt(at){"@babel/helpers - typeof";return gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Xe){return typeof Xe}:function(Xe){return Xe&&typeof Symbol=="function"&&Xe.constructor===Symbol&&Xe!==Symbol.prototype?"symbol":typeof Xe},gt(at)}var Gt=["title","placement"];function Me(at,Xe,Nt){return Xe=At(Xe),Xe in at?Object.defineProperty(at,Xe,{value:Nt,enumerable:!0,configurable:!0,writable:!0}):at[Xe]=Nt,at}function At(at){var Xe=Bt(at,"string");return gt(Xe)==="symbol"?Xe:String(Xe)}function Bt(at,Xe){if(gt(at)!=="object"||at===null)return at;var Nt=at[Symbol.toPrimitive];if(Nt!==void 0){var Nn=Nt.call(at,Xe||"default");if(gt(Nn)!=="object")return Nn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Xe==="string"?String:Number)(at)}function Sn(at,Xe){return ar(at)||gn(at,Xe)||Bn(at,Xe)||Lt()}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bn(at,Xe){if(at){if(typeof at=="string")return en(at,Xe);var Nt=Object.prototype.toString.call(at).slice(8,-1);if(Nt==="Object"&&at.constructor&&(Nt=at.constructor.name),Nt==="Map"||Nt==="Set")return Array.from(at);if(Nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nt))return en(at,Xe)}}function en(at,Xe){(Xe==null||Xe>at.length)&&(Xe=at.length);for(var Nt=0,Nn=new Array(Xe);Nt<Xe;Nt++)Nn[Nt]=at[Nt];return Nn}function gn(at,Xe){var Nt=at==null?null:typeof Symbol!="undefined"&&at[Symbol.iterator]||at["@@iterator"];if(Nt!=null){var Nn,Jn,rr,Br,Hr=[],zr=!0,Tr=!1;try{if(rr=(Nt=Nt.call(at)).next,Xe===0){if(Object(Nt)!==Nt)return;zr=!1}else for(;!(zr=(Nn=rr.call(Nt)).done)&&(Hr.push(Nn.value),Hr.length!==Xe);zr=!0);}catch(fn){Tr=!0,Jn=fn}finally{try{if(!zr&&Nt.return!=null&&(Br=Nt.return(),Object(Br)!==Br))return}finally{if(Tr)throw Jn}}return Hr}}function ar(at){if(Array.isArray(at))return at}function Sr(){return Sr=Object.assign?Object.assign.bind():function(at){for(var Xe=1;Xe<arguments.length;Xe++){var Nt=arguments[Xe];for(var Nn in Nt)Object.prototype.hasOwnProperty.call(Nt,Nn)&&(at[Nn]=Nt[Nn])}return at},Sr.apply(this,arguments)}function In(at,Xe){if(at==null)return{};var Nt=Gn(at,Xe),Nn,Jn;if(Object.getOwnPropertySymbols){var rr=Object.getOwnPropertySymbols(at);for(Jn=0;Jn<rr.length;Jn++)Nn=rr[Jn],!(Xe.indexOf(Nn)>=0)&&Object.prototype.propertyIsEnumerable.call(at,Nn)&&(Nt[Nn]=at[Nn])}return Nt}function Gn(at,Xe){if(at==null)return{};var Nt={},Nn=Object.keys(at),Jn,rr;for(rr=0;rr<Nn.length;rr++)Jn=Nn[rr],!(Xe.indexOf(Jn)>=0)&&(Nt[Jn]=at[Jn]);return Nt}var hn=function(Xe){var Nt=Xe.title,Nn=Xe.placement,Jn=Nn===void 0?"top":Nn,rr=In(Xe,Gt);return E.createElement(Ve.Z,Sr({prefixCls:"dumi-theme-default-tooltip",placement:Jn},rr,{overlay:Nt}))},mn=function(){return E.createElement("svg",{viewBox:"0 0 200 117"},E.createElement("path",{d:"M59.688 2.578c-3.438-3.437-8.438-3.437-11.563 0L3.75 48.516c-5 5.937-5 14.062 0 19.062l44.063 45.938c1.562 1.562 4.062 2.5 5.937 2.5s4.063-.938 5.938-2.5c3.437-3.438 3.437-8.438 0-11.563l-42.5-43.437 42.5-44.063c3.437-3.437 3.437-8.437 0-11.875Zm135.937 45.938L151.25 2.578c-3.438-3.437-8.438-3.437-11.563 0-3.125 3.438-3.437 8.438 0 11.563l42.5 44.375-42.5 44.062c-3.437 3.438-3.437 8.438 0 11.563 1.563 1.562 3.438 2.5 5.938 2.5 2.5 0 4.063-.938 5.938-2.5l44.062-45.938c5.625-5.625 5.625-13.75 0-19.687Zm-75.938-45c-4.062-1.563-9.062.937-10.937 5l-34.063 95c-1.562 4.062.938 9.062 5 10.937.938 0 1.563.938 2.5.938 3.438 0 6.563-2.5 7.5-5.938l35-95.937c1.563-4.063-.937-9.063-5-10Z"}))},cn=function(){return E.createElement("svg",{viewBox:"0 0 200 117"},E.createElement("path",{d:"M59.688 2.578c-3.438-3.437-8.438-3.437-11.563 0L3.75 48.516c-5 5.937-5 14.062 0 19.062l44.063 45.938c1.562 1.562 4.062 2.5 5.937 2.5s4.063-.938 5.938-2.5c3.437-3.438 3.437-8.438 0-11.563l-42.5-43.437 42.5-44.063c3.437-3.437 3.437-8.437 0-11.875Zm135.937 45.938L151.25 2.578c-3.438-3.437-8.438-3.437-11.563 0-3.125 3.438-3.437 8.438 0 11.563l42.5 44.375-42.5 44.062c-3.437 3.438-3.437 8.438 0 11.563 1.563 1.562 3.438 2.5 5.938 2.5 2.5 0 4.063-.938 5.938-2.5l44.062-45.938c5.625-5.625 5.625-13.75 0-19.687Z"}))},Ln=function(){return E.createElement("svg",{viewBox:"0 0 1024 1024"},E.createElement("path",{d:"M853.333 469.333A42.667 42.667 0 0 0 810.667 512v256A42.667 42.667 0 0 1 768 810.667H256A42.667 42.667 0 0 1 213.333 768V256A42.667 42.667 0 0 1 256 213.333h256A42.667 42.667 0 0 0 512 128H256a128 128 0 0 0-128 128v512a128 128 0 0 0 128 128h512a128 128 0 0 0 128-128V512a42.667 42.667 0 0 0-42.667-42.667z"}),E.createElement("path",{d:"M682.667 213.333h67.413L481.707 481.28a42.667 42.667 0 0 0 0 60.587 42.667 42.667 0 0 0 60.586 0L810.667 273.92v67.413A42.667 42.667 0 0 0 853.333 384 42.667 42.667 0 0 0 896 341.333V170.667A42.667 42.667 0 0 0 853.333 128H682.667a42.667 42.667 0 0 0 0 85.333z"}))},Er=function(Xe){var Nt,Nn,Jn,rr,Br,Hr=(0,K.YB)(),zr=Object.entries(Xe.asset.dependencies).filter(function(qr){var Gr=Sn(qr,2),ci=Gr[1].type;return ci==="FILE"}),Tr=(0,K.FO)(Xe.asset.id),fn=Tr.renderOpts,Ne=(0,E.useState)(0),Ge=Sn(Ne,2),ot=Ge[0],Dt=Ge[1],jt=(0,E.useState)(Xe.forceShowCode||Xe.defaultShowCode),sn=Sn(jt,2),xn=sn[0],rn=sn[1],Fn=(0,E.useRef)(),Un=(0,E.useState)(!1),jn=Sn(Un,2),_n=jn[0],Xn=jn[1],er=zr.length===1,Yr=((Nt=zr[ot][0].match(/\.([^.]+)$/))===null||Nt===void 0?void 0:Nt[1])||"text";return E.createElement(E.Fragment,null,E.createElement("div",{className:"dumi-default-previewer-actions"},!((Nn=Xe.disabledActions)!==null&&Nn!==void 0&&Nn.includes("CSB"))&&E.createElement("button",{className:"dumi-default-previewer-action-btn",type:"button","data-dumi-tooltip":Hr.formatMessage({id:"previewer.actions.codesandbox"}),onClick:function(){return(0,K.il)(Xe)}},E.createElement(ye,null)),!((Jn=Xe.disabledActions)!==null&&Jn!==void 0&&Jn.includes("STACKBLITZ"))&&E.createElement("button",{className:"dumi-default-previewer-action-btn",type:"button","data-dumi-tooltip":Hr.formatMessage({id:"previewer.actions.stackblitz"}),onClick:function(){return(0,K.Sc)(Xe)}},E.createElement(mt,null)),!((rr=Xe.disabledActions)!==null&&rr!==void 0&&rr.includes("HTML2SKETCH"))&&K.p6&&E.createElement("span",{className:"dumi-default-previewer-action-btn dumi-default-previewer-action-sketch","data-dumi-tooltip":Hr.formatMessage({id:"previewer.actions.sketch"}),"data-copied":_n||void 0},_n?E.createElement(he.r,null):E.createElement(Et,null),E.createElement("select",{value:"",onChange:function(Gr){var ci=Gr.target.value;switch(ci){case"group":case"symbol":(0,K.p6)(Xe.demoContainer,{type:ci}).then(function(Ci){ue()(JSON.stringify(Ci)),Xn(!0),clearTimeout(Fn.current),Fn.current=window.setTimeout(function(){return Xn(!1)},2e3)});break;case"guide":window.open("https://d.umijs.org/config#html2sketch");break;default:}}},E.createElement("option",{value:"",hidden:!0}),E.createElement("option",{value:"group"},Hr.formatMessage({id:"previewer.actions.sketch.group"})),E.createElement("option",{value:"symbol"},Hr.formatMessage({id:"previewer.actions.sketch.symbol"})),E.createElement("option",{value:"-",disabled:!0},Hr.formatMessage({id:"previewer.actions.sketch.divider"})),E.createElement("option",{value:"guide"},Hr.formatMessage({id:"previewer.actions.sketch.guide"})))),!((Br=Xe.disabledActions)!==null&&Br!==void 0&&Br.includes("EXTERNAL"))&&E.createElement("a",{target:"_blank",rel:"noreferrer",href:Xe.demoUrl,className:"dumi-default-previewer-action-btn","data-dumi-tooltip":Hr.formatMessage({id:"previewer.actions.separate"})},E.createElement(Ln,null)),Xe.extra,E.createElement(Je,Xe),!Xe.forceShowCode&&E.createElement("button",{className:"dumi-default-previewer-action-btn",type:"button",onClick:function(){return rn(function(Gr){return!Gr})},"data-dumi-tooltip":Hr.formatMessage({id:"previewer.actions.code.".concat(xn?"shrink":"expand")})},xn?E.createElement(cn,null):E.createElement(mn,null))),xn&&E.createElement(E.Fragment,null,E.createElement("div",{className:"dumi-default-previewer-sources"},E.createElement(de.Z,{className:B()("dumi-default-previewer-tabs",er&&"dumi-default-previewer-tabs-single"),defaultActiveKey:String(ot),onChange:function(Gr){return Dt(Number(Gr))},items:zr.map(function(qr,Gr){var ci=Sn(qr,1),Ci=ci[0];return{key:String(Gr),label:Ci.replace(/^\.\//,""),children:Gr===0&&fn!==null&&fn!==void 0&&fn.compile?E.createElement(ut,{lang:Yr,initialValue:zr[Gr][1].value.trim(),onChange:function(Bi){var Di,yo;(Di=Xe.onSourceChange)===null||Di===void 0||Di.call(Xe,Me({},zr[Gr][0],Bi)),(yo=Xe.onSourceTranspile)===null||yo===void 0||yo.call(Xe,{source:Me({},zr[Gr][0],Bi)})},extra:E.createElement(hn,{title:Hr.formatMessage({id:"previewer.actions.code.editable"})},E.createElement("button",{type:"button",className:"dumi-default-previewer-editor-tip-btn"},E.createElement(be.r,null)))}):E.createElement(lt.Z,{lang:Yr,extra:Gr!==0&&E.createElement(hn,{title:Hr.formatMessage({id:"previewer.actions.code.readonly"})},E.createElement("button",{type:"button",className:"dumi-default-previewer-editor-tip-btn","data-readonly":!0},E.createElement("span",null),E.createElement(be.r,null)))},zr[ot][1].value.trim())}})}))))},mr=Er;function Jr(){return Jr=Object.assign?Object.assign.bind():function(at){for(var Xe=1;Xe<arguments.length;Xe++){var Nt=arguments[Xe];for(var Nn in Nt)Object.prototype.hasOwnProperty.call(Nt,Nn)&&(at[Nn]=Nt[Nn])}return at},Jr.apply(this,arguments)}function Ie(at){"@babel/helpers - typeof";return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Xe){return typeof Xe}:function(Xe){return Xe&&typeof Symbol=="function"&&Xe.constructor===Symbol&&Xe!==Symbol.prototype?"symbol":typeof Xe},Ie(at)}var Ot=function(Xe){var Nt,Nn=(0,E.useRef)(null),Jn=(0,K.TH)(),rr=Jn.hash,Br="#".concat(Xe.asset.id),Hr=(0,K.kw)(Xe.asset.id,{iframe:!!(Xe.iframe||Xe._live_in_iframe),containerRef:Nn}),zr=Hr.node,Tr=Hr.error,fn=Hr.loading,Ne=Hr.setSource;return E.createElement("div",{id:Xe.asset.id,className:B()("dumi-default-previewer",Xe.className),style:Xe.style,"data-debug":Xe.debug,"data-active":rr===Br||void 0},E.createElement("div",{className:"dumi-default-previewer-demo",style:{background:Xe.background},"data-compact":Xe.compact||void 0,"data-transform":Xe.transform||void 0,"data-iframe":Xe.iframe||void 0,"data-error":!!Tr||void 0,"data-loading":fn||void 0,ref:Nn},Xe.iframe?E.createElement("iframe",{style:["string","number"].includes(Ie(Xe.iframe))?{height:Number(Xe.iframe)}:{},src:Xe.demoUrl}):zr||Xe.children),Tr&&E.createElement("div",{className:"dumi-default-previewer-demo-error"},E.createElement(Y,null),Tr.toString()),E.createElement("div",{className:"dumi-default-previewer-meta"},(Xe.title||Xe.debug)&&E.createElement("div",{className:"dumi-default-previewer-desc"},E.createElement("h5",null,E.createElement("a",{href:Br},Xe.debug&&E.createElement("strong",null,"DEV ONLY"),Xe.title)),Xe.description&&E.createElement("div",{className:"markdown",dangerouslySetInnerHTML:{__html:Xe.description}})),E.createElement(mr,Jr({},Xe,{onSourceChange:Ne,demoContainer:Xe.iframe?(Nt=Nn.current)===null||Nt===void 0?void 0:Nt.firstElementChild:Nn.current}))))},St=Ot},96485:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return vt}});var E=i(44689),M=i(75271),C=Object.defineProperty,n=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,U=(ue,lt,le)=>lt in ue?C(ue,lt,{enumerable:!0,configurable:!0,writable:!0,value:le}):ue[lt]=le,Y=(ue,lt)=>{for(var le in lt||(lt={}))j.call(lt,le)&&U(ue,le,lt[le]);if(n)for(var le of n(lt))$.call(lt,le)&&U(ue,le,lt[le]);return ue};const te=ue=>M.createElement("svg",Y({viewBox:"64 64 896 896"},ue),M.createElement("path",{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}));var X="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNODMyIDY0SDI5NmMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOGg0OTZ2Njg4YzAgNC40IDMuNiA4IDggOGg1NmM0LjQgMCA4LTMuNiA4LThWOTZjMC0xNy43LTE0LjMtMzItMzItMzJ6TTcwNCAxOTJIMTkyYy0xNy43IDAtMzIgMTQuMy0zMiAzMnY1MzAuN2MwIDguNSAzLjQgMTYuNiA5LjQgMjIuNmwxNzMuMyAxNzMuM2MyLjIgMi4yIDQuNyA0IDcuNCA1LjV2MS45aDQuMmMzLjUgMS4zIDcuMiAyIDExIDJINzA0YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjIyNGMwLTE3LjctMTQuMy0zMi0zMi0zMnpNMzUwIDg1Ni4yIDI2My45IDc3MEgzNTB2ODYuMnpNNjY0IDg4OEg0MTRWNzQ2YzAtMjIuMS0xNy45LTQwLTQwLTQwSDIzMlYyNjRoNDMydjYyNHoiLz48L3N2Zz4=",B=i(84875),K=i.n(B),de=i(87833);var he=function(){var ue=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,lt=0,le={},Je={util:{encode:function Pe(ut){return ut instanceof we?new we(ut.type,Pe(ut.content),ut.alias):Array.isArray(ut)?ut.map(Pe):ut.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(Pe){return Object.prototype.toString.call(Pe).slice(8,-1)},objId:function(Pe){return Pe.__id||Object.defineProperty(Pe,"__id",{value:++lt}),Pe.__id},clone:function Pe(ut,Ve){Ve=Ve||{};var gt,Gt;switch(Je.util.type(ut)){case"Object":if(Gt=Je.util.objId(ut),Ve[Gt])return Ve[Gt];gt={},Ve[Gt]=gt;for(var Me in ut)ut.hasOwnProperty(Me)&&(gt[Me]=Pe(ut[Me],Ve));return gt;case"Array":return Gt=Je.util.objId(ut),Ve[Gt]?Ve[Gt]:(gt=[],Ve[Gt]=gt,ut.forEach(function(At,Bt){gt[Bt]=Pe(At,Ve)}),gt);default:return ut}},getLanguage:function(Pe){for(;Pe;){var ut=ue.exec(Pe.className);if(ut)return ut[1].toLowerCase();Pe=Pe.parentElement}return"none"},setLanguage:function(Pe,ut){Pe.className=Pe.className.replace(RegExp(ue,"gi"),""),Pe.classList.add("language-"+ut)},isActive:function(Pe,ut,Ve){for(var gt="no-"+ut;Pe;){var Gt=Pe.classList;if(Gt.contains(ut))return!0;if(Gt.contains(gt))return!1;Pe=Pe.parentElement}return!!Ve}},languages:{plain:le,plaintext:le,text:le,txt:le,extend:function(Pe,ut){var Ve=Je.util.clone(Je.languages[Pe]);for(var gt in ut)Ve[gt]=ut[gt];return Ve},insertBefore:function(Pe,ut,Ve,gt){gt=gt||Je.languages;var Gt=gt[Pe],Me={};for(var At in Gt)if(Gt.hasOwnProperty(At)){if(At==ut)for(var Bt in Ve)Ve.hasOwnProperty(Bt)&&(Me[Bt]=Ve[Bt]);Ve.hasOwnProperty(At)||(Me[At]=Gt[At])}var Sn=gt[Pe];return gt[Pe]=Me,Je.languages.DFS(Je.languages,function(Lt,Bn){Bn===Sn&&Lt!=Pe&&(this[Lt]=Me)}),Me},DFS:function Pe(ut,Ve,gt,Gt){Gt=Gt||{};var Me=Je.util.objId;for(var At in ut)if(ut.hasOwnProperty(At)){Ve.call(ut,At,ut[At],gt||At);var Bt=ut[At],Sn=Je.util.type(Bt);Sn==="Object"&&!Gt[Me(Bt)]?(Gt[Me(Bt)]=!0,Pe(Bt,Ve,null,Gt)):Sn==="Array"&&!Gt[Me(Bt)]&&(Gt[Me(Bt)]=!0,Pe(Bt,Ve,At,Gt))}}},plugins:{},highlight:function(Pe,ut,Ve){var gt={code:Pe,grammar:ut,language:Ve};return Je.hooks.run("before-tokenize",gt),gt.tokens=Je.tokenize(gt.code,gt.grammar),Je.hooks.run("after-tokenize",gt),we.stringify(Je.util.encode(gt.tokens),gt.language)},tokenize:function(Pe,ut){var Ve=ut.rest;if(Ve){for(var gt in Ve)ut[gt]=Ve[gt];delete ut.rest}var Gt=new or;return wr(Gt,Gt.head,Pe),Mt(Pe,Gt,ut,Gt.head,0),lr(Gt)},hooks:{all:{},add:function(Pe,ut){var Ve=Je.hooks.all;Ve[Pe]=Ve[Pe]||[],Ve[Pe].push(ut)},run:function(Pe,ut){var Ve=Je.hooks.all[Pe];if(!(!Ve||!Ve.length))for(var gt=0,Gt;Gt=Ve[gt++];)Gt(ut)}},Token:we};function we(Pe,ut,Ve,gt){this.type=Pe,this.content=ut,this.alias=Ve,this.length=(gt||"").length|0}we.stringify=function Pe(ut,Ve){if(typeof ut=="string")return ut;if(Array.isArray(ut)){var gt="";return ut.forEach(function(Sn){gt+=Pe(Sn,Ve)}),gt}var Gt={type:ut.type,content:Pe(ut.content,Ve),tag:"span",classes:["token",ut.type],attributes:{},language:Ve},Me=ut.alias;Me&&(Array.isArray(Me)?Array.prototype.push.apply(Gt.classes,Me):Gt.classes.push(Me)),Je.hooks.run("wrap",Gt);var At="";for(var Bt in Gt.attributes)At+=" "+Bt+'="'+(Gt.attributes[Bt]||"").replace(/"/g,"&quot;")+'"';return"<"+Gt.tag+' class="'+Gt.classes.join(" ")+'"'+At+">"+Gt.content+"</"+Gt.tag+">"};function Pn(Pe,ut,Ve,gt){Pe.lastIndex=ut;var Gt=Pe.exec(Ve);if(Gt&&gt&&Gt[1]){var Me=Gt[1].length;Gt.index+=Me,Gt[0]=Gt[0].slice(Me)}return Gt}function Mt(Pe,ut,Ve,gt,Gt,Me){for(var At in Ve)if(!(!Ve.hasOwnProperty(At)||!Ve[At])){var Bt=Ve[At];Bt=Array.isArray(Bt)?Bt:[Bt];for(var Sn=0;Sn<Bt.length;++Sn){if(Me&&Me.cause==At+","+Sn)return;var Lt=Bt[Sn],Bn=Lt.inside,en=!!Lt.lookbehind,gn=!!Lt.greedy,ar=Lt.alias;if(gn&&!Lt.pattern.global){var Sr=Lt.pattern.toString().match(/[imsuy]*$/)[0];Lt.pattern=RegExp(Lt.pattern.source,Sr+"g")}for(var In=Lt.pattern||Lt,Gn=gt.next,hn=Gt;Gn!==ut.tail&&!(Me&&hn>=Me.reach);hn+=Gn.value.length,Gn=Gn.next){var mn=Gn.value;if(ut.length>Pe.length)return;if(!(mn instanceof we)){var cn=1,Ln;if(gn){if(Ln=Pn(In,hn,Pe,en),!Ln||Ln.index>=Pe.length)break;var Ie=Ln.index,Er=Ln.index+Ln[0].length,mr=hn;for(mr+=Gn.value.length;Ie>=mr;)Gn=Gn.next,mr+=Gn.value.length;if(mr-=Gn.value.length,hn=mr,Gn.value instanceof we)continue;for(var Jr=Gn;Jr!==ut.tail&&(mr<Er||typeof Jr.value=="string");Jr=Jr.next)cn++,mr+=Jr.value.length;cn--,mn=Pe.slice(hn,mr),Ln.index-=hn}else if(Ln=Pn(In,0,mn,en),!Ln)continue;var Ie=Ln.index,Ot=Ln[0],St=mn.slice(0,Ie),at=mn.slice(Ie+Ot.length),Xe=hn+mn.length;Me&&Xe>Me.reach&&(Me.reach=Xe);var Nt=Gn.prev;St&&(Nt=wr(ut,Nt,St),hn+=St.length),Dr(ut,Nt,cn);var Nn=new we(At,Bn?Je.tokenize(Ot,Bn):Ot,ar,Ot);if(Gn=wr(ut,Nt,Nn),at&&wr(ut,Gn,at),cn>1){var Jn={cause:At+","+Sn,reach:Xe};Mt(Pe,ut,Ve,Gn.prev,hn,Jn),Me&&Jn.reach>Me.reach&&(Me.reach=Jn.reach)}}}}}}function or(){var Pe={value:null,prev:null,next:null},ut={value:null,prev:Pe,next:null};Pe.next=ut,this.head=Pe,this.tail=ut,this.length=0}function wr(Pe,ut,Ve){var gt=ut.next,Gt={value:Ve,prev:ut,next:gt};return ut.next=Gt,gt.prev=Gt,Pe.length++,Gt}function Dr(Pe,ut,Ve){for(var gt=ut.next,Gt=0;Gt<Ve&&gt!==Pe.tail;Gt++)gt=gt.next;ut.next=gt,gt.prev=ut,Pe.length-=Gt}function lr(Pe){for(var ut=[],Ve=Pe.head.next;Ve!==Pe.tail;)ut.push(Ve.value),Ve=Ve.next;return ut}return Je}(),J=he;he.default=he,J.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},J.languages.markup.tag.inside["attr-value"].inside.entity=J.languages.markup.entity,J.languages.markup.doctype.inside["internal-subset"].inside=J.languages.markup,J.hooks.add("wrap",function(ue){ue.type==="entity"&&(ue.attributes.title=ue.content.replace(/&amp;/,"&"))}),Object.defineProperty(J.languages.markup.tag,"addInlined",{value:function(lt,le){var Je={};Je["language-"+le]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:J.languages[le]},Je.cdata=/^<!\[CDATA\[|\]\]>$/i;var we={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Je}};we["language-"+le]={pattern:/[\s\S]+/,inside:J.languages[le]};var Pn={};Pn[lt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return lt}),"i"),lookbehind:!0,greedy:!0,inside:we},J.languages.insertBefore("markup","cdata",Pn)}}),Object.defineProperty(J.languages.markup.tag,"addAttribute",{value:function(ue,lt){J.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+ue+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[lt,"language-"+lt],inside:J.languages[lt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),J.languages.html=J.languages.markup,J.languages.mathml=J.languages.markup,J.languages.svg=J.languages.markup,J.languages.xml=J.languages.extend("markup",{}),J.languages.ssml=J.languages.xml,J.languages.atom=J.languages.xml,J.languages.rss=J.languages.xml,function(ue){var lt="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",le={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},Je={bash:le,environment:{pattern:RegExp("\\$"+lt),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+lt),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};ue.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+lt),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:Je},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:le}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:Je},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:Je.entity}}],environment:{pattern:RegExp("\\$?"+lt),alias:"constant"},variable:Je.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},le.inside=ue.languages.bash;for(var we=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],Pn=Je.variable[1].inside,Mt=0;Mt<we.length;Mt++)Pn[we[Mt]]=ue.languages.bash[we[Mt]];ue.languages.shell=ue.languages.bash}(J),J.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},J.languages.c=J.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),J.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),J.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},J.languages.c.string],char:J.languages.c.char,comment:J.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:J.languages.c}}}}),J.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete J.languages.c.boolean,function(ue){var lt=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,le=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return lt.source});ue.languages.cpp=ue.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return lt.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:lt,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),ue.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return le})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),ue.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:ue.languages.cpp}}}}),ue.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),ue.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:ue.languages.extend("cpp",{})}}),ue.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},ue.languages.cpp["base-clause"])}(J),function(ue){var lt=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;ue.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+lt.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+lt.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+lt.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:lt,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},ue.languages.css.atrule.inside.rest=ue.languages.css;var le=ue.languages.markup;le&&(le.tag.addInlined("style","css"),le.tag.addAttribute("style","css"))}(J),function(ue){var lt=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,le;ue.languages.css.selector={pattern:ue.languages.css.selector.pattern,lookbehind:!0,inside:le={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp(`\\[(?:[^[\\]"']|`+lt.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[lt,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},ue.languages.css.atrule.inside["selector-function-argument"].inside=le,ue.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var Je={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},we={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};ue.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:Je,number:we,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:Je,number:we})}(J),J.languages.javascript=J.languages.extend("clike",{"class-name":[J.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),J.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,J.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:J.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:J.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:J.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:J.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:J.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),J.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:J.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),J.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),J.languages.markup&&(J.languages.markup.tag.addInlined("script","javascript"),J.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),J.languages.js=J.languages.javascript,function(ue){var lt=/#(?!\{).+/,le={pattern:/#\{[^}]+\}/,alias:"variable"};ue.languages.coffeescript=ue.languages.extend("javascript",{comment:lt,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:le}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),ue.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:lt,interpolation:le}}}),ue.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:ue.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:le}}]}),ue.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete ue.languages.coffeescript["template-string"],ue.languages.coffee=ue.languages.coffeescript}(J),function(ue){var lt=/[*&][^\s[\]{},]+/,le=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,Je="(?:"+le.source+"(?:[ 	]+"+lt.source+")?|"+lt.source+"(?:[ 	]+"+le.source+")?)",we=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),Pn=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function Mt(or,wr){wr=(wr||"").replace(/m/g,"")+"m";var Dr=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return Je}).replace(/<<value>>/g,function(){return or});return RegExp(Dr,wr)}ue.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return Je})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return Je}).replace(/<<key>>/g,function(){return"(?:"+we+"|"+Pn+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:Mt(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:Mt(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:Mt(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:Mt(Pn),lookbehind:!0,greedy:!0},number:{pattern:Mt(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:le,important:lt,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},ue.languages.yml=ue.languages.yaml}(J),function(ue){var lt=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function le(lr){return lr=lr.replace(/<inner>/g,function(){return lt}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+lr+")")}var Je=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,we=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return Je}),Pn=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;ue.languages.markdown=ue.languages.extend("markup",{}),ue.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:ue.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+we+Pn+"(?:"+we+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+we+Pn+")(?:"+we+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(Je),inside:ue.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+we+")"+Pn+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+we+"$"),inside:{"table-header":{pattern:RegExp(Je),alias:"important",inside:ue.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:le(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:le(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:le(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:le(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(lr){["url","bold","italic","strike","code-snippet"].forEach(function(Pe){lr!==Pe&&(ue.languages.markdown[lr].inside.content.inside[Pe]=ue.languages.markdown[Pe])})}),ue.hooks.add("after-tokenize",function(lr){if(lr.language!=="markdown"&&lr.language!=="md")return;function Pe(ut){if(!(!ut||typeof ut=="string"))for(var Ve=0,gt=ut.length;Ve<gt;Ve++){var Gt=ut[Ve];if(Gt.type!=="code"){Pe(Gt.content);continue}var Me=Gt.content[1],At=Gt.content[3];if(Me&&At&&Me.type==="code-language"&&At.type==="code-block"&&typeof Me.content=="string"){var Bt=Me.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");Bt=(/[a-z][\w-]*/i.exec(Bt)||[""])[0].toLowerCase();var Sn="language-"+Bt;At.alias?typeof At.alias=="string"?At.alias=[At.alias,Sn]:At.alias.push(Sn):At.alias=[Sn]}}}Pe(lr.tokens)}),ue.hooks.add("wrap",function(lr){if(lr.type==="code-block"){for(var Pe="",ut=0,Ve=lr.classes.length;ut<Ve;ut++){var gt=lr.classes[ut],Gt=/language-(.+)/.exec(gt);if(Gt){Pe=Gt[1];break}}var Me=ue.languages[Pe];if(Me)lr.content=ue.highlight(Dr(lr.content),Me,Pe);else if(Pe&&Pe!=="none"&&ue.plugins.autoloader){var At="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);lr.attributes.id=At,ue.plugins.autoloader.loadLanguages(Pe,function(){var Bt=document.getElementById(At);Bt&&(Bt.innerHTML=ue.highlight(Bt.textContent,ue.languages[Pe],Pe))})}}});var Mt=RegExp(ue.languages.markup.tag.pattern.source,"gi"),or={amp:"&",lt:"<",gt:">",quot:'"'},wr=String.fromCodePoint||String.fromCharCode;function Dr(lr){var Pe=lr.replace(Mt,"");return Pe=Pe.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(ut,Ve){if(Ve=Ve.toLowerCase(),Ve[0]==="#"){var gt;return Ve[1]==="x"?gt=parseInt(Ve.slice(2),16):gt=Number(Ve.slice(1)),wr(gt)}else{var Gt=or[Ve];return Gt||ut}}),Pe}ue.languages.md=ue.languages.markdown}(J),J.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:J.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},J.hooks.add("after-tokenize",function(lt){if(lt.language!=="graphql")return;var le=lt.tokens.filter(function(Gt){return typeof Gt!="string"&&Gt.type!=="comment"&&Gt.type!=="scalar"}),Je=0;function we(Gt){return le[Je+Gt]}function Pn(Gt,Me){Me=Me||0;for(var At=0;At<Gt.length;At++){var Bt=we(At+Me);if(!Bt||Bt.type!==Gt[At])return!1}return!0}function Mt(Gt,Me){for(var At=1,Bt=Je;Bt<le.length;Bt++){var Sn=le[Bt],Lt=Sn.content;if(Sn.type==="punctuation"&&typeof Lt=="string"){if(Gt.test(Lt))At++;else if(Me.test(Lt)&&(At--,At===0))return Bt}}return-1}function or(Gt,Me){var At=Gt.alias;At?Array.isArray(At)||(Gt.alias=At=[At]):Gt.alias=At=[],At.push(Me)}for(;Je<le.length;){var wr=le[Je++];if(wr.type==="keyword"&&wr.content==="mutation"){var Dr=[];if(Pn(["definition-mutation","punctuation"])&&we(1).content==="("){Je+=2;var lr=Mt(/^\($/,/^\)$/);if(lr===-1)continue;for(;Je<lr;Je++){var Pe=we(0);Pe.type==="variable"&&(or(Pe,"variable-input"),Dr.push(Pe.content))}Je=lr+1}if(Pn(["punctuation","property-query"])&&we(0).content==="{"&&(Je++,or(we(0),"property-mutation"),Dr.length>0)){var ut=Mt(/^\{$/,/^\}$/);if(ut===-1)continue;for(var Ve=Je;Ve<ut;Ve++){var gt=le[Ve];gt.type==="variable"&&Dr.indexOf(gt.content)>=0&&or(gt,"variable-input")}}}}}),J.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(ue){var lt=ue.languages.javascript["template-string"],le=lt.pattern.source,Je=lt.inside.interpolation,we=Je.inside["interpolation-punctuation"],Pn=Je.pattern.source;function Mt(Ve,gt){if(ue.languages[Ve])return{pattern:RegExp("((?:"+gt+")\\s*)"+le),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:Ve}}}}ue.languages.javascript["template-string"]=[Mt("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),Mt("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),Mt("svg",/\bsvg/.source),Mt("markdown",/\b(?:markdown|md)/.source),Mt("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),Mt("sql",/\bsql/.source),lt].filter(Boolean);function or(Ve,gt){return"___"+gt.toUpperCase()+"_"+Ve+"___"}function wr(Ve,gt,Gt){var Me={code:Ve,grammar:gt,language:Gt};return ue.hooks.run("before-tokenize",Me),Me.tokens=ue.tokenize(Me.code,Me.grammar),ue.hooks.run("after-tokenize",Me),Me.tokens}function Dr(Ve){var gt={};gt["interpolation-punctuation"]=we;var Gt=ue.tokenize(Ve,gt);if(Gt.length===3){var Me=[1,1];Me.push.apply(Me,wr(Gt[1],ue.languages.javascript,"javascript")),Gt.splice.apply(Gt,Me)}return new ue.Token("interpolation",Gt,Je.alias,Ve)}function lr(Ve,gt,Gt){var Me=ue.tokenize(Ve,{interpolation:{pattern:RegExp(Pn),lookbehind:!0}}),At=0,Bt={},Sn=Me.map(function(gn){if(typeof gn=="string")return gn;for(var ar=gn.content,Sr;Ve.indexOf(Sr=or(At++,Gt))!==-1;);return Bt[Sr]=ar,Sr}).join(""),Lt=wr(Sn,gt,Gt),Bn=Object.keys(Bt);At=0;function en(gn){for(var ar=0;ar<gn.length;ar++){if(At>=Bn.length)return;var Sr=gn[ar];if(typeof Sr=="string"||typeof Sr.content=="string"){var In=Bn[At],Gn=typeof Sr=="string"?Sr:Sr.content,hn=Gn.indexOf(In);if(hn!==-1){++At;var mn=Gn.substring(0,hn),cn=Dr(Bt[In]),Ln=Gn.substring(hn+In.length),Er=[];if(mn&&Er.push(mn),Er.push(cn),Ln){var mr=[Ln];en(mr),Er.push.apply(Er,mr)}typeof Sr=="string"?(gn.splice.apply(gn,[ar,1].concat(Er)),ar+=Er.length-1):Sr.content=Er}}else{var Jr=Sr.content;Array.isArray(Jr)?en(Jr):en([Jr])}}}return en(Lt),new ue.Token(Gt,Lt,"language-"+Gt,Ve)}var Pe={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};ue.hooks.add("after-tokenize",function(Ve){if(!(Ve.language in Pe))return;function gt(Gt){for(var Me=0,At=Gt.length;Me<At;Me++){var Bt=Gt[Me];if(typeof Bt!="string"){var Sn=Bt.content;if(!Array.isArray(Sn)){typeof Sn!="string"&&gt([Sn]);continue}if(Bt.type==="template-string"){var Lt=Sn[1];if(Sn.length===3&&typeof Lt!="string"&&Lt.type==="embedded-code"){var Bn=ut(Lt),en=Lt.alias,gn=Array.isArray(en)?en[0]:en,ar=ue.languages[gn];if(!ar)continue;Sn[1]=lr(Bn,ar,gn)}}else gt(Sn)}}}gt(Ve.tokens)});function ut(Ve){return typeof Ve=="string"?Ve:Array.isArray(Ve)?Ve.map(ut).join(""):ut(Ve.content)}}(J),function(ue){ue.languages.typescript=ue.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),ue.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete ue.languages.typescript.parameter,delete ue.languages.typescript["literal-property"];var lt=ue.languages.extend("typescript",{});delete lt["class-name"],ue.languages.typescript["class-name"].inside=lt,ue.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:lt}}}}),ue.languages.ts=ue.languages.typescript}(J),function(ue){ue.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+ue.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),ue.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+ue.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),ue.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]});function lt(or,wr){return RegExp(or.replace(/<ID>/g,function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source}),wr)}ue.languages.insertBefore("javascript","keyword",{imports:{pattern:lt(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:ue.languages.javascript},exports:{pattern:lt(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:ue.languages.javascript}}),ue.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),ue.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),ue.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:lt(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var le=["function","function-variable","method","method-variable","property-access"],Je=0;Je<le.length;Je++){var we=le[Je],Pn=ue.languages.javascript[we];ue.util.type(Pn)==="RegExp"&&(Pn=ue.languages.javascript[we]={pattern:Pn});var Mt=Pn.inside||{};Pn.inside=Mt,Mt["maybe-class-name"]=/^[A-Z][\s\S]*/}}(J),function(ue){var lt=ue.util.clone(ue.languages.javascript),le=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,Je=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,we=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function Pn(wr,Dr){return wr=wr.replace(/<S>/g,function(){return le}).replace(/<BRACES>/g,function(){return Je}).replace(/<SPREAD>/g,function(){return we}),RegExp(wr,Dr)}we=Pn(we).source,ue.languages.jsx=ue.languages.extend("markup",lt),ue.languages.jsx.tag.pattern=Pn(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),ue.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,ue.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,ue.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,ue.languages.jsx.tag.inside.comment=lt.comment,ue.languages.insertBefore("inside","attr-name",{spread:{pattern:Pn(/<SPREAD>/.source),inside:ue.languages.jsx}},ue.languages.jsx.tag),ue.languages.insertBefore("inside","special-attr",{script:{pattern:Pn(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:ue.languages.jsx}}},ue.languages.jsx.tag);var Mt=function(wr){return wr?typeof wr=="string"?wr:typeof wr.content=="string"?wr.content:wr.content.map(Mt).join(""):""},or=function(wr){for(var Dr=[],lr=0;lr<wr.length;lr++){var Pe=wr[lr],ut=!1;if(typeof Pe!="string"&&(Pe.type==="tag"&&Pe.content[0]&&Pe.content[0].type==="tag"?Pe.content[0].content[0].content==="</"?Dr.length>0&&Dr[Dr.length-1].tagName===Mt(Pe.content[0].content[1])&&Dr.pop():Pe.content[Pe.content.length-1].content==="/>"||Dr.push({tagName:Mt(Pe.content[0].content[1]),openedBraces:0}):Dr.length>0&&Pe.type==="punctuation"&&Pe.content==="{"?Dr[Dr.length-1].openedBraces++:Dr.length>0&&Dr[Dr.length-1].openedBraces>0&&Pe.type==="punctuation"&&Pe.content==="}"?Dr[Dr.length-1].openedBraces--:ut=!0),(ut||typeof Pe=="string")&&Dr.length>0&&Dr[Dr.length-1].openedBraces===0){var Ve=Mt(Pe);lr<wr.length-1&&(typeof wr[lr+1]=="string"||wr[lr+1].type==="plain-text")&&(Ve+=Mt(wr[lr+1]),wr.splice(lr+1,1)),lr>0&&(typeof wr[lr-1]=="string"||wr[lr-1].type==="plain-text")&&(Ve=Mt(wr[lr-1])+Ve,wr.splice(lr-1,1),lr--),wr[lr]=new ue.Token("plain-text",Ve,null,Ve)}Pe.content&&typeof Pe.content!="string"&&or(Pe.content)}};ue.hooks.add("after-tokenize",function(wr){wr.language!=="jsx"&&wr.language!=="tsx"||or(wr.tokens)})}(J),function(ue){ue.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var lt={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(lt).forEach(function(le){var Je=lt[le],we=[];/^\w+$/.test(le)||we.push(/\w+/.exec(le)[0]),le==="diff"&&we.push("bold"),ue.languages.diff[le]={pattern:RegExp("^(?:["+Je+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:we,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(le)[0]}}}}),Object.defineProperty(ue.languages.diff,"PREFIXES",{value:lt})}(J),J.languages.git={comment:/^#.*/m,deleted:/^[-–].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},J.languages.go=J.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),J.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete J.languages.go["class-name"],function(ue){function lt(le,Je){return"___"+le.toUpperCase()+Je+"___"}Object.defineProperties(ue.languages["markup-templating"]={},{buildPlaceholders:{value:function(le,Je,we,Pn){if(le.language===Je){var Mt=le.tokenStack=[];le.code=le.code.replace(we,function(or){if(typeof Pn=="function"&&!Pn(or))return or;for(var wr=Mt.length,Dr;le.code.indexOf(Dr=lt(Je,wr))!==-1;)++wr;return Mt[wr]=or,Dr}),le.grammar=ue.languages.markup}}},tokenizePlaceholders:{value:function(le,Je){if(le.language!==Je||!le.tokenStack)return;le.grammar=ue.languages[Je];var we=0,Pn=Object.keys(le.tokenStack);function Mt(or){for(var wr=0;wr<or.length&&!(we>=Pn.length);wr++){var Dr=or[wr];if(typeof Dr=="string"||Dr.content&&typeof Dr.content=="string"){var lr=Pn[we],Pe=le.tokenStack[lr],ut=typeof Dr=="string"?Dr:Dr.content,Ve=lt(Je,lr),gt=ut.indexOf(Ve);if(gt>-1){++we;var Gt=ut.substring(0,gt),Me=new ue.Token(Je,ue.tokenize(Pe,le.grammar),"language-"+Je,Pe),At=ut.substring(gt+Ve.length),Bt=[];Gt&&Bt.push.apply(Bt,Mt([Gt])),Bt.push(Me),At&&Bt.push.apply(Bt,Mt([At])),typeof Dr=="string"?or.splice.apply(or,[wr,1].concat(Bt)):Dr.content=Bt}}else Dr.content&&Mt(Dr.content)}return or}Mt(le.tokens)}}})}(J),function(ue){ue.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},ue.hooks.add("before-tokenize",function(lt){var le=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;ue.languages["markup-templating"].buildPlaceholders(lt,"handlebars",le)}),ue.hooks.add("after-tokenize",function(lt){ue.languages["markup-templating"].tokenizePlaceholders(lt,"handlebars")}),ue.languages.hbs=ue.languages.handlebars}(J),J.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},J.languages.webmanifest=J.languages.json,J.languages.less=J.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),J.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),J.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},J.languages.objectivec=J.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete J.languages.objectivec["class-name"],J.languages.objc=J.languages.objectivec,J.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/},J.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},J.languages.python["string-interpolation"].inside.interpolation.inside.rest=J.languages.python,J.languages.py=J.languages.python,J.languages.reason=J.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),J.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete J.languages.reason.function,function(ue){ue.languages.sass=ue.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),ue.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete ue.languages.sass.atrule;var lt=/\$[-\w]+|#\{\$[-\w]+\}/,le=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];ue.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:lt,operator:le}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:lt,operator:le,important:ue.languages.sass.important}}}),delete ue.languages.sass.property,delete ue.languages.sass.important,ue.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})}(J),J.languages.scss=J.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),J.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),J.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),J.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),J.languages.scss.atrule.inside.rest=J.languages.scss,function(ue){var lt={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},le={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},Je={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:lt,number:le,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:lt,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:le,punctuation:/[{}()\[\];:,]/};Je.interpolation={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:Je}},Je.func={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:Je}},ue.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:Je}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:Je}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:Je}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:Je.interpolation}},rest:Je}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:Je.interpolation,comment:Je.comment,punctuation:/[{},]/}},func:Je.func,string:Je.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:Je.interpolation,punctuation:/[{}()\[\];:.]/}}(J),function(ue){var lt=ue.util.clone(ue.languages.typescript);ue.languages.tsx=ue.languages.extend("jsx",lt),delete ue.languages.tsx.parameter,delete ue.languages.tsx["literal-property"];var le=ue.languages.tsx.tag;le.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+le.pattern.source+")",le.pattern.flags),le.lookbehind=!0}(J),J.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};var ae=J,se={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},Ee=se,Le={Prism:ae,theme:Ee};function ke(ue,lt,le){return lt in ue?Object.defineProperty(ue,lt,{value:le,enumerable:!0,configurable:!0,writable:!0}):ue[lt]=le,ue}function ye(){return ye=Object.assign||function(ue){for(var lt=1;lt<arguments.length;lt++){var le=arguments[lt];for(var Je in le)Object.prototype.hasOwnProperty.call(le,Je)&&(ue[Je]=le[Je])}return ue},ye.apply(this,arguments)}var Se=/\r\n|\r|\n/,be=function(ue){ue.length===0?ue.push({types:["plain"],content:`
`,empty:!0}):ue.length===1&&ue[0].content===""&&(ue[0].content=`
`,ue[0].empty=!0)},Ue=function(ue,lt){var le=ue.length;return le>0&&ue[le-1]===lt?ue:ue.concat(lt)},qe=function(ue){for(var lt=[[]],le=[ue],Je=[0],we=[ue.length],Pn=0,Mt=0,or=[],wr=[or];Mt>-1;){for(;(Pn=Je[Mt]++)<we[Mt];){var Dr=void 0,lr=lt[Mt],Pe=le[Mt],ut=Pe[Pn];if(typeof ut=="string"?(lr=Mt>0?lr:["plain"],Dr=ut):(lr=Ue(lr,ut.type),ut.alias&&(lr=Ue(lr,ut.alias)),Dr=ut.content),typeof Dr!="string"){Mt++,lt.push(lr),le.push(Dr),Je.push(0),we.push(Dr.length);continue}var Ve=Dr.split(Se),gt=Ve.length;or.push({types:lr,content:Ve[0]});for(var Gt=1;Gt<gt;Gt++)be(or),wr.push(or=[]),or.push({types:lr,content:Ve[Gt]})}Mt--,lt.pop(),le.pop(),Je.pop(),we.pop()}return be(or),wr},je=function(ue,lt){var le=ue.plain,Je=Object.create(null),we=ue.styles.reduce(function(Pn,Mt){var or=Mt.languages,wr=Mt.style;return or&&!or.includes(lt)||Mt.types.forEach(function(Dr){var lr=ye({},Pn[Dr],wr);Pn[Dr]=lr}),Pn},Je);return we.root=le,we.plain=ye({},le,{backgroundColor:null}),we};function nt(ue,lt){var le={};for(var Je in ue)Object.prototype.hasOwnProperty.call(ue,Je)&&lt.indexOf(Je)===-1&&(le[Je]=ue[Je]);return le}var Ct=function(ue){function lt(){for(var le=this,Je=[],we=arguments.length;we--;)Je[we]=arguments[we];ue.apply(this,Je),ke(this,"getThemeDict",function(Pn){if(le.themeDict!==void 0&&Pn.theme===le.prevTheme&&Pn.language===le.prevLanguage)return le.themeDict;le.prevTheme=Pn.theme,le.prevLanguage=Pn.language;var Mt=Pn.theme?je(Pn.theme,Pn.language):void 0;return le.themeDict=Mt}),ke(this,"getLineProps",function(Pn){var Mt=Pn.key,or=Pn.className,wr=Pn.style,Dr=nt(Pn,["key","className","style","line"]),lr=Dr,Pe=ye({},lr,{className:"token-line",style:void 0,key:void 0}),ut=le.getThemeDict(le.props);return ut!==void 0&&(Pe.style=ut.plain),wr!==void 0&&(Pe.style=Pe.style!==void 0?ye({},Pe.style,wr):wr),Mt!==void 0&&(Pe.key=Mt),or&&(Pe.className+=" "+or),Pe}),ke(this,"getStyleForToken",function(Pn){var Mt=Pn.types,or=Pn.empty,wr=Mt.length,Dr=le.getThemeDict(le.props);if(Dr!==void 0){{if(wr===1&&Mt[0]==="plain")return or?{display:"inline-block"}:void 0;if(wr===1&&!or)return Dr[Mt[0]]}var lr=or?{display:"inline-block"}:{},Pe=Mt.map(function(ut){return Dr[ut]});return Object.assign.apply(Object,[lr].concat(Pe))}}),ke(this,"getTokenProps",function(Pn){var Mt=Pn.key,or=Pn.className,wr=Pn.style,Dr=Pn.token,lr=nt(Pn,["key","className","style","token"]),Pe=lr,ut=ye({},Pe,{className:"token "+Dr.types.join(" "),children:Dr.content,style:le.getStyleForToken(Dr),key:void 0});return wr!==void 0&&(ut.style=ut.style!==void 0?ye({},ut.style,wr):wr),Mt!==void 0&&(ut.key=Mt),or&&(ut.className+=" "+or),ut}),ke(this,"tokenize",function(Pn,Mt,or,wr){var Dr={code:Mt,grammar:or,language:wr,tokens:[]};Pn.hooks.run("before-tokenize",Dr);var lr=Dr.tokens=Pn.tokenize(Dr.code,Dr.grammar,Dr.language);return Pn.hooks.run("after-tokenize",Dr),lr})}return ue&&(lt.__proto__=ue),lt.prototype=Object.create(ue&&ue.prototype),lt.prototype.constructor=lt,lt.prototype.render=function(){var Je=this.props,we=Je.Prism,Pn=Je.language,Mt=Je.code,or=Je.children,wr=this.getThemeDict(this.props),Dr=we.languages[Pn],lr=Dr!==void 0?this.tokenize(we,Mt,Dr,Pn):[Mt],Pe=qe(lr);return or({tokens:Pe,className:"prism-code language-"+Pn,style:wr!==void 0?wr.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},lt}(M.Component),ft=Ct,Et=i(58226);function yt(){return yt=Object.assign?Object.assign.bind():function(ue){for(var lt=1;lt<arguments.length;lt++){var le=arguments[lt];for(var Je in le)Object.prototype.hasOwnProperty.call(le,Je)&&(ue[Je]=le[Je])}return ue},yt.apply(this,arguments)}function _t(ue,lt){return Qe(ue)||st(ue,lt)||bt(ue,lt)||He()}function He(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(ue,lt){if(ue){if(typeof ue=="string")return Tt(ue,lt);var le=Object.prototype.toString.call(ue).slice(8,-1);if(le==="Object"&&ue.constructor&&(le=ue.constructor.name),le==="Map"||le==="Set")return Array.from(ue);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return Tt(ue,lt)}}function Tt(ue,lt){(lt==null||lt>ue.length)&&(lt=ue.length);for(var le=0,Je=new Array(lt);le<lt;le++)Je[le]=ue[le];return Je}function st(ue,lt){var le=ue==null?null:typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(le!=null){var Je,we,Pn,Mt,or=[],wr=!0,Dr=!1;try{if(Pn=(le=le.call(ue)).next,lt===0){if(Object(le)!==le)return;wr=!1}else for(;!(wr=(Je=Pn.call(le)).done)&&(or.push(Je.value),or.length!==lt);wr=!0);}catch(lr){Dr=!0,we=lr}finally{try{if(!wr&&le.return!=null&&(Mt=le.return(),Object(Mt)!==Mt))return}finally{if(Dr)throw we}}return or}}function Qe(ue){if(Array.isArray(ue))return ue}var mt={acss:"css",axml:"markup",vue:"markup"},Ht=function(lt){var le=lt.children,Je=le===void 0?"":le,we=lt.lang,Pn=lt.highlightLines,Mt=Pn===void 0?[]:Pn,or=(0,M.useRef)(),wr=(0,M.useState)(!1),Dr=_t(wr,2),lr=Dr[0],Pe=Dr[1],ut=(0,M.useState)(Je),Ve=_t(ut,2),gt=Ve[0],Gt=Ve[1],Me=(0,de.WF)(),At=Me.themeConfig;(0,M.useEffect)(function(){var Sn=/shellscript|shell|bash|sh|zsh/.test(we);if(Sn){var Lt=Je.replace(/^(\$|>)\s/gm,"");Gt(Lt)}},[we,Je]);var Bt=M.createElement(ft,yt({},Le,{code:lt.textarea?Je:Je.trim(),language:mt[we]||we,theme:void 0}),function(Sn){var Lt=Sn.className,Bn=Sn.style,en=Sn.tokens,gn=Sn.getLineProps,ar=Sn.getTokenProps;return M.createElement("pre",{className:Lt,style:Bn},en.map(function(Sr,In){return M.createElement("div",{key:String(In),className:K()({highlighted:Mt.includes(In+1),wrap:At.showLineNum})},At.showLineNum&&M.createElement("span",{className:"token-line-num"},In+1),M.createElement("div",yt({},gn({line:Sr,key:In}),{className:K()({"line-cell":At.showLineNum})}),Sr.map(function(Gn,hn){return M.createElement("span",ar({token:Gn,key:hn}))})))}))});return M.createElement("div",{className:"dumi-default-source-code"},M.createElement(Et.CopyToClipboard,{text:gt,onCopy:function(){Pe(!0),clearTimeout(or.current),or.current=window.setTimeout(function(){return Pe(!1)},2e3)}},M.createElement("button",{type:"button",className:"dumi-default-source-code-copy","data-copied":lr||void 0},lr?M.createElement(E.r,null):M.createElement(te,null))),lt.textarea?M.createElement("div",{className:"dumi-default-source-code-scroll-container"},M.createElement("div",{className:"dumi-default-source-code-scroll-content"},Bt,lt.textarea)):Bt,lt.extra)},vt=Ht},96753:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return he}});var E=i(30826),M=i.n(E),C=i(75271),n=["children"];function j(J,ae){return X(J)||te(J,ae)||U(J,ae)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U(J,ae){if(J){if(typeof J=="string")return Y(J,ae);var se=Object.prototype.toString.call(J).slice(8,-1);if(se==="Object"&&J.constructor&&(se=J.constructor.name),se==="Map"||se==="Set")return Array.from(J);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return Y(J,ae)}}function Y(J,ae){(ae==null||ae>J.length)&&(ae=J.length);for(var se=0,Ee=new Array(ae);se<ae;se++)Ee[se]=J[se];return Ee}function te(J,ae){var se=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(se!=null){var Ee,Le,ke,ye,Se=[],be=!0,Ue=!1;try{if(ke=(se=se.call(J)).next,ae===0){if(Object(se)!==se)return;be=!1}else for(;!(be=(Ee=ke.call(se)).done)&&(Se.push(Ee.value),Se.length!==ae);be=!0);}catch(qe){Ue=!0,Le=qe}finally{try{if(!be&&se.return!=null&&(ye=se.return(),Object(ye)!==ye))return}finally{if(Ue)throw Le}}return Se}}function X(J){if(Array.isArray(J))return J}function B(J,ae){if(J==null)return{};var se=K(J,ae),Ee,Le;if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(J);for(Le=0;Le<ke.length;Le++)Ee=ke[Le],!(ae.indexOf(Ee)>=0)&&Object.prototype.propertyIsEnumerable.call(J,Ee)&&(se[Ee]=J[Ee])}return se}function K(J,ae){if(J==null)return{};var se={},Ee=Object.keys(J),Le,ke;for(ke=0;ke<Ee.length;ke++)Le=Ee[ke],!(ae.indexOf(Le)>=0)&&(se[Le]=J[Le]);return se}var de=function(ae){var se=ae.children,Ee=B(ae,n),Le=(0,C.useRef)(null),ke=(0,C.useState)(!1),ye=j(ke,2),Se=ye[0],be=ye[1],Ue=(0,C.useState)(!1),qe=j(Ue,2),je=qe[0],nt=qe[1];return(0,C.useEffect)(function(){var Ct=Le.current;if(Ct){var ft=M()(function(){be(Ct.scrollLeft>0),nt(Ct.scrollLeft<Ct.scrollWidth-Ct.offsetWidth)},100);return ft(),Ct.addEventListener("scroll",ft),window.addEventListener("resize",ft),function(){Ct.removeEventListener("scroll",ft),window.removeEventListener("resize",ft)}}},[]),C.createElement("div",{className:"dumi-default-table"},C.createElement("div",{className:"dumi-default-table-content",ref:Le,"data-left-folded":Se||void 0,"data-right-folded":je||void 0},C.createElement("table",Ee,se)))},he=de},9e3:function(H,Q,i){"use strict";var E=i(91606),M=i(75271);function C(ft){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},C(ft)}function n(ft,Et){var yt=Object.keys(ft);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(ft);Et&&(_t=_t.filter(function(He){return Object.getOwnPropertyDescriptor(ft,He).enumerable})),yt.push.apply(yt,_t)}return yt}function j(ft){for(var Et=1;Et<arguments.length;Et++){var yt=arguments[Et]!=null?arguments[Et]:{};Et%2?n(Object(yt),!0).forEach(function(_t){$(ft,_t,yt[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(yt)):n(Object(yt)).forEach(function(_t){Object.defineProperty(ft,_t,Object.getOwnPropertyDescriptor(yt,_t))})}return ft}function $(ft,Et,yt){return Et=U(Et),Et in ft?Object.defineProperty(ft,Et,{value:yt,enumerable:!0,configurable:!0,writable:!0}):ft[Et]=yt,ft}function U(ft){var Et=Y(ft,"string");return C(Et)==="symbol"?Et:String(Et)}function Y(ft,Et){if(C(ft)!=="object"||ft===null)return ft;var yt=ft[Symbol.toPrimitive];if(yt!==void 0){var _t=yt.call(ft,Et||"default");if(C(_t)!=="object")return _t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Et==="string"?String:Number)(ft)}function te(ft,Et){return K(ft)||B(ft,Et)||J(ft,Et)||X()}function X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(ft,Et){var yt=ft==null?null:typeof Symbol!="undefined"&&ft[Symbol.iterator]||ft["@@iterator"];if(yt!=null){var _t,He,bt,Tt,st=[],Qe=!0,mt=!1;try{if(bt=(yt=yt.call(ft)).next,Et===0){if(Object(yt)!==yt)return;Qe=!1}else for(;!(Qe=(_t=bt.call(yt)).done)&&(st.push(_t.value),st.length!==Et);Qe=!0);}catch(Ht){mt=!0,He=Ht}finally{try{if(!Qe&&yt.return!=null&&(Tt=yt.return(),Object(Tt)!==Tt))return}finally{if(mt)throw He}}return st}}function K(ft){if(Array.isArray(ft))return ft}function de(ft){return se(ft)||ae(ft)||J(ft)||he()}function he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(ft,Et){if(ft){if(typeof ft=="string")return Ee(ft,Et);var yt=Object.prototype.toString.call(ft).slice(8,-1);if(yt==="Object"&&ft.constructor&&(yt=ft.constructor.name),yt==="Map"||yt==="Set")return Array.from(ft);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return Ee(ft,Et)}}function ae(ft){if(typeof Symbol!="undefined"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function se(ft){if(Array.isArray(ft))return Ee(ft)}function Ee(ft,Et){(Et==null||Et>ft.length)&&(Et=ft.length);for(var yt=0,_t=new Array(Et);yt<Et;yt++)_t[yt]=ft[yt];return _t}function Le(ft){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",yt=[];return[].concat(ft).forEach(function(_t,He){var bt="".concat(Et?"".concat(Et,"-"):"").concat(He);switch(_t==null?void 0:_t.type){case"ul":{var Tt,st=((Tt=yt[yt.length-1])===null||Tt===void 0?void 0:Tt.children)||yt,Qe=Le(_t.props.children||[],bt);st.push.apply(st,de(Qe));break}case"li":{var mt,Ht,vt=(mt=_t.props.children)===null||mt===void 0||(Ht=mt.some)===null||Ht===void 0?void 0:Ht.call(mt,function(le){var Je;return le.type==="ul"&&!((Je=le.props.children)!==null&&Je!==void 0&&Je.length)}),ue=[].concat(_t.props.children).filter(function(le){return le.type!=="ul"}),lt=vt?[]:Le(_t.props.children,bt);yt.push({title:ue,key:bt,children:lt,isLeaf:!vt&&!lt.length,switcherIcon:vt?React.createElement("span",{className:"tree-switcher-leaf-line"}):void 0});break}default:}}),yt}var ke=function(Et){var yt=useState(Le(Et)),_t=te(yt,2),He=_t[0],bt=_t[1];return useEffect(function(){bt(Le(Et))},[Et]),He},ye=function(Et){var yt,_t=Et.isLeaf,He=Et.expanded,bt=Et.data;return _t?React.createElement("span",{className:"dumi-default-tree-icon"},React.createElement(FileOutlined,{fill:"currentColor"})):!He||!(bt!=null&&(yt=bt.children)!==null&&yt!==void 0&&yt.length)?React.createElement("span",{className:"dumi-default-tree-icon"},React.createElement(FolderOutlined,{fill:"currentColor"})):React.createElement("span",{className:"dumi-default-tree-icon"},React.createElement(FolderOpenOutlined,{fill:"currentColor"}))},Se=function(Et){var yt=Et.isLeaf,_t=Et.expanded;return yt?React.createElement("span",{className:"tree-switcher-leaf-line"}):_t?React.createElement("span",{className:"tree-switcher-line-icon"},React.createElement("span",{className:"dumi-default-tree-icon"},React.createElement(MinusSquareOutlined,{fill:"currentColor"}))):React.createElement("span",{className:"tree-switcher-line-icon"},React.createElement("span",{className:"dumi-default-tree-icon"},React.createElement(PlusSquareOutlined,{fill:"currentColor"})))},be=function(){return{height:0,opacity:0}},Ue=function(Et){var yt=Et.scrollHeight;return{height:yt,opacity:1}},qe=function(Et){return{height:Et?Et.offsetHeight:0}},je=function(Et,yt){return(yt==null?void 0:yt.deadline)===!0||yt.propertyName==="height"},nt={motionName:"ant-motion-collapse",onAppearStart:be,onEnterStart:be,onAppearActive:Ue,onEnterActive:Ue,onLeaveStart:qe,onLeaveActive:be,onAppearEnd:je,onEnterEnd:je,onLeaveEnd:je,motionDeadline:500},Ct=function(ft){var Et=ke(ft.children),yt=createRef(),_t=function(bt,Tt){var st,Qe=Tt.isLeaf,mt=!Qe&&!((st=Tt.children)!==null&&st!==void 0&&st.length);Qe||mt||bt.shiftKey||bt.metaKey||bt.ctrlKey||yt.current.onNodeExpand(bt,Tt)};return React.createElement(Tree,{className:"dumi-default-tree",icon:ye,ref:yt,itemHeight:20,showLine:!0,selectable:!1,virtual:!1,motion:j(j({},nt),{},{motionAppear:!1}),onClick:_t,treeData:[{key:"0",title:ft.title||"<root>",children:Et}],defaultExpandAll:!0,switcherIcon:Se})}},73377:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return kl}});var E=i(23022),M=i(38926),C=i(54153),n=i(89692),j=i(5147),$=i(58190),U=i(82187),Y=i.n(U),te=i(93954),X=i(21611),B=i(75271),K=(0,B.createContext)(null),de=i(46865),he=i(40493),J=i(59373),ae=i(42684),se=i(49975),Ee=function(Ft){var Tn=Ft.activeTabOffset,vr=Ft.horizontal,cr=Ft.rtl,Nr=Ft.indicatorSize,Lr=Ft.indicatorAlign,Qr=(0,B.useState)(),ui=(0,n.Z)(Qr,2),Ii=ui[0],Ur=ui[1],Ai=(0,B.useRef)(),Zi=B.useCallback(function(no){return typeof Nr=="function"?Nr(no):typeof Nr=="number"?Nr:no},[Nr]);function Ji(){se.Z.cancel(Ai.current)}return(0,B.useEffect)(function(){var no={};if(Tn)if(vr){no.width=Zi(Tn.width);var Lo=cr?"right":"left";Lr==="start"&&(no[Lo]=Tn[Lo]),Lr==="center"&&(no[Lo]=Tn[Lo]+Tn.width/2,no.transform=cr?"translateX(50%)":"translateX(-50%)"),Lr==="end"&&(no[Lo]=Tn[Lo]+Tn.width,no.transform="translateX(-100%)")}else no.height=Zi(Tn.height),Lr==="start"&&(no.top=Tn.top),Lr==="center"&&(no.top=Tn.top+Tn.height/2,no.transform="translateY(-50%)"),Lr==="end"&&(no.top=Tn.top+Tn.height,no.transform="translateY(-100%)");return Ji(),Ai.current=(0,se.Z)(function(){Ur(no)}),Ji},[Tn,vr,cr,Nr,Lr,Zi]),{style:Ii}},Le=Ee,ke={width:0,height:0,left:0,top:0};function ye(zt,Ft,Tn){return(0,B.useMemo)(function(){for(var vr,cr=new Map,Nr=Ft.get((vr=zt[0])===null||vr===void 0?void 0:vr.key)||ke,Lr=Nr.left+Nr.width,Qr=0;Qr<zt.length;Qr+=1){var ui=zt[Qr].key,Ii=Ft.get(ui);if(!Ii){var Ur;Ii=Ft.get((Ur=zt[Qr-1])===null||Ur===void 0?void 0:Ur.key)||ke}var Ai=cr.get(ui)||(0,C.Z)({},Ii);Ai.right=Lr-Ai.left-Ai.width,cr.set(ui,Ai)}return cr},[zt.map(function(vr){return vr.key}).join("_"),Ft,Tn])}function Se(zt,Ft){var Tn=B.useRef(zt),vr=B.useState({}),cr=(0,n.Z)(vr,2),Nr=cr[1];function Lr(Qr){var ui=typeof Qr=="function"?Qr(Tn.current):Qr;ui!==Tn.current&&Ft(ui,Tn.current),Tn.current=ui,Nr({})}return[Tn.current,Lr]}var be=.1,Ue=.01,qe=20,je=Math.pow(.995,qe);function nt(zt,Ft){var Tn=(0,B.useState)(),vr=(0,n.Z)(Tn,2),cr=vr[0],Nr=vr[1],Lr=(0,B.useState)(0),Qr=(0,n.Z)(Lr,2),ui=Qr[0],Ii=Qr[1],Ur=(0,B.useState)(0),Ai=(0,n.Z)(Ur,2),Zi=Ai[0],Ji=Ai[1],no=(0,B.useState)(),Lo=(0,n.Z)(no,2),mo=Lo[0],Po=Lo[1],I=(0,B.useRef)();function c(tt){var It=tt.touches[0],ne=It.screenX,ge=It.screenY;Nr({x:ne,y:ge}),window.clearInterval(I.current)}function f(tt){if(cr){tt.preventDefault();var It=tt.touches[0],ne=It.screenX,ge=It.screenY;Nr({x:ne,y:ge});var xe=ne-cr.x,xt=ge-cr.y;Ft(xe,xt);var pn=Date.now();Ii(pn),Ji(pn-ui),Po({x:xe,y:xt})}}function T(){if(cr&&(Nr(null),Po(null),mo)){var tt=mo.x/Zi,It=mo.y/Zi,ne=Math.abs(tt),ge=Math.abs(It);if(Math.max(ne,ge)<be)return;var xe=tt,xt=It;I.current=window.setInterval(function(){if(Math.abs(xe)<Ue&&Math.abs(xt)<Ue){window.clearInterval(I.current);return}xe*=je,xt*=je,Ft(xe*qe,xt*qe)},qe)}}var W=(0,B.useRef)();function me(tt){var It=tt.deltaX,ne=tt.deltaY,ge=0,xe=Math.abs(It),xt=Math.abs(ne);xe===xt?ge=W.current==="x"?It:ne:xe>xt?(ge=It,W.current="x"):(ge=ne,W.current="y"),Ft(-ge,-ge)&&tt.preventDefault()}var ze=(0,B.useRef)(null);ze.current={onTouchStart:c,onTouchMove:f,onTouchEnd:T,onWheel:me},B.useEffect(function(){function tt(xe){ze.current.onTouchStart(xe)}function It(xe){ze.current.onTouchMove(xe)}function ne(xe){ze.current.onTouchEnd(xe)}function ge(xe){ze.current.onWheel(xe)}return document.addEventListener("touchmove",It,{passive:!1}),document.addEventListener("touchend",ne,{passive:!1}),zt.current.addEventListener("touchstart",tt,{passive:!1}),zt.current.addEventListener("wheel",ge),function(){document.removeEventListener("touchmove",It),document.removeEventListener("touchend",ne)}},[])}var Ct=i(92076);function ft(zt){var Ft=(0,B.useState)(0),Tn=(0,n.Z)(Ft,2),vr=Tn[0],cr=Tn[1],Nr=(0,B.useRef)(0),Lr=(0,B.useRef)();return Lr.current=zt,(0,Ct.o)(function(){var Qr;(Qr=Lr.current)===null||Qr===void 0||Qr.call(Lr)},[vr]),function(){Nr.current===vr&&(Nr.current+=1,cr(Nr.current))}}function Et(zt){var Ft=(0,B.useRef)([]),Tn=(0,B.useState)({}),vr=(0,n.Z)(Tn,2),cr=vr[1],Nr=(0,B.useRef)(typeof zt=="function"?zt():zt),Lr=ft(function(){var ui=Nr.current;Ft.current.forEach(function(Ii){ui=Ii(ui)}),Ft.current=[],Nr.current=ui,cr({})});function Qr(ui){Ft.current.push(ui),Lr()}return[Nr.current,Qr]}var yt={width:0,height:0,left:0,top:0,right:0};function _t(zt,Ft,Tn,vr,cr,Nr,Lr){var Qr=Lr.tabs,ui=Lr.tabPosition,Ii=Lr.rtl,Ur,Ai,Zi;return["top","bottom"].includes(ui)?(Ur="width",Ai=Ii?"right":"left",Zi=Math.abs(Tn)):(Ur="height",Ai="top",Zi=-Tn),(0,B.useMemo)(function(){if(!Qr.length)return[0,0];for(var Ji=Qr.length,no=Ji,Lo=0;Lo<Ji;Lo+=1){var mo=zt.get(Qr[Lo].key)||yt;if(mo[Ai]+mo[Ur]>Zi+Ft){no=Lo-1;break}}for(var Po=0,I=Ji-1;I>=0;I-=1){var c=zt.get(Qr[I].key)||yt;if(c[Ai]<Zi){Po=I+1;break}}return Po>=no?[0,0]:[Po,no]},[zt,Ft,vr,cr,Nr,Zi,ui,Qr.map(function(Ji){return Ji.key}).join("_"),Ii])}function He(zt){var Ft;return zt instanceof Map?(Ft={},zt.forEach(function(Tn,vr){Ft[vr]=Tn})):Ft=zt,JSON.stringify(Ft)}var bt="TABS_DQ";function Tt(zt){return String(zt).replace(/"/g,bt)}function st(zt,Ft,Tn,vr){return!(!Tn||vr||zt===!1||zt===void 0&&(Ft===!1||Ft===null))}var Qe=B.forwardRef(function(zt,Ft){var Tn=zt.prefixCls,vr=zt.editable,cr=zt.locale,Nr=zt.style;return!vr||vr.showAdd===!1?null:B.createElement("button",{ref:Ft,type:"button",className:"".concat(Tn,"-nav-add"),style:Nr,"aria-label":(cr==null?void 0:cr.addAriaLabel)||"Add tab",onClick:function(Qr){vr.onEdit("add",{event:Qr})}},vr.addIcon||"+")}),mt=Qe,Ht=B.forwardRef(function(zt,Ft){var Tn=zt.position,vr=zt.prefixCls,cr=zt.extra;if(!cr)return null;var Nr,Lr={};return(0,j.Z)(cr)==="object"&&!B.isValidElement(cr)?Lr=cr:Lr.right=cr,Tn==="right"&&(Nr=Lr.right),Tn==="left"&&(Nr=Lr.left),Nr?B.createElement("div",{className:"".concat(vr,"-extra-content"),ref:Ft},Nr):null}),vt=Ht,ue=i(54869),lt=i(4525),le=i(16167),Je=i(73188),we=i(62803);function Pn(zt){var Ft=zt.prefixCls,Tn=zt.align,vr=zt.arrow,cr=zt.arrowPos,Nr=vr||{},Lr=Nr.className,Qr=Nr.content,ui=cr.x,Ii=ui===void 0?0:ui,Ur=cr.y,Ai=Ur===void 0?0:Ur,Zi=B.useRef();if(!Tn||!Tn.points)return null;var Ji={position:"absolute"};if(Tn.autoArrow!==!1){var no=Tn.points[0],Lo=Tn.points[1],mo=no[0],Po=no[1],I=Lo[0],c=Lo[1];mo===I||!["t","b"].includes(mo)?Ji.top=Ai:mo==="t"?Ji.top=0:Ji.bottom=0,Po===c||!["l","r"].includes(Po)?Ji.left=Ii:Po==="l"?Ji.left=0:Ji.right=0}return B.createElement("div",{ref:Zi,className:Y()("".concat(Ft,"-arrow"),Lr),style:Ji},Qr)}function Mt(zt){var Ft=zt.prefixCls,Tn=zt.open,vr=zt.zIndex,cr=zt.mask,Nr=zt.motion;return cr?B.createElement(we.ZP,(0,E.Z)({},Nr,{motionAppear:!0,visible:Tn,removeOnLeave:!0}),function(Lr){var Qr=Lr.className;return B.createElement("div",{style:{zIndex:vr},className:Y()("".concat(Ft,"-mask"),Qr)})}):null}var or=B.memo(function(zt){var Ft=zt.children;return Ft},function(zt,Ft){return Ft.cache}),wr=or,Dr=B.forwardRef(function(zt,Ft){var Tn=zt.popup,vr=zt.className,cr=zt.prefixCls,Nr=zt.style,Lr=zt.target,Qr=zt.onVisibleChanged,ui=zt.open,Ii=zt.keepDom,Ur=zt.fresh,Ai=zt.onClick,Zi=zt.mask,Ji=zt.arrow,no=zt.arrowPos,Lo=zt.align,mo=zt.motion,Po=zt.maskMotion,I=zt.forceRender,c=zt.getPopupContainer,f=zt.autoDestroy,T=zt.portal,W=zt.zIndex,me=zt.onMouseEnter,ze=zt.onMouseLeave,tt=zt.onPointerEnter,It=zt.ready,ne=zt.offsetX,ge=zt.offsetY,xe=zt.offsetR,xt=zt.offsetB,pn=zt.onAlign,Mn=zt.onPrepare,Hn=zt.stretch,Qn=zt.targetWidth,tr=zt.targetHeight,Ir=typeof Tn=="function"?Tn():Tn,oi=ui||Ii,ni=(c==null?void 0:c.length)>0,_i=B.useState(!c||!ni),wi=(0,n.Z)(_i,2),Si=wi[0],So=wi[1];if((0,Ct.Z)(function(){!Si&&ni&&Lr&&So(!0)},[Si,ni,Lr]),!Si)return null;var io="auto",Wi={left:"-1000vw",top:"-1000vh",right:io,bottom:io};if(It||!ui){var xo,Qi=Lo.points,Ho=Lo.dynamicInset||((xo=Lo._experimental)===null||xo===void 0?void 0:xo.dynamicInset),La=Ho&&Qi[0][1]==="r",as=Ho&&Qi[0][0]==="b";La?(Wi.right=xe,Wi.left=io):(Wi.left=ne,Wi.right=io),as?(Wi.bottom=xt,Wi.top=io):(Wi.top=ge,Wi.bottom=io)}var Ja={};return Hn&&(Hn.includes("height")&&tr?Ja.height=tr:Hn.includes("minHeight")&&tr&&(Ja.minHeight=tr),Hn.includes("width")&&Qn?Ja.width=Qn:Hn.includes("minWidth")&&Qn&&(Ja.minWidth=Qn)),ui||(Ja.pointerEvents="none"),B.createElement(T,{open:I||oi,getContainer:c&&function(){return c(Lr)},autoDestroy:f},B.createElement(Mt,{prefixCls:cr,open:ui,zIndex:W,mask:Zi,motion:Po}),B.createElement(he.Z,{onResize:pn,disabled:!ui},function(Rs){return B.createElement(we.ZP,(0,E.Z)({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:I,leavedClassName:"".concat(cr,"-hidden")},mo,{onAppearPrepare:Mn,onEnterPrepare:Mn,visible:ui,onVisibleChanged:function(Ti){var Ei;mo==null||(Ei=mo.onVisibleChanged)===null||Ei===void 0||Ei.call(mo,Ti),Qr(Ti)}}),function(Go,Ti){var Ei=Go.className,fr=Go.style,nr=Y()(cr,Ei,vr);return B.createElement("div",{ref:(0,ae.sQ)(Rs,Ft,Ti),className:nr,style:(0,C.Z)((0,C.Z)((0,C.Z)((0,C.Z)({"--arrow-x":"".concat(no.x||0,"px"),"--arrow-y":"".concat(no.y||0,"px")},Wi),Ja),fr),{},{boxSizing:"border-box",zIndex:W},Nr),onMouseEnter:me,onMouseLeave:ze,onPointerEnter:tt,onClick:Ai},Ji&&B.createElement(Pn,{prefixCls:cr,arrow:Ji,arrowPos:no,align:Lo}),B.createElement(wr,{cache:!ui&&!Ur},Ir))})}))}),lr=Dr,Pe=B.forwardRef(function(zt,Ft){var Tn=zt.children,vr=zt.getTriggerDOMNode,cr=(0,ae.Yr)(Tn),Nr=B.useCallback(function(Qr){(0,ae.mH)(Ft,vr?vr(Qr):Qr)},[vr]),Lr=(0,ae.x1)(Nr,Tn.ref);return cr?B.cloneElement(Tn,{ref:Lr}):Tn}),ut=Pe,Ve=B.createContext(null),gt=Ve;function Gt(zt){return zt?Array.isArray(zt)?zt:[zt]:[]}function Me(zt,Ft,Tn,vr){return B.useMemo(function(){var cr=Gt(Tn!=null?Tn:Ft),Nr=Gt(vr!=null?vr:Ft),Lr=new Set(cr),Qr=new Set(Nr);return zt&&(Lr.has("hover")&&(Lr.delete("hover"),Lr.add("click")),Qr.has("hover")&&(Qr.delete("hover"),Qr.add("click"))),[Lr,Qr]},[zt,Ft,Tn,vr])}var At=i(60900);function Bt(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Tn=arguments.length>2?arguments[2]:void 0;return Tn?zt[0]===Ft[0]:zt[0]===Ft[0]&&zt[1]===Ft[1]}function Sn(zt,Ft,Tn,vr){for(var cr=Tn.points,Nr=Object.keys(zt),Lr=0;Lr<Nr.length;Lr+=1){var Qr,ui=Nr[Lr];if(Bt((Qr=zt[ui])===null||Qr===void 0?void 0:Qr.points,cr,vr))return"".concat(Ft,"-placement-").concat(ui)}return""}function Lt(zt,Ft,Tn,vr){return Ft||(Tn?{motionName:"".concat(zt,"-").concat(Tn)}:vr?{motionName:vr}:null)}function Bn(zt){return zt.ownerDocument.defaultView}function en(zt){for(var Ft=[],Tn=zt==null?void 0:zt.parentElement,vr=["hidden","scroll","clip","auto"];Tn;){var cr=Bn(Tn).getComputedStyle(Tn),Nr=cr.overflowX,Lr=cr.overflowY,Qr=cr.overflow;[Nr,Lr,Qr].some(function(ui){return vr.includes(ui)})&&Ft.push(Tn),Tn=Tn.parentElement}return Ft}function gn(zt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(zt)?Ft:zt}function ar(zt){return gn(parseFloat(zt),0)}function Sr(zt,Ft){var Tn=(0,C.Z)({},zt);return(Ft||[]).forEach(function(vr){if(!(vr instanceof HTMLBodyElement||vr instanceof HTMLHtmlElement)){var cr=Bn(vr).getComputedStyle(vr),Nr=cr.overflow,Lr=cr.overflowClipMargin,Qr=cr.borderTopWidth,ui=cr.borderBottomWidth,Ii=cr.borderLeftWidth,Ur=cr.borderRightWidth,Ai=vr.getBoundingClientRect(),Zi=vr.offsetHeight,Ji=vr.clientHeight,no=vr.offsetWidth,Lo=vr.clientWidth,mo=ar(Qr),Po=ar(ui),I=ar(Ii),c=ar(Ur),f=gn(Math.round(Ai.width/no*1e3)/1e3),T=gn(Math.round(Ai.height/Zi*1e3)/1e3),W=(no-Lo-I-c)*f,me=(Zi-Ji-mo-Po)*T,ze=mo*T,tt=Po*T,It=I*f,ne=c*f,ge=0,xe=0;if(Nr==="clip"){var xt=ar(Lr);ge=xt*f,xe=xt*T}var pn=Ai.x+It-ge,Mn=Ai.y+ze-xe,Hn=pn+Ai.width+2*ge-It-ne-W,Qn=Mn+Ai.height+2*xe-ze-tt-me;Tn.left=Math.max(Tn.left,pn),Tn.top=Math.max(Tn.top,Mn),Tn.right=Math.min(Tn.right,Hn),Tn.bottom=Math.min(Tn.bottom,Qn)}}),Tn}function In(zt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Tn="".concat(Ft),vr=Tn.match(/^(.*)\%$/);return vr?zt*(parseFloat(vr[1])/100):parseFloat(Tn)}function Gn(zt,Ft){var Tn=Ft||[],vr=(0,n.Z)(Tn,2),cr=vr[0],Nr=vr[1];return[In(zt.width,cr),In(zt.height,Nr)]}function hn(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[zt[0],zt[1]]}function mn(zt,Ft){var Tn=Ft[0],vr=Ft[1],cr,Nr;return Tn==="t"?Nr=zt.y:Tn==="b"?Nr=zt.y+zt.height:Nr=zt.y+zt.height/2,vr==="l"?cr=zt.x:vr==="r"?cr=zt.x+zt.width:cr=zt.x+zt.width/2,{x:cr,y:Nr}}function cn(zt,Ft){var Tn={t:"b",b:"t",l:"r",r:"l"};return zt.map(function(vr,cr){return cr===Ft?Tn[vr]||"c":vr}).join("")}function Ln(zt,Ft,Tn,vr,cr,Nr,Lr){var Qr=B.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:cr[vr]||{}}),ui=(0,n.Z)(Qr,2),Ii=ui[0],Ur=ui[1],Ai=B.useRef(0),Zi=B.useMemo(function(){return Ft?en(Ft):[]},[Ft]),Ji=B.useRef({}),no=function(){Ji.current={}};zt||no();var Lo=(0,J.Z)(function(){if(Ft&&Tn&&zt){let To=function(Xs,zl){var ll=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nr,Fl=Ir.x+Xs,_d=Ir.y+zl,gd=Fl+xo,jc=_d+Wi,Bd=Math.max(Fl,ll.left),uc=Math.max(_d,ll.top),Ts=Math.min(gd,ll.right),jd=Math.min(jc,ll.bottom);return Math.max(0,(Ts-Bd)*(jd-uc))},is=function(){$l=Ir.y+hs,tu=$l+Wi,zu=Ir.x+Bs,_s=zu+xo};var I,c,f=Ft,T=f.ownerDocument,W=Bn(f),me=W.getComputedStyle(f),ze=me.width,tt=me.height,It=me.position,ne=f.style.left,ge=f.style.top,xe=f.style.right,xt=f.style.bottom,pn=f.style.overflow,Mn=(0,C.Z)((0,C.Z)({},cr[vr]),Nr),Hn=T.createElement("div");(I=f.parentElement)===null||I===void 0||I.appendChild(Hn),Hn.style.left="".concat(f.offsetLeft,"px"),Hn.style.top="".concat(f.offsetTop,"px"),Hn.style.position=It,Hn.style.height="".concat(f.offsetHeight,"px"),Hn.style.width="".concat(f.offsetWidth,"px"),f.style.left="0",f.style.top="0",f.style.right="auto",f.style.bottom="auto",f.style.overflow="hidden";var Qn;if(Array.isArray(Tn))Qn={x:Tn[0],y:Tn[1],width:0,height:0};else{var tr=Tn.getBoundingClientRect();Qn={x:tr.x,y:tr.y,width:tr.width,height:tr.height}}var Ir=f.getBoundingClientRect(),oi=T.documentElement,ni=oi.clientWidth,_i=oi.clientHeight,wi=oi.scrollWidth,Si=oi.scrollHeight,So=oi.scrollTop,io=oi.scrollLeft,Wi=Ir.height,xo=Ir.width,Qi=Qn.height,Ho=Qn.width,La={left:0,top:0,right:ni,bottom:_i},as={left:-io,top:-So,right:wi-io,bottom:Si-So},Ja=Mn.htmlRegion,Rs="visible",Go="visibleFirst";Ja!=="scroll"&&Ja!==Go&&(Ja=Rs);var Ti=Ja===Go,Ei=Sr(as,Zi),fr=Sr(La,Zi),nr=Ja===Rs?fr:Ei,_r=Ti?fr:nr;f.style.left="auto",f.style.top="auto",f.style.right="0",f.style.bottom="0";var ei=f.getBoundingClientRect();f.style.left=ne,f.style.top=ge,f.style.right=xe,f.style.bottom=xt,f.style.overflow=pn,(c=f.parentElement)===null||c===void 0||c.removeChild(Hn);var Xr=gn(Math.round(xo/parseFloat(ze)*1e3)/1e3),fi=gn(Math.round(Wi/parseFloat(tt)*1e3)/1e3);if(Xr===0||fi===0||(0,lt.Sh)(Tn)&&!(0,At.Z)(Tn))return;var Vi=Mn.offset,vo=Mn.targetOffset,Ro=Gn(Ir,Vi),_a=(0,n.Z)(Ro,2),ca=_a[0],ta=_a[1],ds=Gn(Qn,vo),iu=(0,n.Z)(ds,2),Ks=iu[0],Ou=iu[1];Qn.x-=Ks,Qn.y-=Ou;var bl=Mn.points||[],vs=(0,n.Z)(bl,2),Co=vs[0],Pl=vs[1],As=hn(Pl),nl=hn(Co),Ol=mn(Qn,As),Ac=mn(Ir,nl),Su=(0,C.Z)({},Mn),Bs=Ol.x-Ac.x+ca,hs=Ol.y-Ac.y+ta,ou=To(Bs,hs),fl=To(Bs,hs,fr),pl=mn(Qn,["t","l"]),Rl=mn(Ir,["t","l"]),au=mn(Qn,["b","r"]),Xu=mn(Ir,["b","r"]),Ys=Mn.overflow||{},sc=Ys.adjustX,hu=Ys.adjustY,vc=Ys.shiftX,js=Ys.shiftY,lc=function(zl){return typeof zl=="boolean"?zl:zl>=0},$l,tu,zu,_s;is();var Xi=lc(hu),Qo=nl[0]===As[0];if(Xi&&nl[0]==="t"&&(tu>_r.bottom||Ji.current.bt)){var Ua=hs;Qo?Ua-=Wi-Qi:Ua=pl.y-Xu.y-ta;var al=To(Bs,Ua),ml=To(Bs,Ua,fr);al>ou||al===ou&&(!Ti||ml>=fl)?(Ji.current.bt=!0,hs=Ua,ta=-ta,Su.points=[cn(nl,0),cn(As,0)]):Ji.current.bt=!1}if(Xi&&nl[0]==="b"&&($l<_r.top||Ji.current.tb)){var Ls=hs;Qo?Ls+=Wi-Qi:Ls=au.y-Rl.y-ta;var Tu=To(Bs,Ls),Hc=To(Bs,Ls,fr);Tu>ou||Tu===ou&&(!Ti||Hc>=fl)?(Ji.current.tb=!0,hs=Ls,ta=-ta,Su.points=[cn(nl,0),cn(As,0)]):Ji.current.tb=!1}var $s=lc(sc),Iu=nl[1]===As[1];if($s&&nl[1]==="l"&&(_s>_r.right||Ji.current.rl)){var Fu=Bs;Iu?Fu-=xo-Ho:Fu=pl.x-Xu.x-ca;var rd=To(Fu,hs),zc=To(Fu,hs,fr);rd>ou||rd===ou&&(!Ti||zc>=fl)?(Ji.current.rl=!0,Bs=Fu,ca=-ca,Su.points=[cn(nl,1),cn(As,1)]):Ji.current.rl=!1}if($s&&nl[1]==="r"&&(zu<_r.left||Ji.current.lr)){var pd=Bs;Iu?pd+=xo-Ho:pd=au.x-Rl.x-ca;var Bu=To(pd,hs),Ju=To(pd,hs,fr);Bu>ou||Bu===ou&&(!Ti||Ju>=fl)?(Ji.current.lr=!0,Bs=pd,ca=-ca,Su.points=[cn(nl,1),cn(As,1)]):Ji.current.lr=!1}is();var Pc=vc===!0?0:vc;typeof Pc=="number"&&(zu<fr.left&&(Bs-=zu-fr.left-ca,Qn.x+Ho<fr.left+Pc&&(Bs+=Qn.x-fr.left+Ho-Pc)),_s>fr.right&&(Bs-=_s-fr.right-ca,Qn.x>fr.right-Pc&&(Bs+=Qn.x-fr.right+Pc)));var md=js===!0?0:js;typeof md=="number"&&($l<fr.top&&(hs-=$l-fr.top-ta,Qn.y+Qi<fr.top+md&&(hs+=Qn.y-fr.top+Qi-md)),tu>fr.bottom&&(hs-=tu-fr.bottom-ta,Qn.y>fr.bottom-md&&(hs+=Qn.y-fr.bottom+md)));var eh=Ir.x+Bs,fu=eh+xo,ju=Ir.y+hs,Fi=ju+Wi,Fc=Qn.x,Oc=Fc+Ho,nu=Qn.y,ss=nu+Qi,Pi=Math.max(eh,Fc),Ss=Math.min(fu,Oc),Nl=(Pi+Ss)/2,pu=Nl-eh,Bc=Math.max(ju,nu),id=Math.min(Fi,ss),mu=(Bc+id)/2,sl=mu-ju;Lr==null||Lr(Ft,Su);var rs=ei.right-Ir.x-(Bs+Ir.width),Wa=ei.bottom-Ir.y-(hs+Ir.height);Ur({ready:!0,offsetX:Bs/Xr,offsetY:hs/fi,offsetR:rs/Xr,offsetB:Wa/fi,arrowX:pu/Xr,arrowY:sl/fi,scaleX:Xr,scaleY:fi,align:Su})}}),mo=function(){Ai.current+=1;var c=Ai.current;Promise.resolve().then(function(){Ai.current===c&&Lo()})},Po=function(){Ur(function(c){return(0,C.Z)((0,C.Z)({},c),{},{ready:!1})})};return(0,Ct.Z)(Po,[vr]),(0,Ct.Z)(function(){zt||Po()},[zt]),[Ii.ready,Ii.offsetX,Ii.offsetY,Ii.offsetR,Ii.offsetB,Ii.arrowX,Ii.arrowY,Ii.scaleX,Ii.scaleY,Ii.align,mo]}function Er(zt,Ft,Tn,vr,cr){(0,Ct.Z)(function(){if(zt&&Ft&&Tn){let Ai=function(){vr(),cr()};var Nr=Ft,Lr=Tn,Qr=en(Nr),ui=en(Lr),Ii=Bn(Lr),Ur=new Set([Ii].concat((0,de.Z)(Qr),(0,de.Z)(ui)));return Ur.forEach(function(Zi){Zi.addEventListener("scroll",Ai,{passive:!0})}),Ii.addEventListener("resize",Ai,{passive:!0}),vr(),function(){Ur.forEach(function(Zi){Zi.removeEventListener("scroll",Ai),Ii.removeEventListener("resize",Ai)})}}},[zt,Ft,Tn])}var mr=i(4449);function Jr(zt,Ft,Tn,vr,cr,Nr,Lr,Qr){var ui=B.useRef(zt),Ii=B.useRef(!1);ui.current!==zt&&(Ii.current=!0,ui.current=zt),B.useEffect(function(){var Ur=(0,se.Z)(function(){Ii.current=!1});return function(){se.Z.cancel(Ur)}},[zt]),B.useEffect(function(){if(Ft&&vr&&(!cr||Nr)){var Ur=function(){var It=!1,ne=function(xt){var pn=xt.target;It=Lr(pn)},ge=function(xt){var pn=xt.target;!Ii.current&&ui.current&&!It&&!Lr(pn)&&Qr(!1)};return[ne,ge]},Ai=Ur(),Zi=(0,n.Z)(Ai,2),Ji=Zi[0],no=Zi[1],Lo=Ur(),mo=(0,n.Z)(Lo,2),Po=mo[0],I=mo[1],c=Bn(vr);c.addEventListener("mousedown",Ji,!0),c.addEventListener("click",no,!0),c.addEventListener("contextmenu",no,!0);var f=(0,le.A)(Tn);if(f&&(f.addEventListener("mousedown",Po,!0),f.addEventListener("click",I,!0),f.addEventListener("contextmenu",I,!0)),0)var T,W,me,ze;return function(){c.removeEventListener("mousedown",Ji,!0),c.removeEventListener("click",no,!0),c.removeEventListener("contextmenu",no,!0),f&&(f.removeEventListener("mousedown",Po,!0),f.removeEventListener("click",I,!0),f.removeEventListener("contextmenu",I,!0))}}},[Ft,Tn,vr,cr,Nr])}var Ie=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Ot(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ue.Z,Ft=B.forwardRef(function(Tn,vr){var cr=Tn.prefixCls,Nr=cr===void 0?"rc-trigger-popup":cr,Lr=Tn.children,Qr=Tn.action,ui=Qr===void 0?"hover":Qr,Ii=Tn.showAction,Ur=Tn.hideAction,Ai=Tn.popupVisible,Zi=Tn.defaultPopupVisible,Ji=Tn.onPopupVisibleChange,no=Tn.afterPopupVisibleChange,Lo=Tn.mouseEnterDelay,mo=Tn.mouseLeaveDelay,Po=mo===void 0?.1:mo,I=Tn.focusDelay,c=Tn.blurDelay,f=Tn.mask,T=Tn.maskClosable,W=T===void 0?!0:T,me=Tn.getPopupContainer,ze=Tn.forceRender,tt=Tn.autoDestroy,It=Tn.destroyPopupOnHide,ne=Tn.popup,ge=Tn.popupClassName,xe=Tn.popupStyle,xt=Tn.popupPlacement,pn=Tn.builtinPlacements,Mn=pn===void 0?{}:pn,Hn=Tn.popupAlign,Qn=Tn.zIndex,tr=Tn.stretch,Ir=Tn.getPopupClassNameFromAlign,oi=Tn.fresh,ni=Tn.alignPoint,_i=Tn.onPopupClick,wi=Tn.onPopupAlign,Si=Tn.arrow,So=Tn.popupMotion,io=Tn.maskMotion,Wi=Tn.popupTransitionName,xo=Tn.popupAnimation,Qi=Tn.maskTransitionName,Ho=Tn.maskAnimation,La=Tn.className,as=Tn.getTriggerDOMNode,Ja=(0,$.Z)(Tn,Ie),Rs=tt||It||!1,Go=B.useState(!1),Ti=(0,n.Z)(Go,2),Ei=Ti[0],fr=Ti[1];(0,Ct.Z)(function(){fr((0,X.Z)())},[]);var nr=B.useRef({}),_r=B.useContext(gt),ei=B.useMemo(function(){return{registerSubPopup:function(Va,_l){nr.current[Va]=_l,_r==null||_r.registerSubPopup(Va,_l)}}},[_r]),Xr=(0,Je.Z)(),fi=B.useState(null),Vi=(0,n.Z)(fi,2),vo=Vi[0],Ro=Vi[1],_a=(0,J.Z)(function(qo){(0,lt.Sh)(qo)&&vo!==qo&&Ro(qo),_r==null||_r.registerSubPopup(Xr,qo)}),ca=B.useState(null),ta=(0,n.Z)(ca,2),ds=ta[0],iu=ta[1],Ks=B.useRef(null),Ou=(0,J.Z)(function(qo){(0,lt.Sh)(qo)&&ds!==qo&&(iu(qo),Ks.current=qo)}),bl=B.Children.only(Lr),vs=(bl==null?void 0:bl.props)||{},Co={},Pl=(0,J.Z)(function(qo){var Va,_l,Zl=ds;return(Zl==null?void 0:Zl.contains(qo))||((Va=(0,le.A)(Zl))===null||Va===void 0?void 0:Va.host)===qo||qo===Zl||(vo==null?void 0:vo.contains(qo))||((_l=(0,le.A)(vo))===null||_l===void 0?void 0:_l.host)===qo||qo===vo||Object.values(nr.current).some(function(ul){return(ul==null?void 0:ul.contains(qo))||qo===ul})}),As=Lt(Nr,So,xo,Wi),nl=Lt(Nr,io,Ho,Qi),Ol=B.useState(Zi||!1),Ac=(0,n.Z)(Ol,2),Su=Ac[0],Bs=Ac[1],hs=Ai!=null?Ai:Su,ou=(0,J.Z)(function(qo){Ai===void 0&&Bs(qo)});(0,Ct.Z)(function(){Bs(Ai||!1)},[Ai]);var fl=B.useRef(hs);fl.current=hs;var pl=B.useRef([]);pl.current=[];var Rl=(0,J.Z)(function(qo){var Va;ou(qo),((Va=pl.current[pl.current.length-1])!==null&&Va!==void 0?Va:hs)!==qo&&(pl.current.push(qo),Ji==null||Ji(qo))}),au=B.useRef(),Xu=function(){clearTimeout(au.current)},Ys=function(Va){var _l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Xu(),_l===0?Rl(Va):au.current=setTimeout(function(){Rl(Va)},_l*1e3)};B.useEffect(function(){return Xu},[]);var sc=B.useState(!1),hu=(0,n.Z)(sc,2),vc=hu[0],js=hu[1];(0,Ct.Z)(function(qo){(!qo||hs)&&js(!0)},[hs]);var lc=B.useState(null),$l=(0,n.Z)(lc,2),tu=$l[0],zu=$l[1],_s=B.useState([0,0]),Xi=(0,n.Z)(_s,2),Qo=Xi[0],Ua=Xi[1],al=function(Va){Ua([Va.clientX,Va.clientY])},ml=Ln(hs,vo,ni?Qo:ds,xt,Mn,Hn,wi),Ls=(0,n.Z)(ml,11),Tu=Ls[0],Hc=Ls[1],$s=Ls[2],Iu=Ls[3],Fu=Ls[4],rd=Ls[5],zc=Ls[6],pd=Ls[7],Bu=Ls[8],Ju=Ls[9],Pc=Ls[10],md=Me(Ei,ui,Ii,Ur),eh=(0,n.Z)(md,2),fu=eh[0],ju=eh[1],Fi=fu.has("click"),Fc=ju.has("click")||ju.has("contextMenu"),Oc=(0,J.Z)(function(){vc||Pc()}),nu=function(){fl.current&&ni&&Fc&&Ys(!1)};Er(hs,ds,vo,Oc,nu),(0,Ct.Z)(function(){Oc()},[Qo,xt]),(0,Ct.Z)(function(){hs&&!(Mn!=null&&Mn[xt])&&Oc()},[JSON.stringify(Hn)]);var ss=B.useMemo(function(){var qo=Sn(Mn,Nr,Ju,ni);return Y()(qo,Ir==null?void 0:Ir(Ju))},[Ju,Ir,Mn,Nr,ni]);B.useImperativeHandle(vr,function(){return{nativeElement:Ks.current,forceAlign:Oc}});var Pi=B.useState(0),Ss=(0,n.Z)(Pi,2),Nl=Ss[0],pu=Ss[1],Bc=B.useState(0),id=(0,n.Z)(Bc,2),mu=id[0],sl=id[1],rs=function(){if(tr&&ds){var Va=ds.getBoundingClientRect();pu(Va.width),sl(Va.height)}},Wa=function(){rs(),Oc()},To=function(Va){js(!1),Pc(),no==null||no(Va)},is=function(){return new Promise(function(Va){rs(),zu(function(){return Va})})};(0,Ct.Z)(function(){tu&&(Pc(),tu(),zu(null))},[tu]);function Xs(qo,Va,_l,Zl){Co[qo]=function(ul){var Kc;Zl==null||Zl(ul),Ys(Va,_l);for(var Qu=arguments.length,di=new Array(Qu>1?Qu-1:0),Ni=1;Ni<Qu;Ni++)di[Ni-1]=arguments[Ni];(Kc=vs[qo])===null||Kc===void 0||Kc.call.apply(Kc,[vs,ul].concat(di))}}(Fi||Fc)&&(Co.onClick=function(qo){var Va;fl.current&&Fc?Ys(!1):!fl.current&&Fi&&(al(qo),Ys(!0));for(var _l=arguments.length,Zl=new Array(_l>1?_l-1:0),ul=1;ul<_l;ul++)Zl[ul-1]=arguments[ul];(Va=vs.onClick)===null||Va===void 0||Va.call.apply(Va,[vs,qo].concat(Zl))}),Jr(hs,Fc,ds,vo,f,W,Pl,Ys);var zl=fu.has("hover"),ll=ju.has("hover"),Fl,_d;zl&&(Xs("onMouseEnter",!0,Lo,function(qo){al(qo)}),Xs("onPointerEnter",!0,Lo,function(qo){al(qo)}),Fl=function(Va){(hs||vc)&&vo!==null&&vo!==void 0&&vo.contains(Va.target)&&Ys(!0,Lo)},ni&&(Co.onMouseMove=function(qo){var Va;(Va=vs.onMouseMove)===null||Va===void 0||Va.call(vs,qo)})),ll&&(Xs("onMouseLeave",!1,Po),Xs("onPointerLeave",!1,Po),_d=function(){Ys(!1,Po)}),fu.has("focus")&&Xs("onFocus",!0,I),ju.has("focus")&&Xs("onBlur",!1,c),fu.has("contextMenu")&&(Co.onContextMenu=function(qo){var Va;fl.current&&ju.has("contextMenu")?Ys(!1):(al(qo),Ys(!0)),qo.preventDefault();for(var _l=arguments.length,Zl=new Array(_l>1?_l-1:0),ul=1;ul<_l;ul++)Zl[ul-1]=arguments[ul];(Va=vs.onContextMenu)===null||Va===void 0||Va.call.apply(Va,[vs,qo].concat(Zl))}),La&&(Co.className=Y()(vs.className,La));var gd=(0,C.Z)((0,C.Z)({},vs),Co),jc={},Bd=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Bd.forEach(function(qo){Ja[qo]&&(jc[qo]=function(){for(var Va,_l=arguments.length,Zl=new Array(_l),ul=0;ul<_l;ul++)Zl[ul]=arguments[ul];(Va=gd[qo])===null||Va===void 0||Va.call.apply(Va,[gd].concat(Zl)),Ja[qo].apply(Ja,Zl)})});var uc=B.cloneElement(bl,(0,C.Z)((0,C.Z)({},gd),jc)),Ts={x:rd,y:zc},jd=Si?(0,C.Z)({},Si!==!0?Si:{}):null;return B.createElement(B.Fragment,null,B.createElement(he.Z,{disabled:!hs,ref:Ou,onResize:Wa},B.createElement(ut,{getTriggerDOMNode:as},uc)),B.createElement(gt.Provider,{value:ei},B.createElement(lr,{portal:zt,ref:_a,prefixCls:Nr,popup:ne,className:Y()(ge,ss),style:xe,target:ds,onMouseEnter:Fl,onMouseLeave:_d,onPointerEnter:Fl,zIndex:Qn,open:hs,keepDom:vc,fresh:oi,onClick:_i,mask:f,motion:As,maskMotion:nl,onVisibleChanged:To,onPrepare:is,forceRender:ze,autoDestroy:Rs,getPopupContainer:me,align:Ju,arrow:jd,arrowPos:Ts,ready:Tu,offsetX:Hc,offsetY:$s,offsetR:Iu,offsetB:Fu,onAlign:Oc,stretch:tr,targetWidth:Nl/pd,targetHeight:mu/Bu})))});return Ft}var St=Ot(ue.Z),at=i(14583),Xe=at.Z.ESC,Nt=at.Z.TAB;function Nn(zt){var Ft=zt.visible,Tn=zt.triggerRef,vr=zt.onVisibleChange,cr=zt.autoFocus,Nr=zt.overlayRef,Lr=B.useRef(!1),Qr=function(){if(Ft){var Ai,Zi;(Ai=Tn.current)===null||Ai===void 0||(Zi=Ai.focus)===null||Zi===void 0||Zi.call(Ai),vr==null||vr(!1)}},ui=function(){var Ai;return(Ai=Nr.current)!==null&&Ai!==void 0&&Ai.focus?(Nr.current.focus(),Lr.current=!0,!0):!1},Ii=function(Ai){switch(Ai.keyCode){case Xe:Qr();break;case Nt:{var Zi=!1;Lr.current||(Zi=ui()),Zi?Ai.preventDefault():Qr();break}}};B.useEffect(function(){return Ft?(window.addEventListener("keydown",Ii),cr&&(0,se.Z)(ui,3),function(){window.removeEventListener("keydown",Ii),Lr.current=!1}):function(){Lr.current=!1}},[Ft])}var Jn=(0,B.forwardRef)(function(zt,Ft){var Tn=zt.overlay,vr=zt.arrow,cr=zt.prefixCls,Nr=(0,B.useMemo)(function(){var Qr;return typeof Tn=="function"?Qr=Tn():Qr=Tn,Qr},[Tn]),Lr=(0,ae.sQ)(Ft,Nr==null?void 0:Nr.ref);return B.createElement(B.Fragment,null,vr&&B.createElement("div",{className:"".concat(cr,"-arrow")}),B.cloneElement(Nr,{ref:(0,ae.Yr)(Nr)?Lr:void 0}))}),rr=Jn,Br={adjustX:1,adjustY:1},Hr=[0,0],zr={topLeft:{points:["bl","tl"],overflow:Br,offset:[0,-4],targetOffset:Hr},top:{points:["bc","tc"],overflow:Br,offset:[0,-4],targetOffset:Hr},topRight:{points:["br","tr"],overflow:Br,offset:[0,-4],targetOffset:Hr},bottomLeft:{points:["tl","bl"],overflow:Br,offset:[0,4],targetOffset:Hr},bottom:{points:["tc","bc"],overflow:Br,offset:[0,4],targetOffset:Hr},bottomRight:{points:["tr","br"],overflow:Br,offset:[0,4],targetOffset:Hr}},Tr=zr,fn=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function Ne(zt,Ft){var Tn,vr=zt.arrow,cr=vr===void 0?!1:vr,Nr=zt.prefixCls,Lr=Nr===void 0?"rc-dropdown":Nr,Qr=zt.transitionName,ui=zt.animation,Ii=zt.align,Ur=zt.placement,Ai=Ur===void 0?"bottomLeft":Ur,Zi=zt.placements,Ji=Zi===void 0?Tr:Zi,no=zt.getPopupContainer,Lo=zt.showAction,mo=zt.hideAction,Po=zt.overlayClassName,I=zt.overlayStyle,c=zt.visible,f=zt.trigger,T=f===void 0?["hover"]:f,W=zt.autoFocus,me=zt.overlay,ze=zt.children,tt=zt.onVisibleChange,It=(0,$.Z)(zt,fn),ne=B.useState(),ge=(0,n.Z)(ne,2),xe=ge[0],xt=ge[1],pn="visible"in zt?c:xe,Mn=B.useRef(null),Hn=B.useRef(null),Qn=B.useRef(null);B.useImperativeHandle(Ft,function(){return Mn.current});var tr=function(Wi){xt(Wi),tt==null||tt(Wi)};Nn({visible:pn,triggerRef:Qn,onVisibleChange:tr,autoFocus:W,overlayRef:Hn});var Ir=function(Wi){var xo=zt.onOverlayClick;xt(!1),xo&&xo(Wi)},oi=function(){return B.createElement(rr,{ref:Hn,overlay:me,prefixCls:Lr,arrow:cr})},ni=function(){return typeof me=="function"?oi:oi()},_i=function(){var Wi=zt.minOverlayWidthMatchTrigger,xo=zt.alignPoint;return"minOverlayWidthMatchTrigger"in zt?Wi:!xo},wi=function(){var Wi=zt.openClassName;return Wi!==void 0?Wi:"".concat(Lr,"-open")},Si=B.cloneElement(ze,{className:Y()((Tn=ze.props)===null||Tn===void 0?void 0:Tn.className,pn&&wi()),ref:(0,ae.Yr)(ze)?(0,ae.sQ)(Qn,ze.ref):void 0}),So=mo;return!So&&T.indexOf("contextMenu")!==-1&&(So=["click"]),B.createElement(St,(0,E.Z)({builtinPlacements:Ji},It,{prefixCls:Lr,ref:Mn,popupClassName:Y()(Po,(0,M.Z)({},"".concat(Lr,"-show-arrow"),cr)),popupStyle:I,action:T,showAction:Lo,hideAction:So,popupPlacement:Ai,popupAlign:Ii,popupTransitionName:Qr,popupAnimation:ui,popupVisible:pn,stretch:_i()?"minWidth":"",popup:ni(),onPopupVisibleChange:tr,onPopupClick:Ir,getPopupContainer:no}),Si)}var Ge=B.forwardRef(Ne),ot=Ge,Dt=i(50009),jt=i(47996),sn=i(30967),xn=B.createContext(null);function rn(zt,Ft){return zt===void 0?null:"".concat(zt,"-").concat(Ft)}function Fn(zt){var Ft=B.useContext(xn);return rn(Ft,zt)}var Un=i(54596),jn=["children","locked"],_n=B.createContext(null);function Xn(zt,Ft){var Tn=(0,C.Z)({},zt);return Object.keys(Ft).forEach(function(vr){var cr=Ft[vr];cr!==void 0&&(Tn[vr]=cr)}),Tn}function er(zt){var Ft=zt.children,Tn=zt.locked,vr=(0,$.Z)(zt,jn),cr=B.useContext(_n),Nr=(0,Un.Z)(function(){return Xn(cr,vr)},[cr,vr],function(Lr,Qr){return!Tn&&(Lr[0]!==Qr[0]||!(0,jt.Z)(Lr[1],Qr[1],!0))});return B.createElement(_n.Provider,{value:Nr},Ft)}var Yr=[],qr=B.createContext(null);function Gr(){return B.useContext(qr)}var ci=B.createContext(Yr);function Ci(zt){var Ft=B.useContext(ci);return B.useMemo(function(){return zt!==void 0?[].concat((0,de.Z)(Ft),[zt]):Ft},[Ft,zt])}var Ki=B.createContext(null),Bi=B.createContext({}),Di=Bi,yo=i(59422),po=at.Z.LEFT,Vo=at.Z.RIGHT,Xo=at.Z.UP,$o=at.Z.DOWN,Aa=at.Z.ENTER,qa=at.Z.ESC,Oo=at.Z.HOME,Do=at.Z.END,oa=[Xo,$o,po,Vo];function Fa(zt,Ft,Tn,vr){var cr,Nr,Lr,Qr,ui="prev",Ii="next",Ur="children",Ai="parent";if(zt==="inline"&&vr===Aa)return{inlineTrigger:!0};var Zi=(cr={},(0,M.Z)(cr,Xo,ui),(0,M.Z)(cr,$o,Ii),cr),Ji=(Nr={},(0,M.Z)(Nr,po,Tn?Ii:ui),(0,M.Z)(Nr,Vo,Tn?ui:Ii),(0,M.Z)(Nr,$o,Ur),(0,M.Z)(Nr,Aa,Ur),Nr),no=(Lr={},(0,M.Z)(Lr,Xo,ui),(0,M.Z)(Lr,$o,Ii),(0,M.Z)(Lr,Aa,Ur),(0,M.Z)(Lr,qa,Ai),(0,M.Z)(Lr,po,Tn?Ur:Ai),(0,M.Z)(Lr,Vo,Tn?Ai:Ur),Lr),Lo={inline:Zi,horizontal:Ji,vertical:no,inlineSub:Zi,horizontalSub:no,verticalSub:no},mo=(Qr=Lo["".concat(zt).concat(Ft?"":"Sub")])===null||Qr===void 0?void 0:Qr[vr];switch(mo){case ui:return{offset:-1,sibling:!0};case Ii:return{offset:1,sibling:!0};case Ai:return{offset:-1,sibling:!1};case Ur:return{offset:1,sibling:!1};default:return null}}function xs(zt){for(var Ft=zt;Ft;){if(Ft.getAttribute("data-menu-list"))return Ft;Ft=Ft.parentElement}return null}function tl(zt,Ft){for(var Tn=zt||document.activeElement;Tn;){if(Ft.has(Tn))return Tn;Tn=Tn.parentElement}return null}function Na(zt,Ft){var Tn=(0,yo.tS)(zt,!0);return Tn.filter(function(vr){return Ft.has(vr)})}function ro(zt,Ft,Tn){var vr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!zt)return null;var cr=Na(zt,Ft),Nr=cr.length,Lr=cr.findIndex(function(Qr){return Tn===Qr});return vr<0?Lr===-1?Lr=Nr-1:Lr-=1:vr>0&&(Lr+=1),Lr=(Lr+Nr)%Nr,cr[Lr]}var xa=function(Ft,Tn){var vr=new Set,cr=new Map,Nr=new Map;return Ft.forEach(function(Lr){var Qr=document.querySelector("[data-menu-id='".concat(rn(Tn,Lr),"']"));Qr&&(vr.add(Qr),Nr.set(Qr,Lr),cr.set(Lr,Qr))}),{elements:vr,key2element:cr,element2key:Nr}};function Ba(zt,Ft,Tn,vr,cr,Nr,Lr,Qr,ui,Ii){var Ur=B.useRef(),Ai=B.useRef();Ai.current=Ft;var Zi=function(){se.Z.cancel(Ur.current)};return B.useEffect(function(){return function(){Zi()}},[]),function(Ji){var no=Ji.which;if([].concat(oa,[Aa,qa,Oo,Do]).includes(no)){var Lo=Nr(),mo=xa(Lo,vr),Po=mo,I=Po.elements,c=Po.key2element,f=Po.element2key,T=c.get(Ft),W=tl(T,I),me=f.get(W),ze=Fa(zt,Lr(me,!0).length===1,Tn,no);if(!ze&&no!==Oo&&no!==Do)return;(oa.includes(no)||[Oo,Do].includes(no))&&Ji.preventDefault();var tt=function(Hn){if(Hn){var Qn=Hn,tr=Hn.querySelector("a");tr!=null&&tr.getAttribute("href")&&(Qn=tr);var Ir=f.get(Hn);Qr(Ir),Zi(),Ur.current=(0,se.Z)(function(){Ai.current===Ir&&Qn.focus()})}};if([Oo,Do].includes(no)||ze.sibling||!W){var It;!W||zt==="inline"?It=cr.current:It=xs(W);var ne,ge=Na(It,I);no===Oo?ne=ge[0]:no===Do?ne=ge[ge.length-1]:ne=ro(It,I,W,ze.offset),tt(ne)}else if(ze.inlineTrigger)ui(me);else if(ze.offset>0)ui(me,!0),Zi(),Ur.current=(0,se.Z)(function(){mo=xa(Lo,vr);var Mn=W.getAttribute("aria-controls"),Hn=document.getElementById(Mn),Qn=ro(Hn,mo.elements);tt(Qn)},5);else if(ze.offset<0){var xe=Lr(me,!0),xt=xe[xe.length-2],pn=c.get(xt);ui(xt,!1),tt(pn)}}Ii==null||Ii(Ji)}}function ma(zt){Promise.resolve().then(zt)}var ja="__RC_UTIL_PATH_SPLIT__",Sa=function(Ft){return Ft.join(ja)},us=function(Ft){return Ft.split(ja)},ua="rc-menu-more";function ao(){var zt=B.useState({}),Ft=(0,n.Z)(zt,2),Tn=Ft[1],vr=(0,B.useRef)(new Map),cr=(0,B.useRef)(new Map),Nr=B.useState([]),Lr=(0,n.Z)(Nr,2),Qr=Lr[0],ui=Lr[1],Ii=(0,B.useRef)(0),Ur=(0,B.useRef)(!1),Ai=function(){Ur.current||Tn({})},Zi=(0,B.useCallback)(function(c,f){var T=Sa(f);cr.current.set(T,c),vr.current.set(c,T),Ii.current+=1;var W=Ii.current;ma(function(){W===Ii.current&&Ai()})},[]),Ji=(0,B.useCallback)(function(c,f){var T=Sa(f);cr.current.delete(T),vr.current.delete(c)},[]),no=(0,B.useCallback)(function(c){ui(c)},[]),Lo=(0,B.useCallback)(function(c,f){var T=vr.current.get(c)||"",W=us(T);return f&&Qr.includes(W[0])&&W.unshift(ua),W},[Qr]),mo=(0,B.useCallback)(function(c,f){return c.some(function(T){var W=Lo(T,!0);return W.includes(f)})},[Lo]),Po=function(){var f=(0,de.Z)(vr.current.keys());return Qr.length&&f.push(ua),f},I=(0,B.useCallback)(function(c){var f="".concat(vr.current.get(c)).concat(ja),T=new Set;return(0,de.Z)(cr.current.keys()).forEach(function(W){W.startsWith(f)&&T.add(cr.current.get(W))}),T},[]);return B.useEffect(function(){return function(){Ur.current=!0}},[]),{registerPath:Zi,unregisterPath:Ji,refreshOverflowKeys:no,isSubPathKey:mo,getKeyPath:Lo,getKeys:Po,getSubPathKeys:I}}function Ma(zt){var Ft=B.useRef(zt);Ft.current=zt;var Tn=B.useCallback(function(){for(var vr,cr=arguments.length,Nr=new Array(cr),Lr=0;Lr<cr;Lr++)Nr[Lr]=arguments[Lr];return(vr=Ft.current)===null||vr===void 0?void 0:vr.call.apply(vr,[Ft].concat(Nr))},[]);return zt?Tn:void 0}var ko=Math.random().toFixed(5).toString().slice(2),No=0;function Uo(zt){var Ft=(0,te.Z)(zt,{value:zt}),Tn=(0,n.Z)(Ft,2),vr=Tn[0],cr=Tn[1];return B.useEffect(function(){No+=1;var Nr="".concat(ko,"-").concat(No);cr("rc-menu-uuid-".concat(Nr))},[]),vr}var Hs=i(59295),$i=i(45985),es=i(76525),Ll=i(56216),hl=i(18051);function ho(zt,Ft,Tn,vr){var cr=B.useContext(_n),Nr=cr.activeKey,Lr=cr.onActive,Qr=cr.onInactive,ui={active:Nr===zt};return Ft||(ui.onMouseEnter=function(Ii){Tn==null||Tn({key:zt,domEvent:Ii}),Lr(zt)},ui.onMouseLeave=function(Ii){vr==null||vr({key:zt,domEvent:Ii}),Qr(zt)}),ui}function Ul(zt){var Ft=B.useContext(_n),Tn=Ft.mode,vr=Ft.rtl,cr=Ft.inlineIndent;if(Tn!=="inline")return null;var Nr=zt;return vr?{paddingRight:Nr*cr}:{paddingLeft:Nr*cr}}function Ml(zt){var Ft=zt.icon,Tn=zt.props,vr=zt.children,cr;return Ft===null||Ft===!1?null:(typeof Ft=="function"?cr=B.createElement(Ft,(0,C.Z)({},Tn)):typeof Ft!="boolean"&&(cr=Ft),cr||vr||null)}var Ri=["item"];function Wo(zt){var Ft=zt.item,Tn=(0,$.Z)(zt,Ri);return Object.defineProperty(Tn,"item",{get:function(){return(0,mr.ZP)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),Ft}}),Tn}var fo=["title","attribute","elementRef"],ts=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],il=["active"],Jo=function(zt){(0,es.Z)(Tn,zt);var Ft=(0,Ll.Z)(Tn);function Tn(){return(0,Hs.Z)(this,Tn),Ft.apply(this,arguments)}return(0,$i.Z)(Tn,[{key:"render",value:function(){var cr=this.props,Nr=cr.title,Lr=cr.attribute,Qr=cr.elementRef,ui=(0,$.Z)(cr,fo),Ii=(0,hl.Z)(ui,["eventKey","popupClassName","popupOffset","onTitleClick"]);return(0,mr.ZP)(!Lr,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),B.createElement(Dt.Z.Item,(0,E.Z)({},Lr,{title:typeof Nr=="string"?Nr:void 0},Ii,{ref:Qr}))}}]),Tn}(B.Component),Jl=B.forwardRef(function(zt,Ft){var Tn,vr=zt.style,cr=zt.className,Nr=zt.eventKey,Lr=zt.warnKey,Qr=zt.disabled,ui=zt.itemIcon,Ii=zt.children,Ur=zt.role,Ai=zt.onMouseEnter,Zi=zt.onMouseLeave,Ji=zt.onClick,no=zt.onKeyDown,Lo=zt.onFocus,mo=(0,$.Z)(zt,ts),Po=Fn(Nr),I=B.useContext(_n),c=I.prefixCls,f=I.onItemClick,T=I.disabled,W=I.overflowDisabled,me=I.itemIcon,ze=I.selectedKeys,tt=I.onActive,It=B.useContext(Di),ne=It._internalRenderMenuItem,ge="".concat(c,"-item"),xe=B.useRef(),xt=B.useRef(),pn=T||Qr,Mn=(0,ae.x1)(Ft,xt),Hn=Ci(Nr),Qn=function(Ho){return{key:Nr,keyPath:(0,de.Z)(Hn).reverse(),item:xe.current,domEvent:Ho}},tr=ui||me,Ir=ho(Nr,pn,Ai,Zi),oi=Ir.active,ni=(0,$.Z)(Ir,il),_i=ze.includes(Nr),wi=Ul(Hn.length),Si=function(Ho){if(!pn){var La=Qn(Ho);Ji==null||Ji(Wo(La)),f(La)}},So=function(Ho){if(no==null||no(Ho),Ho.which===at.Z.ENTER){var La=Qn(Ho);Ji==null||Ji(Wo(La)),f(La)}},io=function(Ho){tt(Nr),Lo==null||Lo(Ho)},Wi={};zt.role==="option"&&(Wi["aria-selected"]=_i);var xo=B.createElement(Jo,(0,E.Z)({ref:xe,elementRef:Mn,role:Ur===null?"none":Ur||"menuitem",tabIndex:Qr?null:-1,"data-menu-id":W&&Po?null:Po},mo,ni,Wi,{component:"li","aria-disabled":Qr,style:(0,C.Z)((0,C.Z)({},wi),vr),className:Y()(ge,(Tn={},(0,M.Z)(Tn,"".concat(ge,"-active"),oi),(0,M.Z)(Tn,"".concat(ge,"-selected"),_i),(0,M.Z)(Tn,"".concat(ge,"-disabled"),pn),Tn),cr),onClick:Si,onKeyDown:So,onFocus:io}),Ii,B.createElement(Ml,{props:(0,C.Z)((0,C.Z)({},zt),{},{isSelected:_i}),icon:tr}));return ne&&(xo=ne(xo,zt,{selected:_i})),xo});function zs(zt,Ft){var Tn=zt.eventKey,vr=Gr(),cr=Ci(Tn);return B.useEffect(function(){if(vr)return vr.registerPath(Tn,cr),function(){vr.unregisterPath(Tn,cr)}},[cr]),vr?null:B.createElement(Jl,(0,E.Z)({},zt,{ref:Ft}))}var Cs=B.forwardRef(zs),oo=["className","children"],qi=function(Ft,Tn){var vr=Ft.className,cr=Ft.children,Nr=(0,$.Z)(Ft,oo),Lr=B.useContext(_n),Qr=Lr.prefixCls,ui=Lr.mode,Ii=Lr.rtl;return B.createElement("ul",(0,E.Z)({className:Y()(Qr,Ii&&"".concat(Qr,"-rtl"),"".concat(Qr,"-sub"),"".concat(Qr,"-").concat(ui==="inline"?"inline":"vertical"),vr),role:"menu"},Nr,{"data-menu-list":!0,ref:Tn}),cr)},Ta=B.forwardRef(qi);Ta.displayName="SubMenuList";var la=Ta,Os=i(81626);function Vl(zt,Ft){return(0,Os.Z)(zt).map(function(Tn,vr){if(B.isValidElement(Tn)){var cr,Nr,Lr=Tn.key,Qr=(cr=(Nr=Tn.props)===null||Nr===void 0?void 0:Nr.eventKey)!==null&&cr!==void 0?cr:Lr,ui=Qr==null;ui&&(Qr="tmp_key-".concat([].concat((0,de.Z)(Ft),[vr]).join("-")));var Ii={key:Qr,eventKey:Qr};return B.cloneElement(Tn,Ii)}return Tn})}var ns={adjustX:1,adjustY:1},yu={topLeft:{points:["bl","tl"],overflow:ns},topRight:{points:["br","tr"],overflow:ns},bottomLeft:{points:["tl","bl"],overflow:ns},bottomRight:{points:["tr","br"],overflow:ns},leftTop:{points:["tr","tl"],overflow:ns},leftBottom:{points:["br","bl"],overflow:ns},rightTop:{points:["tl","tr"],overflow:ns},rightBottom:{points:["bl","br"],overflow:ns}},Fs={topLeft:{points:["bl","tl"],overflow:ns},topRight:{points:["br","tr"],overflow:ns},bottomLeft:{points:["tl","bl"],overflow:ns},bottomRight:{points:["tr","br"],overflow:ns},rightTop:{points:["tr","tl"],overflow:ns},rightBottom:{points:["br","bl"],overflow:ns},leftTop:{points:["tl","tr"],overflow:ns},leftBottom:{points:["bl","br"],overflow:ns}},bs=null;function cs(zt,Ft,Tn){if(Ft)return Ft;if(Tn)return Tn[zt]||Tn.other}var Gl={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Dl(zt){var Ft=zt.prefixCls,Tn=zt.visible,vr=zt.children,cr=zt.popup,Nr=zt.popupStyle,Lr=zt.popupClassName,Qr=zt.popupOffset,ui=zt.disabled,Ii=zt.mode,Ur=zt.onVisibleChange,Ai=B.useContext(_n),Zi=Ai.getPopupContainer,Ji=Ai.rtl,no=Ai.subMenuOpenDelay,Lo=Ai.subMenuCloseDelay,mo=Ai.builtinPlacements,Po=Ai.triggerSubMenuAction,I=Ai.forceSubMenuRender,c=Ai.rootClassName,f=Ai.motion,T=Ai.defaultMotions,W=B.useState(!1),me=(0,n.Z)(W,2),ze=me[0],tt=me[1],It=Ji?(0,C.Z)((0,C.Z)({},Fs),mo):(0,C.Z)((0,C.Z)({},yu),mo),ne=Gl[Ii],ge=cs(Ii,f,T),xe=B.useRef(ge);Ii!=="inline"&&(xe.current=ge);var xt=(0,C.Z)((0,C.Z)({},xe.current),{},{leavedClassName:"".concat(Ft,"-hidden"),removeOnLeave:!1,motionAppear:!0}),pn=B.useRef();return B.useEffect(function(){return pn.current=(0,se.Z)(function(){tt(Tn)}),function(){se.Z.cancel(pn.current)}},[Tn]),B.createElement(St,{prefixCls:Ft,popupClassName:Y()("".concat(Ft,"-popup"),(0,M.Z)({},"".concat(Ft,"-rtl"),Ji),Lr,c),stretch:Ii==="horizontal"?"minWidth":null,getPopupContainer:Zi,builtinPlacements:It,popupPlacement:ne,popupVisible:ze,popup:cr,popupStyle:Nr,popupAlign:Qr&&{offset:Qr},action:ui?[]:[Po],mouseEnterDelay:no,mouseLeaveDelay:Lo,onPopupVisibleChange:Ur,forceRender:I,popupMotion:xt,fresh:!0},vr)}function fs(zt){var Ft=zt.id,Tn=zt.open,vr=zt.keyPath,cr=zt.children,Nr="inline",Lr=B.useContext(_n),Qr=Lr.prefixCls,ui=Lr.forceSubMenuRender,Ii=Lr.motion,Ur=Lr.defaultMotions,Ai=Lr.mode,Zi=B.useRef(!1);Zi.current=Ai===Nr;var Ji=B.useState(!Zi.current),no=(0,n.Z)(Ji,2),Lo=no[0],mo=no[1],Po=Zi.current?Tn:!1;B.useEffect(function(){Zi.current&&mo(!1)},[Ai]);var I=(0,C.Z)({},cs(Nr,Ii,Ur));vr.length>1&&(I.motionAppear=!1);var c=I.onVisibleChanged;return I.onVisibleChanged=function(f){return!Zi.current&&!f&&mo(!0),c==null?void 0:c(f)},Lo?null:B.createElement(er,{mode:Nr,locked:!Zi.current},B.createElement(we.ZP,(0,E.Z)({visible:Po},I,{forceRender:ui,removeOnLeave:!1,leavedClassName:"".concat(Qr,"-hidden")}),function(f){var T=f.className,W=f.style;return B.createElement(la,{id:Ft,className:T,style:W},cr)}))}var ws=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],ps=["active"],Za=function(Ft){var Tn,vr=Ft.style,cr=Ft.className,Nr=Ft.title,Lr=Ft.eventKey,Qr=Ft.warnKey,ui=Ft.disabled,Ii=Ft.internalPopupClose,Ur=Ft.children,Ai=Ft.itemIcon,Zi=Ft.expandIcon,Ji=Ft.popupClassName,no=Ft.popupOffset,Lo=Ft.popupStyle,mo=Ft.onClick,Po=Ft.onMouseEnter,I=Ft.onMouseLeave,c=Ft.onTitleClick,f=Ft.onTitleMouseEnter,T=Ft.onTitleMouseLeave,W=(0,$.Z)(Ft,ws),me=Fn(Lr),ze=B.useContext(_n),tt=ze.prefixCls,It=ze.mode,ne=ze.openKeys,ge=ze.disabled,xe=ze.overflowDisabled,xt=ze.activeKey,pn=ze.selectedKeys,Mn=ze.itemIcon,Hn=ze.expandIcon,Qn=ze.onItemClick,tr=ze.onOpenChange,Ir=ze.onActive,oi=B.useContext(Di),ni=oi._internalRenderSubMenuItem,_i=B.useContext(Ki),wi=_i.isSubPathKey,Si=Ci(),So="".concat(tt,"-submenu"),io=ge||ui,Wi=B.useRef(),xo=B.useRef(),Qi=Ai!=null?Ai:Mn,Ho=Zi!=null?Zi:Hn,La=ne.includes(Lr),as=!xe&&La,Ja=wi(pn,Lr),Rs=ho(Lr,io,f,T),Go=Rs.active,Ti=(0,$.Z)(Rs,ps),Ei=B.useState(!1),fr=(0,n.Z)(Ei,2),nr=fr[0],_r=fr[1],ei=function(Co){io||_r(Co)},Xr=function(Co){ei(!0),Po==null||Po({key:Lr,domEvent:Co})},fi=function(Co){ei(!1),I==null||I({key:Lr,domEvent:Co})},Vi=B.useMemo(function(){return Go||(It!=="inline"?nr||wi([xt],Lr):!1)},[It,Go,xt,nr,Lr,wi]),vo=Ul(Si.length),Ro=function(Co){io||(c==null||c({key:Lr,domEvent:Co}),It==="inline"&&tr(Lr,!La))},_a=Ma(function(vs){mo==null||mo(Wo(vs)),Qn(vs)}),ca=function(Co){It!=="inline"&&tr(Lr,Co)},ta=function(){Ir(Lr)},ds=me&&"".concat(me,"-popup"),iu=B.createElement("div",(0,E.Z)({role:"menuitem",style:vo,className:"".concat(So,"-title"),tabIndex:io?null:-1,ref:Wi,title:typeof Nr=="string"?Nr:null,"data-menu-id":xe&&me?null:me,"aria-expanded":as,"aria-haspopup":!0,"aria-controls":ds,"aria-disabled":io,onClick:Ro,onFocus:ta},Ti),Nr,B.createElement(Ml,{icon:It!=="horizontal"?Ho:void 0,props:(0,C.Z)((0,C.Z)({},Ft),{},{isOpen:as,isSubMenu:!0})},B.createElement("i",{className:"".concat(So,"-arrow")}))),Ks=B.useRef(It);if(It!=="inline"&&Si.length>1?Ks.current="vertical":Ks.current=It,!xe){var Ou=Ks.current;iu=B.createElement(Dl,{mode:Ou,prefixCls:So,visible:!Ii&&as&&It!=="inline",popupClassName:Ji,popupOffset:no,popupStyle:Lo,popup:B.createElement(er,{mode:Ou==="horizontal"?"vertical":Ou},B.createElement(la,{id:ds,ref:xo},Ur)),disabled:io,onVisibleChange:ca},iu)}var bl=B.createElement(Dt.Z.Item,(0,E.Z)({role:"none"},W,{component:"li",style:vr,className:Y()(So,"".concat(So,"-").concat(It),cr,(Tn={},(0,M.Z)(Tn,"".concat(So,"-open"),as),(0,M.Z)(Tn,"".concat(So,"-active"),Vi),(0,M.Z)(Tn,"".concat(So,"-selected"),Ja),(0,M.Z)(Tn,"".concat(So,"-disabled"),io),Tn)),onMouseEnter:Xr,onMouseLeave:fi}),iu,!xe&&B.createElement(fs,{id:ds,open:as,keyPath:Si},Ur));return ni&&(bl=ni(bl,Ft,{selected:Ja,active:Vi,open:as,disabled:io})),B.createElement(er,{onItemClick:_a,mode:It==="horizontal"?"vertical":It,itemIcon:Qi,expandIcon:Ho},bl)};function ru(zt){var Ft=zt.eventKey,Tn=zt.children,vr=Ci(Ft),cr=Vl(Tn,vr),Nr=Gr();B.useEffect(function(){if(Nr)return Nr.registerPath(Ft,vr),function(){Nr.unregisterPath(Ft,vr)}},[vr]);var Lr;return Nr?Lr=cr:Lr=B.createElement(Za,zt,cr),B.createElement(ci.Provider,{value:vr},Lr)}var Es=["className","title","eventKey","children"],xu=["children"],Yu=function(Ft){var Tn=Ft.className,vr=Ft.title,cr=Ft.eventKey,Nr=Ft.children,Lr=(0,$.Z)(Ft,Es),Qr=B.useContext(_n),ui=Qr.prefixCls,Ii="".concat(ui,"-item-group");return B.createElement("li",(0,E.Z)({role:"presentation"},Lr,{onClick:function(Ai){return Ai.stopPropagation()},className:Y()(Ii,Tn)}),B.createElement("div",{role:"presentation",className:"".concat(Ii,"-title"),title:typeof vr=="string"?vr:void 0},vr),B.createElement("ul",{role:"group",className:"".concat(Ii,"-list")},Nr))};function ol(zt){var Ft=zt.children,Tn=(0,$.Z)(zt,xu),vr=Ci(Tn.eventKey),cr=Vl(Ft,vr),Nr=Gr();return Nr?cr:B.createElement(Yu,(0,hl.Z)(Tn,["warnKey"]),cr)}function Sc(zt){var Ft=zt.className,Tn=zt.style,vr=B.useContext(_n),cr=vr.prefixCls,Nr=Gr();return Nr?null:B.createElement("li",{role:"separator",className:Y()("".concat(cr,"-item-divider"),Ft),style:Tn})}var Pu=["label","children","key","type"];function Lc(zt){return(zt||[]).map(function(Ft,Tn){if(Ft&&(0,j.Z)(Ft)==="object"){var vr=Ft,cr=vr.label,Nr=vr.children,Lr=vr.key,Qr=vr.type,ui=(0,$.Z)(vr,Pu),Ii=Lr!=null?Lr:"tmp-".concat(Tn);return Nr||Qr==="group"?Qr==="group"?B.createElement(ol,(0,E.Z)({key:Ii},ui,{title:cr}),Lc(Nr)):B.createElement(ru,(0,E.Z)({key:Ii},ui,{title:cr}),Lc(Nr)):Qr==="divider"?B.createElement(Sc,(0,E.Z)({key:Ii},ui)):B.createElement(Cs,(0,E.Z)({key:Ii},ui),cr)}return null}).filter(function(Ft){return Ft})}function Ql(zt,Ft,Tn){var vr=zt;return Ft&&(vr=Lc(Ft)),Vl(vr,Tn)}var ms=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],cu=[],Tc=B.forwardRef(function(zt,Ft){var Tn,vr,cr=zt,Nr=cr.prefixCls,Lr=Nr===void 0?"rc-menu":Nr,Qr=cr.rootClassName,ui=cr.style,Ii=cr.className,Ur=cr.tabIndex,Ai=Ur===void 0?0:Ur,Zi=cr.items,Ji=cr.children,no=cr.direction,Lo=cr.id,mo=cr.mode,Po=mo===void 0?"vertical":mo,I=cr.inlineCollapsed,c=cr.disabled,f=cr.disabledOverflow,T=cr.subMenuOpenDelay,W=T===void 0?.1:T,me=cr.subMenuCloseDelay,ze=me===void 0?.1:me,tt=cr.forceSubMenuRender,It=cr.defaultOpenKeys,ne=cr.openKeys,ge=cr.activeKey,xe=cr.defaultActiveFirst,xt=cr.selectable,pn=xt===void 0?!0:xt,Mn=cr.multiple,Hn=Mn===void 0?!1:Mn,Qn=cr.defaultSelectedKeys,tr=cr.selectedKeys,Ir=cr.onSelect,oi=cr.onDeselect,ni=cr.inlineIndent,_i=ni===void 0?24:ni,wi=cr.motion,Si=cr.defaultMotions,So=cr.triggerSubMenuAction,io=So===void 0?"hover":So,Wi=cr.builtinPlacements,xo=cr.itemIcon,Qi=cr.expandIcon,Ho=cr.overflowedIndicator,La=Ho===void 0?"...":Ho,as=cr.overflowedIndicatorPopupClassName,Ja=cr.getPopupContainer,Rs=cr.onClick,Go=cr.onOpenChange,Ti=cr.onKeyDown,Ei=cr.openAnimation,fr=cr.openTransitionName,nr=cr._internalRenderMenuItem,_r=cr._internalRenderSubMenuItem,ei=(0,$.Z)(cr,ms),Xr=B.useMemo(function(){return Ql(Ji,Zi,cu)},[Ji,Zi]),fi=B.useState(!1),Vi=(0,n.Z)(fi,2),vo=Vi[0],Ro=Vi[1],_a=B.useRef(),ca=Uo(Lo),ta=no==="rtl",ds=(0,te.Z)(It,{value:ne,postState:function(Pi){return Pi||cu}}),iu=(0,n.Z)(ds,2),Ks=iu[0],Ou=iu[1],bl=function(Pi){var Ss=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Nl(){Ou(Pi),Go==null||Go(Pi)}Ss?(0,sn.flushSync)(Nl):Nl()},vs=B.useState(Ks),Co=(0,n.Z)(vs,2),Pl=Co[0],As=Co[1],nl=B.useRef(!1),Ol=B.useMemo(function(){return(Po==="inline"||Po==="vertical")&&I?["vertical",I]:[Po,!1]},[Po,I]),Ac=(0,n.Z)(Ol,2),Su=Ac[0],Bs=Ac[1],hs=Su==="inline",ou=B.useState(Su),fl=(0,n.Z)(ou,2),pl=fl[0],Rl=fl[1],au=B.useState(Bs),Xu=(0,n.Z)(au,2),Ys=Xu[0],sc=Xu[1];B.useEffect(function(){Rl(Su),sc(Bs),nl.current&&(hs?Ou(Pl):bl(cu))},[Su,Bs]);var hu=B.useState(0),vc=(0,n.Z)(hu,2),js=vc[0],lc=vc[1],$l=js>=Xr.length-1||pl!=="horizontal"||f;B.useEffect(function(){hs&&As(Ks)},[Ks]),B.useEffect(function(){return nl.current=!0,function(){nl.current=!1}},[]);var tu=ao(),zu=tu.registerPath,_s=tu.unregisterPath,Xi=tu.refreshOverflowKeys,Qo=tu.isSubPathKey,Ua=tu.getKeyPath,al=tu.getKeys,ml=tu.getSubPathKeys,Ls=B.useMemo(function(){return{registerPath:zu,unregisterPath:_s}},[zu,_s]),Tu=B.useMemo(function(){return{isSubPathKey:Qo}},[Qo]);B.useEffect(function(){Xi($l?cu:Xr.slice(js+1).map(function(ss){return ss.key}))},[js,$l]);var Hc=(0,te.Z)(ge||xe&&((Tn=Xr[0])===null||Tn===void 0?void 0:Tn.key),{value:ge}),$s=(0,n.Z)(Hc,2),Iu=$s[0],Fu=$s[1],rd=Ma(function(ss){Fu(ss)}),zc=Ma(function(){Fu(void 0)});(0,B.useImperativeHandle)(Ft,function(){return{list:_a.current,focus:function(Pi){var Ss,Nl=al(),pu=xa(Nl,ca),Bc=pu.elements,id=pu.key2element,mu=pu.element2key,sl=Na(_a.current,Bc),rs=Iu!=null?Iu:sl[0]?mu.get(sl[0]):(Ss=Xr.find(function(is){return!is.props.disabled}))===null||Ss===void 0?void 0:Ss.key,Wa=id.get(rs);if(rs&&Wa){var To;Wa==null||(To=Wa.focus)===null||To===void 0||To.call(Wa,Pi)}}}});var pd=(0,te.Z)(Qn||[],{value:tr,postState:function(Pi){return Array.isArray(Pi)?Pi:Pi==null?cu:[Pi]}}),Bu=(0,n.Z)(pd,2),Ju=Bu[0],Pc=Bu[1],md=function(Pi){if(pn){var Ss=Pi.key,Nl=Ju.includes(Ss),pu;Hn?Nl?pu=Ju.filter(function(id){return id!==Ss}):pu=[].concat((0,de.Z)(Ju),[Ss]):pu=[Ss],Pc(pu);var Bc=(0,C.Z)((0,C.Z)({},Pi),{},{selectedKeys:pu});Nl?oi==null||oi(Bc):Ir==null||Ir(Bc)}!Hn&&Ks.length&&pl!=="inline"&&bl(cu)},eh=Ma(function(ss){Rs==null||Rs(Wo(ss)),md(ss)}),fu=Ma(function(ss,Pi){var Ss=Ks.filter(function(pu){return pu!==ss});if(Pi)Ss.push(ss);else if(pl!=="inline"){var Nl=ml(ss);Ss=Ss.filter(function(pu){return!Nl.has(pu)})}(0,jt.Z)(Ks,Ss,!0)||bl(Ss,!0)}),ju=function(Pi,Ss){var Nl=Ss!=null?Ss:!Ks.includes(Pi);fu(Pi,Nl)},Fi=Ba(pl,Iu,ta,ca,_a,al,Ua,Fu,ju,Ti);B.useEffect(function(){Ro(!0)},[]);var Fc=B.useMemo(function(){return{_internalRenderMenuItem:nr,_internalRenderSubMenuItem:_r}},[nr,_r]),Oc=pl!=="horizontal"||f?Xr:Xr.map(function(ss,Pi){return B.createElement(er,{key:ss.key,overflowDisabled:Pi>js},ss)}),nu=B.createElement(Dt.Z,(0,E.Z)({id:Lo,ref:_a,prefixCls:"".concat(Lr,"-overflow"),component:"ul",itemComponent:Cs,className:Y()(Lr,"".concat(Lr,"-root"),"".concat(Lr,"-").concat(pl),Ii,(vr={},(0,M.Z)(vr,"".concat(Lr,"-inline-collapsed"),Ys),(0,M.Z)(vr,"".concat(Lr,"-rtl"),ta),vr),Qr),dir:no,style:ui,role:"menu",tabIndex:Ai,data:Oc,renderRawItem:function(Pi){return Pi},renderRawRest:function(Pi){var Ss=Pi.length,Nl=Ss?Xr.slice(-Ss):null;return B.createElement(ru,{eventKey:ua,title:La,disabled:$l,internalPopupClose:Ss===0,popupClassName:as},Nl)},maxCount:pl!=="horizontal"||f?Dt.Z.INVALIDATE:Dt.Z.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Pi){lc(Pi)},onKeyDown:Fi},ei));return B.createElement(Di.Provider,{value:Fc},B.createElement(xn.Provider,{value:ca},B.createElement(er,{prefixCls:Lr,rootClassName:Qr,mode:pl,openKeys:Ks,rtl:ta,disabled:c,motion:vo?wi:null,defaultMotions:vo?Si:null,activeKey:Iu,onActive:rd,onInactive:zc,selectedKeys:Ju,inlineIndent:_i,subMenuOpenDelay:W,subMenuCloseDelay:ze,forceSubMenuRender:tt,builtinPlacements:Wi,triggerSubMenuAction:io,getPopupContainer:Ja,itemIcon:xo,expandIcon:Qi,onItemClick:eh,onOpenChange:fu},B.createElement(Ki.Provider,{value:Tu},nu),B.createElement("div",{style:{display:"none"},"aria-hidden":!0},B.createElement(qr.Provider,{value:Ls},Xr)))))}),Ic=Tc,bu=Ic;bu.Item=Cs,bu.SubMenu=ru,bu.ItemGroup=ol,bu.Divider=Sc;var Dc=bu,kc=B.forwardRef(function(zt,Ft){var Tn=zt.prefixCls,vr=zt.id,cr=zt.tabs,Nr=zt.locale,Lr=zt.mobile,Qr=zt.moreIcon,ui=Qr===void 0?"More":Qr,Ii=zt.moreTransitionName,Ur=zt.style,Ai=zt.className,Zi=zt.editable,Ji=zt.tabBarGutter,no=zt.rtl,Lo=zt.removeAriaLabel,mo=zt.onTabClick,Po=zt.getPopupContainer,I=zt.popupClassName,c=(0,B.useState)(!1),f=(0,n.Z)(c,2),T=f[0],W=f[1],me=(0,B.useState)(null),ze=(0,n.Z)(me,2),tt=ze[0],It=ze[1],ne="".concat(vr,"-more-popup"),ge="".concat(Tn,"-dropdown"),xe=tt!==null?"".concat(ne,"-").concat(tt):null,xt=Nr==null?void 0:Nr.dropdownAriaLabel;function pn(ni,_i){ni.preventDefault(),ni.stopPropagation(),Zi.onEdit("remove",{key:_i,event:ni})}var Mn=B.createElement(Dc,{onClick:function(_i){var wi=_i.key,Si=_i.domEvent;mo(wi,Si),W(!1)},prefixCls:"".concat(ge,"-menu"),id:ne,tabIndex:-1,role:"listbox","aria-activedescendant":xe,selectedKeys:[tt],"aria-label":xt!==void 0?xt:"expanded dropdown"},cr.map(function(ni){var _i=ni.closable,wi=ni.disabled,Si=ni.closeIcon,So=ni.key,io=ni.label,Wi=st(_i,Si,Zi,wi);return B.createElement(Cs,{key:So,id:"".concat(ne,"-").concat(So),role:"option","aria-controls":vr&&"".concat(vr,"-panel-").concat(So),disabled:wi},B.createElement("span",null,io),Wi&&B.createElement("button",{type:"button","aria-label":Lo||"remove",tabIndex:0,className:"".concat(ge,"-menu-item-remove"),onClick:function(Qi){Qi.stopPropagation(),pn(Qi,So)}},Si||Zi.removeIcon||"\xD7"))}));function Hn(ni){for(var _i=cr.filter(function(Wi){return!Wi.disabled}),wi=_i.findIndex(function(Wi){return Wi.key===tt})||0,Si=_i.length,So=0;So<Si;So+=1){wi=(wi+ni+Si)%Si;var io=_i[wi];if(!io.disabled){It(io.key);return}}}function Qn(ni){var _i=ni.which;if(!T){[at.Z.DOWN,at.Z.SPACE,at.Z.ENTER].includes(_i)&&(W(!0),ni.preventDefault());return}switch(_i){case at.Z.UP:Hn(-1),ni.preventDefault();break;case at.Z.DOWN:Hn(1),ni.preventDefault();break;case at.Z.ESC:W(!1);break;case at.Z.SPACE:case at.Z.ENTER:tt!==null&&mo(tt,ni);break}}(0,B.useEffect)(function(){var ni=document.getElementById(xe);ni&&ni.scrollIntoView&&ni.scrollIntoView(!1)},[tt]),(0,B.useEffect)(function(){T||It(null)},[T]);var tr=(0,M.Z)({},no?"marginRight":"marginLeft",Ji);cr.length||(tr.visibility="hidden",tr.order=1);var Ir=Y()((0,M.Z)({},"".concat(ge,"-rtl"),no)),oi=Lr?null:B.createElement(ot,{prefixCls:ge,overlay:Mn,trigger:["hover"],visible:cr.length?T:!1,transitionName:Ii,onVisibleChange:W,overlayClassName:Y()(Ir,I),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:Po},B.createElement("button",{type:"button",className:"".concat(Tn,"-nav-more"),style:tr,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":ne,id:"".concat(vr,"-more"),"aria-expanded":T,onKeyDown:Qn},ui));return B.createElement("div",{className:Y()("".concat(Tn,"-nav-operations"),Ai),style:Ur,ref:Ft},oi,B.createElement(mt,{prefixCls:Tn,locale:Nr,editable:Zi}))}),du=B.memo(kc,function(zt,Ft){return Ft.tabMoving}),ql=function(Ft){var Tn,vr=Ft.prefixCls,cr=Ft.id,Nr=Ft.active,Lr=Ft.tab,Qr=Lr.key,ui=Lr.label,Ii=Lr.disabled,Ur=Lr.closeIcon,Ai=Lr.icon,Zi=Ft.closable,Ji=Ft.renderWrapper,no=Ft.removeAriaLabel,Lo=Ft.editable,mo=Ft.onClick,Po=Ft.onFocus,I=Ft.style,c="".concat(vr,"-tab"),f=st(Zi,Ur,Lo,Ii);function T(tt){Ii||mo(tt)}function W(tt){tt.preventDefault(),tt.stopPropagation(),Lo.onEdit("remove",{key:Qr,event:tt})}var me=B.useMemo(function(){return Ai&&typeof ui=="string"?B.createElement("span",null,ui):ui},[ui,Ai]),ze=B.createElement("div",{key:Qr,"data-node-key":Tt(Qr),className:Y()(c,(Tn={},(0,M.Z)(Tn,"".concat(c,"-with-remove"),f),(0,M.Z)(Tn,"".concat(c,"-active"),Nr),(0,M.Z)(Tn,"".concat(c,"-disabled"),Ii),Tn)),style:I,onClick:T},B.createElement("div",{role:"tab","aria-selected":Nr,id:cr&&"".concat(cr,"-tab-").concat(Qr),className:"".concat(c,"-btn"),"aria-controls":cr&&"".concat(cr,"-panel-").concat(Qr),"aria-disabled":Ii,tabIndex:Ii?null:0,onClick:function(It){It.stopPropagation(),T(It)},onKeyDown:function(It){[at.Z.SPACE,at.Z.ENTER].includes(It.which)&&(It.preventDefault(),T(It))},onFocus:Po},Ai&&B.createElement("span",{className:"".concat(c,"-icon")},Ai),ui&&me),f&&B.createElement("button",{type:"button","aria-label":no||"remove",tabIndex:0,className:"".concat(c,"-remove"),onClick:function(It){It.stopPropagation(),W(It)}},Ur||Lo.removeIcon||"\xD7"));return Ji?Ji(ze):ze},wu=ql,Qs=function(Ft,Tn){var vr=Ft.offsetWidth,cr=Ft.offsetHeight,Nr=Ft.offsetTop,Lr=Ft.offsetLeft,Qr=Ft.getBoundingClientRect(),ui=Qr.width,Ii=Qr.height,Ur=Qr.x,Ai=Qr.y;return Math.abs(ui-vr)<1?[ui,Ii,Ur-Tn.x,Ai-Tn.y]:[vr,cr,Lr,Nr]},Cl=function(Ft){var Tn=Ft.current||{},vr=Tn.offsetWidth,cr=vr===void 0?0:vr,Nr=Tn.offsetHeight,Lr=Nr===void 0?0:Nr;if(Ft.current){var Qr=Ft.current.getBoundingClientRect(),ui=Qr.width,Ii=Qr.height;if(Math.abs(ui-cr)<1)return[ui,Ii]}return[cr,Lr]},Al=function(Ft,Tn){return Ft[Tn?0:1]},eu=B.forwardRef(function(zt,Ft){var Tn,vr=zt.className,cr=zt.style,Nr=zt.id,Lr=zt.animated,Qr=zt.activeKey,ui=zt.rtl,Ii=zt.extra,Ur=zt.editable,Ai=zt.locale,Zi=zt.tabPosition,Ji=zt.tabBarGutter,no=zt.children,Lo=zt.onTabClick,mo=zt.onTabScroll,Po=zt.indicatorSize,I=zt.indicatorAlign,c=B.useContext(K),f=c.prefixCls,T=c.tabs,W=(0,B.useRef)(null),me=(0,B.useRef)(null),ze=(0,B.useRef)(null),tt=(0,B.useRef)(null),It=(0,B.useRef)(null),ne=(0,B.useRef)(null),ge=(0,B.useRef)(null),xe=Zi==="top"||Zi==="bottom",xt=Se(0,function(_s,Xi){xe&&mo&&mo({direction:_s>Xi?"left":"right"})}),pn=(0,n.Z)(xt,2),Mn=pn[0],Hn=pn[1],Qn=Se(0,function(_s,Xi){!xe&&mo&&mo({direction:_s>Xi?"top":"bottom"})}),tr=(0,n.Z)(Qn,2),Ir=tr[0],oi=tr[1],ni=(0,B.useState)([0,0]),_i=(0,n.Z)(ni,2),wi=_i[0],Si=_i[1],So=(0,B.useState)([0,0]),io=(0,n.Z)(So,2),Wi=io[0],xo=io[1],Qi=(0,B.useState)([0,0]),Ho=(0,n.Z)(Qi,2),La=Ho[0],as=Ho[1],Ja=(0,B.useState)([0,0]),Rs=(0,n.Z)(Ja,2),Go=Rs[0],Ti=Rs[1],Ei=Et(new Map),fr=(0,n.Z)(Ei,2),nr=fr[0],_r=fr[1],ei=ye(T,nr,Wi[0]),Xr=Al(wi,xe),fi=Al(Wi,xe),Vi=Al(La,xe),vo=Al(Go,xe),Ro=Xr<fi+Vi,_a=Ro?Xr-vo:Xr-Vi,ca="".concat(f,"-nav-operations-hidden"),ta=0,ds=0;xe&&ui?(ta=0,ds=Math.max(0,fi-_a)):(ta=Math.min(0,_a-fi),ds=0);function iu(_s){return _s<ta?ta:_s>ds?ds:_s}var Ks=(0,B.useRef)(null),Ou=(0,B.useState)(),bl=(0,n.Z)(Ou,2),vs=bl[0],Co=bl[1];function Pl(){Co(Date.now())}function As(){Ks.current&&clearTimeout(Ks.current)}nt(tt,function(_s,Xi){function Qo(Ua,al){Ua(function(ml){var Ls=iu(ml+al);return Ls})}return Ro?(xe?Qo(Hn,_s):Qo(oi,Xi),As(),Pl(),!0):!1}),(0,B.useEffect)(function(){return As(),vs&&(Ks.current=setTimeout(function(){Co(0)},100)),As},[vs]);var nl=_t(ei,_a,xe?Mn:Ir,fi,Vi,vo,(0,C.Z)((0,C.Z)({},zt),{},{tabs:T})),Ol=(0,n.Z)(nl,2),Ac=Ol[0],Su=Ol[1],Bs=(0,J.Z)(function(){var _s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qr,Xi=ei.get(_s)||{width:0,height:0,left:0,right:0,top:0};if(xe){var Qo=Mn;ui?Xi.right<Mn?Qo=Xi.right:Xi.right+Xi.width>Mn+_a&&(Qo=Xi.right+Xi.width-_a):Xi.left<-Mn?Qo=-Xi.left:Xi.left+Xi.width>-Mn+_a&&(Qo=-(Xi.left+Xi.width-_a)),oi(0),Hn(iu(Qo))}else{var Ua=Ir;Xi.top<-Ir?Ua=-Xi.top:Xi.top+Xi.height>-Ir+_a&&(Ua=-(Xi.top+Xi.height-_a)),Hn(0),oi(iu(Ua))}}),hs={};Zi==="top"||Zi==="bottom"?hs[ui?"marginRight":"marginLeft"]=Ji:hs.marginTop=Ji;var ou=T.map(function(_s,Xi){var Qo=_s.key;return B.createElement(wu,{id:Nr,prefixCls:f,key:Qo,tab:_s,style:Xi===0?void 0:hs,closable:_s.closable,editable:Ur,active:Qo===Qr,renderWrapper:no,removeAriaLabel:Ai==null?void 0:Ai.removeAriaLabel,onClick:function(al){Lo(Qo,al)},onFocus:function(){Bs(Qo),Pl(),tt.current&&(ui||(tt.current.scrollLeft=0),tt.current.scrollTop=0)}})}),fl=function(){return _r(function(){var Xi,Qo=new Map,Ua=(Xi=It.current)===null||Xi===void 0?void 0:Xi.getBoundingClientRect();return T.forEach(function(al){var ml,Ls=al.key,Tu=(ml=It.current)===null||ml===void 0?void 0:ml.querySelector('[data-node-key="'.concat(Tt(Ls),'"]'));if(Tu){var Hc=Qs(Tu,Ua),$s=(0,n.Z)(Hc,4),Iu=$s[0],Fu=$s[1],rd=$s[2],zc=$s[3];Qo.set(Ls,{width:Iu,height:Fu,left:rd,top:zc})}}),Qo})};(0,B.useEffect)(function(){fl()},[T.map(function(_s){return _s.key}).join("_")]);var pl=ft(function(){var _s=Cl(W),Xi=Cl(me),Qo=Cl(ze);Si([_s[0]-Xi[0]-Qo[0],_s[1]-Xi[1]-Qo[1]]);var Ua=Cl(ge);as(Ua);var al=Cl(ne);Ti(al);var ml=Cl(It);xo([ml[0]-Ua[0],ml[1]-Ua[1]]),fl()}),Rl=T.slice(0,Ac),au=T.slice(Su+1),Xu=[].concat((0,de.Z)(Rl),(0,de.Z)(au)),Ys=ei.get(Qr),sc=Le({activeTabOffset:Ys,horizontal:xe,rtl:ui,indicatorSize:Po,indicatorAlign:I}),hu=sc.style;(0,B.useEffect)(function(){Bs()},[Qr,ta,ds,He(Ys),He(ei),xe]),(0,B.useEffect)(function(){pl()},[ui]);var vc=!!Xu.length,js="".concat(f,"-nav-wrap"),lc,$l,tu,zu;return xe?ui?($l=Mn>0,lc=Mn!==ds):(lc=Mn<0,$l=Mn!==ta):(tu=Ir<0,zu=Ir!==ta),B.createElement(he.Z,{onResize:pl},B.createElement("div",{ref:(0,ae.x1)(Ft,W),role:"tablist",className:Y()("".concat(f,"-nav"),vr),style:cr,onKeyDown:function(){Pl()}},B.createElement(vt,{ref:me,position:"left",extra:Ii,prefixCls:f}),B.createElement(he.Z,{onResize:pl},B.createElement("div",{className:Y()(js,(Tn={},(0,M.Z)(Tn,"".concat(js,"-ping-left"),lc),(0,M.Z)(Tn,"".concat(js,"-ping-right"),$l),(0,M.Z)(Tn,"".concat(js,"-ping-top"),tu),(0,M.Z)(Tn,"".concat(js,"-ping-bottom"),zu),Tn)),ref:tt},B.createElement(he.Z,{onResize:pl},B.createElement("div",{ref:It,className:"".concat(f,"-nav-list"),style:{transform:"translate(".concat(Mn,"px, ").concat(Ir,"px)"),transition:vs?"none":void 0}},ou,B.createElement(mt,{ref:ge,prefixCls:f,locale:Ai,editable:Ur,style:(0,C.Z)((0,C.Z)({},ou.length===0?void 0:hs),{},{visibility:vc?"hidden":null})}),B.createElement("div",{className:Y()("".concat(f,"-ink-bar"),(0,M.Z)({},"".concat(f,"-ink-bar-animated"),Lr.inkBar)),style:hu}))))),B.createElement(du,(0,E.Z)({},zt,{removeAriaLabel:Ai==null?void 0:Ai.removeAriaLabel,ref:ne,prefixCls:f,tabs:Xu,className:!vc&&ca,tabMoving:!!vs})),B.createElement(vt,{ref:ze,position:"right",extra:Ii,prefixCls:f})))}),Eu=eu,Nc=B.forwardRef(function(zt,Ft){var Tn=zt.prefixCls,vr=zt.className,cr=zt.style,Nr=zt.id,Lr=zt.active,Qr=zt.tabKey,ui=zt.children;return B.createElement("div",{id:Nr&&"".concat(Nr,"-panel-").concat(Qr),role:"tabpanel",tabIndex:Lr?0:-1,"aria-labelledby":Nr&&"".concat(Nr,"-tab-").concat(Qr),"aria-hidden":!Lr,style:cr,className:Y()(Tn,Lr&&"".concat(Tn,"-active"),vr),ref:Ft},ui)}),Mc=Nc,fd=["renderTabBar"],Ad=["label","key"],jo=function(Ft){var Tn=Ft.renderTabBar,vr=(0,$.Z)(Ft,fd),cr=B.useContext(K),Nr=cr.tabs;if(Tn){var Lr=(0,C.Z)((0,C.Z)({},vr),{},{panes:Nr.map(function(Qr){var ui=Qr.label,Ii=Qr.key,Ur=(0,$.Z)(Qr,Ad);return B.createElement(Mc,(0,E.Z)({tab:ui,key:Ii,tabKey:Ii},Ur))})});return Tn(Lr,Eu)}return B.createElement(Eu,vr)},aa=jo,go=["key","forceRender","style","className","destroyInactiveTabPane"],Ui=function(Ft){var Tn=Ft.id,vr=Ft.activeKey,cr=Ft.animated,Nr=Ft.tabPosition,Lr=Ft.destroyInactiveTabPane,Qr=B.useContext(K),ui=Qr.prefixCls,Ii=Qr.tabs,Ur=cr.tabPane,Ai="".concat(ui,"-tabpane");return B.createElement("div",{className:Y()("".concat(ui,"-content-holder"))},B.createElement("div",{className:Y()("".concat(ui,"-content"),"".concat(ui,"-content-").concat(Nr),(0,M.Z)({},"".concat(ui,"-content-animated"),Ur))},Ii.map(function(Zi){var Ji=Zi.key,no=Zi.forceRender,Lo=Zi.style,mo=Zi.className,Po=Zi.destroyInactiveTabPane,I=(0,$.Z)(Zi,go),c=Ji===vr;return B.createElement(we.ZP,(0,E.Z)({key:Ji,visible:c,forceRender:no,removeOnLeave:!!(Lr||Po),leavedClassName:"".concat(Ai,"-hidden")},cr.tabPaneMotion),function(f,T){var W=f.style,me=f.className;return B.createElement(Mc,(0,E.Z)({},I,{prefixCls:Ai,id:Tn,tabKey:Ji,animated:Ur,active:c,style:(0,C.Z)((0,C.Z)({},Lo),W),className:Y()(mo,me),ref:T}))})})))},qs=Ui;function Io(){var zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},Ft;return zt===!1?Ft={inkBar:!1,tabPane:!1}:zt===!0?Ft={inkBar:!0,tabPane:!1}:Ft=(0,C.Z)({inkBar:!0},(0,j.Z)(zt)==="object"?zt:{}),Ft.tabPaneMotion&&Ft.tabPane===void 0&&(Ft.tabPane=!0),!Ft.tabPaneMotion&&Ft.tabPane&&(Ft.tabPane=!1),Ft}var Nu=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicatorSize","indicatorAlign"],Cc=0,Mo=B.forwardRef(function(zt,Ft){var Tn,vr=zt.id,cr=zt.prefixCls,Nr=cr===void 0?"rc-tabs":cr,Lr=zt.className,Qr=zt.items,ui=zt.direction,Ii=zt.activeKey,Ur=zt.defaultActiveKey,Ai=zt.editable,Zi=zt.animated,Ji=zt.tabPosition,no=Ji===void 0?"top":Ji,Lo=zt.tabBarGutter,mo=zt.tabBarStyle,Po=zt.tabBarExtraContent,I=zt.locale,c=zt.moreIcon,f=zt.moreTransitionName,T=zt.destroyInactiveTabPane,W=zt.renderTabBar,me=zt.onChange,ze=zt.onTabClick,tt=zt.onTabScroll,It=zt.getPopupContainer,ne=zt.popupClassName,ge=zt.indicatorSize,xe=zt.indicatorAlign,xt=xe===void 0?"center":xe,pn=(0,$.Z)(zt,Nu),Mn=B.useMemo(function(){return(Qr||[]).filter(function(Ei){return Ei&&(0,j.Z)(Ei)==="object"&&"key"in Ei})},[Qr]),Hn=ui==="rtl",Qn=Io(Zi),tr=(0,B.useState)(!1),Ir=(0,n.Z)(tr,2),oi=Ir[0],ni=Ir[1];(0,B.useEffect)(function(){ni((0,X.Z)())},[]);var _i=(0,te.Z)(function(){var Ei;return(Ei=Mn[0])===null||Ei===void 0?void 0:Ei.key},{value:Ii,defaultValue:Ur}),wi=(0,n.Z)(_i,2),Si=wi[0],So=wi[1],io=(0,B.useState)(function(){return Mn.findIndex(function(Ei){return Ei.key===Si})}),Wi=(0,n.Z)(io,2),xo=Wi[0],Qi=Wi[1];(0,B.useEffect)(function(){var Ei=Mn.findIndex(function(nr){return nr.key===Si});if(Ei===-1){var fr;Ei=Math.max(0,Math.min(xo,Mn.length-1)),So((fr=Mn[Ei])===null||fr===void 0?void 0:fr.key)}Qi(Ei)},[Mn.map(function(Ei){return Ei.key}).join("_"),Si,xo]);var Ho=(0,te.Z)(null,{value:vr}),La=(0,n.Z)(Ho,2),as=La[0],Ja=La[1];(0,B.useEffect)(function(){vr||(Ja("rc-tabs-".concat(Cc)),Cc+=1)},[]);function Rs(Ei,fr){ze==null||ze(Ei,fr);var nr=Ei!==Si;So(Ei),nr&&(me==null||me(Ei))}var Go={id:as,activeKey:Si,animated:Qn,tabPosition:no,rtl:Hn,mobile:oi},Ti=(0,C.Z)((0,C.Z)({},Go),{},{editable:Ai,locale:I,moreIcon:c,moreTransitionName:f,tabBarGutter:Lo,onTabClick:Rs,onTabScroll:tt,extra:Po,style:mo,panes:null,getPopupContainer:It,popupClassName:ne,indicatorSize:ge,indicatorAlign:xt});return B.createElement(K.Provider,{value:{tabs:Mn,prefixCls:Nr}},B.createElement("div",(0,E.Z)({ref:Ft,id:vr,className:Y()(Nr,"".concat(Nr,"-").concat(no),(Tn={},(0,M.Z)(Tn,"".concat(Nr,"-mobile"),oi),(0,M.Z)(Tn,"".concat(Nr,"-editable"),Ai),(0,M.Z)(Tn,"".concat(Nr,"-rtl"),Hn),Tn),Lr)},pn),B.createElement(aa,(0,E.Z)({},Ti,{renderTabBar:W})),B.createElement(qs,(0,E.Z)({destroyInactiveTabPane:T},Go,{animated:Qn}))))}),Zc=Mo,gc=Zc;function Pd(){return Pd=Object.assign?Object.assign.bind():function(zt){for(var Ft=1;Ft<arguments.length;Ft++){var Tn=arguments[Ft];for(var vr in Tn)Object.prototype.hasOwnProperty.call(Tn,vr)&&(zt[vr]=Tn[vr])}return zt},Pd.apply(this,arguments)}var Wc=function(Ft){return B.createElement(gc,Pd({prefixCls:"dumi-default-tabs",moreIcon:"\xB7\xB7\xB7"},Ft))},kl=Wc},3341:function(H){"use strict";H.exports=function Q(i,E){if(i===E)return!0;if(i&&E&&typeof i=="object"&&typeof E=="object"){if(i.constructor!==E.constructor)return!1;var M,C,n;if(Array.isArray(i)){if(M=i.length,M!=E.length)return!1;for(C=M;C--!==0;)if(!Q(i[C],E[C]))return!1;return!0}if(i.constructor===RegExp)return i.source===E.source&&i.flags===E.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===E.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===E.toString();if(n=Object.keys(i),M=n.length,M!==Object.keys(E).length)return!1;for(C=M;C--!==0;)if(!Object.prototype.hasOwnProperty.call(E,n[C]))return!1;for(C=M;C--!==0;){var j=n[C];if(!Q(i[j],E[j]))return!1}return!0}return i!==i&&E!==E}},18280:function(H,Q,i){"use strict";i.d(Q,{Ep:function(){return J},PP:function(){return X},aU:function(){return M},cP:function(){return ae},lX:function(){return Y},q_:function(){return te}});var E=i(56920),M;(function(se){se.Pop="POP",se.Push="PUSH",se.Replace="REPLACE"})(M||(M={}));var C=function(se){return se};function n(se,Ee){if(!se){typeof console!="undefined"&&console.warn(Ee);try{throw new Error(Ee)}catch(Le){}}}var j="beforeunload",$="hashchange",U="popstate";function Y(se){se===void 0&&(se={});var Ee=se,Le=Ee.window,ke=Le===void 0?document.defaultView:Le,ye=ke.history;function Se(){var vt=ke.location,ue=vt.pathname,lt=vt.search,le=vt.hash,Je=ye.state||{};return[Je.idx,C({pathname:ue,search:lt,hash:le,state:Je.usr||null,key:Je.key||"default"})]}var be=null;function Ue(){if(be)Et.call(be),be=null;else{var vt=M.Pop,ue=Se(),lt=ue[0],le=ue[1];if(Et.length){if(lt!=null){var Je=nt-lt;Je&&(be={action:vt,location:le,retry:function(){mt(Je*-1)}},mt(Je))}}else Tt(vt)}}ke.addEventListener(U,Ue);var qe=M.Pop,je=Se(),nt=je[0],Ct=je[1],ft=de(),Et=de();nt==null&&(nt=0,ye.replaceState((0,E.Z)({},ye.state,{idx:nt}),""));function yt(vt){return typeof vt=="string"?vt:J(vt)}function _t(vt,ue){return ue===void 0&&(ue=null),C((0,E.Z)({pathname:Ct.pathname,hash:"",search:""},typeof vt=="string"?ae(vt):vt,{state:ue,key:he()}))}function He(vt,ue){return[{usr:vt.state,key:vt.key,idx:ue},yt(vt)]}function bt(vt,ue,lt){return!Et.length||(Et.call({action:vt,location:ue,retry:lt}),!1)}function Tt(vt){qe=vt;var ue=Se();nt=ue[0],Ct=ue[1],ft.call({action:qe,location:Ct})}function st(vt,ue){var lt=M.Push,le=_t(vt,ue);function Je(){st(vt,ue)}if(bt(lt,le,Je)){var we=He(le,nt+1),Pn=we[0],Mt=we[1];try{ye.pushState(Pn,"",Mt)}catch(or){ke.location.assign(Mt)}Tt(lt)}}function Qe(vt,ue){var lt=M.Replace,le=_t(vt,ue);function Je(){Qe(vt,ue)}if(bt(lt,le,Je)){var we=He(le,nt),Pn=we[0],Mt=we[1];ye.replaceState(Pn,"",Mt),Tt(lt)}}function mt(vt){ye.go(vt)}var Ht={get action(){return qe},get location(){return Ct},createHref:yt,push:st,replace:Qe,go:mt,back:function(){mt(-1)},forward:function(){mt(1)},listen:function(ue){return ft.push(ue)},block:function(ue){var lt=Et.push(ue);return Et.length===1&&ke.addEventListener(j,K),function(){lt(),Et.length||ke.removeEventListener(j,K)}}};return Ht}function te(se){se===void 0&&(se={});var Ee=se,Le=Ee.window,ke=Le===void 0?document.defaultView:Le,ye=ke.history;function Se(){var ue=ae(ke.location.hash.substr(1)),lt=ue.pathname,le=lt===void 0?"/":lt,Je=ue.search,we=Je===void 0?"":Je,Pn=ue.hash,Mt=Pn===void 0?"":Pn,or=ye.state||{};return[or.idx,C({pathname:le,search:we,hash:Mt,state:or.usr||null,key:or.key||"default"})]}var be=null;function Ue(){if(be)Et.call(be),be=null;else{var ue=M.Pop,lt=Se(),le=lt[0],Je=lt[1];if(Et.length){if(le!=null){var we=nt-le;we&&(be={action:ue,location:Je,retry:function(){Ht(we*-1)}},Ht(we))}}else st(ue)}}ke.addEventListener(U,Ue),ke.addEventListener($,function(){var ue=Se(),lt=ue[1];J(lt)!==J(Ct)&&Ue()});var qe=M.Pop,je=Se(),nt=je[0],Ct=je[1],ft=de(),Et=de();nt==null&&(nt=0,ye.replaceState((0,E.Z)({},ye.state,{idx:nt}),""));function yt(){var ue=document.querySelector("base"),lt="";if(ue&&ue.getAttribute("href")){var le=ke.location.href,Je=le.indexOf("#");lt=Je===-1?le:le.slice(0,Je)}return lt}function _t(ue){return yt()+"#"+(typeof ue=="string"?ue:J(ue))}function He(ue,lt){return lt===void 0&&(lt=null),C((0,E.Z)({pathname:Ct.pathname,hash:"",search:""},typeof ue=="string"?ae(ue):ue,{state:lt,key:he()}))}function bt(ue,lt){return[{usr:ue.state,key:ue.key,idx:lt},_t(ue)]}function Tt(ue,lt,le){return!Et.length||(Et.call({action:ue,location:lt,retry:le}),!1)}function st(ue){qe=ue;var lt=Se();nt=lt[0],Ct=lt[1],ft.call({action:qe,location:Ct})}function Qe(ue,lt){var le=M.Push,Je=He(ue,lt);function we(){Qe(ue,lt)}if(Tt(le,Je,we)){var Pn=bt(Je,nt+1),Mt=Pn[0],or=Pn[1];try{ye.pushState(Mt,"",or)}catch(wr){ke.location.assign(or)}st(le)}}function mt(ue,lt){var le=M.Replace,Je=He(ue,lt);function we(){mt(ue,lt)}if(Tt(le,Je,we)){var Pn=bt(Je,nt),Mt=Pn[0],or=Pn[1];ye.replaceState(Mt,"",or),st(le)}}function Ht(ue){ye.go(ue)}var vt={get action(){return qe},get location(){return Ct},createHref:_t,push:Qe,replace:mt,go:Ht,back:function(){Ht(-1)},forward:function(){Ht(1)},listen:function(lt){return ft.push(lt)},block:function(lt){var le=Et.push(lt);return Et.length===1&&ke.addEventListener(j,K),function(){le(),Et.length||ke.removeEventListener(j,K)}}};return vt}function X(se){se===void 0&&(se={});var Ee=se,Le=Ee.initialEntries,ke=Le===void 0?["/"]:Le,ye=Ee.initialIndex,Se=ke.map(function(st){var Qe=C((0,E.Z)({pathname:"/",search:"",hash:"",state:null,key:he()},typeof st=="string"?ae(st):st));return Qe}),be=B(ye==null?Se.length-1:ye,0,Se.length-1),Ue=M.Pop,qe=Se[be],je=de(),nt=de();function Ct(st){return typeof st=="string"?st:J(st)}function ft(st,Qe){return Qe===void 0&&(Qe=null),C((0,E.Z)({pathname:qe.pathname,search:"",hash:""},typeof st=="string"?ae(st):st,{state:Qe,key:he()}))}function Et(st,Qe,mt){return!nt.length||(nt.call({action:st,location:Qe,retry:mt}),!1)}function yt(st,Qe){Ue=st,qe=Qe,je.call({action:Ue,location:qe})}function _t(st,Qe){var mt=M.Push,Ht=ft(st,Qe);function vt(){_t(st,Qe)}Et(mt,Ht,vt)&&(be+=1,Se.splice(be,Se.length,Ht),yt(mt,Ht))}function He(st,Qe){var mt=M.Replace,Ht=ft(st,Qe);function vt(){He(st,Qe)}Et(mt,Ht,vt)&&(Se[be]=Ht,yt(mt,Ht))}function bt(st){var Qe=B(be+st,0,Se.length-1),mt=M.Pop,Ht=Se[Qe];function vt(){bt(st)}Et(mt,Ht,vt)&&(be=Qe,yt(mt,Ht))}var Tt={get index(){return be},get action(){return Ue},get location(){return qe},createHref:Ct,push:_t,replace:He,go:bt,back:function(){bt(-1)},forward:function(){bt(1)},listen:function(Qe){return je.push(Qe)},block:function(Qe){return nt.push(Qe)}};return Tt}function B(se,Ee,Le){return Math.min(Math.max(se,Ee),Le)}function K(se){se.preventDefault(),se.returnValue=""}function de(){var se=[];return{get length(){return se.length},push:function(Le){return se.push(Le),function(){se=se.filter(function(ke){return ke!==Le})}},call:function(Le){se.forEach(function(ke){return ke&&ke(Le)})}}}function he(){return Math.random().toString(36).substr(2,8)}function J(se){var Ee=se.pathname,Le=Ee===void 0?"/":Ee,ke=se.search,ye=ke===void 0?"":ke,Se=se.hash,be=Se===void 0?"":Se;return ye&&ye!=="?"&&(Le+=ye.charAt(0)==="?"?ye:"?"+ye),be&&be!=="#"&&(Le+=be.charAt(0)==="#"?be:"#"+be),Le}function ae(se){var Ee={};if(se){var Le=se.indexOf("#");Le>=0&&(Ee.hash=se.substr(Le),se=se.substr(0,Le));var ke=se.indexOf("?");ke>=0&&(Ee.search=se.substr(ke),se=se.substr(0,ke)),se&&(Ee.pathname=se)}return Ee}},72535:function(H,Q,i){"use strict";var E=i(56237),M={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},C={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},j={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$={};$[E.ForwardRef]=n,$[E.Memo]=j;function U(J){return E.isMemo(J)?j:$[J.$$typeof]||M}var Y=Object.defineProperty,te=Object.getOwnPropertyNames,X=Object.getOwnPropertySymbols,B=Object.getOwnPropertyDescriptor,K=Object.getPrototypeOf,de=Object.prototype;function he(J,ae,se){if(typeof ae!="string"){if(de){var Ee=K(ae);Ee&&Ee!==de&&he(J,Ee,se)}var Le=te(ae);X&&(Le=Le.concat(X(ae)));for(var ke=U(J),ye=U(ae),Se=0;Se<Le.length;++Se){var be=Le[Se];if(!C[be]&&!(se&&se[be])&&!(ye&&ye[be])&&!(ke&&ke[be])){var Ue=B(ae,be);try{Y(J,be,Ue)}catch(qe){}}}}return J}H.exports=he},43659:function(H,Q,i){"use strict";i.d(Q,{C:function(){return te}});var E=i(15767),M=i(12581),C=i(81799),n=i(53766);function j(X,B){return B?(0,E.pi)((0,E.pi)((0,E.pi)({},X||{}),B||{}),Object.keys(X).reduce(function(K,de){return K[de]=(0,E.pi)((0,E.pi)({},X[de]),B[de]||{}),K},{})):X}function $(X,B){return B?Object.keys(X).reduce(function(K,de){return K[de]=j(X[de],B[de]),K},(0,E.pi)({},X)):X}function U(X){return{create:function(){return{get:function(B){return X[B]},set:function(B,K){X[B]=K}}}}}function Y(X){return X===void 0&&(X={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,M.H)(function(){for(var B,K=[],de=0;de<arguments.length;de++)K[de]=arguments[de];return new((B=Intl.NumberFormat).bind.apply(B,(0,E.ev)([void 0],K,!1)))},{cache:U(X.number),strategy:M.A.variadic}),getDateTimeFormat:(0,M.H)(function(){for(var B,K=[],de=0;de<arguments.length;de++)K[de]=arguments[de];return new((B=Intl.DateTimeFormat).bind.apply(B,(0,E.ev)([void 0],K,!1)))},{cache:U(X.dateTime),strategy:M.A.variadic}),getPluralRules:(0,M.H)(function(){for(var B,K=[],de=0;de<arguments.length;de++)K[de]=arguments[de];return new((B=Intl.PluralRules).bind.apply(B,(0,E.ev)([void 0],K,!1)))},{cache:U(X.pluralRules),strategy:M.A.variadic})}}var te=function(){function X(B,K,de,he){K===void 0&&(K=X.defaultLocale);var J=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(Le){var ke=J.formatToParts(Le);if(ke.length===1)return ke[0].value;var ye=ke.reduce(function(Se,be){return!Se.length||be.type!==n.du.literal||typeof Se[Se.length-1]!="string"?Se.push(be.value):Se[Se.length-1]+=be.value,Se},[]);return ye.length<=1?ye[0]||"":ye},this.formatToParts=function(Le){return(0,n.FK)(J.ast,J.locales,J.formatters,J.formats,Le,void 0,J.message)},this.resolvedOptions=function(){var Le;return{locale:((Le=J.resolvedLocale)===null||Le===void 0?void 0:Le.toString())||Intl.NumberFormat.supportedLocalesOf(J.locales)[0]}},this.getAst=function(){return J.ast},this.locales=K,this.resolvedLocale=X.resolveLocale(K),typeof B=="string"){if(this.message=B,!X.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var ae=he||{},se=ae.formatters,Ee=(0,E._T)(ae,["formatters"]);this.ast=X.__parse(B,(0,E.pi)((0,E.pi)({},Ee),{locale:this.resolvedLocale}))}else this.ast=B;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=$(X.formats,de),this.formatters=he&&he.formatters||Y(this.formatterCache)}return Object.defineProperty(X,"defaultLocale",{get:function(){return X.memoizedDefaultLocale||(X.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),X.memoizedDefaultLocale},enumerable:!1,configurable:!0}),X.memoizedDefaultLocale=null,X.resolveLocale=function(B){if(typeof Intl.Locale!="undefined"){var K=Intl.NumberFormat.supportedLocalesOf(B);return K.length>0?new Intl.Locale(K[0]):new Intl.Locale(typeof B=="string"?B:B[0])}},X.__parse=C.Qc,X.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},X}()},91483:function(H,Q,i){"use strict";i.d(Q,{C8:function(){return n},HR:function(){return $},YR:function(){return j},jK:function(){return M},u_:function(){return C}});var E=i(15767),M;(function(U){U.MISSING_VALUE="MISSING_VALUE",U.INVALID_VALUE="INVALID_VALUE",U.MISSING_INTL_API="MISSING_INTL_API"})(M||(M={}));var C=function(U){(0,E.ZT)(Y,U);function Y(te,X,B){var K=U.call(this,te)||this;return K.code=X,K.originalMessage=B,K}return Y.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},Y}(Error),n=function(U){(0,E.ZT)(Y,U);function Y(te,X,B,K){return U.call(this,'Invalid values for "'.concat(te,'": "').concat(X,'". Options are "').concat(Object.keys(B).join('", "'),'"'),M.INVALID_VALUE,K)||this}return Y}(C),j=function(U){(0,E.ZT)(Y,U);function Y(te,X,B){return U.call(this,'Value for "'.concat(te,'" must be of type ').concat(X),M.INVALID_VALUE,B)||this}return Y}(C),$=function(U){(0,E.ZT)(Y,U);function Y(te,X){return U.call(this,'The intl string context variable "'.concat(te,'" was not provided to the string "').concat(X,'"'),M.MISSING_VALUE,X)||this}return Y}(C)},53766:function(H,Q,i){"use strict";i.d(Q,{FK:function(){return $},Gt:function(){return j},du:function(){return C}});var E=i(81799),M=i(91483),C;(function(U){U[U.literal=0]="literal",U[U.object=1]="object"})(C||(C={}));function n(U){return U.length<2?U:U.reduce(function(Y,te){var X=Y[Y.length-1];return!X||X.type!==C.literal||te.type!==C.literal?Y.push(te):X.value+=te.value,Y},[])}function j(U){return typeof U=="function"}function $(U,Y,te,X,B,K,de){if(U.length===1&&(0,E.O4)(U[0]))return[{type:C.literal,value:U[0].value}];for(var he=[],J=0,ae=U;J<ae.length;J++){var se=ae[J];if((0,E.O4)(se)){he.push({type:C.literal,value:se.value});continue}if((0,E.yx)(se)){typeof K=="number"&&he.push({type:C.literal,value:te.getNumberFormat(Y).format(K)});continue}var Ee=se.value;if(!(B&&Ee in B))throw new M.HR(Ee,de);var Le=B[Ee];if((0,E.VG)(se)){(!Le||typeof Le=="string"||typeof Le=="number")&&(Le=typeof Le=="string"||typeof Le=="number"?String(Le):""),he.push({type:typeof Le=="string"?C.literal:C.object,value:Le});continue}if((0,E.rp)(se)){var ke=typeof se.style=="string"?X.date[se.style]:(0,E.Ii)(se.style)?se.style.parsedOptions:void 0;he.push({type:C.literal,value:te.getDateTimeFormat(Y,ke).format(Le)});continue}if((0,E.pe)(se)){var ke=typeof se.style=="string"?X.time[se.style]:(0,E.Ii)(se.style)?se.style.parsedOptions:X.time.medium;he.push({type:C.literal,value:te.getDateTimeFormat(Y,ke).format(Le)});continue}if((0,E.uf)(se)){var ke=typeof se.style=="string"?X.number[se.style]:(0,E.Wh)(se.style)?se.style.parsedOptions:void 0;ke&&ke.scale&&(Le=Le*(ke.scale||1)),he.push({type:C.literal,value:te.getNumberFormat(Y,ke).format(Le)});continue}if((0,E.HI)(se)){var ye=se.children,Se=se.value,be=B[Se];if(!j(be))throw new M.YR(Se,"function",de);var Ue=$(ye,Y,te,X,B,K),qe=be(Ue.map(function(Ct){return Ct.value}));Array.isArray(qe)||(qe=[qe]),he.push.apply(he,qe.map(function(Ct){return{type:typeof Ct=="string"?C.literal:C.object,value:Ct}}))}if((0,E.Wi)(se)){var je=se.options[Le]||se.options.other;if(!je)throw new M.C8(se.value,Le,Object.keys(se.options),de);he.push.apply(he,$(je.value,Y,te,X,B));continue}if((0,E.Jo)(se)){var je=se.options["=".concat(Le)];if(!je){if(!Intl.PluralRules)throw new M.u_(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,M.jK.MISSING_INTL_API,de);var nt=te.getPluralRules(Y,{type:se.pluralType}).select(Le-(se.offset||0));je=se.options[nt]||se.options.other}if(!je)throw new M.C8(se.value,Le,Object.keys(se.options),de);he.push.apply(he,$(je.value,Y,te,X,B,Le-(se.offset||0)));continue}}return n(he)}},53670:function(H){"use strict";var Q=function(i,E,M,C,n,j,$,U){if(!i){var Y;if(E===void 0)Y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var te=[M,C,n,j,$,U],X=0;Y=new Error(E.replace(/%s/g,function(){return te[X++]})),Y.name="Invariant Violation"}throw Y.framesToPop=1,Y}};H.exports=Q},30826:function(H,Q,i){var E="Expected a function",M=NaN,C="[object Symbol]",n=/^\s+|\s+$/g,j=/^[-+]0x[0-9a-f]+$/i,$=/^0b[01]+$/i,U=/^0o[0-7]+$/i,Y=parseInt,te=typeof i.g=="object"&&i.g&&i.g.Object===Object&&i.g,X=typeof self=="object"&&self&&self.Object===Object&&self,B=te||X||Function("return this")(),K=Object.prototype,de=K.toString,he=Math.max,J=Math.min,ae=function(){return B.Date.now()};function se(be,Ue,qe){var je,nt,Ct,ft,Et,yt,_t=0,He=!1,bt=!1,Tt=!0;if(typeof be!="function")throw new TypeError(E);Ue=Se(Ue)||0,Le(qe)&&(He=!!qe.leading,bt="maxWait"in qe,Ct=bt?he(Se(qe.maxWait)||0,Ue):Ct,Tt="trailing"in qe?!!qe.trailing:Tt);function st(we){var Pn=je,Mt=nt;return je=nt=void 0,_t=we,ft=be.apply(Mt,Pn),ft}function Qe(we){return _t=we,Et=setTimeout(vt,Ue),He?st(we):ft}function mt(we){var Pn=we-yt,Mt=we-_t,or=Ue-Pn;return bt?J(or,Ct-Mt):or}function Ht(we){var Pn=we-yt,Mt=we-_t;return yt===void 0||Pn>=Ue||Pn<0||bt&&Mt>=Ct}function vt(){var we=ae();if(Ht(we))return ue(we);Et=setTimeout(vt,mt(we))}function ue(we){return Et=void 0,Tt&&je?st(we):(je=nt=void 0,ft)}function lt(){Et!==void 0&&clearTimeout(Et),_t=0,je=yt=nt=Et=void 0}function le(){return Et===void 0?ft:ue(ae())}function Je(){var we=ae(),Pn=Ht(we);if(je=arguments,nt=this,yt=we,Pn){if(Et===void 0)return Qe(yt);if(bt)return Et=setTimeout(vt,Ue),st(yt)}return Et===void 0&&(Et=setTimeout(vt,Ue)),ft}return Je.cancel=lt,Je.flush=le,Je}function Ee(be,Ue,qe){var je=!0,nt=!0;if(typeof be!="function")throw new TypeError(E);return Le(qe)&&(je="leading"in qe?!!qe.leading:je,nt="trailing"in qe?!!qe.trailing:nt),se(be,Ue,{leading:je,maxWait:Ue,trailing:nt})}function Le(be){var Ue=typeof be;return!!be&&(Ue=="object"||Ue=="function")}function ke(be){return!!be&&typeof be=="object"}function ye(be){return typeof be=="symbol"||ke(be)&&de.call(be)==C}function Se(be){if(typeof be=="number")return be;if(ye(be))return M;if(Le(be)){var Ue=typeof be.valueOf=="function"?be.valueOf():be;be=Le(Ue)?Ue+"":Ue}if(typeof be!="string")return be===0?be:+be;be=be.replace(n,"");var qe=$.test(be);return qe||U.test(be)?Y(be.slice(2),qe?2:8):j.test(be)?M:+be}H.exports=Ee},37581:function(H,Q,i){var E,M=function(){var C=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",$={};function U(te,X){if(!$[te]){$[te]={};for(var B=0;B<te.length;B++)$[te][te.charAt(B)]=B}return $[te][X]}var Y={compressToBase64:function(te){if(te==null)return"";var X=Y._compress(te,6,function(B){return n.charAt(B)});switch(X.length%4){default:case 0:return X;case 1:return X+"===";case 2:return X+"==";case 3:return X+"="}},decompressFromBase64:function(te){return te==null?"":te==""?null:Y._decompress(te.length,32,function(X){return U(n,te.charAt(X))})},compressToUTF16:function(te){return te==null?"":Y._compress(te,15,function(X){return C(X+32)})+" "},decompressFromUTF16:function(te){return te==null?"":te==""?null:Y._decompress(te.length,16384,function(X){return te.charCodeAt(X)-32})},compressToUint8Array:function(te){for(var X=Y.compress(te),B=new Uint8Array(X.length*2),K=0,de=X.length;K<de;K++){var he=X.charCodeAt(K);B[K*2]=he>>>8,B[K*2+1]=he%256}return B},decompressFromUint8Array:function(te){if(te==null)return Y.decompress(te);for(var X=new Array(te.length/2),B=0,K=X.length;B<K;B++)X[B]=te[B*2]*256+te[B*2+1];var de=[];return X.forEach(function(he){de.push(C(he))}),Y.decompress(de.join(""))},compressToEncodedURIComponent:function(te){return te==null?"":Y._compress(te,6,function(X){return j.charAt(X)})},decompressFromEncodedURIComponent:function(te){return te==null?"":te==""?null:(te=te.replace(/ /g,"+"),Y._decompress(te.length,32,function(X){return U(j,te.charAt(X))}))},compress:function(te){return Y._compress(te,16,function(X){return C(X)})},_compress:function(te,X,B){if(te==null)return"";var K,de,he={},J={},ae="",se="",Ee="",Le=2,ke=3,ye=2,Se=[],be=0,Ue=0,qe;for(qe=0;qe<te.length;qe+=1)if(ae=te.charAt(qe),Object.prototype.hasOwnProperty.call(he,ae)||(he[ae]=ke++,J[ae]=!0),se=Ee+ae,Object.prototype.hasOwnProperty.call(he,se))Ee=se;else{if(Object.prototype.hasOwnProperty.call(J,Ee)){if(Ee.charCodeAt(0)<256){for(K=0;K<ye;K++)be=be<<1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++;for(de=Ee.charCodeAt(0),K=0;K<8;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1}else{for(de=1,K=0;K<ye;K++)be=be<<1|de,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=0;for(de=Ee.charCodeAt(0),K=0;K<16;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1}Le--,Le==0&&(Le=Math.pow(2,ye),ye++),delete J[Ee]}else for(de=he[Ee],K=0;K<ye;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1;Le--,Le==0&&(Le=Math.pow(2,ye),ye++),he[se]=ke++,Ee=String(ae)}if(Ee!==""){if(Object.prototype.hasOwnProperty.call(J,Ee)){if(Ee.charCodeAt(0)<256){for(K=0;K<ye;K++)be=be<<1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++;for(de=Ee.charCodeAt(0),K=0;K<8;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1}else{for(de=1,K=0;K<ye;K++)be=be<<1|de,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=0;for(de=Ee.charCodeAt(0),K=0;K<16;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1}Le--,Le==0&&(Le=Math.pow(2,ye),ye++),delete J[Ee]}else for(de=he[Ee],K=0;K<ye;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1;Le--,Le==0&&(Le=Math.pow(2,ye),ye++)}for(de=2,K=0;K<ye;K++)be=be<<1|de&1,Ue==X-1?(Ue=0,Se.push(B(be)),be=0):Ue++,de=de>>1;for(;;)if(be=be<<1,Ue==X-1){Se.push(B(be));break}else Ue++;return Se.join("")},decompress:function(te){return te==null?"":te==""?null:Y._decompress(te.length,32768,function(X){return te.charCodeAt(X)})},_decompress:function(te,X,B){var K=[],de,he=4,J=4,ae=3,se="",Ee=[],Le,ke,ye,Se,be,Ue,qe,je={val:B(0),position:X,index:1};for(Le=0;Le<3;Le+=1)K[Le]=Le;for(ye=0,be=Math.pow(2,2),Ue=1;Ue!=be;)Se=je.val&je.position,je.position>>=1,je.position==0&&(je.position=X,je.val=B(je.index++)),ye|=(Se>0?1:0)*Ue,Ue<<=1;switch(de=ye){case 0:for(ye=0,be=Math.pow(2,8),Ue=1;Ue!=be;)Se=je.val&je.position,je.position>>=1,je.position==0&&(je.position=X,je.val=B(je.index++)),ye|=(Se>0?1:0)*Ue,Ue<<=1;qe=C(ye);break;case 1:for(ye=0,be=Math.pow(2,16),Ue=1;Ue!=be;)Se=je.val&je.position,je.position>>=1,je.position==0&&(je.position=X,je.val=B(je.index++)),ye|=(Se>0?1:0)*Ue,Ue<<=1;qe=C(ye);break;case 2:return""}for(K[3]=qe,ke=qe,Ee.push(qe);;){if(je.index>te)return"";for(ye=0,be=Math.pow(2,ae),Ue=1;Ue!=be;)Se=je.val&je.position,je.position>>=1,je.position==0&&(je.position=X,je.val=B(je.index++)),ye|=(Se>0?1:0)*Ue,Ue<<=1;switch(qe=ye){case 0:for(ye=0,be=Math.pow(2,8),Ue=1;Ue!=be;)Se=je.val&je.position,je.position>>=1,je.position==0&&(je.position=X,je.val=B(je.index++)),ye|=(Se>0?1:0)*Ue,Ue<<=1;K[J++]=C(ye),qe=J-1,he--;break;case 1:for(ye=0,be=Math.pow(2,16),Ue=1;Ue!=be;)Se=je.val&je.position,je.position>>=1,je.position==0&&(je.position=X,je.val=B(je.index++)),ye|=(Se>0?1:0)*Ue,Ue<<=1;K[J++]=C(ye),qe=J-1,he--;break;case 2:return Ee.join("")}if(he==0&&(he=Math.pow(2,ae),ae++),K[qe])se=K[qe];else if(qe===J)se=ke+ke.charAt(0);else return null;Ee.push(se),K[J++]=ke+se.charAt(0),he--,ke=se,he==0&&(he=Math.pow(2,ae),ae++)}}};return Y}();E=function(){return M}.call(Q,i,Q,H),E!==void 0&&(H.exports=E)},95959:function(H){(function(Q,i){H.exports=i()})(this,function(){"use strict";var Q,i,E;function M(n,j){if(!Q)Q=j;else if(!i)i=j;else{var $="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Q+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",U={};Q(U),E=j(U),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(E.workerUrl=window.URL.createObjectURL(new Blob([$],{type:"text/javascript"})))}}M(["exports"],function(n){function j(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var $,U={},Y={};function te(){if($)return Y;$=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.setMatrixArrayType=function(h){Y.ARRAY_TYPE=e=h},Y.toRadian=function(h){return h*s},Y.equals=function(h,l){return Math.abs(h-l)<=a*Math.max(1,Math.abs(h),Math.abs(l))},Y.RANDOM=Y.ARRAY_TYPE=Y.EPSILON=void 0;var a=1e-6;Y.EPSILON=a;var e=typeof Float32Array!="undefined"?Float32Array:Array;Y.ARRAY_TYPE=e;var r=Math.random;Y.RANDOM=r;var s=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var h=0,l=arguments.length;l--;)h+=arguments[l]*arguments[l];return Math.sqrt(h)}),Y}var X,B={};function K(){if(X)return B;function a(l){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a(l)}X=1,Object.defineProperty(B,"__esModule",{value:!0}),B.create=function(){var l=new e.ARRAY_TYPE(4);return e.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l},B.clone=function(l){var m=new e.ARRAY_TYPE(4);return m[0]=l[0],m[1]=l[1],m[2]=l[2],m[3]=l[3],m},B.copy=function(l,m){return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l},B.identity=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l},B.fromValues=function(l,m,S,O){var z=new e.ARRAY_TYPE(4);return z[0]=l,z[1]=m,z[2]=S,z[3]=O,z},B.set=function(l,m,S,O,z){return l[0]=m,l[1]=S,l[2]=O,l[3]=z,l},B.transpose=function(l,m){if(l===m){var S=m[1];l[1]=m[2],l[2]=S}else l[0]=m[0],l[1]=m[2],l[2]=m[1],l[3]=m[3];return l},B.invert=function(l,m){var S=m[0],O=m[1],z=m[2],w=m[3],R=S*w-z*O;return R?(l[0]=w*(R=1/R),l[1]=-O*R,l[2]=-z*R,l[3]=S*R,l):null},B.adjoint=function(l,m){var S=m[0];return l[0]=m[3],l[1]=-m[1],l[2]=-m[2],l[3]=S,l},B.determinant=function(l){return l[0]*l[3]-l[2]*l[1]},B.multiply=s,B.rotate=function(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=Math.sin(S),P=Math.cos(S);return l[0]=O*P+w*N,l[1]=z*P+R*N,l[2]=O*-N+w*P,l[3]=z*-N+R*P,l},B.scale=function(l,m,S){var O=m[1],z=m[2],w=m[3],R=S[0],N=S[1];return l[0]=m[0]*R,l[1]=O*R,l[2]=z*N,l[3]=w*N,l},B.fromRotation=function(l,m){var S=Math.sin(m),O=Math.cos(m);return l[0]=O,l[1]=S,l[2]=-S,l[3]=O,l},B.fromScaling=function(l,m){return l[0]=m[0],l[1]=0,l[2]=0,l[3]=m[1],l},B.str=function(l){return"mat2("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"},B.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},B.LDU=function(l,m,S,O){return l[2]=O[2]/O[0],S[0]=O[0],S[1]=O[1],S[3]=O[3]-l[2]*S[1],[l,m,S]},B.add=function(l,m,S){return l[0]=m[0]+S[0],l[1]=m[1]+S[1],l[2]=m[2]+S[2],l[3]=m[3]+S[3],l},B.subtract=h,B.exactEquals=function(l,m){return l[0]===m[0]&&l[1]===m[1]&&l[2]===m[2]&&l[3]===m[3]},B.equals=function(l,m){var S=l[0],O=l[1],z=l[2],w=l[3],R=m[0],N=m[1],P=m[2],D=m[3];return Math.abs(S-R)<=e.EPSILON*Math.max(1,Math.abs(S),Math.abs(R))&&Math.abs(O-N)<=e.EPSILON*Math.max(1,Math.abs(O),Math.abs(N))&&Math.abs(z-P)<=e.EPSILON*Math.max(1,Math.abs(z),Math.abs(P))&&Math.abs(w-D)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(D))},B.multiplyScalar=function(l,m,S){return l[0]=m[0]*S,l[1]=m[1]*S,l[2]=m[2]*S,l[3]=m[3]*S,l},B.multiplyScalarAndAdd=function(l,m,S,O){return l[0]=m[0]+S[0]*O,l[1]=m[1]+S[1]*O,l[2]=m[2]+S[2]*O,l[3]=m[3]+S[3]*O,l},B.sub=B.mul=void 0;var e=function(l,m){if(l&&l.__esModule)return l;if(l===null||a(l)!=="object"&&typeof l!="function")return{default:l};var S=r(void 0);if(S&&S.has(l))return S.get(l);var O={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in l)if(w!=="default"&&Object.prototype.hasOwnProperty.call(l,w)){var R=z?Object.getOwnPropertyDescriptor(l,w):null;R&&(R.get||R.set)?Object.defineProperty(O,w,R):O[w]=l[w]}return O.default=l,S&&S.set(l,O),O}(te());function r(l){if(typeof WeakMap!="function")return null;var m=new WeakMap,S=new WeakMap;return(r=function(O){return O?S:m})(l)}function s(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=S[0],P=S[1],D=S[2],G=S[3];return l[0]=O*N+w*P,l[1]=z*N+R*P,l[2]=O*D+w*G,l[3]=z*D+R*G,l}function h(l,m,S){return l[0]=m[0]-S[0],l[1]=m[1]-S[1],l[2]=m[2]-S[2],l[3]=m[3]-S[3],l}return B.mul=s,B.sub=h,B}var de,he={};function J(){if(de)return he;function a(l){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a(l)}de=1,Object.defineProperty(he,"__esModule",{value:!0}),he.create=function(){var l=new e.ARRAY_TYPE(6);return e.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0,l[4]=0,l[5]=0),l[0]=1,l[3]=1,l},he.clone=function(l){var m=new e.ARRAY_TYPE(6);return m[0]=l[0],m[1]=l[1],m[2]=l[2],m[3]=l[3],m[4]=l[4],m[5]=l[5],m},he.copy=function(l,m){return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l},he.identity=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,l},he.fromValues=function(l,m,S,O,z,w){var R=new e.ARRAY_TYPE(6);return R[0]=l,R[1]=m,R[2]=S,R[3]=O,R[4]=z,R[5]=w,R},he.set=function(l,m,S,O,z,w,R){return l[0]=m,l[1]=S,l[2]=O,l[3]=z,l[4]=w,l[5]=R,l},he.invert=function(l,m){var S=m[0],O=m[1],z=m[2],w=m[3],R=m[4],N=m[5],P=S*w-O*z;return P?(l[0]=w*(P=1/P),l[1]=-O*P,l[2]=-z*P,l[3]=S*P,l[4]=(z*N-w*R)*P,l[5]=(O*R-S*N)*P,l):null},he.determinant=function(l){return l[0]*l[3]-l[1]*l[2]},he.multiply=s,he.rotate=function(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=m[4],P=m[5],D=Math.sin(S),G=Math.cos(S);return l[0]=O*G+w*D,l[1]=z*G+R*D,l[2]=O*-D+w*G,l[3]=z*-D+R*G,l[4]=N,l[5]=P,l},he.scale=function(l,m,S){var O=m[1],z=m[2],w=m[3],R=m[4],N=m[5],P=S[0],D=S[1];return l[0]=m[0]*P,l[1]=O*P,l[2]=z*D,l[3]=w*D,l[4]=R,l[5]=N,l},he.translate=function(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=m[4],P=m[5],D=S[0],G=S[1];return l[0]=O,l[1]=z,l[2]=w,l[3]=R,l[4]=O*D+w*G+N,l[5]=z*D+R*G+P,l},he.fromRotation=function(l,m){var S=Math.sin(m),O=Math.cos(m);return l[0]=O,l[1]=S,l[2]=-S,l[3]=O,l[4]=0,l[5]=0,l},he.fromScaling=function(l,m){return l[0]=m[0],l[1]=0,l[2]=0,l[3]=m[1],l[4]=0,l[5]=0,l},he.fromTranslation=function(l,m){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=m[0],l[5]=m[1],l},he.str=function(l){return"mat2d("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+")"},he.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3],l[4],l[5],1)},he.add=function(l,m,S){return l[0]=m[0]+S[0],l[1]=m[1]+S[1],l[2]=m[2]+S[2],l[3]=m[3]+S[3],l[4]=m[4]+S[4],l[5]=m[5]+S[5],l},he.subtract=h,he.multiplyScalar=function(l,m,S){return l[0]=m[0]*S,l[1]=m[1]*S,l[2]=m[2]*S,l[3]=m[3]*S,l[4]=m[4]*S,l[5]=m[5]*S,l},he.multiplyScalarAndAdd=function(l,m,S,O){return l[0]=m[0]+S[0]*O,l[1]=m[1]+S[1]*O,l[2]=m[2]+S[2]*O,l[3]=m[3]+S[3]*O,l[4]=m[4]+S[4]*O,l[5]=m[5]+S[5]*O,l},he.exactEquals=function(l,m){return l[0]===m[0]&&l[1]===m[1]&&l[2]===m[2]&&l[3]===m[3]&&l[4]===m[4]&&l[5]===m[5]},he.equals=function(l,m){var S=l[0],O=l[1],z=l[2],w=l[3],R=l[4],N=l[5],P=m[0],D=m[1],G=m[2],oe=m[3],ce=m[4],Ae=m[5];return Math.abs(S-P)<=e.EPSILON*Math.max(1,Math.abs(S),Math.abs(P))&&Math.abs(O-D)<=e.EPSILON*Math.max(1,Math.abs(O),Math.abs(D))&&Math.abs(z-G)<=e.EPSILON*Math.max(1,Math.abs(z),Math.abs(G))&&Math.abs(w-oe)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(oe))&&Math.abs(R-ce)<=e.EPSILON*Math.max(1,Math.abs(R),Math.abs(ce))&&Math.abs(N-Ae)<=e.EPSILON*Math.max(1,Math.abs(N),Math.abs(Ae))},he.sub=he.mul=void 0;var e=function(l,m){if(l&&l.__esModule)return l;if(l===null||a(l)!=="object"&&typeof l!="function")return{default:l};var S=r(void 0);if(S&&S.has(l))return S.get(l);var O={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in l)if(w!=="default"&&Object.prototype.hasOwnProperty.call(l,w)){var R=z?Object.getOwnPropertyDescriptor(l,w):null;R&&(R.get||R.set)?Object.defineProperty(O,w,R):O[w]=l[w]}return O.default=l,S&&S.set(l,O),O}(te());function r(l){if(typeof WeakMap!="function")return null;var m=new WeakMap,S=new WeakMap;return(r=function(O){return O?S:m})(l)}function s(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=m[4],P=m[5],D=S[0],G=S[1],oe=S[2],ce=S[3],Ae=S[4],Oe=S[5];return l[0]=O*D+w*G,l[1]=z*D+R*G,l[2]=O*oe+w*ce,l[3]=z*oe+R*ce,l[4]=O*Ae+w*Oe+N,l[5]=z*Ae+R*Oe+P,l}function h(l,m,S){return l[0]=m[0]-S[0],l[1]=m[1]-S[1],l[2]=m[2]-S[2],l[3]=m[3]-S[3],l[4]=m[4]-S[4],l[5]=m[5]-S[5],l}return he.mul=s,he.sub=h,he}var ae,se={};function Ee(){if(ae)return se;function a(l){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a(l)}ae=1,Object.defineProperty(se,"__esModule",{value:!0}),se.create=function(){var l=new e.ARRAY_TYPE(9);return e.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l},se.fromMat4=function(l,m){return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[4],l[4]=m[5],l[5]=m[6],l[6]=m[8],l[7]=m[9],l[8]=m[10],l},se.clone=function(l){var m=new e.ARRAY_TYPE(9);return m[0]=l[0],m[1]=l[1],m[2]=l[2],m[3]=l[3],m[4]=l[4],m[5]=l[5],m[6]=l[6],m[7]=l[7],m[8]=l[8],m},se.copy=function(l,m){return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=m[6],l[7]=m[7],l[8]=m[8],l},se.fromValues=function(l,m,S,O,z,w,R,N,P){var D=new e.ARRAY_TYPE(9);return D[0]=l,D[1]=m,D[2]=S,D[3]=O,D[4]=z,D[5]=w,D[6]=R,D[7]=N,D[8]=P,D},se.set=function(l,m,S,O,z,w,R,N,P,D){return l[0]=m,l[1]=S,l[2]=O,l[3]=z,l[4]=w,l[5]=R,l[6]=N,l[7]=P,l[8]=D,l},se.identity=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},se.transpose=function(l,m){if(l===m){var S=m[1],O=m[2],z=m[5];l[1]=m[3],l[2]=m[6],l[3]=S,l[5]=m[7],l[6]=O,l[7]=z}else l[0]=m[0],l[1]=m[3],l[2]=m[6],l[3]=m[1],l[4]=m[4],l[5]=m[7],l[6]=m[2],l[7]=m[5],l[8]=m[8];return l},se.invert=function(l,m){var S=m[0],O=m[1],z=m[2],w=m[3],R=m[4],N=m[5],P=m[6],D=m[7],G=m[8],oe=G*R-N*D,ce=-G*w+N*P,Ae=D*w-R*P,Oe=S*oe+O*ce+z*Ae;return Oe?(l[0]=oe*(Oe=1/Oe),l[1]=(-G*O+z*D)*Oe,l[2]=(N*O-z*R)*Oe,l[3]=ce*Oe,l[4]=(G*S-z*P)*Oe,l[5]=(-N*S+z*w)*Oe,l[6]=Ae*Oe,l[7]=(-D*S+O*P)*Oe,l[8]=(R*S-O*w)*Oe,l):null},se.adjoint=function(l,m){var S=m[0],O=m[1],z=m[2],w=m[3],R=m[4],N=m[5],P=m[6],D=m[7],G=m[8];return l[0]=R*G-N*D,l[1]=z*D-O*G,l[2]=O*N-z*R,l[3]=N*P-w*G,l[4]=S*G-z*P,l[5]=z*w-S*N,l[6]=w*D-R*P,l[7]=O*P-S*D,l[8]=S*R-O*w,l},se.determinant=function(l){var m=l[3],S=l[4],O=l[5],z=l[6],w=l[7],R=l[8];return l[0]*(R*S-O*w)+l[1]*(-R*m+O*z)+l[2]*(w*m-S*z)},se.multiply=s,se.translate=function(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=m[4],P=m[5],D=m[6],G=m[7],oe=m[8],ce=S[0],Ae=S[1];return l[0]=O,l[1]=z,l[2]=w,l[3]=R,l[4]=N,l[5]=P,l[6]=ce*O+Ae*R+D,l[7]=ce*z+Ae*N+G,l[8]=ce*w+Ae*P+oe,l},se.rotate=function(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=m[4],P=m[5],D=m[6],G=m[7],oe=m[8],ce=Math.sin(S),Ae=Math.cos(S);return l[0]=Ae*O+ce*R,l[1]=Ae*z+ce*N,l[2]=Ae*w+ce*P,l[3]=Ae*R-ce*O,l[4]=Ae*N-ce*z,l[5]=Ae*P-ce*w,l[6]=D,l[7]=G,l[8]=oe,l},se.scale=function(l,m,S){var O=S[0],z=S[1];return l[0]=O*m[0],l[1]=O*m[1],l[2]=O*m[2],l[3]=z*m[3],l[4]=z*m[4],l[5]=z*m[5],l[6]=m[6],l[7]=m[7],l[8]=m[8],l},se.fromTranslation=function(l,m){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=1,l[5]=0,l[6]=m[0],l[7]=m[1],l[8]=1,l},se.fromRotation=function(l,m){var S=Math.sin(m),O=Math.cos(m);return l[0]=O,l[1]=S,l[2]=0,l[3]=-S,l[4]=O,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},se.fromScaling=function(l,m){return l[0]=m[0],l[1]=0,l[2]=0,l[3]=0,l[4]=m[1],l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},se.fromMat2d=function(l,m){return l[0]=m[0],l[1]=m[1],l[2]=0,l[3]=m[2],l[4]=m[3],l[5]=0,l[6]=m[4],l[7]=m[5],l[8]=1,l},se.fromQuat=function(l,m){var S=m[0],O=m[1],z=m[2],w=m[3],R=S+S,N=O+O,P=z+z,D=S*R,G=O*R,oe=O*N,ce=z*R,Ae=z*N,Oe=z*P,ve=w*R,Fe=w*N,Ye=w*P;return l[0]=1-oe-Oe,l[3]=G-Ye,l[6]=ce+Fe,l[1]=G+Ye,l[4]=1-D-Oe,l[7]=Ae-ve,l[2]=ce-Fe,l[5]=Ae+ve,l[8]=1-D-oe,l},se.normalFromMat4=function(l,m){var S=m[0],O=m[1],z=m[2],w=m[3],R=m[4],N=m[5],P=m[6],D=m[7],G=m[8],oe=m[9],ce=m[10],Ae=m[11],Oe=m[12],ve=m[13],Fe=m[14],Ye=m[15],ct=S*N-O*R,Kt=S*P-z*R,Zt=S*D-w*R,Ut=O*P-z*N,En=O*D-w*N,Yt=z*D-w*P,Cn=G*ve-oe*Oe,Vn=G*Fe-ce*Oe,zn=G*Ye-Ae*Oe,Zn=oe*Fe-ce*ve,qn=oe*Ye-Ae*ve,hr=ce*Ye-Ae*Fe,Kn=ct*hr-Kt*qn+Zt*Zn+Ut*zn-En*Vn+Yt*Cn;return Kn?(l[0]=(N*hr-P*qn+D*Zn)*(Kn=1/Kn),l[1]=(P*zn-R*hr-D*Vn)*Kn,l[2]=(R*qn-N*zn+D*Cn)*Kn,l[3]=(z*qn-O*hr-w*Zn)*Kn,l[4]=(S*hr-z*zn+w*Vn)*Kn,l[5]=(O*zn-S*qn-w*Cn)*Kn,l[6]=(ve*Yt-Fe*En+Ye*Ut)*Kn,l[7]=(Fe*Zt-Oe*Yt-Ye*Kt)*Kn,l[8]=(Oe*En-ve*Zt+Ye*ct)*Kn,l):null},se.projection=function(l,m,S){return l[0]=2/m,l[1]=0,l[2]=0,l[3]=0,l[4]=-2/S,l[5]=0,l[6]=-1,l[7]=1,l[8]=1,l},se.str=function(l){return"mat3("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+")"},se.frob=function(l){return Math.hypot(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},se.add=function(l,m,S){return l[0]=m[0]+S[0],l[1]=m[1]+S[1],l[2]=m[2]+S[2],l[3]=m[3]+S[3],l[4]=m[4]+S[4],l[5]=m[5]+S[5],l[6]=m[6]+S[6],l[7]=m[7]+S[7],l[8]=m[8]+S[8],l},se.subtract=h,se.multiplyScalar=function(l,m,S){return l[0]=m[0]*S,l[1]=m[1]*S,l[2]=m[2]*S,l[3]=m[3]*S,l[4]=m[4]*S,l[5]=m[5]*S,l[6]=m[6]*S,l[7]=m[7]*S,l[8]=m[8]*S,l},se.multiplyScalarAndAdd=function(l,m,S,O){return l[0]=m[0]+S[0]*O,l[1]=m[1]+S[1]*O,l[2]=m[2]+S[2]*O,l[3]=m[3]+S[3]*O,l[4]=m[4]+S[4]*O,l[5]=m[5]+S[5]*O,l[6]=m[6]+S[6]*O,l[7]=m[7]+S[7]*O,l[8]=m[8]+S[8]*O,l},se.exactEquals=function(l,m){return l[0]===m[0]&&l[1]===m[1]&&l[2]===m[2]&&l[3]===m[3]&&l[4]===m[4]&&l[5]===m[5]&&l[6]===m[6]&&l[7]===m[7]&&l[8]===m[8]},se.equals=function(l,m){var S=l[0],O=l[1],z=l[2],w=l[3],R=l[4],N=l[5],P=l[6],D=l[7],G=l[8],oe=m[0],ce=m[1],Ae=m[2],Oe=m[3],ve=m[4],Fe=m[5],Ye=m[6],ct=m[7],Kt=m[8];return Math.abs(S-oe)<=e.EPSILON*Math.max(1,Math.abs(S),Math.abs(oe))&&Math.abs(O-ce)<=e.EPSILON*Math.max(1,Math.abs(O),Math.abs(ce))&&Math.abs(z-Ae)<=e.EPSILON*Math.max(1,Math.abs(z),Math.abs(Ae))&&Math.abs(w-Oe)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(Oe))&&Math.abs(R-ve)<=e.EPSILON*Math.max(1,Math.abs(R),Math.abs(ve))&&Math.abs(N-Fe)<=e.EPSILON*Math.max(1,Math.abs(N),Math.abs(Fe))&&Math.abs(P-Ye)<=e.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ye))&&Math.abs(D-ct)<=e.EPSILON*Math.max(1,Math.abs(D),Math.abs(ct))&&Math.abs(G-Kt)<=e.EPSILON*Math.max(1,Math.abs(G),Math.abs(Kt))},se.sub=se.mul=void 0;var e=function(l,m){if(l&&l.__esModule)return l;if(l===null||a(l)!=="object"&&typeof l!="function")return{default:l};var S=r(void 0);if(S&&S.has(l))return S.get(l);var O={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in l)if(w!=="default"&&Object.prototype.hasOwnProperty.call(l,w)){var R=z?Object.getOwnPropertyDescriptor(l,w):null;R&&(R.get||R.set)?Object.defineProperty(O,w,R):O[w]=l[w]}return O.default=l,S&&S.set(l,O),O}(te());function r(l){if(typeof WeakMap!="function")return null;var m=new WeakMap,S=new WeakMap;return(r=function(O){return O?S:m})(l)}function s(l,m,S){var O=m[0],z=m[1],w=m[2],R=m[3],N=m[4],P=m[5],D=m[6],G=m[7],oe=m[8],ce=S[0],Ae=S[1],Oe=S[2],ve=S[3],Fe=S[4],Ye=S[5],ct=S[6],Kt=S[7],Zt=S[8];return l[0]=ce*O+Ae*R+Oe*D,l[1]=ce*z+Ae*N+Oe*G,l[2]=ce*w+Ae*P+Oe*oe,l[3]=ve*O+Fe*R+Ye*D,l[4]=ve*z+Fe*N+Ye*G,l[5]=ve*w+Fe*P+Ye*oe,l[6]=ct*O+Kt*R+Zt*D,l[7]=ct*z+Kt*N+Zt*G,l[8]=ct*w+Kt*P+Zt*oe,l}function h(l,m,S){return l[0]=m[0]-S[0],l[1]=m[1]-S[1],l[2]=m[2]-S[2],l[3]=m[3]-S[3],l[4]=m[4]-S[4],l[5]=m[5]-S[5],l[6]=m[6]-S[6],l[7]=m[7]-S[7],l[8]=m[8]-S[8],l}return se.mul=s,se.sub=h,se}var Le,ke={};function ye(){if(Le)return ke;function a(w){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},a(w)}Le=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.create=function(){var w=new e.ARRAY_TYPE(16);return e.ARRAY_TYPE!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w},ke.clone=function(w){var R=new e.ARRAY_TYPE(16);return R[0]=w[0],R[1]=w[1],R[2]=w[2],R[3]=w[3],R[4]=w[4],R[5]=w[5],R[6]=w[6],R[7]=w[7],R[8]=w[8],R[9]=w[9],R[10]=w[10],R[11]=w[11],R[12]=w[12],R[13]=w[13],R[14]=w[14],R[15]=w[15],R},ke.copy=function(w,R){return w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[8]=R[8],w[9]=R[9],w[10]=R[10],w[11]=R[11],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15],w},ke.fromValues=function(w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt){var Ut=new e.ARRAY_TYPE(16);return Ut[0]=w,Ut[1]=R,Ut[2]=N,Ut[3]=P,Ut[4]=D,Ut[5]=G,Ut[6]=oe,Ut[7]=ce,Ut[8]=Ae,Ut[9]=Oe,Ut[10]=ve,Ut[11]=Fe,Ut[12]=Ye,Ut[13]=ct,Ut[14]=Kt,Ut[15]=Zt,Ut},ke.set=function(w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt,Ut){return w[0]=R,w[1]=N,w[2]=P,w[3]=D,w[4]=G,w[5]=oe,w[6]=ce,w[7]=Ae,w[8]=Oe,w[9]=ve,w[10]=Fe,w[11]=Ye,w[12]=ct,w[13]=Kt,w[14]=Zt,w[15]=Ut,w},ke.identity=s,ke.transpose=function(w,R){if(w===R){var N=R[1],P=R[2],D=R[3],G=R[6],oe=R[7],ce=R[11];w[1]=R[4],w[2]=R[8],w[3]=R[12],w[4]=N,w[6]=R[9],w[7]=R[13],w[8]=P,w[9]=G,w[11]=R[14],w[12]=D,w[13]=oe,w[14]=ce}else w[0]=R[0],w[1]=R[4],w[2]=R[8],w[3]=R[12],w[4]=R[1],w[5]=R[5],w[6]=R[9],w[7]=R[13],w[8]=R[2],w[9]=R[6],w[10]=R[10],w[11]=R[14],w[12]=R[3],w[13]=R[7],w[14]=R[11],w[15]=R[15];return w},ke.invert=function(w,R){var N=R[0],P=R[1],D=R[2],G=R[3],oe=R[4],ce=R[5],Ae=R[6],Oe=R[7],ve=R[8],Fe=R[9],Ye=R[10],ct=R[11],Kt=R[12],Zt=R[13],Ut=R[14],En=R[15],Yt=N*ce-P*oe,Cn=N*Ae-D*oe,Vn=N*Oe-G*oe,zn=P*Ae-D*ce,Zn=P*Oe-G*ce,qn=D*Oe-G*Ae,hr=ve*Zt-Fe*Kt,Kn=ve*Ut-Ye*Kt,Zr=ve*En-ct*Kt,si=Fe*Ut-Ye*Zt,Wr=Fe*En-ct*Zt,zi=Ye*En-ct*Ut,yi=Yt*zi-Cn*Wr+Vn*si+zn*Zr-Zn*Kn+qn*hr;return yi?(w[0]=(ce*zi-Ae*Wr+Oe*si)*(yi=1/yi),w[1]=(D*Wr-P*zi-G*si)*yi,w[2]=(Zt*qn-Ut*Zn+En*zn)*yi,w[3]=(Ye*Zn-Fe*qn-ct*zn)*yi,w[4]=(Ae*Zr-oe*zi-Oe*Kn)*yi,w[5]=(N*zi-D*Zr+G*Kn)*yi,w[6]=(Ut*Vn-Kt*qn-En*Cn)*yi,w[7]=(ve*qn-Ye*Vn+ct*Cn)*yi,w[8]=(oe*Wr-ce*Zr+Oe*hr)*yi,w[9]=(P*Zr-N*Wr-G*hr)*yi,w[10]=(Kt*Zn-Zt*Vn+En*Yt)*yi,w[11]=(Fe*Vn-ve*Zn-ct*Yt)*yi,w[12]=(ce*Kn-oe*si-Ae*hr)*yi,w[13]=(N*si-P*Kn+D*hr)*yi,w[14]=(Zt*Cn-Kt*zn-Ut*Yt)*yi,w[15]=(ve*zn-Fe*Cn+Ye*Yt)*yi,w):null},ke.adjoint=function(w,R){var N=R[0],P=R[1],D=R[2],G=R[3],oe=R[4],ce=R[5],Ae=R[6],Oe=R[7],ve=R[8],Fe=R[9],Ye=R[10],ct=R[11],Kt=R[12],Zt=R[13],Ut=R[14],En=R[15];return w[0]=ce*(Ye*En-ct*Ut)-Fe*(Ae*En-Oe*Ut)+Zt*(Ae*ct-Oe*Ye),w[1]=-(P*(Ye*En-ct*Ut)-Fe*(D*En-G*Ut)+Zt*(D*ct-G*Ye)),w[2]=P*(Ae*En-Oe*Ut)-ce*(D*En-G*Ut)+Zt*(D*Oe-G*Ae),w[3]=-(P*(Ae*ct-Oe*Ye)-ce*(D*ct-G*Ye)+Fe*(D*Oe-G*Ae)),w[4]=-(oe*(Ye*En-ct*Ut)-ve*(Ae*En-Oe*Ut)+Kt*(Ae*ct-Oe*Ye)),w[5]=N*(Ye*En-ct*Ut)-ve*(D*En-G*Ut)+Kt*(D*ct-G*Ye),w[6]=-(N*(Ae*En-Oe*Ut)-oe*(D*En-G*Ut)+Kt*(D*Oe-G*Ae)),w[7]=N*(Ae*ct-Oe*Ye)-oe*(D*ct-G*Ye)+ve*(D*Oe-G*Ae),w[8]=oe*(Fe*En-ct*Zt)-ve*(ce*En-Oe*Zt)+Kt*(ce*ct-Oe*Fe),w[9]=-(N*(Fe*En-ct*Zt)-ve*(P*En-G*Zt)+Kt*(P*ct-G*Fe)),w[10]=N*(ce*En-Oe*Zt)-oe*(P*En-G*Zt)+Kt*(P*Oe-G*ce),w[11]=-(N*(ce*ct-Oe*Fe)-oe*(P*ct-G*Fe)+ve*(P*Oe-G*ce)),w[12]=-(oe*(Fe*Ut-Ye*Zt)-ve*(ce*Ut-Ae*Zt)+Kt*(ce*Ye-Ae*Fe)),w[13]=N*(Fe*Ut-Ye*Zt)-ve*(P*Ut-D*Zt)+Kt*(P*Ye-D*Fe),w[14]=-(N*(ce*Ut-Ae*Zt)-oe*(P*Ut-D*Zt)+Kt*(P*Ae-D*ce)),w[15]=N*(ce*Ye-Ae*Fe)-oe*(P*Ye-D*Fe)+ve*(P*Ae-D*ce),w},ke.determinant=function(w){var R=w[0],N=w[1],P=w[2],D=w[3],G=w[4],oe=w[5],ce=w[6],Ae=w[7],Oe=w[8],ve=w[9],Fe=w[10],Ye=w[11],ct=w[12],Kt=w[13],Zt=w[14],Ut=w[15];return(R*oe-N*G)*(Fe*Ut-Ye*Zt)-(R*ce-P*G)*(ve*Ut-Ye*Kt)+(R*Ae-D*G)*(ve*Zt-Fe*Kt)+(N*ce-P*oe)*(Oe*Ut-Ye*ct)-(N*Ae-D*oe)*(Oe*Zt-Fe*ct)+(P*Ae-D*ce)*(Oe*Kt-ve*ct)},ke.multiply=h,ke.translate=function(w,R,N){var P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt=N[0],Ut=N[1],En=N[2];return R===w?(w[12]=R[0]*Zt+R[4]*Ut+R[8]*En+R[12],w[13]=R[1]*Zt+R[5]*Ut+R[9]*En+R[13],w[14]=R[2]*Zt+R[6]*Ut+R[10]*En+R[14],w[15]=R[3]*Zt+R[7]*Ut+R[11]*En+R[15]):(D=R[1],G=R[2],oe=R[3],ce=R[4],Ae=R[5],Oe=R[6],ve=R[7],Fe=R[8],Ye=R[9],ct=R[10],Kt=R[11],w[0]=P=R[0],w[1]=D,w[2]=G,w[3]=oe,w[4]=ce,w[5]=Ae,w[6]=Oe,w[7]=ve,w[8]=Fe,w[9]=Ye,w[10]=ct,w[11]=Kt,w[12]=P*Zt+ce*Ut+Fe*En+R[12],w[13]=D*Zt+Ae*Ut+Ye*En+R[13],w[14]=G*Zt+Oe*Ut+ct*En+R[14],w[15]=oe*Zt+ve*Ut+Kt*En+R[15]),w},ke.scale=function(w,R,N){var P=N[0],D=N[1],G=N[2];return w[0]=R[0]*P,w[1]=R[1]*P,w[2]=R[2]*P,w[3]=R[3]*P,w[4]=R[4]*D,w[5]=R[5]*D,w[6]=R[6]*D,w[7]=R[7]*D,w[8]=R[8]*G,w[9]=R[9]*G,w[10]=R[10]*G,w[11]=R[11]*G,w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15],w},ke.rotate=function(w,R,N,P){var D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn,zn,Zn,qn,hr,Kn,Zr,si,Wr=P[0],zi=P[1],yi=P[2],vi=Math.hypot(Wr,zi,yi);return vi<e.EPSILON?null:(Wr*=vi=1/vi,zi*=vi,yi*=vi,D=Math.sin(N),G=Math.cos(N),Ae=R[1],Oe=R[2],ve=R[3],Ye=R[5],ct=R[6],Kt=R[7],Ut=R[9],En=R[10],Yt=R[11],Cn=Wr*Wr*(oe=1-G)+G,Zn=Wr*zi*oe-yi*D,qn=zi*zi*oe+G,hr=yi*zi*oe+Wr*D,Kn=Wr*yi*oe+zi*D,Zr=zi*yi*oe-Wr*D,si=yi*yi*oe+G,w[0]=(ce=R[0])*Cn+(Fe=R[4])*(Vn=zi*Wr*oe+yi*D)+(Zt=R[8])*(zn=yi*Wr*oe-zi*D),w[1]=Ae*Cn+Ye*Vn+Ut*zn,w[2]=Oe*Cn+ct*Vn+En*zn,w[3]=ve*Cn+Kt*Vn+Yt*zn,w[4]=ce*Zn+Fe*qn+Zt*hr,w[5]=Ae*Zn+Ye*qn+Ut*hr,w[6]=Oe*Zn+ct*qn+En*hr,w[7]=ve*Zn+Kt*qn+Yt*hr,w[8]=ce*Kn+Fe*Zr+Zt*si,w[9]=Ae*Kn+Ye*Zr+Ut*si,w[10]=Oe*Kn+ct*Zr+En*si,w[11]=ve*Kn+Kt*Zr+Yt*si,R!==w&&(w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w)},ke.rotateX=function(w,R,N){var P=Math.sin(N),D=Math.cos(N),G=R[4],oe=R[5],ce=R[6],Ae=R[7],Oe=R[8],ve=R[9],Fe=R[10],Ye=R[11];return R!==w&&(w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[4]=G*D+Oe*P,w[5]=oe*D+ve*P,w[6]=ce*D+Fe*P,w[7]=Ae*D+Ye*P,w[8]=Oe*D-G*P,w[9]=ve*D-oe*P,w[10]=Fe*D-ce*P,w[11]=Ye*D-Ae*P,w},ke.rotateY=function(w,R,N){var P=Math.sin(N),D=Math.cos(N),G=R[0],oe=R[1],ce=R[2],Ae=R[3],Oe=R[8],ve=R[9],Fe=R[10],Ye=R[11];return R!==w&&(w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[0]=G*D-Oe*P,w[1]=oe*D-ve*P,w[2]=ce*D-Fe*P,w[3]=Ae*D-Ye*P,w[8]=G*P+Oe*D,w[9]=oe*P+ve*D,w[10]=ce*P+Fe*D,w[11]=Ae*P+Ye*D,w},ke.rotateZ=function(w,R,N){var P=Math.sin(N),D=Math.cos(N),G=R[0],oe=R[1],ce=R[2],Ae=R[3],Oe=R[4],ve=R[5],Fe=R[6],Ye=R[7];return R!==w&&(w[8]=R[8],w[9]=R[9],w[10]=R[10],w[11]=R[11],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[0]=G*D+Oe*P,w[1]=oe*D+ve*P,w[2]=ce*D+Fe*P,w[3]=Ae*D+Ye*P,w[4]=Oe*D-G*P,w[5]=ve*D-oe*P,w[6]=Fe*D-ce*P,w[7]=Ye*D-Ae*P,w},ke.fromTranslation=function(w,R){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=R[0],w[13]=R[1],w[14]=R[2],w[15]=1,w},ke.fromScaling=function(w,R){return w[0]=R[0],w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=R[1],w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=R[2],w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ke.fromRotation=function(w,R,N){var P,D,G,oe=N[0],ce=N[1],Ae=N[2],Oe=Math.hypot(oe,ce,Ae);return Oe<e.EPSILON?null:(oe*=Oe=1/Oe,ce*=Oe,Ae*=Oe,P=Math.sin(R),D=Math.cos(R),w[0]=oe*oe*(G=1-D)+D,w[1]=ce*oe*G+Ae*P,w[2]=Ae*oe*G-ce*P,w[3]=0,w[4]=oe*ce*G-Ae*P,w[5]=ce*ce*G+D,w[6]=Ae*ce*G+oe*P,w[7]=0,w[8]=oe*Ae*G+ce*P,w[9]=ce*Ae*G-oe*P,w[10]=Ae*Ae*G+D,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w)},ke.fromXRotation=function(w,R){var N=Math.sin(R),P=Math.cos(R);return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=P,w[6]=N,w[7]=0,w[8]=0,w[9]=-N,w[10]=P,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ke.fromYRotation=function(w,R){var N=Math.sin(R),P=Math.cos(R);return w[0]=P,w[1]=0,w[2]=-N,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=N,w[9]=0,w[10]=P,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ke.fromZRotation=function(w,R){var N=Math.sin(R),P=Math.cos(R);return w[0]=P,w[1]=N,w[2]=0,w[3]=0,w[4]=-N,w[5]=P,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ke.fromRotationTranslation=l,ke.fromQuat2=function(w,R){var N=new e.ARRAY_TYPE(3),P=-R[0],D=-R[1],G=-R[2],oe=R[3],ce=R[4],Ae=R[5],Oe=R[6],ve=R[7],Fe=P*P+D*D+G*G+oe*oe;return Fe>0?(N[0]=2*(ce*oe+ve*P+Ae*G-Oe*D)/Fe,N[1]=2*(Ae*oe+ve*D+Oe*P-ce*G)/Fe,N[2]=2*(Oe*oe+ve*G+ce*D-Ae*P)/Fe):(N[0]=2*(ce*oe+ve*P+Ae*G-Oe*D),N[1]=2*(Ae*oe+ve*D+Oe*P-ce*G),N[2]=2*(Oe*oe+ve*G+ce*D-Ae*P)),l(w,R,N),w},ke.getTranslation=function(w,R){return w[0]=R[12],w[1]=R[13],w[2]=R[14],w},ke.getScaling=m,ke.getRotation=function(w,R){var N=new e.ARRAY_TYPE(3);m(N,R);var P=1/N[0],D=1/N[1],G=1/N[2],oe=R[0]*P,ce=R[1]*D,Ae=R[2]*G,Oe=R[4]*P,ve=R[5]*D,Fe=R[6]*G,Ye=R[8]*P,ct=R[9]*D,Kt=R[10]*G,Zt=oe+ve+Kt,Ut=0;return Zt>0?(Ut=2*Math.sqrt(Zt+1),w[3]=.25*Ut,w[0]=(Fe-ct)/Ut,w[1]=(Ye-Ae)/Ut,w[2]=(ce-Oe)/Ut):oe>ve&&oe>Kt?(Ut=2*Math.sqrt(1+oe-ve-Kt),w[3]=(Fe-ct)/Ut,w[0]=.25*Ut,w[1]=(ce+Oe)/Ut,w[2]=(Ye+Ae)/Ut):ve>Kt?(Ut=2*Math.sqrt(1+ve-oe-Kt),w[3]=(Ye-Ae)/Ut,w[0]=(ce+Oe)/Ut,w[1]=.25*Ut,w[2]=(Fe+ct)/Ut):(Ut=2*Math.sqrt(1+Kt-oe-ve),w[3]=(ce-Oe)/Ut,w[0]=(Ye+Ae)/Ut,w[1]=(Fe+ct)/Ut,w[2]=.25*Ut),w},ke.fromRotationTranslationScale=function(w,R,N,P){var D=R[0],G=R[1],oe=R[2],ce=R[3],Ae=D+D,Oe=G+G,ve=oe+oe,Fe=D*Ae,Ye=D*Oe,ct=D*ve,Kt=G*Oe,Zt=G*ve,Ut=oe*ve,En=ce*Ae,Yt=ce*Oe,Cn=ce*ve,Vn=P[0],zn=P[1],Zn=P[2];return w[0]=(1-(Kt+Ut))*Vn,w[1]=(Ye+Cn)*Vn,w[2]=(ct-Yt)*Vn,w[3]=0,w[4]=(Ye-Cn)*zn,w[5]=(1-(Fe+Ut))*zn,w[6]=(Zt+En)*zn,w[7]=0,w[8]=(ct+Yt)*Zn,w[9]=(Zt-En)*Zn,w[10]=(1-(Fe+Kt))*Zn,w[11]=0,w[12]=N[0],w[13]=N[1],w[14]=N[2],w[15]=1,w},ke.fromRotationTranslationScaleOrigin=function(w,R,N,P,D){var G=R[0],oe=R[1],ce=R[2],Ae=R[3],Oe=G+G,ve=oe+oe,Fe=ce+ce,Ye=G*Oe,ct=G*ve,Kt=G*Fe,Zt=oe*ve,Ut=oe*Fe,En=ce*Fe,Yt=Ae*Oe,Cn=Ae*ve,Vn=Ae*Fe,zn=P[0],Zn=P[1],qn=P[2],hr=D[0],Kn=D[1],Zr=D[2],si=(1-(Zt+En))*zn,Wr=(ct+Vn)*zn,zi=(Kt-Cn)*zn,yi=(ct-Vn)*Zn,vi=(1-(Ye+En))*Zn,li=(Ut+Yt)*Zn,lo=(Kt+Cn)*qn,ji=(Ut-Yt)*qn,Yi=(1-(Ye+Zt))*qn;return w[0]=si,w[1]=Wr,w[2]=zi,w[3]=0,w[4]=yi,w[5]=vi,w[6]=li,w[7]=0,w[8]=lo,w[9]=ji,w[10]=Yi,w[11]=0,w[12]=N[0]+hr-(si*hr+yi*Kn+lo*Zr),w[13]=N[1]+Kn-(Wr*hr+vi*Kn+ji*Zr),w[14]=N[2]+Zr-(zi*hr+li*Kn+Yi*Zr),w[15]=1,w},ke.fromQuat=function(w,R){var N=R[0],P=R[1],D=R[2],G=R[3],oe=N+N,ce=P+P,Ae=D+D,Oe=N*oe,ve=P*oe,Fe=P*ce,Ye=D*oe,ct=D*ce,Kt=D*Ae,Zt=G*oe,Ut=G*ce,En=G*Ae;return w[0]=1-Fe-Kt,w[1]=ve+En,w[2]=Ye-Ut,w[3]=0,w[4]=ve-En,w[5]=1-Oe-Kt,w[6]=ct+Zt,w[7]=0,w[8]=Ye+Ut,w[9]=ct-Zt,w[10]=1-Oe-Fe,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ke.frustum=function(w,R,N,P,D,G,oe){var ce=1/(N-R),Ae=1/(D-P),Oe=1/(G-oe);return w[0]=2*G*ce,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*G*Ae,w[6]=0,w[7]=0,w[8]=(N+R)*ce,w[9]=(D+P)*Ae,w[10]=(oe+G)*Oe,w[11]=-1,w[12]=0,w[13]=0,w[14]=oe*G*2*Oe,w[15]=0,w},ke.perspectiveNO=S,ke.perspectiveZO=function(w,R,N,P,D){var G,oe=1/Math.tan(R/2);return w[0]=oe/N,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=oe,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,D!=null&&D!==1/0?(w[10]=D*(G=1/(P-D)),w[14]=D*P*G):(w[10]=-1,w[14]=-P),w},ke.perspectiveFromFieldOfView=function(w,R,N,P){var D=Math.tan(R.upDegrees*Math.PI/180),G=Math.tan(R.downDegrees*Math.PI/180),oe=Math.tan(R.leftDegrees*Math.PI/180),ce=Math.tan(R.rightDegrees*Math.PI/180),Ae=2/(oe+ce),Oe=2/(D+G);return w[0]=Ae,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=Oe,w[6]=0,w[7]=0,w[8]=-(oe-ce)*Ae*.5,w[9]=(D-G)*Oe*.5,w[10]=P/(N-P),w[11]=-1,w[12]=0,w[13]=0,w[14]=P*N/(N-P),w[15]=0,w},ke.orthoNO=O,ke.orthoZO=function(w,R,N,P,D,G,oe){var ce=1/(R-N),Ae=1/(P-D),Oe=1/(G-oe);return w[0]=-2*ce,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*Ae,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=Oe,w[11]=0,w[12]=(R+N)*ce,w[13]=(D+P)*Ae,w[14]=G*Oe,w[15]=1,w},ke.lookAt=function(w,R,N,P){var D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt=R[0],Zt=R[1],Ut=R[2],En=P[0],Yt=P[1],Cn=P[2],Vn=N[0],zn=N[1],Zn=N[2];return Math.abs(Kt-Vn)<e.EPSILON&&Math.abs(Zt-zn)<e.EPSILON&&Math.abs(Ut-Zn)<e.EPSILON?s(w):(ve=Kt-Vn,Fe=Zt-zn,Ye=Ut-Zn,D=Yt*(Ye*=ct=1/Math.hypot(ve,Fe,Ye))-Cn*(Fe*=ct),G=Cn*(ve*=ct)-En*Ye,oe=En*Fe-Yt*ve,(ct=Math.hypot(D,G,oe))?(D*=ct=1/ct,G*=ct,oe*=ct):(D=0,G=0,oe=0),ce=Fe*oe-Ye*G,Ae=Ye*D-ve*oe,Oe=ve*G-Fe*D,(ct=Math.hypot(ce,Ae,Oe))?(ce*=ct=1/ct,Ae*=ct,Oe*=ct):(ce=0,Ae=0,Oe=0),w[0]=D,w[1]=ce,w[2]=ve,w[3]=0,w[4]=G,w[5]=Ae,w[6]=Fe,w[7]=0,w[8]=oe,w[9]=Oe,w[10]=Ye,w[11]=0,w[12]=-(D*Kt+G*Zt+oe*Ut),w[13]=-(ce*Kt+Ae*Zt+Oe*Ut),w[14]=-(ve*Kt+Fe*Zt+Ye*Ut),w[15]=1,w)},ke.targetTo=function(w,R,N,P){var D=R[0],G=R[1],oe=R[2],ce=P[0],Ae=P[1],Oe=P[2],ve=D-N[0],Fe=G-N[1],Ye=oe-N[2],ct=ve*ve+Fe*Fe+Ye*Ye;ct>0&&(ve*=ct=1/Math.sqrt(ct),Fe*=ct,Ye*=ct);var Kt=Ae*Ye-Oe*Fe,Zt=Oe*ve-ce*Ye,Ut=ce*Fe-Ae*ve;return(ct=Kt*Kt+Zt*Zt+Ut*Ut)>0&&(Kt*=ct=1/Math.sqrt(ct),Zt*=ct,Ut*=ct),w[0]=Kt,w[1]=Zt,w[2]=Ut,w[3]=0,w[4]=Fe*Ut-Ye*Zt,w[5]=Ye*Kt-ve*Ut,w[6]=ve*Zt-Fe*Kt,w[7]=0,w[8]=ve,w[9]=Fe,w[10]=Ye,w[11]=0,w[12]=D,w[13]=G,w[14]=oe,w[15]=1,w},ke.str=function(w){return"mat4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+", "+w[9]+", "+w[10]+", "+w[11]+", "+w[12]+", "+w[13]+", "+w[14]+", "+w[15]+")"},ke.frob=function(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])},ke.add=function(w,R,N){return w[0]=R[0]+N[0],w[1]=R[1]+N[1],w[2]=R[2]+N[2],w[3]=R[3]+N[3],w[4]=R[4]+N[4],w[5]=R[5]+N[5],w[6]=R[6]+N[6],w[7]=R[7]+N[7],w[8]=R[8]+N[8],w[9]=R[9]+N[9],w[10]=R[10]+N[10],w[11]=R[11]+N[11],w[12]=R[12]+N[12],w[13]=R[13]+N[13],w[14]=R[14]+N[14],w[15]=R[15]+N[15],w},ke.subtract=z,ke.multiplyScalar=function(w,R,N){return w[0]=R[0]*N,w[1]=R[1]*N,w[2]=R[2]*N,w[3]=R[3]*N,w[4]=R[4]*N,w[5]=R[5]*N,w[6]=R[6]*N,w[7]=R[7]*N,w[8]=R[8]*N,w[9]=R[9]*N,w[10]=R[10]*N,w[11]=R[11]*N,w[12]=R[12]*N,w[13]=R[13]*N,w[14]=R[14]*N,w[15]=R[15]*N,w},ke.multiplyScalarAndAdd=function(w,R,N,P){return w[0]=R[0]+N[0]*P,w[1]=R[1]+N[1]*P,w[2]=R[2]+N[2]*P,w[3]=R[3]+N[3]*P,w[4]=R[4]+N[4]*P,w[5]=R[5]+N[5]*P,w[6]=R[6]+N[6]*P,w[7]=R[7]+N[7]*P,w[8]=R[8]+N[8]*P,w[9]=R[9]+N[9]*P,w[10]=R[10]+N[10]*P,w[11]=R[11]+N[11]*P,w[12]=R[12]+N[12]*P,w[13]=R[13]+N[13]*P,w[14]=R[14]+N[14]*P,w[15]=R[15]+N[15]*P,w},ke.exactEquals=function(w,R){return w[0]===R[0]&&w[1]===R[1]&&w[2]===R[2]&&w[3]===R[3]&&w[4]===R[4]&&w[5]===R[5]&&w[6]===R[6]&&w[7]===R[7]&&w[8]===R[8]&&w[9]===R[9]&&w[10]===R[10]&&w[11]===R[11]&&w[12]===R[12]&&w[13]===R[13]&&w[14]===R[14]&&w[15]===R[15]},ke.equals=function(w,R){var N=w[0],P=w[1],D=w[2],G=w[3],oe=w[4],ce=w[5],Ae=w[6],Oe=w[7],ve=w[8],Fe=w[9],Ye=w[10],ct=w[11],Kt=w[12],Zt=w[13],Ut=w[14],En=w[15],Yt=R[0],Cn=R[1],Vn=R[2],zn=R[3],Zn=R[4],qn=R[5],hr=R[6],Kn=R[7],Zr=R[8],si=R[9],Wr=R[10],zi=R[11],yi=R[12],vi=R[13],li=R[14],lo=R[15];return Math.abs(N-Yt)<=e.EPSILON*Math.max(1,Math.abs(N),Math.abs(Yt))&&Math.abs(P-Cn)<=e.EPSILON*Math.max(1,Math.abs(P),Math.abs(Cn))&&Math.abs(D-Vn)<=e.EPSILON*Math.max(1,Math.abs(D),Math.abs(Vn))&&Math.abs(G-zn)<=e.EPSILON*Math.max(1,Math.abs(G),Math.abs(zn))&&Math.abs(oe-Zn)<=e.EPSILON*Math.max(1,Math.abs(oe),Math.abs(Zn))&&Math.abs(ce-qn)<=e.EPSILON*Math.max(1,Math.abs(ce),Math.abs(qn))&&Math.abs(Ae-hr)<=e.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(hr))&&Math.abs(Oe-Kn)<=e.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Kn))&&Math.abs(ve-Zr)<=e.EPSILON*Math.max(1,Math.abs(ve),Math.abs(Zr))&&Math.abs(Fe-si)<=e.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(si))&&Math.abs(Ye-Wr)<=e.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Wr))&&Math.abs(ct-zi)<=e.EPSILON*Math.max(1,Math.abs(ct),Math.abs(zi))&&Math.abs(Kt-yi)<=e.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(yi))&&Math.abs(Zt-vi)<=e.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(vi))&&Math.abs(Ut-li)<=e.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(li))&&Math.abs(En-lo)<=e.EPSILON*Math.max(1,Math.abs(En),Math.abs(lo))},ke.sub=ke.mul=ke.ortho=ke.perspective=void 0;var e=function(w,R){if(w&&w.__esModule)return w;if(w===null||a(w)!=="object"&&typeof w!="function")return{default:w};var N=r(void 0);if(N&&N.has(w))return N.get(w);var P={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in w)if(G!=="default"&&Object.prototype.hasOwnProperty.call(w,G)){var oe=D?Object.getOwnPropertyDescriptor(w,G):null;oe&&(oe.get||oe.set)?Object.defineProperty(P,G,oe):P[G]=w[G]}return P.default=w,N&&N.set(w,P),P}(te());function r(w){if(typeof WeakMap!="function")return null;var R=new WeakMap,N=new WeakMap;return(r=function(P){return P?N:R})(w)}function s(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function h(w,R,N){var P=R[0],D=R[1],G=R[2],oe=R[3],ce=R[4],Ae=R[5],Oe=R[6],ve=R[7],Fe=R[8],Ye=R[9],ct=R[10],Kt=R[11],Zt=R[12],Ut=R[13],En=R[14],Yt=R[15],Cn=N[0],Vn=N[1],zn=N[2],Zn=N[3];return w[0]=Cn*P+Vn*ce+zn*Fe+Zn*Zt,w[1]=Cn*D+Vn*Ae+zn*Ye+Zn*Ut,w[2]=Cn*G+Vn*Oe+zn*ct+Zn*En,w[3]=Cn*oe+Vn*ve+zn*Kt+Zn*Yt,w[4]=(Cn=N[4])*P+(Vn=N[5])*ce+(zn=N[6])*Fe+(Zn=N[7])*Zt,w[5]=Cn*D+Vn*Ae+zn*Ye+Zn*Ut,w[6]=Cn*G+Vn*Oe+zn*ct+Zn*En,w[7]=Cn*oe+Vn*ve+zn*Kt+Zn*Yt,w[8]=(Cn=N[8])*P+(Vn=N[9])*ce+(zn=N[10])*Fe+(Zn=N[11])*Zt,w[9]=Cn*D+Vn*Ae+zn*Ye+Zn*Ut,w[10]=Cn*G+Vn*Oe+zn*ct+Zn*En,w[11]=Cn*oe+Vn*ve+zn*Kt+Zn*Yt,w[12]=(Cn=N[12])*P+(Vn=N[13])*ce+(zn=N[14])*Fe+(Zn=N[15])*Zt,w[13]=Cn*D+Vn*Ae+zn*Ye+Zn*Ut,w[14]=Cn*G+Vn*Oe+zn*ct+Zn*En,w[15]=Cn*oe+Vn*ve+zn*Kt+Zn*Yt,w}function l(w,R,N){var P=R[0],D=R[1],G=R[2],oe=R[3],ce=P+P,Ae=D+D,Oe=G+G,ve=P*ce,Fe=P*Ae,Ye=P*Oe,ct=D*Ae,Kt=D*Oe,Zt=G*Oe,Ut=oe*ce,En=oe*Ae,Yt=oe*Oe;return w[0]=1-(ct+Zt),w[1]=Fe+Yt,w[2]=Ye-En,w[3]=0,w[4]=Fe-Yt,w[5]=1-(ve+Zt),w[6]=Kt+Ut,w[7]=0,w[8]=Ye+En,w[9]=Kt-Ut,w[10]=1-(ve+ct),w[11]=0,w[12]=N[0],w[13]=N[1],w[14]=N[2],w[15]=1,w}function m(w,R){var N=R[4],P=R[5],D=R[6],G=R[8],oe=R[9],ce=R[10];return w[0]=Math.hypot(R[0],R[1],R[2]),w[1]=Math.hypot(N,P,D),w[2]=Math.hypot(G,oe,ce),w}function S(w,R,N,P,D){var G,oe=1/Math.tan(R/2);return w[0]=oe/N,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=oe,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,D!=null&&D!==1/0?(w[10]=(D+P)*(G=1/(P-D)),w[14]=2*D*P*G):(w[10]=-1,w[14]=-2*P),w}function O(w,R,N,P,D,G,oe){var ce=1/(R-N),Ae=1/(P-D),Oe=1/(G-oe);return w[0]=-2*ce,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*Ae,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=2*Oe,w[11]=0,w[12]=(R+N)*ce,w[13]=(D+P)*Ae,w[14]=(oe+G)*Oe,w[15]=1,w}function z(w,R,N){return w[0]=R[0]-N[0],w[1]=R[1]-N[1],w[2]=R[2]-N[2],w[3]=R[3]-N[3],w[4]=R[4]-N[4],w[5]=R[5]-N[5],w[6]=R[6]-N[6],w[7]=R[7]-N[7],w[8]=R[8]-N[8],w[9]=R[9]-N[9],w[10]=R[10]-N[10],w[11]=R[11]-N[11],w[12]=R[12]-N[12],w[13]=R[13]-N[13],w[14]=R[14]-N[14],w[15]=R[15]-N[15],w}return ke.perspective=S,ke.ortho=O,ke.mul=h,ke.sub=z,ke}var Se,be={},Ue={};function qe(){if(Se)return Ue;function a(D){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},a(D)}Se=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.create=s,Ue.clone=function(D){var G=new e.ARRAY_TYPE(3);return G[0]=D[0],G[1]=D[1],G[2]=D[2],G},Ue.length=h,Ue.fromValues=function(D,G,oe){var ce=new e.ARRAY_TYPE(3);return ce[0]=D,ce[1]=G,ce[2]=oe,ce},Ue.copy=function(D,G){return D[0]=G[0],D[1]=G[1],D[2]=G[2],D},Ue.set=function(D,G,oe,ce){return D[0]=G,D[1]=oe,D[2]=ce,D},Ue.add=function(D,G,oe){return D[0]=G[0]+oe[0],D[1]=G[1]+oe[1],D[2]=G[2]+oe[2],D},Ue.subtract=l,Ue.multiply=m,Ue.divide=S,Ue.ceil=function(D,G){return D[0]=Math.ceil(G[0]),D[1]=Math.ceil(G[1]),D[2]=Math.ceil(G[2]),D},Ue.floor=function(D,G){return D[0]=Math.floor(G[0]),D[1]=Math.floor(G[1]),D[2]=Math.floor(G[2]),D},Ue.min=function(D,G,oe){return D[0]=Math.min(G[0],oe[0]),D[1]=Math.min(G[1],oe[1]),D[2]=Math.min(G[2],oe[2]),D},Ue.max=function(D,G,oe){return D[0]=Math.max(G[0],oe[0]),D[1]=Math.max(G[1],oe[1]),D[2]=Math.max(G[2],oe[2]),D},Ue.round=function(D,G){return D[0]=Math.round(G[0]),D[1]=Math.round(G[1]),D[2]=Math.round(G[2]),D},Ue.scale=function(D,G,oe){return D[0]=G[0]*oe,D[1]=G[1]*oe,D[2]=G[2]*oe,D},Ue.scaleAndAdd=function(D,G,oe,ce){return D[0]=G[0]+oe[0]*ce,D[1]=G[1]+oe[1]*ce,D[2]=G[2]+oe[2]*ce,D},Ue.distance=O,Ue.squaredDistance=z,Ue.squaredLength=w,Ue.negate=function(D,G){return D[0]=-G[0],D[1]=-G[1],D[2]=-G[2],D},Ue.inverse=function(D,G){return D[0]=1/G[0],D[1]=1/G[1],D[2]=1/G[2],D},Ue.normalize=function(D,G){var oe=G[0],ce=G[1],Ae=G[2],Oe=oe*oe+ce*ce+Ae*Ae;return Oe>0&&(Oe=1/Math.sqrt(Oe)),D[0]=G[0]*Oe,D[1]=G[1]*Oe,D[2]=G[2]*Oe,D},Ue.dot=R,Ue.cross=function(D,G,oe){var ce=G[0],Ae=G[1],Oe=G[2],ve=oe[0],Fe=oe[1],Ye=oe[2];return D[0]=Ae*Ye-Oe*Fe,D[1]=Oe*ve-ce*Ye,D[2]=ce*Fe-Ae*ve,D},Ue.lerp=function(D,G,oe,ce){var Ae=G[0],Oe=G[1],ve=G[2];return D[0]=Ae+ce*(oe[0]-Ae),D[1]=Oe+ce*(oe[1]-Oe),D[2]=ve+ce*(oe[2]-ve),D},Ue.hermite=function(D,G,oe,ce,Ae,Oe){var ve=Oe*Oe,Fe=ve*(2*Oe-3)+1,Ye=ve*(Oe-2)+Oe,ct=ve*(Oe-1),Kt=ve*(3-2*Oe);return D[0]=G[0]*Fe+oe[0]*Ye+ce[0]*ct+Ae[0]*Kt,D[1]=G[1]*Fe+oe[1]*Ye+ce[1]*ct+Ae[1]*Kt,D[2]=G[2]*Fe+oe[2]*Ye+ce[2]*ct+Ae[2]*Kt,D},Ue.bezier=function(D,G,oe,ce,Ae,Oe){var ve=1-Oe,Fe=ve*ve,Ye=Oe*Oe,ct=Fe*ve,Kt=3*Oe*Fe,Zt=3*Ye*ve,Ut=Ye*Oe;return D[0]=G[0]*ct+oe[0]*Kt+ce[0]*Zt+Ae[0]*Ut,D[1]=G[1]*ct+oe[1]*Kt+ce[1]*Zt+Ae[1]*Ut,D[2]=G[2]*ct+oe[2]*Kt+ce[2]*Zt+Ae[2]*Ut,D},Ue.random=function(D,G){G=G||1;var oe=2*e.RANDOM()*Math.PI,ce=2*e.RANDOM()-1,Ae=Math.sqrt(1-ce*ce)*G;return D[0]=Math.cos(oe)*Ae,D[1]=Math.sin(oe)*Ae,D[2]=ce*G,D},Ue.transformMat4=function(D,G,oe){var ce=G[0],Ae=G[1],Oe=G[2],ve=oe[3]*ce+oe[7]*Ae+oe[11]*Oe+oe[15];return D[0]=(oe[0]*ce+oe[4]*Ae+oe[8]*Oe+oe[12])/(ve=ve||1),D[1]=(oe[1]*ce+oe[5]*Ae+oe[9]*Oe+oe[13])/ve,D[2]=(oe[2]*ce+oe[6]*Ae+oe[10]*Oe+oe[14])/ve,D},Ue.transformMat3=function(D,G,oe){var ce=G[0],Ae=G[1],Oe=G[2];return D[0]=ce*oe[0]+Ae*oe[3]+Oe*oe[6],D[1]=ce*oe[1]+Ae*oe[4]+Oe*oe[7],D[2]=ce*oe[2]+Ae*oe[5]+Oe*oe[8],D},Ue.transformQuat=function(D,G,oe){var ce=oe[0],Ae=oe[1],Oe=oe[2],ve=G[0],Fe=G[1],Ye=G[2],ct=Ae*Ye-Oe*Fe,Kt=Oe*ve-ce*Ye,Zt=ce*Fe-Ae*ve,Ut=Ae*Zt-Oe*Kt,En=Oe*ct-ce*Zt,Yt=ce*Kt-Ae*ct,Cn=2*oe[3];return Kt*=Cn,Zt*=Cn,En*=2,Yt*=2,D[0]=ve+(ct*=Cn)+(Ut*=2),D[1]=Fe+Kt+En,D[2]=Ye+Zt+Yt,D},Ue.rotateX=function(D,G,oe,ce){var Ae=[],Oe=[];return Ae[0]=G[0]-oe[0],Ae[1]=G[1]-oe[1],Ae[2]=G[2]-oe[2],Oe[0]=Ae[0],Oe[1]=Ae[1]*Math.cos(ce)-Ae[2]*Math.sin(ce),Oe[2]=Ae[1]*Math.sin(ce)+Ae[2]*Math.cos(ce),D[0]=Oe[0]+oe[0],D[1]=Oe[1]+oe[1],D[2]=Oe[2]+oe[2],D},Ue.rotateY=function(D,G,oe,ce){var Ae=[],Oe=[];return Ae[0]=G[0]-oe[0],Ae[1]=G[1]-oe[1],Ae[2]=G[2]-oe[2],Oe[0]=Ae[2]*Math.sin(ce)+Ae[0]*Math.cos(ce),Oe[1]=Ae[1],Oe[2]=Ae[2]*Math.cos(ce)-Ae[0]*Math.sin(ce),D[0]=Oe[0]+oe[0],D[1]=Oe[1]+oe[1],D[2]=Oe[2]+oe[2],D},Ue.rotateZ=function(D,G,oe,ce){var Ae=[],Oe=[];return Ae[0]=G[0]-oe[0],Ae[1]=G[1]-oe[1],Ae[2]=G[2]-oe[2],Oe[0]=Ae[0]*Math.cos(ce)-Ae[1]*Math.sin(ce),Oe[1]=Ae[0]*Math.sin(ce)+Ae[1]*Math.cos(ce),Oe[2]=Ae[2],D[0]=Oe[0]+oe[0],D[1]=Oe[1]+oe[1],D[2]=Oe[2]+oe[2],D},Ue.angle=function(D,G){var oe=D[0],ce=D[1],Ae=D[2],Oe=G[0],ve=G[1],Fe=G[2],Ye=Math.sqrt(oe*oe+ce*ce+Ae*Ae)*Math.sqrt(Oe*Oe+ve*ve+Fe*Fe),ct=Ye&&R(D,G)/Ye;return Math.acos(Math.min(Math.max(ct,-1),1))},Ue.zero=function(D){return D[0]=0,D[1]=0,D[2]=0,D},Ue.str=function(D){return"vec3("+D[0]+", "+D[1]+", "+D[2]+")"},Ue.exactEquals=function(D,G){return D[0]===G[0]&&D[1]===G[1]&&D[2]===G[2]},Ue.equals=function(D,G){var oe=D[0],ce=D[1],Ae=D[2],Oe=G[0],ve=G[1],Fe=G[2];return Math.abs(oe-Oe)<=e.EPSILON*Math.max(1,Math.abs(oe),Math.abs(Oe))&&Math.abs(ce-ve)<=e.EPSILON*Math.max(1,Math.abs(ce),Math.abs(ve))&&Math.abs(Ae-Fe)<=e.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(Fe))},Ue.forEach=Ue.sqrLen=Ue.len=Ue.sqrDist=Ue.dist=Ue.div=Ue.mul=Ue.sub=void 0;var e=function(D,G){if(D&&D.__esModule)return D;if(D===null||a(D)!=="object"&&typeof D!="function")return{default:D};var oe=r(void 0);if(oe&&oe.has(D))return oe.get(D);var ce={},Ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Oe in D)if(Oe!=="default"&&Object.prototype.hasOwnProperty.call(D,Oe)){var ve=Ae?Object.getOwnPropertyDescriptor(D,Oe):null;ve&&(ve.get||ve.set)?Object.defineProperty(ce,Oe,ve):ce[Oe]=D[Oe]}return ce.default=D,oe&&oe.set(D,ce),ce}(te());function r(D){if(typeof WeakMap!="function")return null;var G=new WeakMap,oe=new WeakMap;return(r=function(ce){return ce?oe:G})(D)}function s(){var D=new e.ARRAY_TYPE(3);return e.ARRAY_TYPE!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0),D}function h(D){return Math.hypot(D[0],D[1],D[2])}function l(D,G,oe){return D[0]=G[0]-oe[0],D[1]=G[1]-oe[1],D[2]=G[2]-oe[2],D}function m(D,G,oe){return D[0]=G[0]*oe[0],D[1]=G[1]*oe[1],D[2]=G[2]*oe[2],D}function S(D,G,oe){return D[0]=G[0]/oe[0],D[1]=G[1]/oe[1],D[2]=G[2]/oe[2],D}function O(D,G){return Math.hypot(G[0]-D[0],G[1]-D[1],G[2]-D[2])}function z(D,G){var oe=G[0]-D[0],ce=G[1]-D[1],Ae=G[2]-D[2];return oe*oe+ce*ce+Ae*Ae}function w(D){var G=D[0],oe=D[1],ce=D[2];return G*G+oe*oe+ce*ce}function R(D,G){return D[0]*G[0]+D[1]*G[1]+D[2]*G[2]}Ue.sub=l,Ue.mul=m,Ue.div=S,Ue.dist=O,Ue.sqrDist=z,Ue.len=h,Ue.sqrLen=w;var N,P=(N=s(),function(D,G,oe,ce,Ae,Oe){var ve,Fe;for(G||(G=3),oe||(oe=0),Fe=ce?Math.min(ce*G+oe,D.length):D.length,ve=oe;ve<Fe;ve+=G)N[0]=D[ve],N[1]=D[ve+1],N[2]=D[ve+2],Ae(N,N,Oe),D[ve]=N[0],D[ve+1]=N[1],D[ve+2]=N[2];return D});return Ue.forEach=P,Ue}var je,nt,Ct={};function ft(){if(je)return Ct;function a(P){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},a(P)}je=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.create=s,Ct.clone=function(P){var D=new e.ARRAY_TYPE(4);return D[0]=P[0],D[1]=P[1],D[2]=P[2],D[3]=P[3],D},Ct.fromValues=function(P,D,G,oe){var ce=new e.ARRAY_TYPE(4);return ce[0]=P,ce[1]=D,ce[2]=G,ce[3]=oe,ce},Ct.copy=function(P,D){return P[0]=D[0],P[1]=D[1],P[2]=D[2],P[3]=D[3],P},Ct.set=function(P,D,G,oe,ce){return P[0]=D,P[1]=G,P[2]=oe,P[3]=ce,P},Ct.add=function(P,D,G){return P[0]=D[0]+G[0],P[1]=D[1]+G[1],P[2]=D[2]+G[2],P[3]=D[3]+G[3],P},Ct.subtract=h,Ct.multiply=l,Ct.divide=m,Ct.ceil=function(P,D){return P[0]=Math.ceil(D[0]),P[1]=Math.ceil(D[1]),P[2]=Math.ceil(D[2]),P[3]=Math.ceil(D[3]),P},Ct.floor=function(P,D){return P[0]=Math.floor(D[0]),P[1]=Math.floor(D[1]),P[2]=Math.floor(D[2]),P[3]=Math.floor(D[3]),P},Ct.min=function(P,D,G){return P[0]=Math.min(D[0],G[0]),P[1]=Math.min(D[1],G[1]),P[2]=Math.min(D[2],G[2]),P[3]=Math.min(D[3],G[3]),P},Ct.max=function(P,D,G){return P[0]=Math.max(D[0],G[0]),P[1]=Math.max(D[1],G[1]),P[2]=Math.max(D[2],G[2]),P[3]=Math.max(D[3],G[3]),P},Ct.round=function(P,D){return P[0]=Math.round(D[0]),P[1]=Math.round(D[1]),P[2]=Math.round(D[2]),P[3]=Math.round(D[3]),P},Ct.scale=function(P,D,G){return P[0]=D[0]*G,P[1]=D[1]*G,P[2]=D[2]*G,P[3]=D[3]*G,P},Ct.scaleAndAdd=function(P,D,G,oe){return P[0]=D[0]+G[0]*oe,P[1]=D[1]+G[1]*oe,P[2]=D[2]+G[2]*oe,P[3]=D[3]+G[3]*oe,P},Ct.distance=S,Ct.squaredDistance=O,Ct.length=z,Ct.squaredLength=w,Ct.negate=function(P,D){return P[0]=-D[0],P[1]=-D[1],P[2]=-D[2],P[3]=-D[3],P},Ct.inverse=function(P,D){return P[0]=1/D[0],P[1]=1/D[1],P[2]=1/D[2],P[3]=1/D[3],P},Ct.normalize=function(P,D){var G=D[0],oe=D[1],ce=D[2],Ae=D[3],Oe=G*G+oe*oe+ce*ce+Ae*Ae;return Oe>0&&(Oe=1/Math.sqrt(Oe)),P[0]=G*Oe,P[1]=oe*Oe,P[2]=ce*Oe,P[3]=Ae*Oe,P},Ct.dot=function(P,D){return P[0]*D[0]+P[1]*D[1]+P[2]*D[2]+P[3]*D[3]},Ct.cross=function(P,D,G,oe){var ce=G[0]*oe[1]-G[1]*oe[0],Ae=G[0]*oe[2]-G[2]*oe[0],Oe=G[0]*oe[3]-G[3]*oe[0],ve=G[1]*oe[2]-G[2]*oe[1],Fe=G[1]*oe[3]-G[3]*oe[1],Ye=G[2]*oe[3]-G[3]*oe[2],ct=D[0],Kt=D[1],Zt=D[2],Ut=D[3];return P[0]=Kt*Ye-Zt*Fe+Ut*ve,P[1]=-ct*Ye+Zt*Oe-Ut*Ae,P[2]=ct*Fe-Kt*Oe+Ut*ce,P[3]=-ct*ve+Kt*Ae-Zt*ce,P},Ct.lerp=function(P,D,G,oe){var ce=D[0],Ae=D[1],Oe=D[2],ve=D[3];return P[0]=ce+oe*(G[0]-ce),P[1]=Ae+oe*(G[1]-Ae),P[2]=Oe+oe*(G[2]-Oe),P[3]=ve+oe*(G[3]-ve),P},Ct.random=function(P,D){var G,oe,ce,Ae,Oe,ve;D=D||1;do Oe=(G=2*e.RANDOM()-1)*G+(oe=2*e.RANDOM()-1)*oe;while(Oe>=1);do ve=(ce=2*e.RANDOM()-1)*ce+(Ae=2*e.RANDOM()-1)*Ae;while(ve>=1);var Fe=Math.sqrt((1-Oe)/ve);return P[0]=D*G,P[1]=D*oe,P[2]=D*ce*Fe,P[3]=D*Ae*Fe,P},Ct.transformMat4=function(P,D,G){var oe=D[0],ce=D[1],Ae=D[2],Oe=D[3];return P[0]=G[0]*oe+G[4]*ce+G[8]*Ae+G[12]*Oe,P[1]=G[1]*oe+G[5]*ce+G[9]*Ae+G[13]*Oe,P[2]=G[2]*oe+G[6]*ce+G[10]*Ae+G[14]*Oe,P[3]=G[3]*oe+G[7]*ce+G[11]*Ae+G[15]*Oe,P},Ct.transformQuat=function(P,D,G){var oe=D[0],ce=D[1],Ae=D[2],Oe=G[0],ve=G[1],Fe=G[2],Ye=G[3],ct=Ye*oe+ve*Ae-Fe*ce,Kt=Ye*ce+Fe*oe-Oe*Ae,Zt=Ye*Ae+Oe*ce-ve*oe,Ut=-Oe*oe-ve*ce-Fe*Ae;return P[0]=ct*Ye+Ut*-Oe+Kt*-Fe-Zt*-ve,P[1]=Kt*Ye+Ut*-ve+Zt*-Oe-ct*-Fe,P[2]=Zt*Ye+Ut*-Fe+ct*-ve-Kt*-Oe,P[3]=D[3],P},Ct.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=0,P},Ct.str=function(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},Ct.exactEquals=function(P,D){return P[0]===D[0]&&P[1]===D[1]&&P[2]===D[2]&&P[3]===D[3]},Ct.equals=function(P,D){var G=P[0],oe=P[1],ce=P[2],Ae=P[3],Oe=D[0],ve=D[1],Fe=D[2],Ye=D[3];return Math.abs(G-Oe)<=e.EPSILON*Math.max(1,Math.abs(G),Math.abs(Oe))&&Math.abs(oe-ve)<=e.EPSILON*Math.max(1,Math.abs(oe),Math.abs(ve))&&Math.abs(ce-Fe)<=e.EPSILON*Math.max(1,Math.abs(ce),Math.abs(Fe))&&Math.abs(Ae-Ye)<=e.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(Ye))},Ct.forEach=Ct.sqrLen=Ct.len=Ct.sqrDist=Ct.dist=Ct.div=Ct.mul=Ct.sub=void 0;var e=function(P,D){if(P&&P.__esModule)return P;if(P===null||a(P)!=="object"&&typeof P!="function")return{default:P};var G=r(void 0);if(G&&G.has(P))return G.get(P);var oe={},ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in P)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call(P,Ae)){var Oe=ce?Object.getOwnPropertyDescriptor(P,Ae):null;Oe&&(Oe.get||Oe.set)?Object.defineProperty(oe,Ae,Oe):oe[Ae]=P[Ae]}return oe.default=P,G&&G.set(P,oe),oe}(te());function r(P){if(typeof WeakMap!="function")return null;var D=new WeakMap,G=new WeakMap;return(r=function(oe){return oe?G:D})(P)}function s(){var P=new e.ARRAY_TYPE(4);return e.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0),P}function h(P,D,G){return P[0]=D[0]-G[0],P[1]=D[1]-G[1],P[2]=D[2]-G[2],P[3]=D[3]-G[3],P}function l(P,D,G){return P[0]=D[0]*G[0],P[1]=D[1]*G[1],P[2]=D[2]*G[2],P[3]=D[3]*G[3],P}function m(P,D,G){return P[0]=D[0]/G[0],P[1]=D[1]/G[1],P[2]=D[2]/G[2],P[3]=D[3]/G[3],P}function S(P,D){return Math.hypot(D[0]-P[0],D[1]-P[1],D[2]-P[2],D[3]-P[3])}function O(P,D){var G=D[0]-P[0],oe=D[1]-P[1],ce=D[2]-P[2],Ae=D[3]-P[3];return G*G+oe*oe+ce*ce+Ae*Ae}function z(P){return Math.hypot(P[0],P[1],P[2],P[3])}function w(P){var D=P[0],G=P[1],oe=P[2],ce=P[3];return D*D+G*G+oe*oe+ce*ce}Ct.sub=h,Ct.mul=l,Ct.div=m,Ct.dist=S,Ct.sqrDist=O,Ct.len=z,Ct.sqrLen=w;var R,N=(R=s(),function(P,D,G,oe,ce,Ae){var Oe,ve;for(D||(D=4),G||(G=0),ve=oe?Math.min(oe*D+G,P.length):P.length,Oe=G;Oe<ve;Oe+=D)R[0]=P[Oe],R[1]=P[Oe+1],R[2]=P[Oe+2],R[3]=P[Oe+3],ce(R,R,Ae),P[Oe]=R[0],P[Oe+1]=R[1],P[Oe+2]=R[2],P[Oe+3]=R[3];return P});return Ct.forEach=N,Ct}function Et(){if(nt)return be;function a(Yt){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Cn){return typeof Cn}:function(Cn){return Cn&&typeof Symbol=="function"&&Cn.constructor===Symbol&&Cn!==Symbol.prototype?"symbol":typeof Cn},a(Yt)}nt=1,Object.defineProperty(be,"__esModule",{value:!0}),be.create=S,be.identity=function(Yt){return Yt[0]=0,Yt[1]=0,Yt[2]=0,Yt[3]=1,Yt},be.setAxisAngle=O,be.getAxisAngle=function(Yt,Cn){var Vn=2*Math.acos(Cn[3]),zn=Math.sin(Vn/2);return zn>e.EPSILON?(Yt[0]=Cn[0]/zn,Yt[1]=Cn[1]/zn,Yt[2]=Cn[2]/zn):(Yt[0]=1,Yt[1]=0,Yt[2]=0),Vn},be.getAngle=function(Yt,Cn){var Vn=G(Yt,Cn);return Math.acos(2*Vn*Vn-1)},be.multiply=z,be.rotateX=function(Yt,Cn,Vn){Vn*=.5;var zn=Cn[0],Zn=Cn[1],qn=Cn[2],hr=Cn[3],Kn=Math.sin(Vn),Zr=Math.cos(Vn);return Yt[0]=zn*Zr+hr*Kn,Yt[1]=Zn*Zr+qn*Kn,Yt[2]=qn*Zr-Zn*Kn,Yt[3]=hr*Zr-zn*Kn,Yt},be.rotateY=function(Yt,Cn,Vn){Vn*=.5;var zn=Cn[0],Zn=Cn[1],qn=Cn[2],hr=Cn[3],Kn=Math.sin(Vn),Zr=Math.cos(Vn);return Yt[0]=zn*Zr-qn*Kn,Yt[1]=Zn*Zr+hr*Kn,Yt[2]=qn*Zr+zn*Kn,Yt[3]=hr*Zr-Zn*Kn,Yt},be.rotateZ=function(Yt,Cn,Vn){Vn*=.5;var zn=Cn[0],Zn=Cn[1],qn=Cn[2],hr=Cn[3],Kn=Math.sin(Vn),Zr=Math.cos(Vn);return Yt[0]=zn*Zr+Zn*Kn,Yt[1]=Zn*Zr-zn*Kn,Yt[2]=qn*Zr+hr*Kn,Yt[3]=hr*Zr-qn*Kn,Yt},be.calculateW=function(Yt,Cn){var Vn=Cn[0],zn=Cn[1],Zn=Cn[2];return Yt[0]=Vn,Yt[1]=zn,Yt[2]=Zn,Yt[3]=Math.sqrt(Math.abs(1-Vn*Vn-zn*zn-Zn*Zn)),Yt},be.exp=w,be.ln=R,be.pow=function(Yt,Cn,Vn){return R(Yt,Cn),D(Yt,Yt,Vn),w(Yt,Yt),Yt},be.slerp=N,be.random=function(Yt){var Cn=e.RANDOM(),Vn=e.RANDOM(),zn=e.RANDOM(),Zn=Math.sqrt(1-Cn),qn=Math.sqrt(Cn);return Yt[0]=Zn*Math.sin(2*Math.PI*Vn),Yt[1]=Zn*Math.cos(2*Math.PI*Vn),Yt[2]=qn*Math.sin(2*Math.PI*zn),Yt[3]=qn*Math.cos(2*Math.PI*zn),Yt},be.invert=function(Yt,Cn){var Vn=Cn[0],zn=Cn[1],Zn=Cn[2],qn=Cn[3],hr=Vn*Vn+zn*zn+Zn*Zn+qn*qn,Kn=hr?1/hr:0;return Yt[0]=-Vn*Kn,Yt[1]=-zn*Kn,Yt[2]=-Zn*Kn,Yt[3]=qn*Kn,Yt},be.conjugate=function(Yt,Cn){return Yt[0]=-Cn[0],Yt[1]=-Cn[1],Yt[2]=-Cn[2],Yt[3]=Cn[3],Yt},be.fromMat3=P,be.fromEuler=function(Yt,Cn,Vn,zn){var Zn=.5*Math.PI/180;Cn*=Zn,Vn*=Zn,zn*=Zn;var qn=Math.sin(Cn),hr=Math.cos(Cn),Kn=Math.sin(Vn),Zr=Math.cos(Vn),si=Math.sin(zn),Wr=Math.cos(zn);return Yt[0]=qn*Zr*Wr-hr*Kn*si,Yt[1]=hr*Kn*Wr+qn*Zr*si,Yt[2]=hr*Zr*si-qn*Kn*Wr,Yt[3]=hr*Zr*Wr+qn*Kn*si,Yt},be.str=function(Yt){return"quat("+Yt[0]+", "+Yt[1]+", "+Yt[2]+", "+Yt[3]+")"},be.setAxes=be.sqlerp=be.rotationTo=be.equals=be.exactEquals=be.normalize=be.sqrLen=be.squaredLength=be.len=be.length=be.lerp=be.dot=be.scale=be.mul=be.add=be.set=be.copy=be.fromValues=be.clone=void 0;var e=m(te()),r=m(Ee()),s=m(qe()),h=m(ft());function l(Yt){if(typeof WeakMap!="function")return null;var Cn=new WeakMap,Vn=new WeakMap;return(l=function(zn){return zn?Vn:Cn})(Yt)}function m(Yt,Cn){if(Yt&&Yt.__esModule)return Yt;if(Yt===null||a(Yt)!=="object"&&typeof Yt!="function")return{default:Yt};var Vn=l(Cn);if(Vn&&Vn.has(Yt))return Vn.get(Yt);var zn={},Zn=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var qn in Yt)if(qn!=="default"&&Object.prototype.hasOwnProperty.call(Yt,qn)){var hr=Zn?Object.getOwnPropertyDescriptor(Yt,qn):null;hr&&(hr.get||hr.set)?Object.defineProperty(zn,qn,hr):zn[qn]=Yt[qn]}return zn.default=Yt,Vn&&Vn.set(Yt,zn),zn}function S(){var Yt=new e.ARRAY_TYPE(4);return e.ARRAY_TYPE!=Float32Array&&(Yt[0]=0,Yt[1]=0,Yt[2]=0),Yt[3]=1,Yt}function O(Yt,Cn,Vn){Vn*=.5;var zn=Math.sin(Vn);return Yt[0]=zn*Cn[0],Yt[1]=zn*Cn[1],Yt[2]=zn*Cn[2],Yt[3]=Math.cos(Vn),Yt}function z(Yt,Cn,Vn){var zn=Cn[0],Zn=Cn[1],qn=Cn[2],hr=Cn[3],Kn=Vn[0],Zr=Vn[1],si=Vn[2],Wr=Vn[3];return Yt[0]=zn*Wr+hr*Kn+Zn*si-qn*Zr,Yt[1]=Zn*Wr+hr*Zr+qn*Kn-zn*si,Yt[2]=qn*Wr+hr*si+zn*Zr-Zn*Kn,Yt[3]=hr*Wr-zn*Kn-Zn*Zr-qn*si,Yt}function w(Yt,Cn){var Vn=Cn[0],zn=Cn[1],Zn=Cn[2],qn=Cn[3],hr=Math.sqrt(Vn*Vn+zn*zn+Zn*Zn),Kn=Math.exp(qn),Zr=hr>0?Kn*Math.sin(hr)/hr:0;return Yt[0]=Vn*Zr,Yt[1]=zn*Zr,Yt[2]=Zn*Zr,Yt[3]=Kn*Math.cos(hr),Yt}function R(Yt,Cn){var Vn=Cn[0],zn=Cn[1],Zn=Cn[2],qn=Cn[3],hr=Math.sqrt(Vn*Vn+zn*zn+Zn*Zn),Kn=hr>0?Math.atan2(hr,qn)/hr:0;return Yt[0]=Vn*Kn,Yt[1]=zn*Kn,Yt[2]=Zn*Kn,Yt[3]=.5*Math.log(Vn*Vn+zn*zn+Zn*Zn+qn*qn),Yt}function N(Yt,Cn,Vn,zn){var Zn,qn,hr,Kn,Zr,si=Cn[0],Wr=Cn[1],zi=Cn[2],yi=Cn[3],vi=Vn[0],li=Vn[1],lo=Vn[2],ji=Vn[3];return(qn=si*vi+Wr*li+zi*lo+yi*ji)<0&&(qn=-qn,vi=-vi,li=-li,lo=-lo,ji=-ji),1-qn>e.EPSILON?(Zn=Math.acos(qn),hr=Math.sin(Zn),Kn=Math.sin((1-zn)*Zn)/hr,Zr=Math.sin(zn*Zn)/hr):(Kn=1-zn,Zr=zn),Yt[0]=Kn*si+Zr*vi,Yt[1]=Kn*Wr+Zr*li,Yt[2]=Kn*zi+Zr*lo,Yt[3]=Kn*yi+Zr*ji,Yt}function P(Yt,Cn){var Vn,zn=Cn[0]+Cn[4]+Cn[8];if(zn>0)Vn=Math.sqrt(zn+1),Yt[3]=.5*Vn,Yt[0]=(Cn[5]-Cn[7])*(Vn=.5/Vn),Yt[1]=(Cn[6]-Cn[2])*Vn,Yt[2]=(Cn[1]-Cn[3])*Vn;else{var Zn=0;Cn[4]>Cn[0]&&(Zn=1),Cn[8]>Cn[3*Zn+Zn]&&(Zn=2);var qn=(Zn+1)%3,hr=(Zn+2)%3;Vn=Math.sqrt(Cn[3*Zn+Zn]-Cn[3*qn+qn]-Cn[3*hr+hr]+1),Yt[Zn]=.5*Vn,Yt[3]=(Cn[3*qn+hr]-Cn[3*hr+qn])*(Vn=.5/Vn),Yt[qn]=(Cn[3*qn+Zn]+Cn[3*Zn+qn])*Vn,Yt[hr]=(Cn[3*hr+Zn]+Cn[3*Zn+hr])*Vn}return Yt}be.clone=h.clone,be.fromValues=h.fromValues,be.copy=h.copy,be.set=h.set,be.add=h.add,be.mul=z;var D=h.scale;be.scale=D;var G=h.dot;be.dot=G,be.lerp=h.lerp;var oe=h.length;be.length=oe,be.len=oe;var ce=h.squaredLength;be.squaredLength=ce,be.sqrLen=ce;var Ae=h.normalize;be.normalize=Ae,be.exactEquals=h.exactEquals,be.equals=h.equals;var Oe,ve,Fe,Ye=(Oe=s.create(),ve=s.fromValues(1,0,0),Fe=s.fromValues(0,1,0),function(Yt,Cn,Vn){var zn=s.dot(Cn,Vn);return zn<-.999999?(s.cross(Oe,ve,Cn),s.len(Oe)<1e-6&&s.cross(Oe,Fe,Cn),s.normalize(Oe,Oe),O(Yt,Oe,Math.PI),Yt):zn>.999999?(Yt[0]=0,Yt[1]=0,Yt[2]=0,Yt[3]=1,Yt):(s.cross(Oe,Cn,Vn),Yt[0]=Oe[0],Yt[1]=Oe[1],Yt[2]=Oe[2],Yt[3]=1+zn,Ae(Yt,Yt))});be.rotationTo=Ye;var ct,Kt,Zt=(ct=S(),Kt=S(),function(Yt,Cn,Vn,zn,Zn,qn){return N(ct,Cn,Zn,qn),N(Kt,Vn,zn,qn),N(Yt,ct,Kt,2*qn*(1-qn)),Yt});be.sqlerp=Zt;var Ut,En=(Ut=r.create(),function(Yt,Cn,Vn,zn){return Ut[0]=Vn[0],Ut[3]=Vn[1],Ut[6]=Vn[2],Ut[1]=zn[0],Ut[4]=zn[1],Ut[7]=zn[2],Ut[2]=-Cn[0],Ut[5]=-Cn[1],Ut[8]=-Cn[2],Ae(Yt,P(Yt,Ut))});return be.setAxes=En,be}var yt,_t={};function He(){if(yt)return _t;function a(N){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},a(N)}yt=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.create=function(){var N=new e.ARRAY_TYPE(8);return e.ARRAY_TYPE!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0,N[4]=0,N[5]=0,N[6]=0,N[7]=0),N[3]=1,N},_t.clone=function(N){var P=new e.ARRAY_TYPE(8);return P[0]=N[0],P[1]=N[1],P[2]=N[2],P[3]=N[3],P[4]=N[4],P[5]=N[5],P[6]=N[6],P[7]=N[7],P},_t.fromValues=function(N,P,D,G,oe,ce,Ae,Oe){var ve=new e.ARRAY_TYPE(8);return ve[0]=N,ve[1]=P,ve[2]=D,ve[3]=G,ve[4]=oe,ve[5]=ce,ve[6]=Ae,ve[7]=Oe,ve},_t.fromRotationTranslationValues=function(N,P,D,G,oe,ce,Ae){var Oe=new e.ARRAY_TYPE(8);Oe[0]=N,Oe[1]=P,Oe[2]=D,Oe[3]=G;var ve=.5*oe,Fe=.5*ce,Ye=.5*Ae;return Oe[4]=ve*G+Fe*D-Ye*P,Oe[5]=Fe*G+Ye*N-ve*D,Oe[6]=Ye*G+ve*P-Fe*N,Oe[7]=-ve*N-Fe*P-Ye*D,Oe},_t.fromRotationTranslation=m,_t.fromTranslation=function(N,P){return N[0]=0,N[1]=0,N[2]=0,N[3]=1,N[4]=.5*P[0],N[5]=.5*P[1],N[6]=.5*P[2],N[7]=0,N},_t.fromRotation=function(N,P){return N[0]=P[0],N[1]=P[1],N[2]=P[2],N[3]=P[3],N[4]=0,N[5]=0,N[6]=0,N[7]=0,N},_t.fromMat4=function(N,P){var D=r.create();s.getRotation(D,P);var G=new e.ARRAY_TYPE(3);return s.getTranslation(G,P),m(N,D,G),N},_t.copy=S,_t.identity=function(N){return N[0]=0,N[1]=0,N[2]=0,N[3]=1,N[4]=0,N[5]=0,N[6]=0,N[7]=0,N},_t.set=function(N,P,D,G,oe,ce,Ae,Oe,ve){return N[0]=P,N[1]=D,N[2]=G,N[3]=oe,N[4]=ce,N[5]=Ae,N[6]=Oe,N[7]=ve,N},_t.getDual=function(N,P){return N[0]=P[4],N[1]=P[5],N[2]=P[6],N[3]=P[7],N},_t.setDual=function(N,P){return N[4]=P[0],N[5]=P[1],N[6]=P[2],N[7]=P[3],N},_t.getTranslation=function(N,P){var D=P[4],G=P[5],oe=P[6],ce=P[7],Ae=-P[0],Oe=-P[1],ve=-P[2],Fe=P[3];return N[0]=2*(D*Fe+ce*Ae+G*ve-oe*Oe),N[1]=2*(G*Fe+ce*Oe+oe*Ae-D*ve),N[2]=2*(oe*Fe+ce*ve+D*Oe-G*Ae),N},_t.translate=function(N,P,D){var G=P[0],oe=P[1],ce=P[2],Ae=P[3],Oe=.5*D[0],ve=.5*D[1],Fe=.5*D[2],Ye=P[4],ct=P[5],Kt=P[6],Zt=P[7];return N[0]=G,N[1]=oe,N[2]=ce,N[3]=Ae,N[4]=Ae*Oe+oe*Fe-ce*ve+Ye,N[5]=Ae*ve+ce*Oe-G*Fe+ct,N[6]=Ae*Fe+G*ve-oe*Oe+Kt,N[7]=-G*Oe-oe*ve-ce*Fe+Zt,N},_t.rotateX=function(N,P,D){var G=-P[0],oe=-P[1],ce=-P[2],Ae=P[3],Oe=P[4],ve=P[5],Fe=P[6],Ye=P[7],ct=Oe*Ae+Ye*G+ve*ce-Fe*oe,Kt=ve*Ae+Ye*oe+Fe*G-Oe*ce,Zt=Fe*Ae+Ye*ce+Oe*oe-ve*G,Ut=Ye*Ae-Oe*G-ve*oe-Fe*ce;return r.rotateX(N,P,D),N[4]=ct*(Ae=N[3])+Ut*(G=N[0])+Kt*(ce=N[2])-Zt*(oe=N[1]),N[5]=Kt*Ae+Ut*oe+Zt*G-ct*ce,N[6]=Zt*Ae+Ut*ce+ct*oe-Kt*G,N[7]=Ut*Ae-ct*G-Kt*oe-Zt*ce,N},_t.rotateY=function(N,P,D){var G=-P[0],oe=-P[1],ce=-P[2],Ae=P[3],Oe=P[4],ve=P[5],Fe=P[6],Ye=P[7],ct=Oe*Ae+Ye*G+ve*ce-Fe*oe,Kt=ve*Ae+Ye*oe+Fe*G-Oe*ce,Zt=Fe*Ae+Ye*ce+Oe*oe-ve*G,Ut=Ye*Ae-Oe*G-ve*oe-Fe*ce;return r.rotateY(N,P,D),N[4]=ct*(Ae=N[3])+Ut*(G=N[0])+Kt*(ce=N[2])-Zt*(oe=N[1]),N[5]=Kt*Ae+Ut*oe+Zt*G-ct*ce,N[6]=Zt*Ae+Ut*ce+ct*oe-Kt*G,N[7]=Ut*Ae-ct*G-Kt*oe-Zt*ce,N},_t.rotateZ=function(N,P,D){var G=-P[0],oe=-P[1],ce=-P[2],Ae=P[3],Oe=P[4],ve=P[5],Fe=P[6],Ye=P[7],ct=Oe*Ae+Ye*G+ve*ce-Fe*oe,Kt=ve*Ae+Ye*oe+Fe*G-Oe*ce,Zt=Fe*Ae+Ye*ce+Oe*oe-ve*G,Ut=Ye*Ae-Oe*G-ve*oe-Fe*ce;return r.rotateZ(N,P,D),N[4]=ct*(Ae=N[3])+Ut*(G=N[0])+Kt*(ce=N[2])-Zt*(oe=N[1]),N[5]=Kt*Ae+Ut*oe+Zt*G-ct*ce,N[6]=Zt*Ae+Ut*ce+ct*oe-Kt*G,N[7]=Ut*Ae-ct*G-Kt*oe-Zt*ce,N},_t.rotateByQuatAppend=function(N,P,D){var G=D[0],oe=D[1],ce=D[2],Ae=D[3],Oe=P[0],ve=P[1],Fe=P[2],Ye=P[3];return N[0]=Oe*Ae+Ye*G+ve*ce-Fe*oe,N[1]=ve*Ae+Ye*oe+Fe*G-Oe*ce,N[2]=Fe*Ae+Ye*ce+Oe*oe-ve*G,N[3]=Ye*Ae-Oe*G-ve*oe-Fe*ce,N[4]=(Oe=P[4])*Ae+(Ye=P[7])*G+(ve=P[5])*ce-(Fe=P[6])*oe,N[5]=ve*Ae+Ye*oe+Fe*G-Oe*ce,N[6]=Fe*Ae+Ye*ce+Oe*oe-ve*G,N[7]=Ye*Ae-Oe*G-ve*oe-Fe*ce,N},_t.rotateByQuatPrepend=function(N,P,D){var G=P[0],oe=P[1],ce=P[2],Ae=P[3],Oe=D[0],ve=D[1],Fe=D[2],Ye=D[3];return N[0]=G*Ye+Ae*Oe+oe*Fe-ce*ve,N[1]=oe*Ye+Ae*ve+ce*Oe-G*Fe,N[2]=ce*Ye+Ae*Fe+G*ve-oe*Oe,N[3]=Ae*Ye-G*Oe-oe*ve-ce*Fe,N[4]=G*(Ye=D[7])+Ae*(Oe=D[4])+oe*(Fe=D[6])-ce*(ve=D[5]),N[5]=oe*Ye+Ae*ve+ce*Oe-G*Fe,N[6]=ce*Ye+Ae*Fe+G*ve-oe*Oe,N[7]=Ae*Ye-G*Oe-oe*ve-ce*Fe,N},_t.rotateAroundAxis=function(N,P,D,G){if(Math.abs(G)<e.EPSILON)return S(N,P);var oe=Math.hypot(D[0],D[1],D[2]);G*=.5;var ce=Math.sin(G),Ae=ce*D[0]/oe,Oe=ce*D[1]/oe,ve=ce*D[2]/oe,Fe=Math.cos(G),Ye=P[0],ct=P[1],Kt=P[2],Zt=P[3];N[0]=Ye*Fe+Zt*Ae+ct*ve-Kt*Oe,N[1]=ct*Fe+Zt*Oe+Kt*Ae-Ye*ve,N[2]=Kt*Fe+Zt*ve+Ye*Oe-ct*Ae,N[3]=Zt*Fe-Ye*Ae-ct*Oe-Kt*ve;var Ut=P[4],En=P[5],Yt=P[6],Cn=P[7];return N[4]=Ut*Fe+Cn*Ae+En*ve-Yt*Oe,N[5]=En*Fe+Cn*Oe+Yt*Ae-Ut*ve,N[6]=Yt*Fe+Cn*ve+Ut*Oe-En*Ae,N[7]=Cn*Fe-Ut*Ae-En*Oe-Yt*ve,N},_t.add=function(N,P,D){return N[0]=P[0]+D[0],N[1]=P[1]+D[1],N[2]=P[2]+D[2],N[3]=P[3]+D[3],N[4]=P[4]+D[4],N[5]=P[5]+D[5],N[6]=P[6]+D[6],N[7]=P[7]+D[7],N},_t.multiply=O,_t.scale=function(N,P,D){return N[0]=P[0]*D,N[1]=P[1]*D,N[2]=P[2]*D,N[3]=P[3]*D,N[4]=P[4]*D,N[5]=P[5]*D,N[6]=P[6]*D,N[7]=P[7]*D,N},_t.lerp=function(N,P,D,G){var oe=1-G;return z(P,D)<0&&(G=-G),N[0]=P[0]*oe+D[0]*G,N[1]=P[1]*oe+D[1]*G,N[2]=P[2]*oe+D[2]*G,N[3]=P[3]*oe+D[3]*G,N[4]=P[4]*oe+D[4]*G,N[5]=P[5]*oe+D[5]*G,N[6]=P[6]*oe+D[6]*G,N[7]=P[7]*oe+D[7]*G,N},_t.invert=function(N,P){var D=R(P);return N[0]=-P[0]/D,N[1]=-P[1]/D,N[2]=-P[2]/D,N[3]=P[3]/D,N[4]=-P[4]/D,N[5]=-P[5]/D,N[6]=-P[6]/D,N[7]=P[7]/D,N},_t.conjugate=function(N,P){return N[0]=-P[0],N[1]=-P[1],N[2]=-P[2],N[3]=P[3],N[4]=-P[4],N[5]=-P[5],N[6]=-P[6],N[7]=P[7],N},_t.normalize=function(N,P){var D=R(P);if(D>0){D=Math.sqrt(D);var G=P[0]/D,oe=P[1]/D,ce=P[2]/D,Ae=P[3]/D,Oe=P[4],ve=P[5],Fe=P[6],Ye=P[7],ct=G*Oe+oe*ve+ce*Fe+Ae*Ye;N[0]=G,N[1]=oe,N[2]=ce,N[3]=Ae,N[4]=(Oe-G*ct)/D,N[5]=(ve-oe*ct)/D,N[6]=(Fe-ce*ct)/D,N[7]=(Ye-Ae*ct)/D}return N},_t.str=function(N){return"quat2("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+", "+N[4]+", "+N[5]+", "+N[6]+", "+N[7]+")"},_t.exactEquals=function(N,P){return N[0]===P[0]&&N[1]===P[1]&&N[2]===P[2]&&N[3]===P[3]&&N[4]===P[4]&&N[5]===P[5]&&N[6]===P[6]&&N[7]===P[7]},_t.equals=function(N,P){var D=N[0],G=N[1],oe=N[2],ce=N[3],Ae=N[4],Oe=N[5],ve=N[6],Fe=N[7],Ye=P[0],ct=P[1],Kt=P[2],Zt=P[3],Ut=P[4],En=P[5],Yt=P[6],Cn=P[7];return Math.abs(D-Ye)<=e.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ye))&&Math.abs(G-ct)<=e.EPSILON*Math.max(1,Math.abs(G),Math.abs(ct))&&Math.abs(oe-Kt)<=e.EPSILON*Math.max(1,Math.abs(oe),Math.abs(Kt))&&Math.abs(ce-Zt)<=e.EPSILON*Math.max(1,Math.abs(ce),Math.abs(Zt))&&Math.abs(Ae-Ut)<=e.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(Ut))&&Math.abs(Oe-En)<=e.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(En))&&Math.abs(ve-Yt)<=e.EPSILON*Math.max(1,Math.abs(ve),Math.abs(Yt))&&Math.abs(Fe-Cn)<=e.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(Cn))},_t.sqrLen=_t.squaredLength=_t.len=_t.length=_t.dot=_t.mul=_t.setReal=_t.getReal=void 0;var e=l(te()),r=l(Et()),s=l(ye());function h(N){if(typeof WeakMap!="function")return null;var P=new WeakMap,D=new WeakMap;return(h=function(G){return G?D:P})(N)}function l(N,P){if(N&&N.__esModule)return N;if(N===null||a(N)!=="object"&&typeof N!="function")return{default:N};var D=h(P);if(D&&D.has(N))return D.get(N);var G={},oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ce in N)if(ce!=="default"&&Object.prototype.hasOwnProperty.call(N,ce)){var Ae=oe?Object.getOwnPropertyDescriptor(N,ce):null;Ae&&(Ae.get||Ae.set)?Object.defineProperty(G,ce,Ae):G[ce]=N[ce]}return G.default=N,D&&D.set(N,G),G}function m(N,P,D){var G=.5*D[0],oe=.5*D[1],ce=.5*D[2],Ae=P[0],Oe=P[1],ve=P[2],Fe=P[3];return N[0]=Ae,N[1]=Oe,N[2]=ve,N[3]=Fe,N[4]=G*Fe+oe*ve-ce*Oe,N[5]=oe*Fe+ce*Ae-G*ve,N[6]=ce*Fe+G*Oe-oe*Ae,N[7]=-G*Ae-oe*Oe-ce*ve,N}function S(N,P){return N[0]=P[0],N[1]=P[1],N[2]=P[2],N[3]=P[3],N[4]=P[4],N[5]=P[5],N[6]=P[6],N[7]=P[7],N}function O(N,P,D){var G=P[0],oe=P[1],ce=P[2],Ae=P[3],Oe=D[4],ve=D[5],Fe=D[6],Ye=D[7],ct=P[4],Kt=P[5],Zt=P[6],Ut=P[7],En=D[0],Yt=D[1],Cn=D[2],Vn=D[3];return N[0]=G*Vn+Ae*En+oe*Cn-ce*Yt,N[1]=oe*Vn+Ae*Yt+ce*En-G*Cn,N[2]=ce*Vn+Ae*Cn+G*Yt-oe*En,N[3]=Ae*Vn-G*En-oe*Yt-ce*Cn,N[4]=G*Ye+Ae*Oe+oe*Fe-ce*ve+ct*Vn+Ut*En+Kt*Cn-Zt*Yt,N[5]=oe*Ye+Ae*ve+ce*Oe-G*Fe+Kt*Vn+Ut*Yt+Zt*En-ct*Cn,N[6]=ce*Ye+Ae*Fe+G*ve-oe*Oe+Zt*Vn+Ut*Cn+ct*Yt-Kt*En,N[7]=Ae*Ye-G*Oe-oe*ve-ce*Fe+Ut*Vn-ct*En-Kt*Yt-Zt*Cn,N}_t.getReal=r.copy,_t.setReal=r.copy,_t.mul=O;var z=r.dot;_t.dot=z;var w=r.length;_t.length=w,_t.len=w;var R=r.squaredLength;return _t.squaredLength=R,_t.sqrLen=R,_t}var bt,Tt,st={};function Qe(){if(bt)return st;function a(P){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},a(P)}bt=1,Object.defineProperty(st,"__esModule",{value:!0}),st.create=s,st.clone=function(P){var D=new e.ARRAY_TYPE(2);return D[0]=P[0],D[1]=P[1],D},st.fromValues=function(P,D){var G=new e.ARRAY_TYPE(2);return G[0]=P,G[1]=D,G},st.copy=function(P,D){return P[0]=D[0],P[1]=D[1],P},st.set=function(P,D,G){return P[0]=D,P[1]=G,P},st.add=function(P,D,G){return P[0]=D[0]+G[0],P[1]=D[1]+G[1],P},st.subtract=h,st.multiply=l,st.divide=m,st.ceil=function(P,D){return P[0]=Math.ceil(D[0]),P[1]=Math.ceil(D[1]),P},st.floor=function(P,D){return P[0]=Math.floor(D[0]),P[1]=Math.floor(D[1]),P},st.min=function(P,D,G){return P[0]=Math.min(D[0],G[0]),P[1]=Math.min(D[1],G[1]),P},st.max=function(P,D,G){return P[0]=Math.max(D[0],G[0]),P[1]=Math.max(D[1],G[1]),P},st.round=function(P,D){return P[0]=Math.round(D[0]),P[1]=Math.round(D[1]),P},st.scale=function(P,D,G){return P[0]=D[0]*G,P[1]=D[1]*G,P},st.scaleAndAdd=function(P,D,G,oe){return P[0]=D[0]+G[0]*oe,P[1]=D[1]+G[1]*oe,P},st.distance=S,st.squaredDistance=O,st.length=z,st.squaredLength=w,st.negate=function(P,D){return P[0]=-D[0],P[1]=-D[1],P},st.inverse=function(P,D){return P[0]=1/D[0],P[1]=1/D[1],P},st.normalize=function(P,D){var G=D[0],oe=D[1],ce=G*G+oe*oe;return ce>0&&(ce=1/Math.sqrt(ce)),P[0]=D[0]*ce,P[1]=D[1]*ce,P},st.dot=function(P,D){return P[0]*D[0]+P[1]*D[1]},st.cross=function(P,D,G){var oe=D[0]*G[1]-D[1]*G[0];return P[0]=P[1]=0,P[2]=oe,P},st.lerp=function(P,D,G,oe){var ce=D[0],Ae=D[1];return P[0]=ce+oe*(G[0]-ce),P[1]=Ae+oe*(G[1]-Ae),P},st.random=function(P,D){D=D||1;var G=2*e.RANDOM()*Math.PI;return P[0]=Math.cos(G)*D,P[1]=Math.sin(G)*D,P},st.transformMat2=function(P,D,G){var oe=D[0],ce=D[1];return P[0]=G[0]*oe+G[2]*ce,P[1]=G[1]*oe+G[3]*ce,P},st.transformMat2d=function(P,D,G){var oe=D[0],ce=D[1];return P[0]=G[0]*oe+G[2]*ce+G[4],P[1]=G[1]*oe+G[3]*ce+G[5],P},st.transformMat3=function(P,D,G){var oe=D[0],ce=D[1];return P[0]=G[0]*oe+G[3]*ce+G[6],P[1]=G[1]*oe+G[4]*ce+G[7],P},st.transformMat4=function(P,D,G){var oe=D[0],ce=D[1];return P[0]=G[0]*oe+G[4]*ce+G[12],P[1]=G[1]*oe+G[5]*ce+G[13],P},st.rotate=function(P,D,G,oe){var ce=D[0]-G[0],Ae=D[1]-G[1],Oe=Math.sin(oe),ve=Math.cos(oe);return P[0]=ce*ve-Ae*Oe+G[0],P[1]=ce*Oe+Ae*ve+G[1],P},st.angle=function(P,D){var G=P[0],oe=P[1],ce=D[0],Ae=D[1],Oe=Math.sqrt(G*G+oe*oe)*Math.sqrt(ce*ce+Ae*Ae);return Math.acos(Math.min(Math.max(Oe&&(G*ce+oe*Ae)/Oe,-1),1))},st.zero=function(P){return P[0]=0,P[1]=0,P},st.str=function(P){return"vec2("+P[0]+", "+P[1]+")"},st.exactEquals=function(P,D){return P[0]===D[0]&&P[1]===D[1]},st.equals=function(P,D){var G=P[0],oe=P[1],ce=D[0],Ae=D[1];return Math.abs(G-ce)<=e.EPSILON*Math.max(1,Math.abs(G),Math.abs(ce))&&Math.abs(oe-Ae)<=e.EPSILON*Math.max(1,Math.abs(oe),Math.abs(Ae))},st.forEach=st.sqrLen=st.sqrDist=st.dist=st.div=st.mul=st.sub=st.len=void 0;var e=function(P,D){if(P&&P.__esModule)return P;if(P===null||a(P)!=="object"&&typeof P!="function")return{default:P};var G=r(void 0);if(G&&G.has(P))return G.get(P);var oe={},ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in P)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call(P,Ae)){var Oe=ce?Object.getOwnPropertyDescriptor(P,Ae):null;Oe&&(Oe.get||Oe.set)?Object.defineProperty(oe,Ae,Oe):oe[Ae]=P[Ae]}return oe.default=P,G&&G.set(P,oe),oe}(te());function r(P){if(typeof WeakMap!="function")return null;var D=new WeakMap,G=new WeakMap;return(r=function(oe){return oe?G:D})(P)}function s(){var P=new e.ARRAY_TYPE(2);return e.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0),P}function h(P,D,G){return P[0]=D[0]-G[0],P[1]=D[1]-G[1],P}function l(P,D,G){return P[0]=D[0]*G[0],P[1]=D[1]*G[1],P}function m(P,D,G){return P[0]=D[0]/G[0],P[1]=D[1]/G[1],P}function S(P,D){return Math.hypot(D[0]-P[0],D[1]-P[1])}function O(P,D){var G=D[0]-P[0],oe=D[1]-P[1];return G*G+oe*oe}function z(P){return Math.hypot(P[0],P[1])}function w(P){var D=P[0],G=P[1];return D*D+G*G}st.len=z,st.sub=h,st.mul=l,st.div=m,st.dist=S,st.sqrDist=O,st.sqrLen=w;var R,N=(R=s(),function(P,D,G,oe,ce,Ae){var Oe,ve;for(D||(D=2),G||(G=0),ve=oe?Math.min(oe*D+G,P.length):P.length,Oe=G;Oe<ve;Oe+=D)R[0]=P[Oe],R[1]=P[Oe+1],ce(R,R,Ae),P[Oe]=R[0],P[Oe+1]=R[1];return P});return st.forEach=N,st}function mt(){if(Tt)return U;function a(P){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},a(P)}Tt=1,Object.defineProperty(U,"__esModule",{value:!0}),U.vec4=U.vec3=U.vec2=U.quat2=U.quat=U.mat4=U.mat3=U.mat2d=U.mat2=U.glMatrix=void 0;var e=N(te());U.glMatrix=e;var r=N(K());U.mat2=r;var s=N(J());U.mat2d=s;var h=N(Ee());U.mat3=h;var l=N(ye());U.mat4=l;var m=N(Et());U.quat=m;var S=N(He());U.quat2=S;var O=N(Qe());U.vec2=O;var z=N(qe());U.vec3=z;var w=N(ft());function R(P){if(typeof WeakMap!="function")return null;var D=new WeakMap,G=new WeakMap;return(R=function(oe){return oe?G:D})(P)}function N(P,D){if(P&&P.__esModule)return P;if(P===null||a(P)!=="object"&&typeof P!="function")return{default:P};var G=R(D);if(G&&G.has(P))return G.get(P);var oe={},ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ae in P)if(Ae!=="default"&&Object.prototype.hasOwnProperty.call(P,Ae)){var Oe=ce?Object.getOwnPropertyDescriptor(P,Ae):null;Oe&&(Oe.get||Oe.set)?Object.defineProperty(oe,Ae,Oe):oe[Ae]=P[Ae]}return oe.default=P,G&&G.set(P,oe),oe}return U.vec4=w,U}var Ht,vt,ue,lt,le=mt(),Je=function(){if(vt)return Ht;function a(e,r,s,h){this.cx=3*e,this.bx=3*(s-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=s,this.p2y=h}return vt=1,Ht=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var s=e,h=0;h<8;h++){var l=this.sampleCurveX(s)-e;if(Math.abs(l)<r)return s;var m=this.sampleCurveDerivativeX(s);if(Math.abs(m)<1e-6)break;s-=l/m}var S=0,O=1;for(s=e,h=0;h<20&&(l=this.sampleCurveX(s),!(Math.abs(l-e)<r));h++)e>l?S=s:O=s,s=.5*(O-S)+S;return s},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},Ht}(),we=j(Je);function Pn(){if(lt)return ue;function a(e,r){this.x=e,this.y=r}return lt=1,ue=a,a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,r){return this.clone()._rotateAround(e,r)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var r=e.x-this.x,s=e.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,r){return Math.atan2(this.x*r-this.y*e,this.x*e+this.y*r)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var r=Math.cos(e),s=Math.sin(e),h=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=h,this},_rotateAround:function(e,r){var s=Math.cos(e),h=Math.sin(e),l=r.y+h*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-h*(this.y-r.y),this.y=l,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):e},ue}var Mt=j(Pn());function or(a,e){if(Array.isArray(a)){if(!Array.isArray(e)||a.length!==e.length)return!1;for(let r=0;r<a.length;r++)if(!or(a[r],e[r]))return!1;return!0}if(typeof a=="object"&&a!==null&&e!==null){if(typeof e!="object"||Object.keys(a).length!==Object.keys(e).length)return!1;for(const r in a)if(!or(a[r],e[r]))return!1;return!0}return a===e}const wr=Math.PI/180,Dr=180/Math.PI;function lr(a){return a*wr}function Pe(a){return a*Dr}const ut=[[0,0],[1,0],[1,1],[0,1]];function Ve(a){if(a<=0)return 0;if(a>=1)return 1;const e=a*a,r=e*a;return 4*(a<.5?r:3*(a-e)+r-.75)}function gt(a,e,r,s){const h=new we(a,e,r,s);return function(l){return h.solve(l)}}const Gt=gt(.25,.1,.25,1);function Me(a,e,r){return Math.min(r,Math.max(e,a))}function At(a,e,r){return(r=Me((r-a)/(e-a),0,1))*r*(3-2*r)}function Bt(a,e,r){const s=r-e,h=((a-e)%s+s)%s+e;return h===e?r:h}function Sn(a,e,r){if(!a.length)return r(null,[]);let s=a.length;const h=new Array(a.length);let l=null;a.forEach((m,S)=>{e(m,(O,z)=>{O&&(l=O),h[S]=z,--s==0&&r(l,h)})})}function Lt(a,...e){for(const r of e)for(const s in r)a[s]=r[s];return a}let Bn=1;function en(){return Bn++}function gn(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function ar(a,e){a.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function Sr(a,e){return a.indexOf(e,a.length-e.length)!==-1}function In(a,e,r){const s={};for(const h in a)s[h]=e.call(this,a[h],h,a);return s}function Gn(a,e,r){const s={};for(const h in a)e.call(this,a[h],h,a)&&(s[h]=a[h]);return s}function hn(a){return Array.isArray(a)?a.map(hn):typeof a=="object"&&a?In(a,hn):a}const mn={};function cn(a){mn[a]||(typeof console!="undefined"&&console.warn(a),mn[a]=!0)}function Ln(a,e,r){return(r.y-a.y)*(e.x-a.x)>(e.y-a.y)*(r.x-a.x)}function Er(a){let e=0;for(let r,s,h=0,l=a.length,m=l-1;h<l;m=h++)r=a[h],s=a[m],e+=(s.x-r.x)*(r.y+s.y);return e}function mr([a,e,r]){const s=lr(e+90),h=lr(r);return{x:a*Math.cos(s)*Math.sin(h),y:a*Math.sin(s)*Math.sin(h),z:a*Math.cos(h),azimuthal:e,polar:r}}function Jr(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Ie(a){const e={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,s,h,l)=>{const m=h||l;return e[s]=!m||m.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let Ot=null;function St(a,e){return[a[4*e],a[4*e+1],a[4*e+2],a[4*e+3]]}function at(a,e,r,s){for(;e<r;){const h=e+r>>1;a[h]<s?e=h+1:r=h}return e}function Xe(a,e,r,s){for(;e<r;){const h=e+r>>1;a[h]<=s?e=h+1:r=h}return e}function Nt(a){return a>0?1/(1.001-a):1+a}function Nn(a){return a>0?1-1/(1.001-a):-a}const Jn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Jn.API_URL)return null;try{const a=new URL(Jn.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch(a){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function rr(a){return Jn.API_URL_REGEX.test(a)}function Br(a){return Jn.API_SPRITE_REGEX.test(a)}let Hr,zr,Tr,fn,Ne,Ge;function ot(){return Hr==null&&(Hr=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Hr}const Dt={now:()=>fn!==void 0?fn:performance.now(),setNow(a){fn=a},restoreNow(){fn=void 0},frame(a){const e=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(a,e=0){const{width:r,height:s}=a;Ne||(Ne=document.createElement("canvas"));const h=Ne.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(r>Ne.width||s>Ne.height)&&(Ne.width=r,Ne.height=s),h.clearRect(-e,-e,r+2*e,s+2*e),h.drawImage(a,0,0,r,s),h.getImageData(-e,-e,r+2*e,s+2*e)},resolveURL:a=>(zr||(zr=document.createElement("a")),zr.href=a,zr.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Tr==null&&(Tr=window.matchMedia("(prefers-reduced-motion: reduce)")),Tr.matches)},hasCanvasFingerprintNoise(){if(Ge!==void 0)return Ge;if(!ot())return Ge=!1,!1;const a=new OffscreenCanvas(85,1),e=a.getContext("2d",{willReadFrequently:!0});let r=0;for(let h=0;h<a.width;++h)e.fillStyle=`rgba(${r++},${r++},${r++}, 255)`,e.fillRect(h,0,1,1);const s=e.getImageData(0,0,a.width,a.height);r=0;for(let h=0;h<s.data.length;++h)if(h%4!=3&&r++!==s.data[h])return Ge=!0,!0;return Ge=!1,!1}};function jt(a,e){const r=a.indexOf("?");if(r<0)return`${a}?${new URLSearchParams(e).toString()}`;const s=new URLSearchParams(a.slice(r));for(const h in e)s.set(h,e[h]);return`${a.slice(0,r)}?${s.toString()}`}function sn(a,e={persistentParams:[]}){const r=a.indexOf("?");if(r<0)return a;const s=new URLSearchParams,h=new URLSearchParams(a.slice(r));for(const m of e.persistentParams){const S=h.get(m);S&&s.set(m,S)}const l=s.toString();return`${a.slice(0,r)}${l.length>0?`?${l}`:""}`}const xn="mapbox-tiles";let rn=500,Fn=50;const Un=["language","worldview","jobid"];let jn,_n;function Xn(){try{return caches}catch(a){}}function er(){const a=Xn();a&&jn==null&&(jn=a.open(xn))}let Yr=1/0;const qr={supported:!1,testSupport:function(a){!Ci&&ci&&(Ki?Di(a):Gr=a)}};let Gr,ci,Ci=!1,Ki=!1;const Bi=typeof self!="undefined"?self:{};function Di(a){const e=a.createTexture();a.bindTexture(a.TEXTURE_2D,e);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,ci),a.isContextLost())return;qr.supported=!0}catch(r){}a.deleteTexture(e),Ci=!0}Bi.document&&(ci=Bi.document.createElement("img"),ci.onload=function(){Gr&&Di(Gr),Gr=null,Ki=!0},ci.onerror=function(){Ci=!0,Gr=null},ci.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const yo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(yo);class po extends Error{constructor(e,r,s){r===401&&rr(s)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=s}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Vo=Jr()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Xo=function(a,e){if(!(/^file:/.test(r=a.url)||/^file:/.test(Vo())&&!/^\w+:/.test(r))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(s,h){const l=new AbortController,m=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:Vo(),referrerPolicy:s.referrerPolicy,signal:l.signal});let S=!1,O=!1;const z=(w=m.url).indexOf("sku=")>0&&rr(w);var w;s.type==="json"&&m.headers.set("Accept","application/json");const R=(P,D,G)=>{if(O)return;if(P&&P.message!=="SecurityError"&&cn(P.toString()),D&&G)return N(D);const oe=Date.now();fetch(m).then(ce=>{if(ce.ok){const Ae=z?ce.clone():null;return N(ce,Ae,oe)}return h(new po(ce.statusText,ce.status,s.url))}).catch(ce=>{ce.name!=="AbortError"&&h(new Error(`${ce.message} ${s.url}`))})},N=(P,D,G)=>{(s.type==="arrayBuffer"?P.arrayBuffer():s.type==="json"?P.json():P.text()).then(oe=>{O||(D&&G&&function(ce,Ae,Oe){if(er(),jn==null)return;const ve=Ie(Ae.headers.get("Cache-Control")||"");if(ve["no-store"])return;const Fe={status:Ae.status,statusText:Ae.statusText,headers:new Headers};Ae.headers.forEach((Kt,Zt)=>Fe.headers.set(Zt,Kt)),ve["max-age"]&&Fe.headers.set("Expires",new Date(Oe+1e3*ve["max-age"]).toUTCString());const Ye=Fe.headers.get("Expires");if(!Ye||new Date(Ye).getTime()-Oe<42e4)return;let ct=sn(ce.url,{persistentParams:Un});if(Ae.status===206){const Kt=ce.headers.get("Range");if(!Kt)return;Fe.status=200,ct=jt(ct,{range:Kt})}(function(Kt,Zt){if(_n===void 0)try{new Response(new ReadableStream),_n=!0}catch(Ut){_n=!1}_n?Zt(Kt.body):Kt.blob().then(Zt)})(Ae,Kt=>{const Zt=new Response((Ut=Ae.status)!==200&&Ut!==404&&[101,103,204,205,304].includes(Ut)?null:Kt,Fe);var Ut;er(),jn!=null&&jn.then(En=>En.put(ct,Zt)).catch(En=>cn(En.message))})}(m,D,G),S=!0,h(null,oe,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(oe=>{O||h(new Error(oe.message))})};return z?function(P,D){if(er(),jn==null)return D(null);jn.then(G=>{let oe=sn(P.url,{persistentParams:Un});const ce=P.headers.get("Range");ce&&(oe=jt(oe,{range:ce})),G.match(oe).then(Ae=>{const Oe=function(ve){if(!ve)return!1;const Fe=new Date(ve.headers.get("Expires")||0),Ye=Ie(ve.headers.get("Cache-Control")||"");return Fe>Date.now()&&!Ye["no-cache"]}(Ae);G.delete(oe),Oe&&G.put(oe,Ae.clone()),D(null,Ae,Oe)}).catch(D)}).catch(D)}(m,R):R(null,null),{cancel:()=>{O=!0,S||l.abort()}}}(a,e);if(Jr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,e,void 0,!0)}var r;return function(s,h){const l=new XMLHttpRequest;l.open(s.method||"GET",s.url,!0),s.type==="arrayBuffer"&&(l.responseType="arraybuffer");for(const m in s.headers)l.setRequestHeader(m,s.headers[m]);return s.type==="json"&&(l.responseType="text",l.setRequestHeader("Accept","application/json")),l.withCredentials=s.credentials==="include",l.onerror=()=>{h(new Error(l.statusText))},l.onload=()=>{if((l.status>=200&&l.status<300||l.status===0)&&l.response!==null){let m=l.response;if(s.type==="json")try{m=JSON.parse(l.response)}catch(S){return h(S)}h(null,m,l.getResponseHeader("Cache-Control"),l.getResponseHeader("Expires"))}else h(new po(l.statusText,l.status,s.url))},l.send(s.body),{cancel:()=>l.abort()}}(a,e)},$o=function(a,e){return Xo(Lt(a,{type:"arrayBuffer"}),e)};function Aa(a){const e=document.createElement("a");return e.href=a,e.protocol===location.protocol&&e.host===location.host}const qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Oo,Do;Oo=[],Do=0;const oa=function(a,e){if(qr.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Do>=Jn.MAX_PARALLEL_IMAGE_REQUESTS){const l={requestParameters:a,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Oo.push(l),l}Do++;let r=!1;const s=()=>{if(!r)for(r=!0,Do--;Oo.length&&Do<Jn.MAX_PARALLEL_IMAGE_REQUESTS;){const l=Oo.shift(),{requestParameters:m,callback:S,cancelled:O}=l;O||(l.cancel=oa(m,S).cancel)}},h=$o(a,(l,m,S,O)=>{s(),l?e(l):m&&(self.createImageBitmap?function(z,w){const R=new Blob([new Uint8Array(z)],{type:"image/png"});createImageBitmap(R).then(N=>{w(null,N)}).catch(N=>{w(new Error(`Could not load image because of ${N.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(m,(z,w)=>e(z,w,S,O)):function(z,w){const R=new Image;R.onload=()=>{w(null,R),URL.revokeObjectURL(R.src),R.onload=null,requestAnimationFrame(()=>{R.src=qa})},R.onerror=()=>w(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const N=new Blob([new Uint8Array(z)],{type:"image/png"});R.src=z.byteLength?URL.createObjectURL(N):qa}(m,(z,w)=>e(z,w,S,O)))});return{cancel:()=>{h.cancel(),s()}}};var Fa,xs,tl,Na={exports:{}},ro={exports:{}},xa={exports:{}},Ba=function(){if(tl)return Na.exports;tl=1;var a=(Fa||(Fa=1,ro.exports=function(r,s){var h,l,m,S,O,z,w,R;for(l=r.length-(h=3&r.length),m=s,O=3432918353,z=461845907,R=0;R<l;)w=255&r.charCodeAt(R)|(255&r.charCodeAt(++R))<<8|(255&r.charCodeAt(++R))<<16|(255&r.charCodeAt(++R))<<24,++R,m=27492+(65535&(S=5*(65535&(m=(m^=w=(65535&(w=(w=(65535&w)*O+(((w>>>16)*O&65535)<<16)&4294967295)<<15|w>>>17))*z+(((w>>>16)*z&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(w=0,h){case 3:w^=(255&r.charCodeAt(R+2))<<16;case 2:w^=(255&r.charCodeAt(R+1))<<8;case 1:m^=w=(65535&(w=(w=(65535&(w^=255&r.charCodeAt(R)))*O+(((w>>>16)*O&65535)<<16)&4294967295)<<15|w>>>17))*z+(((w>>>16)*z&65535)<<16)&4294967295}return m^=r.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}),ro.exports),e=(xs||(xs=1,xa.exports=function(r,s){for(var h,l=r.length,m=s^l,S=0;l>=4;)h=1540483477*(65535&(h=255&r.charCodeAt(S)|(255&r.charCodeAt(++S))<<8|(255&r.charCodeAt(++S))<<16|(255&r.charCodeAt(++S))<<24))+((1540483477*(h>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),l-=4,++S;switch(l){case 3:m^=(255&r.charCodeAt(S+2))<<16;case 2:m^=(255&r.charCodeAt(S+1))<<8;case 1:m=1540483477*(65535&(m^=255&r.charCodeAt(S)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}),xa.exports);return Na.exports=a,Na.exports.murmur3=a,Na.exports.murmur2=e,Na.exports}(),ma=j(Ba);class ja{constructor(e,...r){Lt(this,r[0]||{}),this.type=e}}class Sa extends ja{constructor(e,r={}){super("error",Lt({error:e},r))}}function us(a,e,r){r[a]&&r[a].indexOf(e)!==-1||(r[a]=r[a]||[],r[a].push(e))}function ua(a,e,r){if(r&&r[a]){const s=r[a].indexOf(e);s!==-1&&r[a].splice(s,1)}}class ao{on(e,r){return this._listeners=this._listeners||{},us(e,r,this._listeners),this}off(e,r){return ua(e,r,this._listeners),ua(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},us(e,r,this._oneTimeListeners),this):new Promise(s=>this.once(e,s))}fire(e,r){const s=typeof e=="string"?new ja(e,r):e,h=s.type;if(this.listens(h)){s.target=this;const l=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const O of l)O.call(this,s);const m=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const O of m)ua(h,O,this._oneTimeListeners),O.call(this,s);const S=this._eventedParent;S&&(Lt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(s))}else s instanceof Sa&&console.error(s.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var Ma,ko={},No=function(){if(Ma)return ko;Ma=1;var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function e(l){return(l=Math.round(l))<0?0:l>255?255:l}function r(l){return e(l[l.length-1]==="%"?parseFloat(l)/100*255:parseInt(l))}function s(l){return(m=l[l.length-1]==="%"?parseFloat(l)/100:parseFloat(l))<0?0:m>1?1:m;var m}function h(l,m,S){return S<0?S+=1:S>1&&(S-=1),6*S<1?l+(m-l)*S*6:2*S<1?m:3*S<2?l+(m-l)*(2/3-S)*6:l}try{ko.parseCSSColor=function(l){var m,S=l.replace(/ /g,"").toLowerCase();if(S in a)return a[S].slice();if(S[0]==="#")return S.length===4?(m=parseInt(S.substr(1),16))>=0&&m<=4095?[(3840&m)>>4|(3840&m)>>8,240&m|(240&m)>>4,15&m|(15&m)<<4,1]:null:S.length===7&&(m=parseInt(S.substr(1),16))>=0&&m<=16777215?[(16711680&m)>>16,(65280&m)>>8,255&m,1]:null;var O=S.indexOf("("),z=S.indexOf(")");if(O!==-1&&z+1===S.length){var w=S.substr(0,O),R=S.substr(O+1,z-(O+1)).split(","),N=1;switch(w){case"rgba":if(R.length!==4)return null;N=s(R.pop());case"rgb":return R.length!==3?null:[r(R[0]),r(R[1]),r(R[2]),N];case"hsla":if(R.length!==4)return null;N=s(R.pop());case"hsl":if(R.length!==3)return null;var P=(parseFloat(R[0])%360+360)%360/360,D=s(R[1]),G=s(R[2]),oe=G<=.5?G*(D+1):G+D-G*D,ce=2*G-oe;return[e(255*h(ce,oe,P+1/3)),e(255*h(ce,oe,P)),e(255*h(ce,oe,P-1/3)),N];default:return null}}return null}}catch(l){}return ko}();class Uo{constructor(e,r,s,h=1){this.r=e,this.g=r,this.b=s,this.a=h}static parse(e){if(!e)return;if(e instanceof Uo)return e;if(typeof e!="string")return;const r=No.parseCSSColor(e);return r?new Uo(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toStringPremultipliedAlpha(){const[e,r,s,h]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(s)},${h})`}toString(){const[e,r,s,h]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*e)},${Math.round(255*r)},${Math.round(255*s)},${h})`}toRenderColor(e){const{r,g:s,b:h,a:l}=this;return new Hs(e,r,s,h,l)}clone(){return new Uo(this.r,this.g,this.b,this.a)}}class Hs{constructor(e,r,s,h,l){if(e){const m=e.image.height,S=m*m;r=l===0?0:r/l*(m-1),s=l===0?0:s/l*(m-1),h=l===0?0:h/l*(m-1);const O=Math.floor(r),z=Math.floor(s),w=Math.floor(h),R=Math.ceil(r),N=Math.ceil(s),P=Math.ceil(h),D=r-O,G=s-z,oe=h-w,ce=e.image.data,Ae=4*(O+z*S+w*m),Oe=4*(O+z*S+P*m),ve=4*(O+N*S+w*m),Fe=4*(O+N*S+P*m),Ye=4*(R+z*S+w*m),ct=4*(R+z*S+P*m),Kt=4*(R+N*S+w*m),Zt=4*(R+N*S+P*m);if(Ae<0||Zt>=ce.length)throw new Error("out of range");this.r=$i($i($i(ce[Ae],ce[Oe],oe),$i(ce[ve],ce[Fe],oe),G),$i($i(ce[Ye],ce[ct],oe),$i(ce[Kt],ce[Zt],oe),G),D)/255*l,this.g=$i($i($i(ce[Ae+1],ce[Oe+1],oe),$i(ce[ve+1],ce[Fe+1],oe),G),$i($i(ce[Ye+1],ce[ct+1],oe),$i(ce[Kt+1],ce[Zt+1],oe),G),D)/255*l,this.b=$i($i($i(ce[Ae+2],ce[Oe+2],oe),$i(ce[ve+2],ce[Fe+2],oe),G),$i($i(ce[Ye+2],ce[ct+2],oe),$i(ce[Kt+2],ce[Zt+2],oe),G),D)/255*l,this.a=l}else this.r=r,this.g=s,this.b=h,this.a=l}toArray(){const{r:e,g:r,b:s,a:h}=this;return h===0?[0,0,0,0]:[255*e/h,255*r/h,255*s/h,h]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:e,g:r,b:s,a:h}=this,l=Math.min(Math.max(e/h,0),1),m=Math.min(Math.max(r/h,0),1),S=Math.min(Math.max(s/h,0),1),O=Math.min(l,m,S),z=Math.max(l,m,S),w=(O+z)/2;if(O===z)return[0,0,100*w,h];const R=z-O,N=w>.5?R/(2-z-O):R/(z+O);let P=0;return z===l?P=(m-S)/R+(m<S?6:0):z===m?P=(S-l)/R+2:z===S&&(P=(l-m)/R+4),P*=60,[Math.min(Math.max(P,0),360),Math.min(Math.max(100*N,0),100),Math.min(Math.max(100*w,0),100),h]}toArray01(){const{r:e,g:r,b:s,a:h}=this;return h===0?[0,0,0,0]:[e/h,r/h,s/h,h]}toArray01Scaled(e){const{r,g:s,b:h,a:l}=this;return l===0?[0,0,0]:[r/l*e,s/l*e,h/l*e]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:s,a:h}=this;return[e,r,s,h]}toArray01Linear(){const{r:e,g:r,b:s,a:h}=this;return h===0?[0,0,0,0]:[Math.pow(e/h,2.2),Math.pow(r/h,2.2),Math.pow(s/h,2.2),h]}}function $i(a,e,r){return a*(1-r)+e*r}function es(a,e,r){return a.map((s,h)=>$i(s,e[h],r))}Uo.black=new Uo(0,0,0,1),Uo.white=new Uo(1,1,1,1),Uo.transparent=new Uo(0,0,0,0),Uo.red=new Uo(1,0,0,1),Uo.blue=new Uo(0,0,1,1);var Ll=Object.freeze({__proto__:null,array:es,color:function(a,e,r){return new Uo($i(a.r,e.r,r),$i(a.g,e.g,r),$i(a.b,e.b,r),$i(a.a,e.a,r))},number:$i});function hl(a,...e){for(const r of e)for(const s in r)a[s]=r[s];return a}class ho extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class Ul{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[s,h]of r)this.bindings[s]=h}concat(e){return new Ul(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Ml={kind:"null"},Ri={kind:"number"},Wo={kind:"string"},fo={kind:"boolean"},ts={kind:"color"},il={kind:"object"},Jo={kind:"value"},Jl={kind:"collator"},zs={kind:"formatted"},Cs={kind:"resolvedImage"};function oo(a,e){return{kind:"array",itemType:a,N:e}}function qi(a){if(a.kind==="array"){const e=qi(a.itemType);return typeof a.N=="number"?`array<${e}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${e}>`}return a.kind}const Ta=[Ml,Ri,Wo,fo,ts,zs,il,oo(Jo),Cs];function la(a,e){if(e.kind==="error")return null;if(a.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!la(a.itemType,e.itemType))&&(typeof a.N!="number"||a.N===e.N))return null}else{if(a.kind===e.kind)return null;if(a.kind==="value"){for(const r of Ta)if(!la(r,e))return null}}return`Expected ${qi(a)} but found ${qi(e)} instead.`}function Os(a,e){return e.some(r=>r.kind===a.kind)}function Vl(a,e){return e.some(r=>r==="null"?a===null:r==="array"?Array.isArray(a):r==="object"?a&&!Array.isArray(a)&&typeof a=="object":r===typeof a)}class ns{constructor(e,r,s){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class yu{constructor(e,r,s,h,l){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=s,this.fontStack=h,this.textColor=l}}class Fs{constructor(e){this.sections=e}static fromString(e){return new Fs([new yu(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.namePrimary)}static factory(e){return e instanceof Fs?e:Fs.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.namePrimary]);continue}e.push(r.text);const s={};r.fontStack&&(s["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(s["font-scale"]=r.scale),r.textColor&&(s["text-color"]=["rgba"].concat(r.textColor.toRenderColor(null).toArray())),e.push(s)}return e}}class bs{constructor(e,r){if(this.id=e,this.options=r||{params:{}},this.options.transform){const{a:s,b:h,c:l,d:m,e:S,f:O}=this.options.transform;this.options.transform=new DOMMatrix([s,h,l,m,S,O])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}static deserializeId(e){return JSON.parse(e).id}static deserializeFromString(e){const r=JSON.parse(e),{a:s,b:h,c:l,d:m,e:S,f:O}=r.options.transform;return new DOMMatrix([s,h,l,m,S,O]),new bs(r.id,r.options)}scaleSelf(e){return this.options.transform=this.options.transform.scale(e),this}serialize(){const e={id:this.id};this.options&&(e.options=this.options);const{a:r,b:s,c:h,d:l,e:m,f:S}=this.options.transform;return e.options.transform={a:r,b:s,c:h,d:l,e:m,f:S},JSON.stringify(e)}}class cs{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),e.optionsPrimary&&(this.optionsPrimary=e.optionsPrimary),e.optionsSecondary&&(this.optionsSecondary=e.optionsSecondary),this.available=e.available}toString(){return this.namePrimary&&this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}getPrimary(){return new bs(this.namePrimary,{params:this.optionsPrimary&&this.optionsPrimary.params||{}})}getSerializedPrimary(){return this.getPrimary().serialize()}getSecondary(){return this.nameSecondary?new bs(this.nameSecondary,{params:this.optionsSecondary&&this.optionsSecondary.params||{}}):null}static from(e){return typeof e=="string"?cs.build(e):e}static build(e,r,s,h){return e?new cs({namePrimary:e,nameSecondary:r,optionsPrimary:s,optionsSecondary:h,available:!1}):null}}function Gl(a,e,r,s){return typeof a=="number"&&a>=0&&a<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?s===void 0||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[a,e,r,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[a,e,r,s]:[a,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Dl(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Uo||a instanceof ns||a instanceof Fs||a instanceof cs)return!0;if(Array.isArray(a)){for(const e of a)if(!Dl(e))return!1;return!0}if(typeof a=="object"){for(const e in a)if(!Dl(a[e]))return!1;return!0}return!1}function fs(a){if(a===null)return Ml;if(typeof a=="string")return Wo;if(typeof a=="boolean")return fo;if(typeof a=="number")return Ri;if(a instanceof Uo)return ts;if(a instanceof ns)return Jl;if(a instanceof Fs)return zs;if(a instanceof cs)return Cs;if(Array.isArray(a)){const e=a.length;let r;for(const s of a){const h=fs(s);if(r){if(r===h)continue;r=Jo;break}r=h}return oo(r||Jo,e)}return il}function ws(a){const e=typeof a;return a===null?"":e==="string"||e==="number"||e==="boolean"?String(a):a instanceof Uo?a.toStringPremultipliedAlpha():a instanceof Fs||a instanceof cs?a.toString():JSON.stringify(a)}class ps{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Dl(e[1]))return r.error("invalid value");const s=e[1];let h=fs(s);const l=r.expectedType;return h.kind!=="array"||h.N!==0||!l||l.kind!=="array"||typeof l.N=="number"&&l.N!==0||(h=l),new ps(h,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Uo?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Fs?this.value.serialize():this.value}}class Za{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const ru={string:Wo,number:Ri,boolean:fo,object:il};class Es{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let s,h=1;const l=e[0];if(l==="array"){let S,O;if(e.length>2){const z=e[1];if(typeof z!="string"||!(z in ru)||z==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);S=ru[z],h++}else S=Jo;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);O=e[2],h++}s=oo(S,O)}else s=ru[l];const m=[];for(;h<e.length;h++){const S=r.parse(e[h],h,Jo);if(!S)return null;m.push(S)}return new Es(s,m)}evaluate(e){for(let r=0;r<this.args.length;r++){const s=this.args[r].evaluate(e);if(!la(this.type,fs(s)))return s;if(r===this.args.length-1)throw new Za(`The expression ${JSON.stringify(this.args[r].serialize())} evaluated to ${qi(fs(s))} but was expected to be of type ${qi(this.type)}.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const s=e.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){r.push(s.kind);const h=e.N;(typeof h=="number"||this.args.length>1)&&r.push(h)}}return r.concat(this.args.map(s=>s.serialize()))}}class xu{constructor(e){this.type=zs,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const s=e[1];if(!Array.isArray(s)&&typeof s=="object")return r.error("First argument must be an image or text section.");const h=[];let l=!1;for(let m=1;m<=e.length-1;++m){const S=e[m];if(l&&typeof S=="object"&&!Array.isArray(S)){l=!1;let O=null;if(S["font-scale"]&&(O=r.parseObjectValue(S["font-scale"],m,"font-scale",Ri),!O))return null;let z=null;if(S["text-font"]&&(z=r.parseObjectValue(S["text-font"],m,"text-font",oo(Wo)),!z))return null;let w=null;if(S["text-color"]&&(w=r.parseObjectValue(S["text-color"],m,"text-color",ts),!w))return null;const R=h[h.length-1];R.scale=O,R.font=z,R.textColor=w}else{const O=r.parse(e[m],m,Jo);if(!O)return null;const z=O.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");l=!0,h.push({content:O,scale:null,font:null,textColor:null})}}return new xu(h)}evaluate(e){return new Fs(this.sections.map(r=>{const s=r.content.evaluate(e);return fs(s)===Cs?new yu("",s,null,null,null):new yu(ws(s),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const s={};r.scale&&(s["font-scale"]=r.scale.serialize()),r.font&&(s["text-font"]=r.font.serialize()),r.textColor&&(s["text-color"]=r.textColor.serialize()),e.push(s)}return e}}class Yu{constructor(e,r,s,h){this._imageWarnHistory={},this.type=Cs,this.inputPrimary=e,this.inputSecondary=r,this.inputPrimaryParams=s,this.inputSecondaryParams=h}static parse(e,r){if(e.length<2)return r.error("Expected two or more arguments.");let s=1;const h=[];function l(){if(s<e.length){const S=r.parse(e[s],s++,Wo);return S?(h.push({image:S,options:void 0}),!0):(r.error(h.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function m(){if(s<e.length){if((S=e[s])===null||typeof S!="object"||Array.isArray(S))return!0;const O=e[s].params,z=r.concat(s);if(!O)return s++,!0;if(typeof O!="object"||O.constructor!==Object)return z.error('Image options "params" should be an object'),!1;const w={},R=z.concat(void 0,"params");for(const N in O){if(!N)return R.error("Image parameter name should be non-empty"),!1;const P=R.concat(void 0,N).parse(O[N],void 0,ts,void 0,{typeAnnotation:"coerce"});if(!P)return!1;w[N]=P}return h[h.length-1].options=w,s++,!0}var S;return!0}for(let S=0;S<2;S++)if(!l()||!m())return;return new Yu(h[0].image,h[1]?h[1].image:void 0,h[0].options,h[1]?h[1].options:void 0)}evaluateParams(e,r){const s={};if(r){for(const h in r)if(r[h])try{const l=r[h].evaluate(e),m=`Ignoring image parameter "${h}" with semi-transparent color ${l.toString()}`;if(l.a!==1){this._imageWarnHistory[m]||(console.warn(m),this._imageWarnHistory[m]=!0);continue}s[h]=l}catch(l){continue}if(Object.keys(s).length!==0)return{params:s}}}evaluate(e){const r=cs.build(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0,this.inputPrimaryParams?this.evaluateParams(e,this.inputPrimaryParams):void 0,this.inputSecondaryParams?this.evaluateParams(e,this.inputSecondaryParams):void 0);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(r.namePrimary)>-1,r.nameSecondary&&r.available&&e.availableImages&&(r.available=e.availableImages.indexOf(r.nameSecondary)>-1)),r}eachChild(e){if(e(this.inputPrimary),this.inputPrimaryParams)for(const r in this.inputPrimaryParams)this.inputPrimaryParams[r]&&e(this.inputPrimaryParams[r]);if(this.inputSecondary&&(e(this.inputSecondary),this.inputSecondaryParams))for(const r in this.inputSecondaryParams)this.inputSecondaryParams[r]&&e(this.inputSecondaryParams[r])}outputDefined(){return!1}serializeParams(e){const r={};if(e){for(const s in e)e[s]&&(r[s]=e[s].serialize());return{params:r}}}serialize(){const e=["image",this.inputPrimary.serialize()];return this.inputPrimaryParams&&e.push(this.serializeParams(this.inputPrimaryParams)),this.inputSecondary&&(e.push(this.inputSecondary.serialize()),this.inputSecondaryParams&&e.push(this.serializeParams(this.inputSecondaryParams))),e}}function ol(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}const Sc={"to-boolean":fo,"to-color":ts,"to-number":Ri,"to-string":Wo};class Pu{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const s=e[0],h=[];let l=Ml;if(s==="to-array"){if(!Array.isArray(e[1]))return null;const m=e[1].length;if(r.expectedType){if(r.expectedType.kind!=="array")return r.error(`Expected ${r.expectedType.kind} but found array.`);l=oo(r.expectedType.itemType,m)}else{if(!(m>0&&Dl(e[1][0])))return null;l=oo(fs(e[1][0]),m)}for(let S=0;S<m;S++){const O=e[1][S];let z;if(ol(O)==="array")z=r.parse(O,void 0,l.itemType);else{const w=ol(O);if(w!==l.itemType.kind)return r.error(`Expected ${l.itemType.kind} but found ${w}.`);z=r.registry.literal.parse(["literal",O===void 0?null:O],r)}if(!z)return null;h.push(z)}}else{if((s==="to-boolean"||s==="to-string")&&e.length!==2)return r.error("Expected one argument.");l=Sc[s];for(let m=1;m<e.length;m++){const S=r.parse(e[m],m,Jo);if(!S)return null;h.push(S)}}return new Pu(l,h)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,s;for(const h of this.args){if(r=h.evaluate(e),s=null,r instanceof Uo)return r;if(typeof r=="string"){const l=e.parseColor(r);if(l)return l}else if(Array.isArray(r)&&(s=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Gl(r[0],r[1],r[2],r[3]),!s))return new Uo(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Za(s||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const s of this.args){if(r=s.evaluate(e),r===null)return 0;const h=Number(r);if(!isNaN(h))return h}throw new Za(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?Fs.fromString(ws(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?cs.build(ws(this.args[0].evaluate(e))):this.type.kind==="array"?this.args.map(r=>r.evaluate(e)):ws(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new xu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yu(this.args[0]).serialize();const e=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}const Lc=["Unknown","Point","LineString","Polygon"];class Ql{constructor(e,r){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=e,this.options=r}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Lc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(e){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:s,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*r-e[0])+this.featureDistanceData.bearing[1]*(h*r-e[1])}return 0}parseColor(e){let r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=Uo.parse(e)),r}getConfig(e){return this.options?this.options.get(e):null}}class ms{constructor(e,r,s,h,l){this.name=e,this.type=r,this._evaluate=s,this.args=h,this._overloadIndex=l}evaluate(e){if(!this._evaluate){const r=ms.definitions[this.name];this._evaluate=Array.isArray(r)?r[2]:r.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const s=e[0],h=ms.definitions[s];if(!h)return r.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const l=Array.isArray(h)?h[0]:h.type,m=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,S=[];let O=null,z=-1;for(const[w,R]of m){if(Array.isArray(w)&&w.length!==e.length-1)continue;S.push(w),z++,O=new Si(r.registry,r.path,null,r.scope,void 0,r._scope,r.options);const N=[];let P=!1;for(let D=1;D<e.length;D++){const G=e[D],oe=Array.isArray(w)?w[D-1]:w.type,ce=O.parse(G,1+N.length,oe);if(!ce){P=!0;break}N.push(ce)}if(!P)if(Array.isArray(w)&&w.length!==N.length)O.error(`Expected ${w.length} arguments, but found ${N.length} instead.`);else{for(let D=0;D<N.length;D++){const G=Array.isArray(w)?w[D]:w.type,oe=N[D];O.concat(D+1).checkSubtype(G,oe.type)}if(O.errors.length===0)return new ms(s,l,R,N,z)}}if(S.length===1)r.errors.push(...O.errors);else{const w=(S.length?S:m.map(([N])=>N)).map(cu).join(" | "),R=[];for(let N=1;N<e.length;N++){const P=r.parse(e[N],1+R.length);if(!P)return null;R.push(qi(P.type))}r.error(`Expected arguments of type ${w}, but found (${R.join(", ")}) instead.`)}return null}static register(e,r){ms.definitions=r;for(const s in r)e[s]=ms}}function cu(a){return Array.isArray(a)?`(${a.map(qi).join(", ")})`:`(${qi(a.type)}...)`}class Tc{constructor(e,r,s){this.type=Jl,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const s=e[1];if(typeof s!="object"||Array.isArray(s))return r.error("Collator options argument must be an object.");const h=s["case-sensitive"]===void 0?r.parse(!1,1,fo):r.parseObjectValue(s["case-sensitive"],1,"case-sensitive",fo);if(!h)return null;const l=s["diacritic-sensitive"]===void 0?r.parse(!1,1,fo):r.parseObjectValue(s["diacritic-sensitive"],1,"diacritic-sensitive",fo);if(!l)return null;let m=null;return s.locale&&(m=r.parseObjectValue(s.locale,1,"locale",Wo),!m)?null:new Tc(h,l,m)}evaluate(e){return new ns(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function Ic(a,e,r=0,s=a.length-1,h=Dc){for(;s>r;){if(s-r>600){const O=s-r+1,z=e-r+1,w=Math.log(O),R=.5*Math.exp(2*w/3),N=.5*Math.sqrt(w*R*(O-R)/O)*(z-O/2<0?-1:1);Ic(a,e,Math.max(r,Math.floor(e-z*R/O+N)),Math.min(s,Math.floor(e+(O-z)*R/O+N)),h)}const l=a[e];let m=r,S=s;for(bu(a,r,e),h(a[s],l)>0&&bu(a,r,s);m<S;){for(bu(a,m,S),m++,S--;h(a[m],l)<0;)m++;for(;h(a[S],l)>0;)S--}h(a[r],l)===0?bu(a,r,S):(S++,bu(a,S,s)),S<=e&&(r=S+1),e<=S&&(s=S-1)}}function bu(a,e,r){const s=a[e];a[e]=a[r],a[r]=s}function Dc(a,e){return a<e?-1:a>e?1:0}function kc(a){let e=0;for(let r,s,h=0,l=a.length,m=l-1;h<l;m=h++)r=a[h],s=a[m],e+=(s.x-r.x)*(r.y+s.y);return e}function du(a,e){a[0]=Math.min(a[0],e[0]),a[1]=Math.min(a[1],e[1]),a[2]=Math.max(a[2],e[0]),a[3]=Math.max(a[3],e[1])}function ql(a,e){return!(a[0]<=e[0]||a[2]>=e[2]||a[1]<=e[1]||a[3]>=e[3])}function wu(a,e,r){const s=a[0]-e[0],h=a[1]-e[1],l=a[0]-r[0],m=a[1]-r[1];return s*m-l*h==0&&s*l<=0&&h*m<=0}function Qs(a,e,r=!1){let s=!1;for(let S=0,O=e.length;S<O;S++){const z=e[S];for(let w=0,R=z.length,N=R-1;w<R;N=w++){const P=z[N],D=z[w];if(wu(a,P,D))return r;(l=P)[1]>(h=a)[1]!=(m=D)[1]>h[1]&&h[0]<(m[0]-l[0])*(h[1]-l[1])/(m[1]-l[1])+l[0]&&(s=!s)}}var h,l,m;return s}function Cl(a,e,r,s){const h=s[0]-r[0],l=s[1]-r[1],m=(a[0]-r[0])*l-h*(a[1]-r[1]),S=(e[0]-r[0])*l-h*(e[1]-r[1]);return m>0&&S<0||m<0&&S>0}function Al(a,e,r,s){return(h=[s[0]-r[0],s[1]-r[1]])[0]*(l=[e[0]-a[0],e[1]-a[1]])[1]-h[1]*l[0]!=0&&!(!Cl(a,e,r,s)||!Cl(r,s,a,e));var h,l}const eu=8192;function Eu(a,e){const r=(180+a[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(r*h*eu),Math.round(s*h*eu)]}function Nc(a,e){for(let r=0;r<e.length;r++)if(Qs(a,e[r]))return!0;return!1}function Mc(a,e,r){for(const s of r)for(let h=0,l=s.length,m=l-1;h<l;m=h++)if(Al(a,e,s[m],s[h]))return!0;return!1}function fd(a,e){for(let r=0;r<a.length;++r)if(!Qs(a[r],e))return!1;for(let r=0;r<a.length-1;++r)if(Mc(a[r],a[r+1],e))return!1;return!0}function Ad(a,e){for(let r=0;r<e.length;r++)if(fd(a,e[r]))return!0;return!1}function jo(a,e,r){const s=[];for(let h=0;h<a.length;h++){const l=[];for(let m=0;m<a[h].length;m++){const S=Eu(a[h][m],r);du(e,S),l.push(S)}s.push(l)}return s}function aa(a,e,r){const s=[];for(let h=0;h<a.length;h++){const l=jo(a[h],e,r);s.push(l)}return s}function go(a,e,r,s){if(a[0]<r[0]||a[0]>r[2]){const h=.5*s;let l=a[0]-r[0]>h?-s:r[0]-a[0]>h?s:0;l===0&&(l=a[0]-r[2]>h?-s:r[2]-a[0]>h?s:0),a[0]+=l}du(e,a)}function Ui(a,e,r,s){const h=Math.pow(2,s.z)*eu,l=[s.x*eu,s.y*eu],m=[];if(!a)return m;for(const S of a)for(const O of S){const z=[O.x+l[0],O.y+l[1]];go(z,e,r,h),m.push(z)}return m}function qs(a,e,r,s){const h=Math.pow(2,s.z)*eu,l=[s.x*eu,s.y*eu],m=[];if(!a)return m;for(const O of a){const z=[];for(const w of O){const R=[w.x+l[0],w.y+l[1]];du(e,R),z.push(R)}m.push(z)}if(e[2]-e[0]<=h/2){(S=e)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const O of m)for(const z of O)go(z,e,r,h)}var S;return m}class Io{constructor(e,r){this.type=fo,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Dl(e[1])){const s=e[1];if(s.type==="FeatureCollection")for(let h=0;h<s.features.length;++h){const l=s.features[h].geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new Io(s,s.features[h].geometry)}else if(s.type==="Feature"){const h=s.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Io(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Io(s,s)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,s){const h=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(s.type==="Polygon"){const S=jo(s.coordinates,l,m),O=Ui(r.geometry(),h,l,m);if(!ql(h,l))return!1;for(const z of O)if(!Qs(z,S))return!1}if(s.type==="MultiPolygon"){const S=aa(s.coordinates,l,m),O=Ui(r.geometry(),h,l,m);if(!ql(h,l))return!1;for(const z of O)if(!Nc(z,S))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,s){const h=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(s.type==="Polygon"){const S=jo(s.coordinates,l,m),O=qs(r.geometry(),h,l,m);if(!ql(h,l))return!1;for(const z of O)if(!fd(z,S))return!1}if(s.type==="MultiPolygon"){const S=aa(s.coordinates,l,m),O=qs(r.geometry(),h,l,m);if(!ql(h,l))return!1;for(const z of O)if(!Ad(z,S))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Nu={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Cc=1/298.257223563,Mo=Cc*(2-Cc),Zc=Math.PI/180;class gc{static fromTile(e,r,s){const h=Math.PI*(1-2*(e+.5)/Math.pow(2,r)),l=Math.atan(.5*(Math.exp(h)-Math.exp(-h)))/Zc;return new gc(l,s)}static get units(){return Nu}constructor(e,r){if(e===void 0)throw new Error("No latitude given.");if(r&&!Nu[r])throw new Error(`Unknown unit ${r}. Use one of: ${Object.keys(Nu).join(", ")}`);const s=6378.137*Zc*(r?Nu[r]:1),h=Math.cos(e*Zc),l=1/(1-Mo*(1-h*h)),m=Math.sqrt(l);this.kx=s*m*h,this.ky=s*m*l*(1-Mo)}distance(e,r){const s=kl(e[0]-r[0])*this.kx,h=(e[1]-r[1])*this.ky;return Math.sqrt(s*s+h*h)}bearing(e,r){const s=kl(r[0]-e[0])*this.kx;return Math.atan2(s,(r[1]-e[1])*this.ky)/Zc}destination(e,r,s){const h=s*Zc;return this.offset(e,Math.sin(h)*r,Math.cos(h)*r)}offset(e,r,s){return[e[0]+r/this.kx,e[1]+s/this.ky]}lineDistance(e){let r=0;for(let s=0;s<e.length-1;s++)r+=this.distance(e[s],e[s+1]);return r}area(e){let r=0;for(let s=0;s<e.length;s++){const h=e[s];for(let l=0,m=h.length,S=m-1;l<m;S=l++)r+=kl(h[l][0]-h[S][0])*(h[l][1]+h[S][1])*(s?-1:1)}return Math.abs(r)/2*this.kx*this.ky}along(e,r){let s=0;if(r<=0)return e[0];for(let h=0;h<e.length-1;h++){const l=e[h],m=e[h+1],S=this.distance(l,m);if(s+=S,s>r)return Wc(l,m,(r-(s-S))/S)}return e[e.length-1]}pointToSegmentDistance(e,r,s){let[h,l]=r,m=kl(s[0]-h)*this.kx,S=(s[1]-l)*this.ky;if(m!==0||S!==0){const O=(kl(e[0]-h)*this.kx*m+(e[1]-l)*this.ky*S)/(m*m+S*S);O>1?(h=s[0],l=s[1]):O>0&&(h+=m/this.kx*O,l+=S/this.ky*O)}return m=kl(e[0]-h)*this.kx,S=(e[1]-l)*this.ky,Math.sqrt(m*m+S*S)}pointOnLine(e,r){let s=1/0,h=e[0][0],l=e[0][1],m=0,S=0;for(let O=0;O<e.length-1;O++){let z=e[O][0],w=e[O][1],R=kl(e[O+1][0]-z)*this.kx,N=(e[O+1][1]-w)*this.ky,P=0;R===0&&N===0||(P=(kl(r[0]-z)*this.kx*R+(r[1]-w)*this.ky*N)/(R*R+N*N),P>1?(z=e[O+1][0],w=e[O+1][1]):P>0&&(z+=R/this.kx*P,w+=N/this.ky*P)),R=kl(r[0]-z)*this.kx,N=(r[1]-w)*this.ky;const D=R*R+N*N;D<s&&(s=D,h=z,l=w,m=O,S=P)}return{point:[h,l],index:m,t:Math.max(0,Math.min(1,S))}}lineSlice(e,r,s){let h=this.pointOnLine(s,e),l=this.pointOnLine(s,r);if(h.index>l.index||h.index===l.index&&h.t>l.t){const z=h;h=l,l=z}const m=[h.point],S=h.index+1,O=l.index;!Pd(s[S],m[0])&&S<=O&&m.push(s[S]);for(let z=S+1;z<=O;z++)m.push(s[z]);return Pd(s[O],l.point)||m.push(l.point),m}lineSliceAlong(e,r,s){let h=0;const l=[];for(let m=0;m<s.length-1;m++){const S=s[m],O=s[m+1],z=this.distance(S,O);if(h+=z,h>e&&l.length===0&&l.push(Wc(S,O,(e-(h-z))/z)),h>=r)return l.push(Wc(S,O,(r-(h-z))/z)),l;h>e&&l.push(O)}return l}bufferPoint(e,r){const s=r/this.ky,h=r/this.kx;return[e[0]-h,e[1]-s,e[0]+h,e[1]+s]}bufferBBox(e,r){const s=r/this.ky,h=r/this.kx;return[e[0]-h,e[1]-s,e[2]+h,e[3]+s]}insideBBox(e,r){return kl(e[0]-r[0])>=0&&kl(e[0]-r[2])<=0&&e[1]>=r[1]&&e[1]<=r[3]}}function Pd(a,e){return a[0]===e[0]&&a[1]===e[1]}function Wc(a,e,r){const s=kl(e[0]-a[0]);return[a[0]+s*r,a[1]+(e[1]-a[1])*r]}function kl(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}class zt{constructor(e=[],r=(s,h)=>s<h?-1:s>h?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:s}=this,h=r[e];for(;e>0;){const l=e-1>>1,m=r[l];if(s(h,m)>=0)break;r[e]=m,e=l}r[e]=h}_down(e){const{data:r,compare:s}=this,h=this.length>>1,l=r[e];for(;e<h;){let m=1+(e<<1);const S=m+1;if(S<this.length&&s(r[S],r[m])<0&&(m=S),s(r[m],l)>=0)break;r[e]=r[m],e=m}r[e]=l}}var Ft=8192;function Tn(a,e){return e.dist-a.dist}const vr=100,cr=50;function Nr(a){const e=[1/0,1/0,-1/0,-1/0];if(e.length!==a.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==a[r])return!1;return!0}function Lr(a){return a[1]-a[0]+1}function Qr(a,e){const r=a[1]>=a[0]&&a[1]<e;return r||console.warn("Distance Expression: Index is out of range"),r}function ui(a,e){if(a[0]>a[1])return[null,null];const r=Lr(a);if(e){if(r===2)return[a,null];const s=Math.floor(r/2);return[[a[0],a[0]+s],[a[0]+s,a[1]]]}{if(r===1)return[a,null];const s=Math.floor(r/2)-1;return[[a[0],a[0]+s],[a[0]+s+1,a[1]]]}}function Ii(a,e){const r=[1/0,1/0,-1/0,-1/0];if(!Qr(e,a.length))return r;for(let s=e[0];s<=e[1];++s)du(r,a[s]);return r}function Ur(a){const e=[1/0,1/0,-1/0,-1/0];for(let r=0;r<a.length;++r)for(let s=0;s<a[r].length;++s)du(e,a[r][s]);return e}function Ai(a,e,r){if(Nr(a)||Nr(e))return NaN;let s=0,h=0;return a[2]<e[0]&&(s=e[0]-a[2]),a[0]>e[2]&&(s=a[0]-e[2]),a[1]>e[3]&&(h=a[1]-e[3]),a[3]<e[1]&&(h=e[1]-a[3]),r.distance([0,0],[s,h])}function Zi(a){return 360*a-180}function Ji(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function no(a,e){const r=Math.pow(2,e.z),s=(a.y/Ft+e.y)/r;return[Zi((a.x/Ft+e.x)/r),Ji(s)]}function Lo(a,e){const r=[];for(let s=0;s<a.length;++s)r.push(no(a[s],e));return r}function mo(a,e,r){const s=r.pointOnLine(e,a).point;return r.distance(a,s)}function Po(a,e,r,s,h){const l=r.slice(s[0],s[1]+1);let m=1/0;for(let S=e[0];S<=e[1];++S)if((m=Math.min(m,mo(a[S],l,h)))===0)return 0;return m}function I(a,e,r,s,h){const l=Math.min(h.pointToSegmentDistance(a,r,s),h.pointToSegmentDistance(e,r,s)),m=Math.min(h.pointToSegmentDistance(r,a,e),h.pointToSegmentDistance(s,a,e));return Math.min(l,m)}function c(a,e,r,s,h){if(!Qr(e,a.length)||!Qr(s,r.length))return NaN;let l=1/0;for(let m=e[0];m<e[1];++m)for(let S=s[0];S<s[1];++S){if(Al(a[m],a[m+1],r[S],r[S+1]))return 0;l=Math.min(l,I(a[m],a[m+1],r[S],r[S+1],h))}return l}function f(a,e,r,s,h){if(!Qr(e,a.length)||!Qr(s,r.length))return NaN;let l=1/0;for(let m=e[0];m<=e[1];++m)for(let S=s[0];S<=s[1];++S)if((l=Math.min(l,h.distance(a[m],r[S])))===0)return l;return l}function T(a,e,r){if(Qs(a,e,!0))return 0;let s=1/0;for(const h of e){const l=h.length;if(l<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(h[0]!==h[l-1]&&(s=Math.min(s,r.pointToSegmentDistance(a,h[l-1],h[0])))===0||(s=Math.min(s,mo(a,h,r)))===0)return s}return s}function W(a,e,r,s){if(!Qr(e,a.length))return NaN;for(let l=e[0];l<=e[1];++l)if(Qs(a[l],r,!0))return 0;let h=1/0;for(let l=e[0];l<e[1];++l)for(const m of r)for(let S=0,O=m.length,z=O-1;S<O;z=S++){if(Al(a[l],a[l+1],m[z],m[S]))return 0;h=Math.min(h,I(a[l],a[l+1],m[z],m[S],s))}return h}function me(a,e){for(const r of a)for(let s=0;s<=r.length-1;++s)if(Qs(r[s],e,!0))return!0;return!1}function ze(a,e,r,s=1/0){const h=Ur(a),l=Ur(e);if(s!==1/0&&Ai(h,l,r)>=s)return s;if(ql(h,l)){if(me(a,e))return 0}else if(me(e,a))return 0;let m=s;for(const S of a)for(let O=0,z=S.length,w=z-1;O<z;w=O++)for(const R of e)for(let N=0,P=R.length,D=P-1;N<P;D=N++){if(Al(S[w],S[O],R[D],R[N]))return 0;m=Math.min(m,I(S[w],S[O],R[D],R[N],r))}return m}function tt(a,e,r,s,h,l,m){if(l===null||m===null)return;const S=Ai(Ii(s,l),Ii(h,m),r);S<e&&a.push({dist:S,range1:l,range2:m})}function It(a,e,r,s,h=1/0){let l=Math.min(s.distance(a[0],r[0][0]),h);if(l===0)return l;const m=new zt([{dist:0,range1:[0,a.length-1],range2:[0,0]}],Tn),S=e?cr:vr,O=Ur(r);for(;m.length;){const z=m.pop();if(z.dist>=l)continue;const w=z.range1;if(Lr(w)<=S){if(!Qr(w,a.length))return NaN;if(e){const R=W(a,w,r,s);if((l=Math.min(l,R))===0)return l}else for(let R=w[0];R<=w[1];++R){const N=T(a[R],r,s);if((l=Math.min(l,N))===0)return l}}else{const R=ui(w,e);if(R[0]!==null){const N=Ai(Ii(a,R[0]),O,s);N<l&&m.push({dist:N,range1:R[0],range2:[0,0]})}if(R[1]!==null){const N=Ai(Ii(a,R[1]),O,s);N<l&&m.push({dist:N,range1:R[1],range2:[0,0]})}}}return l}function ne(a,e,r,s,h,l=1/0){let m=Math.min(l,h.distance(a[0],r[0]));if(m===0)return m;const S=new zt([{dist:0,range1:[0,a.length-1],range2:[0,r.length-1]}],Tn),O=e?cr:vr,z=s?cr:vr;for(;S.length;){const w=S.pop();if(w.dist>=m)continue;const R=w.range1,N=w.range2;if(Lr(R)<=O&&Lr(N)<=z){if(!Qr(R,a.length)||!Qr(N,r.length))return NaN;if(e&&s?m=Math.min(m,c(a,R,r,N,h)):e||s?e&&!s?m=Math.min(m,Po(r,N,a,R,h)):!e&&s&&(m=Math.min(m,Po(a,R,r,N,h))):m=Math.min(m,f(a,R,r,N,h)),m===0)return m}else{const P=ui(R,e),D=ui(N,s);tt(S,m,h,a,r,P[0],D[0]),tt(S,m,h,a,r,P[0],D[1]),tt(S,m,h,a,r,P[1],D[0]),tt(S,m,h,a,r,P[1],D[1])}}return m}function ge(a,e,r,s,h=1/0){let l=h;const m=Ii(a,[0,a.length-1]);for(const S of r)if(!(l!==1/0&&Ai(m,Ii(S,[0,S.length-1]),s)>=l)&&(l=Math.min(l,ne(a,e,S,!0,s,l)),l===0))return l;return l}function xe(a,e,r,s,h=1/0){let l=h;const m=Ii(a,[0,a.length-1]);for(const S of r){if(l!==1/0&&Ai(m,Ur(S),s)>=l)continue;const O=It(a,e,S,s,l);if(isNaN(O))return O;if((l=Math.min(l,O))===0)return l}return l}function xt(a){return a==="Point"||a==="MultiPoint"||a==="LineString"||a==="MultiLineString"||a==="Polygon"||a==="MultiPolygon"}class pn{constructor(e,r){this.type=Ri,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(Dl(e[1])){const s=e[1];if(s.type==="FeatureCollection"){for(let h=0;h<s.features.length;++h)if(xt(s.features[h].geometry.type))return new pn(s,s.features[h].geometry)}else if(s.type==="Feature"){if(xt(s.geometry.type))return new pn(s,s.geometry)}else if(xt(s.type))return new pn(s,s)}return r.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){const r=e.geometry(),s=e.canonicalID();if(r!=null&&s!=null){if(e.geometryType()==="Point")return function(h,l,m){const S=[];for(const z of h)for(const w of z)S.push(no(w,l));const O=new gc(S[0][1],"meters");return m.type==="Point"||m.type==="MultiPoint"||m.type==="LineString"?ne(S,!1,m.type==="Point"?[m.coordinates]:m.coordinates,m.type==="LineString",O):m.type==="MultiLineString"?ge(S,!1,m.coordinates,O):m.type==="Polygon"||m.type==="MultiPolygon"?xe(S,!1,m.type==="Polygon"?[m.coordinates]:m.coordinates,O):null}(r,s,this.geometries);if(e.geometryType()==="LineString")return function(h,l,m){const S=[];for(const z of h){const w=[];for(const R of z)w.push(no(R,l));S.push(w)}const O=new gc(S[0][0][1],"meters");if(m.type==="Point"||m.type==="MultiPoint"||m.type==="LineString")return ge(m.type==="Point"?[m.coordinates]:m.coordinates,m.type==="LineString",S,O);if(m.type==="MultiLineString"){let z=1/0;for(let w=0;w<m.coordinates.length;w++){const R=ge(m.coordinates[w],!0,S,O,z);if(isNaN(R))return R;if((z=Math.min(z,R))===0)return z}return z}if(m.type==="Polygon"||m.type==="MultiPolygon"){let z=1/0;for(let w=0;w<S.length;w++){const R=xe(S[w],!0,m.type==="Polygon"?[m.coordinates]:m.coordinates,O,z);if(isNaN(R))return R;if((z=Math.min(z,R))===0)return z}return z}return null}(r,s,this.geometries);if(e.geometryType()==="Polygon")return function(h,l,m){const S=[];for(const z of function(w,R){const N=w.length;if(N<=1)return[w];const P=[];let D,G;for(let oe=0;oe<N;oe++){const ce=kc(w[oe]);ce!==0&&(w[oe].area=Math.abs(ce),G===void 0&&(G=ce<0),G===ce<0?(D&&P.push(D),D=[w[oe]]):D.push(w[oe]))}return D&&P.push(D),P}(h)){const w=[];for(let R=0;R<z.length;++R)w.push(Lo(z[R],l));S.push(w)}const O=new gc(S[0][0][0][1],"meters");if(m.type==="Point"||m.type==="MultiPoint"||m.type==="LineString")return xe(m.type==="Point"?[m.coordinates]:m.coordinates,m.type==="LineString",S,O);if(m.type==="MultiLineString"){let z=1/0;for(let w=0;w<m.coordinates.length;w++){const R=xe(m.coordinates[w],!0,S,O,z);if(isNaN(R))return R;if((z=Math.min(z,R))===0)return z}return z}return m.type==="Polygon"||m.type==="MultiPolygon"?function(z,w,R){let N=1/0;for(const P of z)for(const D of w){const G=ze(P,D,R,N);if(isNaN(G))return G;if((N=Math.min(N,G))===0)return N}return N}(m.type==="Polygon"?[m.coordinates]:m.coordinates,S,O):null}(r,s,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Mn(a,e){switch(a){case"string":return ws(e);case"number":return+e;case"boolean":return!!e;case"color":return Uo.parse(e);case"formatted":return Fs.fromString(ws(e));case"resolvedImage":return cs.build(ws(e))}return e}function Hn(a,e,r,s){return s!==void 0&&(a=s*Math.round(a/s)),e!==void 0&&a<e&&(a=e),r!==void 0&&a>r&&(a=r),a}class Qn{constructor(e,r,s){this.type=e,this.key=r,this.scope=s}static parse(e,r){let s=r.expectedType;if(s==null&&(s=Jo),e.length<2||e.length>3)return r.error("Invalid number of arguments for 'config' expression.");const h=r.parse(e[1],1);if(!(h instanceof ps))return r.error("Key name of 'config' expression must be a string literal.");if(e.length>=3){const l=r.parse(e[2],2);return l instanceof ps?new Qn(s,ws(h.value),ws(l.value)):r.error("Scope of 'config' expression must be a string literal.")}return new Qn(s,ws(h.value))}evaluate(e){const r=[this.key,this.scope,e.scope].filter(Boolean).join(""),s=e.getConfig(r);if(!s)return null;const{type:h,value:l,values:m,minValue:S,maxValue:O,stepValue:z}=s,w=s.default.evaluate(e);let R=w;if(l){const N=e.scope;e.scope=(N||"").split("").slice(1).join(""),R=l.evaluate(e),e.scope=N}return h&&(R=Mn(h,R)),R===void 0||S===void 0&&O===void 0&&z===void 0||(typeof R=="number"?R=Hn(R,S,O,z):Array.isArray(R)&&(R=R.map(N=>typeof N=="number"?Hn(N,S,O,z):N))),l!==void 0&&R!==void 0&&m&&!m.includes(R)&&(R=w,h&&(R=Mn(h,R))),(h&&h!==this.type||R!==void 0&&fs(R)!==this.type)&&(R=Mn(this.type.kind,R)),R}eachChild(){}outputDefined(){return!1}serialize(){const e=["config",this.key];return this.scope&&e.concat(this.key),e}}function tr(a){if(a instanceof ms&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Io||a instanceof pn)return!1;let e=!0;return a.eachChild(r=>{e&&!tr(r)&&(e=!1)}),e}function Ir(a){if(a instanceof ms&&a.name==="feature-state")return!1;let e=!0;return a.eachChild(r=>{e&&!Ir(r)&&(e=!1)}),e}function oi(a){if(a instanceof Qn)return new Set([a.key]);let e=new Set;return a.eachChild(r=>{e=new Set([...e,...oi(r)])}),e}function ni(a,e){if(a instanceof ms&&e.indexOf(a.name)>=0)return!1;let r=!0;return a.eachChild(s=>{r&&!ni(s,e)&&(r=!1)}),r}class _i{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const s=e[1];return r.scope.has(s)?new _i(s,r.scope.get(s)):r.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class wi{constructor(e,r=[],s,h=new Ul,l=[],m,S){this.registry=e,this.path=r,this.key=r.map(O=>typeof O=="string"?`['${O}']`:`[${O}]`).join(""),this.scope=h,this.errors=l,this.expectedType=s,this._scope=m,this.options=S}parse(e,r,s,h,l={}){return r||s?this.concat(r,null,s,h)._parse(e,l):this._parse(e,l)}parseObjectValue(e,r,s,h,l,m={}){return this.concat(r,s,h,l)._parse(e,m)}_parse(e,r){function s(h,l,m){return m==="assert"?new Es(l,[h]):m==="coerce"?new Pu(l,[h]):h}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=typeof e[0]=="string"?this.registry[e[0]]:void 0;if(h){let l=h.parse(e,this);if(!l)return null;if(this.expectedType){const m=this.expectedType,S=l.type;if(m.kind!=="string"&&m.kind!=="number"&&m.kind!=="boolean"&&m.kind!=="object"&&m.kind!=="array"||S.kind!=="value")if(m.kind!=="color"&&m.kind!=="formatted"&&m.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(m,S))return null}else l=s(l,m,r.typeAnnotation||"coerce");else l=s(l,m,r.typeAnnotation||"assert")}if(!(l instanceof ps)&&l.type.kind!=="resolvedImage"&&So(l)){const m=new Ql(this._scope,this.options);try{l=new ps(l.type,l.evaluate(m))}catch(S){return this.error(S.message),null}}return l}return Pu.parse(["to-array",e],this)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,s,h){let l=typeof e=="number"?this.path.concat(e):this.path;l=typeof r=="string"?l.concat(r):l;const m=h?this.scope.concat(h):this.scope;return new wi(this.registry,l,s||null,m,this.errors,this._scope,this.options)}error(e,...r){const s=`${this.key}${r.map(h=>`[${h}]`).join("")}`;this.errors.push(new ho(s,e))}checkSubtype(e,r){const s=la(e,r);return s&&this.error(s),s}}var Si=wi;function So(a){if(a instanceof _i)return So(a.boundExpression);if(a instanceof ms&&a.name==="error"||a instanceof Tc||a instanceof Io||a instanceof pn||a instanceof Qn)return!1;const e=a instanceof Pu||a instanceof Es;let r=!0;return a.eachChild(s=>{r=e?r&&So(s):r&&s instanceof ps}),!!r&&tr(a)&&ni(a,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function io(a,e){const r=a.length-1;let s,h,l=0,m=r,S=0;for(;l<=m;)if(S=Math.floor((l+m)/2),s=a[S],h=a[S+1],s<=e){if(S===r||e<h)return S;l=S+1}else{if(!(s>e))throw new Za("Input is not a number.");m=S-1}return 0}class Wi{constructor(e,r,s){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[h,l]of s)this.labels.push(h),this.outputs.push(l)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const s=r.parse(e[1],1,Ri);if(!s)return null;const h=[];let l=null;r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);for(let m=1;m<e.length;m+=2){const S=m===1?-1/0:e[m],O=e[m+1],z=m,w=m+1;if(typeof S!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(h.length&&h[h.length-1][0]>=S)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const R=r.parse(O,w,l);if(!R)return null;l=l||R.type,h.push([S,R])}return new Wi(l,s,h)}evaluate(e){const r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(e);const h=this.input.evaluate(e);if(h<=r[0])return s[0].evaluate(e);const l=r.length;return h>=r[l-1]?s[l-1].evaluate(e):s[io(r,h)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}const xo=.95047,Qi=1.08883,Ho=4/29,La=6/29,as=3*La*La,Ja=La*La*La,Rs=Math.PI/180,Go=180/Math.PI;function Ti(a){return a>Ja?Math.pow(a,.3333333333333333):a/as+Ho}function Ei(a){return a>La?a*a*a:as*(a-Ho)}function fr(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,.4166666666666667)-.055)}function nr(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function _r(a){const e=nr(a.r),r=nr(a.g),s=nr(a.b),h=Ti((.4124564*e+.3575761*r+.1804375*s)/xo),l=Ti((.2126729*e+.7151522*r+.072175*s)/1);return{l:116*l-16,a:500*(h-l),b:200*(l-Ti((.0193339*e+.119192*r+.9503041*s)/Qi)),alpha:a.a}}function ei(a){let e=(a.l+16)/116,r=isNaN(a.a)?e:e+a.a/500,s=isNaN(a.b)?e:e-a.b/200;return e=1*Ei(e),r=xo*Ei(r),s=Qi*Ei(s),new Uo(fr(3.2404542*r-1.5371385*e-.4985314*s),fr(-.969266*r+1.8760108*e+.041556*s),fr(.0556434*r-.2040259*e+1.0572252*s),a.alpha)}function Xr(a,e,r){const s=e-a;return a+r*(s>180||s<-180?s-360*Math.round(s/360):s)}const fi={forward:_r,reverse:ei,interpolate:function(a,e,r){return{l:$i(a.l,e.l,r),a:$i(a.a,e.a,r),b:$i(a.b,e.b,r),alpha:$i(a.alpha,e.alpha,r)}}},Vi={forward:function(a){const{l:e,a:r,b:s}=_r(a),h=Math.atan2(s,r)*Go;return{h:h<0?h+360:h,c:Math.sqrt(r*r+s*s),l:e,alpha:a.a}},reverse:function(a){const e=a.h*Rs,r=a.c;return ei({l:a.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:a.alpha})},interpolate:function(a,e,r){return{h:Xr(a.h,e.h,r),c:$i(a.c,e.c,r),l:$i(a.l,e.l,r),alpha:$i(a.alpha,e.alpha,r)}}};var vo=Object.freeze({__proto__:null,hcl:Vi,lab:fi});class Ro{constructor(e,r,s,h,l,m){this.type=e,this.operator=r,this.interpolation=s,this.input=h,this.dynamicStops=l,this.labels=[],this.outputs=[];for(const[S,O]of m)this.labels.push(S),this.outputs.push(O)}static interpolationFactor(e,r,s,h){let l=0;if(e.name==="exponential")l=_a(r,e.base,s,h);else if(e.name==="linear")l=_a(r,1,s,h);else if(e.name==="cubic-bezier"){const m=e.controlPoints;l=new we(m[0],m[1],m[2],m[3]).solve(_a(r,1,s,h))}return l}static parse(e,r){let[s,h,l,...m]=e;if(!Array.isArray(h)||h.length===0)return r.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const z=h[1];if(typeof z!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:z}}else{if(h[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const z=h.slice(1);if(z.length!==4||z.some(w=>typeof w!="number"||w<0||w>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:z}}}if(e.length-1<3)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length-1>3&&(e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(l=r.parse(l,2,Ri),!l)return null;const S=[];let O=null;if(s==="interpolate-hcl"||s==="interpolate-lab"?O=ts:r.expectedType&&r.expectedType.kind!=="value"&&(O=r.expectedType),e.length-1==3){const z=r.parse(m[0],3,Jo);return z?new Ro(O,s,h,l,z,S):null}for(let z=0;z<m.length;z+=2){const w=m[z],R=m[z+1],N=z+3,P=z+4;if(typeof w!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(S.length&&S[S.length-1][0]>=w)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const D=r.parse(R,P,O);if(!D)return null;O=O||D.type,S.push([w,D])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new Ro(O,s,h,l,null,S):r.error(`Type ${qi(O)} is not interpolatable.`)}evaluate(e){let r=this.labels,s=this.outputs;if(this.dynamicStops){const w=this.dynamicStops.evaluate(e);if(w.length%2!=0)throw new Za("Expected an even number of arguments.");r=[],s=[];for(let R=0;R<w.length;R+=2){const N=w[R],P=new ps(Ri,w[R+1]);if(typeof N!="number")throw new Za('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.');if(r.length&&r[r.length-1]>=N)throw new Za('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.');r.push(N),s.push(P)}if(r.length===0)throw new Za("Expected at least one input/output pair.")}if(r.length===1)return s[0].evaluate(e);const h=this.input.evaluate(e);if(h<=r[0])return s[0].evaluate(e);const l=r.length;if(h>=r[l-1])return s[l-1].evaluate(e);const m=io(r,h),S=Ro.interpolationFactor(this.interpolation,h,r[m],r[m+1]),O=s[m].evaluate(e),z=s[m+1].evaluate(e);return this.operator==="interpolate"?Ll[this.type.kind.toLowerCase()](O,z,S):this.operator==="interpolate-hcl"?Vi.reverse(Vi.interpolate(Vi.forward(O),Vi.forward(z),S)):fi.reverse(fi.interpolate(fi.forward(O),fi.forward(z),S))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];if(this.dynamicStops)r.push(this.dynamicStops.serialize());else for(let s=0;s<this.labels.length;s++)r.push(this.labels[s],this.outputs[s].serialize());return r}}function _a(a,e,r,s){const h=s-r,l=a-r;return h===0?0:e===1?l/h:(Math.pow(e,l)-1)/(Math.pow(e,h)-1)}class ca{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let s=null;const h=r.expectedType;h&&h.kind!=="value"&&(s=h);const l=[];for(const S of e.slice(1)){const O=r.parse(S,1+l.length,s,void 0,{typeAnnotation:"omit"});if(!O)return null;s=s||O.type,l.push(O)}const m=h&&l.some(S=>la(h,S.type));return new ca(m?Jo:s,l)}evaluate(e){let r,s=null,h=0;for(const l of this.args){if(h++,s=l.evaluate(e),s&&s instanceof cs&&!s.available&&(r||(r=s),s=null,h===this.args.length))return r;if(s!==null)break}return s}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}class ta{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const s=[];for(let l=1;l<e.length-1;l+=2){const m=e[l];if(typeof m!="string")return r.error(`Expected string, but found ${typeof m} instead.`,l);if(/[^a-zA-Z0-9_]/.test(m))return r.error("Variable names must contain only alphanumeric characters or '_'.",l);const S=r.parse(e[l+1],l+1);if(!S)return null;s.push([m,S])}const h=r.parse(e[e.length-1],e.length-1,r.expectedType,s);return h?new ta(s,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,s]of this.bindings)e.push(r,s.serialize());return e.push(this.result.serialize()),e}}class ds{constructor(e,r,s){this.type=e,this.index=r,this.input=s}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=r.parse(e[1],1,Ri),h=r.parse(e[2],2,oo(r.expectedType||Jo));return s&&h?new ds(h.type.itemType,s,h):null}evaluate(e){const r=this.index.evaluate(e),s=this.input.evaluate(e);if(r<0)throw new Za(`Array index out of bounds: ${r} < 0.`);if(r>s.length-1)throw new Za(`Array index out of bounds: ${r} > ${s.length-1}.`);if(r===Math.floor(r))return s[r];const h=Math.floor(r),l=Math.ceil(r),m=s[h],S=s[l];if(typeof m!="number"||typeof S!="number")throw new Za(`Cannot interpolate between non-number values at index ${r}.`);const O=r-h;return m*(1-O)+S*O}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class iu{constructor(e,r){this.type=fo,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=r.parse(e[1],1,Jo),h=r.parse(e[2],2,Jo);return s&&h?Os(s.type,[fo,Wo,Ri,Ml,Jo])?new iu(s,h):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${qi(s.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(s==null)return!1;if(!Vl(r,["boolean","string","number","null"]))throw new Za(`Expected first argument to be of type boolean, string, number or null, but found ${qi(fs(r))} instead.`);if(!Vl(s,["string","array"]))throw new Za(`Expected second argument to be of type array or string, but found ${qi(fs(s))} instead.`);return s.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ks{constructor(e,r,s){this.type=Ri,this.needle=e,this.haystack=r,this.fromIndex=s}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=r.parse(e[1],1,Jo),h=r.parse(e[2],2,Jo);if(!s||!h)return null;if(!Os(s.type,[fo,Wo,Ri,Ml,Jo]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${qi(s.type)} instead`);if(e.length===4){const l=r.parse(e[3],3,Ri);return l?new Ks(s,h,l):null}return new Ks(s,h)}evaluate(e){const r=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!Vl(r,["boolean","string","number","null"]))throw new Za(`Expected first argument to be of type boolean, string, number or null, but found ${qi(fs(r))} instead.`);if(!Vl(s,["string","array"]))throw new Za(`Expected second argument to be of type array or string, but found ${qi(fs(s))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(e);return s.indexOf(r,h)}return s.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ou{constructor(e,r,s,h,l,m){this.inputType=e,this.type=r,this.input=s,this.cases=h,this.outputs=l,this.otherwise=m}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let s,h;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);const l={},m=[];for(let z=2;z<e.length-1;z+=2){let w=e[z];const R=e[z+1];Array.isArray(w)||(w=[w]);const N=r.concat(z);if(w.length===0)return N.error("Expected at least one branch label.");for(const D of w){if(typeof D!="number"&&typeof D!="string")return N.error("Branch labels must be numbers or strings.");if(typeof D=="number"&&Math.abs(D)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof D=="number"&&Math.floor(D)!==D)return N.error("Numeric branch labels must be integer values.");if(s){if(N.checkSubtype(s,fs(D)))return null}else s=fs(D);if(l[String(D)]!==void 0)return N.error("Branch labels must be unique.");l[String(D)]=m.length}const P=r.parse(R,z,h);if(!P)return null;h=h||P.type,m.push(P)}const S=r.parse(e[1],1,Jo);if(!S)return null;const O=r.parse(e[e.length-1],e.length-1,h);return O?S.type.kind!=="value"&&r.concat(1).checkSubtype(s,S.type)?null:new Ou(s,h,S,l,m,O):null}evaluate(e){const r=this.input.evaluate(e);return(fs(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),s=[],h={};for(const m of r){const S=h[this.cases[m]];S===void 0?(h[this.cases[m]]=s.length,s.push([this.cases[m],[m]])):s[S][1].push(m)}const l=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,S]of s)e.push(S.length===1?l(S[0]):S.map(l)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}class bl{constructor(e,r,s){this.type=e,this.branches=r,this.otherwise=s}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let s;r.expectedType&&r.expectedType.kind!=="value"&&(s=r.expectedType);const h=[];for(let m=1;m<e.length-1;m+=2){const S=r.parse(e[m],m,fo);if(!S)return null;const O=r.parse(e[m+1],m+1,s);if(!O)return null;h.push([S,O]),s=s||O.type}const l=r.parse(e[e.length-1],e.length-1,s);return l?new bl(s,h,l):null}evaluate(e){for(const[r,s]of this.branches)if(r.evaluate(e))return s.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,s]of this.branches)e(r),e(s);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}class vs{constructor(e,r,s,h){this.type=e,this.input=r,this.beginIndex=s,this.endIndex=h}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=r.parse(e[1],1,Jo),h=r.parse(e[2],2,Ri);if(!s||!h)return null;if(!Os(s.type,[oo(Jo),Wo,Jo]))return r.error(`Expected first argument to be of type array or string, but found ${qi(s.type)} instead`);if(e.length===4){const l=r.parse(e[3],3,Ri);return l?new vs(s.type,s,h,l):null}return new vs(s.type,s,h)}evaluate(e){const r=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!Vl(r,["string","array"]))throw new Za(`Expected first argument to be of type array or string, but found ${qi(fs(r))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(e);return r.slice(s,h)}return r.slice(s)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Co(a,e){return a==="=="||a==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Pl(a,e,r,s){return s.compare(e,r)===0}function As(a,e,r){const s=a!=="=="&&a!=="!=";return class Fb{constructor(l,m,S){this.type=fo,this.lhs=l,this.rhs=m,this.collator=S,this.hasUntypedArgument=l.type.kind==="value"||m.type.kind==="value"}static parse(l,m){if(l.length!==3&&l.length!==4)return m.error("Expected two or three arguments.");const S=l[0];let O=m.parse(l[1],1,Jo);if(!O)return null;if(!Co(S,O.type))return m.concat(1).error(`"${S}" comparisons are not supported for type '${qi(O.type)}'.`);let z=m.parse(l[2],2,Jo);if(!z)return null;if(!Co(S,z.type))return m.concat(2).error(`"${S}" comparisons are not supported for type '${qi(z.type)}'.`);if(O.type.kind!==z.type.kind&&O.type.kind!=="value"&&z.type.kind!=="value")return m.error(`Cannot compare types '${qi(O.type)}' and '${qi(z.type)}'.`);s&&(O.type.kind==="value"&&z.type.kind!=="value"?O=new Es(z.type,[O]):O.type.kind!=="value"&&z.type.kind==="value"&&(z=new Es(O.type,[z])));let w=null;if(l.length===4){if(O.type.kind!=="string"&&z.type.kind!=="string"&&O.type.kind!=="value"&&z.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(w=m.parse(l[3],3,Jl),!w)return null}return new Fb(O,z,w)}evaluate(l){const m=this.lhs.evaluate(l),S=this.rhs.evaluate(l);if(s&&this.hasUntypedArgument){const O=fs(m),z=fs(S);if(O.kind!==z.kind||O.kind!=="string"&&O.kind!=="number")throw new Za(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${O.kind}, ${z.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const O=fs(m),z=fs(S);if(O.kind!=="string"||z.kind!=="string")return e(l,m,S)}return this.collator?r(l,m,S,this.collator.evaluate(l)):e(l,m,S)}eachChild(l){l(this.lhs),l(this.rhs),this.collator&&l(this.collator)}outputDefined(){return!0}serialize(){const l=[a];return this.eachChild(m=>{l.push(m.serialize())}),l}}}const nl=As("==",function(a,e,r){return e===r},Pl),Ol=As("!=",function(a,e,r){return e!==r},function(a,e,r,s){return!Pl(0,e,r,s)}),Ac=As("<",function(a,e,r){return e<r},function(a,e,r,s){return s.compare(e,r)<0}),Su=As(">",function(a,e,r){return e>r},function(a,e,r,s){return s.compare(e,r)>0}),Bs=As("<=",function(a,e,r){return e<=r},function(a,e,r,s){return s.compare(e,r)<=0}),hs=As(">=",function(a,e,r){return e>=r},function(a,e,r,s){return s.compare(e,r)>=0});class ou{constructor(e,r,s,h,l,m){this.type=Wo,this.number=e,this.locale=r,this.currency=s,this.unit=h,this.minFractionDigits=l,this.maxFractionDigits=m}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const s=r.parse(e[1],1,Ri);if(!s)return null;const h=e[2];if(typeof h!="object"||Array.isArray(h))return r.error("NumberFormat options argument must be an object.");let l=null;if(h.locale&&(l=r.parseObjectValue(h.locale,2,"locale",Wo),!l))return null;let m=null;if(h.currency&&(m=r.parseObjectValue(h.currency,2,"currency",Wo),!m))return null;let S=null;if(h.unit&&(S=r.parseObjectValue(h.unit,2,"unit",Wo),!S))return null;let O=null;if(h["min-fraction-digits"]&&(O=r.parseObjectValue(h["min-fraction-digits"],2,"min-fraction-digits",Ri),!O))return null;let z=null;return h["max-fraction-digits"]&&(z=r.parseObjectValue(h["max-fraction-digits"],2,"max-fraction-digits",Ri),!z)?null:new ou(s,l,m,S,O,z)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class fl{constructor(e){this.type=Ri,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const s=r.parse(e[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${qi(s.type)} instead.`):new fl(s):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Za(`Expected value to be of type string or array, but found ${qi(fs(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}function pl(a){return function(){a=1831565813+(a|=0)|0;let e=Math.imul(a^a>>>15,1|a);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}const Rl={"==":nl,"!=":Ol,">":Su,"<":Ac,">=":hs,"<=":Bs,array:Es,at:ds,boolean:Es,case:bl,coalesce:ca,collator:Tc,format:xu,image:Yu,in:iu,"index-of":Ks,interpolate:Ro,"interpolate-hcl":Ro,"interpolate-lab":Ro,length:fl,let:ta,literal:ps,match:Ou,number:Es,"number-format":ou,object:Es,slice:vs,step:Wi,string:Es,"to-boolean":Pu,"to-color":Pu,"to-number":Pu,"to-string":Pu,var:_i,within:Io,distance:pn,config:Qn};function au(a,[e,r,s,h]){e=e.evaluate(a),r=r.evaluate(a),s=s.evaluate(a);const l=h?h.evaluate(a):1,m=Gl(e,r,s,l);if(m)throw new Za(m);return new Uo(e/255*l,r/255*l,s/255*l,l)}function Xu(a,[e,r,s,h]){e=e.evaluate(a),r=r.evaluate(a),s=s.evaluate(a);const l=h?h.evaluate(a):1,m=function(z,w,R,N){return typeof z=="number"&&z>=0&&z<=360?typeof w=="number"&&w>=0&&w<=100&&typeof R=="number"&&R>=0&&R<=100?N===void 0||typeof N=="number"&&N>=0&&N<=1?null:`Invalid hsla value [${[z,w,R,N].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof N=="number"?[z,w,R,N]:[z,w,R]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof N=="number"?[z,w,R,N]:[z,w,R]).join(", ")}]: 'h' must be between 0 and 360.`}(e,r,s,l);if(m)throw new Za(m);const S=`hsla(${e}, ${r}%, ${s}%, ${l})`,O=Uo.parse(S);if(!O)throw new Za(`Failed to parse HSLA color: ${S}`);return O}function Ys(a,e){return a in e}function sc(a,e){const r=e[a];return r===void 0?null:r}function hu(a){return{type:a}}function vc(a){return{result:"success",value:a}}function js(a){return{result:"error",value:a}}function lc(a,e){return!!a&&!!a.parameters&&a.parameters.indexOf(e)>-1}function $l(a){return a["property-type"]==="data-driven"}function tu(a){return lc(a.expression,"measure-light")}function zu(a){return lc(a.expression,"zoom")}function _s(a){return!!a.expression&&a.expression.interpolated}function Xi(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Qo(a){return a}function Ua(a,e){const r=e.type==="color",s=a.stops&&typeof a.stops[0][0]=="object",h=s||!(s||a.property!==void 0),l=a.type||(_s(e)?"exponential":"interval");if(r&&((a=hl({},a)).stops&&(a.stops=a.stops.map(z=>[z[0],Uo.parse(z[1])])),a.default=Uo.parse(a.default?a.default:e.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!vo[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let m,S,O;if(l==="exponential")m=Tu;else if(l==="interval")m=Ls;else if(l==="categorical"){m=ml,S=Object.create(null);for(const z of a.stops)S[z[0]]=z[1];O=typeof a.stops[0][0]}else{if(l!=="identity")throw new Error(`Unknown function type "${l}"`);m=Hc}if(s){const z={},w=[];for(let P=0;P<a.stops.length;P++){const D=a.stops[P],G=D[0].zoom;z[G]===void 0&&(z[G]={zoom:G,type:a.type,property:a.property,default:a.default,stops:[]},w.push(G)),z[G].stops.push([D[0].value,D[1]])}const R=[];for(const P of w)R.push([z[P].zoom,Ua(z[P],e)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:Ro.interpolationFactor.bind(void 0,N),zoomStops:R.map(P=>P[0]),evaluate:({zoom:P},D)=>Tu({stops:R,base:a.base},e,P).evaluate(P,D)}}if(h){const z=l==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Ro.interpolationFactor.bind(void 0,z),zoomStops:a.stops.map(w=>w[0]),evaluate:({zoom:w})=>m(a,e,w,S,O)}}return{kind:"source",evaluate(z,w){const R=w&&w.properties?w.properties[a.property]:void 0;return R===void 0?al(a.default,e.default):m(a,e,R,S,O)}}}function al(a,e,r){return a!==void 0?a:e!==void 0?e:r!==void 0?r:void 0}function ml(a,e,r,s,h){return al(typeof r===h?s[r]:void 0,a.default,e.default)}function Ls(a,e,r){if(ol(r)!=="number")return al(a.default,e.default);const s=a.stops.length;if(s===1||r<=a.stops[0][0])return a.stops[0][1];if(r>=a.stops[s-1][0])return a.stops[s-1][1];const h=io(a.stops.map(l=>l[0]),r);return a.stops[h][1]}function Tu(a,e,r){const s=a.base!==void 0?a.base:1;if(ol(r)!=="number")return al(a.default,e.default);const h=a.stops.length;if(h===1||r<=a.stops[0][0])return a.stops[0][1];if(r>=a.stops[h-1][0])return a.stops[h-1][1];const l=io(a.stops.map(w=>w[0]),r),m=function(w,R,N,P){const D=P-N,G=w-N;return D===0?0:R===1?G/D:(Math.pow(R,G)-1)/(Math.pow(R,D)-1)}(r,s,a.stops[l][0],a.stops[l+1][0]),S=a.stops[l][1],O=a.stops[l+1][1];let z=Ll[e.type]||Qo;if(a.colorSpace&&a.colorSpace!=="rgb"){const w=vo[a.colorSpace];z=(R,N)=>w.reverse(w.interpolate(w.forward(R),w.forward(N),m))}return typeof S.evaluate=="function"?{evaluate(...w){const R=S.evaluate.apply(void 0,w),N=O.evaluate.apply(void 0,w);if(R!==void 0&&N!==void 0)return z(R,N,m)}}:z(S,O,m)}function Hc(a,e,r){return e.type==="color"?r=Uo.parse(r):e.type==="formatted"?r=Fs.fromString(r.toString()):e.type==="resolvedImage"?r=cs.build(r.toString()):ol(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),al(r,a.default,e.default)}ms.register(Rl,{error:[{kind:"error"},[Wo],(a,[e])=>{throw new Za(e.evaluate(a))}],typeof:[Wo,[Jo],(a,[e])=>qi(fs(e.evaluate(a)))],"to-rgba":[oo(Ri,4),[ts],(a,[e])=>e.evaluate(a).toRenderColor(null).toArray()],"to-hsla":[oo(Ri,4),[ts],(a,[e])=>e.evaluate(a).toRenderColor(null).toHslaArray()],rgb:[ts,[Ri,Ri,Ri],au],rgba:[ts,[Ri,Ri,Ri,Ri],au],hsl:[ts,[Ri,Ri,Ri],Xu],hsla:[ts,[Ri,Ri,Ri,Ri],Xu],has:{type:fo,overloads:[[[Wo],(a,[e])=>Ys(e.evaluate(a),a.properties())],[[Wo,il],(a,[e,r])=>Ys(e.evaluate(a),r.evaluate(a))]]},get:{type:Jo,overloads:[[[Wo],(a,[e])=>sc(e.evaluate(a),a.properties())],[[Wo,il],(a,[e,r])=>sc(e.evaluate(a),r.evaluate(a))]]},"feature-state":[Jo,[Wo],(a,[e])=>sc(e.evaluate(a),a.featureState||{})],properties:[il,[],a=>a.properties()],"geometry-type":[Wo,[],a=>a.geometryType()],id:[Jo,[],a=>a.id()],zoom:[Ri,[],a=>a.globals.zoom],pitch:[Ri,[],a=>a.globals.pitch||0],"distance-from-center":[Ri,[],a=>a.distanceFromCenter()],"measure-light":[Ri,[Wo],(a,[e])=>a.measureLight(e.evaluate(a))],"heatmap-density":[Ri,[],a=>a.globals.heatmapDensity||0],"line-progress":[Ri,[],a=>a.globals.lineProgress||0],"raster-value":[Ri,[],a=>a.globals.rasterValue||0],"raster-particle-speed":[Ri,[],a=>a.globals.rasterParticleSpeed||0],"sky-radial-progress":[Ri,[],a=>a.globals.skyRadialProgress||0],accumulated:[Jo,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Ri,hu(Ri),(a,e)=>{let r=0;for(const s of e)r+=s.evaluate(a);return r}],"*":[Ri,hu(Ri),(a,e)=>{let r=1;for(const s of e)r*=s.evaluate(a);return r}],"-":{type:Ri,overloads:[[[Ri,Ri],(a,[e,r])=>e.evaluate(a)-r.evaluate(a)],[[Ri],(a,[e])=>-e.evaluate(a)]]},"/":[Ri,[Ri,Ri],(a,[e,r])=>e.evaluate(a)/r.evaluate(a)],"%":[Ri,[Ri,Ri],(a,[e,r])=>e.evaluate(a)%r.evaluate(a)],ln2:[Ri,[],()=>Math.LN2],pi:[Ri,[],()=>Math.PI],e:[Ri,[],()=>Math.E],"^":[Ri,[Ri,Ri],(a,[e,r])=>Math.pow(e.evaluate(a),r.evaluate(a))],sqrt:[Ri,[Ri],(a,[e])=>Math.sqrt(e.evaluate(a))],log10:[Ri,[Ri],(a,[e])=>Math.log(e.evaluate(a))/Math.LN10],ln:[Ri,[Ri],(a,[e])=>Math.log(e.evaluate(a))],log2:[Ri,[Ri],(a,[e])=>Math.log(e.evaluate(a))/Math.LN2],sin:[Ri,[Ri],(a,[e])=>Math.sin(e.evaluate(a))],cos:[Ri,[Ri],(a,[e])=>Math.cos(e.evaluate(a))],tan:[Ri,[Ri],(a,[e])=>Math.tan(e.evaluate(a))],asin:[Ri,[Ri],(a,[e])=>Math.asin(e.evaluate(a))],acos:[Ri,[Ri],(a,[e])=>Math.acos(e.evaluate(a))],atan:[Ri,[Ri],(a,[e])=>Math.atan(e.evaluate(a))],min:[Ri,hu(Ri),(a,e)=>Math.min(...e.map(r=>r.evaluate(a)))],max:[Ri,hu(Ri),(a,e)=>Math.max(...e.map(r=>r.evaluate(a)))],abs:[Ri,[Ri],(a,[e])=>Math.abs(e.evaluate(a))],round:[Ri,[Ri],(a,[e])=>{const r=e.evaluate(a);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ri,[Ri],(a,[e])=>Math.floor(e.evaluate(a))],ceil:[Ri,[Ri],(a,[e])=>Math.ceil(e.evaluate(a))],"filter-==":[fo,[Wo,Jo],(a,[e,r])=>a.properties()[e.value]===r.value],"filter-id-==":[fo,[Jo],(a,[e])=>a.id()===e.value],"filter-type-==":[fo,[Wo],(a,[e])=>a.geometryType()===e.value],"filter-<":[fo,[Wo,Jo],(a,[e,r])=>{const s=a.properties()[e.value],h=r.value;return typeof s==typeof h&&s<h}],"filter-id-<":[fo,[Jo],(a,[e])=>{const r=a.id(),s=e.value;return typeof r==typeof s&&r<s}],"filter->":[fo,[Wo,Jo],(a,[e,r])=>{const s=a.properties()[e.value],h=r.value;return typeof s==typeof h&&s>h}],"filter-id->":[fo,[Jo],(a,[e])=>{const r=a.id(),s=e.value;return typeof r==typeof s&&r>s}],"filter-<=":[fo,[Wo,Jo],(a,[e,r])=>{const s=a.properties()[e.value],h=r.value;return typeof s==typeof h&&s<=h}],"filter-id-<=":[fo,[Jo],(a,[e])=>{const r=a.id(),s=e.value;return typeof r==typeof s&&r<=s}],"filter->=":[fo,[Wo,Jo],(a,[e,r])=>{const s=a.properties()[e.value],h=r.value;return typeof s==typeof h&&s>=h}],"filter-id->=":[fo,[Jo],(a,[e])=>{const r=a.id(),s=e.value;return typeof r==typeof s&&r>=s}],"filter-has":[fo,[Jo],(a,[e])=>e.value in a.properties()],"filter-has-id":[fo,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[fo,[oo(Wo)],(a,[e])=>e.value.indexOf(a.geometryType())>=0],"filter-id-in":[fo,[oo(Jo)],(a,[e])=>e.value.indexOf(a.id())>=0],"filter-in-small":[fo,[Wo,oo(Jo)],(a,[e,r])=>r.value.indexOf(a.properties()[e.value])>=0],"filter-in-large":[fo,[Wo,oo(Jo)],(a,[e,r])=>function(s,h,l,m){for(;l<=m;){const S=l+m>>1;if(h[S]===s)return!0;h[S]>s?m=S-1:l=S+1}return!1}(a.properties()[e.value],r.value,0,r.value.length-1)],all:{type:fo,overloads:[[[fo,fo],(a,[e,r])=>e.evaluate(a)&&r.evaluate(a)],[hu(fo),(a,e)=>{for(const r of e)if(!r.evaluate(a))return!1;return!0}]]},any:{type:fo,overloads:[[[fo,fo],(a,[e,r])=>e.evaluate(a)||r.evaluate(a)],[hu(fo),(a,e)=>{for(const r of e)if(r.evaluate(a))return!0;return!1}]]},"!":[fo,[fo],(a,[e])=>!e.evaluate(a)],"is-supported-script":[fo,[Wo],(a,[e])=>{const r=a.globals&&a.globals.isSupportedScript;return!r||r(e.evaluate(a))}],upcase:[Wo,[Wo],(a,[e])=>e.evaluate(a).toUpperCase()],downcase:[Wo,[Wo],(a,[e])=>e.evaluate(a).toLowerCase()],concat:[Wo,hu(Jo),(a,e)=>e.map(r=>ws(r.evaluate(a))).join("")],"resolved-locale":[Wo,[Jl],(a,[e])=>e.evaluate(a).resolvedLocale()],random:[Ri,[Ri,Ri,Jo],(a,e)=>{const[r,s,h]=e.map(m=>m.evaluate(a));if(r>s||r===s)return r;let l;if(typeof h=="string")l=function(m){let S=0;if(m.length===0)return S;for(let O=0;O<m.length;O++)S=(S<<5)-S+m.charCodeAt(O),S|=0;return S}(h);else{if(typeof h!="number")throw new Za(`Invalid seed input: ${h}`);l=h}return r+pl(l)()*(s-r)}]});class $s{constructor(e,r,s,h){this.expression=e,this._warningHistory={},this._evaluator=new Ql(s,h),this._defaultValue=r?function(l){return l.type==="color"&&(Xi(l.default)||Array.isArray(l.default))?new Uo(0,0,0,0):l.type==="color"?Uo.parse(l.default)||null:l.default===void 0?null:l.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null,this.configDependencies=oi(e)}evaluateWithoutErrorHandling(e,r,s,h,l,m,S,O){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=s,this._evaluator.canonical=h||null,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=S||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,s,h,l,m,S,O){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=s||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=S||null,this._evaluator.featureDistanceData=O||null;try{const z=this.expression.evaluate(this._evaluator);if(z==null||typeof z=="number"&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new Za(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console!="undefined"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${z.message}`)),this._defaultValue}}}function Iu(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Rl}function Fu(a,e,r,s){const h=new Si(Rl,[],e?function(m){const S={color:ts,string:Wo,number:Ri,enum:Wo,boolean:fo,formatted:zs,resolvedImage:Cs};return m.type==="array"?oo(S[m.value]||Jo,m.length):S[m.type]}(e):void 0,void 0,void 0,r,s),l=h.parse(a,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?vc(new $s(l,e,r,s)):js(h.errors)}class rd{constructor(e,r,s,h){this.kind=e,this._styleExpression=r,this.isLightConstant=s,this.isLineProgressConstant=h,this.isStateDependent=e!=="constant"&&!Ir(r.expression),this.configDependencies=oi(r.expression)}evaluateWithoutErrorHandling(e,r,s,h,l,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,s,h,l,m)}evaluate(e,r,s,h,l,m){return this._styleExpression.evaluate(e,r,s,h,l,m)}}class zc{constructor(e,r,s,h,l,m){this.kind=e,this.zoomStops=s,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Ir(r.expression),this.isLightConstant=l,this.isLineProgressConstant=m,this.configDependencies=oi(r.expression),this.interpolationType=h}evaluateWithoutErrorHandling(e,r,s,h,l,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,s,h,l,m)}evaluate(e,r,s,h,l,m){return this._styleExpression.evaluate(e,r,s,h,l,m)}interpolationFactor(e,r,s){return this.interpolationType?Ro.interpolationFactor(this.interpolationType,e,r,s):0}}function pd(a,e,r,s){if((a=Fu(a,e,r,s)).result==="error")return a;const h=a.value.expression,l=tr(h);if(!l&&!$l(e))return js([new ho("","data expressions not supported")]);const m=ni(h,["zoom","pitch","distance-from-center"]);if(!m&&!zu(e))return js([new ho("","zoom expressions not supported")]);const S=ni(h,["measure-light"]);if(!S&&!tu(e))return js([new ho("","measure-light expression not supported")]);const O=ni(h,["line-progress"]);if(!O&&!function(R){return lc(R.expression,"line-progress")}(e))return js([new ho("","line-progress expression not supported")]);const z=e.expression&&e.expression.relaxZoomRestriction,w=Ju(h);return w||m||z?w instanceof ho?js([w]):w instanceof Ro&&!_s(e)?js([new ho("",'"interpolate" expressions cannot be used with this property')]):vc(w?new zc(l&&O?"camera":"composite",a.value,w.labels,w instanceof Ro?w.interpolation:void 0,S,O):new rd(l&&O?"constant":"source",a.value,S,O)):js([new ho("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Bu{constructor(e,r){this._parameters=e,this._specification=r,hl(this,Ua(this._parameters,this._specification))}static deserialize(e){return new Bu(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ju(a){let e=null;if(a instanceof ta)e=Ju(a.result);else if(a instanceof ca){for(const r of a.args)if(e=Ju(r),e)break}else(a instanceof Wi||a instanceof Ro)&&a.input instanceof ms&&a.input.name==="zoom"&&(e=a);return e instanceof ho||a.eachChild(r=>{const s=Ju(r);s instanceof ho?e=s:e&&s&&e!==s&&(e=new ho("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}var Pc,md,eh=function(){if(md)return Pc;md=1,Pc=e;var a=3;function e(r,s,h){var l=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var m=new Int32Array(this.arrayBuffer);r=m[0],this.d=(s=m[1])+2*(h=m[2]);for(var S=0;S<this.d*this.d;S++){var O=m[a+S],z=m[a+S+1];l.push(O===z?null:m.subarray(O,z))}var w=m[a+l.length+1];this.keys=m.subarray(m[a+l.length],w),this.bboxes=m.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*h;for(var R=0;R<this.d*this.d;R++)l.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;var N=h/s*r;this.min=-N,this.max=r+N}return e.prototype.insert=function(r,s,h,l,m){this._forEachCell(s,h,l,m,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(l),this.bboxes.push(m)},e.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},e.prototype._insertCell=function(r,s,h,l,m,S){this.cells[m].push(S)},e.prototype.query=function(r,s,h,l,m){var S=this.min,O=this.max;if(r<=S&&s<=S&&O<=h&&O<=l&&!m)return Array.prototype.slice.call(this.keys);var z=[];return this._forEachCell(r,s,h,l,this._queryCell,z,{},m),z},e.prototype._queryCell=function(r,s,h,l,m,S,O,z){var w=this.cells[m];if(w!==null)for(var R=this.keys,N=this.bboxes,P=0;P<w.length;P++){var D=w[P];if(O[D]===void 0){var G=4*D;(z?z(N[G+0],N[G+1],N[G+2],N[G+3]):r<=N[G+2]&&s<=N[G+3]&&h>=N[G+0]&&l>=N[G+1])?(O[D]=!0,S.push(R[D])):O[D]=!1}}},e.prototype._forEachCell=function(r,s,h,l,m,S,O,z){for(var w=this._convertToCellCoord(r),R=this._convertToCellCoord(s),N=this._convertToCellCoord(h),P=this._convertToCellCoord(l),D=w;D<=N;D++)for(var G=R;G<=P;G++){var oe=this.d*G+D;if((!z||z(this._convertFromCellCoord(D),this._convertFromCellCoord(G),this._convertFromCellCoord(D+1),this._convertFromCellCoord(G+1)))&&m.call(this,r,s,h,l,oe,S,O,z))return}},e.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},e.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},e.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,s=a+this.cells.length+1+1,h=0,l=0;l<this.cells.length;l++)h+=this.cells[l].length;var m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var S=s,O=0;O<r.length;O++){var z=r[O];m[a+O]=S,m.set(z,S),S+=z.length}return m[a+r.length]=S,m.set(this.keys,S),m[a+r.length+1]=S+=this.keys.length,m.set(this.bboxes,S),S+=this.bboxes.length,m.buffer},Pc}(),fu=j(eh);const ju={};function Fi(a,e,r={}){Object.defineProperty(a,"_classRegistryKey",{value:e,writable:!1}),ju[e]={klass:a,omit:r.omit||[]}}Fi(Object,"Object"),fu.serialize=function(a,e){const r=a.toArrayBuffer();return e&&e.add(r),{buffer:r}},fu.deserialize=function(a){return new fu(a.buffer)},Object.defineProperty(fu,"name",{value:"Grid"}),Fi(fu,"Grid"),typeof DOMMatrix!="undefined"&&Fi(DOMMatrix,"DOMMatrix"),Fi(Uo,"Color"),Fi(Error,"Error"),Fi(Fs,"Formatted"),Fi(yu,"FormattedSection"),Fi(po,"AJAXError"),Fi(cs,"ResolvedImage"),Fi(Bu,"StylePropertyFunction"),Fi($s,"StyleExpression",{omit:["_evaluator"]}),Fi(bs,"ImageIdWithOptions"),Fi(zc,"ZoomDependentExpression"),Fi(rd,"ZoomConstantExpression"),Fi(ms,"CompoundExpression",{omit:["_evaluate"]});for(const a in Rl)ju[Rl[a]._classRegistryKey]||Fi(Rl[a],`Expression${a}`);function Fc(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Oc(a){return self.ImageBitmap&&a instanceof ImageBitmap}function nu(a,e){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Fc(a)||Oc(a))return e&&e.add(a),a;if(ArrayBuffer.isView(a))return e&&e.add(a.buffer),a;if(a instanceof ImageData)return e&&e.add(a.data.buffer),a;if(Array.isArray(a)){const r=[];for(const s of a)r.push(nu(s,e));return r}if(a instanceof Map){const r={$name:"Map"};for(const[s,h]of a.entries())r[s]=nu(h);return r}if(a instanceof Set){const r={$name:"Set"};let s=0;for(const h of a.values())r[++s]=nu(h);return r}if(typeof a=="object"){const r=a.constructor,s=r._classRegistryKey;if(!s)throw new Error(`Can't serialize object of unregistered class "${s}".`);const h=r.serialize?r.serialize(a,e):{};if(!r.serialize){for(const l in a)a.hasOwnProperty(l)&&(ju[s].omit.indexOf(l)>=0||(h[l]=nu(a[l],e)));a instanceof Error&&(h.message=a.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(h.$name=s),h}throw new Error("can't serialize object of type "+typeof a)}function ss(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Fc(a)||Oc(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(ss);if(typeof a=="object"){const e=a.$name||"Object";if(e==="Map"){const h=new Map;for(const l of Object.keys(a))l!=="$name"&&h.set(l,ss(a[l]));return h}if(e==="Set"){const h=new Set;for(const l of Object.keys(a))l!=="$name"&&h.add(ss(a[l]));return h}const{klass:r}=ju[e];if(!r)throw new Error(`Can't deserialize unregistered class "${e}".`);if(r.deserialize)return r.deserialize(a);const s=Object.create(r.prototype);for(const h of Object.keys(a))h!=="$name"&&(s[h]=ss(a[h]));return s}throw new Error("can't deserialize object of type "+typeof a)}const Pi={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519,Osage:a=>a>=66736&&a<=66815,"CJK Unified Ideographs Extension B":a=>a>=131072&&a<=173791};function Ss(a){for(const e of a)if(Bc(e.charCodeAt(0)))return!0;return!1}function Nl(a){for(const e of a)if(!pu(e.charCodeAt(0)))return!1;return!0}function pu(a){return!(Pi.Arabic(a)||Pi["Arabic Supplement"](a)||Pi["Arabic Extended-A"](a)||Pi["Arabic Presentation Forms-A"](a)||Pi["Arabic Presentation Forms-B"](a))}function Bc(a){return!(a!==746&&a!==747&&(a<4352||!(Pi["Bopomofo Extended"](a)||Pi.Bopomofo(a)||Pi["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Pi["CJK Compatibility Ideographs"](a)||Pi["CJK Compatibility"](a)||Pi["CJK Radicals Supplement"](a)||Pi["CJK Strokes"](a)||!(!Pi["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Pi["CJK Unified Ideographs Extension A"](a)||Pi["CJK Unified Ideographs"](a)||Pi["Enclosed CJK Letters and Months"](a)||Pi["Hangul Compatibility Jamo"](a)||Pi["Hangul Jamo Extended-A"](a)||Pi["Hangul Jamo Extended-B"](a)||Pi["Hangul Jamo"](a)||Pi["Hangul Syllables"](a)||Pi.Hiragana(a)||Pi["Ideographic Description Characters"](a)||Pi.Kanbun(a)||Pi["Kangxi Radicals"](a)||Pi["Katakana Phonetic Extensions"](a)||Pi.Katakana(a)&&a!==12540||!(!Pi["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Pi["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Pi["Unified Canadian Aboriginal Syllabics"](a)||Pi["Unified Canadian Aboriginal Syllabics Extended"](a)||Pi["Vertical Forms"](a)||Pi["Yijing Hexagram Symbols"](a)||Pi["Yi Syllables"](a)||Pi["Yi Radicals"](a))))}function id(a){return!(Bc(a)||function(e){return!!(Pi["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||Pi["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||Pi["Letterlike Symbols"](e)||Pi["Number Forms"](e)||Pi["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||Pi["Control Pictures"](e)&&e!==9251||Pi["Optical Character Recognition"](e)||Pi["Enclosed Alphanumerics"](e)||Pi["Geometric Shapes"](e)||Pi["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Pi["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Pi["CJK Symbols and Punctuation"](e)||Pi.Katakana(e)||Pi["Private Use Area"](e)||Pi["CJK Compatibility Forms"](e)||Pi["Small Form Variants"](e)||Pi["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(a))}function mu(a){return a>=1424&&a<=2303||Pi["Arabic Presentation Forms-A"](a)||Pi["Arabic Presentation Forms-B"](a)}function sl(a,e){return!(!e&&mu(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Pi.Khmer(a))}function rs(a){for(const e of a)if(mu(e.charCodeAt(0)))return!0;return!1}const Wa="deferred",To="loading",is="loaded";let Xs=null,zl="unavailable",ll=null;const Fl=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(zl="error"),Xs&&Xs(a)};function _d(){gd.fire(new ja("pluginStateChange",{pluginStatus:zl,pluginURL:ll}))}const gd=new ao,jc=function(){return zl},Bd=function(){if(zl!==Wa||!ll)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zl=To,_d(),ll&&$o({url:ll},a=>{a?Fl(a):(zl=is,_d())})},uc={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zl===is||uc.applyArabicShaping!=null,isLoading:()=>zl===To,setState(a){zl=a.pluginStatus,ll=a.pluginURL},isParsed:()=>uc.applyArabicShaping!=null&&uc.processBidirectionalText!=null&&uc.processStyledBidirectionalText!=null,getPluginURL:()=>ll};class Ts{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch,this.brightness=r.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(r,s){for(const h of r)if(!sl(h.charCodeAt(0),s))return!1;return!0}(e,uc.isLoaded())}}class jd{constructor(e,r,s,h){this.property=e,this.value=r,this.expression=function(l,m,S,O){if(Xi(l))return new Bu(l,m);if(Iu(l)||Array.isArray(l)&&l.length>0){const z=pd(l,m,S,O);if(z.result==="error")throw new Error(z.value.map(w=>`${w.key}: ${w.message}`).join(", "));return z.value}{let z=l;return typeof l=="string"&&m.type==="color"&&(z=Uo.parse(l)),{kind:"constant",configDependencies:new Set,evaluate:()=>z}}}(r===void 0?e.specification.default:r,e.specification,s,h)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,s){return this.property.possiblyEvaluate(this,e,r,s)}}class qo{constructor(e,r,s){this.property=e,this.value=new jd(e,void 0,r,s)}transitioned(e,r){return new _l(this.property,this.value,r,Lt({},e.transition,this.transition),e.now)}untransitioned(){return new _l(this.property,this.value,null,{},0)}}class Va{constructor(e,r,s){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=r,this._options=s,this.configDependencies=new Set}getValue(e){return hn(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new qo(this._values[e].property,this._scope,this._options)),this._values[e].value=new jd(this._values[e].property,r===null?void 0:hn(r),this._scope,this._options),this._values[e].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[e].value.expression.configDependencies]))}setTransitionOrValue(e,r){r&&(this._options=r);const s=this._properties.properties;if(e)for(const h in e){const l=e[h];if(Sr(h,"-transition")){const m=h.slice(0,-11);s[m]&&this.setTransition(m,l)}else s.hasOwnProperty(h)&&this.setValue(h,l)}}getTransition(e){return hn(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new qo(this._values[e].property)),this._values[e].transition=hn(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const s=this.getValue(r);s!==void 0&&(e[r]=s);const h=this.getTransition(r);h!==void 0&&(e[`${r}-transition`]=h)}return e}transitioned(e,r){const s=new Zl(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].transitioned(e,r._values[h]);return s}untransitioned(){const e=new Zl(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class _l{constructor(e,r,s,h,l){const m=h.delay||0,S=h.duration||0;l=l||0,this.property=e,this.value=r,this.begin=l+m,this.end=this.begin+S,e.specification.transition&&(h.delay||h.duration)&&(this.prior=s)}possiblyEvaluate(e,r,s){const h=e.now||0,l=this.value.possiblyEvaluate(e,r,s),m=this.prior;if(m){if(h>this.end)return this.prior=null,l;if(this.value.isDataDriven())return this.prior=null,l;if(h<this.begin)return m.possiblyEvaluate(e,r,s);{const S=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,r,s),l,Ve(S))}}return l}}class Zl{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,s){const h=new Qu(this._properties);for(const l of Object.keys(this._values))h._values[l]=this._values[l].possiblyEvaluate(e,r,s);return h}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ul{constructor(e,r,s){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=r,this._options=s,this.configDependencies=new Set}getValue(e){return hn(this._values[e].value)}setValue(e,r){this._values[e]=new jd(this._values[e].property,r===null?void 0:hn(r),this._scope,this._options),this._values[e].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[e].expression.configDependencies]))}serialize(){const e={};for(const r of Object.keys(this._values)){const s=this.getValue(r);s!==void 0&&(e[r]=s)}return e}possiblyEvaluate(e,r,s){const h=new Qu(this._properties);for(const l of Object.keys(this._values))h._values[l]=this._values[l].possiblyEvaluate(e,r,s);return h}}class Kc{constructor(e,r,s){this.property=e,this.value=r,this.parameters=s}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,s,h){return this.property.evaluate(this.value,this.parameters,e,r,s,h)}}class Qu{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class di{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,s){const h=Ll[this.specification.type];return h?h(e,r,s):e}}class Ni{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,s,h){return new Kc(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},s,h)}:e.expression,r)}interpolate(e,r,s){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Kc(this,{kind:"constant",value:void 0},e.parameters);const h=Ll[this.specification.type];return h?new Kc(this,{kind:"constant",value:h(e.value.value,r.value.value,s)},e.parameters):e}evaluate(e,r,s,h,l,m){return e.kind==="constant"?e.value:e.evaluate(r,s,h,l,m)}}class vd{constructor(e){this.specification=e}possiblyEvaluate(e,r,s,h){return!!e.expression.evaluate(r,null,{},s,h)}interpolate(){return!1}}class gl{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new Ts(0,{});for(const s in e){const h=e[s];h.specification.overridable&&this.overridableProperties.push(s);const l=this.defaultPropertyValues[s]=new jd(h,void 0),m=this.defaultTransitionablePropertyValues[s]=new qo(h);this.defaultTransitioningPropertyValues[s]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=l.possiblyEvaluate(r)}}}Fi(Ni,"DataDrivenProperty"),Fi(di,"DataConstantProperty"),Fi(vd,"ColorRampProperty");var gr=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function od(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function yd(a){if(Array.isArray(a))return a.map(yd);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const e={};for(const r in a)e[r]=yd(a[r]);return e}return od(a)}function rf(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const e of a.slice(1))if(!rf(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function sm(a,e="",r=null,s="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};rf(a)||(a=of(a));const h=a;let l=!0;try{l=function(w){if(!nh(w))return w;let R=yd(w);return yh(R),R=th(R),R}(h)}catch(w){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(h,null,2)}
        `)}let m=null,S=null;if(s!=="background"&&s!=="sky"&&s!=="slot"){S=gr[`filter_${s}`];const w=Fu(l,S,e,r);if(w.result==="error")throw new Error(w.value.map(R=>`${R.key}: ${R.message}`).join(", "));m=(R,N,P)=>w.value.evaluate(R,N,{},P)}let O=null,z=null;if(l!==h){const w=Fu(h,S,e,r);if(w.result==="error")throw new Error(w.value.map(R=>`${R.key}: ${R.message}`).join(", "));O=(R,N,P,D,G)=>w.value.evaluate(R,N,{},P,void 0,void 0,D,G),z=!tr(w.value.expression)}return{filter:m,dynamicFilter:O||void 0,needGeometry:Ud(l),needFeature:!!z}}function th(a){if(!Array.isArray(a))return a;const e=function(r){if(km.has(r[0])){for(let s=1;s<r.length;s++)if(nh(r[s]))return!0}return r}(a);return e===!0?e:e.map(r=>th(r))}function yh(a){let e=!1;const r=[];if(a[0]==="case"){for(let s=1;s<a.length-1;s+=2)e=e||nh(a[s]),r.push(a[s+1]);r.push(a[a.length-1])}else if(a[0]==="match"){e=e||nh(a[1]);for(let s=2;s<a.length-1;s+=2)r.push(a[s+1]);r.push(a[a.length-1])}else if(a[0]==="step"){e=e||nh(a[1]);for(let s=1;s<a.length-1;s+=2)r.push(a[s+1])}e&&(a.length=0,a.push("any",...r));for(let s=1;s<a.length;s++)yh(a[s])}function nh(a){if(!Array.isArray(a))return!1;if((e=a[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<a.length;r++)if(nh(a[r]))return!0;return!1}const km=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function xh(a,e){return a<e?-1:a>e?1:0}function Ud(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let e=1;e<a.length;e++)if(Ud(a[e]))return!0;return!1}function of(a){if(!a)return!0;const e=a[0];return a.length<=1?e!=="any":e==="=="?bh(a[1],a[2],"=="):e==="!="?xd(bh(a[1],a[2],"==")):e==="<"||e===">"||e==="<="||e===">="?bh(a[1],a[2],e):e==="any"?(r=a.slice(1),["any"].concat(r.map(of))):e==="all"?["all"].concat(a.slice(1).map(of)):e==="none"?["all"].concat(a.slice(1).map(of).map(xd)):e==="in"?rp(a[1],a.slice(2)):e==="!in"?xd(rp(a[1],a.slice(2))):e==="has"?Ip(a[1]):e!=="!has"||xd(Ip(a[1]));var r}function bh(a,e,r){switch(a){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,a,e]}}function rp(a,e){if(e.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",a,["literal",e.sort(xh)]]:["filter-in-small",a,["literal",e]]}}function Ip(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function xd(a){return["!",a]}const qu="";function Uu(a,e){return e?`${a}${qu}${e}`:a}const Rc="-transition",Vd=new Set(["fill","line","background","hillshade","raster"]);class Bl extends ao{constructor(e,r,s,h,l){if(super(),this.id=e.id,this.fqid=Uu(this.id,s),this.type=e.type,this.scope=s,this.lut=h,this.options=l,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,e.type!=="custom"){if(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type&&e.type!=="background"&&e.type!=="sky"&&e.type!=="slot"){this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter;const m=Fu(this.filter,gr[`filter_${e.type}`]);m.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...m.value.configDependencies]))}if(e.slot&&(this.slot=e.slot),r.layout&&(this._unevaluatedLayout=new ul(r.layout,this.scope,l),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),r.paint){this._transitionablePaint=new Va(r.paint,this.scope,l);for(const m in e.paint)this.setPaintProperty(m,e.paint[m]);for(const m in e.layout)this.setLayoutProperty(m,e.layout[m]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qu(r.paint)}}}onAdd(e){}onRemove(e){}isDraped(e){return!this.is3D()&&Vd.has(this.type)}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r){if(this.type==="custom"&&e==="visibility")return void(this.visibility=r);const s=this._unevaluatedLayout;s._properties.properties[e]&&(s.setValue(e,r),this.configDependencies=new Set([...this.configDependencies,...s.configDependencies]),e==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(e){return Sr(e,Rc)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r){const s=this._transitionablePaint,h=s._properties.properties;if(Sr(e,Rc)){const R=e.slice(0,-11);return h[R]&&s.setTransition(R,r||void 0),!1}if(!h[e])return!1;const l=s._values[e],m=l.value.isDataDriven(),S=l.value;s.setValue(e,r),this.configDependencies=new Set([...this.configDependencies,...s.configDependencies]),this._handleSpecialPaintPropertyUpdate(e);const O=s._values[e].value,z=O.isDataDriven(),w=Sr(e,"pattern")||e==="line-dasharray";return z||m||w||this._handleOverridablePaintPropertyUpdate(e,S,O)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,r,s){return null}_handleOverridablePaintPropertyUpdate(e,r,s){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){return Gn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,r)=>!(e===void 0||r==="layout"&&!Object.keys(e).length||r==="paint"&&!Object.keys(e).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof Kc&&$l(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(e){this._filterCompiled||(this._featureFilter=sm(this.filter,this.scope,e),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(e){this._stats&&(e.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(e){}queryIntersectsFeature(e,r,s,h,l,m,S,O,z){}}const wh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Yc{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ks{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...e){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...e){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ra(a,e=1){let r=0,s=0;return{members:a.map(h=>{const l=wh[h.type].BYTES_PER_ELEMENT,m=r=Uh(r,Math.max(e,l)),S=h.components||1;return s=Math.max(s,l),r+=l*S,{name:h.name,type:h.type,components:S,offset:m}}),size:Uh(r,Math.max(s,e)),alignment:e}}function Uh(a,e){return Math.ceil(a/e)*e}class Vu extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const s=this.length;return this.resize(s+1),this.emplace(s,e,r)}emplace(e,r,s){const h=2*e;return this.int16[h+0]=r,this.int16[h+1]=s,e}}Vu.prototype.bytesPerElement=4,Fi(Vu,"StructArrayLayout2i4");class Od extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,s)}emplace(e,r,s,h){const l=3*e;return this.int16[l+0]=r,this.int16[l+1]=s,this.int16[l+2]=h,e}}Od.prototype.bytesPerElement=6,Fi(Od,"StructArrayLayout3i6");class Ha extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,s,h){const l=this.length;return this.resize(l+1),this.emplace(l,e,r,s,h)}emplace(e,r,s,h,l){const m=4*e;return this.int16[m+0]=r,this.int16[m+1]=s,this.int16[m+2]=h,this.int16[m+3]=l,e}}Ha.prototype.bytesPerElement=8,Fi(Ha,"StructArrayLayout4i8");class Rf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,s,h,l)}emplace(e,r,s,h,l,m){const S=5*e;return this.int16[S+0]=r,this.int16[S+1]=s,this.int16[S+2]=h,this.int16[S+3]=l,this.int16[S+4]=m,e}}Rf.prototype.bytesPerElement=10,Fi(Rf,"StructArrayLayout5i10");class Rd extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S){const O=this.length;return this.resize(O+1),this.emplace(O,e,r,s,h,l,m,S)}emplace(e,r,s,h,l,m,S,O){const z=6*e,w=12*e,R=3*e;return this.int16[z+0]=r,this.int16[z+1]=s,this.uint8[w+4]=h,this.uint8[w+5]=l,this.uint8[w+6]=m,this.uint8[w+7]=S,this.float32[R+2]=O,e}}Rd.prototype.bytesPerElement=12,Fi(Rd,"StructArrayLayout2i4ub1f12");class cl extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,s)}emplace(e,r,s,h){const l=3*e;return this.float32[l+0]=r,this.float32[l+1]=s,this.float32[l+2]=h,e}}cl.prototype.bytesPerElement=12,Fi(cl,"StructArrayLayout3f12");class Js extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,s,h,l)}emplace(e,r,s,h,l,m){const S=6*e,O=3*e;return this.uint16[S+0]=r,this.uint16[S+1]=s,this.uint16[S+2]=h,this.uint16[S+3]=l,this.float32[O+2]=m,e}}Js.prototype.bytesPerElement=12,Fi(Js,"StructArrayLayout4ui1f12");class Gu extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,s,h){const l=this.length;return this.resize(l+1),this.emplace(l,e,r,s,h)}emplace(e,r,s,h,l){const m=4*e;return this.uint16[m+0]=r,this.uint16[m+1]=s,this.uint16[m+2]=h,this.uint16[m+3]=l,e}}Gu.prototype.bytesPerElement=8,Fi(Gu,"StructArrayLayout4ui8");class Vh extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m){const S=this.length;return this.resize(S+1),this.emplace(S,e,r,s,h,l,m)}emplace(e,r,s,h,l,m,S){const O=6*e;return this.int16[O+0]=r,this.int16[O+1]=s,this.int16[O+2]=h,this.int16[O+3]=l,this.int16[O+4]=m,this.int16[O+5]=S,e}}Vh.prototype.bytesPerElement=12,Fi(Vh,"StructArrayLayout6i12");class Gd extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z,w,R,N){const P=this.length;return this.resize(P+1),this.emplace(P,e,r,s,h,l,m,S,O,z,w,R,N)}emplace(e,r,s,h,l,m,S,O,z,w,R,N,P){const D=12*e;return this.int16[D+0]=r,this.int16[D+1]=s,this.int16[D+2]=h,this.int16[D+3]=l,this.uint16[D+4]=m,this.uint16[D+5]=S,this.uint16[D+6]=O,this.uint16[D+7]=z,this.int16[D+8]=w,this.int16[D+9]=R,this.int16[D+10]=N,this.int16[D+11]=P,e}}Gd.prototype.bytesPerElement=24,Fi(Gd,"StructArrayLayout4i4ui4i24");class af extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m){const S=this.length;return this.resize(S+1),this.emplace(S,e,r,s,h,l,m)}emplace(e,r,s,h,l,m,S){const O=10*e,z=5*e;return this.int16[O+0]=r,this.int16[O+1]=s,this.int16[O+2]=h,this.float32[z+2]=l,this.float32[z+3]=m,this.float32[z+4]=S,e}}af.prototype.bytesPerElement=20,Fi(af,"StructArrayLayout3i3f20");class dl extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h){const l=this.length;return this.resize(l+1),this.emplace(l,e,r,s,h)}emplace(e,r,s,h,l){const m=4*e;return this.float32[m+0]=r,this.float32[m+1]=s,this.float32[m+2]=h,this.float32[m+3]=l,e}}dl.prototype.bytesPerElement=16,Fi(dl,"StructArrayLayout4f16");class cc extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}cc.prototype.bytesPerElement=4,Fi(cc,"StructArrayLayout1ul4");class rh extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const s=this.length;return this.resize(s+1),this.emplace(s,e,r)}emplace(e,r,s){const h=2*e;return this.uint16[h+0]=r,this.uint16[h+1]=s,e}}rh.prototype.bytesPerElement=4,Fi(rh,"StructArrayLayout2ui4");class ip extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z,w,R,N,P){const D=this.length;return this.resize(D+1),this.emplace(D,e,r,s,h,l,m,S,O,z,w,R,N,P)}emplace(e,r,s,h,l,m,S,O,z,w,R,N,P,D){const G=20*e,oe=10*e;return this.int16[G+0]=r,this.int16[G+1]=s,this.int16[G+2]=h,this.int16[G+3]=l,this.int16[G+4]=m,this.float32[oe+3]=S,this.float32[oe+4]=O,this.float32[oe+5]=z,this.float32[oe+6]=w,this.int16[G+14]=R,this.uint32[oe+8]=N,this.uint16[G+18]=P,this.uint16[G+19]=D,e}}ip.prototype.bytesPerElement=40,Fi(ip,"StructArrayLayout5i4f1i1ul2ui40");class Lf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S){const O=this.length;return this.resize(O+1),this.emplace(O,e,r,s,h,l,m,S)}emplace(e,r,s,h,l,m,S,O){const z=8*e;return this.int16[z+0]=r,this.int16[z+1]=s,this.int16[z+2]=h,this.int16[z+4]=l,this.int16[z+5]=m,this.int16[z+6]=S,this.int16[z+7]=O,e}}Lf.prototype.bytesPerElement=16,Fi(Lf,"StructArrayLayout3i2i2i16");class ad extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,s,h,l)}emplace(e,r,s,h,l,m){const S=4*e,O=8*e;return this.float32[S+0]=r,this.float32[S+1]=s,this.float32[S+2]=h,this.int16[O+6]=l,this.int16[O+7]=m,e}}ad.prototype.bytesPerElement=16,Fi(ad,"StructArrayLayout2f1f2i16");class yc extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m){const S=this.length;return this.resize(S+1),this.emplace(S,e,r,s,h,l,m)}emplace(e,r,s,h,l,m,S){const O=20*e,z=5*e;return this.uint8[O+0]=r,this.uint8[O+1]=s,this.float32[z+1]=h,this.float32[z+2]=l,this.float32[z+3]=m,this.float32[z+4]=S,e}}yc.prototype.bytesPerElement=20,Fi(yc,"StructArrayLayout2ub4f20");class _u extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,s)}emplace(e,r,s,h){const l=3*e;return this.uint16[l+0]=r,this.uint16[l+1]=s,this.uint16[l+2]=h,e}}_u.prototype.bytesPerElement=6,Fi(_u,"StructArrayLayout3ui6");class Df extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe)}emplace(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye){const ct=30*e,Kt=15*e,Zt=60*e;return this.int16[ct+0]=r,this.int16[ct+1]=s,this.int16[ct+2]=h,this.float32[Kt+2]=l,this.float32[Kt+3]=m,this.uint16[ct+8]=S,this.uint16[ct+9]=O,this.uint32[Kt+5]=z,this.uint32[Kt+6]=w,this.uint32[Kt+7]=R,this.uint16[ct+16]=N,this.uint16[ct+17]=P,this.uint16[ct+18]=D,this.float32[Kt+10]=G,this.float32[Kt+11]=oe,this.uint8[Zt+48]=ce,this.uint8[Zt+49]=Ae,this.uint8[Zt+50]=Oe,this.uint32[Kt+13]=ve,this.int16[ct+28]=Fe,this.uint8[Zt+58]=Ye,e}}Df.prototype.bytesPerElement=60,Fi(Df,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Gh extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn,zn,Zn){const qn=this.length;return this.resize(qn+1),this.emplace(qn,e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn,zn,Zn)}emplace(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce,Ae,Oe,ve,Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn,zn,Zn,qn){const hr=20*e,Kn=40*e,Zr=80*e;return this.float32[hr+0]=r,this.float32[hr+1]=s,this.int16[Kn+4]=h,this.int16[Kn+5]=l,this.int16[Kn+6]=m,this.int16[Kn+7]=S,this.int16[Kn+8]=O,this.int16[Kn+9]=z,this.int16[Kn+10]=w,this.int16[Kn+11]=R,this.int16[Kn+12]=N,this.uint16[Kn+13]=P,this.uint16[Kn+14]=D,this.uint16[Kn+15]=G,this.uint16[Kn+16]=oe,this.uint16[Kn+17]=ce,this.uint16[Kn+18]=Ae,this.uint16[Kn+19]=Oe,this.uint16[Kn+20]=ve,this.uint16[Kn+21]=Fe,this.uint16[Kn+22]=Ye,this.uint16[Kn+23]=ct,this.uint16[Kn+24]=Kt,this.uint16[Kn+25]=Zt,this.uint16[Kn+26]=Ut,this.uint16[Kn+27]=En,this.uint32[hr+14]=Yt,this.float32[hr+15]=Cn,this.float32[hr+16]=Vn,this.float32[hr+17]=zn,this.float32[hr+18]=Zn,this.uint8[Zr+76]=qn,e}}Gh.prototype.bytesPerElement=80,Fi(Gh,"StructArrayLayout2f9i15ui1ul4f1ub80");class sf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}sf.prototype.bytesPerElement=4,Fi(sf,"StructArrayLayout1f4");class Xc extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,s,h,l)}emplace(e,r,s,h,l,m){const S=5*e;return this.float32[S+0]=r,this.float32[S+1]=s,this.float32[S+2]=h,this.float32[S+3]=l,this.float32[S+4]=m,e}}Xc.prototype.bytesPerElement=20,Fi(Xc,"StructArrayLayout5f20");class lf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S){const O=this.length;return this.resize(O+1),this.emplace(O,e,r,s,h,l,m,S)}emplace(e,r,s,h,l,m,S,O){const z=7*e;return this.float32[z+0]=r,this.float32[z+1]=s,this.float32[z+2]=h,this.float32[z+3]=l,this.float32[z+4]=m,this.float32[z+5]=S,this.float32[z+6]=O,e}}lf.prototype.bytesPerElement=28,Fi(lf,"StructArrayLayout7f28");class sd extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z,w,R){const N=this.length;return this.resize(N+1),this.emplace(N,e,r,s,h,l,m,S,O,z,w,R)}emplace(e,r,s,h,l,m,S,O,z,w,R,N){const P=11*e;return this.float32[P+0]=r,this.float32[P+1]=s,this.float32[P+2]=h,this.float32[P+3]=l,this.float32[P+4]=m,this.float32[P+5]=S,this.float32[P+6]=O,this.float32[P+7]=z,this.float32[P+8]=w,this.float32[P+9]=R,this.float32[P+10]=N,e}}sd.prototype.bytesPerElement=44,Fi(sd,"StructArrayLayout11f44");class uf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,s,h,l,m,S,O,z)}emplace(e,r,s,h,l,m,S,O,z,w){const R=9*e;return this.float32[R+0]=r,this.float32[R+1]=s,this.float32[R+2]=h,this.float32[R+3]=l,this.float32[R+4]=m,this.float32[R+5]=S,this.float32[R+6]=O,this.float32[R+7]=z,this.float32[R+8]=w,e}}uf.prototype.bytesPerElement=36,Fi(uf,"StructArrayLayout9f36");class $d extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const s=this.length;return this.resize(s+1),this.emplace(s,e,r)}emplace(e,r,s){const h=2*e;return this.float32[h+0]=r,this.float32[h+1]=s,e}}$d.prototype.bytesPerElement=8,Fi($d,"StructArrayLayout2f8");class cf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,s,h){const l=this.length;return this.resize(l+1),this.emplace(l,e,r,s,h)}emplace(e,r,s,h,l){const m=6*e;return this.uint32[3*e+0]=r,this.uint16[m+2]=s,this.uint16[m+3]=h,this.uint16[m+4]=l,e}}cf.prototype.bytesPerElement=12,Fi(cf,"StructArrayLayout1ul3ui12");class df extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}df.prototype.bytesPerElement=2,Fi(df,"StructArrayLayout1ui2");class Ld extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe){const ce=this.length;return this.resize(ce+1),this.emplace(ce,e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe)}emplace(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce){const Ae=16*e;return this.float32[Ae+0]=r,this.float32[Ae+1]=s,this.float32[Ae+2]=h,this.float32[Ae+3]=l,this.float32[Ae+4]=m,this.float32[Ae+5]=S,this.float32[Ae+6]=O,this.float32[Ae+7]=z,this.float32[Ae+8]=w,this.float32[Ae+9]=R,this.float32[Ae+10]=N,this.float32[Ae+11]=P,this.float32[Ae+12]=D,this.float32[Ae+13]=G,this.float32[Ae+14]=oe,this.float32[Ae+15]=ce,e}}Ld.prototype.bytesPerElement=64,Fi(Ld,"StructArrayLayout16f64");class kf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,s,h,l,m,S){const O=this.length;return this.resize(O+1),this.emplace(O,e,r,s,h,l,m,S)}emplace(e,r,s,h,l,m,S,O){const z=10*e,w=5*e;return this.uint16[z+0]=r,this.uint16[z+1]=s,this.uint16[z+2]=h,this.uint16[z+3]=l,this.float32[w+2]=m,this.float32[w+3]=S,this.float32[w+4]=O,e}}kf.prototype.bytesPerElement=20,Fi(kf,"StructArrayLayout4ui3f20");class bd extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.int16[1*e+0]=r,e}}bd.prototype.bytesPerElement=2,Fi(bd,"StructArrayLayout1i2");class hf extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint8[1*e+0]=r,e}}hf.prototype.bytesPerElement=1,Fi(hf,"StructArrayLayout1ub1");class op extends Yc{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}op.prototype.size=40;class ih extends ip{get(e){return new op(this,e)}}Fi(ih,"CollisionBoxArray");class ff extends Yc{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}ff.prototype.size=60;class Mp extends Df{get(e){return new ff(this,e)}}Fi(Mp,"PlacedSymbolArray");class ap extends Yc{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}ap.prototype.size=80;class wd extends Gh{get(e){return new ap(this,e)}}Fi(wd,"SymbolInstanceArray");class pf extends sf{getoffsetX(e){return this.float32[1*e+0]}}Fi(pf,"GlyphOffsetArray");class Nf extends Vu{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Fi(Nf,"SymbolLineVertexArray");class mf extends Yc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}mf.prototype.size=12;class _f extends cf{get(e){return new mf(this,e)}}Fi(_f,"FeatureIndexArray");class Jc extends rh{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Fi(Jc,"FillExtrusionCentroidArray");class gf extends Yc{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}gf.prototype.size=6;class Nm extends Od{get(e){return new gf(this,e)}}Fi(Nm,"FillExtrusionWallArray");const lm=ra([{name:"a_pos",components:2,type:"Int16"}],4),Cp=ra([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class za{constructor(e=[]){this.segments=e}_prepareSegment(e,r,s,h){let l=this.segments[this.segments.length-1];return e>za.MAX_VERTEX_ARRAY_LENGTH&&cn(`Max vertices per segment is ${za.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!l||l.vertexLength+e>za.MAX_VERTEX_ARRAY_LENGTH||l.sortKey!==h)&&(l={vertexOffset:r,primitiveOffset:s,vertexLength:0,primitiveLength:0},h!==void 0&&(l.sortKey=h),this.segments.push(l)),l}prepareSegment(e,r,s,h){return this._prepareSegment(e,r.length,s.length,h)}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,s,h){return new za([{vertexOffset:e,primitiveOffset:r,vertexLength:s,primitiveLength:h,vaos:{},sortKey:0}])}}function sp(a,e){return 256*(a=Me(Math.floor(a),0,255))+Me(Math.floor(e),0,255)}za.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fi(za,"SegmentVector");const lp=ra([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ap=ra([{name:"a_dash",components:4,type:"Uint16"}]);class vl{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,r,s,h){this.ids.push(zm(e)),this.positions.push(r,s,h)}eachPosition(e,r){const s=zm(e);let h=0,l=this.ids.length-1;for(;h<l;){const m=h+l>>1;this.ids[m]>=s?l=m:h=m+1}for(;this.ids[h]===s;)r(this.positions[3*h],this.positions[3*h+1],this.positions[3*h+2]),h++}static serialize(e,r){const s=new Float64Array(e.ids),h=new Uint32Array(e.positions);return gu(s,h,0,s.length-1),r&&(r.add(s.buffer),r.add(h.buffer)),{ids:s,positions:h}}static deserialize(e){const r=new vl;let s;r.ids=e.ids,r.positions=e.positions;for(const h of r.ids)h!==s&&r.uniqueIds.push(h),s=h;return r.indexed=!0,r}}function zm(a){const e=+a;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:ma(String(a))}function gu(a,e,r,s){for(;r<s;){const h=a[r+s>>1];let l=r-1,m=s+1;for(;;){do l++;while(a[l]<h);do m--;while(a[m]>h);if(l>=m)break;zf(a,l,m),zf(e,3*l,3*m),zf(e,3*l+1,3*m+1),zf(e,3*l+2,3*m+2)}m-r<s-m?(gu(a,e,r,m),r=m+1):(gu(a,e,m+1,s),s=m)}}function zf(a,e,r){const s=a[e];a[e]=a[r],a[r]=s}Fi(vl,"FeaturePositionMap");class Ed{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}set(e,r,s){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Eh extends Ed{constructor(e){super(e),this.current=0}set(e,r,s){this.fetchUniformLocation(e,r)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}}class Zs extends Ed{constructor(e){super(e),this.current=0}set(e,r,s){this.fetchUniformLocation(e,r)&&this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Sd extends Ed{constructor(e){super(e),this.current=[0,0]}set(e,r,s){this.fetchUniformLocation(e,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}}class xc extends Ed{constructor(e){super(e),this.current=[0,0,0]}set(e,r,s){this.fetchUniformLocation(e,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}}class oh extends Ed{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,s){this.fetchUniformLocation(e,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3])))}}class up extends Ed{constructor(e){super(e),this.current=Uo.transparent.toRenderColor(null)}set(e,r,s){this.fetchUniformLocation(e,r)&&(s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a)))}}const Pp=new Float32Array(16);class cp extends Ed{constructor(e){super(e),this.current=Pp}set(e,r,s){if(this.fetchUniformLocation(e,r)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let h=1;h<16;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}}const Op=new Float32Array(9),um=new Float32Array(4);class Rp extends Ed{constructor(e){super(e),this.current=um}set(e,r,s){if(this.fetchUniformLocation(e,r)){for(let h=0;h<4;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}}function ah(a){return[sp(255*a.r,255*a.g),sp(255*a.b,255*a.a)]}class $h{constructor(e,r,s,h){this.value=e,this.uniformNames=r.map(l=>`u_${l}`),this.type=s,this.context=h}setUniform(e,r,s,h,l){const m=h.constantOr(this.value);r.set(e,l,m instanceof Uo?m.toRenderColor(this.ignoreLut?null:this.context.lut):m)}getBinding(e,r){return this.type==="color"?new up(e):new Zs(e)}}class Zh{constructor(e,r){this.uniformNames=r.map(s=>`u_${s}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,s,h,l){const m=l==="u_pattern"||l==="u_dash"?this.pattern:l==="u_pixel_ratio"?this.pixelRatio:null;m&&r.set(e,l,m)}getBinding(e,r){return r==="u_pattern"||r==="u_dash"?new oh(e):new Zs(e)}}class Ru{constructor(e,r,s,h){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=r.map(l=>({name:`a_${l}`,type:"Float32",components:s==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,r,s,h,l,m,S){const O=this.paintVertexArray.length,z=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Ts(0,{brightness:m}),r,{},l,h,S):this.expression.kind==="constant"&&this.expression.value;!this.lutExpression||this.lutExpression.kind!=="composite"&&this.lutExpression.kind!=="source"||(this.ignoreLut=this.lutExpression.evaluate(new Ts(0,{brightness:m}),r,{},l,h,S)==="none"),this.paintVertexArray.resize(e),this._setPaintValue(O,e,z,this.context)}updatePaintArray(e,r,s,h,l,m,S){const O=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:S},s,h,void 0,l):this.expression.kind==="constant"&&this.expression.value;!this.lutExpression||this.lutExpression.kind!=="composite"&&this.lutExpression.kind!=="source"||(this.ignoreLut=this.lutExpression.evaluate({zoom:0,brightness:S},s,h,void 0,l)==="none"),this._setPaintValue(e,r,O,this.context)}_setPaintValue(e,r,s,h){if(this.type==="color"){const l=ah(s.toRenderColor(this.ignoreLut?null:h.lut));for(let m=e;m<r;m++)this.paintVertexArray.emplace(m,l[0],l[1])}else{for(let l=e;l<r;l++)this.paintVertexArray.emplace(l,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class su{constructor(e,r,s,h,l,m){this.expression=e,this.uniformNames=r.map(S=>`u_${S}_t`),this.type=s,this.useIntegerZoom=h,this.context=l,this.maxValue=0,this.paintVertexAttributes=r.map(S=>({name:`a_${S}`,type:"Float32",components:s==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,r,s,h,l,m,S){const O=this.expression.evaluate(new Ts(this.context.zoom,{brightness:m}),r,{},l,h,S),z=this.expression.evaluate(new Ts(this.context.zoom+1,{brightness:m}),r,{},l,h,S);!this.lutExpression||this.lutExpression.kind!=="composite"&&this.lutExpression.kind!=="source"||(this.ignoreLut=this.lutExpression.evaluate(new Ts(this.context.zoom,{brightness:m}),r,{},l,h,S)==="none");const w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,O,z,this.context)}updatePaintArray(e,r,s,h,l,m,S){const O=this.expression.evaluate({zoom:this.context.zoom,brightness:S},s,h,void 0,l),z=this.expression.evaluate({zoom:this.context.zoom+1,brightness:S},s,h,void 0,l);!this.lutExpression||this.lutExpression.kind!=="composite"&&this.lutExpression.kind!=="source"||(this.ignoreLut=this.lutExpression.evaluate({zoom:this.context.zoom,brightness:S},s,h,void 0,l)==="none"),this._setPaintValue(e,r,O,z,this.context)}_setPaintValue(e,r,s,h,l){if(this.type==="color"){const m=ah(s.toRenderColor(this.ignoreLut?null:l.lut)),S=ah(s.toRenderColor(this.ignoreLut?null:l.lut));for(let O=e;O<r;O++)this.paintVertexArray.emplace(O,m[0],m[1],S[0],S[1])}else{for(let m=e;m<r;m++)this.paintVertexArray.emplace(m,s,h);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,s,h,l){const m=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,S=Me(this.expression.interpolationFactor(m,this.context.zoom,this.context.zoom+1),0,1);r.set(e,l,S)}getBinding(e,r){return new Zs(e)}}class Sh{constructor(e,r,s,h,l){this.expression=e,this.layerId=l,this.paintVertexAttributes=(s==="array"?Ap:lp).members;for(let m=0;m<r.length;++m);this.paintVertexArray=new h}populatePaintArray(e,r,s,h){const l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(l,e,r.patterns&&r.patterns[this.layerId],s)}updatePaintArray(e,r,s,h,l,m,S){this._setPaintValues(e,r,s.patterns&&s.patterns[this.layerId],m)}_setPaintValues(e,r,s,h){if(!h||!s)return;const l=h[s];if(!l)return;const{tl:m,br:S,pixelRatio:O}=l;for(let z=e;z<r;z++)this.paintVertexArray.emplace(z,m[0],m[1],S[0],S[1],O)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zd{constructor(e,r,s=()=>!0){this.binders={},this._buffers=[],this.context=r;const h=[];for(const l in e.paint._values){const m=e.paint.get(l),S=e.paint.get(`${l}-use-theme`);if(l.endsWith("-use-theme")||!s(l)||!(m instanceof Kc&&$l(m.property.specification)))continue;const O=Bm(l,e.type),z=m.value,w=m.property.specification.type,R=!!m.property.useIntegerZoom,N=l==="line-dasharray"||l.endsWith("pattern"),P=l==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant"||S&&S.value.kind!=="constant";if(z.kind!=="constant"||P)if(z.kind==="source"||P||N){const D=Wh(l,w,"source");this.binders[l]=N?new Sh(z,O,w,D,e.id):new Ru(z,O,w,D),h.push(`/a_${l}`)}else{const D=Wh(l,w,"composite");this.binders[l]=new su(z,O,w,R,r,D),h.push(`/z_${l}`)}else this.binders[l]=N?new Zh(z.value,O):new $h(z.value,O,w,r),h.push(`/u_${l}`);S&&(this.binders[l].ignoreLut=S.constantOr("default")==="none",this.binders[l].lutExpression=S.value,this.binders[l].checkUseTheme=!0)}this.cacheKey=h.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof Ru||r instanceof su?r.maxValue:0}populatePaintArrays(e,r,s,h,l,m,S){for(const O in this.binders){const z=this.binders[O];z.context=this.context,z instanceof Ru||z instanceof su||z instanceof Sh?z.populatePaintArray(e,r,s,h,l,m,S):z.lutExpression&&z instanceof $h&&z.lutExpression&&(z.lutExpression.kind==="composite"||z.lutExpression.kind==="source")&&(z.ignoreLut=z.lutExpression.evaluate(new Ts(0,{brightness:m}),r,{},l,h,S)==="none")}}setConstantPatternPositions(e){for(const r in this.binders){const s=this.binders[r];s instanceof Zh&&s.setConstantPatternPositions(e)}}updatePaintArrays(e,r,s,h,l,m,S,O,z){let w=!1;const R=Object.keys(e),N=R.length!==0&&!O,P=N?R:r.uniqueIds;this.context.lut=l.lut;for(const D in this.binders){const G=this.binders[D];if(G.context=this.context,(G instanceof Ru||G instanceof su||G instanceof Sh)&&G.expression&&G.expression.kind&&G.expression.kind!=="constant"&&(G.expression.isStateDependent===!0||G.expression.isLightConstant===!1)){const oe=l.paint.get(D);G.expression=oe.value;for(const ce of P){const Ae=e[ce.toString()];r.eachPosition(ce,(Oe,ve,Fe)=>{const Ye=h.feature(Oe);G.updatePaintArray(ve,Fe,Ye,Ae,m,S,z)})}if(!N)for(const ce of s.uniqueIds){const Ae=e[ce.toString()];s.eachPosition(ce,(Oe,ve,Fe)=>{const Ye=h.feature(Oe);G.updatePaintArray(ve,Fe,Ye,Ae,m,S,z)})}w=!0}}return w}defines(){const e=[];for(const r in this.binders){const s=this.binders[r];(s instanceof $h||s instanceof Zh)&&e.push(...s.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const s=this.binders[r];if(s instanceof Ru||s instanceof su||s instanceof Sh)for(let h=0;h<s.paintVertexAttributes.length;h++)e.push(s.paintVertexAttributes[h].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const s=this.binders[r];if(s instanceof $h||s instanceof Zh||s instanceof su)for(const h of s.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof $h||h instanceof Zh||h instanceof su)for(const l of h.uniformNames)r.push({name:l,property:s,binding:h.getBinding(e,l)})}return r}setUniforms(e,r,s,h,l){for(const{name:m,property:S,binding:O}of s){if(this.binders[S].checkUseTheme&&this.binders[S]instanceof $h){const z=h.get(`${S}-use-theme`);z.isConstant()&&(this.binders[S].ignoreLut=z.constantOr("default")==="none")}this.binders[S].setUniform(e,O,l,h.get(S),m)}}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof Ru||r instanceof su||r instanceof Sh)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const s=this.binders[r];(s instanceof Ru||s instanceof su||s instanceof Sh)&&s.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof Ru||r instanceof su||r instanceof Sh)&&r.destroy()}}}class sh{constructor(e,r,s=()=>!0){this.programConfigurations={};for(const h of e)this.programConfigurations[h.id]=new Zd(h,r,s);this.needsUpload=!1,this._featureMap=new vl,this._featureMapWithoutIds=new vl,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,r,s,h,l,m,S,O){for(const z in this.programConfigurations)this.programConfigurations[z].populatePaintArrays(e,r,h,l,m,S,O);r.id!==void 0?this._featureMap.add(r.id,s,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,s,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,s,h,l,m,S){for(const O of s)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,r,O,h,l,m,S||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Fm={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Bm(a,e){return Fm[a]||[a.replace(`${e}-`,"").replace(/-/g,"_")]}const cm={"line-pattern":{source:Js,composite:Js},"fill-pattern":{source:Js,composite:Js},"fill-extrusion-pattern":{source:Js,composite:Js},"line-dasharray":{source:Gu,composite:Gu}},vf={color:{source:$d,composite:dl},number:{source:sf,composite:$d}};function Wh(a,e,r){const s=cm[a];return s&&s[r]||vf[e][r]}Fi($h,"ConstantBinder"),Fi(Zh,"PatternConstantBinder"),Fi(Ru,"SourceExpressionBinder"),Fi(Sh,"PatternCompositeBinder"),Fi(su,"CompositeExpressionBinder"),Fi(Zd,"ProgramConfiguration",{omit:["_buffers"]}),Fi(sh,"ProgramConfigurationSet");const bc=Ft/Math.PI/2,lh=5,Lp=6,Dp=16383,yf=64,Ff=[yf,32,16],Uc=-bc,Td=bc;function xf(a,e,r,s=bc){return r=lr(r),[a*Math.sin(r)*s,-e*s,a*Math.cos(r)*s]}function uh(a,e,r){return xf(Math.cos(lr(a)),Math.sin(lr(a)),e,r)}const Hh=63710088e-1,bf=2*Math.PI*Hh;class Da{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Da(Bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,s=this.lat*r,h=e.lat*r,l=Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos((e.lng-this.lng)*r);return Hh*Math.acos(Math.min(l,1))}toBounds(e=0){const r=360*e/40075017,s=r/Math.cos(Math.PI/180*this.lat);return new ch({lng:this.lng-s,lat:this.lat-r},{lng:this.lng+s,lat:this.lat+r})}toEcef(e){return uh(this.lat,this.lng,bc+e*bc/Hh)}static convert(e){if(e instanceof Da)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Da(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Da(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ch{constructor(e,r){if(e)if(r)this.setSouthWest(e).setNorthEast(r);else if(e.length===4){const s=e;this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]])}else{const s=e;this.setSouthWest(s[0]).setNorthEast(s[1])}}setNorthEast(e){return this._ne=e instanceof Da?new Da(e.lng,e.lat):Da.convert(e),this}setSouthWest(e){return this._sw=e instanceof Da?new Da(e.lng,e.lat):Da.convert(e),this}extend(e){const r=this._sw,s=this._ne;let h,l;if(e instanceof Da)h=e,l=e;else{if(!(e instanceof ch))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(ch.convert(e)):this.extend(Da.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Da.convert(e)):this;if(h=e._sw,l=e._ne,!h||!l)return this}return r||s?(r.lng=Math.min(h.lng,r.lng),r.lat=Math.min(h.lat,r.lat),s.lng=Math.max(l.lng,s.lng),s.lat=Math.max(l.lat,s.lat)):(this._sw=new Da(h.lng,h.lat),this._ne=new Da(l.lng,l.lat)),this}getCenter(){return new Da((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Da(this.getWest(),this.getNorth())}getSouthEast(){return new Da(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:s}=Da.convert(e);let h=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=s&&s<=this._ne.lat&&h}static convert(e){if(e)return e instanceof ch?e:new ch(e)}}const jm=0,dm=25.5;function dp(a){return bf*Math.cos(a*Math.PI/180)}function Wd(a){return(180+a)/360}function Qc(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function yl(a,e){return a/dp(e)}function ld(a){return 360*a-180}function dc(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function hp(a,e){return a*dp(dc(e))}const Is=85.051129;function hm(a){return Math.cos(lr(Me(a,-Is,Is)))}function Zo(a,e){const r=Me(e,jm,dm),s=Math.pow(2,r);return hm(a)*bf/(512*s)}function u(a){return 1/Math.cos(a*Math.PI/180)}function t(a,e=0){const r=Math.exp(Math.PI*(1-(a.y+e/Ft)/(1<<a.z)*2));return 80150034*r/(r*r+1)/Ft/(1<<a.z)}class o{constructor(e,r,s=0){this.x=+e,this.y=+r,this.z=+s}static fromLngLat(e,r=0){const s=Da.convert(e);return new o(Wd(s.lng),Qc(s.lat),yl(r,s.lat))}toLngLat(){return new Da(ld(this.x),dc(this.y))}toAltitude(){return hp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/bf*u(dc(this.y))}}function d(a,e,r,s,h,l,m,S,O){const z=(e+s)/2,w=(r+h)/2,R=new Mt(z,w);S(R),function(N,P,D,G,oe,ce){const Ae=D-oe,Oe=G-ce;return Math.abs((G-P)*Ae-(D-N)*Oe)/Math.hypot(Ae,Oe)}(R.x,R.y,l.x,l.y,m.x,m.y)>=O?(d(a,e,r,z,w,l,R,S,O),d(a,z,w,s,h,R,m,S,O)):a.push(m)}function v(a,e,r){let s=a[0],h=s.x,l=s.y;e(s);const m=[s];for(let S=1;S<a.length;S++){const O=a[S],{x:z,y:w}=O;e(O),d(m,h,l,z,w,s,O,e,r),h=z,l=w,s=O}return m}function b(a,e,r,s){if(s(e,r)){const h=e.add(r)._mult(.5);b(a,e,h,s),b(a,h,r,s)}else a.push(r)}function A(a,e){let r=a[0];const s=[r];for(let h=1;h<a.length;h++){const l=a[h];b(s,r,l,e),r=l}return s}const k=Math.pow(2,14)-1,Z=-k-1;function q(a,e){const r=Math.round(a.x*e),s=Math.round(a.y*e);return a.x=Me(r,Z,k),a.y=Me(s,Z,k),(r<a.x||r>a.x+1||s<a.y||s>a.y+1)&&cn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function re(a,e,r){const s=a.loadGeometry(),h=a.extent,l=Ft/h;if(e&&r&&r.projection.isReprojectedInTileSpace){const m=1<<e.z,{scale:S,x:O,y:z,projection:w}=r,R=N=>{const P=ld((e.x+N.x/h)/m),D=dc((e.y+N.y/h)/m),G=w.project(P,D);N.x=(G.x*S-O)*h,N.y=(G.y*S-z)*h};for(let N=0;N<s.length;N++)if(a.type!==1)s[N]=v(s[N],R,1);else{const P=[];for(const D of s[N])D.x<0||D.x>=h||D.y<0||D.y>=h||(R(D),P.push(D));s[N]=P}}for(const m of s)for(const S of m)q(S,l);return s}function fe(a,e){return{type:a.type,id:a.id,properties:a.properties,geometry:e?re(a):[]}}function pe(a,e,r,s,h){a.emplaceBack(2*e+(s+1)/2,2*r+(h+1)/2)}function Te(a,e,r){a.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class et{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Vu,this.indexArray=new _u,this.segments=new za,this.programConfigurations=new sh(e.layers,{zoom:e.zoom,lut:e.lut}),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}updateFootprints(e,r){}populate(e,r,s,h){const l=this.layers[0],m=[];let S=null;l.type==="circle"&&(S=l.layout.get("circle-sort-key"));for(const{feature:z,id:w,index:R,sourceLayerIndex:N}of e){const P=this.layers[0]._featureFilter.needGeometry,D=fe(z,P);if(!this.layers[0]._featureFilter.filter(new Ts(this.zoom),D,s))continue;const G=S?S.evaluate(D,{},s):void 0,oe={id:w,properties:z.properties,type:z.type,sourceLayerIndex:N,index:R,geometry:P?D.geometry:re(z,s,h),patterns:{},sortKey:G};m.push(oe)}S&&m.sort((z,w)=>z.sortKey-w.sortKey);let O=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new Vh,O=h.projection);for(const z of m){const{geometry:w,index:R,sourceLayerIndex:N}=z,P=e[R].feature;this.addFeature(z,w,R,r.availableImages,s,O,r.brightness),r.featureIndex.insert(P,w,R,N,this.index)}}update(e,r,s,h,l,m,S){this.programConfigurations.updatePaintArrays(e,r,l,s,h,m,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lm.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Cp.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,s,h,l,m,S){for(const O of r)for(const z of O){const w=z.x,R=z.y;if(w<0||w>=Ft||R<0||R>=Ft)continue;if(m){const D=m.projectTilePoint(w,R,l),G=m.upVector(l,w,R),oe=this.globeExtVertexArray;Te(oe,D,G),Te(oe,D,G),Te(oe,D,G),Te(oe,D,G)}const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),P=N.vertexLength;pe(this.layoutVertexArray,w,R,-1,-1),pe(this.layoutVertexArray,w,R,1,-1),pe(this.layoutVertexArray,w,R,1,1),pe(this.layoutVertexArray,w,R,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+2,P+3),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},h,l,S)}}function We(a,e){for(let r=0;r<a.length;r++)if(nn(e,a[r]))return!0;for(let r=0;r<e.length;r++)if(nn(a,e[r]))return!0;return!!qt(a,e)}function rt(a,e,r){return!!nn(a,e)||!!vn(e,a,r)}function it(a,e){if(a.length===1)return dn(e,a[0]);for(let r=0;r<e.length;r++){const s=e[r];for(let h=0;h<s.length;h++)if(nn(a,s[h]))return!0}for(let r=0;r<a.length;r++)if(dn(e,a[r]))return!0;for(let r=0;r<e.length;r++)if(qt(a,e[r]))return!0;return!1}function kt(a,e,r){if(a.length>1){if(qt(a,e))return!0;for(let s=0;s<e.length;s++)if(vn(e[s],a,r))return!0}for(let s=0;s<a.length;s++)if(vn(a[s],e,r))return!0;return!1}function qt(a,e){if(a.length===0||e.length===0)return!1;for(let r=0;r<a.length-1;r++){const s=a[r],h=a[r+1];for(let l=0;l<e.length-1;l++)if(Qt(s,h,e[l],e[l+1]))return!0}return!1}function Qt(a,e,r,s){return Ln(a,r,s)!==Ln(e,r,s)&&Ln(a,e,r)!==Ln(a,e,s)}function vn(a,e,r){const s=r*r;if(e.length===1)return a.distSqr(e[0])<s;for(let h=1;h<e.length;h++)if(on(a,e[h-1],e[h])<s)return!0;return!1}function on(a,e,r){const s=e.distSqr(r);if(s===0)return a.distSqr(e);const h=((a.x-e.x)*(r.x-e.x)+(a.y-e.y)*(r.y-e.y))/s;return a.distSqr(h<0?e:h>1?r:r.sub(e)._mult(h)._add(e))}function dn(a,e){let r,s,h,l=!1;for(let m=0;m<a.length;m++){r=a[m];for(let S=0,O=r.length-1;S<r.length;O=S++)s=r[S],h=r[O],s.y>e.y!=h.y>e.y&&e.x<(h.x-s.x)*(e.y-s.y)/(h.y-s.y)+s.x&&(l=!l)}return l}function nn(a,e){let r=!1;for(let s=0,h=a.length-1;s<a.length;h=s++){const l=a[s],m=a[h];l.y>e.y!=m.y>e.y&&e.x<(m.x-l.x)*(e.y-l.y)/(m.y-l.y)+l.x&&(r=!r)}return r}function Rn(a,e,r,s,h){for(const m of a)if(e<=m.x&&r<=m.y&&s>=m.x&&h>=m.y)return!0;const l=[new Mt(e,r),new Mt(e,h),new Mt(s,h),new Mt(s,r)];if(a.length>2){for(const m of l)if(nn(a,m))return!0}for(let m=0;m<a.length-1;m++)if($n(a[m],a[m+1],l))return!0;return!1}function $n(a,e,r){const s=r[0],h=r[2];if(a.x<s.x&&e.x<s.x||a.x>h.x&&e.x>h.x||a.y<s.y&&e.y<s.y||a.y>h.y&&e.y>h.y)return!1;const l=Ln(a,e,r[0]);return l!==Ln(a,e,r[1])||l!==Ln(a,e,r[2])||l!==Ln(a,e,r[3])}function Pr(a,e,r,s,h,l){let m=e.y-a.y,S=a.x-e.x;if(l=l||0){const O=m*m+S*S;if(O===0)return!0;const z=Math.sqrt(O);m/=z,S/=z}return!((r.x-a.x)*m+(r.y-a.y)*S-l<0||(s.x-a.x)*m+(s.y-a.y)*S-l<0||(h.x-a.x)*m+(h.y-a.y)*S-l<0)}function dr(a,e,r,s,h,l,m){return!(Pr(a,e,s,h,l,m)||Pr(e,r,s,h,l,m)||Pr(r,a,s,h,l,m)||Pr(s,h,a,e,r,m)||Pr(h,l,a,e,r,m)||Pr(l,s,a,e,r,m))}function Or(a,e,r){const s=e.paint.get(a).value;return s.kind==="constant"?s.value:r.programConfigurations.get(e.id).getMaxValue(a)}function kr(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Yn(a,e,r,s,h){if(!e[0]&&!e[1])return a;const l=Mt.convert(e)._mult(h);r==="viewport"&&l._rotate(-s);const m=[];for(let S=0;S<a.length;S++)m.push(a[S].sub(l));return m}function Mr(a,e,r,s){const h=Mt.convert(a)._mult(s);return e==="viewport"&&h._rotate(-r),h}let ti,ir;Fi(et,"CircleBucket",{omit:["layers"]});var Fr,Cr={exports:{}},xi=(Fr||(Fr=1,function(a,e){(function(r){function s(l,m,S){var O=h(256*l,256*(m=Math.pow(2,S)-m-1),S),z=h(256*(l+1),256*(m+1),S);return O[0]+","+O[1]+","+z[0]+","+z[1]}function h(l,m,S){var O=2*Math.PI*6378137/256/Math.pow(2,S);return[l*O-2*Math.PI*6378137/2,m*O-2*Math.PI*6378137/2]}r.getURL=function(l,m,S,O,z,w){return w=w||{},l+"?"+["bbox="+s(S,O,z),"format="+(w.format||"image/png"),"service="+(w.service||"WMS"),"version="+(w.version||"1.1.1"),"request="+(w.request||"GetMap"),"srs="+(w.srs||"EPSG:3857"),"width="+(w.width||256),"height="+(w.height||256),"layers="+m].join("&")},r.getTileBBox=s,r.getMercCoords=h,Object.defineProperty(r,"__esModule",{value:!0})})(e)}(0,Cr.exports)),Cr.exports);class ri{constructor(e,r,s){this.z=e,this.x=r,this.y=s,this.key=gi(0,e,e,r,s)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const s=xi.getTileBBox(this.x,this.y,this.z),h=function(l,m,S){let O,z="";for(let w=l;w>0;w--)O=1<<w-1,z+=(m&O?1:0)+(S&O?2:0);return z}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",s)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kr{constructor(e,r){this.wrap=e,this.canonical=r,this.key=gi(e,r.z,r.z,r.x,r.y)}}class mi{constructor(e,r,s,h,l){this.overscaledZ=e,this.wrap=r,this.canonical=new ri(s,+h,+l),this.key=r===0&&e===s?this.canonical.key:gi(r,e,s,h,l)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new mi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new mi(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return gi(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const s=this.canonical.z-e;return gi(this.wrap*+r,e,e,this.canonical.x>>s,this.canonical.y>>s)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new mi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,s=2*this.canonical.x,h=2*this.canonical.y;return[new mi(r,this.wrap,r,s,h),new mi(r,this.wrap,r,s+1,h),new mi(r,this.wrap,r,s,h+1),new mi(r,this.wrap,r,s+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new mi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new mi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kr(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function gi(a,e,r,s,h){const l=1<<Math.min(r,22);let m=l*(h%l)+s%l;return a&&r<22&&(m+=l*l*((a<0?-2*a-1:2*a)%(1<<2*(22-r)))),16*(32*m+r)+(e-r)}const Gi=[a=>{let e=a.canonical.x-1,r=a.wrap;return e<0&&(e=(1<<a.canonical.z)-1,r--),new mi(a.overscaledZ,r,a.canonical.z,e,a.canonical.y)},a=>{let e=a.canonical.x+1,r=a.wrap;return e===1<<a.canonical.z&&(e=0,r++),new mi(a.overscaledZ,r,a.canonical.z,e,a.canonical.y)},a=>new mi(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,(a.canonical.y===0?1<<a.canonical.z:a.canonical.y)-1),a=>new mi(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y===(1<<a.canonical.z)-1?0:a.canonical.y+1)];Fi(ri,"CanonicalTileID"),Fi(mi,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Li=ra([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:bo}=Li,wo=ra([{name:"a_pos_3",components:3,type:"Int16"}]);var Ao=ra([{name:"a_pos",type:"Int16",components:2}]);class zo{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,s){const h=le.vec3.dot(r,this.dir);if(Math.abs(h)<1e-6)return!1;const l=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/h;return s[0]=this.pos[0]+this.dir[0]*l,s[1]=this.pos[1]+this.dir[1]*l,s[2]=this.pos[2]+this.dir[2]*l,!0}closestPointOnSphere(e,r,s){if(le.vec3.equals(this.pos,e)||r===0)return s[0]=s[1]=s[2]=0,!1;const[h,l,m]=this.dir,S=this.pos[0]-e[0],O=this.pos[1]-e[1],z=this.pos[2]-e[2],w=h*h+l*l+m*m,R=2*(S*h+O*l+z*m),N=R*R-4*w*(S*S+O*O+z*z-r*r);if(N<0){const P=Math.max(-R/2,0),D=S+h*P,G=O+l*P,oe=z+m*P,ce=Math.hypot(D,G,oe);return s[0]=D*r/ce,s[1]=G*r/ce,s[2]=oe*r/ce,!1}{const P=(-R-Math.sqrt(N))/(2*w);if(P<0){const D=Math.hypot(S,O,z);return s[0]=S*r/D,s[1]=O*r/D,s[2]=z*r/D,!1}return s[0]=S+h*P,s[1]=O+l*P,s[2]=z+m*P,!0}}}class Ga{constructor(e,r,s,h,l){this.TL=e,this.TR=r,this.BR=s,this.BL=h,this.horizon=l}static fromInvProjectionMatrix(e,r,s){const h=[-1,1,1],l=[1,1,1],m=[1,-1,1],S=[-1,-1,1],O=le.vec3.transformMat4(h,h,e),z=le.vec3.transformMat4(l,l,e),w=le.vec3.transformMat4(m,m,e),R=le.vec3.transformMat4(S,S,e);return new Ga(O,z,w,R,r/s)}}function ba(a,e,r){let s=1/0,h=-1/0;const l=[];for(const m of a){le.vec3.sub(l,m,e);const S=le.vec3.dot(l,r);s=Math.min(s,S),h=Math.max(h,S)}return[s,h]}function wl(a,e){let r=!0;for(let s=0;s<a.planes.length;s++){const h=a.planes[s];let l=0;for(let m=0;m<e.length;m++)l+=le.vec3.dot(h,e[m])+h[3]>=0;if(l===0)return 0;l!==e.length&&(r=!1)}return r?2:1}function os(a,e){for(const r of a.projections){const s=ba(e,a.points[0],r.axis);if(r.projection[1]<s[0]||r.projection[0]>s[1])return 0}return 1}function ia(a,e){let r=0;const s=[0,0,0,0];for(let h=0;h<a.length;h++)s[0]=a[h][0],s[1]=a[h][1],s[2]=a[h][2],s[3]=1,le.vec4.dot(s,e)>=0&&r++;return r}class Pa{constructor(e,r){this.points=e||new Array(8).fill([0,0,0]),this.planes=r||new Array(6).fill([0,0,0,0]),this.bounds=uo.fromPoints(this.points),this.projections=[],this.frustumEdges=[le.vec3.sub([],this.points[2],this.points[3]),le.vec3.sub([],this.points[0],this.points[3]),le.vec3.sub([],this.points[4],this.points[0]),le.vec3.sub([],this.points[5],this.points[1]),le.vec3.sub([],this.points[6],this.points[2]),le.vec3.sub([],this.points[7],this.points[3])];for(const s of this.frustumEdges){const h=[0,-s[2],s[1]],l=[s[2],0,-s[0]];this.projections.push({axis:h,projection:ba(this.points,this.points[0],h)}),this.projections.push({axis:l,projection:ba(this.points,this.points[0],l)})}}static fromInvProjectionMatrix(e,r,s,h){const l=Math.pow(2,s),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const w=le.vec4.transformMat4([],z,e),R=1/w[3]/r*l;return le.vec4.mul(w,w,[R,R,h?1/w[3]:R,R])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const w=le.vec3.sub([],m[z[0]],m[z[1]]),R=le.vec3.sub([],m[z[2]],m[z[1]]),N=le.vec3.normalize([],le.vec3.cross([],w,R)),P=-le.vec3.dot(N,m[z[1]]);return N.concat(P)}),O=[];for(let z=0;z<m.length;z++)O.push([m[z][0],m[z][1],m[z][2]]);return new Pa(O,S)}intersectsPrecise(e,r,s){for(let h=0;h<r.length;h++)if(!ia(e,r[h]))return 0;for(let h=0;h<this.planes.length;h++)if(!ia(e,this.planes[h]))return 0;for(const h of s)for(const l of this.frustumEdges){const m=le.vec3.cross([],h,l),S=le.vec3.length(m);if(S===0)continue;le.vec3.scale(m,m,1/S);const O=ba(this.points,this.points[0],m),z=ba(e,this.points[0],m);if(O[0]>z[1]||z[0]>O[1])return 0}return 1}containsPoint(e){for(const r of this.planes){const s=r[3];if(le.vec3.dot([r[0],r[1],r[2]],e)+s<0)return!1}return!0}}class uo{static fromPoints(e){const r=[1/0,1/0,1/0],s=[-1/0,-1/0,-1/0];for(const h of e)le.vec3.min(r,r,h),le.vec3.max(s,s,h);return new uo(r,s)}static fromTileIdAndHeight(e,r,s){const h=1<<e.canonical.z,l=e.canonical.x,m=e.canonical.y;return new uo([l/h,m/h,r],[(l+1)/h,(m+1)/h,s])}static applyTransform(e,r){const s=e.getCorners();for(let h=0;h<s.length;++h)le.vec3.transformMat4(s[h],s[h],r);return uo.fromPoints(s)}static applyTransformFast(e,r){const s=[r[12],r[13],r[14]],h=[...s];for(let l=0;l<3;l++)for(let m=0;m<3;m++){const S=r[4*m+l],O=S*e.min[m],z=S*e.max[m];s[l]+=Math.min(O,z),h[l]+=Math.max(O,z)}return new uo(s,h)}static projectAabbCorners(e,r){const s=e.getCorners();for(let h=0;h<s.length;++h)le.vec3.transformMat4(s[h],s[h],r);return s}constructor(e,r){this.min=e,this.max=r,this.center=le.vec3.scale([],le.vec3.add([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],s=le.vec3.clone(this.min),h=le.vec3.clone(this.max);for(let l=0;l<r.length;l++)s[l]=r[l]?this.min[l]:this.center[l],h[l]=r[l]?this.center[l]:this.max[l];return h[2]=this.max[2],new uo(s,h)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?wl(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?wl(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,r){return r||this.intersects(e)?os(e,this.getCorners()):0}intersectsPreciseFlat(e,r){return r||this.intersectsFlat(e)?os(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let r=0;r<3;++r)if(this.min[r]>e.max[r]||e.min[r]>this.max[r])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let r=0;r<3;r++)this.min[r]=Math.min(this.min[r],e.min[r]),this.max[r]=Math.max(this.max[r],e.max[r])}encapsulatePoint(e){for(let r=0;r<3;r++)this.min[r]=Math.min(this.min[r],e[r]),this.max[r]=Math.max(this.max[r],e[r])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}function na(a){return a*bc/Hh}Fi(uo,"Aabb");const Ya=[new uo([Uc,Uc,Uc],[Td,Td,Td]),new uo([Uc,Uc,Uc],[0,0,Td]),new uo([0,Uc,Uc],[Td,0,Td]),new uo([Uc,0,Uc],[0,Td,Td]),new uo([0,0,Uc],[Td,Td,Td])];function Ia(a,e,r,s=!0){const h=le.vec3.scale([],a._camera.position,a.worldSize),l=[e,r,1,1];le.vec4.transformMat4(l,l,a.pixelMatrixInverse),le.vec4.scale(l,l,1/l[3]);const m=le.vec3.sub([],l,h),S=le.vec3.normalize([],m),O=a.globeMatrix,z=[O[12],O[13],O[14]],w=le.vec3.sub([],z,h),R=le.vec3.length(w),N=le.vec3.normalize([],w),P=a.worldSize/(2*Math.PI),D=le.vec3.dot(N,S),G=Math.asin(P/R);if(G<Math.acos(D)){if(!s)return null;const En=[],Yt=[];le.vec3.scale(En,S,R/D),le.vec3.normalize(Yt,le.vec3.sub(Yt,En,w)),le.vec3.normalize(S,le.vec3.add(S,w,le.vec3.scale(S,Yt,Math.tan(G)*R)))}const oe=[];new zo(h,S).closestPointOnSphere(z,P,oe);const ce=le.vec3.normalize([],St(O,0)),Ae=le.vec3.normalize([],St(O,1)),Oe=le.vec3.normalize([],St(O,2)),ve=le.vec3.dot(ce,oe),Fe=le.vec3.dot(Ae,oe),Ye=le.vec3.dot(Oe,oe),ct=Pe(Math.asin(-Fe/P));let Kt=Pe(Math.atan2(ve,Ye));Kt=a.center.lng+function(En,Yt){const Cn=(Yt-En+180)%360-180;return Cn<-180?Cn+360:Cn}(a.center.lng,Kt);const Zt=Wd(Kt),Ut=Me(Qc(ct),0,1);return new o(Zt,Ut)}class Ms{constructor(e,r,s){this.a=le.vec3.sub([],e,s),this.b=le.vec3.sub([],r,s),this.center=s;const h=le.vec3.normalize([],this.a),l=le.vec3.normalize([],this.b);this.angle=Math.acos(le.vec3.dot(h,l))}}function $u(a,e){if(a.angle===0)return null;let r;return r=a.a[e]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[e]/a.a[e]/Math.sin(a.angle)-1/Math.tan(a.angle)),r<0||r>1?null:function(s,h,l,m){const S=Math.sin(l);return s*(Math.sin((1-m)*l)/S)+h*(Math.sin(m*l)/S)}(a.a[e],a.b[e],a.angle,Me(r,0,1))+a.center[e]}function xl(a){if(a.z<=1)return Ya[a.z+2*a.y+a.x];const e=Us(Ws(a));return uo.fromPoints(e)}function lu(a,e,r){return le.vec3.scale(a,a,1-r),le.vec3.scaleAndAdd(a,a,e,r)}function Zu(a,e,r){for(const s of a)le.vec3.transformMat4(s,s,e),le.vec3.scale(s,s,r)}function Mu(a,e,r,s){const h=e/a.worldSize,l=a.globeMatrix;if(r.z<=1){const Zt=xl(r).getCorners();return Zu(Zt,l,h),uo.fromPoints(Zt)}const m=Ws(r,s),S=Us(m,bc+na(a._tileCoverLift));Zu(S,l,h);const O=Number.MAX_VALUE,z=[-O,-O,-O],w=[O,O,O];if(m.contains(a.center)){for(const En of S)le.vec3.min(w,w,En),le.vec3.max(z,z,En);z[2]=0;const Zt=a.point,Ut=[Zt.x*h,Zt.y*h,0];return le.vec3.min(w,w,Ut),le.vec3.max(z,z,Ut),new uo(w,z)}if(a._tileCoverLift>0){for(const Zt of S)le.vec3.min(w,w,Zt),le.vec3.max(z,z,Zt);return new uo(w,z)}const R=[l[12]*h,l[13]*h,l[14]*h],N=m.getCenter(),P=Me(a.center.lat,-Is,Is),D=Me(N.lat,-Is,Is),G=Wd(a.center.lng),oe=Qc(P);let ce=G-Wd(N.lng);const Ae=oe-Qc(D);ce>.5?ce-=1:ce<-.5&&(ce+=1);let Oe=0;if(Math.abs(ce)>Math.abs(Ae))Oe=ce>=0?1:3;else{Oe=Ae>=0?0:2;const Zt=[l[4]*h,l[5]*h,l[6]*h],Ut=-Math.sin(lr(Ae>=0?m.getSouth():m.getNorth()))*bc;le.vec3.scaleAndAdd(R,R,Zt,Ut)}const ve=S[Oe],Fe=S[(Oe+1)%4],Ye=new Ms(ve,Fe,R),ct=[$u(Ye,0)||ve[0],$u(Ye,1)||ve[1],$u(Ye,2)||ve[2]],Kt=td(a.zoom);if(Kt>0){const Zt=function({x:En,y:Yt,z:Cn},Vn,zn,Zn,qn){const hr=1/(1<<Cn);let Kn=En*hr,Zr=Kn+hr,si=Yt*hr,Wr=si+hr,zi=0;const yi=(Kn+Zr)/2-Zn;return yi>.5?zi=-1:yi<-.5&&(zi=1),Kn=((Kn+zi)*Vn-(Zn*=Vn))*zn+Zn,Zr=((Zr+zi)*Vn-Zn)*zn+Zn,si=(si*Vn-(qn*=Vn))*zn+qn,Wr=(Wr*Vn-qn)*zn+qn,[[Kn,Wr,0],[Zr,Wr,0],[Zr,si,0],[Kn,si,0]]}(r,e,a._pixelsPerMercatorPixel,G,oe);for(let En=0;En<S.length;En++)lu(S[En],Zt[En],Kt);const Ut=le.vec3.add([],Zt[Oe],Zt[(Oe+1)%4]);le.vec3.scale(Ut,Ut,.5),lu(ct,Ut,Kt)}for(const Zt of S)le.vec3.min(w,w,Zt),le.vec3.max(z,z,Zt);return w[2]=Math.min(ve[2],Fe[2]),le.vec3.min(w,w,ct),le.vec3.max(z,z,ct),new uo(w,z)}function Ws({x:a,y:e,z:r},s=!1){const h=1/(1<<r),l=new Da(ld(a*h),e===(1<<r)-1&&s?-90:dc((e+1)*h)),m=new Da(ld((a+1)*h),e===0&&s?90:dc(e*h));return new ch(l,m)}function Us(a,e=bc){const r=lr(a.getNorth()),s=lr(a.getSouth()),h=Math.cos(r),l=Math.cos(s),m=Math.sin(r),S=Math.sin(s),O=a.getWest(),z=a.getEast();return[xf(l,S,O,e),xf(l,S,z,e),xf(h,m,z,e),xf(h,m,O,e)]}function gs(a,e,r,s){const h=1<<r.z,l=(a/Ft+r.x)/h;return uh(dc((e/Ft+r.y)/h),ld(l),s)}function Xa({min:a,max:e}){return Dp/Math.max(e[0]-a[0],e[1]-a[1],e[2]-a[2])}const El=new Float64Array(16);function Wu(a){const e=Xa(a),r=le.mat4.fromScaling(El,[e,e,e]);return le.mat4.translate(r,r,le.vec3.negate([],a.min))}function Vs(a){const e=le.mat4.fromTranslation(El,a.min),r=1/Xa(a);return le.mat4.scale(e,e,[r,r,r])}function hc(a){const e=Ft/(2*Math.PI);return a/(2*Math.PI)/e}function qc(a,e){return Ft/(512*Math.pow(2,a))*Xa(xl(e))}function ed(a,e,r,s,h){const l=hc(r),m=[a,e,-r/(2*Math.PI)],S=le.mat4.identity(new Float64Array(16));return le.mat4.translate(S,S,m),le.mat4.scale(S,S,[l,l,l]),le.mat4.rotateX(S,S,lr(-h)),le.mat4.rotateY(S,S,lr(-s)),S}function td(a){return At(lh,Lp,a)}function Hd(a,e){const r=uh(e.lat,e.lng),s=function(l){const m=uh(l._center.lat,l._center.lng),S=le.vec3.fromValues(0,1,0);let O=le.vec3.cross([],S,m);const z=le.mat4.fromRotation([],-l.angle,m);O=le.vec3.transformMat4(O,O,z),le.mat4.fromRotation(z,-l._pitch,O);const w=le.vec3.normalize([],m);return le.vec3.scale(w,w,na(l.cameraToCenterDistance/l.pixelsPerMeter)),le.vec3.transformMat4(w,w,z),le.vec3.add([],m,w)}(a),h=le.vec3.subtract([],s,r);return le.vec3.angle(h,r)}function ud(a,e){return Hd(a,e)>Math.PI/2*1.01}const ec=lr(85),Kh=Math.cos(ec),tc=Math.sin(ec),Yh=le.mat4.create(),Wl=a=>{const e=[];return a.paint.get("circle-pitch-alignment")==="map"&&e.push("PITCH_WITH_MAP"),a.paint.get("circle-pitch-scale")==="map"&&e.push("SCALE_WITH_MAP"),e};function fp(a,e,r,s,h,l,m,S,O){if(l&&a.queryGeometry.isAboveHorizon)return!1;l&&(O*=a.pixelToTileUnitsFactor);const z=a.tileID.canonical,w=r.projection.upVectorScale(z,r.center.lat,r.worldSize).metersToTile;for(const R of e)for(const N of R){const P=N.add(S),D=h&&r.elevation?r.elevation.exaggeration()*h.getElevationAt(P.x,P.y,!0):0,G=r.projection.projectTilePoint(P.x,P.y,z);if(D>0){const Oe=r.projection.upVector(z,P.x,P.y);G.x+=Oe[0]*w*D,G.y+=Oe[1]*w*D,G.z+=Oe[2]*w*D}const oe=l?P:dh(G.x,G.y,G.z,s),ce=l?a.tilespaceRays.map(Oe=>Ig(Oe,D)):a.queryGeometry.screenGeometry,Ae=le.vec4.transformMat4([],[G.x,G.y,G.z,1],s);if(!m&&l?O*=Ae[3]/r.cameraToCenterDistance:m&&!l&&(O*=r.cameraToCenterDistance/Ae[3]),l){const Oe=dc((N.y/Ft+z.y)/(1<<z.z));O/=r.projection.pixelsPerMeter(Oe,1)/yl(1,Oe)}if(rt(ce,oe,O))return!0}return!1}function dh(a,e,r,s){const h=le.vec4.transformMat4([],[a,e,r,1],s);return new Mt(h[0]/h[3],h[1]/h[3])}const Um=le.vec3.fromValues(0,0,0),pp=le.vec3.fromValues(0,0,1);function Ig(a,e){const r=le.vec3.create();return Um[2]=e,a.intersectsPlane(Um,pp,r),new Mt(r[0],r[1])}class Mg extends et{}let Vm,Kd,S_,Cg;function wf(a,{width:e,height:r},s,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*r*s)throw new RangeError("mismatched image size")}else h=new Uint8Array(e*r*s);return a.width=e,a.height=r,a.data=h,a}function kp(a,e,r){const{width:s,height:h}=e;s===a.width&&h===a.height||(Bf(a,e,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,s),height:Math.min(a.height,h)},r,null),a.width=s,a.height=h,a.data=e.data)}function Bf(a,e,r,s,h,l,m,S){if(h.width===0||h.height===0)return e;if(h.width>a.width||h.height>a.height||r.x>a.width-h.width||r.y>a.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||s.x>e.width-h.width||s.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const O=a.data,z=e.data,w=l===4&&S;for(let R=0;R<h.height;R++){const N=((r.y+R)*a.width+r.x)*l,P=((s.y+R)*e.width+s.x)*l;if(w)for(let D=0;D<h.width;D++){const G=N+D*l+3,oe=P+D*l;z[oe+0]=255,z[oe+1]=255,z[oe+2]=255,z[oe+3]=O[G]}else if(m)for(let D=0;D<h.width;D++){const G=N+D*l,oe=P+D*l,ce=O[G+3],Ae=new Uo(O[G+0]/255*ce,O[G+1]/255*ce,O[G+2]/255*ce,ce).toRenderColor(m).toArray();z[oe+0]=Ae[0],z[oe+1]=Ae[1],z[oe+2]=Ae[2],z[oe+3]=Ae[3]}else for(let D=0;D<h.width*l;D++)z[P+D]=O[N+D]}return e}Fi(Mg,"HeatmapBucket",{omit:["layers"]});class Th{constructor(e,r){wf(this,e,1,r)}resize(e){kp(this,new Th(e),1)}clone(){return new Th({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,s,h,l){Bf(e,r,s,h,l,1,null)}}class fc{constructor(e,r){wf(this,e,4,r)}resize(e){kp(this,new fc(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new fc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,s,h,l,m,S){Bf(e,r,s,h,l,4,m,S)}}class Gm{constructor(e,r){this.width=e.width,this.height=e.height,this.data=r instanceof Uint8Array?new Float32Array(r.buffer):r}}function fm(a){const e={},r=a.resolution||256,s=a.clips?a.clips.length:1,h=a.image||new fc({width:r,height:s}),l=(m,S,O)=>{e[a.evaluationKey]=O;const z=a.expression.evaluate(e);z&&(h.data[m+S+0]=Math.floor(255*z.r/z.a),h.data[m+S+1]=Math.floor(255*z.g/z.a),h.data[m+S+2]=Math.floor(255*z.b/z.a),h.data[m+S+3]=Math.floor(255*z.a))};if(a.clips)for(let m=0,S=0;m<s;++m,S+=4*r)for(let O=0,z=0;O<r;O++,z+=4){const w=O/(r-1),{start:R,end:N}=a.clips[m];l(S,z,R*(1-w)+N*w)}else for(let m=0,S=0;m<r;m++,S+=4)l(0,S,m/(r-1));return h}Fi(Th,"AlphaImage"),Fi(fc,"RGBAImage");const $m=ra([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pv}=$m;function jf(a,e,r=2){const s=e&&e.length,h=s?e[0]*r:a.length;let l=Zm(a,0,h,r,!0);const m=[];if(!l||l.next===l.prev)return m;let S,O,z;if(s&&(l=function(w,R,N,P){const D=[];for(let G=0,oe=R.length;G<oe;G++){const ce=Zm(w,R[G]*P,G<oe-1?R[G+1]*P:w.length,P,!1);ce===ce.next&&(ce.steiner=!0),D.push(M_(ce))}D.sort(T_);for(let G=0;G<D.length;G++)N=I_(D[G],N);return N}(a,e,l,r)),a.length>80*r){S=1/0,O=1/0;let w=-1/0,R=-1/0;for(let N=r;N<h;N+=r){const P=a[N],D=a[N+1];P<S&&(S=P),D<O&&(O=D),P>w&&(w=P),D>R&&(R=D)}z=Math.max(w-S,R-O),z=z!==0?32767/z:0}return Sf(l,m,r,S,O,z,0),m}function Zm(a,e,r,s,h){let l;if(h===function(m,S,O,z){let w=0;for(let R=S,N=O-z;R<O;R+=z)w+=(m[N]-m[R])*(m[R+1]+m[N+1]),N=R;return w}(a,e,r,s)>0)for(let m=e;m<r;m+=s)l=ie(m/s|0,a[m],a[m+1],l);else for(let m=r-s;m>=e;m-=s)l=ie(m/s|0,a[m],a[m+1],l);return l&&Ih(l,l.next)&&(Re(l),l=l.next),l}function Ef(a,e){if(!a)return a;e||(e=a);let r,s=a;do if(r=!1,s.steiner||!Ih(s,s.next)&&jl(s.prev,s,s.next)!==0)s=s.next;else{if(Re(s),s=e=s.prev,s===s.next)break;r=!0}while(r||s!==e);return e}function Sf(a,e,r,s,h,l,m){if(!a)return;!m&&l&&function(O,z,w,R){let N=O;do N.z===0&&(N.z=pm(N.x,N.y,z,w,R)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==O);N.prevZ.nextZ=null,N.prevZ=null,function(P){let D,G=1;do{let oe,ce=P;P=null;let Ae=null;for(D=0;ce;){D++;let Oe=ce,ve=0;for(let Ye=0;Ye<G&&(ve++,Oe=Oe.nextZ,Oe);Ye++);let Fe=G;for(;ve>0||Fe>0&&Oe;)ve!==0&&(Fe===0||!Oe||ce.z<=Oe.z)?(oe=ce,ce=ce.nextZ,ve--):(oe=Oe,Oe=Oe.nextZ,Fe--),Ae?Ae.nextZ=oe:P=oe,oe.prevZ=Ae,Ae=oe;ce=Oe}Ae.nextZ=null,G*=2}while(D>1)}(N)}(a,s,h,l);let S=a;for(;a.prev!==a.next;){const O=a.prev,z=a.next;if(l?Pg(a,s,h,l):Ag(a))e.push(O.i,a.i,z.i),Re(a),a=z.next,S=z.next;else if((a=z)===S){m?m===1?Sf(a=Ov(Ef(a),e),e,r,s,h,l,2):m===2&&Rv(a,e,r,s,h,l):Sf(Ef(a),e,r,s,h,l,1);break}}}function Ag(a){const e=a.prev,r=a,s=a.next;if(jl(e,r,s)>=0)return!1;const h=e.x,l=r.x,m=s.x,S=e.y,O=r.y,z=s.y,w=h<l?h<m?h:m:l<m?l:m,R=S<O?S<z?S:z:O<z?O:z,N=h>l?h>m?h:m:l>m?l:m,P=S>O?S>z?S:z:O>z?O:z;let D=s.next;for(;D!==e;){if(D.x>=w&&D.x<=N&&D.y>=R&&D.y<=P&&mm(h,S,l,O,m,z,D.x,D.y)&&jl(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function Pg(a,e,r,s){const h=a.prev,l=a,m=a.next;if(jl(h,l,m)>=0)return!1;const S=h.x,O=l.x,z=m.x,w=h.y,R=l.y,N=m.y,P=S<O?S<z?S:z:O<z?O:z,D=w<R?w<N?w:N:R<N?R:N,G=S>O?S>z?S:z:O>z?O:z,oe=w>R?w>N?w:N:R>N?R:N,ce=pm(P,D,e,r,s),Ae=pm(G,oe,e,r,s);let Oe=a.prevZ,ve=a.nextZ;for(;Oe&&Oe.z>=ce&&ve&&ve.z<=Ae;){if(Oe.x>=P&&Oe.x<=G&&Oe.y>=D&&Oe.y<=oe&&Oe!==h&&Oe!==m&&mm(S,w,O,R,z,N,Oe.x,Oe.y)&&jl(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,ve.x>=P&&ve.x<=G&&ve.y>=D&&ve.y<=oe&&ve!==h&&ve!==m&&mm(S,w,O,R,z,N,ve.x,ve.y)&&jl(ve.prev,ve,ve.next)>=0))return!1;ve=ve.nextZ}for(;Oe&&Oe.z>=ce;){if(Oe.x>=P&&Oe.x<=G&&Oe.y>=D&&Oe.y<=oe&&Oe!==h&&Oe!==m&&mm(S,w,O,R,z,N,Oe.x,Oe.y)&&jl(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;ve&&ve.z<=Ae;){if(ve.x>=P&&ve.x<=G&&ve.y>=D&&ve.y<=oe&&ve!==h&&ve!==m&&mm(S,w,O,R,z,N,ve.x,ve.y)&&jl(ve.prev,ve,ve.next)>=0)return!1;ve=ve.nextZ}return!0}function Ov(a,e){let r=a;do{const s=r.prev,h=r.next.next;!Ih(s,h)&&_m(s,r,r.next,h)&&y(s,h)&&y(h,s)&&(e.push(s.i,r.i,h.i),Re(r),Re(r.next),r=a=h),r=r.next}while(r!==a);return Ef(r)}function Rv(a,e,r,s,h,l){let m=a;do{let S=m.next.next;for(;S!==m.prev;){if(m.i!==S.i&&Wm(m,S)){let O=F(m,S);return m=Ef(m,m.next),O=Ef(O,O.next),Sf(m,e,r,s,h,l,0),void Sf(O,e,r,s,h,l,0)}S=S.next}m=m.next}while(m!==a)}function T_(a,e){return a.x-e.x}function I_(a,e){const r=function(h,l){let m=l;const S=h.x,O=h.y;let z,w=-1/0;do{if(O<=m.y&&O>=m.next.y&&m.next.y!==m.y){const G=m.x+(O-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(G<=S&&G>w&&(w=G,z=m.x<m.next.x?m:m.next,G===S))return z}m=m.next}while(m!==l);if(!z)return null;const R=z,N=z.x,P=z.y;let D=1/0;m=z;do{if(S>=m.x&&m.x>=N&&S!==m.x&&mm(O<P?S:w,O,N,P,O<P?w:S,O,m.x,m.y)){const G=Math.abs(O-m.y)/(S-m.x);y(m,h)&&(G<D||G===D&&(m.x>z.x||m.x===z.x&&Vc(z,m)))&&(z=m,D=G)}m=m.next}while(m!==R);return z}(a,e);if(!r)return e;const s=F(r,a);return Ef(s,s.next),Ef(r,r.next)}function Vc(a,e){return jl(a.prev,a,e.prev)<0&&jl(e.next,a,a.next)<0}function pm(a,e,r,s,h){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-r)*h|0)|a<<8))|a<<4))|a<<2))|a<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*h|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function M_(a){let e=a,r=a;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==a);return r}function mm(a,e,r,s,h,l,m,S){return(h-m)*(e-S)>=(a-m)*(l-S)&&(a-m)*(s-S)>=(r-m)*(e-S)&&(r-m)*(l-S)>=(h-m)*(s-S)}function Wm(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!function(r,s){let h=r;do{if(h.i!==r.i&&h.next.i!==r.i&&h.i!==s.i&&h.next.i!==s.i&&_m(h,h.next,r,s))return!0;h=h.next}while(h!==r);return!1}(a,e)&&(y(a,e)&&y(e,a)&&function(r,s){let h=r,l=!1;const m=(r.x+s.x)/2,S=(r.y+s.y)/2;do h.y>S!=h.next.y>S&&h.next.y!==h.y&&m<(h.next.x-h.x)*(S-h.y)/(h.next.y-h.y)+h.x&&(l=!l),h=h.next;while(h!==r);return l}(a,e)&&(jl(a.prev,a,e.prev)||jl(a,e.prev,e))||Ih(a,e)&&jl(a.prev,a,a.next)>0&&jl(e.prev,e,e.next)>0)}function jl(a,e,r){return(e.y-a.y)*(r.x-e.x)-(e.x-a.x)*(r.y-e.y)}function Ih(a,e){return a.x===e.x&&a.y===e.y}function _m(a,e,r,s){const h=_(jl(a,e,r)),l=_(jl(a,e,s)),m=_(jl(r,s,a)),S=_(jl(r,s,e));return h!==l&&m!==S||!(h!==0||!Uf(a,r,e))||!(l!==0||!Uf(a,s,e))||!(m!==0||!Uf(r,a,s))||!(S!==0||!Uf(r,e,s))}function Uf(a,e,r){return e.x<=Math.max(a.x,r.x)&&e.x>=Math.min(a.x,r.x)&&e.y<=Math.max(a.y,r.y)&&e.y>=Math.min(a.y,r.y)}function _(a){return a>0?1:a<0?-1:0}function y(a,e){return jl(a.prev,a,a.next)<0?jl(a,e,a.next)>=0&&jl(a,a.prev,e)>=0:jl(a,e,a.prev)<0||jl(a,a.next,e)<0}function F(a,e){const r=Ze(a.i,a.x,a.y),s=Ze(e.i,e.x,e.y),h=a.next,l=e.prev;return a.next=e,e.prev=a,r.next=h,h.prev=r,s.next=r,r.prev=s,l.next=s,s.prev=l,s}function ie(a,e,r,s){const h=Ze(a,e,r);return s?(h.next=s.next,h.prev=s,s.next.prev=h,s.next=h):(h.prev=h,h.next=h),h}function Re(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Ze(a,e,r){return{i:a,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Xt(a,e){const r=a.length;if(r<=1)return[a];const s=[];let h,l;for(let m=0;m<r;m++){const S=Er(a[m]);S!==0&&(a[m].area=Math.abs(S),l===void 0&&(l=S<0),l===S<0?(h&&s.push(h),h=[a[m]]):h.push(a[m]))}if(h&&s.push(h),e>1)for(let m=0;m<s.length;m++)s[m].length<=e||(Ic(s[m],e,1,s[m].length-1,Wn),s[m]=s[m].slice(0,e));return s}function Wn(a,e){return e.area-a.area}function yr(a,e,r=1){if(!a)return null;const s=typeof a=="string"?a:a.getPrimary().id;e[s]||(e[s]=[]);const h=cs.from(s).getPrimary().scaleSelf(r);return e[s].push(h),h.serialize()}function hi(a,e,r,s){const h=s.patternDependencies;let l=!1;for(const m of e){const S=m.paint.get(`${a}-pattern`);S.isConstant()||(l=!0),yr(S.constantOr(null),h,r)&&(l=!0)}return l}function Hi(a,e,r,s,h,l){const m=l.patternDependencies;for(const S of e){const O=S.paint.get(`${a}-pattern`).value;if(O.kind!=="constant"){let z=O.evaluate({zoom:s},r,{},l.availableImages);z=z&&z.name?z.name:z;const w=yr(z,m,h);w&&(r.patterns[S.id]=w)}}return r}class bi{constructor(e){this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vu,this.indexArray=new _u,this.indexArray2=new rh,this.programConfigurations=new sh(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new za,this.segments2=new za,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}updateFootprints(e,r){}populate(e,r,s,h){this.hasPattern=hi("fill",this.layers,this.pixelRatio,r);const l=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:S,id:O,index:z,sourceLayerIndex:w}of e){const R=this.layers[0]._featureFilter.needGeometry,N=fe(S,R);if(!this.layers[0]._featureFilter.filter(new Ts(this.zoom),N,s))continue;const P=l?l.evaluate(N,{},s,r.availableImages):void 0,D={id:O,properties:S.properties,type:S.type,sourceLayerIndex:w,index:z,geometry:R?N.geometry:re(S,s,h),patterns:{},sortKey:P};m.push(D)}l&&m.sort((S,O)=>S.sortKey-O.sortKey);for(const S of m){const{geometry:O,index:z,sourceLayerIndex:w}=S;if(this.hasPattern){const R=Hi("fill",this.layers,S,this.zoom,this.pixelRatio,r);this.patternFeatures.push(R)}else this.addFeature(S,O,z,s,{},r.availableImages,r.brightness,r.elevationFeatures);r.featureIndex.insert(e[z].feature,O,z,w,this.index)}}update(e,r,s,h,l,m,S){this.programConfigurations.updatePaintArrays(e,r,l,s,h,m,S)}addFeatures(e,r,s,h,l,m){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,r,s,h,m,e.elevationFeatures)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pv),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,s,h,l,m=[],S,O){for(const z of Xt(r,500)){let w=0;for(const oe of z)w+=oe.length;const R=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),N=R.vertexLength,P=[],D=[];for(const oe of z){if(oe.length===0)continue;oe!==z[0]&&D.push(P.length/2);const ce=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),Ae=ce.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(Ae+oe.length-1,Ae),P.push(oe[0].x),P.push(oe[0].y);for(let Oe=1;Oe<oe.length;Oe++)this.layoutVertexArray.emplaceBack(oe[Oe].x,oe[Oe].y),this.indexArray2.emplaceBack(Ae+Oe-1,Ae+Oe),P.push(oe[Oe].x),P.push(oe[Oe].y);ce.vertexLength+=oe.length,ce.primitiveLength+=oe.length}const G=jf(P,D);for(let oe=0;oe<G.length;oe+=3)this.indexArray.emplaceBack(N+G[oe],N+G[oe+1],N+G[oe+2]);R.vertexLength+=w,R.primitiveLength+=G.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,l,m,h,S)}}let to,Ko,da,ha;Fi(bi,"FillBucket",{omit:["layers","patternFeatures"]});class nc{constructor(e,r,s,h){if(this.triangleCount=r.length/3,this.min=new Mt(0,0),this.max=new Mt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||e.length===0)return;const[l,m]=[e[0].clone(),e[0].clone()];for(let R=1;R<e.length;++R){const N=e[R];l.x=Math.min(l.x,N.x),l.y=Math.min(l.y,N.y),m.x=Math.max(m.x,N.x),m.y=Math.max(m.y,N.y)}if(h){const R=Math.ceil(Math.max(m.x-l.x,m.y-l.y)/h);s=Math.max(s,R)}if(s===0)return;this.min=l,this.max=m;const S=this.max.sub(this.min);S.x=Math.max(S.x,1),S.y=Math.max(S.y,1);const O=Math.max(S.x,S.y)/s;this.cellsX=Math.max(1,Math.ceil(S.x/O)),this.cellsY=Math.max(1,Math.ceil(S.y/O)),this.xScale=1/O,this.yScale=1/O;const z=[];for(let R=0;R<this.triangleCount;R++){const N=e[r[3*R+0]].sub(this.min),P=e[r[3*R+1]].sub(this.min),D=e[r[3*R+2]].sub(this.min),G=Rr(Math.floor(Math.min(N.x,P.x,D.x)),this.xScale,this.cellsX),oe=Rr(Math.floor(Math.max(N.x,P.x,D.x)),this.xScale,this.cellsX),ce=Rr(Math.floor(Math.min(N.y,P.y,D.y)),this.yScale,this.cellsY),Ae=Rr(Math.floor(Math.max(N.y,P.y,D.y)),this.yScale,this.cellsY),Oe=new Mt(0,0),ve=new Mt(0,0),Fe=new Mt(0,0),Ye=new Mt(0,0);for(let ct=ce;ct<=Ae;++ct){Oe.y=ve.y=ct*O,Fe.y=Ye.y=(ct+1)*O;for(let Kt=G;Kt<=oe;++Kt)Oe.x=Fe.x=Kt*O,ve.x=Ye.x=(Kt+1)*O,(dr(N,P,D,Oe,ve,Ye)||dr(N,P,D,Oe,Ye,Fe))&&z.push({cellIdx:ct*this.cellsX+Kt,triIdx:R})}}if(z.length===0)return;z.sort((R,N)=>R.cellIdx-N.cellIdx||R.triIdx-N.triIdx);let w=0;for(;w<z.length;){const R=z[w].cellIdx,N={start:this.payload.length,len:0};for(;w<z.length&&z[w].cellIdx===R;)++N.len,this.payload.push(z[w++].triIdx);this.cells[R]=N}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(e,r){if(this.triangleCount===0||this.cells.length===0||e.x>this.max.x||this.min.x>e.x||e.y>this.max.y||this.min.y>e.y)return;const s=Rr(e.x-this.min.x,this.xScale,this.cellsX),h=Rr(e.y-this.min.y,this.yScale,this.cellsY),l=this.cells[h*this.cellsX+s];if(l){this._lazyInitLookup();for(let m=0;m<l.len;m++){const S=this.payload[l.start+m],O=Math.floor(S/8),z=1<<S%8;if(!(this.lookup[O]&z)&&(this.lookup[O]|=z,r.push(S),r.length===this.triangleCount))return}}}query(e,r,s){if(this.triangleCount===0||this.cells.length===0||e.x>this.max.x||this.min.x>r.x||e.y>this.max.y||this.min.y>r.y)return;this._lazyInitLookup();const h=Rr(e.x-this.min.x,this.xScale,this.cellsX),l=Rr(r.x-this.min.x,this.xScale,this.cellsX),m=Rr(e.y-this.min.y,this.yScale,this.cellsY),S=Rr(r.y-this.min.y,this.yScale,this.cellsY);for(let O=m;O<=S;O++)for(let z=h;z<=l;z++){const w=this.cells[O*this.cellsX+z];if(w)for(let R=0;R<w.len;R++){const N=this.payload[w.start+R],P=Math.floor(N/8),D=1<<N%8;if(!(this.lookup[P]&D)&&(this.lookup[P]|=D,s.push(N),s.length===this.triangleCount))return}}}}function Rr(a,e,r){return Math.max(0,Math.min(r-1,Math.floor(a*e)))}Fi(nc,"TriangleGridIndex");class $r{constructor(e){this.zoom=e.zoom,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.footprints=[]}updateFootprints(e,r){for(const s of this.footprints)r.push({footprint:s,id:e})}populate(e,r,s,h){const l=[];for(const{feature:m,id:S,index:O,sourceLayerIndex:z}of e){const w=this.layers[0]._featureFilter.needGeometry,R=fe(m,w);if(!this.layers[0]._featureFilter.filter(new Ts(this.zoom),R,s))continue;const N={id:S,properties:m.properties,type:m.type,sourceLayerIndex:z,index:O,geometry:w?R.geometry:re(m,s,h),patterns:{}};l.push(N)}for(const m of l){const{geometry:S,index:O,sourceLayerIndex:z}=m;this.addFeature(m,S,O,s,{},r.availableImages,r.brightness),r.featureIndex.insert(e[O].feature,S,O,z,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(e){}update(e,r,s,h,l,m,S){}destroy(){}addFeature(e,r,s,h,l,m=[],S){for(const O of Xt(r,2)){const z=[],w=[],R=[],N=new Mt(1/0,1/0),P=new Mt(-1/0,-1/0);for(const oe of O)if(oe.length!==0){oe!==O[0]&&R.push(w.length/2);for(let ce=0;ce<oe.length;ce++)w.push(oe[ce].x),w.push(oe[ce].y),z.push(oe[ce]),N.x=Math.min(N.x,oe[ce].x),N.y=Math.min(N.y,oe[ce].y),P.x=Math.max(P.x,oe[ce].x),P.y=Math.max(P.y,oe[ce].y)}const D=jf(w,R),G=new nc(z,D,8,256);this.footprints.push({vertices:z,indices:D,grid:G,min:N,max:P})}}}Fi($r,"ClipBucket",{omit:["layers"]});const ii=ra([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Eo=ra([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),ya=ra([{name:"a_centroid_pos",components:2,type:"Uint16"}]),wa=ra([{name:"a_join_normal_inside",components:3,type:"Int16"}]),Qa=ra([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),ea=ra([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:pc}=ii;var rl,Xh,gm,Lv,Og,C_,A_,P_={};function Dv(){if(Xh)return rl;Xh=1;var a=Pn();function e(h,l,m,S,O){this.properties={},this.extent=m,this.type=0,this._pbf=h,this._geometry=-1,this._keys=S,this._values=O,h.readFields(r,this,l)}function r(h,l,m){h==1?l.id=m.readVarint():h==2?function(S,O){for(var z=S.readVarint()+S.pos;S.pos<z;){var w=O._keys[S.readVarint()],R=O._values[S.readVarint()];O.properties[w]=R}}(m,l):h==3?l.type=m.readVarint():h==4&&(l._geometry=m.pos)}function s(h){for(var l,m,S=0,O=0,z=h.length,w=z-1;O<z;w=O++)S+=((m=h[w]).x-(l=h[O]).x)*(l.y+m.y);return S}return rl=e,e.types=["Unknown","Point","LineString","Polygon"],e.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var l,m=h.readVarint()+h.pos,S=1,O=0,z=0,w=0,R=[];h.pos<m;){if(O<=0){var N=h.readVarint();S=7&N,O=N>>3}if(O--,S===1||S===2)z+=h.readSVarint(),w+=h.readSVarint(),S===1&&(l&&R.push(l),l=[]),l.push(new a(z,w));else{if(S!==7)throw new Error("unknown command "+S);l&&l.push(l[0].clone())}}return l&&R.push(l),R},e.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var l=h.readVarint()+h.pos,m=1,S=0,O=0,z=0,w=1/0,R=-1/0,N=1/0,P=-1/0;h.pos<l;){if(S<=0){var D=h.readVarint();m=7&D,S=D>>3}if(S--,m===1||m===2)(O+=h.readSVarint())<w&&(w=O),O>R&&(R=O),(z+=h.readSVarint())<N&&(N=z),z>P&&(P=z);else if(m!==7)throw new Error("unknown command "+m)}return[w,N,R,P]},e.prototype.toGeoJSON=function(h,l,m){var S,O,z=this.extent*Math.pow(2,m),w=this.extent*h,R=this.extent*l,N=this.loadGeometry(),P=e.types[this.type];function D(ce){for(var Ae=0;Ae<ce.length;Ae++){var Oe=ce[Ae];ce[Ae]=[360*(Oe.x+w)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Oe.y+R)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(S=0;S<N.length;S++)G[S]=N[S][0];D(N=G);break;case 2:for(S=0;S<N.length;S++)D(N[S]);break;case 3:for(N=function(ce){var Ae=ce.length;if(Ae<=1)return[ce];for(var Oe,ve,Fe=[],Ye=0;Ye<Ae;Ye++){var ct=s(ce[Ye]);ct!==0&&(ve===void 0&&(ve=ct<0),ve===ct<0?(Oe&&Fe.push(Oe),Oe=[ce[Ye]]):Oe.push(ce[Ye]))}return Oe&&Fe.push(Oe),Fe}(N),S=0;S<N.length;S++)for(O=0;O<N[S].length;O++)D(N[S][O])}N.length===1?N=N[0]:P="Multi"+P;var oe={type:"Feature",geometry:{type:P,coordinates:N},properties:this.properties};return"id"in this&&(oe.id=this.id),oe},rl}function Rg(){if(Lv)return gm;Lv=1;var a=Dv();function e(s,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(r,this,h),this.length=this._features.length}function r(s,h,l){s===15?h.version=l.readVarint():s===1?h.name=l.readString():s===5?h.extent=l.readVarint():s===2?h._features.push(l.pos):s===3?h._keys.push(l.readString()):s===4&&h._values.push(function(m){for(var S=null,O=m.readVarint()+m.pos;m.pos<O;){var z=m.readVarint()>>3;S=z===1?m.readString():z===2?m.readFloat():z===3?m.readDouble():z===4?m.readVarint64():z===5?m.readVarint():z===6?m.readSVarint():z===7?m.readBoolean():null}return S}(l))}return gm=e,e.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var h=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,h,this.extent,this._keys,this._values)},gm}function Lg(){return A_||(A_=1,P_.VectorTile=function(){if(C_)return Og;C_=1;var a=Rg();function e(r,s,h){if(r===3){var l=new a(h,h.readVarint()+h.pos);l.length&&(s[l.name]=l)}}return Og=function(r,s){this.layers=r.readFields(e,{},s)},Og}(),P_.VectorTileFeature=Dv(),P_.VectorTileLayer=Rg()),P_}var Np=Lg();class Dd extends Mt{constructor(e,r,s){super(e,r),this.z=s}}class Hy extends Dd{constructor(e,r,s,h){super(e,r,s),this.w=h}}function Dg(a,e,r,s){const h=[],l=s===0?(m,S,O,z,w,R)=>{m.push(new Mt(R,O+(R-S)/(z-S)*(w-O)))}:(m,S,O,z,w,R)=>{m.push(new Mt(S+(R-O)/(w-O)*(z-S),R))};for(const m of a){const S=[];for(const O of m){if(O.length<=2)continue;const z=[];for(let N=0;N<O.length-1;N++){const P=O[N].x,D=O[N].y,G=O[N+1].x,oe=O[N+1].y,ce=s===0?P:D,Ae=s===0?G:oe;ce<e?Ae>e&&l(z,P,D,G,oe,e):ce>r?Ae<r&&l(z,P,D,G,oe,r):z.push(O[N]),Ae<e&&ce>=e&&l(z,P,D,G,oe,e),Ae>r&&ce<=r&&l(z,P,D,G,oe,r)}let w=O[O.length-1];const R=s===0?w.x:w.y;R>=e&&R<=r&&z.push(w),z.length&&(w=z[z.length-1],z[0].x===w.x&&z[0].y===w.y||z.push(z[0]),S.push(z))}S.length&&h.push(S)}return h}function Ky(a,e,r,s){const h=r==="x"?"y":"x",l=(s-a[r])/(e[r]-a[r]);a[h]=a[h]+(e[h]-a[h])*l,a[r]=s,a.hasOwnProperty("z")&&(a.z=$i(a.z,e.z,l)),a.hasOwnProperty("w")&&(a.w=$i(a.w,e.w,l))}function kv(a,e,r,s){const h=r,l=s;for(const m of["x","y"]){let S=a,O=e;S[m]>=O[m]&&(S=e,O=a),S[m]<h&&O[m]>h&&Ky(S,O,m,h),S[m]<l&&O[m]>l&&Ky(O,S,m,l)}}const Nv=Number.MAX_SAFE_INTEGER;function O_(a,e,r,s){return a.order<e||a.order===Nv||!(a.clipMask&r)||function(h,l){return l.length!==0&&l.find(m=>m===h)===void 0}(s,a.clipScope)}function Vf(a,e){return a.x-e.x||a.y-e.y}function R_(a,e){return Vf(a.min,e.min)===0&&Vf(a.max,e.max)===0}function zp(a,e){return!(a.min.x>e.max.x||a.max.x<e.min.x||a.min.y>e.max.y||a.max.y<e.min.y)}function L_(a,e){if(a.length!==e.length)return!1;for(let r=0;r<a.length;r++)if(a[r].sourceId!==e[r].sourceId||!R_(a[r],e[r])||a[r].order!==e[r].order||a[r].clipMask!==e[r].clipMask||!or(a[r].clipScope,e[r].clipScope))return!1;return!0}function D_(a,e,r){const s=1/Ft,h=1/(1<<r.canonical.z),l=(e.x*s+r.canonical.x)*h+r.wrap,m=(e.y*s+r.canonical.y)*h;return{min:new Mt((a.x*s+r.canonical.x)*h+r.wrap,(a.y*s+r.canonical.y)*h),max:new Mt(l,m)}}function kg(a,e,r){const s=1<<r.canonical.z,h=((e.x-r.wrap)*s-r.canonical.x)*Ft,l=(e.y*s-r.canonical.y)*Ft;return{min:new Mt(((a.x-r.wrap)*s-r.canonical.x)*Ft,(a.y*s-r.canonical.y)*Ft),max:new Mt(h,l)}}function mc(a,e,r,s,h,l,m){const S=a.indices,O=a.vertices,z=[];for(let w=s;w<s+h;w+=3){const R=e[r[w+0]+l],N=e[r[w+1]+l],P=e[r[w+2]+l],D=Math.min(R.x,N.x,P.x),G=Math.max(R.x,N.x,P.x),oe=Math.min(R.y,N.y,P.y),ce=Math.max(R.y,N.y,P.y);z.length=0,a.grid.query(new Mt(D,oe),new Mt(G,ce),z);for(let Ae=0;Ae<z.length;Ae++){const Oe=z[Ae];if(dr(O[S[3*Oe+0]],O[S[3*Oe+1]],O[S[3*Oe+2]],R,N,P,m))return!0}}return!1}function hh(a,e,r,s){if(!a||!r)return!1;let h=a.vertices;if(!e.canonical.equals(s.canonical)||e.wrap!==s.wrap){if(r.vertices.length<a.vertices.length)return hh(r,s,a,e);const l=e.canonical,m=s.canonical,S=Math.pow(2,m.z-l.z);h=a.vertices.map(O=>new Mt((O.x+l.x*Ft)*S-m.x*Ft,(O.y+l.y*Ft)*S-m.y*Ft))}return mc(r,h,a.indices,0,a.indices.length,0,0)}function wc(a,e,r,s){const h=Math.pow(2,s.z-r.z);return new Mt((a+r.x*Ft)*h-s.x*Ft,(e+r.y*Ft)*h-s.y*Ft)}function Mh(a,e){const r=[];e.grid.queryPoint(a,r);const s=e.indices,h=e.vertices;for(let l=0;l<r.length;l++){const m=r[l];if(nn([h[s[3*m+0]],h[s[3*m+1]],h[s[3*m+2]]],a))return!0}return!1}const mp=[new Mt(0,0),new Mt(Ft,0),new Mt(Ft,Ft),new Mt(0,Ft)];function zv(a,e){const r=[];let s=[];if(!e||a.length<2)return[a];if(a.length===2)return $n(a[0],a[1],mp)?[a]:[];for(let h=0;h<a.length+2;h++){const l=a[h%a.length],m=a[(h+1)%a.length],S=$n(h===0?a[a.length-1]:a[(h-1)%a.length],l,mp),O=$n(l,m,mp),z=S||O;z&&s.push(l),z&&O||s.length>0&&(s.length>1&&r.push(s),s=[])}return s.length>1&&r.push(s),r}const Ng=Np.VectorTileFeature.types,Hm=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],k_=["fill-extrusion-flood-light-ground-radius"],Fp=Math.pow(2,13),_p=Math.pow(2,15)-1,Gf=new Mt(0,1),$f=2147483648;function Km(a,e,r,s,h,l,m,S){a.emplaceBack((e<<1)+m,(r<<1)+l,(Math.floor(s*Fp)<<1)+h,Math.round(S))}function Ym(a,e,r){a.emplaceBack(e.x*Ft,e.y*Ft,r?1:0)}function N_(a,e,r,s,h,l){a.emplaceBack(e.x,e.y,(r.x<<1)+s,(r.y<<1)+h,l)}function Xm(a,e,r){a.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class Yy{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Xy{constructor(){this.centroidXY=new Mt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Mt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Mt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Mt(this.max.x-this.min.x,this.max.y-this.min.y)}}class fh{constructor(){this.acc=new Mt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,r){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=r.x,e.min.y=e.max.y=r.y)}appendEdge(e,r,s){this.accCount++,this.acc._add(r);let h=!!this.borders;r.x<e.min.x?(e.min.x=r.x,h=!0):r.x>e.max.x&&(e.max.x=r.x,h=!0),r.y<e.min.y?(e.min.y=r.y,h=!0):r.y>e.max.y&&(e.max.y=r.y,h=!0),((r.x===0||r.x===Ft)&&r.x===s.x)!=((r.y===0||r.y===Ft)&&r.y===s.y)&&this.processBorderOverlap(r,s),h&&this.checkBorderIntersection(r,s)}checkBorderIntersection(e,r){r.x<0!=e.x<0&&this.addBorderIntersection(0,$i(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>Ft!=e.x>Ft&&this.addBorderIntersection(1,$i(r.y,e.y,(Ft-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,$i(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>Ft!=e.y>Ft&&this.addBorderIntersection(3,$i(r.x,e.x,(Ft-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const s=this.borders[e];r<s[0]&&(s[0]=r),r>s[1]&&(s[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const s=e.x===0?0:1;this.addBorderIntersection(s,r.y),this.addBorderIntersection(s,e.y)}else{const s=e.y===0?2:3;this.addBorderIntersection(s,r.x),this.addBorderIntersection(s,e.x)}}centroid(){return this.accCount===0?new Mt(0,0):new Mt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0):0}}function Jy(a,e){const r=a.add(e)._unit(),s=Me(a.x*r.x+a.y*r.y,-1,1);var h,l,m;return m=Math.acos(s),Math.min(4,Math.max(-4,Math.tan(m)))/4*_p*((h=a).x*(l=e).y-h.y*l.x<0?-1:1)}const Qy=[a=>a.x<0,a=>a.x>Ft,a=>a.y<0,a=>a.y>Ft];function Gx(a,e,r,s){const h=[4];if(s===0)return h;r._mult(s);const l=a.sub(r),m=e.sub(r),S=[a,e,l,m];for(let O=0;O<4;O++)for(const z of S)if(Qy[O](z)){h.push(O);break}return h}class Jm{constructor(e){this.vertexArray=new Rf,this.indexArray=new _u,this.programConfigurations=new sh(e.layers,{zoom:e.zoom,lut:e.lut},r=>k_.includes(r)),this._segments=new za,this.hiddenByLandmarkVertexArray=new hf,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new za}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(e,r,s,h=!1){const l=e.length;if(l>2){let m=Math.max(0,this._segments.get().length-1);const S=this._segments._prepareSegment(4*l,this.vertexArray.length,2*this._segmentToGroundQuads[m].length);let O;m!==this._segments.get().length-1&&(m++,this._segmentToGroundQuads[m]=[],this._segmentToRegionTriCounts[m]=[0,0,0,0,0]);{const z=e[0],w=e[1];O=Jy(z.sub(e[l-1])._perp()._unit(),w.sub(z)._perp()._unit())}for(let z=0;z<l;z++){const w=z===l-1?0:z+1,R=e[z],N=e[w],P=e[w===l-1?0:w+1],D=N.sub(R)._perp()._unit(),G=Jy(D,P.sub(N)._perp()._unit()),oe=O,ce=G;if(Qm(R,N,r)||h&&B_(R,r)&&B_(N,r)){O=G;continue}const Ae=S.vertexLength;N_(this.vertexArray,R,N,1,1,oe),N_(this.vertexArray,R,N,1,0,oe),N_(this.vertexArray,R,N,0,1,ce),N_(this.vertexArray,R,N,0,0,ce),S.vertexLength+=4;const Oe=Gx(R,N,D,s);for(const ve of Oe)this._segmentToGroundQuads[m].push({id:Ae,region:ve}),this._segmentToRegionTriCounts[m][ve]+=2,S.primitiveLength+=2;O=G}}}prepareBorderSegments(){if(!this.hasData())return;const e=this._segments.get(),r=e.length;for(let s=0;s<r;s++)this._segmentToGroundQuads[s].sort((h,l)=>h.region-l.region);for(let s=0;s<r;s++){const h=this._segmentToGroundQuads[s],l=e[s],m=this._segmentToRegionTriCounts[s];m.reduce((O,z)=>O+z,0);let S=0;for(let O=0;O<=4;O++){const z=m[O];if(z!==0){let w=this.regionSegments[O];w||(w=this.regionSegments[O]=new za);const R={vertexOffset:l.vertexOffset,primitiveOffset:l.primitiveOffset+S,vertexLength:l.vertexLength,primitiveLength:z};w.get().push(R)}S+=z}for(let O=0;O<h.length;O++){const z=h[O].id;this.indexArray.emplaceBack(z,z+1,z+3),this.indexArray.emplaceBack(z,z+3,z+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,r,s,h,l,m){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,r,s,h,l,m)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Eo.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,r,s,h,l,m,S){this.hasData()&&this.programConfigurations.updatePaintArrays(e,r,s,h,l,m,S)}updateHiddenByLandmark(e){if(!this.hasData())return;const r=e.groundVertexCount+e.groundVertexArrayOffset;if(e.groundVertexCount===0)return;const s=e.flags&$f?1:0;for(let h=e.groundVertexArrayOffset;h<r;++h)this.hiddenByLandmarkVertexArray.emplace(h,s);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,Qa.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){const r=this.regionSegments[e];r&&r.destroy()}}}}class vm{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.pixelRatio=e.pixelRatio,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new _u,this.footprintVertices=new Vu,this.footprintSegments=[],this.layoutVertexArray=new Ha,this.centroidVertexArray=new Jc,this.wallVertexArray=new Nm,this.indexArray=new _u,this.programConfigurations=new sh(e.layers,{zoom:e.zoom,lut:e.lut},r=>Hm.includes(r)),this.segments=new za,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.groundEffect=new Jm(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(e,r){}populate(e,r,s,h){this.features=[],this.hasPattern=hi("fill-extrusion",this.layers,this.pixelRatio,r),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=t(s),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:l,id:m,index:S,sourceLayerIndex:O}of e){const z=this.layers[0]._featureFilter.needGeometry,w=fe(l,z);if(!this.layers[0]._featureFilter.filter(new Ts(this.zoom),w,s))continue;const R={id:m,sourceLayerIndex:O,index:S,geometry:z?w.geometry:re(l,s,h),properties:l.properties,type:l.type,patterns:{}},N=this.layoutVertexArray.length,P=Ng[R.type]==="Polygon";if(this.hasPattern)this.features.push(Hi("fill-extrusion",this.layers,R,this.zoom,this.pixelRatio,r));else if(this.wallMode)for(const D of R.geometry)for(const G of zv(D,P))this.addFeature(R,[G],S,s,{},r.availableImages,h,r.brightness);else this.addFeature(R,R.geometry,S,s,{},r.availableImages,h,r.brightness);r.featureIndex.insert(l,R.geometry,S,O,this.index,N)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,r,s,h,l,m){for(const S of this.features){const O=Ng[S.type]==="Polygon",{geometry:z}=S;if(this.wallMode)for(const w of z)for(const R of zv(w,O))this.addFeature(S,[R],S.index,r,s,h,l,m);else this.addFeature(S,z,S.index,r,s,h,l,m)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(e,r,s,h,l,m,S){this.programConfigurations.updatePaintArrays(e,r,l,s,h,m,S),this.groundEffect.update(e,r,l,s,h,m,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.wallVertexBuffer=e.createVertexBuffer(this.wallVertexArray,wa.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,ea.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,ya.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,s,h,l,m,S,O){const z=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,w=[new Mt(0,0),new Mt(Ft,Ft)],R=S.projection,N=R.name==="globe",P=this.wallMode||Ng[e.type]==="Polygon",D=new fh;D.centroidDataIndex=this.centroidData.length;const G=new Xy,oe=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},h)<=0,ce=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},h);let Ae;if(G.height=ce,G.vertexArrayOffset=this.layoutVertexArray.length,G.groundVertexArrayOffset=this.groundEffect.vertexArray.length,N&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Vh),this.wallMode){if(N)return void cn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(r.length!==1)return;Ae=function(Ut){const En=Ut[0].x===Ut[Ut.length-1].x&&Ut[0].y===Ut[Ut.length-1].y;(function(vi){let li=0;const lo=vi.length;for(let ji=0;ji<lo;ji++)li+=(vi[(ji+1)%lo].x-vi[ji].x)*(vi[(ji+1)%lo].y+vi[ji].y);return li>=0})(Ut)||(Ut=Ut.reverse());const Cn={geometry:[],joinNormals:[],indices:[]},Vn=[],zn=[],Zn=[];let qn=Ut.length;for(;qn>=2&&Ut[qn-1].equals(Ut[qn-2]);)qn--;if(qn<(En?3:2))return Cn;let hr,Kn,Zr,si,Wr,zi=0;for(;zi<qn-1&&Ut[zi].equals(Ut[zi+1]);)zi++;En&&(hr=Ut[qn-2],Wr=Ut[zi].sub(hr)._unit()._perp());for(let vi=zi;vi<qn;vi++){if(Zr=vi===qn-1?En?Ut[zi+1]:void 0:Ut[vi+1],Zr&&Ut[vi].equals(Zr))continue;Wr&&(si=Wr),hr&&(Kn=hr),hr=Ut[vi],Wr=Zr?Zr.sub(hr)._unit()._perp():si,si=si||Wr;let li=si.add(Wr);li.x===0&&li.y===0||li._unit();const lo=li.x*Wr.x+li.y*Wr.y,ji=lo!==0?1/lo:1/0,Yi=si.x*Wr.y-si.y*Wr.x>0;let Yo="miter";const ga=2;Yo==="miter"&&ji>ga&&(Yo="bevel"),Yo==="bevel"&&(ji>100&&(Yo="flipbevel"),ji<ga&&(Yo="miter"));const Ea=(pa,Oa,ka,el)=>{const Gs=new Mt(pa.x,pa.y),sa=new Mt(pa.x,pa.y);Gs.x+=Oa.x*el,Gs.y+=Oa.y*el,sa.x-=Oa.x*Math.max(ka,1),sa.y-=Oa.y*Math.max(ka,1),Zn.push(Oa),Vn.push(Gs),zn.push(sa)};if(Yo==="miter")li._mult(ji),Ea(hr,li,0,0);else if(Yo==="flipbevel")li=Wr.mult(-1),Ea(hr,li,0,0),Ea(hr,li.mult(-1),0,0);else{const pa=-Math.sqrt(ji*ji-1),Oa=Yi?pa:0,ka=Yi?0:pa;Kn&&Ea(hr,si,Oa,ka),Zr&&Ea(hr,Wr,Oa,ka)}}Cn.geometry=[...Vn,...zn.reverse(),Vn[0]],Cn.joinNormals=[...Zn,...Zn.reverse(),Zn[Zn.length-1]];const yi=Cn.geometry.length-1;for(let vi=0;vi<yi/2;vi++)if(vi+1<yi/2){let li=vi,lo=vi+1,ji=yi-1-vi,Yi=yi-2-vi;li=li===0?yi-1:li-1,lo=lo===0?yi-1:lo-1,ji=ji===0?yi-1:ji-1,Yi=Yi===0?yi-1:Yi-1,Cn.indices.push(ji),Cn.indices.push(lo),Cn.indices.push(li),Cn.indices.push(ji),Cn.indices.push(Yi),Cn.indices.push(lo)}return Cn}(r[0]),r=[Ae.geometry]}const Oe=(Ut,En)=>Ut<(En.length-1)/2||Ut===En.length-1,ve=this.wallMode?[r]:Xt(r,500);for(let Ut=ve.length-1;Ut>=0;Ut--){const En=ve[Ut];(En.length===0||(Fe=En[0]).every(Yt=>Yt.x<=0)||Fe.every(Yt=>Yt.x>=Ft)||Fe.every(Yt=>Yt.y<=0)||Fe.every(Yt=>Yt.y>=Ft))&&ve.splice(Ut,1)}var Fe;let Ye;if(N)Ye=jg(ve,w,h);else{Ye=[];for(const Ut of ve)Ye.push({polygon:Ut,bounds:w})}const ct=P?this.edgeRadius:0,Kt=ct>0&&this.zoom<17,Zt=(Ut,En)=>{if(Ut.length===0)return!1;const Yt=Ut[Ut.length-1];return En.x===Yt.x&&En.y===Yt.y};for(const{polygon:Ut,bounds:En}of Ye){let Yt=0,Cn=0;for(const qn of Ut)P&&!qn[0].equals(qn[qn.length-1])&&qn.push(qn[0]),Cn+=P?qn.length-1:qn.length;const Vn=this.segments.prepareSegment((P?5:4)*Cn,this.layoutVertexArray,this.indexArray);G.footprintSegIdx<0&&(G.footprintSegIdx=this.footprintSegments.length),G.polygonSegIdx<0&&(G.polygonSegIdx=this.polygonSegments.length);const zn={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Zn=new Yy;if(Zn.vertexOffset=this.footprintVertices.length,Zn.indexOffset=3*this.footprintIndices.length,Zn.ringIndices=[],P){const qn=[],hr=[];Yt=Vn.vertexLength;for(let Zr=0;Zr<Ut.length;Zr++){const si=Ut[Zr];si.length&&Zr!==0&&hr.push(qn.length/2);const Wr=[];let zi,yi;zi=si[1].sub(si[0])._perp()._unit(),Zn.ringIndices.push(si.length-1);for(let vi=1;vi<si.length;vi++){const li=si[vi],lo=si[vi===si.length-1?1:vi+1],ji=li.clone();if(ct){yi=lo.sub(li)._perp()._unit();const Yi=zi.add(yi)._unit(),Yo=ct*Math.min(4,1/(zi.x*Yi.x+zi.y*Yi.y));ji.x+=Yo*Yi.x,ji.y+=Yo*Yi.y,ji.x=Math.round(ji.x),ji.y=Math.round(ji.y),zi=yi}if(!oe||ct!==0&&!Kt||Zt(Wr,ji)||Wr.push(ji),Km(this.layoutVertexArray,ji.x,ji.y,0,0,1,1,0),this.wallMode){const Yi=Oe(vi,si);Ym(this.wallVertexArray,Ae.joinNormals[vi],!Yi)}Vn.vertexLength++,this.footprintVertices.emplaceBack(li.x,li.y),qn.push(li.x,li.y),N&&Xm(this.layoutVertexExtArray,R.projectTilePoint(ji.x,ji.y,h),R.upVector(h,ji.x,ji.y))}oe&&(ct===0||Kt)&&(Wr.length!==0&&Zt(Wr,Wr[0])&&Wr.pop(),this.groundEffect.addData(Wr,En,z))}const Kn=this.wallMode?Ae.indices:jf(qn,hr);for(let Zr=0;Zr<Kn.length;Zr+=3)this.footprintIndices.emplaceBack(Zn.vertexOffset+Kn[Zr+0],Zn.vertexOffset+Kn[Zr+1],Zn.vertexOffset+Kn[Zr+2]),this.indexArray.emplaceBack(Yt+Kn[Zr],Yt+Kn[Zr+2],Yt+Kn[Zr+1]),Vn.primitiveLength++;Zn.indexCount+=Kn.length,Zn.vertexCount+=this.footprintVertices.length-Zn.vertexOffset}for(let qn=0;qn<Ut.length;qn++){const hr=Ut[qn];D.startRing(G,hr[0]);let Kn=hr.length>4&&j_(hr[hr.length-2],hr[0],hr[1]),Zr=ct?zg(hr[hr.length-2],hr[0],hr[1],ct):0;const si=[];let Wr,zi,yi;zi=hr[1].sub(hr[0])._perp()._unit();let vi=!0;for(let li=1,lo=0;li<hr.length;li++){let ji=hr[li-1],Yi=hr[li];const Yo=hr[li===hr.length-1?1:li+1];if(D.appendEdge(G,Yi,ji),Qm(Yi,ji,En)){ct&&(zi=Yo.sub(Yi)._perp()._unit(),vi=!vi);continue}const ga=Yi.sub(ji)._perp(),Ea=ga.x/(Math.abs(ga.x)+Math.abs(ga.y)),pa=ga.y>0?1:0,Oa=ji.dist(Yi);if(lo+Oa>32768&&(lo=0),ct){yi=Yo.sub(Yi)._perp()._unit();let sa=F_(ji,Yi,Yo,z_(zi,yi),ct);isNaN(sa)&&(sa=0);const Ds=Yi.sub(ji)._unit();ji=ji.add(Ds.mult(Zr))._round(),Yi=Yi.add(Ds.mult(-sa))._round(),Zr=sa,zi=yi,oe&&this.zoom>=17&&(Zt(si,ji)||si.push(ji),Zt(si,Yi)||si.push(Yi))}const ka=Vn.vertexLength,el=hr.length>4&&j_(ji,Yi,Yo);let Gs=Fg(lo,Kn,vi);if(Km(this.layoutVertexArray,ji.x,ji.y,Ea,pa,0,0,Gs),Km(this.layoutVertexArray,ji.x,ji.y,Ea,pa,0,1,Gs),this.wallMode){const sa=Oe(li-1,hr),Ds=Ae.joinNormals[li-1];Ym(this.wallVertexArray,Ds,sa),Ym(this.wallVertexArray,Ds,sa)}if(lo+=Oa,Gs=Fg(lo,el,!vi),Kn=el,Km(this.layoutVertexArray,Yi.x,Yi.y,Ea,pa,0,0,Gs),Km(this.layoutVertexArray,Yi.x,Yi.y,Ea,pa,0,1,Gs),this.wallMode){const sa=Oe(li,hr),Ds=Ae.joinNormals[li];Ym(this.wallVertexArray,Ds,sa),Ym(this.wallVertexArray,Ds,sa)}if(Vn.vertexLength+=4,this.indexArray.emplaceBack(ka+0,ka+1,ka+2),this.indexArray.emplaceBack(ka+1,ka+3,ka+2),Vn.primitiveLength+=2,ct){const sa=Yt+(li===1?hr.length-2:li-2),Ds=li===1?Yt:sa+1;if(this.indexArray.emplaceBack(ka+1,sa,ka+3),this.indexArray.emplaceBack(sa,Ds,ka+3),Vn.primitiveLength+=2,Wr===void 0&&(Wr=ka),!Qm(Yo,hr[li],En)){const Ns=li===hr.length-1?Wr:Vn.vertexLength;this.indexArray.emplaceBack(ka+2,ka+3,Ns),this.indexArray.emplaceBack(ka+3,Ns+1,Ns),this.indexArray.emplaceBack(ka+3,Ds,Ns+1),Vn.primitiveLength+=3}vi=!vi}if(N){const sa=this.layoutVertexExtArray,Ds=R.projectTilePoint(ji.x,ji.y,h),Ns=R.projectTilePoint(Yi.x,Yi.y,h),Tl=R.upVector(h,ji.x,ji.y),Au=R.upVector(h,Yi.x,Yi.y);Xm(sa,Ds,Tl),Xm(sa,Ds,Tl),Xm(sa,Ns,Au),Xm(sa,Ns,Au)}}P&&(Yt+=hr.length-1),oe&&ct&&this.zoom>=17&&(si.length!==0&&Zt(si,si[0])&&si.pop(),this.groundEffect.addData(si,En,z,ct>0))}this.footprintSegments.push(Zn),zn.triangleCount=this.indexArray.length-zn.triangleArrayOffset,this.polygonSegments.push(zn),++G.footprintSegLen,++G.polygonSegLen}if(G.vertexCount=this.layoutVertexArray.length-G.vertexArrayOffset,G.groundVertexCount=this.groundEffect.vertexArray.length-G.groundVertexArrayOffset,G.vertexCount!==0){if(G.centroidXY=D.borders?Gf:this.encodeCentroid(D,G),this.centroidData.push(G),D.borders){this.featuresOnBorder.push(D);const Ut=this.featuresOnBorder.length-1;for(let En=0;En<D.borders.length;En++)D.borders[En][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[En].push(Ut)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,l,m,h,O),this.groundEffect.addPaintPropertiesData(e,s,l,m,h,O),this.maxHeight=Math.max(this.maxHeight,ce)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((r,s)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[s].borders[e][0])}splitToSubtiles(){const e=[];for(let S=0;S<this.centroidData.length;S++){const O=this.centroidData[S],z=+(O.min.y+O.max.y>Ft),w=2*z+(+(O.min.x+O.max.x>Ft)^z);for(let R=0;R<O.polygonSegLen;R++){const N=O.polygonSegIdx+R;e.push({centroidIdx:S,subtile:w,polygonSegmentIdx:N,triangleSegmentIdx:this.polygonSegments[N].triangleSegIdx})}}const r=new _u;e.sort((S,O)=>S.triangleSegmentIdx===O.triangleSegmentIdx?S.subtile-O.subtile:S.triangleSegmentIdx-O.triangleSegmentIdx);let s=0,h=0,l=0;for(const S of e){if(S.triangleSegmentIdx!==s)break;l++}const m=e.length;for(;h!==e.length;){s=e[h].triangleSegmentIdx;let S=0,O=h,z=h;for(let w=O;w<l&&e[w].subtile===S;w++)z++;for(;O!==l;){const w=e[O];S=w.subtile;const R=this.centroidData[w.centroidIdx].min.clone(),N=this.centroidData[w.centroidIdx].max.clone(),P={vertexOffset:this.segments.segments[s].vertexOffset,primitiveOffset:r.length,vertexLength:this.segments.segments[s].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let D=O;D<z;D++){const G=e[D],oe=this.polygonSegments[G.polygonSegmentIdx],ce=this.centroidData[G.centroidIdx].min,Ae=this.centroidData[G.centroidIdx].max,Oe=this.indexArray.uint16;for(let ve=oe.triangleArrayOffset;ve<oe.triangleArrayOffset+oe.triangleCount;ve++)r.emplaceBack(Oe[3*ve],Oe[3*ve+1],Oe[3*ve+2]);P.primitiveLength+=oe.triangleCount,R.x=Math.min(R.x,ce.x),R.y=Math.min(R.y,ce.y),N.x=Math.max(N.x,Ae.x),N.y=Math.max(N.y,Ae.y)}P.primitiveLength>0&&this.triangleSubSegments.push({segment:P,min:R,max:N}),O=z;for(let D=O;D<l&&e[D].subtile===e[O].subtile;D++)z++}h=l;for(let w=h;w<m&&e[w].triangleSegmentIdx===e[h].triangleSegmentIdx;w++)l++}r._trim(),this.indexArray=r}getVisibleSegments(e,r,s){const h=new za;if(this.wallMode){for(const G of this.triangleSubSegments)h.segments.push(G.segment);return h}let l=0,m=0;const S=1<<e.canonical.z;if(r){const G=r.getMinMaxForTile(e);G&&(l=G.min,m=G.max)}m+=this.maxHeight;const O=e.toUnwrapped();let z;const w=[O.canonical.x/S+O.wrap,O.canonical.y/S],R=[(O.canonical.x+1)/S+O.wrap,(O.canonical.y+1)/S],N=(G,oe,ce)=>[G[0]*(1-ce[0])+oe[0]*ce[0],G[1]*(1-ce[1])+oe[1]*ce[1]],P=[],D=[];for(const G of this.triangleSubSegments){P[0]=G.min.x/Ft,P[1]=G.min.y/Ft,D[0]=G.max.x/Ft,D[1]=G.max.y/Ft;const oe=N(w,R,P),ce=N(w,R,D);if(new uo([oe[0],oe[1],l],[ce[0],ce[1],m]).intersectsPrecise(s)===0){z&&(h.segments.push(z),z=void 0);continue}const Ae=G.segment;z&&z.vertexOffset!==Ae.vertexOffset&&(h.segments.push(z),z=void 0),z?(z.vertexLength+=Ae.vertexLength,z.primitiveLength+=Ae.primitiveLength):z={vertexOffset:Ae.vertexOffset,primitiveLength:Ae.primitiveLength,vertexLength:Ae.vertexLength,primitiveOffset:Ae.primitiveOffset,sortKey:void 0,vaos:{}}}return z&&h.segments.push(z),h}encodeCentroid(e,r){const s=e.centroid(),h=r.span(),l=Math.min(7,Math.round(h.x*this.tileToMeter/10)),m=Math.min(7,Math.round(h.y*this.tileToMeter/10));return new Mt(Me(s.x,1,Ft-1)<<3|l,Me(s.y,1,Ft-1)<<3|m)}encodeBorderCentroid(e){if(!e.borders)return new Mt(0,0);const r=e.borders,s=Number.MAX_VALUE;if(r[0][0]!==s||r[1][0]!==s){const h=r[0][0]!==s?0:1;return new Mt(6|(r[0][0]!==s?0:65528),(r[h][0]+r[h][1])/2<<3|6)}{const h=r[2][0]!==s?2:3;return new Mt((r[h][0]+r[h][1])/2<<3|6,6|(r[2][0]!==s?0:65528))}}showCentroid(e){const r=this.centroidData[e.centroidDataIndex];r.flags&=$f,r.centroidXY.x=0,r.centroidXY.y=0,this.writeCentroidToBuffer(r)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);const r=e.vertexArrayOffset,s=e.vertexCount+e.vertexArrayOffset,h=e.flags&$f?Gf:e.centroidXY,l=this.centroidVertexArray.geta_centroid_pos0(r);if(this.centroidVertexArray.geta_centroid_pos1(r)!==h.y||l!==h.x){for(let m=r;m<s;++m)this.centroidVertexArray.emplace(m,h.x,h.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,r,s){if(r.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=r.updateTime;const h=r.getReplacementRegionsForTile(e.toUnwrapped());if(L_(this.activeReplacements,h))return;if(this.activeReplacements=h,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const m of this.centroidData)m.flags&=2147483647;const l=[];for(const m of this.activeReplacements){if(m.order<s)continue;const S=Math.max(1,Math.pow(2,m.footprintTileId.canonical.z-e.canonical.z));for(const O of this.centroidData)if(!(O.flags&$f||m.min.x>O.max.x||O.min.x>m.max.x||m.min.y>O.max.y||O.min.y>m.max.y))for(let z=0;z<O.footprintSegLen;z++){const w=this.footprintSegments[O.footprintSegIdx+z];if(l.length=0,qy(this.footprintVertices,w.vertexOffset,w.vertexCount,m.footprintTileId.canonical,e.canonical,l),mc(m.footprint,l,this.footprintIndices.uint16,w.indexOffset,w.indexCount,-w.vertexOffset,-S)){O.flags|=$f;break}}}for(const m of this.centroidData)this.writeCentroidToBuffer(m);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,r,s){let h=!1;for(let l=0;l<s.footprintSegLen;l++){const m=this.footprintSegments[s.footprintSegIdx+l];let S=0;for(const O of m.ringIndices){for(let z=S,w=O+S-1;z<O+S;w=z++){const R=this.footprintVertices.int16[2*(z+m.vertexOffset)+0],N=this.footprintVertices.int16[2*(z+m.vertexOffset)+1],P=this.footprintVertices.int16[2*(w+m.vertexOffset)+1];N>r!=P>r&&e<(this.footprintVertices.int16[2*(w+m.vertexOffset)+0]-R)*(r-N)/(P-N)+R&&(h=!h)}S=O}}return h}getHeightAtTileCoord(e,r){let s=Number.NEGATIVE_INFINITY,h=!0;const l=4*(e+Ft)*Ft+(r+Ft);if(this.partLookup.hasOwnProperty(l)){const m=this.partLookup[l];return m?{height:m.height,hidden:!!(m.flags&$f)}:void 0}for(const m of this.centroidData)e>m.max.x||m.min.x>e||r>m.max.y||m.min.y>r||this.footprintContainsPoint(e,r,m)&&m&&m.height>s&&(s=m.height,this.partLookup[l]=m,h=!!(m.flags&$f));if(s!==Number.NEGATIVE_INFINITY)return{height:s,hidden:h};this.partLookup[l]=void 0}}function z_(a,e){const r=a.add(e)._unit();return a.x*r.x+a.y*r.y}function zg(a,e,r,s){const h=e.sub(a)._perp()._unit(),l=r.sub(e)._perp()._unit();return F_(a,e,r,z_(h,l),s)}function F_(a,e,r,s,h){const l=Math.sqrt(1-s*s);return Math.min(a.dist(e)/3,e.dist(r)/3,h*l/s)}function Qm(a,e,r){return a.x<r[0].x&&e.x<r[0].x||a.x>r[1].x&&e.x>r[1].x||a.y<r[0].y&&e.y<r[0].y||a.y>r[1].y&&e.y>r[1].y}function B_(a,e){return a.x<e[0].x||a.x>e[1].x||a.y<e[0].y||a.y>e[1].y}function j_(a,e,r){if(a.x<0||a.x>=Ft||e.x<0||e.x>=Ft||r.x<0||r.x>=Ft)return!1;const s=r.sub(e),h=s.perp(),l=a.sub(e);return(s.x*l.x+s.y*l.y)/Math.sqrt((s.x*s.x+s.y*s.y)*(l.x*l.x+l.y*l.y))>-.866&&h.x*l.x+h.y*l.y<0}function Fg(a,e,r){const s=e?2|a:-3&a;return r?1|s:-2&s}function Bg(){const a=Math.PI/32,e=Math.tan(a),r=Hh;return r*Math.sqrt(1+2*e*e)-r}function jg(a,e,r){const s=1<<r.z,h=ld(r.x/s),l=ld((r.x+1)/s),m=dc(r.y/s),S=dc((r.y+1)/s);return function(O,z,w,R,N=0,P){const D=[];if(!O.length||!w||!R)return D;const G=(Ye,ct)=>{for(const Kt of Ye)D.push({polygon:Kt,bounds:ct})},oe=Math.ceil(Math.log2(w)),ce=Math.ceil(Math.log2(R)),Ae=oe-ce,Oe=[];for(let Ye=0;Ye<Math.abs(Ae);Ye++)Oe.push(Ae>0?0:1);for(let Ye=0;Ye<Math.min(oe,ce);Ye++)Oe.push(0),Oe.push(1);let ve=O;if(ve=Dg(ve,z[0].y-N,z[1].y+N,1),ve=Dg(ve,z[0].x-N,z[1].x+N,0),!ve.length)return D;const Fe=[];for(Oe.length?Fe.push({polygons:ve,bounds:z,depth:0}):G(ve,z);Fe.length;){const Ye=Fe.pop(),ct=Ye.depth,Kt=Oe[ct],Zt=Ye.bounds[0],Ut=Ye.bounds[1],En=Kt===0?Zt.x:Zt.y,Yt=Kt===0?Ut.x:Ut.y,Cn=P?P(Kt,En,Yt):.5*(En+Yt),Vn=Dg(Ye.polygons,En-N,Cn+N,Kt),zn=Dg(Ye.polygons,Cn-N,Yt+N,Kt);if(Vn.length){const Zn=[Zt,new Mt(Kt===0?Cn:Ut.x,Kt===1?Cn:Ut.y)];Oe.length>ct+1?Fe.push({polygons:Vn,bounds:Zn,depth:ct+1}):G(Vn,Zn)}if(zn.length){const Zn=[new Mt(Kt===0?Cn:Zt.x,Kt===1?Cn:Zt.y),Ut];Oe.length>ct+1?Fe.push({polygons:zn,bounds:Zn,depth:ct+1}):G(zn,Zn)}}return D}(a,e,Math.ceil((l-h)/11.25),Math.ceil((m-S)/11.25),1,(O,z,w)=>{if(O===0)return .5*(z+w);{const R=dc((r.y+z/Ft)/s);return(Qc(.5*(dc((r.y+w/Ft)/s)+R))*s-r.y)*Ft}})}function qy(a,e,r,s,h,l){const m=Math.pow(2,s.z-h.z);for(let S=0;S<r;S++){let O=a.int16[2*(S+e)+0],z=a.int16[2*(S+e)+1];O=(O+h.x*Ft)*m-s.x*Ft,z=(z+h.y*Ft)*m-s.y*Ft,l.push(new Mt(O,z))}}let Fv,kd;function nd(a,e){return a.x*e.x+a.y*e.y}function Nd(a,e){if(a.length===1){let r=0;const s=e[r++];let h;for(;!h||s.equals(h);)if(h=e[r++],!h)return 1/0;for(;r<e.length;r++){const l=e[r],m=a[0],S=h.sub(s),O=l.sub(s),z=m.sub(s),w=nd(S,S),R=nd(S,O),N=nd(O,O),P=nd(z,S),D=nd(z,O),G=w*N-R*R,oe=(N*P-R*D)/G,ce=(w*D-R*P)/G,Ae=s.z*(1-oe-ce)+h.z*oe+l.z*ce;if(isFinite(Ae))return Ae}return 1/0}{let r=1/0;for(const s of e)r=Math.min(r,s.z);return r}}function Jh(a,e,r,s,h,l,m,S){const O=m*h.getElevationAt(a,e,!0,!0),z=l[0]!==0,w=z?l[1]===0?m*(l[0]/7-450):m*function(R,N,P){const D=Math.floor(N[0]/8),G=Math.floor(N[1]/8),oe=10*(N[0]-8*D),ce=10*(N[1]-8*G),Ae=R.getElevationAt(D,G,!0,!0),Oe=R.getMeterToDEM(P),ve=Math.floor(.5*(oe*Oe-1)),Fe=Math.floor(.5*(ce*Oe-1)),Ye=R.tileCoordToPixel(D,G),ct=2*ve+1,Kt=2*Fe+1,Zt=function(zn,Zn,qn,hr,Kn){return[zn.getElevationAtPixel(Zn,qn,!0),zn.getElevationAtPixel(Zn+Kn,qn,!0),zn.getElevationAtPixel(Zn,qn+Kn,!0),zn.getElevationAtPixel(Zn+hr,qn+Kn,!0)]}(R,Ye.x-ve,Ye.y-Fe,ct,Kt),Ut=Math.abs(Zt[0]-Zt[1]),En=Math.abs(Zt[2]-Zt[3]),Yt=Math.abs(Zt[0]-Zt[2])+Math.abs(Zt[1]-Zt[3]),Cn=Math.min(.25,.5*Oe*(Ut+En)/ct),Vn=Math.min(.25,.5*Oe*Yt/Kt);return Ae+Math.max(Cn*oe,Vn*ce)}(h,l,S):O;return{base:O+(r===0?-1:r),top:z?Math.max(w+s,O+r+2):O+s}}Fi(vm,"FillExtrusionBucket",{omit:["layers","features"]}),Fi(Xy,"PartData"),Fi(Yy,"FootprintSegment"),Fi(fh,"BorderCentroidData"),Fi(Jm,"GroundEffect");const Bv=ra([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),U_=ra([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:e0}=Bv,z1=ra([{name:"a_packed",components:3,type:"Float32"}]),{members:F1}=z1,t0=ra([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:B1}=t0;class n0{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Th({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const s=this.getKey(e,r);return this.positions[s]}trim(){const e=this.width,r=this.height=gn(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,s){const h=[];let l=e.length%2==1?-e[e.length-1]*s:0,m=e[0]*s,S=!0;h.push({left:l,right:m,isDash:S,zeroLength:e[0]===0});let O=e[0];for(let z=1;z<e.length;z++){S=!S;const w=e[z];l=O*s,O+=w,m=O*s,h.push({left:l,right:m,isDash:S,zeroLength:w===0})}return h}addRoundDash(e,r,s){const h=r/2;for(let l=-s;l<=s;l++){const m=this.width*(this.nextRow+s+l);let S=0,O=e[S];for(let z=0;z<this.width;z++){z/O.right>1&&(O=e[++S]);const w=Math.abs(z-O.left),R=Math.abs(z-O.right),N=Math.min(w,R);let P;const D=l/s*(h+1);if(O.isDash){const G=h-Math.abs(D);P=Math.sqrt(N*N+G*G)}else P=h-Math.sqrt(N*N+D*D);this.image.data[m+z]=Math.max(0,Math.min(255,P+128))}}}addRegularDash(e,r){for(let O=e.length-1;O>=0;--O){const z=e[O],w=e[O+1];z.zeroLength?e.splice(O,1):w&&w.isDash===z.isDash&&(w.left=z.left,e.splice(O,1))}const s=e[0],h=e[e.length-1];s.isDash===h.isDash&&(s.left=h.left-this.width,h.right=s.right+this.width);const l=this.width*this.nextRow;let m=0,S=e[m];for(let O=0;O<this.width;O++){O/S.right>1&&(S=e[++m]);const z=Math.abs(O-S.left),w=Math.abs(O-S.right),R=Math.min(z,w);this.image.data[l+O]=Math.max(0,Math.min(255,(S.isDash?R:-R)+r+128))}}addDash(e,r){const s=this.getKey(e,r);if(this.positions[s])return this.positions[s];const h=r==="round",l=h?7:0,m=2*l+1;if(this.nextRow+m>this.height)return cn("LineAtlas out of space"),null;e.length===0&&e.push(1);let S=0;for(let w=0;w<e.length;w++)e[w]<0&&(cn("Negative value is found in line dasharray, replacing values with 0"),e[w]=0),S+=e[w];if(S!==0){const w=this.width/S,R=this.getDashRanges(e,this.width,w);h?this.addRoundDash(R,w,l):this.addRegularDash(R,r==="square"?.5*w:0)}const O=this.nextRow+l;this.nextRow+=m;const z={tl:[O,l],br:[S,0]};return this.positions[s]=z,z}}Fi(n0,"LineAtlas");const j1=Np.VectorTileFeature.types,r0=Math.cos(Math.PI/180*37.5),$x=Math.cos(Math.PI/180*5);class Ug{constructor(e){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=e.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=e.overscaling,this.pixelRatio=e.pixelRatio,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Rd,this.layoutVertexArray2=new cl,this.patternVertexArray=new cl,this.indexArray=new _u,this.programConfigurations=new sh(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new za,this.maxLineLength=0,this.zOffsetVertexArray=new cl,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.tessellationStep=e.tessellationStep?e.tessellationStep:Ft/64}updateFootprints(e,r){}populate(e,r,s,h){this.hasPattern=hi("line",this.layers,this.pixelRatio,r);const l=this.layers[0].layout.get("line-sort-key");this.tileToMeter=t(s);const m=this.layers[0].layout.get("line-z-offset"),S=m.isConstant()&&!m.constantOr(0),O=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=O==="sea"||O==="ground"||!S&&O==="none",this.hasZOffset&&O==="none"&&cn(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const z=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&z!==void 0;const w=[];for(const{feature:D,id:G,index:oe,sourceLayerIndex:ce}of e){const Ae=this.layers[0]._featureFilter.needGeometry,Oe=fe(D,Ae);if(!this.layers[0]._featureFilter.filter(new Ts(this.zoom),Oe,s))continue;const ve=l?l.evaluate(Oe,{},s):void 0,Fe={id:G,properties:D.properties,type:D.type,sourceLayerIndex:ce,index:oe,geometry:Ae?Oe.geometry:re(D,s,h),patterns:{},sortKey:ve};w.push(Fe)}l&&w.sort((D,G)=>D.sortKey-G.sortKey);const{lineAtlas:R,featureIndex:N}=r,P=this.addConstantDashes(R);for(const D of w){const{geometry:G,index:oe,sourceLayerIndex:ce}=D;if(P&&this.addFeatureDashes(D,R),this.hasPattern){const Ae=Hi("line",this.layers,D,this.zoom,this.pixelRatio,r);this.patternFeatures.push(Ae)}else this.addFeature(D,G,oe,s,R.positions,r.availableImages,r.brightness);N.insert(e[oe].feature,G,oe,ce,this.index)}}addConstantDashes(e){let r=!1;for(const s of this.layers){const h=s.paint.get("line-dasharray").value,l=s.layout.get("line-cap").value;if(h.kind!=="constant"||l.kind!=="constant")r=!0;else{const m=l.value,S=h.value;if(!S)continue;e.addDash(S,m)}}return r}addFeatureDashes(e,r){const s=this.zoom;for(const h of this.layers){const l=h.paint.get("line-dasharray").value,m=h.layout.get("line-cap").value;if(l.kind==="constant"&&m.kind==="constant")continue;let S,O;if(l.kind==="constant"){if(S=l.value,!S)continue}else S=l.evaluate({zoom:s},e);O=m.kind==="constant"?m.value:m.evaluate({zoom:s},e),r.addDash(S,O),e.patterns[h.id]=r.getKey(S,O)}}update(e,r,s,h,l,m,S){this.programConfigurations.updatePaintArrays(e,r,l,s,h,m,S)}addFeatures(e,r,s,h,l,m){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,r,s,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,F1)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=e.createVertexBuffer(this.patternVertexArray,B1)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,U_.members,!0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,e0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,s,h,l,m,S){const O=this.layers[0].layout,z=O.get("line-join").evaluate(e,{}),w=O.get("line-cap").evaluate(e,{}),R=O.get("line-miter-limit"),N=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(e),this.lineFeature=e,this.zOffsetValue=O.get("line-z-offset").value;const P=this.layers[0].paint.get("line-width").value;P.kind!=="constant"&&P.isLineProgressConstant===!1&&(this.variableWidthValue=P);for(const D of r)this.addLine(D,e,h,z,w,R,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,l,m,h,S)}addLine(e,r,s,h,l,m,S){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const O=h==="none";if(this.patternJoinNone=this.hasPattern&&O,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<e.length-1;Oe++)this.totalDistance+=e[Oe].dist(e[Oe+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=j1[r.type]==="Polygon";let w=e.length;for(;w>=2&&e[w-1].equals(e[w-2]);)w--;let R=0;for(;R<w-1&&e[R].equals(e[R+1]);)R++;if(w<(z?3:2))return;h==="bevel"&&(m=1.05);const N=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let P,D,G,oe,ce,Ae;this.e1=this.e2=-1,z&&(P=e[w-2],ce=e[R].sub(P)._unit()._perp());for(let Oe=R;Oe<w;Oe++){if(G=Oe===w-1?z?e[R+1]:void 0:e[Oe+1],G&&e[Oe].equals(G))continue;ce&&(oe=ce),P&&(D=P),P=e[Oe],Ae=this.evaluateLineProgressFeatures(D?D.dist(P):0),ce=G?G.sub(P)._unit()._perp():oe,oe=oe||ce;const ve=D&&G;let Fe=ve?h:z||O?"butt":l;const Ye=oe.x*ce.x+oe.y*ce.y;if(O){const Vn=function(zn){if(zn.patternJoinNone){const Zn=zn.segmentPoints.length/2,qn=zn.lineSoFar-zn.segmentStart;for(let hr=0;hr<Zn;++hr){const Kn=zn.segmentPoints[2*hr+1],Zr=Math.round(zn.segmentPoints[2*hr])+.5+.25*Kn;zn.patternVertexArray.emplaceBack(Zr,qn,zn.segmentStart),zn.patternVertexArray.emplaceBack(Zr,qn,zn.segmentStart)}zn.segmentPoints.length=0}zn.e1=zn.e2=-1};if(ve&&Ye<$x){this.updateDistance(D,P),this.addCurrentVertex(P,oe,1,1,N,Ae),Vn(this),this.addCurrentVertex(P,ce,-1,-1,N,Ae);continue}if(D){if(!G){this.updateDistance(D,P),this.addCurrentVertex(P,oe,1,1,N,Ae),Vn(this);continue}Fe="miter"}}let ct=oe.add(ce);ct.x===0&&ct.y===0||ct._unit();const Kt=ct.x*ce.x+ct.y*ce.y,Zt=Kt!==0?1/Kt:1/0,Ut=2*Math.sqrt(2-2*Kt),En=Kt<r0&&D&&G,Yt=oe.x*ce.y-oe.y*ce.x>0,Cn=this.overscaling<=16?15*Ft/(512*this.overscaling):0;if(ve&&Fe==="round"){if(Zt<S)Fe="miter";else if(Zt<=2){const Vn=V_(P,-10,Ft+10);Fe=this.hasZOffset&&(Vn||this.hasCrossSlope)?"miter":"fakeround"}}if(Fe==="miter"&&Zt>m&&(Fe="bevel"),Fe==="bevel"&&(Zt>2&&(Fe="flipbevel"),Zt<m&&(Fe="miter")),D&&!(Fe==="miter"&&En)&&this.updateDistance(D,P),Fe==="miter")if(En){const Vn=P.dist(D);if(Vn>2*Cn){const Zn=P.sub(P.sub(D)._mult(Cn/Vn)._round());this.updateDistance(D,Zn),this.addCurrentVertex(Zn,oe,0,0,N,Ae),D=Zn}this.updateDistance(D,P),ct._mult(Zt),this.addCurrentVertex(P,ct,0,0,N,Ae);const zn=P.dist(G);if(zn>2*Cn){const Zn=P.add(G.sub(P)._mult(Cn/zn)._round());this.updateDistance(P,Zn),this.addCurrentVertex(Zn,ce,0,0,N,Ae),P=Zn}}else ct._mult(Zt),this.addCurrentVertex(P,ct,0,0,N,Ae);else if(Fe==="flipbevel"){if(Zt>100)ct=ce.mult(-1);else{const Vn=Zt*oe.add(ce).mag()/oe.sub(ce).mag();ct._perp()._mult(Vn*(Yt?-1:1))}this.addCurrentVertex(P,ct,0,0,N,Ae),this.addCurrentVertex(P,ct.mult(-1),0,0,N,Ae)}else if(Fe==="bevel"||Fe==="fakeround"){Ae!=null&&D&&this.addCurrentVertex(P,oe,-1,-1,N,Ae);const Vn=P.dist(D)<=2*Cn&&Fe!=="bevel",zn=ct.mult(Yt?1:-1);zn._mult(Zt);const Zn=ce.mult(Yt?-1:1),qn=oe.mult(Yt?-1:1),hr=this.evaluateLineProgressFeatures(this.distance);if(Ae==null&&(this.addHalfVertex(P,zn.x,zn.y,!1,!Yt,0,N,hr),Vn||this.addHalfVertex(P,zn.x+2*qn.x,zn.y+2*qn.y,!1,Yt,0,N,hr)),Fe==="fakeround"){const Kn=Math.round(180*Ut/Math.PI/20);this.addHalfVertex(P,qn.x,qn.y,!1,Yt,0,N,hr);for(let Zr=0;Zr<Kn;Zr++){let si=Zr/Kn;if(si!==.5){const zi=si-.5;si+=si*zi*(si-1)*((1.0904+Ye*(Ye*(3.55645-1.43519*Ye)-3.2452))*zi*zi+(.848013+Ye*(.215638*Ye-1.06021)))}const Wr=Zn.sub(qn)._mult(si)._add(qn)._unit();this.addHalfVertex(P,Wr.x,Wr.y,!1,Yt,0,N,hr)}this.addHalfVertex(P,Zn.x,Zn.y,!1,Yt,0,N,hr)}Vn||Ae!=null||this.addHalfVertex(P,zn.x+2*Zn.x,zn.y+2*Zn.y,!1,Yt,0,N,hr),Ae!=null&&G&&this.addCurrentVertex(P,ce,1,1,N,Ae)}else Fe==="butt"?this.addCurrentVertex(P,ct,0,0,N,Ae):Fe==="square"?(D||this.addCurrentVertex(P,ct,-1,-1,N,Ae),this.addCurrentVertex(P,ct,0,0,N,Ae),D&&this.addCurrentVertex(P,ct,1,1,N,Ae)):Fe==="round"&&(D&&(this.addCurrentVertex(P,oe,0,0,N,Ae),this.addCurrentVertex(P,oe,1,1,N,Ae,!0)),G&&(this.addCurrentVertex(P,ce,-1,-1,N,Ae,!0),this.addCurrentVertex(P,ce,0,0,N,Ae)))}}addVerticesTo(e,r,s,h,l,m,S,O,z,w){const R=(r.w-e.w)/this.tessellationStep|0;let N=0;const P=this.scaledDistance;if(R>1){this.lineSoFar=e.w;const G=(r.x-e.x)/R,oe=(r.y-e.y)/R,ce=(r.z-e.z)/R,Ae=(r.w-e.w)/R;for(let Oe=1;Oe<R;++Oe){e.x+=G,e.y+=oe,e.z+=ce,this.lineSoFar+=Ae,N+=Ae;const ve=this.evaluateLineProgressFeatures(this.prevDistance+N);this.scaledDistance=(this.prevDistance+N)/this.totalDistance,this.addHalfVertex(e,s,h,w,!1,S,z,ve),this.addHalfVertex(e,l,m,w,!0,-O,z,ve)}}this.lineSoFar=r.w,this.scaledDistance=P;const D=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(r,s,h,w,!1,S,z,D),this.addHalfVertex(r,l,m,w,!0,-O,z,D)}evaluateLineProgressFeatures(e){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+e)/this.totalFeatureLength):cn(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let r=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(r=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:r}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:r}:{zOffset:0,variableWidth:r}}addCurrentVertex(e,r,s,h,l,m,S=!1){const O=r.x+r.y*s,z=r.y-r.x*s,w=r.y*h-r.x,R=-r.y-r.x*h;if(m!=null){const N=this.hasZOffset,P=-10,D=Ft+10,G=m.zOffset,oe=new Hy(e.x,e.y,G,this.lineSoFar),ce=!!N&&V_(e,P,D),Ae=this.lineSoFar,Oe=this.distance;if(this.currentVertex)if(ce){const ve=this.currentVertexIsOutside,Fe=this.currentVertex,Ye=new Hy(e.x,e.y,G,this.lineSoFar);if(kv(Fe,Ye,P,D),!V_(Ye,P,D)){if(ve){this.e1=this.e2=-1,this.distance-=Fe.dist(oe),this.lineSoFar=Fe.w;const ct=this.evaluateLineProgressFeatures(Fe.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(Fe,O,z,S,!1,s,l,ct),this.addHalfVertex(Fe,w,R,S,!0,-h,l,ct),this.prevDistance=this.distance}this.distance=this.prevDistance+Fe.dist(Ye),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(Fe,Ye,O,z,w,R,s,h,l,S),this.distance=Oe,this.scaledDistance=this.distance/this.totalDistance}}else{const ve=this.currentVertex;if(this.currentVertexIsOutside){kv(ve,oe,P,D),this.e1=this.e2=-1,this.distance-=ve.dist(oe),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ve.w;const Fe=this.evaluateLineProgressFeatures(ve.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ve,O,z,S,!1,s,l,Fe),this.addHalfVertex(ve,w,R,S,!0,-h,l,Fe),this.prevDistance=this.distance,this.distance=Oe,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ve,oe,O,z,w,R,s,h,l,S)}else ce||(this.addHalfVertex(e,O,z,S,!1,s,l,m),this.addHalfVertex(e,w,R,S,!0,-h,l,m));this.currentVertex=oe,this.currentVertexIsOutside=ce,this.lineSoFar=Ae}else this.addHalfVertex(e,O,z,S,!1,s,l,m),this.addHalfVertex(e,w,R,S,!0,-h,l,m)}addHalfVertex({x:e,y:r},s,h,l,m,S,O,z){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),m||this.segmentPoints.push(this.lineSoFar-this.segmentStart,S)),this.layoutVertexArray.emplaceBack((e<<1)+(l?1:0),(r<<1)+(m?1:0),Math.round(63*s)+128,Math.round(63*h)+128,1+(S===0?0:S<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const R=$i(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,R)}const w=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,w),O.primitiveLength++),m?this.e2=w:this.e1=w,z!=null&&this.zOffsetVertexArray.emplaceBack(z.zOffset,z.variableWidth,z.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(e,r){this.prevDistance=this.distance,this.distance+=e.dist(r),this.updateScaledDistance()}}function V_(a,e,r){return a.x<e||a.x>r||a.y<e||a.y>r}let jv,Uv;function Vv(a,e,r){return e*(Ft/(a.tileSize*Math.pow(2,r-a.tileID.overscaledZ)))}Fi(Ug,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Gv=(a,e,r)=>(1-r)*a+r*e;function U1(a,e){return 1/Vv(a,1,e.tileZoom)}function $v(a,e,r,s){return a.translatePosMatrix(s||e.tileID.projMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const Zv=a=>{const e=[];V1(a)&&e.push("RENDER_LINE_DASH"),a.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const r=a.paint.get("line-trim-offset");r[0]===0&&r[1]===0||e.push("RENDER_LINE_TRIM_OFFSET"),a.paint.get("line-border-width").constantOr(1)!==0&&e.push("RENDER_LINE_BORDER");const s=a.layout.get("line-join").constantOr("miter")==="none",h=!!a.paint.get("line-pattern").constantOr(1);return s&&h&&e.push("LINE_JOIN_NONE"),e};function V1(a){const e=a.paint.get("line-dasharray").value;return e.value||e.kind!=="constant"}let Vg;const i0=()=>Vg||(Vg={layout:jv||(jv=new gl({"line-cap":new Ni(gr.layout_line["line-cap"]),"line-join":new Ni(gr.layout_line["line-join"]),"line-miter-limit":new di(gr.layout_line["line-miter-limit"]),"line-round-limit":new di(gr.layout_line["line-round-limit"]),"line-sort-key":new Ni(gr.layout_line["line-sort-key"]),"line-z-offset":new Ni(gr.layout_line["line-z-offset"]),"line-elevation-reference":new di(gr.layout_line["line-elevation-reference"]),"line-cross-slope":new di(gr.layout_line["line-cross-slope"]),visibility:new di(gr.layout_line.visibility),"line-width-unit":new di(gr.layout_line["line-width-unit"])})),paint:Uv||(Uv=new gl({"line-opacity":new Ni(gr.paint_line["line-opacity"]),"line-color":new Ni(gr.paint_line["line-color"]),"line-translate":new di(gr.paint_line["line-translate"]),"line-translate-anchor":new di(gr.paint_line["line-translate-anchor"]),"line-width":new Ni(gr.paint_line["line-width"]),"line-gap-width":new Ni(gr.paint_line["line-gap-width"]),"line-offset":new Ni(gr.paint_line["line-offset"]),"line-blur":new Ni(gr.paint_line["line-blur"]),"line-dasharray":new Ni(gr.paint_line["line-dasharray"]),"line-pattern":new Ni(gr.paint_line["line-pattern"]),"line-gradient":new vd(gr.paint_line["line-gradient"]),"line-trim-offset":new di(gr.paint_line["line-trim-offset"]),"line-trim-fade-range":new di(gr.paint_line["line-trim-fade-range"]),"line-trim-color":new di(gr.paint_line["line-trim-color"]),"line-emissive-strength":new di(gr.paint_line["line-emissive-strength"]),"line-border-width":new Ni(gr.paint_line["line-border-width"]),"line-border-color":new Ni(gr.paint_line["line-border-color"]),"line-occlusion-opacity":new di(gr.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},Vg);class Gg extends Ni{possiblyEvaluate(e,r){return r=new Ts(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(e,r)}evaluate(e,r,s,h){return r=Lt({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(e,r,s,h)}}let Bp;function Wv(a,e){return e>0?e+2*a:a}const o0=ra([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),a0=ra([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),G1=ra([{name:"a_projected_pos",components:4,type:"Float32"}],4);ra([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $1=ra([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),s0=ra([{name:"a_texb",components:2,type:"Uint16"}]),Zx=ra([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),Wx=ra([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);ra([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Z1=ra([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),l0=ra([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ra([{name:"triangle",components:3,type:"Uint16"}]),ra([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ra([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),ra([{type:"Float32",name:"offsetX"}]),ra([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var cd=24;const Zf=128;function G_(a,e,r,s,h){if(a.kind==="camera")return a.maxSize;if(a.kind==="composite"){const l=e.possiblyEvaluate(new Ts(a.maxZoom),r).evaluate(h,{},r),m=e.possiblyEvaluate(new Ts(a.minZoom),r).evaluate(h,{},r);return Math.max(l,m)}return e.possiblyEvaluate(new Ts(s)).evaluate(h,{},r)}function $_(a,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new Ts(a+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:s,interpolationType:h}=r;let l=0;for(;l<s.length&&s[l]<=a;)l++;l=Math.max(0,l-1);let m=l;for(;m<s.length&&s[m]<a+1;)m++;m=Math.min(s.length-1,m);const S=s[l],O=s[m];return r.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:O,interpolationType:h}:{kind:"camera",minZoom:S,maxZoom:O,minSize:r.evaluate(new Ts(S)),maxSize:r.evaluate(new Ts(O)),interpolationType:h}}}function qm(a,{uSize:e,uSizeT:r},{lowerSize:s,upperSize:h}){return a.kind==="source"?s/Zf:a.kind==="composite"?$i(s/Zf,h/Zf,r):e}function Z_(a,e,r=1){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize*r;else if(a.kind!=="source"){const{interpolationType:l,minZoom:m,maxZoom:S}=a,O=l?Me(Ro.interpolationFactor(l,e,m,S),0,1):0;a.kind==="camera"?h=$i(a.minSize,a.maxSize,O)*r:s=O*r}return{uSizeT:s,uSize:h}}var W1=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Zf,evaluateSizeForFeature:qm,evaluateSizeForZoom:Z_,getRasterizedIconSize:G_,getSizeData:$_});function Hx(a,e,r){return a.sections.forEach(s=>{s.text=function(h,l,m){const S=l.layout.get("text-transform").evaluate(m,{});return S==="uppercase"?h=h.toLocaleUpperCase():S==="lowercase"&&(h=h.toLocaleLowerCase()),uc.applyArabicShaping&&(h=uc.applyArabicShaping(h)),h}(s.text,e,r)}),a}const $g={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function Kx(a){return a==="\uFE36"||a==="\uFE48"||a==="\uFE38"||a==="\uFE44"||a==="\uFE42"||a==="\uFE3E"||a==="\uFE3C"||a==="\uFE3A"||a==="\uFE18"||a==="\uFE40"||a==="\uFE10"||a==="\uFE13"||a==="\uFE14"||a==="\uFF40"||a==="\uFFE3"||a==="\uFE11"||a==="\uFE12"}function u0(a){return a==="\uFE35"||a==="\uFE47"||a==="\uFE37"||a==="\uFE43"||a==="\uFE41"||a==="\uFE3D"||a==="\uFE3B"||a==="\uFE39"||a==="\uFE17"||a==="\uFE3F"}var e_,t_,Hv,c0={};function Kv(){return e_||(e_=1,c0.read=function(a,e,r,s,h){var l,m,S=8*h-s-1,O=(1<<S)-1,z=O>>1,w=-7,R=r?h-1:0,N=r?-1:1,P=a[e+R];for(R+=N,l=P&(1<<-w)-1,P>>=-w,w+=S;w>0;l=256*l+a[e+R],R+=N,w-=8);for(m=l&(1<<-w)-1,l>>=-w,w+=s;w>0;m=256*m+a[e+R],R+=N,w-=8);if(l===0)l=1-z;else{if(l===O)return m?NaN:1/0*(P?-1:1);m+=Math.pow(2,s),l-=z}return(P?-1:1)*m*Math.pow(2,l-s)},c0.write=function(a,e,r,s,h,l){var m,S,O,z=8*l-h-1,w=(1<<z)-1,R=w>>1,N=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=s?0:l-1,D=s?1:-1,G=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(S=isNaN(e)?1:0,m=w):(m=Math.floor(Math.log(e)/Math.LN2),e*(O=Math.pow(2,-m))<1&&(m--,O*=2),(e+=m+R>=1?N/O:N*Math.pow(2,1-R))*O>=2&&(m++,O/=2),m+R>=w?(S=0,m=w):m+R>=1?(S=(e*O-1)*Math.pow(2,h),m+=R):(S=e*Math.pow(2,R-1)*Math.pow(2,h),m=0));h>=8;a[r+P]=255&S,P+=D,S/=256,h-=8);for(m=m<<h|S,z+=h;z>0;a[r+P]=255&m,P+=D,m/=256,z-=8);a[r+P-D]|=128*G}),c0}function Yv(){if(Hv)return t_;Hv=1,t_=e;var a=Kv();function e(ve){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ve)?ve:new Uint8Array(ve||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var r=4294967296,s=1/r,h=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function l(ve){return ve.type===e.Bytes?ve.readVarint()+ve.pos:ve.pos+1}function m(ve,Fe,Ye){return Ye?4294967296*Fe+(ve>>>0):4294967296*(Fe>>>0)+(ve>>>0)}function S(ve,Fe,Ye){var ct=Fe<=16383?1:Fe<=2097151?2:Fe<=268435455?3:Math.floor(Math.log(Fe)/(7*Math.LN2));Ye.realloc(ct);for(var Kt=Ye.pos-1;Kt>=ve;Kt--)Ye.buf[Kt+ct]=Ye.buf[Kt]}function O(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeVarint(ve[Ye])}function z(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeSVarint(ve[Ye])}function w(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeFloat(ve[Ye])}function R(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeDouble(ve[Ye])}function N(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeBoolean(ve[Ye])}function P(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeFixed32(ve[Ye])}function D(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeSFixed32(ve[Ye])}function G(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeFixed64(ve[Ye])}function oe(ve,Fe){for(var Ye=0;Ye<ve.length;Ye++)Fe.writeSFixed64(ve[Ye])}function ce(ve,Fe){return(ve[Fe]|ve[Fe+1]<<8|ve[Fe+2]<<16)+16777216*ve[Fe+3]}function Ae(ve,Fe,Ye){ve[Ye]=Fe,ve[Ye+1]=Fe>>>8,ve[Ye+2]=Fe>>>16,ve[Ye+3]=Fe>>>24}function Oe(ve,Fe){return(ve[Fe]|ve[Fe+1]<<8|ve[Fe+2]<<16)+(ve[Fe+3]<<24)}return e.prototype={destroy:function(){this.buf=null},readFields:function(ve,Fe,Ye){for(Ye=Ye||this.length;this.pos<Ye;){var ct=this.readVarint(),Kt=ct>>3,Zt=this.pos;this.type=7&ct,ve(Kt,Fe,this),this.pos===Zt&&this.skip(ct)}return Fe},readMessage:function(ve,Fe){return this.readFields(ve,Fe,this.readVarint()+this.pos)},readFixed32:function(){var ve=ce(this.buf,this.pos);return this.pos+=4,ve},readSFixed32:function(){var ve=Oe(this.buf,this.pos);return this.pos+=4,ve},readFixed64:function(){var ve=ce(this.buf,this.pos)+ce(this.buf,this.pos+4)*r;return this.pos+=8,ve},readSFixed64:function(){var ve=ce(this.buf,this.pos)+Oe(this.buf,this.pos+4)*r;return this.pos+=8,ve},readFloat:function(){var ve=a.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ve},readDouble:function(){var ve=a.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ve},readVarint:function(ve){var Fe,Ye,ct=this.buf;return Fe=127&(Ye=ct[this.pos++]),Ye<128?Fe:(Fe|=(127&(Ye=ct[this.pos++]))<<7,Ye<128?Fe:(Fe|=(127&(Ye=ct[this.pos++]))<<14,Ye<128?Fe:(Fe|=(127&(Ye=ct[this.pos++]))<<21,Ye<128?Fe:function(Kt,Zt,Ut){var En,Yt,Cn=Ut.buf;if(En=(112&(Yt=Cn[Ut.pos++]))>>4,Yt<128||(En|=(127&(Yt=Cn[Ut.pos++]))<<3,Yt<128)||(En|=(127&(Yt=Cn[Ut.pos++]))<<10,Yt<128)||(En|=(127&(Yt=Cn[Ut.pos++]))<<17,Yt<128)||(En|=(127&(Yt=Cn[Ut.pos++]))<<24,Yt<128)||(En|=(1&(Yt=Cn[Ut.pos++]))<<31,Yt<128))return m(Kt,En,Zt);throw new Error("Expected varint not more than 10 bytes")}(Fe|=(15&(Ye=ct[this.pos]))<<28,ve,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ve=this.readVarint();return ve%2==1?(ve+1)/-2:ve/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ve=this.readVarint()+this.pos,Fe=this.pos;return this.pos=ve,ve-Fe>=12&&h?function(Ye,ct,Kt){return h.decode(Ye.subarray(ct,Kt))}(this.buf,Fe,ve):function(Ye,ct,Kt){for(var Zt="",Ut=ct;Ut<Kt;){var En,Yt,Cn,Vn=Ye[Ut],zn=null,Zn=Vn>239?4:Vn>223?3:Vn>191?2:1;if(Ut+Zn>Kt)break;Zn===1?Vn<128&&(zn=Vn):Zn===2?(192&(En=Ye[Ut+1]))==128&&(zn=(31&Vn)<<6|63&En)<=127&&(zn=null):Zn===3?(Yt=Ye[Ut+2],(192&(En=Ye[Ut+1]))==128&&(192&Yt)==128&&((zn=(15&Vn)<<12|(63&En)<<6|63&Yt)<=2047||zn>=55296&&zn<=57343)&&(zn=null)):Zn===4&&(Yt=Ye[Ut+2],Cn=Ye[Ut+3],(192&(En=Ye[Ut+1]))==128&&(192&Yt)==128&&(192&Cn)==128&&((zn=(15&Vn)<<18|(63&En)<<12|(63&Yt)<<6|63&Cn)<=65535||zn>=1114112)&&(zn=null)),zn===null?(zn=65533,Zn=1):zn>65535&&(zn-=65536,Zt+=String.fromCharCode(zn>>>10&1023|55296),zn=56320|1023&zn),Zt+=String.fromCharCode(zn),Ut+=Zn}return Zt}(this.buf,Fe,ve)},readBytes:function(){var ve=this.readVarint()+this.pos,Fe=this.buf.subarray(this.pos,ve);return this.pos=ve,Fe},readPackedVarint:function(ve,Fe){if(this.type!==e.Bytes)return ve.push(this.readVarint(Fe));var Ye=l(this);for(ve=ve||[];this.pos<Ye;)ve.push(this.readVarint(Fe));return ve},readPackedSVarint:function(ve){if(this.type!==e.Bytes)return ve.push(this.readSVarint());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readSVarint());return ve},readPackedBoolean:function(ve){if(this.type!==e.Bytes)return ve.push(this.readBoolean());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readBoolean());return ve},readPackedFloat:function(ve){if(this.type!==e.Bytes)return ve.push(this.readFloat());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readFloat());return ve},readPackedDouble:function(ve){if(this.type!==e.Bytes)return ve.push(this.readDouble());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readDouble());return ve},readPackedFixed32:function(ve){if(this.type!==e.Bytes)return ve.push(this.readFixed32());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readFixed32());return ve},readPackedSFixed32:function(ve){if(this.type!==e.Bytes)return ve.push(this.readSFixed32());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readSFixed32());return ve},readPackedFixed64:function(ve){if(this.type!==e.Bytes)return ve.push(this.readFixed64());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readFixed64());return ve},readPackedSFixed64:function(ve){if(this.type!==e.Bytes)return ve.push(this.readSFixed64());var Fe=l(this);for(ve=ve||[];this.pos<Fe;)ve.push(this.readSFixed64());return ve},skip:function(ve){var Fe=7&ve;if(Fe===e.Varint)for(;this.buf[this.pos++]>127;);else if(Fe===e.Bytes)this.pos=this.readVarint()+this.pos;else if(Fe===e.Fixed32)this.pos+=4;else{if(Fe!==e.Fixed64)throw new Error("Unimplemented type: "+Fe);this.pos+=8}},writeTag:function(ve,Fe){this.writeVarint(ve<<3|Fe)},realloc:function(ve){for(var Fe=this.length||16;Fe<this.pos+ve;)Fe*=2;if(Fe!==this.length){var Ye=new Uint8Array(Fe);Ye.set(this.buf),this.buf=Ye,this.length=Fe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ve){this.realloc(4),Ae(this.buf,ve,this.pos),this.pos+=4},writeSFixed32:function(ve){this.realloc(4),Ae(this.buf,ve,this.pos),this.pos+=4},writeFixed64:function(ve){this.realloc(8),Ae(this.buf,-1&ve,this.pos),Ae(this.buf,Math.floor(ve*s),this.pos+4),this.pos+=8},writeSFixed64:function(ve){this.realloc(8),Ae(this.buf,-1&ve,this.pos),Ae(this.buf,Math.floor(ve*s),this.pos+4),this.pos+=8},writeVarint:function(ve){(ve=+ve||0)>268435455||ve<0?function(Fe,Ye){var ct,Kt;if(Fe>=0?(ct=Fe%4294967296|0,Kt=Fe/4294967296|0):(Kt=~(-Fe/4294967296),4294967295^(ct=~(-Fe%4294967296))?ct=ct+1|0:(ct=0,Kt=Kt+1|0)),Fe>=18446744073709552e3||Fe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ye.realloc(10),function(Zt,Ut,En){En.buf[En.pos++]=127&Zt|128,Zt>>>=7,En.buf[En.pos++]=127&Zt|128,Zt>>>=7,En.buf[En.pos++]=127&Zt|128,Zt>>>=7,En.buf[En.pos++]=127&Zt|128,En.buf[En.pos]=127&(Zt>>>=7)}(ct,0,Ye),function(Zt,Ut){var En=(7&Zt)<<4;Ut.buf[Ut.pos++]|=En|((Zt>>>=3)?128:0),Zt&&(Ut.buf[Ut.pos++]=127&Zt|((Zt>>>=7)?128:0),Zt&&(Ut.buf[Ut.pos++]=127&Zt|((Zt>>>=7)?128:0),Zt&&(Ut.buf[Ut.pos++]=127&Zt|((Zt>>>=7)?128:0),Zt&&(Ut.buf[Ut.pos++]=127&Zt|((Zt>>>=7)?128:0),Zt&&(Ut.buf[Ut.pos++]=127&Zt)))))}(Kt,Ye)}(ve,this):(this.realloc(4),this.buf[this.pos++]=127&ve|(ve>127?128:0),ve<=127||(this.buf[this.pos++]=127&(ve>>>=7)|(ve>127?128:0),ve<=127||(this.buf[this.pos++]=127&(ve>>>=7)|(ve>127?128:0),ve<=127||(this.buf[this.pos++]=ve>>>7&127))))},writeSVarint:function(ve){this.writeVarint(ve<0?2*-ve-1:2*ve)},writeBoolean:function(ve){this.writeVarint(!!ve)},writeString:function(ve){ve=String(ve),this.realloc(4*ve.length),this.pos++;var Fe=this.pos;this.pos=function(ct,Kt,Zt){for(var Ut,En,Yt=0;Yt<Kt.length;Yt++){if((Ut=Kt.charCodeAt(Yt))>55295&&Ut<57344){if(!En){Ut>56319||Yt+1===Kt.length?(ct[Zt++]=239,ct[Zt++]=191,ct[Zt++]=189):En=Ut;continue}if(Ut<56320){ct[Zt++]=239,ct[Zt++]=191,ct[Zt++]=189,En=Ut;continue}Ut=En-55296<<10|Ut-56320|65536,En=null}else En&&(ct[Zt++]=239,ct[Zt++]=191,ct[Zt++]=189,En=null);Ut<128?ct[Zt++]=Ut:(Ut<2048?ct[Zt++]=Ut>>6|192:(Ut<65536?ct[Zt++]=Ut>>12|224:(ct[Zt++]=Ut>>18|240,ct[Zt++]=Ut>>12&63|128),ct[Zt++]=Ut>>6&63|128),ct[Zt++]=63&Ut|128)}return Zt}(this.buf,ve,this.pos);var Ye=this.pos-Fe;Ye>=128&&S(Fe,Ye,this),this.pos=Fe-1,this.writeVarint(Ye),this.pos+=Ye},writeFloat:function(ve){this.realloc(4),a.write(this.buf,ve,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ve){this.realloc(8),a.write(this.buf,ve,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ve){var Fe=ve.length;this.writeVarint(Fe),this.realloc(Fe);for(var Ye=0;Ye<Fe;Ye++)this.buf[this.pos++]=ve[Ye]},writeRawMessage:function(ve,Fe){this.pos++;var Ye=this.pos;ve(Fe,this);var ct=this.pos-Ye;ct>=128&&S(Ye,ct,this),this.pos=Ye-1,this.writeVarint(ct),this.pos+=ct},writeMessage:function(ve,Fe,Ye){this.writeTag(ve,e.Bytes),this.writeRawMessage(Fe,Ye)},writePackedVarint:function(ve,Fe){Fe.length&&this.writeMessage(ve,O,Fe)},writePackedSVarint:function(ve,Fe){Fe.length&&this.writeMessage(ve,z,Fe)},writePackedBoolean:function(ve,Fe){Fe.length&&this.writeMessage(ve,N,Fe)},writePackedFloat:function(ve,Fe){Fe.length&&this.writeMessage(ve,w,Fe)},writePackedDouble:function(ve,Fe){Fe.length&&this.writeMessage(ve,R,Fe)},writePackedFixed32:function(ve,Fe){Fe.length&&this.writeMessage(ve,P,Fe)},writePackedSFixed32:function(ve,Fe){Fe.length&&this.writeMessage(ve,D,Fe)},writePackedFixed64:function(ve,Fe){Fe.length&&this.writeMessage(ve,G,Fe)},writePackedSFixed64:function(ve,Fe){Fe.length&&this.writeMessage(ve,oe,Fe)},writeBytesField:function(ve,Fe){this.writeTag(ve,e.Bytes),this.writeBytes(Fe)},writeFixed32Field:function(ve,Fe){this.writeTag(ve,e.Fixed32),this.writeFixed32(Fe)},writeSFixed32Field:function(ve,Fe){this.writeTag(ve,e.Fixed32),this.writeSFixed32(Fe)},writeFixed64Field:function(ve,Fe){this.writeTag(ve,e.Fixed64),this.writeFixed64(Fe)},writeSFixed64Field:function(ve,Fe){this.writeTag(ve,e.Fixed64),this.writeSFixed64(Fe)},writeVarintField:function(ve,Fe){this.writeTag(ve,e.Varint),this.writeVarint(Fe)},writeSVarintField:function(ve,Fe){this.writeTag(ve,e.Varint),this.writeSVarint(Fe)},writeStringField:function(ve,Fe){this.writeTag(ve,e.Bytes),this.writeString(Fe)},writeFloatField:function(ve,Fe){this.writeTag(ve,e.Fixed32),this.writeFloat(Fe)},writeDoubleField:function(ve,Fe){this.writeTag(ve,e.Fixed64),this.writeDouble(Fe)},writeBooleanField:function(ve,Fe){this.writeVarintField(ve,!!Fe)}},t_}var n_=j(Yv());const W_=3;function Zg(a,e,r){e.glyphs=[],a===1&&r.readMessage(Wg,e)}function Wg(a,e,r){if(a===3){const{id:s,bitmap:h,width:l,height:m,left:S,top:O,advance:z}=r.readMessage(r_,{});e.glyphs.push({id:s,bitmap:new Th({width:l+2*W_,height:m+2*W_},h),metrics:{width:l,height:m,left:S,top:O,advance:z}})}else a===4?e.ascender=r.readSVarint():a===5&&(e.descender=r.readSVarint())}function r_(a,e,r){a===1?e.id=r.readVarint():a===2?e.bitmap=r.readBytes():a===3?e.width=r.readVarint():a===4?e.height=r.readVarint():a===5?e.left=r.readSVarint():a===6?e.top=r.readSVarint():a===7&&(e.advance=r.readVarint())}const d0=W_,Ch={horizontal:1,vertical:2,horizontalOnly:3};class H_{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(e,r){const s=new H_;return s.scale=e||1,s.fontStack=r,s}static forImage(e){const r=new H_;return r.image=e,r}}class i_{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const s=new i_;for(let h=0;h<e.sections.length;h++){const l=e.sections[h];l.image?s.addImageSection(l):s.addTextSection(l,r)}return s}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(r,s){let h="";for(let l=0;l<r.length;l++){const m=r.charCodeAt(l+1)||null,S=r.charCodeAt(l-1)||null;h+=!s&&(m&&id(m)&&!$g[r[l+1]]||S&&id(S)&&!$g[r[l-1]])||!$g[r[l]]?r[l]:$g[r[l]]}return h}(this.text,e)}trim(){let e=0;for(let s=0;s<this.text.length&&o_[this.text.charCodeAt(s)];s++)e++;let r=this.text.length;for(let s=this.text.length-1;s>=0&&s>=e&&o_[this.text.charCodeAt(s)];s--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const s=new i_;return s.text=this.text.substring(e,r),s.sectionIndex=this.sectionIndex.slice(e,r),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(H_.forText(e.scale,e.fontStack||r));const s=this.sections.length-1;for(let h=0;h<e.text.length;++h)this.sectionIndex.push(s)}addImageSection(e){const r=e.image&&e.image.namePrimary?e.image.getPrimary():null;if(!r)return void cn("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCodePoint(s),this.sections.push(H_.forImage(r)),this.sectionIndex.push(this.sections.length-1)):cn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xv(a,e,r,s,h,l,m,S,O,z,w,R,N,P,D){const G=i_.fromFeature(a,h);R===Ch.vertical&&G.verticalizePunctuation(N);let oe=[];const ce=function(Ye,ct,Kt,Zt,Ut,En){if(!Ye)return[];const Yt=[],Cn=function(qn,hr,Kn,Zr,si,Wr){let zi=0;for(let yi=0;yi<qn.length();yi++){const vi=qn.getSection(yi);zi+=K_(qn.getCodePoint(yi),vi,Zr,si,hr,Wr)}return zi/Math.max(1,Math.ceil(zi/Kn))}(Ye,ct,Kt,Zt,Ut,En),Vn=Ye.text.indexOf("\u200B")>=0;let zn=0;for(let qn=0;qn<Ye.length();qn++){const hr=Ye.getSection(qn),Kn=Ye.getCodePoint(qn);if(o_[Kn]||(zn+=K_(Kn,hr,Zt,Ut,ct,En)),qn<Ye.length()-1){const Zr=!((Zn=Kn)<11904||!(Pi["Bopomofo Extended"](Zn)||Pi.Bopomofo(Zn)||Pi["CJK Compatibility Forms"](Zn)||Pi["CJK Compatibility Ideographs"](Zn)||Pi["CJK Compatibility"](Zn)||Pi["CJK Radicals Supplement"](Zn)||Pi["CJK Strokes"](Zn)||Pi["CJK Symbols and Punctuation"](Zn)||Pi["CJK Unified Ideographs Extension A"](Zn)||Pi["CJK Unified Ideographs"](Zn)||Pi["Enclosed CJK Letters and Months"](Zn)||Pi["Halfwidth and Fullwidth Forms"](Zn)||Pi.Hiragana(Zn)||Pi["Ideographic Description Characters"](Zn)||Pi["Kangxi Radicals"](Zn)||Pi["Katakana Phonetic Extensions"](Zn)||Pi.Katakana(Zn)||Pi["Vertical Forms"](Zn)||Pi["Yi Radicals"](Zn)||Pi["Yi Syllables"](Zn)));(H1[Kn]||Zr||hr.image)&&Yt.push(Y_(qn+1,zn,Cn,Yt,h0(Kn,Ye.getCodePoint(qn+1),Zr&&Vn),!1))}}var Zn;return Qv(Y_(Ye.length(),zn,Cn,Yt,0,!0))}(G,z,l,e,s,P),{processBidirectionalText:Ae,processStyledBidirectionalText:Oe}=uc;if(Ae&&G.sections.length===1){const Ye=Ae(G.toString(),ce);for(const ct of Ye){const Kt=new i_;Kt.text=ct,Kt.sections=G.sections;for(let Zt=0;Zt<ct.length;Zt++)Kt.sectionIndex.push(0);oe.push(Kt)}}else if(Oe){const Ye=Oe(G.text,G.sectionIndex,ce);for(const ct of Ye){const Kt=new i_;Kt.text=ct[0],Kt.sectionIndex=ct[1],Kt.sections=G.sections,oe.push(Kt)}}else oe=function(Ye,ct){const Kt=[],Zt=Ye.text;let Ut=0;for(const En of ct)Kt.push(Ye.substring(Ut,En)),Ut=En;return Ut<Zt.length&&Kt.push(Ye.substring(Ut,Zt.length)),Kt}(G,ce);const ve=[],Fe={positionedLines:ve,text:G.toString(),top:w[1],bottom:w[1],left:w[0],right:w[0],writingMode:R,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn,zn,Zn,qn){let hr=0,Kn=0,Zr=0;const si=Cn==="right"?1:Cn==="left"?0:.5;let Wr=!1;for(const ji of Ut){const Yi=ji.getSections();for(const Yo of Yi){if(Yo.image)continue;const ga=ct[Yo.fontStack];if(ga&&(Wr=ga.ascender!==void 0&&ga.descender!==void 0,!Wr))break}if(!Wr)break}let zi=0;for(const ji of Ut){ji.trim();const Yi=ji.getMaxScale(),Yo=(Yi-1)*cd,ga={positionedGlyphs:[],lineOffset:0};Ye.positionedLines[zi]=ga;const Ea=ga.positionedGlyphs;let pa=0;if(!ji.length()){Kn+=En,++zi;continue}let Oa=0,ka=0;for(let Gs=0;Gs<ji.length();Gs++){const sa=ji.getSection(Gs),Ds=ji.getSectionIndex(Gs),Ns=ji.getCodePoint(Gs);let Tl=sa.scale,Au=null,vu=null,Du=null,Xl=cd,ku=0;const ac=!(Vn===Ch.horizontal||!Zn&&!Bc(Ns)||Zn&&(o_[Ns]||(yi=Ns,Pi.Arabic(yi)||Pi["Arabic Supplement"](yi)||Pi["Arabic Extended-A"](yi)||Pi["Arabic Presentation Forms-A"](yi)||Pi["Arabic Presentation Forms-B"](yi))));if(sa.image){const $c=Zt[sa.image.serialize()];if(!$c)continue;Du=sa.image.id,Ye.iconsInText=Ye.iconsInText||!0,vu=$c.paddedRect;const Il=$c.displaySize;Tl=Tl*cd/qn,Au={width:Il[0],height:Il[1],left:0,top:-d0,advance:ac?Il[1]:Il[0],localGlyph:!1},ku=Wr?-Au.height*Tl:Yi*cd-17-Il[1]*Tl,Xl=Au.advance;const Qd=(ac?Il[0]:Il[1])*Tl-cd*Yi;Qd>0&&Qd>pa&&(pa=Qd)}else{const $c=Kt[sa.fontStack];if(!$c)continue;$c[Ns]&&(vu=$c[Ns]);const Il=ct[sa.fontStack];if(!Il)continue;const Qd=Il.glyphs[Ns];if(!Qd)continue;if(Au=Qd.metrics,Xl=Ns!==8203?cd:0,Wr){const Of=Il.ascender!==void 0?Math.abs(Il.ascender):0,Bh=Il.descender!==void 0?Math.abs(Il.descender):0,tf=(Of+Bh)*Tl;Oa<tf&&(Oa=tf,ka=(Of-Bh)/2*Tl),ku=-Of*Tl}else ku=(Yi-Tl)*cd-17}ac?(Ye.verticalizable=!0,Ea.push({glyph:Ns,imageName:Du,x:hr,y:Kn+ku,vertical:ac,scale:Tl,localGlyph:Au.localGlyph,fontStack:sa.fontStack,sectionIndex:Ds,metrics:Au,rect:vu}),hr+=Xl*Tl+zn):(Ea.push({glyph:Ns,imageName:Du,x:hr,y:Kn+ku,vertical:ac,scale:Tl,localGlyph:Au.localGlyph,fontStack:sa.fontStack,sectionIndex:Ds,metrics:Au,rect:vu}),hr+=Au.advance*Tl+zn)}Ea.length!==0&&(Zr=Math.max(hr-zn,Zr),Wr?qv(Ea,si,pa,ka,En*Yi/2):qv(Ea,si,pa,0,En/2)),hr=0;const el=En*Yi+pa;ga.lineOffset=Math.max(pa,Yo),Kn+=el,++zi}var yi;const vi=Kn,{horizontalAlign:li,verticalAlign:lo}=Hg(Yt);(function(ji,Yi,Yo,ga,Ea,pa){const Oa=(Yi-Yo)*Ea,ka=-pa*ga;for(const el of ji)for(const Gs of el.positionedGlyphs)Gs.x+=Oa,Gs.y+=ka})(Ye.positionedLines,si,li,lo,Zr,vi),Ye.top+=-lo*vi,Ye.bottom=Ye.top+vi,Ye.left+=-li*Zr,Ye.right=Ye.left+Zr,Ye.hasBaseline=Wr}(Fe,e,r,s,oe,m,S,O,R,z,N,D),!function(Ye){for(const ct of Ye)if(ct.positionedGlyphs.length!==0)return!1;return!0}(ve)&&Fe}const o_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},H1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function K_(a,e,r,s,h,l){if(e.image){const m=s[e.image.serialize()];return m?m.displaySize[0]*e.scale*cd/l+h:0}{const m=r[e.fontStack],S=m&&m.glyphs[a];return S?S.metrics.advance*e.scale+h:0}}function Jv(a,e,r,s){const h=Math.pow(a-e,2);return s?a<e?h/2:2*h:h+Math.abs(r)*r}function h0(a,e,r){let s=0;return a===10&&(s-=1e4),r&&(s+=150),a!==40&&a!==65288||(s+=50),e!==41&&e!==65289||(s+=50),s}function Y_(a,e,r,s,h,l){let m=null,S=Jv(e,r,h,l);for(const O of s){const z=Jv(e-O.x,r,h,l)+O.badness;z<=S&&(m=O,S=z)}return{index:a,x:e,priorBreak:m,badness:S}}function Qv(a){return a?Qv(a.priorBreak).concat(a.index):[]}function Hg(a){let e=.5,r=.5;switch(a){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function qv(a,e,r,s,h){if(!(e||r||s||h))return;const l=a.length-1,m=a[l],S=(m.x+m.metrics.advance*m.scale)*e;for(let O=0;O<=l;O++)a[O].x-=S,a[O].y+=r+s+h}function K1(a,e,r,s){const{horizontalAlign:h,verticalAlign:l}=Hg(s),m=r[0]-a.displaySize[0]*h,S=r[1]-a.displaySize[1]*l;return{imagePrimary:a,imageSecondary:e,top:S,bottom:S+a.displaySize[1],left:m,right:m+a.displaySize[0]}}function ey(a,e,r,s,h,l){const m=a.imagePrimary;let S;if(m.content){const oe=m.content,ce=m.pixelRatio||1;S=[oe[0]/ce,oe[1]/ce,m.displaySize[0]-oe[2]/ce,m.displaySize[1]-oe[3]/ce]}const O=e.left*l,z=e.right*l;let w,R,N,P;r==="width"||r==="both"?(P=h[0]+O-s[3],R=h[0]+z+s[1]):(P=h[0]+(O+z-m.displaySize[0])/2,R=P+m.displaySize[0]);const D=e.top*l,G=e.bottom*l;return r==="height"||r==="both"?(w=h[1]+D-s[0],N=h[1]+G+s[2]):(w=h[1]+(D+G-m.displaySize[1])/2,N=w+m.displaySize[1]),{imagePrimary:m,imageSecondary:void 0,top:w,right:R,bottom:N,left:P,collisionPadding:S}}class jp extends Mt{constructor(e,r,s,h,l){super(e,r),this.angle=h,this.z=s,l!==void 0&&(this.segment=l)}clone(){return new jp(this.x,this.y,this.z,this.angle,this.segment)}}function ty(a,e,r,s,h){if(e.segment===void 0)return!0;let l=e,m=e.segment+1,S=0;for(;S>-r/2;){if(m--,m<0)return!1;S-=a[m].dist(l),l=a[m]}S+=a[m].dist(a[m+1]),m++;const O=[];let z=0;for(;S<r/2;){const w=a[m],R=a[m+1];if(!R)return!1;let N=a[m-1].angleTo(w)-w.angleTo(R);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:S,angleDelta:N}),z+=N;S-O[0].distance>s;)z-=O.shift().angleDelta;if(z>h)return!1;m++,S+=w.dist(R)}return!0}function ny(a){let e=0;for(let r=0;r<a.length-1;r++)e+=a[r].dist(a[r+1]);return e}function f0(a,e,r){return a?.6*e*r:0}function Y1(a,e){return Math.max(a?a.right-a.left:0,e?e.right-e.left:0)}function Yx(a,e,r,s,h,l){const m=f0(r,h,l),S=Y1(r,s)*l;let O=0;const z=ny(a)/2;for(let w=0;w<a.length-1;w++){const R=a[w],N=a[w+1],P=R.dist(N);if(O+P>z){const D=(z-O)/P,G=$i(R.x,N.x,D),oe=$i(R.y,N.y,D),ce=new jp(G,oe,0,N.angleTo(R),w);return!m||ty(a,ce,S,m,e)?ce:void 0}O+=P}}function ry(a,e,r,s,h,l,m,S,O){const z=f0(s,l,m),w=Y1(s,h),R=w*m,N=a[0].x===0||a[0].x===O||a[0].y===0||a[0].y===O;return e-R<e/4&&(e=R+e/4),Kg(a,N?e/2*S%e:(w/2+2*l)*m*S%e,e,z,r,R,N,!1,O)}function Kg(a,e,r,s,h,l,m,S,O){const z=l/2,w=ny(a);let R=0,N=e-r,P=[];for(let D=0;D<a.length-1;D++){const G=a[D],oe=a[D+1],ce=G.dist(oe),Ae=oe.angleTo(G);for(;N+r<R+ce;){N+=r;const Oe=(N-R)/ce,ve=$i(G.x,oe.x,Oe),Fe=$i(G.y,oe.y,Oe);if(ve>=0&&ve<O&&Fe>=0&&Fe<O&&N-z>=0&&N+z<=w){const Ye=new jp(ve,Fe,0,Ae,D);s&&!ty(a,Ye,l,s,h)||P.push(Ye)}}R+=ce}return S||P.length||m||(P=Kg(a,R/2,r,s,h,l,m,!0,O)),P}function iy(a,e,r,s,h){const l=[];for(let m=0;m<a.length;m++){const S=a[m];let O;for(let z=0;z<S.length-1;z++){let w=S[z],R=S[z+1];w.x<e&&R.x<e||(w.x<e?w=new Mt(e,w.y+(e-w.x)/(R.x-w.x)*(R.y-w.y))._round():R.x<e&&(R=new Mt(e,w.y+(e-w.x)/(R.x-w.x)*(R.y-w.y))._round()),w.y<r&&R.y<r||(w.y<r?w=new Mt(w.x+(r-w.y)/(R.y-w.y)*(R.x-w.x),r)._round():R.y<r&&(R=new Mt(w.x+(r-w.y)/(R.y-w.y)*(R.x-w.x),r)._round()),w.x>=s&&R.x>=s||(w.x>=s?w=new Mt(s,w.y+(s-w.x)/(R.x-w.x)*(R.y-w.y))._round():R.x>=s&&(R=new Mt(s,w.y+(s-w.x)/(R.x-w.x)*(R.y-w.y))._round()),w.y>=h&&R.y>=h||(w.y>=h?w=new Mt(w.x+(h-w.y)/(R.y-w.y)*(R.x-w.x),h)._round():R.y>=h&&(R=new Mt(w.x+(h-w.y)/(R.y-w.y)*(R.x-w.x),h)._round()),O&&w.equals(O[O.length-1])||(O=[w],l.push(O)),O.push(R)))))}}return l}function oy(a){let e=0,r=0;for(const m of a)e+=m.w*m.h,r=Math.max(r,m.w);a.sort((m,S)=>S.h-m.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let h=0,l=0;for(const m of a)for(let S=s.length-1;S>=0;S--){const O=s[S];if(!(m.w>O.w||m.h>O.h)){if(m.x=O.x,m.y=O.y,l=Math.max(l,m.y+m.h),h=Math.max(h,m.x+m.w),m.w===O.w&&m.h===O.h){const z=s.pop();S<s.length&&(s[S]=z)}else m.h===O.h?(O.x+=m.w,O.w-=m.w):m.w===O.w?(O.y+=m.h,O.h-=m.h):(s.push({x:O.x+m.w,y:O.y,w:O.w-m.w,h:m.h}),O.y+=m.h,O.h-=m.h);break}}return{w:h,h:l,fill:e/(h*l)||0}}Fi(jp,"Anchor");const ym=1;class xm{static getImagePositionScale(e,r,s){return r&&e&&e.options&&e.options.transform?{x:e.options.transform.a,y:e.options.transform.d}:{x:s,y:s}}constructor(e,{pixelRatio:r,version:s,stretchX:h,stretchY:l,content:m,sdf:S,usvg:O},z,w){this.paddedRect=e,this.pixelRatio=r,this.stretchX=h,this.stretchY=l,this.content=m,this.version=s,this.padding=z,this.sdf=S,this.scale=xm.getImagePositionScale(w,O,r)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}class Up{constructor(e,r,s){const h={},l={};this.haveRenderCallbacks=[];const m=[];this.addImages(e,h,ym,m),this.addImages(r,l,2,m);const{w:S,h:O}=oy(m),z=new fc({width:S||1,height:O||1});for(const w in e){const R=e[w],N=h[w].paddedRect;fc.copy(R.data,z,{x:0,y:0},{x:N.x+ym,y:N.y+ym},R.data,s,R.sdf)}for(const w in r){const R=r[w],N=l[w].paddedRect;let P=l[w].padding;const D=N.x+P,G=N.y+P,oe=R.data.width,ce=R.data.height;P=P>1?P-1:P,fc.copy(R.data,z,{x:0,y:0},{x:D,y:G},R.data,s),fc.copy(R.data,z,{x:0,y:ce-P},{x:D,y:G-P},{width:oe,height:P},s),fc.copy(R.data,z,{x:0,y:0},{x:D,y:G+ce},{width:oe,height:P},s),fc.copy(R.data,z,{x:oe-P,y:0},{x:D-P,y:G},{width:P,height:ce},s),fc.copy(R.data,z,{x:0,y:0},{x:D+oe,y:G},{width:P,height:ce},s),fc.copy(R.data,z,{x:oe-P,y:ce-P},{x:D-P,y:G-P},{width:P,height:P},s),fc.copy(R.data,z,{x:0,y:ce-P},{x:D+oe,y:G-P},{width:P,height:P},s),fc.copy(R.data,z,{x:0,y:0},{x:D+oe,y:G+ce},{width:P,height:P},s),fc.copy(R.data,z,{x:oe-P,y:0},{x:D-P,y:G+ce},{width:P,height:P},s)}this.lut=s,this.image=z,this.iconPositions=h,this.patternPositions=l}addImages(e,r,s,h){for(const l in e){const m=e[l],S={x:0,y:0,w:m.data.width+2*s,h:m.data.height+2*s};h.push(S);const O=bs.deserializeFromString(l);r[l]=new xm(S,m,s,O),m.hasRenderCallback&&this.haveRenderCallbacks.push(O.id)}}patchUpdatedImages(e,r,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>e.hasImage(h,s)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,s);for(const h in e.getUpdatedImages(s)){for(const l of Object.keys(this.iconPositions))bs.deserializeId(l)===h&&this.patchUpdatedImage(this.iconPositions[l],e.getImage(h,s),r);for(const l of Object.keys(this.patternPositions))bs.deserializeId(l)===h&&this.patchUpdatedImage(this.patternPositions[l],e.getImage(h,s),r)}}patchUpdatedImage(e,r,s){if(!e||!r||e.version===r.version)return;e.version=r.version;const[h,l]=e.tl,m=e.sdf;if(this.lut||m){const S={width:r.data.width,height:r.data.height},O=new fc(S);fc.copy(r.data,O,{x:0,y:0},{x:0,y:0},S,this.lut,m),s.update(O,{position:{x:h,y:l}})}else s.update(r.data,{position:{x:h,y:l}})}}Fi(xm,"ImagePosition"),Fi(Up,"ImageAtlas");const X_=1e20;function p0(a,e,r,s,h,l,m,S,O){for(let z=e;z<e+s;z++)ay(a,r*l+z,l,h,m,S,O);for(let z=r;z<r+h;z++)ay(a,z*l+e,1,s,m,S,O)}function ay(a,e,r,s,h,l,m){l[0]=0,m[0]=-X_,m[1]=X_,h[0]=a[e];for(let S=1,O=0,z=0;S<s;S++){h[S]=a[e+S*r];const w=S*S;do{const R=l[O];z=(h[S]-h[R]+w-R*R)/(S-R)/2}while(z<=m[O]&&--O>-1);O++,l[O]=S,m[O]=z,m[O+1]=X_}for(let S=0,O=0;S<s;S++){for(;m[O+1]<S;)O++;const z=l[O],w=S-z;a[e+S*r]=h[z]+w*w}}const Tf=2,m0={none:0,ideographs:1,all:2};class If{constructor(e,r,s){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=s,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,r){this.urls[r]=e}getGlyphs(e,r,s){const h=[],l=this.urls[r]||Jn.GLYPHS_URL;for(const m in e)for(const S of e[m])h.push({stack:m,id:S});Sn(h,({stack:m,id:S},O)=>{let z=this.entries[m];z||(z=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=z.glyphs[S];if(w!==void 0)return void O(null,{stack:m,id:S,glyph:w});if(w=this._tinySDF(z,m,S),w)return z.glyphs[S]=w,void O(null,{stack:m,id:S,glyph:w});const R=Math.floor(S/256);if(256*R>65535)return cn("glyphs > 65535 not supported"),void O(null,{stack:m,id:S,glyph:w});if(z.ranges[R])return void O(null,{stack:m,id:S,glyph:w});let N=z.requests[R];N||(N=z.requests[R]=[],If.loadGlyphRange(m,R,l,this.requestManager,(P,D)=>{if(D){z.ascender=D.ascender,z.descender=D.descender;for(const G in D.glyphs)this._doesCharSupportLocalGlyph(+G)||(z.glyphs[+G]=D.glyphs[+G]);z.ranges[R]=!0}for(const G of N)G(P,D);delete z.requests[R]})),N.push((P,D)=>{P?O(P):D&&O(null,{stack:m,id:S,glyph:D.glyphs[S]||null})})},(m,S)=>{if(m)s(m);else if(S){const O={};for(const{stack:z,id:w,glyph:R}of S)O[z]===void 0&&(O[z]={}),O[z].glyphs===void 0&&(O[z].glyphs={}),O[z].glyphs[w]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics},O[z].ascender=this.entries[z].ascender,O[z].descender=this.entries[z].descender;s(null,O)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==m0.none&&(this.localGlyphMode===m0.all?!!this.localFontFamily:!!this.localFontFamily&&(Pi["CJK Unified Ideographs"](e)||Pi["Hangul Syllables"](e)||Pi.Hiragana(e)||Pi.Katakana(e)||Pi["CJK Symbols and Punctuation"](e)||Pi["CJK Unified Ideographs Extension A"](e)||Pi["CJK Unified Ideographs Extension B"](e)||Pi.Osage(e)))}_tinySDF(e,r,s){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(s))return;let l=e.tinySDF;if(!l){let G="400";/bold/i.test(r)?G="900":/medium/i.test(r)?G="500":/light/i.test(r)&&(G="200"),l=e.tinySDF=new If.TinySDF({fontFamily:h,fontWeight:G,fontSize:24*Tf,buffer:3*Tf,radius:8*Tf}),l.fontWeight=G}if(this.localGlyphs[l.fontWeight][s])return this.localGlyphs[l.fontWeight][s];const m=String.fromCodePoint(s),{data:S,width:O,height:z,glyphWidth:w,glyphHeight:R,glyphLeft:N,glyphTop:P,glyphAdvance:D}=l.draw(m);return this.localGlyphs[l.fontWeight][s]={id:s,bitmap:new Th({width:O,height:z},S),metrics:{width:w/Tf,height:R/Tf,left:N/Tf,top:P/Tf-27,advance:D/Tf,localGlyph:!0}}}}If.loadGlyphRange=function(a,e,r,s,h){const l=256*e,m=l+255,S=s.transformRequest(s.normalizeGlyphsURL(r).replace("{fontstack}",a).replace("{range}",`${l}-${m}`),yo.Glyphs);$o(S,(O,z)=>{if(O)h(O);else if(z){const w={},R=function(N){return new n_(N).readFields(Zg,{})}(z);for(const N of R.glyphs)w[N.id]=N;h(null,{glyphs:w,ascender:R.ascender,descender:R.descender})}})},If.TinySDF=class{constructor({fontSize:a=24,buffer:e=3,radius:r=8,cutoff:s=.25,fontFamily:h="sans-serif",fontWeight:l="normal",fontStyle:m="normal"}={}){this.buffer=e,this.cutoff=s,this.radius=r;const S=this.size=a+4*e,O=this._createCanvas(S),z=this.ctx=O.getContext("2d",{willReadFrequently:!0});z.font=`${m} ${l} ${a}px ${h}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(a){const e=document.createElement("canvas");return e.width=e.height=a,e}draw(a){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:s,actualBoundingBoxLeft:h,actualBoundingBoxRight:l}=this.ctx.measureText(a),m=Math.ceil(r),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(l-h))),O=Math.min(this.size-this.buffer,m+Math.ceil(s)),z=S+2*this.buffer,w=O+2*this.buffer,R=Math.max(z*w,0),N=new Uint8ClampedArray(R),P={data:N,width:z,height:w,glyphWidth:S,glyphHeight:O,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(S===0||O===0)return P;const{ctx:D,buffer:G,gridInner:oe,gridOuter:ce}=this;D.clearRect(G,G,S,O),D.fillText(a,G,G+m);const Ae=D.getImageData(G,G,S,O);ce.fill(X_,0,R),oe.fill(0,0,R);for(let Oe=0;Oe<O;Oe++)for(let ve=0;ve<S;ve++){const Fe=Ae.data[4*(Oe*S+ve)+3]/255;if(Fe===0)continue;const Ye=(Oe+G)*z+ve+G;if(Fe===1)ce[Ye]=0,oe[Ye]=X_;else{const ct=.5-Fe;ce[Ye]=ct>0?ct*ct:0,oe[Ye]=ct<0?ct*ct:0}}p0(ce,0,0,z,w,z,this.f,this.v,this.z),p0(oe,G,G,S,O,z,this.f,this.v,this.z);for(let Oe=0;Oe<R;Oe++){const ve=Math.sqrt(ce[Oe])-Math.sqrt(oe[Oe]);N[Oe]=Math.round(255-255*(ve/this.radius+this.cutoff))}return P}};const Mf=ym;function a_(a,e){return a+e[1]-e[0]}function J_(a,e,r,s,h=1){const l=[],m=a.imagePrimary,S=m.pixelRatio,O=m.paddedRect.w-2*Mf,z=m.paddedRect.h-2*Mf,w=(a.right-a.left)*h,R=(a.bottom-a.top)*h,N=m.stretchX||[[0,O]],P=m.stretchY||[[0,z]],D=N.reduce(a_,0),G=P.reduce(a_,0),oe=O-D,ce=z-G;let Ae=0,Oe=D,ve=0,Fe=G,Ye=0,ct=oe,Kt=0,Zt=ce;if(m.content&&s){const En=m.content;Ae=Yg(N,0,En[0]),ve=Yg(P,0,En[1]),Oe=Yg(N,En[0],En[2]),Fe=Yg(P,En[1],En[3]),Ye=En[0]-Ae,Kt=En[1]-ve,ct=En[2]-En[0]-Oe,Zt=En[3]-En[1]-Fe}const Ut=(En,Yt,Cn,Vn)=>{const zn=Q_(En.stretch-Ae,Oe,w,a.left*h),Zn=s_(En.fixed-Ye,ct,En.stretch,D),qn=Q_(Yt.stretch-ve,Fe,R,a.top*h),hr=s_(Yt.fixed-Kt,Zt,Yt.stretch,G),Kn=Q_(Cn.stretch-Ae,Oe,w,a.left*h),Zr=s_(Cn.fixed-Ye,ct,Cn.stretch,D),si=Q_(Vn.stretch-ve,Fe,R,a.top*h),Wr=s_(Vn.fixed-Kt,Zt,Vn.stretch,G),zi=new Mt(zn,qn),yi=new Mt(Kn,qn),vi=new Mt(Kn,si),li=new Mt(zn,si),lo=new Mt(Zn/S,hr/S),ji=new Mt(Zr/S,Wr/S),Yi=e*Math.PI/180;if(Yi){const ka=Math.sin(Yi),el=Math.cos(Yi),Gs=[el,-ka,ka,el];zi._matMult(Gs),yi._matMult(Gs),li._matMult(Gs),vi._matMult(Gs)}const Yo=En.stretch+En.fixed,ga=Cn.stretch+Cn.fixed,Ea=Yt.stretch+Yt.fixed,pa=Vn.stretch+Vn.fixed,Oa=a.imageSecondary;return{tl:zi,tr:yi,bl:li,br:vi,texPrimary:{x:m.paddedRect.x+Mf+Yo,y:m.paddedRect.y+Mf+Ea,w:ga-Yo,h:pa-Ea},texSecondary:Oa?{x:Oa.paddedRect.x+Mf+Yo,y:Oa.paddedRect.y+Mf+Ea,w:ga-Yo,h:pa-Ea}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:lo,pixelOffsetBR:ji,minFontScaleX:ct/S/w,minFontScaleY:Zt/S/R,isSDF:r}};if(s&&(m.stretchX||m.stretchY)){const En=_0(N,oe,D),Yt=_0(P,ce,G);for(let Cn=0;Cn<En.length-1;Cn++){const Vn=En[Cn],zn=En[Cn+1];for(let Zn=0;Zn<Yt.length-1;Zn++)l.push(Ut(Vn,Yt[Zn],zn,Yt[Zn+1]))}}else l.push(Ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:z+1}));return l}function Yg(a,e,r){let s=0;for(const h of a)s+=Math.max(e,Math.min(r,h[1]))-Math.max(e,Math.min(r,h[0]));return s}function _0(a,e,r){const s=[{fixed:-Mf,stretch:0}];for(const[h,l]of a){const m=s[s.length-1];s.push({fixed:h-m.stretch,stretch:m.stretch}),s.push({fixed:h-m.stretch,stretch:m.stretch+(l-h)})}return s.push({fixed:e+Mf,stretch:r}),s}function Q_(a,e,r,s){return a/e*r+s}function s_(a,e,r,s){return a-e*r/s}function sy(a,e,r,s){const h=e+a.positionedLines[s].lineOffset;return s===0?r+h/2:r+(h+(e+a.positionedLines[s-1].lineOffset))/2}function q_(a,e=1,r=!1){let s=1/0,h=1/0,l=-1/0,m=-1/0;const S=a[0];for(let P=0;P<S.length;P++){const D=S[P];(!P||D.x<s)&&(s=D.x),(!P||D.y<h)&&(h=D.y),(!P||D.x>l)&&(l=D.x),(!P||D.y>m)&&(m=D.y)}const O=Math.min(l-s,m-h);let z=O/2;const w=new zt([],Xg);if(O===0)return new Mt(s,h);for(let P=s;P<l;P+=O)for(let D=h;D<m;D+=O)w.push(new gp(P+z,D+z,z,a));let R=function(P){let D=0,G=0,oe=0;const ce=P[0];for(let Ae=0,Oe=ce.length,ve=Oe-1;Ae<Oe;ve=Ae++){const Fe=ce[Ae],Ye=ce[ve],ct=Fe.x*Ye.y-Ye.x*Fe.y;G+=(Fe.x+Ye.x)*ct,oe+=(Fe.y+Ye.y)*ct,D+=3*ct}return new gp(G/D,oe/D,0,P)}(a),N=w.length;for(;w.length;){const P=w.pop();(P.d>R.d||!R.d)&&(R=P,r&&console.log("found best %d after %d probes",Math.round(1e4*P.d)/1e4,N)),P.max-R.d<=e||(z=P.h/2,w.push(new gp(P.p.x-z,P.p.y-z,z,a)),w.push(new gp(P.p.x+z,P.p.y-z,z,a)),w.push(new gp(P.p.x-z,P.p.y+z,z,a)),w.push(new gp(P.p.x+z,P.p.y+z,z,a)),N+=4)}return r&&(console.log(`num probes: ${N}`),console.log(`best distance: ${R.d}`)),R.p}function Xg(a,e){return e.max-a.max}class gp{constructor(e,r,s,h){this.p=new Mt(e,r),this.h=s,this.d=function(l,m){let S=!1,O=1/0;for(let z=0;z<m.length;z++){const w=m[z];for(let R=0,N=w.length,P=N-1;R<N;P=R++){const D=w[R],G=w[P];D.y>l.y!=G.y>l.y&&l.x<(G.x-D.x)*(l.y-D.y)/(G.y-D.y)+D.x&&(S=!S),O=Math.min(O,on(l,D,G))}}return(S?1:-1)*Math.sqrt(O)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const Vp=Number.POSITIVE_INFINITY,ly=Math.sqrt(2);function Jg(a,[e,r]){let s=0,h=0;if(r===Vp){e<0&&(e=0);const l=e/ly;switch(a){case"top-right":case"top-left":h=l-7;break;case"bottom-right":case"bottom-left":h=7-l;break;case"bottom":h=7-e;break;case"top":h=e-7}switch(a){case"top-right":case"bottom-right":s=-l;break;case"top-left":case"bottom-left":s=l;break;case"left":s=e;break;case"right":s=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),a){case"top-right":case"top-left":case"top":h=r-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-r}switch(a){case"top-right":case"bottom-right":case"right":s=-e;break;case"top-left":case"bottom-left":case"left":s=e}}return[s,h]}function bm(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function g0(a,e,r,s,h,l,m,S,O,z,w,R,N,P,D){let G=l.textMaxSize.evaluate(e,{},R);G===void 0?G=m*l.textScaleFactor:G*=l.textScaleFactor;const oe=a.layers[0].layout,ce=oe.get("icon-offset").evaluate(e,{},R),Ae=Af(r.horizontal)||r.vertical,Oe=N.name==="globe",ve=cd,Fe=m*l.textScaleFactor/ve,Ye=a.tilePixelRatio*G/ve,ct=(zn=a.overscaling,a.zoom>18&&zn>2&&(zn>>=1),Math.max(Ft/(512*zn),1)*oe.get("symbol-spacing")),Kt=oe.get("text-padding")*a.tilePixelRatio,Zt=oe.get("icon-padding")*a.tilePixelRatio,Ut=lr(oe.get("text-max-angle")),En=oe.get("text-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",Yt=oe.get("icon-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",Cn=oe.get("symbol-placement"),Vn=ct/2;var zn;const Zn=oe.get("icon-text-fit").evaluate(e,{},R),qn=oe.get("icon-text-fit-padding").evaluate(e,{},R),hr=Zn!=="none";let Kn;a.hasAnyIconTextFit===!1&&hr&&(a.hasAnyIconTextFit=!0),s&&hr&&(a.allowVerticalPlacement&&r.vertical&&(Kn=ey(s,r.vertical,Zn,qn,ce,Fe)),Ae&&(s=ey(s,Ae,Zn,qn,ce,Fe)));const Zr=(si,Wr,zi)=>{if(Wr.x<0||Wr.x>=Ft||Wr.y<0||Wr.y>=Ft)return;let yi=null;if(Oe){const{x:vi,y:li,z:lo}=N.projectTilePoint(Wr.x,Wr.y,zi);yi={anchor:new jp(vi,li,lo,0,void 0),up:N.upVector(zi,Wr.x,Wr.y)}}(function(vi,li,lo,ji,Yi,Yo,ga,Ea,pa,Oa,ka,el,Gs,sa,Ds,Ns,Tl,Au,vu,Du,Xl,ku,ac,$c,Il,Qd,Of){const Bh=vi.addToLineVertexArray(li,ji);let tf,im,om,Om,wg,Lx,_1,Dx=0,g1=0,v1=0,y1=0,Dy=-1,ky=-1;const np={};let x1=ma("");const Rm=lo?lo.anchor:li,Iv=pa.layout.get("icon-text-fit").evaluate(Xl,{},Il)!=="none";let Mv=0,Ny=0;if(pa._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Mv,Ny]=pa.layout.get("text-offset").evaluate(Xl,{},Il).map(jh=>jh*cd):(Mv=pa.layout.get("text-radial-offset").evaluate(Xl,{},Il)*cd,Ny=Vp),vi.allowVerticalPlacement&&Yi.vertical){const jh=Yi.vertical;if(Ds)Lx=Qg(jh),Ea&&(_1=Qg(Ea));else{const qd=pa.layout.get("text-rotate").evaluate(Xl,{},Il)+90;om=Wf(Oa,Rm,li,ka,el,Gs,jh,sa,qd,Ns),Ea&&(Om=Wf(Oa,Rm,li,ka,el,Gs,Ea,Au,qd))}}if(Yo){const jh=vi.iconSizeData,qd=pa.layout.get("icon-rotate").evaluate(Xl,{},Il),Eg=J_(Yo,qd,ac,Iv,ku.iconScaleFactor),Fy=Ea?J_(Ea,qd,ac,Iv,ku.iconScaleFactor):void 0;im=Wf(Oa,Rm,li,ka,el,Gs,Yo,Au,qd,null),Dx=4*Eg.length;let Dm=null;jh.kind==="source"?(Dm=[Zf*pa.layout.get("icon-size").evaluate(Xl,{},Il)*ku.iconScaleFactor],Dm[0]>Id&&cn(`${vi.layerIds[0]}: Value for "icon-size" is >= ${l_}. Reduce your "icon-size".`)):jh.kind==="composite"&&(Dm=[Zf*ku.compositeIconSizes[0].evaluate(Xl,{},Il)*ku.iconScaleFactor,Zf*ku.compositeIconSizes[1].evaluate(Xl,{},Il)*ku.iconScaleFactor],(Dm[0]>Id||Dm[1]>Id)&&cn(`${vi.layerIds[0]}: Value for "icon-size" is >= ${l_}. Reduce your "icon-size".`)),vi.addSymbols(vi.icon,Eg,Dm,Du,vu,Xl,!1,lo,li,Bh.lineStartIndex,Bh.lineLength,-1,$c,Il,Qd,Of),Dy=vi.icon.placedSymbolArray.length-1,Fy&&(g1=4*Fy.length,vi.addSymbols(vi.icon,Fy,Dm,Du,vu,Xl,Ch.vertical,lo,li,Bh.lineStartIndex,Bh.lineLength,-1,$c,Il,Qd,Of),ky=vi.icon.placedSymbolArray.length-1)}for(const jh in Yi.horizontal){const qd=Yi.horizontal[jh];tf||(x1=ma(qd.text),Ds?wg=Qg(qd):tf=Wf(Oa,Rm,li,ka,el,Gs,qd,sa,pa.layout.get("text-rotate").evaluate(Xl,{},Il),Ns));const Eg=qd.positionedLines.length===1;if(v1+=Cf(vi,lo,li,qd,ga,pa,Ds,Xl,Ns,Bh,Yi.vertical?Ch.horizontal:Ch.horizontalOnly,Eg?Object.keys(Yi.horizontal):[jh],np,Dy,ku,$c,Il,Qd),Eg)break}Yi.vertical&&(y1+=Cf(vi,lo,li,Yi.vertical,ga,pa,Ds,Xl,Ns,Bh,Ch.vertical,["vertical"],np,ky,ku,$c,Il,Qd));let Lm=-1;const zy=(jh,qd)=>jh?Math.max(jh,qd):qd;Lm=zy(wg,Lm),Lm=zy(Lx,Lm),Lm=zy(_1,Lm);const kx=Lm>-1?1:0;vi.glyphOffsetArray.length>=65535&&cn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xl.sortKey!==void 0&&vi.addToSortKeyRanges(vi.symbolInstances.length,Xl.sortKey),vi.symbolInstances.emplaceBack(li.x,li.y,Rm.x,Rm.y,Rm.z,np.right>=0?np.right:-1,np.center>=0?np.center:-1,np.left>=0?np.left:-1,np.vertical>=0?np.vertical:-1,Dy,ky,x1,tf!==void 0?tf:vi.collisionBoxArray.length,tf!==void 0?tf+1:vi.collisionBoxArray.length,om!==void 0?om:vi.collisionBoxArray.length,om!==void 0?om+1:vi.collisionBoxArray.length,im!==void 0?im:vi.collisionBoxArray.length,im!==void 0?im+1:vi.collisionBoxArray.length,Om||vi.collisionBoxArray.length,Om?Om+1:vi.collisionBoxArray.length,ka,v1,y1,Dx,g1,kx,0,Mv,Ny,Lm,0,Iv?1:0)})(a,Wr,yi,si,r,s,h,Kn,a.layers[0],a.collisionBoxArray,e.index,e.sourceLayerIndex,a.index,Kt,En,O,0,Zt,Yt,ce,e,l,z,w,R,P,D)};if(Cn==="line")for(const si of iy(e.geometry,0,0,Ft,Ft)){const Wr=ry(si,ct,Ut,r.vertical||Ae,s,ve,Ye,a.overscaling,Ft);for(const zi of Wr)Ae&&X1(a,Ae.text,Vn,zi)||Zr(si,zi,R)}else if(Cn==="line-center"){for(const si of e.geometry)if(si.length>1){const Wr=Yx(si,Ut,r.vertical||Ae,s,ve,Ye);Wr&&Zr(si,Wr,R)}}else if(e.type==="Polygon")for(const si of Xt(e.geometry,0)){const Wr=q_(si,16);Zr(si[0],new jp(Wr.x,Wr.y,0,0,void 0),R)}else if(e.type==="LineString")for(const si of e.geometry)Zr(si,new jp(si[0].x,si[0].y,0,0,void 0),R);else if(e.type==="Point")for(const si of e.geometry)for(const Wr of si)Zr([Wr],new jp(Wr.x,Wr.y,0,0,void 0),R)}const l_=255,Id=l_*Zf;function Cf(a,e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe,ce){const Ae=function(Fe,Ye,ct,Kt,Zt,Ut,En,Yt){const Cn=[];if(Ye.positionedLines.length===0)return Cn;const Vn=Kt.layout.get("text-rotate").evaluate(Ut,{})*Math.PI/180,zn=function(Zr){const si=Zr[0],Wr=Zr[1],zi=si*Wr;return zi>0?[si,-Wr]:zi<0?[-si,Wr]:si===0?[Wr,si]:[Wr,-si]}(ct);let Zn=Math.abs(Ye.top-Ye.bottom);for(const Zr of Ye.positionedLines)Zn-=Zr.lineOffset;const qn=Ye.positionedLines.length,hr=Zn/qn;let Kn=Ye.top-ct[1];for(let Zr=0;Zr<qn;++Zr){const si=Ye.positionedLines[Zr];Kn=sy(Ye,hr,Kn,Zr);for(const Wr of si.positionedGlyphs){if(!Wr.rect)continue;const zi=Wr.rect||{};let yi=d0+1,vi=!0,li=1,lo=0;if(Wr.imageName){const Du=En[cs.build(Wr.imageName).getSerializedPrimary()];if(!Du)continue;if(Du.sdf){cn("SDF images are not supported in formatted text and will be ignored.");continue}vi=!1,li=Du.pixelRatio,yi=ym/li}const ji=(Zt||Yt)&&Wr.vertical,Yi=Wr.metrics.advance*Wr.scale/2,Yo=Wr.metrics,ga=Wr.rect;if(ga===null)continue;Yt&&Ye.verticalizable&&(lo=Wr.imageName?Yi-Wr.metrics.width*Wr.scale/2:0);const Ea=Zt?[Wr.x+Yi,Wr.y]:[0,0];let pa=[0,0],Oa=[0,0],ka=!1;Zt||(ji?(Oa=[Wr.x+Yi+zn[0],Wr.y+zn[1]-lo],ka=!0):pa=[Wr.x+Yi+ct[0],Wr.y+ct[1]-lo]);const el=ga.w*Wr.scale/(li*(Wr.localGlyph?Tf:1)),Gs=ga.h*Wr.scale/(li*(Wr.localGlyph?Tf:1));let sa,Ds,Ns,Tl;if(ji){const Du=Wr.y-Kn,Xl=new Mt(-Yi,Yi-Du),ku=-Math.PI/2,ac=new Mt(...Oa);sa=new Mt(-Yi+pa[0],pa[1]),sa._rotateAround(ku,Xl)._add(ac),sa.x+=-Du+Yi,sa.y-=(Yo.left-yi)*Wr.scale;const $c=Wr.imageName?Yo.advance*Wr.scale:cd*Wr.scale,Il=String.fromCodePoint(Wr.glyph);Kx(Il)?sa.x+=(1-yi)*Wr.scale:u0(Il)?sa.x+=$c-Yo.height*Wr.scale+(-yi-1)*Wr.scale:sa.x+=Wr.imageName||Yo.width+2*yi===ga.w&&Yo.height+2*yi===ga.h?($c-Gs)/2:($c-(Yo.height+2*yi)*Wr.scale)/2,Ds=new Mt(sa.x,sa.y-el),Ns=new Mt(sa.x+Gs,sa.y),Tl=new Mt(sa.x+Gs,sa.y-el)}else{const Du=(Yo.left-yi)*Wr.scale-Yi+pa[0],Xl=(-Yo.top-yi)*Wr.scale+pa[1],ku=Du+el,ac=Xl+Gs;sa=new Mt(Du,Xl),Ds=new Mt(ku,Xl),Ns=new Mt(Du,ac),Tl=new Mt(ku,ac)}if(Vn){let Du;Du=Zt?new Mt(0,0):ka?new Mt(zn[0],zn[1]):new Mt(ct[0],ct[1]),sa._rotateAround(Vn,Du),Ds._rotateAround(Vn,Du),Ns._rotateAround(Vn,Du),Tl._rotateAround(Vn,Du)}const Au=new Mt(0,0),vu=new Mt(0,0);Cn.push({tl:sa,tr:Ds,bl:Ns,br:Tl,texPrimary:zi,texSecondary:void 0,writingMode:Ye.writingMode,glyphOffset:Ea,sectionIndex:Wr.sectionIndex,isSDF:vi,pixelOffsetTL:Au,pixelOffsetBR:vu,minFontScaleX:0,minFontScaleY:0})}}return Cn}(0,s,O,l,m,S,h,a.allowVerticalPlacement),Oe=a.textSizeData;let ve=null;Oe.kind==="source"?(ve=[Zf*l.layout.get("text-size").evaluate(S,{},oe)*D.textScaleFactor],ve[0]>Id&&cn(`${a.layerIds[0]}: Value for "text-size" is >= ${l_}. Reduce your "text-size".`)):Oe.kind==="composite"&&(ve=[Zf*D.compositeTextSizes[0].evaluate(S,{},oe)*D.textScaleFactor,Zf*D.compositeTextSizes[1].evaluate(S,{},oe)*D.textScaleFactor],(ve[0]>Id||ve[1]>Id)&&cn(`${a.layerIds[0]}: Value for "text-size" is >= ${l_}. Reduce your "text-size".`)),a.addSymbols(a.text,Ae,ve,O,m,S,w,e,r,z.lineStartIndex,z.lineLength,P,G,oe,ce,!1);for(const Fe of R)N[Fe]=a.text.placedSymbolArray.length-1;return 4*Ae.length}function Af(a){for(const e in a)return a[e];return null}function Wf(a,e,r,s,h,l,m,S,O,z){let w=m.top,R=m.bottom,N=m.left,P=m.right;const D=m.collisionPadding;if(D&&(N-=D[0],w-=D[1],P+=D[2],R+=D[3]),O){const G=new Mt(N,w),oe=new Mt(P,w),ce=new Mt(N,R),Ae=new Mt(P,R),Oe=lr(O);let ve=new Mt(0,0);z&&(ve=new Mt(z[0],z[1])),G._rotateAround(Oe,ve),oe._rotateAround(Oe,ve),ce._rotateAround(Oe,ve),Ae._rotateAround(Oe,ve),N=Math.min(G.x,oe.x,ce.x,Ae.x),P=Math.max(G.x,oe.x,ce.x,Ae.x),w=Math.min(G.y,oe.y,ce.y,Ae.y),R=Math.max(G.y,oe.y,ce.y,Ae.y)}return a.emplaceBack(e.x,e.y,e.z,r.x,r.y,N,w,P,R,S,s,h,l),a.length-1}function Qg(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const e=a.bottom-a.top;return e>0?Math.max(10,e):null}function X1(a,e,r,s){const h=a.compareText;if(e in h){const l=h[e];for(let m=l.length-1;m>=0;m--)if(s.dist(l[m])<r)return!0}else h[e]=[];return h[e].push(s),!1}function v0(a,e){const r=a.fovAboveCenter,s=a.elevation?a.elevation.getMinElevationBelowMSL()*e:0,h=(a._camera.position[2]*a.worldSize-s)/Math.cos(a._pitch),l=Math.sin(r)*h/Math.sin(Math.max(Math.PI/2-a._pitch-r,.01));let m=Math.sin(a._pitch)*l+h;const S=h*(1/a._horizonShift);if(!a.elevation||a.elevation.exaggeration()===0){let O=Math.max(a.zoom-17,0);a.isOrthographic&&(O/=10),m*=1+O}return Math.min(1.01*m,S)}function u_(a,e){if(!e.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:e};const r=Math.pow(2,-a.z),s=a.x*r,h=(a.x+1)*r,l=a.y*r,m=(a.y+1)*r,S=ld(s),O=ld(h),z=dc(l),w=dc(m),R=e.project(S,z),N=e.project(O,z),P=e.project(O,w),D=e.project(S,w);let G=Math.min(R.x,N.x,P.x,D.x),oe=Math.min(R.y,N.y,P.y,D.y),ce=Math.max(R.x,N.x,P.x,D.x),Ae=Math.max(R.y,N.y,P.y,D.y);const Oe=r/16;function ve(Ye,ct,Kt,Zt,Ut,En){const Yt=(Kt+Ut)/2,Cn=(Zt+En)/2,Vn=e.project(ld(Yt),dc(Cn)),zn=Math.max(0,G-Vn.x,oe-Vn.y,Vn.x-ce,Vn.y-Ae);G=Math.min(G,Vn.x),ce=Math.max(ce,Vn.x),oe=Math.min(oe,Vn.y),Ae=Math.max(Ae,Vn.y),zn>Oe&&(ve(Ye,Vn,Kt,Zt,Yt,Cn),ve(Vn,ct,Yt,Cn,Ut,En))}ve(R,N,s,l,h,l),ve(N,P,h,l,h,m),ve(P,D,h,m,s,m),ve(D,R,s,m,s,l),G-=Oe,oe-=Oe,ce+=Oe,Ae+=Oe;const Fe=1/Math.max(ce-G,Ae-oe);return{scale:Fe,x:G*Fe,y:oe*Fe,x2:ce*Fe,y2:Ae*Fe,projection:e}}function y0(a,{x:e,y:r},s=0){return new Mt(((e-s)*a.scale-a.x)*Ft,(r*a.scale-a.y)*Ft)}const J1=le.mat4.identity(new Float32Array(16));class Gp{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new Da(0,0)}projectTilePoint(e,r,s){return{x:e,y:r,z:0}}locationPoint(e,r,s=!0){return e._coordinatePoint(e.locationCoordinate(r),s)}pixelsPerMeter(e,r){return yl(1,e)*r}pixelSpaceConversion(e,r,s){return 1}farthestPixelDistance(e){return v0(e,e.pixelsPerMeter)}pointCoordinate(e,r,s,h){const l=e.horizonLineFromTop(!1),m=new Mt(r,Math.max(l,s));return e.rayIntersectionCoordinate(e.pointRayIntersection(m,h))}pointCoordinate3D(e,r,s){const h=new Mt(r,s);if(e.elevation)return e.elevation.pointCoordinate(h);{const l=this.pointCoordinate(e,h.x,h.y,0);return[l.x,l.y,l.z]}}isPointAboveHorizon(e,r){if(e.elevation&&e.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(e,r.x,r.y);const s=e.horizonLineFromTop();return r.y<s}createInversionMatrix(e,r){return J1}createTileMatrix(e,r,s){let h,l,m;const S=s.canonical,O=le.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=u_(S,this);h=1,l=z.x+s.wrap*z.scale,m=z.y,le.mat4.scale(O,O,[h/z.scale,h/z.scale,e.pixelsPerMeter/r])}else h=r/e.zoomScale(S.z),l=(S.x+Math.pow(2,S.z)*s.wrap)*h,m=S.y*h;return le.mat4.translate(O,O,[l,m,0]),le.mat4.scale(O,O,[h/Ft,h/Ft,1]),O}upVector(e,r,s){return[0,0,1]}upVectorScale(e,r,s){return{metersToTile:1}}}class x0 extends Gp{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,s]=this.parallels=e.parallels||[29.5,45.5],h=Math.sin(lr(r));this.n=(h+Math.sin(lr(s)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:s,c:h,r0:l}=this,m=lr(e-this.center[0]),S=lr(r),O=Math.sqrt(h-2*s*Math.sin(S))/s;return{x:O*Math.sin(m*s),y:O*Math.cos(m*s)-l,z:0}}unproject(e,r){const{n:s,c:h,r0:l}=this,m=l+r;let S=Math.atan2(e,Math.abs(m))*Math.sign(m);m*s<0&&(S-=Math.PI*Math.sign(e)*Math.sign(m));const O=lr(this.center[0])*s;S=Bt(S,-Math.PI-O,Math.PI-O);const z=Me(Pe(S/s)+this.center[0],-180,180),w=Math.asin(Me((h-(e*e+m*m)*s*s)/(2*s),-1,1)),R=Me(Pe(w),-Is,Is);return new Da(z,R)}}const qg=1.340264,eg=-.081106,wm=893e-6,Em=.003796,tg=Math.sqrt(3)/2;class b0 extends Gp{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const s=Math.asin(tg*Math.sin(r)),h=s*s,l=h*h*h;return{x:.5*(e*Math.cos(s)/(tg*(qg+3*eg*h+l*(7*wm+9*Em*h)))/Math.PI+.5),y:1-.5*(s*(qg+eg*h+l*(wm+Em*h))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let s=r=(2*(1-r)-1)*Math.PI,h=s*s,l=h*h*h;for(let w,R,N,P=0;P<12&&(R=s*(qg+eg*h+l*(wm+Em*h))-r,N=qg+3*eg*h+l*(7*wm+9*Em*h),w=R/N,s=Me(s-w,-Math.PI/3,Math.PI/3),h=s*s,l=h*h*h,!(Math.abs(w)<1e-12));++P);const m=tg*e*(qg+3*eg*h+l*(7*wm+9*Em*h))/Math.cos(s),S=Math.asin(Math.sin(s)/tg),O=Me(180*m/Math.PI,-180,180),z=Me(180*S/Math.PI,-Is,Is);return new Da(O,z)}}class ng extends Gp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const s=360*(e-.5),h=Me(360*(.5-r),-Is,Is);return new Da(s,h)}}const Hf=Math.PI/2;function c_(a){return Math.tan((Hf+a)/2)}class Q1 extends Gp{constructor(e){super(e),this.center=e.center||[0,30];const[r,s]=this.parallels=e.parallels||[30,30];let h=lr(r),l=lr(s);this.southernCenter=h+l<0,this.southernCenter&&(h=-h,l=-l);const m=Math.cos(h),S=c_(h);this.n=h===l?Math.sin(h):Math.log(m/Math.cos(l))/Math.log(c_(l)/S),this.f=m*Math.pow(c_(h),this.n)/this.n}project(e,r){r=lr(r),this.southernCenter&&(r=-r),e=lr(e-this.center[0]);const s=1e-6,{n:h,f:l}=this;l>0?r<-Hf+s&&(r=-Hf+s):r>Hf-s&&(r=Hf-s);const m=l/Math.pow(c_(r),h);let S=m*Math.sin(h*e),O=l-m*Math.cos(h*e);return S=.5*(S/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:S,y:this.southernCenter?O:1-O,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:s,f:h}=this,l=h-r,m=Math.sign(l),S=Math.sign(s)*Math.sqrt(e*e+l*l);let O=Math.atan2(e,Math.abs(l))*m;l*s<0&&(O-=Math.PI*Math.sign(e)*m);const z=Me(Pe(O/s)+this.center[0],-180,180),w=Me(Pe(2*Math.atan(Math.pow(h/S,1/s))-Hf),-Is,Is);return new Da(z,this.southernCenter?-w:w)}}class uy extends Gp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:Wd(e),y:Qc(r),z:0}}unproject(e,r){const s=ld(e),h=dc(r);return new Da(s,h)}}const q1=lr(Is);class ex extends Gp{project(e,r){const s=(r=lr(r))*r,h=s*s;return{x:.5*((e=lr(e))*(.8707-.131979*s+h*(h*(.003971*s-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+s*(.015085+h*(.028874*s-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let s=r=(2*(1-r)-1)*Math.PI,h=25,l=0,m=s*s;do{m=s*s;const z=m*m;l=(s*(1.007226+m*(.015085+z*(.028874*m-.044475-.005916*z)))-r)/(1.007226+m*(.045255+z*(.259866*m-.311325-.06507600000000001*z))),s=Me(s-l,-q1,q1)}while(Math.abs(l)>1e-6&&--h>0);m=s*s;const S=Me(Pe(e/(.8707+m*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979))),-180,180),O=Pe(s);return new Da(S,O)}}const cy=lr(Is);class Xx extends Gp{project(e,r){r=lr(r),e=lr(e);const s=Math.cos(r),h=2/Math.PI,l=Math.acos(s*Math.cos(e/2)),m=Math.sin(l)/l,S=.5*(e*h+2*s*Math.sin(e/2)/m)||0,O=.5*(r+Math.sin(r)/m)||0;return{x:.5*(S/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(e,r){let s=e=(2*e-.5)*Math.PI,h=r=(2*(1-r)-1)*Math.PI,l=25;const m=1e-6;let S=0,O=0;do{const z=Math.cos(h),w=Math.sin(h),R=2*w*z,N=w*w,P=z*z,D=Math.cos(s/2),G=Math.sin(s/2),oe=2*D*G,ce=G*G,Ae=1-P*D*D,Oe=Ae?1/Ae:0,ve=Ae?Math.acos(z*D)*Math.sqrt(1/Ae):0,Fe=.5*(2*ve*z*G+2*s/Math.PI)-e,Ye=.5*(ve*w+h)-r,ct=.5*Oe*(P*ce+ve*z*D*N)+1/Math.PI,Kt=Oe*(oe*R/4-ve*w*G),Zt=.125*Oe*(R*G-ve*w*P*oe),Ut=.5*Oe*(N*D+ve*ce*z)+.5,En=Kt*Zt-Ut*ct;S=(Ye*Kt-Fe*Ut)/En,O=(Fe*Zt-Ye*ct)/En,s=Me(s-S,-Math.PI,Math.PI),h=Me(h-O,-cy,cy)}while((Math.abs(S)>m||Math.abs(O)>m)&&--l>0);return new Da(Pe(s),Pe(h))}}class dy extends Gp{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(lr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:s,cosPhi:h}=this;return{x:lr(e)*h*s+.5,y:-Math.sin(lr(r))/h*s+.5,z:0}}unproject(e,r){const{scale:s,cosPhi:h}=this,l=-(r-.5)/s,m=Me(Pe((e-.5)/s)/h,-180,180),S=Math.asin(Me(l*h,-1,1)),O=Me(Pe(S),-Is,Is);return new Da(m,O)}}class tx extends uy{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,s){const h=gs(e,r,s),l=Wu(xl(s));return le.vec3.transformMat4(h,h,l),{x:h[0],y:h[1],z:h[2]}}locationPoint(e,r){const s=uh(r.lat,r.lng),h=le.vec3.normalize([],s),l=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude,m=yl(1,0)*Ft*l;le.vec3.scaleAndAdd(s,s,h,m);const S=le.mat4.identity(new Float64Array(16));return le.mat4.multiply(S,e.pixelMatrix,e.globeMatrix),le.vec3.transformMat4(s,s,S),new Mt(s[0],s[1])}pixelsPerMeter(e,r){return yl(1,0)*r}pixelSpaceConversion(e,r,s){const h=yl(1,e)*r,l=$i(yl(1,45)*r,h,s);return this.pixelsPerMeter(e,r)/l}createTileMatrix(e,r,s){const h=Vs(xl(s.canonical));return le.mat4.multiply(new Float64Array(16),e.globeMatrix,h)}createInversionMatrix(e,r){const{center:s}=e,h=Wu(xl(r));return le.mat4.rotateY(h,h,lr(s.lng)),le.mat4.rotateX(h,h,lr(s.lat)),le.mat4.scale(h,h,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(e,r,s,h){return Ia(e,r,s,!0)||new o(0,0)}pointCoordinate3D(e,r,s){const h=this.pointCoordinate(e,r,s,0);return[h.x,h.y,h.z]}isPointAboveHorizon(e,r){return!Ia(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(h,l){const m=h.cameraToCenterDistance,S=h._centerAltitude*l,O=h._camera,z=h._camera.forward(),w=le.vec3.add([],le.vec3.scale([],z,-m),[0,0,S]),R=h.worldSize/(2*Math.PI),N=[0,0,-R],P=h.width/h.height,D=Math.tan(h.fovAboveCenter),G=le.vec3.scale([],O.up(),D),oe=le.vec3.scale([],O.right(),D*P),ce=le.vec3.normalize([],le.vec3.add([],le.vec3.add([],z,G),oe)),Ae=[];let Oe;if(new zo(w,ce).closestPointOnSphere(N,R,Ae)){const ve=le.vec3.add([],Ae,N),Fe=le.vec3.sub([],ve,w);Oe=Math.cos(h.fovAboveCenter)*le.vec3.length(Fe)}else{const ve=le.vec3.sub([],w,N),Fe=le.vec3.sub([],N,w);le.vec3.normalize(Fe,Fe);const Ye=le.vec3.length(ve)-R;Oe=Math.sqrt(Ye*(Ye+2*R));const ct=Math.acos(Oe/(R+Ye))-Math.acos(le.vec3.dot(z,Fe));Oe*=Math.cos(ct)}return 1.01*Oe}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),s=td(e.zoom);if(s>0){const h=v0(e,yl(1,e.center.lat)*e.worldSize),l=e.worldSize/(2*Math.PI),m=Math.max(e.width,e.height)/e.worldSize*Math.PI;return $i(r,h+l*(1-Math.cos(m)),Math.pow(s,10))}return r}upVector(e,r,s){return gs(r,s,e,1)}upVectorScale(e){return{metersToTile:na(Xa(xl(e)))}}}function w0(a){const e=a.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(a.name){case"mercator":return new uy(a);case"equirectangular":return new ng(a);case"naturalEarth":return new ex(a);case"equalEarth":return new b0(a);case"winkelTripel":return new Xx(a);case"albers":return r?new dy(a):new x0(a);case"lambertConformalConic":return r?new dy(a):new Q1(a);case"globe":return new tx(a)}throw new Error(`Invalid projection name: ${a.name}`)}const E0=Np.VectorTileFeature.types,nx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ev(a,e,r,s,h,l,m,S,O,z,w,R,N){const P=S?Math.min(Id,Math.round(S[0])):0,D=S?Math.min(Id,Math.round(S[1])):0;a.emplaceBack(e,r,Math.round(32*s),Math.round(32*h),l,m,(P<<1)+(O?1:0),D,16*z,16*w,256*R,256*N)}function tv(a,e,r){a.emplaceBack(e,r)}function nv(a,e,r,s,h,l,m){a.emplaceBack(e,r,s,h,l,m)}function rg(a,e,r,s,h){a.emplaceBack(e,r,s,h),a.emplaceBack(e,r,s,h),a.emplaceBack(e,r,s,h),a.emplaceBack(e,r,s,h)}function Jx(a){for(const e of a.sections)if(rs(e.text))return!0;return!1}class ig{constructor(e){this.layoutVertexArray=new Gd,this.indexArray=new _u,this.programConfigurations=e,this.segments=new za,this.dynamicLayoutVertexArray=new dl,this.opacityVertexArray=new cc,this.placedSymbolArray=new Mp,this.iconTransitioningVertexArray=new rh,this.globeExtVertexArray=new af,this.zOffsetVertexArray=new sf}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(e,r,s,h,l){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o0.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,G1.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,nx,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,s0.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,a0.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||l)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,$1.members,!0)),this.opacityVertexBuffer.itemSize=1),(s||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Fi(ig,"SymbolBuffers");class og{constructor(e,r,s){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new s,this.segments=new za,this.collisionVertexArray=new yc,this.collisionVertexArrayExt=new dl}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Zx.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Wx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Fi(og,"CollisionBuffers");class ag{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.lut=e.lut,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=le.mat4.identity([]),this.placementViewportMatrix=le.mat4.identity([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$_(this.zoom,r["text-size"]),this.iconSizeData=$_(this.zoom,r["icon-size"]);const s=this.layers[0].layout,h=s.get("symbol-sort-key"),l=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=l!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(l==="viewport-y"||l==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=s.get("text-writing-mode").map(m=>Ch[m]),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=s.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new ig(new sh(this.layers,{zoom:this.zoom,lut:this.lut},e=>e.startsWith("text")||e.startsWith("symbol"))),this.icon=new ig(new sh(this.layers,{zoom:this.zoom,lut:this.lut},e=>e.startsWith("icon")||e.startsWith("symbol"))),this.glyphOffsetArray=new pf,this.lineVertexArray=new Nf,this.symbolInstances=new wd}calculateGlyphDependencies(e,r,s,h,l){for(const m of e){const S=m.codePointAt(0);if(S===void 0)break;if(r[S]=!0,h&&l&&S<=65535){const O=$g[m];O&&(r[O.charCodeAt(0)]=!0)}}}updateFootprints(e,r){}updateReplacement(e,r){if(r.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=r.updateTime;const s=r.getReplacementRegionsForTile(e.toUnwrapped(),!0);return!L_(this.activeReplacements,s)&&(this.activeReplacements=s,!0)}populate(e,r,s,h){const l=this.layers[0],m=l.layout,S=this.projection.name==="globe",O=m.get("text-font"),z=m.get("text-field"),w=m.get("icon-image"),[R,N]=m.get("icon-size-scale-range"),P=Me(r.scaleFactor||1,R,N),D=(z.value.kind!=="constant"||z.value.value instanceof Fs&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),G=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,oe=m.get("symbol-sort-key");if(this.features=[],!D&&!G)return;const ce=r.iconDependencies,Ae=r.glyphDependencies,Oe=r.availableImages,ve=new Ts(this.zoom);for(const{feature:Fe,id:Ye,index:ct,sourceLayerIndex:Kt}of e){const Zt=l._featureFilter.needGeometry,Ut=fe(Fe,Zt);if(!l._featureFilter.filter(ve,Ut,s))continue;if(Zt||(Ut.geometry=re(Fe,s,h)),S&&Fe.type!==1&&s.z<=5){const zn=Ut.geometry,Zn=.98078528056,qn=(hr,Kn)=>{const Zr=gs(hr.x,hr.y,s,1),si=gs(Kn.x,Kn.y,s,1);return le.vec3.dot(Zr,si)<Zn};for(let hr=0;hr<zn.length;hr++)zn[hr]=A(zn[hr],qn)}let En,Yt;if(D){const zn=l.getValueAndResolveTokens("text-field",Ut,s,Oe),Zn=Fs.factory(zn);Jx(Zn)&&(this.hasRTLText=!0),(!this.hasRTLText||jc()==="unavailable"||this.hasRTLText&&uc.isParsed())&&(En=Hx(Zn,l,Ut))}if(G){const zn=l.getValueAndResolveTokens("icon-image",Ut,s,Oe);Yt=zn instanceof cs?zn:cs.build(zn)}if(!En&&!Yt)continue;const Cn=this.sortFeaturesByKey?oe.evaluate(Ut,{},s):void 0,Vn={id:Ye,text:En,icon:Yt,index:ct,sourceLayerIndex:Kt,geometry:Ut.geometry,properties:Fe.properties,type:E0[Fe.type],sortKey:Cn};if(this.features.push(Vn),Yt){const zn=G_(this.iconSizeData,this.layers[0]._unevaluatedLayout._values["icon-size"],s,this.zoom,Vn)*P*this.pixelRatio,Zn=Yt.getPrimary().scaleSelf(zn);if(ce[Zn.id]=ce[Zn.id]||[],ce[Zn.id].push(Zn),Yt.nameSecondary){const qn=Yt.getSecondary().scaleSelf(zn);ce[qn.id]=ce[qn.id]||[],ce[qn.id].push(qn)}}if(En){const zn=O.evaluate(Ut,{},s).join(","),Zn=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ch.vertical)>=0;for(const qn of En.sections)if(qn.image){const hr=qn.image.getPrimary().scaleSelf(this.pixelRatio);ce[hr.id]=ce[hr.id]||[],ce[hr.id].push(hr)}else{const hr=Ss(En.toString()),Kn=qn.fontStack||zn,Zr=Ae[Kn]=Ae[Kn]||{};this.calculateGlyphDependencies(qn.text,Zr,Zn,this.allowVerticalPlacement,hr)}}}m.get("symbol-placement")==="line"&&(this.features=function(Fe){const Ye={},ct={},Kt=[];let Zt=0;function Ut(Vn){Kt.push(Fe[Vn]),Zt++}function En(Vn,zn,Zn){const qn=ct[Vn];return delete ct[Vn],ct[zn]=qn,Kt[qn].geometry[0].pop(),Kt[qn].geometry[0]=Kt[qn].geometry[0].concat(Zn[0]),qn}function Yt(Vn,zn,Zn){const qn=Ye[zn];return delete Ye[zn],Ye[Vn]=qn,Kt[qn].geometry[0].shift(),Kt[qn].geometry[0]=Zn[0].concat(Kt[qn].geometry[0]),qn}function Cn(Vn,zn,Zn){const qn=Zn?zn[0][zn[0].length-1]:zn[0][0];return`${Vn}:${qn.x}:${qn.y}`}for(let Vn=0;Vn<Fe.length;Vn++){const zn=Fe[Vn],Zn=zn.geometry,qn=zn.text?zn.text.toString():null;if(!qn){Ut(Vn);continue}const hr=Cn(qn,Zn),Kn=Cn(qn,Zn,!0);if(hr in ct&&Kn in Ye&&ct[hr]!==Ye[Kn]){const Zr=Yt(hr,Kn,Zn),si=En(hr,Kn,Kt[Zr].geometry);delete Ye[hr],delete ct[Kn],ct[Cn(qn,Kt[si].geometry,!0)]=si,Kt[Zr].geometry=null}else hr in ct?En(hr,Kn,Zn):Kn in Ye?Yt(hr,Kn,Zn):(Ut(Vn),Ye[hr]=Zt-1,ct[Kn]=Zt-1)}return Kt.filter(Vn=>Vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Fe,Ye)=>Fe.sortKey-Ye.sortKey)}update(e,r,s,h,l,m,S){this.text.programConfigurations.updatePaintArrays(e,r,l,s,h,m,S),this.icon.programConfigurations.updatePaintArrays(e,r,l,s,h,m,S)}updateZOffset(){const e=(l,m,S)=>{s+=m,s>l.length&&l.resize(s);for(let O=-m;O<0;O++)l.emplace(O+s,S)},r=(l,m,S)=>{h+=m,h>l.length&&l.resize(h);for(let O=-m;O<0;O++)l.emplace(O+h,S)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let s=0,h=0;for(let l=0;l<this.symbolInstances.length;l++){const m=this.symbolInstances.get(l),{numHorizontalGlyphVertices:S,numVerticalGlyphVertices:O,numIconVertices:z}=m,w=m.zOffset,R=z>0;if((S>0||O>0)&&(e(this.text.zOffsetVertexArray,S,w),e(this.text.zOffsetVertexArray,O,w)),R){const{placedIconSymbolIndex:N,verticalPlacedIconSymbolIndex:P}=m;N>=0&&r(this.icon.zOffsetVertexArray,z,w),P>=0&&r(this.icon.zOffsetVertexArray,m.numVerticalIconVertices,w)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=w0(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const s=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:h,y:l}of r)this.lineVertexArray.emplaceBack(h,l);return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(e,r,s,h,l,m,S,O,z,w,R,N,P,D,G,oe){const ce=e.indexArray,Ae=e.layoutVertexArray,Oe=e.globeExtVertexArray,ve=e.segments.prepareSegment(4*r.length,Ae,ce,this.canOverlap?m.sortKey:void 0),Fe=this.glyphOffsetArray.length,Ye=ve.vertexLength,ct=this.allowVerticalPlacement&&S===Ch.vertical?Math.PI/2:0,Kt=m.text&&m.text.sections;for(let Ut=0;Ut<r.length;Ut++){const{tl:En,tr:Yt,bl:Cn,br:Vn,texPrimary:zn,texSecondary:Zn,pixelOffsetTL:qn,pixelOffsetBR:hr,minFontScaleX:Kn,minFontScaleY:Zr,glyphOffset:si,isSDF:Wr,sectionIndex:zi}=r[Ut],yi=ve.vertexLength,vi=si[1];if(ev(Ae,z.x,z.y,En.x,vi+En.y,zn.x,zn.y,s,Wr,qn.x,qn.y,Kn,Zr),ev(Ae,z.x,z.y,Yt.x,vi+Yt.y,zn.x+zn.w,zn.y,s,Wr,hr.x,qn.y,Kn,Zr),ev(Ae,z.x,z.y,Cn.x,vi+Cn.y,zn.x,zn.y+zn.h,s,Wr,qn.x,hr.y,Kn,Zr),ev(Ae,z.x,z.y,Vn.x,vi+Vn.y,zn.x+zn.w,zn.y+zn.h,s,Wr,hr.x,hr.y,Kn,Zr),O){const{x:li,y:lo,z:ji}=O.anchor,[Yi,Yo,ga]=O.up;nv(Oe,li,lo,ji,Yi,Yo,ga),nv(Oe,li,lo,ji,Yi,Yo,ga),nv(Oe,li,lo,ji,Yi,Yo,ga),nv(Oe,li,lo,ji,Yi,Yo,ga),rg(e.dynamicLayoutVertexArray,li,lo,ji,ct)}else rg(e.dynamicLayoutVertexArray,z.x,z.y,z.z,ct);if(oe){const li=Zn||zn;tv(e.iconTransitioningVertexArray,li.x,li.y),tv(e.iconTransitioningVertexArray,li.x+li.w,li.y),tv(e.iconTransitioningVertexArray,li.x,li.y+li.h),tv(e.iconTransitioningVertexArray,li.x+li.w,li.y+li.h)}ce.emplaceBack(yi,yi+1,yi+2),ce.emplaceBack(yi+1,yi+2,yi+3),ve.vertexLength+=4,ve.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(si[0]),Ut!==r.length-1&&zi===r[Ut+1].sectionIndex||e.programConfigurations.populatePaintArrays(Ae.length,m,m.index,{},P,D,G,Kt&&Kt[zi])}const Zt=O?O.anchor:z;e.placedSymbolArray.emplaceBack(Zt.x,Zt.y,Zt.z,z.x,z.y,Fe,this.glyphOffsetArray.length-Fe,Ye,w,R,z.segment,s?s[0]:0,s?s[1]:0,h[0],h[1],S,0,!1,0,N,0)}_commitLayoutVertex(e,r,s,h,l,m,S){e.emplaceBack(r,s,h,l,m,Math.round(S.x),Math.round(S.y))}_addCollisionDebugVertices(e,r,s,h,l,m,S){const O=s.segments.prepareSegment(4,s.layoutVertexArray,s.indexArray),z=O.vertexLength,w=S.tileAnchorX,R=S.tileAnchorY;for(let P=0;P<4;P++)s.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(s.collisionVertexArrayExt,r,e.padding,S.zOffset),this._commitLayoutVertex(s.layoutVertexArray,h,l,m,w,R,new Mt(e.x1,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,h,l,m,w,R,new Mt(e.x2,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,h,l,m,w,R,new Mt(e.x2,e.y2)),this._commitLayoutVertex(s.layoutVertexArray,h,l,m,w,R,new Mt(e.x1,e.y2)),O.vertexLength+=4;const N=s.indexArray;N.emplaceBack(z,z+1),N.emplaceBack(z+1,z+2),N.emplaceBack(z+2,z+3),N.emplaceBack(z+3,z),O.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,s,h,l,m){for(let S=h;S<l;S++){const O=s.get(S),z=this.getSymbolInstanceTextSize(e,m,r,S);this._addCollisionDebugVertices(O,z,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,m)}}_addIconDebugCollisionBoxes(e,r,s,h,l,m){for(let S=h;S<l;S++){const O=s.get(S),z=this.getSymbolInstanceIconSize(e,r,m.placedIconSymbolIndex);this._addCollisionDebugVertices(O,z,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,m)}}generateCollisionDebugBuffers(e,r,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new og(Lf,Z1.members,rh),this.iconCollisionBox=new og(Lf,Z1.members,rh);const h=Z_(this.iconSizeData,e),l=Z_(this.textSizeData,e,s);for(let m=0;m<this.symbolInstances.length;m++){const S=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(l,e,r,S.textBoxStartIndex,S.textBoxEndIndex,S),this._addTextDebugCollisionBoxes(l,e,r,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S),this._addIconDebugCollisionBoxes(h,e,r,S.iconBoxStartIndex,S.iconBoxEndIndex,S),this._addIconDebugCollisionBoxes(h,e,r,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S)}}getSymbolInstanceTextSize(e,r,s,h){const l=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:h),m=qm(this.textSizeData,e,l)/cd;return this.tilePixelRatio*m}getSymbolInstanceIconSize(e,r,s){const h=this.icon.placedSymbolArray.get(s),l=qm(this.iconSizeData,e,h);return this.tilePixelRatio*l}_commitDebugCollisionVertexUpdate(e,r,s,h){e.emplaceBack(r,-s,-s,h),e.emplaceBack(r,s,-s,h),e.emplaceBack(r,s,s,h),e.emplaceBack(r,-s,s,h)}_updateTextDebugCollisionBoxes(e,r,s,h,l,m,S){for(let O=h;O<l;O++){const z=s.get(O),w=this.getSymbolInstanceTextSize(e,m,r,O);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,w,z.padding,m.zOffset)}}_updateIconDebugCollisionBoxes(e,r,s,h,l,m,S){for(let O=h;O<l;O++){const z=s.get(O),w=this.getSymbolInstanceIconSize(e,r,m.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,w,z.padding,m.zOffset)}}updateCollisionDebugBuffers(e,r,s,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=Z_(this.iconSizeData,e,h),m=Z_(this.textSizeData,e,s);for(let S=0;S<this.symbolInstances.length;S++){const O=this.symbolInstances.get(S);this._updateTextDebugCollisionBoxes(m,e,r,O.textBoxStartIndex,O.textBoxEndIndex,O,s),this._updateTextDebugCollisionBoxes(m,e,r,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,s),this._updateIconDebugCollisionBoxes(l,e,r,O.iconBoxStartIndex,O.iconBoxEndIndex,O,h),this._updateIconDebugCollisionBoxes(l,e,r,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,h)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,s,h,l,m,S,O,z){const w={};if(r<s){const{x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve,featureIndex:Fe}=e.get(r);w.textBox={x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve},w.textFeatureIndex=Fe}if(h<l){const{x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve,featureIndex:Fe}=e.get(h);w.verticalTextBox={x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve},w.verticalTextFeatureIndex=Fe}if(m<S){const{x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve,featureIndex:Fe}=e.get(m);w.iconBox={x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve},w.iconFeatureIndex=Fe}if(O<z){const{x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve,featureIndex:Fe}=e.get(O);w.verticalIconBox={x1:R,y1:N,x2:P,y2:D,padding:G,projectedAnchorX:oe,projectedAnchorY:ce,projectedAnchorZ:Ae,tileAnchorX:Oe,tileAnchorY:ve},w.verticalIconFeatureIndex=Fe}return w}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,r){const s=e.placedSymbolArray.get(r),h=s.vertexStartIndex+4*s.numGlyphs;for(let l=s.vertexStartIndex;l<h;l+=4)e.indexArray.emplaceBack(l,l+1,l+2),e.indexArray.emplaceBack(l+1,l+2,l+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),s=Math.cos(e),h=[],l=[],m=[];for(let S=0;S<this.symbolInstances.length;++S){m.push(S);const O=this.symbolInstances.get(S);h.push(0|Math.round(r*O.tileAnchorX+s*O.tileAnchorY)),l.push(O.featureIndex)}return m.sort((S,O)=>h[S]-h[O]||l[O]-l[S]),m}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,r)=>this.symbolInstances.get(r).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,r){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===r?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const s=this.symbolInstances.get(r);this.featureSortOrder.push(s.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:l,leftJustifiedTextSymbolIndex:m,verticalPlacedTextSymbolIndex:S,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:z}=s;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),l>=0&&l!==h&&this.addIndicesForPlacedSymbol(this.text,l),m>=0&&m!==l&&m!==h&&this.addIndicesForPlacedSymbol(this.text,m),S>=0&&this.addIndicesForPlacedSymbol(this.text,S),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let S0,hy,fy;Fi(ag,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ag.addDynamicAttributes=rg;class py{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ml,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Fi(py,"FormatSectionOverride",{omit:["defaultValue"]});const my=()=>fy||(fy={layout:S0||(S0=new gl({"symbol-placement":new di(gr.layout_symbol["symbol-placement"]),"symbol-spacing":new di(gr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new di(gr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ni(gr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new di(gr.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new di(gr.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new di(gr.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new di(gr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new di(gr.layout_symbol["icon-ignore-placement"]),"icon-optional":new di(gr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new di(gr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ni(gr.layout_symbol["icon-size"]),"icon-size-scale-range":new di(gr.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ni(gr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ni(gr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ni(gr.layout_symbol["icon-image"]),"icon-rotate":new Ni(gr.layout_symbol["icon-rotate"]),"icon-padding":new di(gr.layout_symbol["icon-padding"]),"icon-keep-upright":new di(gr.layout_symbol["icon-keep-upright"]),"icon-offset":new Ni(gr.layout_symbol["icon-offset"]),"icon-anchor":new Ni(gr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new di(gr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new di(gr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new di(gr.layout_symbol["text-rotation-alignment"]),"text-field":new Ni(gr.layout_symbol["text-field"]),"text-font":new Ni(gr.layout_symbol["text-font"]),"text-size":new Ni(gr.layout_symbol["text-size"]),"text-size-scale-range":new di(gr.layout_symbol["text-size-scale-range"]),"text-max-width":new Ni(gr.layout_symbol["text-max-width"]),"text-line-height":new Ni(gr.layout_symbol["text-line-height"]),"text-letter-spacing":new Ni(gr.layout_symbol["text-letter-spacing"]),"text-justify":new Ni(gr.layout_symbol["text-justify"]),"text-radial-offset":new Ni(gr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new di(gr.layout_symbol["text-variable-anchor"]),"text-anchor":new Ni(gr.layout_symbol["text-anchor"]),"text-max-angle":new di(gr.layout_symbol["text-max-angle"]),"text-writing-mode":new di(gr.layout_symbol["text-writing-mode"]),"text-rotate":new Ni(gr.layout_symbol["text-rotate"]),"text-padding":new di(gr.layout_symbol["text-padding"]),"text-keep-upright":new di(gr.layout_symbol["text-keep-upright"]),"text-transform":new Ni(gr.layout_symbol["text-transform"]),"text-offset":new Ni(gr.layout_symbol["text-offset"]),"text-allow-overlap":new di(gr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new di(gr.layout_symbol["text-ignore-placement"]),"text-optional":new di(gr.layout_symbol["text-optional"]),visibility:new di(gr.layout_symbol.visibility)})),paint:hy||(hy=new gl({"icon-opacity":new Ni(gr.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ni(gr.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ni(gr.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ni(gr.paint_symbol["text-emissive-strength"]),"icon-color":new Ni(gr.paint_symbol["icon-color"]),"icon-halo-color":new Ni(gr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ni(gr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ni(gr.paint_symbol["icon-halo-blur"]),"icon-translate":new di(gr.paint_symbol["icon-translate"]),"icon-translate-anchor":new di(gr.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ni(gr.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ni(gr.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ni(gr.paint_symbol["text-occlusion-opacity"]),"text-color":new Ni(gr.paint_symbol["text-color"],{runtimeType:ts,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Ni(gr.paint_symbol["text-halo-color"]),"text-halo-width":new Ni(gr.paint_symbol["text-halo-width"]),"text-halo-blur":new Ni(gr.paint_symbol["text-halo-blur"]),"text-translate":new di(gr.paint_symbol["text-translate"]),"text-translate-anchor":new di(gr.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new di(gr.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new di(gr.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new di(gr.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new di(gr.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ni(gr.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},fy);class rv extends Bl{constructor(e,r,s,h){super(e,my(),r,s,h),this._colorAdjustmentMatrix=le.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=e.paint!==void 0&&("icon-occlusion-opacity"in e.paint||"text-occlusion-opacity"in e.paint)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const s=this.layout.get("text-writing-mode");if(s){const h=[];for(const l of s)h.indexOf(l)<0&&h.push(l);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(e,r,s,h){return this._saturation===e&&this._contrast===r&&this._brightnessMin===s&&this._brightnessMax===h||(this._colorAdjustmentMatrix=function(l,m,S,O){l=Nn(l),m=Nt(m);const z=le.mat4.create(),w=l/3,R=1-2*w,N=[R,w,w,0,w,R,w,0,w,w,R,0,0,0,0,1],P=.5-.5*m,D=O-S;return le.mat4.multiply(z,[D,0,0,0,0,D,0,0,0,0,D,0,S,S,S,1],[m,0,0,0,0,m,0,0,0,0,m,0,P,P,P,1]),le.mat4.multiply(z,z,N),z}(e,r,s,h),this._saturation=e,this._contrast=r,this._brightnessMin=s,this._brightnessMax=h),this._colorAdjustmentMatrix}getValueAndResolveTokens(e,r,s,h){const l=this.layout.get(e).evaluate(r,{},s,h),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||Iu(m.value)||!l?l:function(S,O){return O.replace(/{([^{}]+)}/g,(z,w)=>w in S?String(S[w]):"")}(r.properties,l)}createBucket(e){return new ag(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of my().paint.overridableProperties){if(!rv.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),s=new py(r),h=new $s(s,r.property.specification,this.scope,this.options);let l=null;l=r.value.kind==="constant"||r.value.kind==="source"?new rd("source",h):new zc("composite",h,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new Kc(r.property,l,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,s){return!(!this.layout||r.isDataDriven()||s.isDataDriven())&&rv.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const s=e.get("text-field"),h=my().paint.properties[r];let l=!1;const m=S=>{for(const O of S)if(h.overrides&&h.overrides.hasOverride(O))return void(l=!0)};if(s.value.kind==="constant"&&s.value.value instanceof Fs)m(s.value.value.sections);else if(s.value.kind==="source"){const S=z=>{l||(z instanceof ps&&fs(z.value)===zs?m(z.value.sections):z instanceof xu?m(z.sections):z.eachChild(S))},O=s.value;O._styleExpression&&S(O._styleExpression.expression)}return l}getProgramIds(){return["symbol"]}getDefaultProgramParams(e,r,s){return{config:new Zd(this,{zoom:r,lut:s}),overrideFog:!1}}}let T0,I0,M0,rx;var C0=ra([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function _y(a){switch(a){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function A0(a){switch(a){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class P0{constructor(e,r,s,h){this.context=e,this.format=s,this.useMipmap=h&&h.useMipmap,this.texture=e.gl.createTexture(),this.update(r,{premultiply:h&&h.premultiply})}update(e,r){const s=e&&e instanceof HTMLVideoElement&&e.width===0?e.videoWidth:e.width,h=e&&e instanceof HTMLVideoElement&&e.height===0?e.videoHeight:e.height,{context:l}=this,{gl:m}=l,{x:S,y:O}=r&&r.position?r.position:{x:0,y:0},z=S+s,w=O+h;!this.size||this.size[0]===z&&this.size[1]===w||(m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(this.texture),this.texture=m.createTexture(),this.size=null),m.bindTexture(m.TEXTURE_2D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(this.format===m.RGBA8&&(!r||r.premultiply!==!1));const R=e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap;if(!this.size&&z>0&&w>0){const N=this.useMipmap?Math.floor(Math.log2(Math.max(z,w)))+1:1;m.texStorage2D(m.TEXTURE_2D,N,this.format,z,w),this.size=[z,w]}if(this.size)if(R)m.texSubImage2D(m.TEXTURE_2D,0,S,O,_y(this.format),A0(this.format),e);else{const N=e.data;N&&m.texSubImage2D(m.TEXTURE_2D,0,S,O,s,h,_y(this.format),A0(this.format),N)}this.useMipmap&&m.generateMipmap(m.TEXTURE_2D)}bind(e,r,s=!1){const{context:h}=this,{gl:l}=h;l.bindTexture(l.TEXTURE_2D,this.texture),e!==this.minFilter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.useMipmap&&!s?e===l.NEAREST?l.NEAREST_MIPMAP_NEAREST:l.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),r!==this.wrapS&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,r),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,r),this.wrapS=r)}bindExtraParam(e,r,s,h){const{context:l}=this,{gl:m}=l;m.bindTexture(m.TEXTURE_2D,this.texture),r!==this.magFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,r),this.magFilter=r),e!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?e===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),s!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,s),this.wrapS=s),h!==this.wrapT&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,h),this.wrapT=h)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class iv{constructor(e,r){this.context=e,this.texture=r}bind(e,r){const{context:s}=this,{gl:h}=s;h.bindTexture(h.TEXTURE_2D,this.texture),e!==this.minFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,e),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,e),this.minFilter=e),r!==this.wrapS&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,r),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,r),this.wrapS=r)}}function gy(a,e,r,s,h,l,m,S){const O=[a,e,1,r,s,1,h,l,1],z=[m,S,1],w=le.mat3.adjoint([],O),[R,N,P]=le.vec3.transformMat3(z,z,w);return le.mat3.multiply(O,O,[R,0,0,0,N,0,0,0,P])}function vy(a,e,r,s,h,l,m,S){const O=function(z,w,R,N,P,D,G,oe){const ce=gy(0,0,1,0,1,1,0,1),Ae=gy(z,w,R,N,P,D,G,oe),Oe=le.mat3.adjoint([],ce);return le.mat3.multiply(Ae,Ae,Oe)}(a,e,r,s,h,l,m,S);return[O[2]/O[8]/Ft,O[5]/O[8]/Ft]}function $p(a){return[a[0],Math.min(Math.max(a[1],-Is),Is)]}class yy extends ao{constructor(e,r,s,h){super(),this.id=e,this.dispatcher=s,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(h),this.options=r,this._dirty=!1}load(e,r){if(this._loaded=r||!1,this.fire(new ja("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=oa(this.map._requestManager.transformRequest(this.url,yo.Image),(s,h)=>{this._imageRequest=null,this._loaded=!0,s?this.fire(new Sa(s)):h&&(this.image=h instanceof HTMLImageElement?Dt.getImageData(h):h,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new iv(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new ja("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(e){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof iv||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let r=e[0][1],s=e[0][1];for(const l of e)l[1]>s&&(s=l[1]),l[1]<r&&(r=l[1]);const h=(s+r)/2;if(h>Is?this.onNorthPole=!0:h<-Is&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const l=e.map(o.fromLngLat);this.tileID=function(m){let S=1/0,O=1/0,z=-1/0,w=-1/0;for(const G of m)S=Math.min(S,G.x),O=Math.min(O,G.y),z=Math.max(z,G.x),w=Math.max(w,G.y);const R=Math.max(z-S,w-O),N=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),P=Math.pow(2,N);let D=Math.floor((S+z)/2*P);return D>1&&(D-=1),new ri(N,D,Math.floor((O+w)/2*P))}(l),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new ja("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(e){for(const ce in this.tiles){const Ae=this.tiles[ce];Ae.state!=="loaded"&&(Ae.state="loaded",Ae.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const r=u_(new ri(0,0,0),this.map.transform.projection),s=[r.projection.project(this.coordinates[0][0],this.coordinates[0][1]),r.projection.project(this.coordinates[1][0],this.coordinates[1][1]),r.projection.project(this.coordinates[2][0],this.coordinates[2][1]),r.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ce){const Ae=ce[1].x-ce[0].x,Oe=ce[1].y-ce[0].y,ve=ce[2].x-ce[1].x,Fe=ce[2].y-ce[1].y,Ye=ce[3].x-ce[2].x,ct=ce[3].y-ce[2].y,Kt=ce[0].x-ce[3].x,Zt=ce[0].y-ce[3].y,Ut=Ae*Fe-ve*Oe,En=ve*ct-Ye*Fe,Yt=Ye*Zt-Kt*ct,Cn=Kt*Oe-Ae*Zt;return Ut>0&&En>0&&Yt>0&&Cn>0||Ut<0&&En<0&&Yt<0&&Cn<0}(s))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const h=u_(this.tileID,this.map.transform.projection),[l,m,S,O]=this.coordinates.map(ce=>{const Ae=h.projection.project(ce[0],ce[1]);return y0(h,Ae)._round()});this.perspectiveTransform=vy(l.x,l.y,m.x,m.y,S.x,S.y,O.x,O.y);const z=this._boundsArray=new Ha;z.emplaceBack(l.x,l.y,0,0),z.emplaceBack(m.x,m.y,Ft,0),z.emplaceBack(O.x,O.y,0,Ft),z.emplaceBack(S.x,S.y,Ft,Ft),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=e.createVertexBuffer(z,C0.members),this.boundsSegments=za.simpleSegment(0,0,4,2);const w=[],R=[$p((N=this.coordinates)[0]),$p(N[1]),$p(N[2]),$p(N[3])];var N;const[P,D,G,oe]=function(ce){let Ae=ce[0][0],Oe=Ae,ve=ce[0][1],Fe=ve;for(let Ye=1;Ye<ce.length;Ye++)ce[Ye][0]<Ae?Ae=ce[Ye][0]:ce[Ye][0]>Oe&&(Oe=ce[Ye][0]),ce[Ye][1]<ve?ve=ce[Ye][1]:ce[Ye][1]>Fe&&(Fe=ce[Ye][1]);return[Ae,ve,Oe-Ae,Fe-ve]}(R);{const ce=new Ha,[Ae,Oe,ve,Fe]=function(qn){let hr=qn[0].x,Kn=hr,Zr=qn[0].y,si=Zr;for(let Wr=1;Wr<qn.length;Wr++)qn[Wr].x<hr?hr=qn[Wr].x:qn[Wr].x>Kn&&(Kn=qn[Wr].x),qn[Wr].y<Zr?Zr=qn[Wr].y:qn[Wr].y>si&&(si=qn[Wr].y);return[hr,Zr,Kn-hr,si-Zr]}(s),Ye=qn=>[(qn.x-Ae)/ve,(qn.y-Oe)/Fe],[ct,Kt,Zt,Ut]=s.map(Ye),En=function(qn,hr,Kn,Zr,si,Wr,zi,yi){const vi=gy(0,0,1,0,1,1,0,1),li=gy(qn,hr,Kn,Zr,si,Wr,zi,yi),lo=le.mat3.adjoint([],li);return le.mat3.multiply(vi,vi,lo)}(ct[0],ct[1],Kt[0],Kt[1],Zt[0],Zt[1],Ut[0],Ut[1]);this.elevatedGlobePerspectiveTransform=vy(ct[0],ct[1],Kt[0],Kt[1],Zt[0],Zt[1],Ut[0],Ut[1]);const Yt=(qn,hr)=>{w.push(qn.lng);const Kn=Math.round((qn.lng-P)/G*Ft),Zr=Math.round((qn.lat-D)/oe*Ft),si=Ye(hr),Wr=le.vec3.transformMat3([],[si[0],si[1],1],En),zi=Math.round(Wr[0]/Wr[2]*Ft),yi=Math.round(Wr[1]/Wr[2]*Ft);ce.emplaceBack(Kn,Zr,zi,yi)},Cn=s[3].x-s[0].x,Vn=s[3].y-s[0].y,zn=s[2].x-s[1].x,Zn=s[2].y-s[1].y;for(let qn=0;qn<65;qn++){const hr=qn/64,Kn=[s[0].x+hr*Cn,s[0].y+hr*Vn],Zr=[s[1].x+hr*zn,s[1].y+hr*Zn],si=Zr[0]-Kn[0],Wr=Zr[1]-Kn[1];for(let zi=0;zi<65;zi++){const yi=zi/64,vi={x:Kn[0]+si*yi,y:Kn[1]+Wr*yi,z:0};Yt(r.projection.unproject(vi.x,vi.y),vi)}}this.elevatedGlobeVertexBuffer=e.createVertexBuffer(ce,C0.members)}{this.maxLongitudeTriangleSize=0;let ce=[],Ae=new _u;const Oe=(ve,Fe,Ye)=>{Ae.emplaceBack(ve,Fe,Ye);const ct=w[ve],Kt=w[Fe],Zt=w[Ye],Ut=Math.min(Math.min(ct,Kt),Zt),En=Math.max(Math.max(ct,Kt),Zt)-Ut;En>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=En),ce.push(Ut+En/2)};for(let ve=0;ve<64;ve++)for(let Fe=0;Fe<64;Fe++){const Ye=65*ve+Fe,ct=Ye+1,Kt=Ye+65,Zt=Kt+1;Oe(Ye,Kt,ct),Oe(ct,Kt,Zt)}[ce,Ae]=function(ve,Fe){const Ye=Array.from({length:ve.length},(Zt,Ut)=>Ut);Ye.sort((Zt,Ut)=>ve[Zt]-ve[Ut]);const ct=[],Kt=new _u;for(let Zt=0;Zt<Ye.length;Zt++){const Ut=Ye[Zt];ct.push(ve[Ut]);const En=3*Ut,Yt=En+1;Kt.emplaceBack(Fe.uint16[En],Fe.uint16[Yt],Fe.uint16[Yt+1])}return[ct,Kt]}(ce,Ae),this.elevatedGlobeTrianglesCenterLongitudes=ce,this.elevatedGlobeIndexBuffer=e.createIndexBuffer(Ae)}this.elevatedGlobeSegments=za.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,G/Ft,0,oe/Ft,0,0,D,P,0])}prepare(){const e=Object.keys(this.tiles).length!==0;if(this.tileID&&!e)return;const r=this.map.painter.context,s=r.gl;!this._dirty||this.texture instanceof iv||(this.texture?this.texture.update(this.image):(this.texture=new P0(r,this.image,s.RGBA8),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(r)}loadTile(e,r){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},r(null)):(e.state="errored",r(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){const r=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!r)return null;const s=this.elevatedGlobeTrianglesCenterLongitudes;let h=(l=e+180)+360*Math.round((s[0]-l)/360);var l;const m=new za,S=(R,N)=>{m.segments.push({vertexOffset:0,primitiveOffset:R,vertexLength:r.segments[0].vertexLength,primitiveLength:N,sortKey:void 0,vaos:{}})},O=.51*this.maxLongitudeTriangleSize;if(Math.abs(s[0]-h)<=O){const R=Xe(s,0,s.length,h+O);return R===s.length||S(R,at(s,R+1,s.length,h+360-O)-R),m}h<s[0]&&(h+=360);const z=at(s,0,s.length,h-O);if(z===s.length)return S(0,s.length),m;S(0,z-0);const w=Xe(s,z+1,s.length,h+O);return w!==s.length&&S(w,s.length-w),m}}const Qx=(Math.pow(256,2)-1)/16907520;class xy extends Bl{constructor(e,r,s,h){super(e,{layout:M0||(M0=new gl({visibility:new di(gr.layout_raster.visibility)})),paint:rx||(rx=new gl({"raster-opacity":new di(gr.paint_raster["raster-opacity"]),"raster-color":new vd(gr.paint_raster["raster-color"]),"raster-color-mix":new di(gr.paint_raster["raster-color-mix"]),"raster-color-range":new di(gr.paint_raster["raster-color-range"]),"raster-hue-rotate":new di(gr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new di(gr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new di(gr.paint_raster["raster-brightness-max"]),"raster-saturation":new di(gr.paint_raster["raster-saturation"]),"raster-contrast":new di(gr.paint_raster["raster-contrast"]),"raster-resampling":new di(gr.paint_raster["raster-resampling"]),"raster-fade-duration":new di(gr.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new di(gr.paint_raster["raster-emissive-strength"]),"raster-array-band":new di(gr.paint_raster["raster-array-band"]),"raster-elevation":new di(gr.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},r,s,h),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(e){return!(e&&e._source instanceof yy&&(e._source.onNorthPole||e._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(e){e!=="raster-color"&&e!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(e){if(!this.hasColorMap()||!this._curRampRange)return;const r=this._transitionablePaint._values["raster-color"].value.expression,[s,h]=e||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(s)&&isNaN(h)||s===this._curRampRange[0]&&h===this._curRampRange[1]||(this.colorRamp=fm({expression:r,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:s,end:h}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[s,h])}}let O0,ov,ix,R0,sg;class L0 extends Bl{constructor(e,r,s,h){super(e,{layout:O0||(O0=new gl({visibility:new di(gr["layout_raster-particle"].visibility)})),paint:ov||(ov=new gl({"raster-particle-array-band":new di(gr["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new di(gr["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new vd(gr["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new di(gr["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new di(gr["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new di(gr["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new di(gr["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new di(gr["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},r,s,h),this._updateColorRamp(),this.lastInvalidatedAt=Dt.now()}onRemove(e){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(e){return!1}_handleSpecialPaintPropertyUpdate(e){e!=="raster-particle-color"&&e!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),e==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const e=this._transitionablePaint._values["raster-particle-color"].value.expression,r=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=fm({expression:e,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:r}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Dt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class qx extends Bl{constructor(e,r){super(e,{},r,null),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(e){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}function lg(a,e,r){const s=[0,0,1],h=le.quat.identity([]);return le.quat.rotateY(h,h,r?-lr(a)+Math.PI:lr(a)),le.quat.rotateX(h,h,-lr(e)),le.vec3.transformQuat(s,s,h),le.vec3.normalize(s,s)}function ox(a,e){const r=by(a.projection,a.zoom,a.width,a.height),s=function(l,m,S,O,z){const w=new Da(S.lng-180*vp,S.lat),R=new Da(S.lng+180*vp,S.lat),N=l.project(w.lng,w.lat),P=l.project(R.lng,R.lat),D=-Math.atan2(P.y-N.y,P.x-N.x),G=o.fromLngLat(S);G.y=Me(G.y,-1+vp,1-vp);const oe=G.toLngLat(),ce=l.project(oe.lng,oe.lat),Ae=o.fromLngLat(oe);Ae.x+=vp;const Oe=Ae.toLngLat(),ve=l.project(Oe.lng,Oe.lat),Fe=ug(ve.x-ce.x,ve.y-ce.y,D),Ye=o.fromLngLat(oe);Ye.y+=vp;const ct=Ye.toLngLat(),Kt=l.project(ct.lng,ct.lat),Zt=ug(Kt.x-ce.x,Kt.y-ce.y,D),Ut=Math.abs(Fe.x)/Math.abs(Zt.y),En=le.mat4.identity([]);le.mat4.rotateZ(En,En,-D*(1-(z?0:O)));const Yt=le.mat4.identity([]);return le.mat4.scale(Yt,Yt,[1,1-(1-Ut)*O,1]),Yt[4]=-Zt.x/Zt.y*O,le.mat4.rotateZ(Yt,Yt,D),le.mat4.multiply(Yt,En,Yt),Yt}(a.projection,0,a.center,r,e),h=D0(a);return le.mat4.scale(s,s,[h,h,1]),s}function D0(a){const e=a.projection,r=by(a.projection,a.zoom,a.width,a.height),s=k0(e,a.center),h=k0(e,Da.convert(e.center));return Math.pow(2,s*r+(1-r)*h)}function by(a,e,r,s,h=1/0){const l=a.range;if(!l)return 0;const m=Math.min(h,Math.max(r,s)),S=Math.log(m/1024)/Math.LN2;return At(l[0]+S,l[1]+S,e)}const vp=1/4e4;function k0(a,e){const r=Me(e.lat,-Is,Is),s=new Da(e.lng-180*vp,r),h=new Da(e.lng+180*vp,r),l=a.project(s.lng,r),m=a.project(h.lng,r),S=o.fromLngLat(s),O=o.fromLngLat(h),z=m.x-l.x,w=m.y-l.y,R=O.x-S.x,N=O.y-S.y,P=Math.sqrt((R*R+N*N)/(z*z+w*w));return Math.log(P)/Math.LN2}function ug(a,e,r){const s=Math.cos(r),h=Math.sin(r);return{x:a*s-e*h,y:a*h+e*s}}function ax(a,e,r){le.mat4.identity(a),le.mat4.rotateZ(a,a,lr(e[2])),le.mat4.rotateX(a,a,lr(e[0])),le.mat4.rotateY(a,a,lr(e[1])),le.mat4.scale(a,a,r),le.mat4.multiply(a,a,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function cg(a,e,r,s,h,l,m,S){const O=[r[0]-e[0],r[1]-e[1],0],z=[s[0]-e[0],s[1]-e[1],0];if(le.vec3.length(O)<1e-12||le.vec3.length(z)<1e-12)return le.quat.identity(a);const w=le.vec3.cross([],O,z);le.vec3.normalize(w,w),le.vec3.subtract(z,s,e),O[2]=(l-h)*S,z[2]=(m-h)*S;const R=O;return le.vec3.cross(R,O,z),le.vec3.normalize(R,R),le.quat.rotationTo(a,w,R)}function N0(a,e,r=!1){const s=td(e.zoom),h=function(l,m,S){const O=m.worldSize,z=[l[12],l[13],l[14]],w=dc(z[1]/O),R=ld(z[0]/O),N=le.mat4.identity([]),P=yl(1,w)*O,D=yl(1,0)*O*Zo(w,m.zoom),G=1/hc(O);let oe=D*G;if(S){const ve=by(m.projection,m.zoom,m.width,m.height,1024);oe=G*m.projection.pixelSpaceConversion(m.center.lat,O,ve)}const ce=uh(w,R);le.vec3.add(ce,ce,le.vec3.scale([],le.vec3.normalize([],ce),P*oe*z[2]));const Ae=function(ve){const Fe=[ve[0],ve[1],ve[2]];let Ye=[0,1,0];const ct=le.vec3.cross([],Ye,Fe);return le.vec3.cross(Ye,Fe,ct),le.vec3.squaredLength(Ye)===0&&(Ye=[0,1,0],le.vec3.cross(ct,Fe,Ye)),le.vec3.normalize(ct,ct),le.vec3.normalize(Ye,Ye),le.vec3.normalize(Fe,Fe),[ct[0],ct[1],ct[2],0,Ye[0],Ye[1],Ye[2],0,Fe[0],Fe[1],Fe[2],0,ve[0],ve[1],ve[2],1]}(ce);le.mat4.scale(N,N,[oe,oe,oe*P]),le.mat4.translate(N,N,[-z[0],-z[1],-z[2]]);const Oe=le.mat4.multiply([],m.globeMatrix,Ae);return le.mat4.multiply(Oe,Oe,N),le.mat4.multiply(Oe,Oe,l),Oe}(a,e,r);if(s>0){const l=function(m,S){const O=S.worldSize,z=yl(1,0)*O*Zo(S.center.lat,S.zoom)/hc(O),w=yl(1,S.center.lat)*O,R=le.mat4.identity([]);return le.mat4.rotateY(R,R,lr(S.center.lng)),le.mat4.rotateX(R,R,lr(S.center.lat)),le.mat4.translate(R,R,[0,0,bc]),le.mat4.scale(R,R,[z,z,z*w]),le.mat4.translate(R,R,[S.point.x-.5*O,S.point.y-.5*O,0]),le.mat4.multiply(R,R,m),le.mat4.multiply(R,S.globeMatrix,R)}(a,e);return function(m,S,O){const z=(D,G,oe)=>{const ce=le.vec3.length(D),Ae=le.vec3.length(G),Oe=lu(D,G,oe);return le.vec3.scale(Oe,Oe,1/le.vec3.length(Oe)*$i(ce,Ae,oe))},w=z([m[0],m[1],m[2]],[S[0],S[1],S[2]],O),R=z([m[4],m[5],m[6]],[S[4],S[5],S[6]],O),N=z([m[8],m[9],m[10]],[S[8],S[9],S[10]],O),P=lu([m[12],m[13],m[14]],[S[12],S[13],S[14]],O);return[w[0],w[1],w[2],0,R[0],R[1],R[2],0,N[0],N[1],N[2],0,P[0],P[1],P[2],1]}(h,l,s)}return h}function wy(a,e,r,s){const h=uo.projectAabbCorners(s,r);let l=Number.MAX_VALUE,m=-1;for(let z=0;z<h.length;++z){const w=h[z];w[0]=(.5*w[0]+.5)*e.width,w[1]=(.5-.5*w[1])*e.height,w[2]<l&&(m=z,l=w[2])}const S=z=>new Mt(h[z][0],h[z][1]);let O;switch(m){case 0:case 6:O=[S(1),S(5),S(4),S(7),S(3),S(2),S(1)];break;case 1:case 7:O=[S(0),S(4),S(5),S(6),S(2),S(3),S(0)];break;case 3:case 5:O=[S(1),S(0),S(4),S(7),S(6),S(2),S(1)];break;default:O=[S(1),S(5),S(6),S(7),S(3),S(0),S(1)]}if(We(a,O))return l}const eb=ra([{name:"a_pos_3f",components:3,type:"Float32"}]),z0=ra([{name:"a_color_3f",components:3,type:"Float32"}]),tb=ra([{name:"a_color_4f",components:4,type:"Float32"}]),F0=ra([{name:"a_uv_2f",components:2,type:"Float32"}]),nb=ra([{name:"a_normal_3f",components:3,type:"Float32"}]),sx=ra([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),lx=ra([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),B0={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class av{constructor(e,r,s,h){this.message=(e?`${e}: `:"")+s,h&&(this.identifier=h),r!=null&&r.__line__&&(this.line=r.__line__)}}function dg(a,e){const r=a.indexOf("://")===-1;try{return new URL(a,r&&e?"http://example.com":void 0),!0}catch(s){return!1}}class Ey{constructor(e,r){this.feature=e,this.instancedDataOffset=r,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class Sy{constructor(){this.instancedDataArray=new Ld,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class sv{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(e,r){}populate(e,r,s,h){this.tileToMeter=t(s);const l=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:m,id:S,index:O,sourceLayerIndex:z}of e){const w=S!=null?S:m.properties&&m.properties.hasOwnProperty("id")?m.properties.id:void 0,R=fe(m,l);if(!this.layers[0]._featureFilter.filter(new Ts(this.zoom),R,s))continue;const N={id:w,sourceLayerIndex:z,index:O,geometry:l?R.geometry:re(m,s,h),properties:m.properties,type:m.type,patterns:{}},P=this.addFeature(N,N.geometry,R);P&&r.featureIndex.insert(m,N.geometry,O,z,this.index,this.instancesPerModel[P].instancedDataArray.length,Ft/32)}this.lookup=null}update(e,r,s,h){for(const l in this.instancesPerModel){const m=this.instancesPerModel[l];for(const S in e)m.idToFeaturesIndex.hasOwnProperty(S)&&(this.evaluate(m.features[m.idToFeaturesIndex[S]],e[S],m,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(const r in this.instancesPerModel){const s=this.instancesPerModel[r];for(const h of s.features){const l=this.layers[0],m=h.feature,S=this.canonical,O=l.paint.get("model-rotation").evaluate(m,{},S),z=l.paint.get("model-scale").evaluate(m,{},S),w=l.paint.get("model-translation").evaluate(m,{},S);le.vec3.exactEquals(h.rotation,O)&&le.vec3.exactEquals(h.scale,z)&&le.vec3.exactEquals(h.translation,w)||(this.evaluate(h,h.featureStates,s,!0),e=!0)}}return e}updateReplacement(e,r,s,h){if(r.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=r.updateTime;const l=r.getReplacementRegionsForTile(e.toUnwrapped(),!0);if(L_(this.activeReplacements,l))return!1;this.activeReplacements=l;let m=!1;for(const S in this.instancesPerModel){const O=this.instancesPerModel[S],z=O.instancedDataArray;for(const w of O.features){const R=w.instancedDataOffset,N=w.instancedDataCount;for(let P=0;P<N;P++){const D=16*(P+R);let G=z.float32[D+0];const oe=G>Ft;G=oe?G-Ft:G;const ce=Math.floor(G),Ae=z.float32[D+1];let Oe=!1;for(const ve of this.activeReplacements)if(!O_(ve,s,B0.Model,h)&&!(ve.min.x>ce||ce>ve.max.x||ve.min.y>Ae||Ae>ve.max.y)&&(Oe=Mh(wc(ce,Ae,e.canonical,ve.footprintTileId.canonical),ve.footprint),Oe))break;z.float32[D]=Oe?G+Ft:G,m=m||Oe!==oe}}}return m}isEmpty(){for(const e in this.instancesPerModel)if(this.instancesPerModel[e].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(const r in this.instancesPerModel){const s=this.instancesPerModel[r];s.instancedDataArray.length<0||s.instancedDataArray.length===0||(s.instancedDataBuffer?s.instancedDataBuffer.updateData(s.instancedDataArray):s.instancedDataBuffer=e.createVertexBuffer(s.instancedDataArray,sx.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const r in this.instancesPerModel){const s=this.instancesPerModel[r];s.instancedDataArray.length!==0&&s.instancedDataBuffer&&s.instancedDataBuffer.destroy()}const e=this.layers[0].modelManager;if(e&&this.modelUris)for(const r of this.modelUris)e.removeModel(r,"")}addFeature(e,r,s){const h=this.layers[0],l=h.layout.get("model-id").evaluate(s,{},this.canonical);if(!l)return cn(`modelId is not evaluated for layer ${h.id} and it is not going to get rendered.`),l;dg(l,!1)&&(this.modelUris.includes(l)||this.modelUris.push(l)),this.instancesPerModel[l]||(this.instancesPerModel[l]=new Sy);const m=this.instancesPerModel[l],S=m.instancedDataArray,O=new Ey(s,S.length);for(const z of r)for(const w of z){if(w.x<0||w.x>=Ft||w.y<0||w.y>=Ft)continue;const R=(this.lookupDim-1)/Ft,N=this.lookupDim*(w.y*R|0)+w.x*R|0;if(this.lookup){if(this.lookup[N]!==0)continue;this.lookup[N]=1}this.instanceCount++;const P=S.length;S.resize(P+1),m.instancesEvaluatedElevation.push(0),S.float32[16*P]=w.x,S.float32[16*P+1]=w.y}return O.instancedDataCount=m.instancedDataArray.length-O.instancedDataOffset,O.instancedDataCount>0&&(e.id&&(m.idToFeaturesIndex[e.id]=m.features.length),m.features.push(O),this.evaluate(O,{},m,!1)),l}getModelUris(){return this.modelUris}evaluate(e,r,s,h){const l=this.layers[0],m=e.feature,S=this.canonical,O=e.rotation=l.paint.get("model-rotation").evaluate(m,r,S),z=e.scale=l.paint.get("model-scale").evaluate(m,r,S),w=e.translation=l.paint.get("model-translation").evaluate(m,r,S),R=l.paint.get("model-color").evaluate(m,r,S);R.a=l.paint.get("model-color-mix-intensity").evaluate(m,r,S);const N=[];this.maxVerticalOffset<w[2]&&(this.maxVerticalOffset=w[2]),this.maxScale=Math.max(Math.max(this.maxScale,z[0]),Math.max(z[1],z[2])),ax(N,O,z);const P=Math.round(100*R.a)+R.b/1.05;for(let D=0;D<e.instancedDataCount;++D){const G=e.instancedDataOffset+D,oe=16*G,ce=s.instancedDataArray.float32;let Ae=0;h&&(Ae=ce[oe+6]-s.instancesEvaluatedElevation[G]);const Oe=0|ce[oe+1];ce[oe]=(0|ce[oe])+R.r/1.05,ce[oe+1]=Oe+R.g/1.05,ce[oe+2]=P,ce[oe+3]=1/(S.z>10?this.tileToMeter:t(S,Oe)),ce[oe+4]=w[0],ce[oe+5]=w[1],ce[oe+6]=w[2]+Ae,ce[oe+7]=N[0],ce[oe+8]=N[1],ce[oe+9]=N[2],ce[oe+10]=N[4],ce[oe+11]=N[5],ce[oe+12]=N[6],ce[oe+13]=N[8],ce[oe+14]=N[9],ce[oe+15]=N[10],s.instancesEvaluatedElevation[G]=w[2]}}}let j0,ux;Fi(sv,"ModelBucket",{omit:["layers"]}),Fi(Sy,"PerModelAttributes"),Fi(Ey,"ModelFeature");const Sm=64,Zp={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function Ah(a,e,r,s,h,l,m,S,O,z=!1){const w=r.zoom,R=r.project(s),N=Zo(s.lat,w),P=1/N;le.mat4.identity(a),le.mat4.translate(a,a,[R.x+m[0]*P,R.y+m[1]*P,m[2]]);let D=1,G=1;const oe=r.worldSize;if(z){if(r.projection.name==="mercator"){let ve=0;r.elevation&&(ve=r.elevation.getAtPointOrZero(new o(R.x/oe,R.y/oe),0));const Fe=le.vec4.transformMat4([],[R.x,R.y,ve,1],r.projMatrix)[3]/r.cameraToCenterDistance;D=Fe,G=Fe*Zo(r.center.lat,w)}else if(r.projection.name==="globe"){const ve=N0(a,r),Fe=le.mat4.multiply([],r.projMatrix,ve),Ye=[0,0,0,1];le.vec4.transformMat4(Ye,Ye,Fe);const ct=Ye[3]/r.cameraToCenterDistance,Kt=td(w),Zt=r.projection.pixelsPerMeter(s.lat,oe)*Zo(s.lat,w),Ut=r.projection.pixelsPerMeter(r.center.lat,oe)*Zo(r.center.lat,w);D=ct/$i(Zt,hm(r.center.lat),Kt),G=ct*N/Zt,D*=Ut,G*=Ut}}else D=P;le.mat4.scale(a,a,[D,D,G]);const ce=[...a],Ae=e.orientation,Oe=[];if(ax(Oe,[Ae[0]+h[0],Ae[1]+h[1],Ae[2]+h[2]],l),le.mat4.multiply(a,ce,Oe),S&&r.elevation){let ve=0;const Fe=[];if(O&&r.elevation){ve=function(Kt,Zt,Ut,En,Yt){const Cn=Zt.elevation;if(!Cn)return 0;const Vn=uo.projectAabbCorners(Ut,En),zn=yl(1,Yt.lat)*Zt.worldSize,Zn=function(lo,ji){const Yi=[0,0,1],Yo=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const ga of Yo){const Ea=lo[ga.corners[0]],pa=lo[ga.corners[1]],Oa=lo[ga.corners[2]],ka=[pa[0]-Ea[0],pa[1]-Ea[1],ji*(pa[2]-Ea[2])],el=le.vec3.cross(ka,ka,[Oa[0]-Ea[0],Oa[1]-Ea[1],ji*(Oa[2]-Ea[2])]);le.vec3.normalize(el,el),ga.dotProductWithUp=le.vec3.dot(el,Yi)}return Yo.sort((ga,Ea)=>ga.dotProductWithUp-Ea.dotProductWithUp),Yo[0].corners}(Vn,zn),qn=Vn[Zn[0]],hr=Vn[Zn[1]],Kn=Vn[Zn[2]],Zr=Vn[Zn[3]],si=Cn.getAtPointOrZero(new o(qn[0]/Zt.worldSize,qn[1]/Zt.worldSize),0),Wr=Cn.getAtPointOrZero(new o(hr[0]/Zt.worldSize,hr[1]/Zt.worldSize),0),zi=Cn.getAtPointOrZero(new o(Kn[0]/Zt.worldSize,Kn[1]/Zt.worldSize),0),yi=Cn.getAtPointOrZero(new o(Zr[0]/Zt.worldSize,Zr[1]/Zt.worldSize),0),vi=(si+yi)/2,li=(Wr+zi)/2;return vi>li?Wr<zi?cg(Kt,hr,Zr,qn,Wr,yi,si,zn):cg(Kt,Kn,qn,Zr,zi,si,yi,zn):si<yi?cg(Kt,qn,hr,Kn,si,Wr,zi,zn):cg(Kt,Zr,Kn,hr,yi,zi,Wr,zn),Math.max(vi,li)}(Fe,r,e.aabb,a,s);const Ye=le.mat4.fromQuat([],Fe),ct=le.mat4.multiply([],Ye,Oe);le.mat4.multiply(a,ce,ct)}else ve=r.elevation.getAtPointOrZero(new o(R.x/oe,R.y/oe),0);ve!==0&&(a[14]+=ve)}}function dd(a,e,r=!1){a.uploaded||(a.gfxTexture=new P0(e,a.image,r?e.gl.R8:e.gl.RGBA8,{useMipmap:a.sampler.minFilter>=e.gl.NEAREST_MIPMAP_NEAREST}),a.uploaded=!0,a.image=null)}function U0(a,e,r){a.indexBuffer=e.createIndexBuffer(a.indexArray,!1,!0),a.vertexBuffer=e.createVertexBuffer(a.vertexArray,eb.members,!1,!0),a.normalArray&&(a.normalBuffer=e.createVertexBuffer(a.normalArray,nb.members,!1,!0)),a.texcoordArray&&(a.texcoordBuffer=e.createVertexBuffer(a.texcoordArray,F0.members,!1,!0)),a.colorArray&&(a.colorBuffer=e.createVertexBuffer(a.colorArray,(a.colorArray.bytesPerElement===12?z0:tb).members,!1,!0)),a.featureArray&&(a.pbrBuffer=e.createVertexBuffer(a.featureArray,lx.members,!0)),a.segments=za.simpleSegment(0,0,a.vertexArray.length,a.indexArray.length);const s=a.material;s.pbrMetallicRoughness.baseColorTexture&&dd(s.pbrMetallicRoughness.baseColorTexture,e),s.pbrMetallicRoughness.metallicRoughnessTexture&&dd(s.pbrMetallicRoughness.metallicRoughnessTexture,e),s.normalTexture&&dd(s.normalTexture,e),s.occlusionTexture&&dd(s.occlusionTexture,e,r),s.emissionTexture&&dd(s.emissionTexture,e)}function Ph(a,e,r){if(a.meshes)for(const s of a.meshes)U0(s,e,r);if(a.children)for(const s of a.children)Ph(s,e,r)}function ys(a){if(a.meshes)for(const e of a.meshes)e.indexArray.destroy(),e.vertexArray.destroy(),e.colorArray&&e.colorArray.destroy(),e.normalArray&&e.normalArray.destroy(),e.texcoordArray&&e.texcoordArray.destroy(),e.featureArray&&e.featureArray.destroy();if(a.children)for(const e of a.children)ys(e)}function hg(a){if(a.meshes)for(const r of a.meshes)r.vertexBuffer&&(r.vertexBuffer.destroy(),r.indexBuffer.destroy(),r.normalBuffer&&r.normalBuffer.destroy(),r.texcoordBuffer&&r.texcoordBuffer.destroy(),r.colorBuffer&&r.colorBuffer.destroy(),r.pbrBuffer&&r.pbrBuffer.destroy(),r.segments.destroy(),r.material&&((e=r.material).pbrMetallicRoughness.baseColorTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),e.pbrMetallicRoughness.metallicRoughnessTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),e.normalTexture&&e.normalTexture.gfxTexture&&e.normalTexture.gfxTexture.destroy(),e.emissionTexture&&e.emissionTexture.gfxTexture&&e.emissionTexture.gfxTexture.destroy(),e.occlusionTexture&&e.occlusionTexture.gfxTexture&&e.occlusionTexture.gfxTexture.destroy()));var e;if(a.children)for(const r of a.children)hg(r)}class Wp{constructor(e,r,s){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=s}static create(e,r,s){const h=s||e.findDEMTileFor(r);if(!h||!h.dem)return;const l=h.dem,m=h.tileID,S=1<<r.canonical.z-m.canonical.z;return new Wp(h,l.dim/Ft/S,[(r.canonical.x/S-m.canonical.x)*l.dim,(r.canonical.y/S-m.canonical.y)*l.dim])}tileCoordToPixel(e,r){const s=r*this._scale+this._offset[1],h=Math.floor(e*this._scale+this._offset[0]),l=Math.floor(s);return new Mt(h,l)}getElevationAt(e,r,s,h){const l=e*this._scale+this._offset[0],m=r*this._scale+this._offset[1],S=Math.floor(l),O=Math.floor(m),z=this._dem;return h=!!h,s?$i($i(z.get(S,O,h),z.get(S,O+1,h),m-O),$i(z.get(S+1,O,h),z.get(S+1,O+1,h),m-O),l-S):z.get(S,O,h)}getElevationAtPixel(e,r,s){return this._dem.get(e,r,!!s)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*yl(1,e)*this._dem.stride}}const Kf=new Float32Array(262144),rc=new Uint8Array(262144);function Ty(a){let e=0;if(a.meshes)for(const r of a.meshes)e=Math.max(e,r.aabb.max[2]);if(a.children)for(const r of a.children)e=Math.max(e,Ty(r));return e}function Oh(a,e,r){if(a.meshes)for(const s of a.meshes){if(s.aabb.min[0]===1/0)continue;const h=uo.applyTransform(s.aabb,a.matrix);r.insert(e,h.min[0],h.min[1],h.max[0],h.max[1])}if(a.children)for(const s of a.children)Oh(s,e,r)}const Rh=["","wall","door","roof","window","lamp","logo"];class Hp{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:e.id,geometry:[],properties:{height:Ty(e)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new uo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let e=0;const r=new uo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const s of this.node.meshes)this.node.lightMeshIndex!==e&&(s.transformedAabb=uo.applyTransformFast(s.aabb,this.node.matrix),r.encapsulate(s.transformedAabb)),e++;this.aabb=r}return this.aabb}}class Lu{constructor(e,r,s,h,l,m,S){this.id=s,this.layers=e,this.layerIds=this.layers.map(O=>O.fqid),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.modelTraits|=Zp.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,h&&(this.modelTraits|=Zp.HasMapboxMeshFeatures),l&&(this.modelTraits|=Zp.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=m,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const O of r)this.nodesInfo.push(new Hp(O)),Oh(O,S.featureIndexArray.length,S.grid),S.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,S.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(e,r){for(const s of this.getNodesInfo()){const h=s.node;h.footprint&&r.push({footprint:h.footprint,id:e})}}update(e){const r=Object.keys(e).length!==0;if(r&&!this.stateDependentLayers.length)return;const s=r?this.stateDependentLayers:this.layers;if(!or(e,this.states))for(const h of s)this.evaluate(h,e);this.states=structuredClone(e)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;const r=this.getNodesInfo();for(const s of r){const h=s.node;this.uploaded?this.updatePbrBuffer(h):Ph(h,e,!0)}for(const s of r)ys(s.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let r=!1;if(!e.meshes)return r;for(const s of e.meshes)s.pbrBuffer&&(s.pbrBuffer.updateData(s.featureArray),r=!0);return r}needsReEvaluation(e,r,s){const h=e.transform.projectionOptions,l=e.style.getBrightness(),m=this.brightness!==l;if(!this.uploaded||this.dirty||h.name!==this.projection.name||Kp(s.paint.get("model-color").value,m)||Kp(s.paint.get("model-color-mix-intensity").value,m)||Kp(s.paint.get("model-roughness").value,m)||Kp(s.paint.get("model-emissive-strength").value,m)||Kp(s.paint.get("model-height-based-emissive-strength-multiplier").value,m)){this.projection=h,this.brightness=l;const S=this.getNodesInfo();for(const O of S)O.state=null;return!0}return!1}evaluateScale(e,r){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;const s=this.getNodesInfo(),h=this.id.canonical;for(const l of s){const m=l.feature;l.evaluatedScale=r.paint.get("model-scale").evaluate(m,{},h)}}evaluate(e,r){const s=this.getNodesInfo();for(const h of s){if(!h.node.meshes)continue;const l=h.feature,m=r&&r[l.id];if(or(m,h.state))continue;h.state=structuredClone(m);const S=h.node.meshes&&h.node.meshes[0].featureData,O=h.evaluatedColor[2],z=h.evaluatedRMEA[2],w=this.id.canonical;if(h.hasTranslucentParts=!1,S){for(let R=0;R<Rh.length;R++){const N=Rh[R];N.length&&(l.properties.part=N);const P=e.paint.get("model-color").evaluate(l,m,w).toRenderColor(null),D=e.paint.get("model-color-mix-intensity").evaluate(l,m,w);h.evaluatedColor[R]=[P.r,P.g,P.b,D],h.evaluatedRMEA[R][0]=e.paint.get("model-roughness").evaluate(l,m,w),h.evaluatedRMEA[R][2]=e.paint.get("model-emissive-strength").evaluate(l,m,w),h.evaluatedRMEA[R][3]=P.a,h.emissionHeightBasedParams[R]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(l,m,w),!h.hasTranslucentParts&&P.a<1&&(h.hasTranslucentParts=!0)}delete l.properties.part,yp(h,O!==h.evaluatedColor[2]||z!==h.evaluatedRMEA[2],this.modelTraits)}else h.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(l,m,w);h.evaluatedScale=e.paint.get("model-scale").evaluate(l,m,w),this.updatePbrBuffer(h.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,r,s,h){const l=e.findDEMTileFor(s);if(l&&(l.tileID.canonical!==this.terrainTile||r!==this.terrainExaggeration)){if(l.dem&&l.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=l.tileID.overscaledZ;const m=Wp.create(e,s,l);if(!m)return;this.modelTraits&Zp.HasMapboxMeshFeatures&&this.updateDEM(e,m,s,h);for(const S of this.getNodesInfo()){const O=S.node;if(!O.footprint||!O.footprint.vertices||!O.footprint.vertices.length)continue;const z=O.footprint.vertices;let w=m.getElevationAt(z[0].x,z[0].y,!0,!0);for(let R=1;R<z.length;R++)w=Math.min(w,m.getElevationAt(z[R].x,z[R].y,!0,!0));O.elevation=w}}this.terrainTile=l.tileID.canonical,this.terrainExaggeration=r}}updateDEM(e,r,s,h){let l=r._dem._modifiedForSources[h];if(l===void 0&&(r._dem._modifiedForSources[h]=[],l=r._dem._modifiedForSources[h]),l.includes(s.canonical))return;const m=r._dem.dim;l.push(s.canonical);let S=!1;for(const O of this.getNodesInfo()){const z=O.node;if(!z.footprint||!z.footprint.grid)continue;const w=z.footprint.grid,R=r.tileCoordToPixel(w.min.x,w.min.y),N=r.tileCoordToPixel(w.max.x,w.max.y),P=Math.min(Math.min(m-N.y,R.x),Math.min(R.y,m-N.x));if(P<0)continue;const D=Me(P,2,5);let G=Math.max(0,R.x-D),oe=Math.max(0,R.y-D),ce=Math.min(N.x+D,m-1),Ae=Math.min(N.y+D,m-1);for(let Ye=oe;Ye<=Ae;++Ye)for(let ct=G;ct<=ce;++ct)rc[Ye*m+ct]=255;let Oe=0,ve=0;for(let Ye=0;Ye<w.cellsY;++Ye)for(let ct=0;ct<w.cellsX;++ct){if(!w.cells[Ye*w.cellsX+ct])continue;const Kt=r.tileCoordToPixel(w.min.x+ct/w.xScale,w.min.y+Ye/w.yScale),Zt=r.tileCoordToPixel(w.min.x+(ct+1)/w.xScale,w.min.y+(Ye+1)/w.yScale);for(let Ut=Kt.y;Ut<=Math.min(Zt.y+1,m-1);++Ut)for(let En=Kt.x;En<=Math.min(Zt.x+1,m-1);++En)rc[Ut*m+En]===255&&(rc[Ut*m+En]=0,Oe+=r.getElevationAtPixel(En,Ut),ve++)}const Fe=Oe/ve;G=Math.max(1,R.x-D),oe=Math.max(1,R.y-D),ce=Math.min(N.x+D,m-2),Ae=Math.min(N.y+D,m-2),S=!0;for(let Ye=oe;Ye<=Ae;++Ye)for(let ct=G;ct<=ce;++ct)rc[Ye*m+ct]===0&&(Kf[Ye*m+ct]=r._dem.set(ct,Ye,Fe));for(let Ye=1;Ye<D;++Ye){G=Math.max(1,R.x-Ye),oe=Math.max(1,R.y-Ye),ce=Math.min(N.x+Ye,m-2),Ae=Math.min(N.y+Ye,m-2);for(let ct=oe;ct<=Ae;++ct)for(let Kt=G;Kt<=ce;++Kt){const Zt=ct*m+Kt;if(rc[Zt]===255){let Ut=0,En=0,Yt=-1,Cn=-1;for(let Vn=-1;Vn<=1;++Vn)for(let zn=-1;zn<=1;++zn){const Zn=(ct+Vn)*m+Kt+zn;if(rc[Zn]>=Ye)continue;const qn=Kf[Zn],hr=Math.abs(qn);hr>En&&(Ut=qn,En=hr,Yt=zn,Cn=Vn)}if(En>.1){const Vn=1-(Ye+.5*Math.abs(Yt*Cn))/D;let zn=r._dem.get(Kt,ct)+Ut*Vn;const Zn=r._dem.get(Kt+Yt,ct+Cn),qn=r._dem.get(Kt-Yt,ct-Cn,!0);(zn-Zn)*(zn-qn)>0&&(zn=(Zn+qn)/2),Kf[Zt]=r._dem.set(Kt,ct,zn),rc[Zt]=Ye}}}}}S&&(r._demTile.needsDEMTextureUpload=!0,r._dem._timestamp=Dt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const e=this.getNodesInfo();for(const r of e)ys(r.node),hg(r.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(e,r){if(r.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=r.updateTime;const s=r.getReplacementRegionsForTile(e.toUnwrapped()),h=this.getNodesInfo();for(let l=0;l<this.nodesInfo.length;l++){const m=h[l].node;h[l].hiddenByReplacement=!!m.footprint&&!s.find(S=>S.footprint===m.footprint)}}getHeightAtTileCoord(e,r){const s=this.getNodesInfo(),h=[],l=[0,0,0],m=le.mat4.identity([]);for(let S=0;S<this.nodesInfo.length;S++){const O=s[S],z=O.node.meshes[0],w=z.transformedAabb;if(e<w.min[0]||r<w.min[1]||e>w.max[0]||r>w.max[1])continue;if(O.node.hidden===!0)return{height:1/0,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};le.mat4.invert(m,O.node.matrix),l[0]=e,l[1]=r,le.vec3.transformMat4(l,l,m);const R=(l[0]-z.aabb.min[0])/(z.aabb.max[0]-z.aabb.min[0])*Sm|0,N=Math.min(63,(l[1]-z.aabb.min[1])/(z.aabb.max[1]-z.aabb.min[1])*Sm|0)*Sm+Math.min(63,R),P=z.heightmap[N];if(!(P<0&&O.node.footprint))return O.hiddenByReplacement?void 0:{height:P,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};if(O.node.footprint.grid.query(new Mt(e,r),new Mt(e,r),h),h.length>0)return{height:void 0,maxHeight:O.feature.properties.height,hidden:O.hiddenByReplacement,verticalScale:O.evaluatedScale[2]}}}}function Kp(a,e){return!a.isLightConstant&&e}function lv(a,e,r,s,h,l,m,S){let O=(61440&e|(61440&e)>>4)>>8,z=(3840&e|(3840&e)>>4)>>4,w=240&e|(240&e)>>4;r[3]>0&&(O=$i(O,255*r[0],r[3]),z=$i(z,255*r[1],r[3]),w=$i(w,255*r[2],r[3]));const R=O<<8|z,N=w<<8|Math.floor(255*s[3]),P=function(Ye){const ct=Me(Ye,0,2);return Math.min(Math.round(.5*ct*255),255)}(s[2])<<8|15*s[0]<<4|15*s[1],D=Me(h[0],0,1),G=Me(h[1],0,1),oe=Me(h[2],0,1),ce=Me(h[3],0,1);let Ae,Oe,ve,Fe;if(D!==G&&m!==l&&G!==D){const Ye=m-l;Oe=1/(Ye*(G-D)),ve=-(l+Ye*D)/(Ye*(G-D));const ct=Me(h[4],-1,1);Fe=Math.pow(10,ct),Ae=255*oe<<8|255*ce}else Ae=65535,Oe=0,ve=1,Fe=1;if(a.emplaceBack(R,N,P,Ae,Oe,ve,Fe),S){const Ye=S.length;S.clear();for(let ct=0;ct<Ye;ct++)S.emplaceBack(R,N,P,Ae,Oe,ve,Fe)}}function yp(a,e,r){const s=a.node;let h=0;const l=r&Zp.HasMeshoptCompression;for(const m of s.meshes){if(s.lights&&s.lightMeshIndex===h||!m.featureData)continue;m.featureArray=new kf,m.featureArray.reserve(m.featureData.length);let S=e;for(const O of m.featureData){const z=l?65535&O:O>>16&65535,w=l?O>>16&65535:65535&O,R=(15&w)<8?15&w:0,N=a.evaluatedRMEA[R],P=a.evaluatedColor[R],D=a.emissionHeightBasedParams[R];let G;if(S&&R===2&&s.lights&&(G=new kf,G.resize(10*s.lights.length)),lv(m.featureArray,z,P,N,D,m.aabb.min[2],m.aabb.max[2],G),G&&S){S=!1;const oe=s.meshes[s.lightMeshIndex];oe.featureArray=G,oe.featureArray._trim()}}m.featureArray._trim(),h++}}function V0(a,e,r,s){const h=1<<a.z;e.lat=dc((s/Ft+a.y)/h),e.lng=ld((r/Ft+a.x)/h)}Fi(Lu,"Tiled3dModelBucket",{omit:["layers"]}),Fi(Hp,"Tiled3dModelFeature");const Yf={circle:class extends Bl{constructor(a,e,r,s){super(a,{layout:ti||(ti=new gl({"circle-sort-key":new Ni(gr.layout_circle["circle-sort-key"]),"circle-elevation-reference":new di(gr.layout_circle["circle-elevation-reference"]),visibility:new di(gr.layout_circle.visibility)})),paint:ir||(ir=new gl({"circle-radius":new Ni(gr.paint_circle["circle-radius"]),"circle-color":new Ni(gr.paint_circle["circle-color"]),"circle-blur":new Ni(gr.paint_circle["circle-blur"]),"circle-opacity":new Ni(gr.paint_circle["circle-opacity"]),"circle-translate":new di(gr.paint_circle["circle-translate"]),"circle-translate-anchor":new di(gr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new di(gr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new di(gr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ni(gr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ni(gr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ni(gr.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new di(gr.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s)}createBucket(a){return new et(a)}queryRadius(a){const e=a;return Or("circle-radius",this,e)+Or("circle-stroke-width",this,e)+kr(this.paint.get("circle-translate"))}queryIntersectsFeature(a,e,r,s,h,l,m,S){const O=Mr(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),l.angle,a.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return fp(a,s,l,m,S,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",O,z)}getProgramIds(){return["circle"]}getDefaultProgramParams(a,e,r){const s=Wl(this);return{config:new Zd(this,{zoom:e,lut:r}),defines:s,overrideFog:!1}}},heatmap:class extends Bl{createBucket(a){return new Mg(a)}constructor(a,e,r,s){super(a,{layout:Vm||(Vm=new gl({visibility:new di(gr.layout_heatmap.visibility)})),paint:Kd||(Kd=new gl({"heatmap-radius":new Ni(gr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ni(gr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new di(gr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vd(gr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new di(gr.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Or("heatmap-radius",this,a)}queryIntersectsFeature(a,e,r,s,h,l,m,S){const O=this.paint.get("heatmap-radius").evaluate(e,r);return fp(a,s,l,m,S,!0,!0,new Mt(0,0),O)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(a,e,r){return a==="heatmap"?{config:new Zd(this,{zoom:e,lut:r}),overrideFog:!1}:{}}},hillshade:class extends Bl{constructor(a,e,r,s){super(a,{layout:S_||(S_=new gl({visibility:new di(gr.layout_hillshade.visibility)})),paint:Cg||(Cg=new gl({"hillshade-illumination-direction":new di(gr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new di(gr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new di(gr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new di(gr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new di(gr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new di(gr.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new di(gr.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(a,e,r){return{overrideFog:!1}}},fill:class extends Bl{constructor(a,e,r,s){super(a,{layout:to||(to=new gl({"fill-sort-key":new Ni(gr.layout_fill["fill-sort-key"]),visibility:new di(gr.layout_fill.visibility),"fill-elevation-reference":new di(gr.layout_fill["fill-elevation-reference"])})),paint:Ko||(Ko=new gl({"fill-antialias":new di(gr.paint_fill["fill-antialias"]),"fill-opacity":new Ni(gr.paint_fill["fill-opacity"]),"fill-color":new Ni(gr.paint_fill["fill-color"]),"fill-outline-color":new Ni(gr.paint_fill["fill-outline-color"]),"fill-translate":new di(gr.paint_fill["fill-translate"]),"fill-translate-anchor":new di(gr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ni(gr.paint_fill["fill-pattern"]),"fill-emissive-strength":new di(gr.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ni(gr.paint_fill["fill-z-offset"]),"fill-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s)}getProgramIds(){const a=this.paint.get("fill-pattern"),e=a&&a.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getDefaultProgramParams(a,e,r){return{config:new Zd(this,{zoom:e,lut:r}),overrideFog:!1}}recalculate(a,e){super.recalculate(a,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new bi(a)}queryRadius(){return kr(this.paint.get("fill-translate"))}queryIntersectsFeature(a,e,r,s,h,l){return!a.queryGeometry.isAboveHorizon&&it(Yn(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),l.angle,a.pixelToTileUnitsFactor),s)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Bl{constructor(a,e,r,s){super(a,{layout:Fv||(Fv=new gl({visibility:new di(gr["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new di(gr["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:kd||(kd=new gl({"fill-extrusion-opacity":new di(gr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new di(gr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new di(gr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new di(gr["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new di(gr["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new di(gr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new di(gr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new di(gr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new di(gr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new di(gr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new di(gr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new di(gr["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new di(gr["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new di(gr["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new di(gr["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new di(gr["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new di(gr["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ni(gr["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new di(gr["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new vm(a)}queryRadius(){return kr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(a,e,r,s,h,l,m,S,O){const z=Mr(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),l.angle,a.pixelToTileUnitsFactor),w=this.paint.get("fill-extrusion-height").evaluate(e,r),R=this.paint.get("fill-extrusion-base").evaluate(e,r),N=[0,0],P=S&&l.elevation,D=l.elevation?l.elevation.exaggeration():1,G=a.tile.getBucket(this);if(P&&G instanceof vm){const ve=G.centroidVertexArray,Fe=O+1;Fe<ve.length&&(N[0]=ve.geta_centroid_pos0(Fe),N[1]=ve.geta_centroid_pos1(Fe))}if(N[0]===0&&N[1]===1)return!1;l.projection.name==="globe"&&(s=jg([s],[new Mt(0,0),new Mt(Ft,Ft)],a.tileID.canonical).map(ve=>ve.polygon).flat());const oe=P?S:null,[ce,Ae]=function(ve,Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn){return ve.projection.name==="globe"?function(zn,Zn,qn,hr,Kn,Zr,si,Wr,zi,yi,vi){const li=[],lo=[],ji=zn.projection.upVectorScale(vi,zn.center.lat,zn.worldSize).metersToTile,Yi=[0,0,0,1],Yo=[0,0,0,1],ga=(pa,Oa,ka,el)=>{pa[0]=Oa,pa[1]=ka,pa[2]=el,pa[3]=1},Ea=Bg();qn>0&&(qn+=Ea),hr+=Ea;for(const pa of Zn){const Oa=[],ka=[];for(const el of pa){const Gs=el.x+Kn.x,sa=el.y+Kn.y,Ds=zn.projection.projectTilePoint(Gs,sa,vi),Ns=zn.projection.upVector(vi,el.x,el.y);let Tl=qn,Au=hr;if(si){const vu=Jh(Gs,sa,qn,hr,si,Wr,zi,yi);Tl+=vu.base,Au+=vu.top}qn!==0?ga(Yi,Ds.x+Ns[0]*ji*Tl,Ds.y+Ns[1]*ji*Tl,Ds.z+Ns[2]*ji*Tl):ga(Yi,Ds.x,Ds.y,Ds.z),ga(Yo,Ds.x+Ns[0]*ji*Au,Ds.y+Ns[1]*ji*Au,Ds.z+Ns[2]*ji*Au),le.vec3.transformMat4(Yi,Yi,Zr),le.vec3.transformMat4(Yo,Yo,Zr),Oa.push(new Dd(Yi[0],Yi[1],Yi[2])),ka.push(new Dd(Yo[0],Yo[1],Yo[2]))}li.push(Oa),lo.push(ka)}return[li,lo]}(ve,Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn,Vn):Ut?function(zn,Zn,qn,hr,Kn,Zr,si,Wr,zi){const yi=[],vi=[],li=[0,0,0,1];for(const lo of zn){const ji=[],Yi=[];for(const Yo of lo){const ga=Yo.x+hr.x,Ea=Yo.y+hr.y,pa=Jh(ga,Ea,Zn,qn,Zr,si,Wr,zi);li[0]=ga,li[1]=Ea,li[2]=pa.base,li[3]=1,le.vec4.transformMat4(li,li,Kn),li[3]=Math.max(li[3],1e-5);const Oa=new Dd(li[0]/li[3],li[1]/li[3],li[2]/li[3]);li[0]=ga,li[1]=Ea,li[2]=pa.top,li[3]=1,le.vec4.transformMat4(li,li,Kn),li[3]=Math.max(li[3],1e-5);const ka=new Dd(li[0]/li[3],li[1]/li[3],li[2]/li[3]);ji.push(Oa),Yi.push(ka)}yi.push(ji),vi.push(Yi)}return[yi,vi]}(Fe,Ye,ct,Kt,Zt,Ut,En,Yt,Cn):function(zn,Zn,qn,hr,Kn){const Zr=[],si=[],Wr=Kn[8]*Zn,zi=Kn[9]*Zn,yi=Kn[10]*Zn,vi=Kn[11]*Zn,li=Kn[8]*qn,lo=Kn[9]*qn,ji=Kn[10]*qn,Yi=Kn[11]*qn;for(const Yo of zn){const ga=[],Ea=[];for(const pa of Yo){const Oa=pa.x+hr.x,ka=pa.y+hr.y,el=Kn[0]*Oa+Kn[4]*ka+Kn[12],Gs=Kn[1]*Oa+Kn[5]*ka+Kn[13],sa=Kn[2]*Oa+Kn[6]*ka+Kn[14],Ds=Kn[3]*Oa+Kn[7]*ka+Kn[15],Ns=el+Wr,Tl=Gs+zi,Au=sa+yi,vu=Math.max(Ds+vi,1e-5),Du=el+li,Xl=Gs+lo,ku=sa+ji,ac=Math.max(Ds+Yi,1e-5);ga.push(new Dd(Ns/vu,Tl/vu,Au/vu)),Ea.push(new Dd(Du/ac,Xl/ac,ku/ac))}Zr.push(ga),si.push(Ea)}return[Zr,si]}(Fe,Ye,ct,Kt,Zt)}(l,s,R,w,z,m,oe,N,D,l.center.lat,a.tileID.canonical),Oe=a.queryGeometry;return function(ve,Fe,Ye){let ct=1/0;it(Ye,Fe)&&(ct=Nd(Ye,Fe[0]));for(let Kt=0;Kt<Fe.length;Kt++){const Zt=Fe[Kt],Ut=ve[Kt];for(let En=0;En<Zt.length-1;En++){const Yt=Zt[En],Cn=[Yt,Zt[En+1],Ut[En+1],Ut[En],Yt];We(Ye,Cn)&&(ct=Math.min(ct,Nd(Ye,Cn)))}}return ct!==1/0&&ct}(ce,Ae,Oe.isPointQuery()?Oe.screenBounds:Oe.screenGeometry)}},line:class extends Bl{constructor(a,e,r,s){const h=i0();super(a,h,e,r,s),h.layout&&(this.layout=new Qu(h.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Wi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,e){super.recalculate(a,e),this.paint._values["line-floorwidth"]=(()=>{if(Bp)return Bp;const r=i0();return Bp=new Gg(r.paint.properties["line-width"].specification),Bp.useIntegerZoom=!0,Bp})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ug(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(a,e,r){const s=Zv(this);return{config:new Zd(this,{zoom:e,lut:r}),defines:s,overrideFog:!1}}queryRadius(a){const e=a,r=Wv(Or("line-width",this,e),Or("line-gap-width",this,e)),s=Or("line-offset",this,e);return r/2+Math.abs(s)+kr(this.paint.get("line-translate"))}queryIntersectsFeature(a,e,r,s,h,l){if(a.queryGeometry.isAboveHorizon)return!1;const m=Yn(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),l.angle,a.pixelToTileUnitsFactor),S=a.pixelToTileUnitsFactor/2*Wv(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),O=this.paint.get("line-offset").evaluate(e,r);return O&&(s=function(z,w){const R=[],N=new Mt(0,0);for(let P=0;P<z.length;P++){const D=z[P],G=[];for(let oe=0;oe<D.length;oe++){const ce=D[oe],Ae=D[oe+1],Oe=oe===0?N:ce.sub(D[oe-1])._unit()._perp(),ve=oe===D.length-1?N:Ae.sub(ce)._unit()._perp(),Fe=Oe._add(ve)._unit();Fe._mult(1/(Fe.x*ve.x+Fe.y*ve.y)),G.push(Fe._mult(w)._add(ce))}R.push(G)}return R}(s,O*a.pixelToTileUnitsFactor)),function(z,w,R){for(let N=0;N<w.length;N++){const P=w[N];if(z.length>=3){for(let D=0;D<P.length;D++)if(nn(z,P[D]))return!0}if(kt(z,P,R))return!0}return!1}(m,s,S)}isTileClipped(){return!0}isDraped(a){return!this.hasElevatedBuckets}},symbol:rv,background:class extends Bl{constructor(a,e,r,s){super(a,{layout:T0||(T0=new gl({visibility:new di(gr.layout_background.visibility)})),paint:I0||(I0=new gl({"background-pitch-alignment":new di(gr.paint_background["background-pitch-alignment"]),"background-color":new di(gr.paint_background["background-color"]),"background-pattern":new di(gr.paint_background["background-pattern"]),"background-opacity":new di(gr.paint_background["background-opacity"]),"background-emissive-strength":new di(gr.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(a,e,r){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:xy,"raster-particle":L0,sky:class extends Bl{constructor(a,e,r,s){super(a,{layout:ix||(ix=new gl({visibility:new di(gr.layout_sky.visibility)})),paint:R0||(R0=new gl({"sky-type":new di(gr.paint_sky["sky-type"]),"sky-atmosphere-sun":new di(gr.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new di(gr.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new di(gr.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new di(gr.paint_sky["sky-gradient-radius"]),"sky-gradient":new vd(gr.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new di(gr.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new di(gr.paint_sky["sky-atmosphere-color"]),"sky-opacity":new di(gr.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=fm({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(a,e){if(this.paint.get("sky-type")==="atmosphere"){const s=this.paint.get("sky-atmosphere-sun"),h=!s,l=a.style.light,m=l.properties.get("position");return h&&l.properties.get("anchor")==="viewport"&&cn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?lg(m.azimuthal,90-m.polar,e):lg(s[0],90-s[1],e)}const r=this.paint.get("sky-gradient-center");return lg(r[0],90-r[1],e)}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}},slot:class extends Bl{constructor(a,e,r,s){super(a,{paint:sg||(sg=new gl({}))},e,null)}},model:class extends Bl{constructor(a,e,r,s){super(a,{layout:j0||(j0=new gl({visibility:new di(gr.layout_model.visibility),"model-id":new Ni(gr.layout_model["model-id"])})),paint:ux||(ux=new gl({"model-opacity":new Ni(gr.paint_model["model-opacity"]),"model-rotation":new Ni(gr.paint_model["model-rotation"]),"model-scale":new Ni(gr.paint_model["model-scale"]),"model-translation":new Ni(gr.paint_model["model-translation"]),"model-color":new Ni(gr.paint_model["model-color"]),"model-color-mix-intensity":new Ni(gr.paint_model["model-color-mix-intensity"]),"model-type":new di(gr.paint_model["model-type"]),"model-cast-shadows":new di(gr.paint_model["model-cast-shadows"]),"model-receive-shadows":new di(gr.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new di(gr.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ni(gr.paint_model["model-emissive-strength"]),"model-roughness":new Ni(gr.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ni(gr.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new di(gr.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new di(gr.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ni({type:"string",default:"default","property-type":"data-driven"})}))},e,r,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(a){return new sv(a)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(a){return a instanceof Lu?Ft-1:0}queryIntersectsFeature(a,e,r,s,h,l){if(!this.modelManager)return!1;const m=this.modelManager,S=a.tile.getBucket(this);if(!(S&&S instanceof sv))return!1;for(const O in S.instancesPerModel){const z=S.instancesPerModel[O],w=e.id!==void 0?e.id:e.properties&&e.properties.hasOwnProperty("id")?e.properties.id:void 0;if(z.idToFeaturesIndex.hasOwnProperty(w)){const R=z.features[z.idToFeaturesIndex[w]],N=m.getModel(O,this.scope);if(!N)return!1;let P=le.mat4.create();const D=new Da(0,0),G=S.canonical;let oe=Number.MAX_VALUE;for(let ce=0;ce<R.instancedDataCount;++ce){const Ae=16*(R.instancedDataOffset+ce),Oe=z.instancedDataArray.float32,ve=[Oe[Ae+4],Oe[Ae+5],Oe[Ae+6]];V0(G,D,Oe[Ae],0|Oe[Ae+1]),Ah(P,N,l,D,R.rotation,R.scale,ve,!1,!1,!1),l.projection.name==="globe"&&(P=N0(P,l));const Fe=le.mat4.multiply([],l.projMatrix,P),Ye=a.queryGeometry,ct=wy(Ye.isPointQuery()?Ye.screenBounds:Ye.screenGeometry,l,Fe,N.aabb);ct!=null&&(oe=Math.min(ct,oe))}return oe!==Number.MAX_VALUE&&oe}}return!1}_handleOverridablePaintPropertyUpdate(a,e,r){return!(!this.layout||e.isDataDriven()||r.isDataDriven()||a!=="model-color"&&a!=="model-color-mix-intensity"&&a!=="model-rotation"&&a!=="model-scale"&&a!=="model-translation"&&a!=="model-emissive-strength")}_isPropertyZoomDependent(a){const e=this._transitionablePaint._values[a];return e!=null&&e.value!=null&&e.value.expression!=null&&e.value.expression instanceof zc}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends Bl{constructor(a,e,r,s){super(a,{layout:da||(da=new gl({"clip-layer-types":new di(gr.layout_clip["clip-layer-types"]),"clip-layer-scope":new di(gr.layout_clip["clip-layer-scope"])})),paint:ha||(ha=new gl({}))},e,r,s)}recalculate(a,e){super.recalculate(a,e)}createBucket(a){return new $r(a)}isTileClipped(){return!0}is3D(){return!0}}};class G0{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class fg{constructor(){this.tasks={},this.taskQueue=[],ar(["process"],this),this.invoker=new G0(this.process),this.nextId=0}add(e,r){const s=this.nextId++,h=function({type:l,isSymbolTile:m,zoom:S}){return S=S||0,l==="message"?0:l!=="maybePrepare"||m?l!=="parseTile"||m?l==="parseTile"&&m?300-S:l==="maybePrepare"&&m?400-S:500:200-S:100-S}(r);if(h===0){try{e()}finally{}return null}return this.tasks[s]={fn:e,metadata:r,priority:h,id:s},this.taskQueue.push(s),this.invoker.trigger(),{cancel:()=>{delete this.tasks[s]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(s=>!!this.tasks[s]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let h=0;h<this.taskQueue.length;h++){const l=this.tasks[this.taskQueue[h]];l.priority<r&&(r=l.priority,e=h)}if(e===null)return null;const s=this.taskQueue[e];return this.taskQueue.splice(e,1),s}remove(){this.invoker.remove()}}class uv{constructor(e,r,s){this.target=e,this.parent=r,this.mapId=s,this.callbacks={},this.cancelCallbacks={},ar(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new fg}send(e,r,s,h,l=!1,m){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=m,this.callbacks[S]=s);const O=new Set;return this.target.postMessage({id:S,type:e,hasCallback:!!s,targetMapId:h,mustQueue:l,sourceMapId:this.mapId,data:nu(r,O)},O),{cancel:()=>{s&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(e){const r=e.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h.cancel()}else if(r.mustQueue||Jr()){const h=this.callbacks[s],l=this.scheduler.add(()=>this.processTask(s,r),h&&h.metadata||{type:"message"});l&&(this.cancelCallbacks[s]=l)}else this.processTask(s,r)}processTask(e,r){if(delete this.cancelCallbacks[e],r.type==="<response>"){const s=this.callbacks[e];delete this.callbacks[e],s&&(r.error?s(ss(r.error)):s(null,ss(r.data)))}else{const s=new Set,h=r.hasCallback?(m,S)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:m?nu(m):null,data:nu(S,s)},s)}:()=>{},l=ss(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,l,h);else if(this.parent.getWorkerSource){const m=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,m[0],l.source,l.scope)[m[1]](l,h)}else h(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var d_={workerUrl:"",workerClass:null,workerParams:void 0};const $0="mapboxgl_preloaded_worker_pool";class Xf{constructor(){this.active={}}acquire(e,r=Xf.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<r;)this.workers.push(d_.workerClass!=null?new d_.workerClass:new self.Worker(d_.workerUrl,d_.workerParams));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$0]}numActive(){return Object.keys(this.active).length}}Xf.workerCount=2;class xp{constructor(e,r,s="Worker",h=Xf.workerCount){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=en();const l=this.workerPool.acquire(this.id,h);for(let m=0;m<l.length;m++){const S=new xp.Actor(l[m],r,this.id);S.name=`${s} ${m}`,this.actors.push(S)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,r,s){Sn(this.actors,(h,l)=>{h.send(e,r,l)},s=s||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}let h_,Iy;function cv(){return h_||(h_=new Xf),h_}xp.Actor=uv;const pg=new Uo(0,0,0);var dv=(a=>(a[a.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",a[a.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",a[a.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",a))(dv||{}),f_=(a=>(a[a.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",a[a.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",a[a.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",a[a.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",a))(f_||{}),mg=(a=>(a[a.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",a[a.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",a[a.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",a[a.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",a[a.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",a))(mg||{}),Z0=(a=>(a[a.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",a[a.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",a[a.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",a))(Z0||{}),p_=(a=>(a[a.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",a[a.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",a[a.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",a[a.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",a[a.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",a[a.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",a))(p_||{}),hv=(a=>(a[a.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",a[a.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",a[a.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",a))(hv||{});function bp(a,e,r){a===1&&e.icons.push(function(s,h){return function(l){if(l.usvg_tree.height||(l.usvg_tree.height=l.usvg_tree.width),!l.metadata)return l;const{metadata:m}=l;if(m.content_area){const{content_area:S}=m;S.top==null&&(S.top=S.left),S.width==null&&(S.width=l.usvg_tree.width),S.height==null&&(S.height=S.width)}return m.stretch_x&&m.stretch_x.length&&m_(m,"x"),m.stretch_y&&m.stretch_y.length&&m_(m,"y"),l}(s.readFields(My,{name:void 0},h))}(r,r.readVarint()+r.pos))}function m_(a,e){const r=[],s=a[`stretch_${e}`];let h=null;for(let l=0;l<s.length;l++)h===null?h=r.length===0?s[0]:r[r.length-1][1]+s[l]:(r.push([h,h+s[l]]),h=null);a[`stretch_${e}_areas`]=r}function My(a,e,r){a===1?e.name=r.readString():a===2?e.metadata=function(s,h){return s.readFields(fv,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},h)}(r,r.readVarint()+r.pos):a===3&&(e.usvg_tree=function(s,h){return s.readFields(cx,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},h)}(r,r.readVarint()+r.pos),e.data="usvg_tree")}function fv(a,e,r){a===1?e.stretch_x=r.readPackedVarint():a===2?e.stretch_y=r.readPackedVarint():a===3?e.content_area=function(s,h){return s.readFields(W0,{left:0},h)}(r,r.readVarint()+r.pos):a===4&&e.variables.push(function(s,h){return s.readFields(pv,{name:void 0},h)}(r,r.readVarint()+r.pos))}function W0(a,e,r){a===1?e.left=r.readVarint():a===2?e.width=r.readVarint():a===3?e.top=r.readVarint():a===4&&(e.height=r.readVarint())}function pv(a,e,r){a===1?e.name=r.readString():a===2&&(e.rgb_color=gv(r.readVarint()),e.value="rgb_color")}function cx(a,e,r){a===1?e.width=e.height=r.readVarint():a===2?e.height=r.readVarint():a===3?e.children.push(mv(r,r.readVarint()+r.pos)):a===4?e.linear_gradients.push(function(s,h){return s.readFields(fx,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},h)}(r,r.readVarint()+r.pos)):a===5?e.radial_gradients.push(function(s,h){return s.readFields(px,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},h)}(r,r.readVarint()+r.pos)):a===7?e.clip_paths.push(function(s,h){return s.readFields(vv,{children:[]},h)}(r,r.readVarint()+r.pos)):a===8&&e.masks.push(function(s,h){const l=s.readFields(X0,{left:0,width:20,mask_type:1,children:[]},h);return l.height==null&&(l.height=l.width),l.top==null&&(l.top=l.left),l}(r,r.readVarint()+r.pos))}function mv(a,e){return a.readFields(H0,{},e)}function H0(a,e,r){a===1?(e.group=function(s,h){return s.readFields(K0,{opacity:255,children:[]},h)}(r,r.readVarint()+r.pos),e.node="group"):a===2&&(e.path=function(s,h){return s.readFields(dx,{paint_order:1,commands:[],step:1,diffs:[],rule:1},h)}(r,r.readVarint()+r.pos),e.node="path")}function K0(a,e,r){a===1?e.transform=_v(r,r.readVarint()+r.pos):a===2?e.opacity=r.readVarint():a===5?e.clip_path_idx=r.readVarint():a===6?e.mask_idx=r.readVarint():a===7&&e.children.push(mv(r,r.readVarint()+r.pos))}function _v(a,e){return a.readFields(Jf,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},e)}function Jf(a,e,r){a===1?e.sx=r.readFloat():a===2?e.ky=r.readFloat():a===3?e.kx=r.readFloat():a===4?e.sy=r.readFloat():a===5?e.tx=r.readFloat():a===6&&(e.ty=r.readFloat())}function dx(a,e,r){a===1?e.fill=function(s,h){return s.readFields(Y0,{rgb_color:pg,paint:"rgb_color",opacity:255},h)}(r,r.readVarint()+r.pos):a===2?e.stroke=function(s,h){return s.readFields(hx,{rgb_color:pg,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},h)}(r,r.readVarint()+r.pos):a===3?e.paint_order=r.readVarint():a===5?r.readPackedVarint(e.commands):a===6?e.step=r.readFloat():a===7?r.readPackedSVarint(e.diffs):a===8&&(e.rule=r.readVarint())}function Y0(a,e,r){a===1?(e.rgb_color=gv(r.readVarint()),e.paint="rgb_color"):a===2?(e.linear_gradient_idx=r.readVarint(),e.paint="linear_gradient_idx"):a===3?(e.radial_gradient_idx=r.readVarint(),e.paint="radial_gradient_idx"):a===5&&(e.opacity=r.readVarint())}function gv(a){return new Uo((a>>16&255)/255,(a>>8&255)/255,(255&a)/255,1)}function hx(a,e,r){a===1?(e.rgb_color=gv(r.readVarint()),e.paint="rgb_color"):a===2?(e.linear_gradient_idx=r.readVarint(),e.paint="linear_gradient_idx"):a===3?(e.radial_gradient_idx=r.readVarint(),e.paint="radial_gradient_idx"):a===5?r.readPackedFloat(e.dasharray):a===6?e.dashoffset=r.readFloat():a===7?e.miterlimit=r.readFloat():a===8?e.opacity=r.readVarint():a===9?e.width=r.readFloat():a===10?e.linecap=r.readVarint():a===11&&(e.linejoin=r.readVarint())}function fx(a,e,r){a===1?e.transform=_v(r,r.readVarint()+r.pos):a===2?e.spread_method=r.readVarint():a===3?e.stops.push(__(r,r.readVarint()+r.pos)):a===4?e.x1=r.readFloat():a===5?e.y1=r.readFloat():a===6?e.x2=r.readFloat():a===7&&(e.y2=r.readFloat())}function __(a,e){return a.readFields(g_,{offset:0,opacity:255,rgb_color:pg},e)}function g_(a,e,r){a===1?e.offset=r.readFloat():a===2?e.opacity=r.readVarint():a===3&&(e.rgb_color=gv(r.readVarint()))}function px(a,e,r){a===1?e.transform=_v(r,r.readVarint()+r.pos):a===2?e.spread_method=r.readVarint():a===3?e.stops.push(__(r,r.readVarint()+r.pos)):a===4?e.cx=r.readFloat():a===5?e.cy=r.readFloat():a===6?e.r=r.readFloat():a===7?e.fx=r.readFloat():a===8?e.fy=r.readFloat():a===9&&(e.fr=r.readFloat())}function vv(a,e,r){a===1?e.transform=_v(r,r.readVarint()+r.pos):a===2?e.clip_path_idx=r.readVarint():a===3&&e.children.push(mv(r,r.readVarint()+r.pos))}function X0(a,e,r){a===1?e.left=e.top=r.readFloat():a===2?e.width=e.height=r.readFloat():a===3?e.top=r.readFloat():a===4?e.height=r.readFloat():a===5?e.mask_type=r.readVarint():a===6?e.mask_idx=r.readVarint():a===7&&e.children.push(mv(r,r.readVarint()+r.pos))}class mx{static calculate(e,r){const s=new Map,h=new Map;if(Object.keys(e).length===0)return s;r.forEach(l=>{h.set(l.name,l.rgb_color||new Uo(0,0,0))});for(const[l,m]of Object.entries(e))h.has(l)?s.set(h.get(l).toStringPremultipliedAlpha(),m):console.warn(`Ignoring unknown image variable "${l}"`);return s}}function Tm(a,e=255,r){const s=e/255,h=a.toStringPremultipliedAlpha(),l=r.has(h)?r.get(h).clone():a.clone();return l.a=s,l.toString()}function _g(a,e){if(!ot()){const r=document.createElement("canvas");return r.width=a,r.height=e,r}return new OffscreenCanvas(a,e)}function _x(a,e){const r=mx.calculate(e.params,a.metadata?a.metadata.variables:[]),s=a.usvg_tree,h=s.width,l=s.height,m=e.transform?e.transform:new DOMMatrix,S=Math.max(1,Math.round(h*m.a)),O=Math.max(1,Math.round(l*m.d)),z=new DOMMatrix([S/h,0,0,O/l,0,0]),w=_g(S,O).getContext("2d");return J0(w,z,s,s,r),w.getImageData(0,0,S,O)}function J0(a,e,r,s,h){for(const l of s.children)Q0(a,e,r,l,h)}function Q0(a,e,r,s,h){s.group?(a.save(),function(l,m,S,O,z){const w=O.mask_idx!=null?S.masks[O.mask_idx]:null,R=O.clip_path_idx!=null?S.clip_paths[O.clip_path_idx]:null;if(O.transform&&(m=Cy(O.transform).preMultiplySelf(m)),!function(D,G,oe){return D.opacity!==255||G||oe}(O,R!=null,w!=null))return void J0(l,m,S,O,z);const N=_g(l.canvas.width,l.canvas.height),P=N.getContext("2d");J0(P,m,S,O,z),R&&xx(P,m,S,R),w&&n1(P,m,S,w,z),l.globalAlpha=O.opacity/255,l.drawImage(N,0,0)}(a,e,r,s.group,h),a.restore()):s.path&&(a.save(),function(l,m,S,O,z){const w=r1(O);l.setTransform(m),O.paint_order===Z0.PAINT_ORDER_FILL_AND_STROKE?(gx(l,S,O,w,z),vx(l,S,O,w,z)):(vx(l,S,O,w,z),gx(l,S,O,w,z))}(a,e,r,s.path,h),a.restore())}function gx(a,e,r,s,h){const l=r.fill;if(!l)return;const m=l.opacity/255;switch(l.paint){case"rgb_color":a.fillStyle=Tm(l.rgb_color,l.opacity,h);break;case"linear_gradient_idx":a.fillStyle=e1(a,e.linear_gradients[l.linear_gradient_idx],m,h);break;case"radial_gradient_idx":a.fillStyle=yx(a,e.radial_gradients[l.radial_gradient_idx],m,h)}a.fill(s,q0(r))}function q0(a){return a.rule===dv.PATH_RULE_NON_ZERO?"nonzero":a.rule===dv.PATH_RULE_EVEN_ODD?"evenodd":void 0}function vx(a,e,r,s,h){const l=r.stroke;if(!l)return;a.lineWidth=l.width,a.miterLimit=l.miterlimit,a.setLineDash(l.dasharray),a.lineDashOffset=l.dashoffset;const m=l.opacity/255;switch(l.paint){case"rgb_color":a.strokeStyle=Tm(l.rgb_color,l.opacity,h);break;case"linear_gradient_idx":a.strokeStyle=e1(a,e.linear_gradients[l.linear_gradient_idx],m,h);break;case"radial_gradient_idx":a.strokeStyle=yx(a,e.radial_gradients[l.radial_gradient_idx],m,h)}switch(l.linejoin){case mg.LINE_JOIN_MITER_CLIP:case mg.LINE_JOIN_MITER:a.lineJoin="miter";break;case mg.LINE_JOIN_ROUND:a.lineJoin="round";break;case mg.LINE_JOIN_BEVEL:a.lineJoin="bevel"}switch(l.linecap){case f_.LINE_CAP_BUTT:a.lineCap="butt";break;case f_.LINE_CAP_ROUND:a.lineCap="round";break;case f_.LINE_CAP_SQUARE:a.lineCap="square"}a.stroke(s)}function e1(a,e,r,s){if(e.stops.length===1){const N=e.stops[0];return Tm(N.rgb_color,N.opacity*r,s)}const h=Cy(e.transform),{x1:l,y1:m,x2:S,y2:O}=e,z=h.transformPoint(new DOMPoint(l,m)),w=h.transformPoint(new DOMPoint(S,O)),R=a.createLinearGradient(z.x,z.y,w.x,w.y);for(const N of e.stops)R.addColorStop(N.offset,Tm(N.rgb_color,N.opacity*r,s));return R}function yx(a,e,r,s){if(e.stops.length===1){const N=e.stops[0];return Tm(N.rgb_color,N.opacity*r,s)}const h=Cy(e.transform),{fx:l,fy:m,cx:S,cy:O}=e,z=h.transformPoint(new DOMPoint(l,m)),w=h.transformPoint(new DOMPoint(S,O)),R=a.createRadialGradient(z.x,z.y,0,w.x,w.y,e.r*((h.a+h.d)/2));for(const N of e.stops)R.addColorStop(N.offset,Tm(N.rgb_color,N.opacity*r,s));return R}function t1(a,e,r,s){const h=s.transform?Cy(s.transform).preMultiplySelf(e):e,l=_g(a.canvas.width,a.canvas.height),m=l.getContext("2d");for(const O of s.children)if(O.group)t1(m,h,r,O.group);else if(O.path){const z=O.path,w=new Path2D;w.addPath(r1(z),h),m.fill(w,q0(z))}const S=s.clip_path_idx!=null?r.clip_paths[s.clip_path_idx]:null;S&&xx(m,h,r,S),a.globalCompositeOperation="source-over",a.drawImage(l,0,0)}function xx(a,e,r,s){const h=_g(a.canvas.width,a.canvas.height);t1(h.getContext("2d"),e,r,s),a.globalCompositeOperation="destination-in",a.drawImage(h,0,0)}function n1(a,e,r,s,h){if(s.children.length===0)return;const l=s.mask_idx!=null?r.masks[s.mask_idx]:null;l&&n1(a,e,r,l,h);const m=a.canvas.width,S=a.canvas.height,O=_g(m,S),z=O.getContext("2d"),w=s.width,R=s.height,N=s.left,P=s.top,D=new Path2D,G=new Path2D;G.rect(N,P,w,R),D.addPath(G,e),z.clip(D);for(const Ae of s.children)Q0(z,e,r,Ae,h);const oe=z.getImageData(0,0,m,S),ce=oe.data;if(s.mask_type===hv.MASK_TYPE_LUMINANCE)for(let Ae=0;Ae<ce.length;Ae+=4)ce[Ae+3]=ce[Ae+3]/255*(.2126*ce[Ae]+.7152*ce[Ae+1]+.0722*ce[Ae+2]);z.putImageData(oe,0,0),a.globalCompositeOperation="destination-in",a.drawImage(O,0,0)}function Cy(a){return a?new DOMMatrix([a.sx,a.ky,a.kx,a.sy,a.tx,a.ty]):new DOMMatrix}function r1(a){const e=new Path2D,r=a.step;let s=a.diffs[0]*r,h=a.diffs[1]*r;e.moveTo(s,h);for(let l=0,m=2;l<a.commands.length;l++)switch(a.commands[l]){case p_.PATH_COMMAND_MOVE:s+=a.diffs[m++]*r,h+=a.diffs[m++]*r,e.moveTo(s,h);break;case p_.PATH_COMMAND_LINE:s+=a.diffs[m++]*r,h+=a.diffs[m++]*r,e.lineTo(s,h);break;case p_.PATH_COMMAND_QUAD:{const S=s+a.diffs[m++]*r,O=h+a.diffs[m++]*r;s=S+a.diffs[m++]*r,h=O+a.diffs[m++]*r,e.quadraticCurveTo(S,O,s,h);break}case p_.PATH_COMMAND_CUBIC:{const S=s+a.diffs[m++]*r,O=h+a.diffs[m++]*r,z=S+a.diffs[m++]*r,w=O+a.diffs[m++]*r;s=z+a.diffs[m++]*r,h=w+a.diffs[m++]*r,e.bezierCurveTo(S,O,z,w,s,h);break}case p_.PATH_COMMAND_CLOSE:e.closePath()}return e}class i1{constructor(e){this.capacity=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const r=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,r),r}put(e,r){this.cache.has(e)?this.cache.delete(e):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,r)}delete(e){this.cache.delete(e)}}class zd{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(e){return new fc(e,e.data)}getFromCache(e,r,s){return this.cacheMap.has(s)||this.cacheMap.set(s,new i1(150)),this.cacheMap.get(s).get(Uu(e.serialize(),r))}setInCache(e,r,s,h){this.cacheDependenciesMap.has(h)||this.cacheDependenciesMap.set(h,new Map),this.cacheMap.has(h)||this.cacheMap.set(h,new i1(150));const l=this.cacheDependenciesMap.get(h);l.get(Uu(e.id,s))||l.set(Uu(e.id,s),new Set);const m=this.cacheMap.get(h),S=e.serialize();l.get(Uu(e.id,s)).add(S),m.put(Uu(e.serialize(),s),r)}removeImagesFromCacheByIds(e,r,s=""){if(!this.cacheMap.has(s)||!this.cacheDependenciesMap.has(s))return;const h=this.cacheMap.get(s),l=this.cacheDependenciesMap.get(s);for(const m of e)if(l.has(Uu(m,r))){for(const S of l.get(Uu(m,r)))h.delete(S);l.delete(Uu(m,r))}}rasterize(e,r,s,h,l=_x){const m=this.getFromCache(e,s,h);if(m)return m.clone();const S=l(r.icon,e.options),O=zd._getImage(S);return this.setInCache(e,O,s,h),O.clone()}}class o1{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const s=this.toIdx(e,r);return{min:this.minimums[s],max:this.maximums[s]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function bx(a,e,r,s){let h=0,l=Number.MAX_VALUE;for(let m=0;m<3;m++)if(Math.abs(s[m])<1e-15){if(r[m]<a[m]||r[m]>e[m])return null}else{const S=1/s[m];let O=(a[m]-r[m])*S,z=(e[m]-r[m])*S;if(O>z){const w=O;O=z,z=w}if(O>h&&(h=O),z<l&&(l=z),h>l)return null}return h}function Hl(a,e,r,s,h,l,m,S,O,z,w){const R=s-a,N=h-e,P=l-r,D=m-a,G=S-e,oe=O-r,ce=w[1]*oe-w[2]*G,Ae=w[2]*D-w[0]*oe,Oe=w[0]*G-w[1]*D,ve=R*ce+N*Ae+P*Oe;if(Math.abs(ve)<1e-15)return null;const Fe=1/ve,Ye=z[0]-a,ct=z[1]-e,Kt=z[2]-r,Zt=(Ye*ce+ct*Ae+Kt*Oe)*Fe;if(Zt<0||Zt>1)return null;const Ut=ct*P-Kt*N,En=Kt*R-Ye*P,Yt=Ye*N-ct*R,Cn=(w[0]*Ut+w[1]*En+w[2]*Yt)*Fe;return Cn<0||Zt+Cn>1?null:(D*Ut+G*En+oe*Yt)*Fe}function Gc(a,e,r){return(a-e)/(r-e)}function a1(a,e,r,s,h,l,m,S,O){const z=1<<r,w=l-s,R=m-h,N=(a+1)/z*w+s,P=(e+0)/z*R+h,D=(e+1)/z*R+h;S[0]=(a+0)/z*w+s,S[1]=P,O[0]=N,O[1]=D}class v_{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(l){const m=Math.ceil(Math.log2(l.dim/8)),S=[];let O=Math.ceil(Math.pow(2,m));const z=1/O,w=(P,D,G,oe,ce)=>{const Ae=oe?1:0,Oe=(P+1)*G-Ae,ve=D*G,Fe=(D+1)*G-Ae;ce[0]=P*G,ce[1]=ve,ce[2]=Oe,ce[3]=Fe};let R=new o1(O);const N=[];for(let P=0;P<O*O;P++){w(P%O,Math.floor(P/O),z,!1,N);const D=Im(N[0],N[1],l),G=Im(N[2],N[1],l),oe=Im(N[2],N[3],l),ce=Im(N[0],N[3],l);R.minimums.push(Math.min(D,G,oe,ce)),R.maximums.push(Math.max(D,G,oe,ce)),R.leaves.push(1)}for(S.push(R),O/=2;O>=1;O/=2){const P=S[S.length-1];R=new o1(O);for(let D=0;D<O*O;D++){w(D%O,Math.floor(D/O),2,!0,N);const G=P.getElevation(N[0],N[1]),oe=P.getElevation(N[2],N[1]),ce=P.getElevation(N[2],N[3]),Ae=P.getElevation(N[0],N[3]),Oe=P.isLeaf(N[0],N[1]),ve=P.isLeaf(N[2],N[1]),Fe=P.isLeaf(N[2],N[3]),Ye=P.isLeaf(N[0],N[3]),ct=Math.min(G.min,oe.min,ce.min,Ae.min),Kt=Math.max(G.max,oe.max,ce.max,Ae.max),Zt=Oe&&ve&&Fe&&Ye;R.maximums.push(Kt),R.minimums.push(ct),R.leaves.push(Kt-ct<=5&&Zt?1:0)}S.push(R)}return S}(this.dem),s=r.length-1,h=r[s];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(r,0,0,s,0)}raycastRoot(e,r,s,h,l,m,S=1){return bx([e,r,-100],[s,h,this.maximums[0]*S],l,m)}raycast(e,r,s,h,l,m,S=1){if(!this.nodeCount)return null;const O=this.raycastRoot(e,r,s,h,l,m,S);if(O==null)return null;const z=[],w=[],R=[],N=[],P=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;P.length>0;){const{idx:D,t:G,nodex:oe,nodey:ce,depth:Ae}=P.pop();if(this.leaves[D]){a1(oe,ce,Ae,e,r,s,h,R,N);const ve=1<<Ae,Fe=(oe+0)/ve,Ye=(oe+1)/ve,ct=(ce+0)/ve,Kt=(ce+1)/ve,Zt=Im(Fe,ct,this.dem)*S,Ut=Im(Ye,ct,this.dem)*S,En=Im(Ye,Kt,this.dem)*S,Yt=Im(Fe,Kt,this.dem)*S,Cn=Hl(R[0],R[1],Zt,N[0],R[1],Ut,N[0],N[1],En,l,m),Vn=Hl(N[0],N[1],En,R[0],N[1],Yt,R[0],R[1],Zt,l,m),zn=Math.min(Cn!==null?Cn:Number.MAX_VALUE,Vn!==null?Vn:Number.MAX_VALUE);if(zn!==Number.MAX_VALUE)return zn;{const Zn=le.vec3.scaleAndAdd([],l,m,G);if(wx(Zt,Ut,Yt,En,Gc(Zn[0],R[0],N[0]),Gc(Zn[1],R[1],N[1]))>=Zn[2])return G}continue}let Oe=0;for(let ve=0;ve<this._siblingOffset.length;ve++){a1((oe<<1)+this._siblingOffset[ve][0],(ce<<1)+this._siblingOffset[ve][1],Ae+1,e,r,s,h,R,N),R[2]=-100,N[2]=this.maximums[this.childOffsets[D]+ve]*S;const Fe=bx(R,N,l,m);if(Fe!=null){const Ye=Fe;z[ve]=Ye;let ct=!1;for(let Kt=0;Kt<Oe&&!ct;Kt++)Ye>=z[w[Kt]]&&(w.splice(Kt,0,ve),ct=!0);ct||(w[Oe]=ve),Oe++}}for(let ve=0;ve<Oe;ve++){const Fe=w[ve];P.push({idx:this.childOffsets[D]+Fe,t:z[Fe],nodex:(oe<<1)+this._siblingOffset[Fe][0],nodey:(ce<<1)+this._siblingOffset[Fe][1],depth:Ae+1})}}return null}_addNode(e,r,s){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(s),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,s,h,l){if(e[h].isLeaf(r,s)===1)return;this.childOffsets[l]||(this.childOffsets[l]=this.nodeCount);const m=h-1,S=e[m];let O=0,z=0;for(let w=0;w<this._siblingOffset.length;w++){const R=2*r+this._siblingOffset[w][0],N=2*s+this._siblingOffset[w][1],P=S.getElevation(R,N),D=S.isLeaf(R,N),G=this._addNode(P.min,P.max,D);D&&(O|=1<<w),z||(z=G)}for(let w=0;w<this._siblingOffset.length;w++)O&1<<w||this._construct(e,2*r+this._siblingOffset[w][0],2*s+this._siblingOffset[w][1],m,z+w)}}function wx(a,e,r,s,h,l){return $i($i(a,r,l),$i(e,s,l),h)}function Im(a,e,r){const s=r.dim,h=Me(a*s-.5,0,s-1),l=Me(e*s-.5,0,s-1),m=Math.floor(h),S=Math.floor(l),O=Math.min(m+1,s-1),z=Math.min(S+1,s-1);return wx(r.get(m,S),r.get(O,S),r.get(m,z),r.get(O,z),h-m,l-S)}const rb={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Ex(a,e,r){return(256*a*256+256*e+r)/10-1e4}function so(a,e,r){return 256*a+e+r/256-32768}class yv{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,s,h=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return void cn(`"${s}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const l=this.dim=r.height-2,m=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.floatView=new Float32Array(r.data.buffer),this.borderReady=h,this._modifiedForSources={},!h){for(let O=0;O<l;O++)m[this._idx(-1,O)]=m[this._idx(0,O)],m[this._idx(l,O)]=m[this._idx(l-1,O)],m[this._idx(O,-1)]=m[this._idx(O,0)],m[this._idx(O,l)]=m[this._idx(O,l-1)];m[this._idx(-1,-1)]=m[this._idx(0,0)],m[this._idx(l,-1)]=m[this._idx(l-1,0)],m[this._idx(-1,l)]=m[this._idx(0,l-1)],m[this._idx(l,l)]=m[this._idx(l-1,l-1)]}const S=s==="terrarium"?so:Ex;for(let O=0;O<m.length;++O){const z=4*O;this.floatView[O]=S(this.pixels[z],this.pixels[z+1],this.pixels[z+2])}this._timestamp=Dt.now()}_buildQuadTree(){this._tree=new v_(this)}get(e,r,s=!1){s&&(e=Me(e,-1,this.dim),r=Me(r,-1,this.dim));const h=this._idx(e,r);return this.floatView[h]}set(e,r,s){const h=this._idx(e,r),l=this.floatView[h];return this.floatView[h]=s,s-l}static getUnpackVector(e){return rb[e]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const s=[0,0,0,0],h=yv.getUnpackVector(r);let l=Math.floor((e+h[3])/h[2]);return s[2]=l%256,l=Math.floor(l/256),s[1]=l%256,l=Math.floor(l/256),s[0]=l,s}getPixels(){return new Gm({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=r*this.dim,l=r*this.dim+this.dim,m=s*this.dim,S=s*this.dim+this.dim;switch(r){case-1:h=l-1;break;case 1:l=h+1}switch(s){case-1:m=S-1;break;case 1:S=m+1}const O=-r*this.dim,z=-s*this.dim;for(let w=m;w<S;w++)for(let R=h;R<l;R++){const N=4*this._idx(R,w),P=4*this._idx(R+O,w+z);this.pixels[N+0]=e.pixels[P+0],this.pixels[N+1]=e.pixels[P+1],this.pixels[N+2]=e.pixels[P+2],this.pixels[N+3]=e.pixels[P+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Sx(a,e,r){a===1?e.headerLength=r.readFixed32():a===2?e.x=r.readVarint():a===3?e.y=r.readVarint():a===4?e.z=r.readVarint():a===5&&e.layers.push(function(s,h){return s.readFields(u1,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},h)}(r,r.readVarint()+r.pos))}function Tx(a,e,r){a===1?(e.delta_filter=function(s,h){return s.readFields(y_,{blockSize:0},h)}(r,r.readVarint()+r.pos),e.filter="delta_filter"):a===2?(r.readVarint(),e.filter="zigzag_filter"):a===3?(r.readVarint(),e.filter="bitshuffle_filter"):a===4&&(r.readVarint(),e.filter="byteshuffle_filter")}function y_(a,e,r){a===1&&(e.blockSize=r.readVarint())}function s1(a,e,r){a===1?(r.readVarint(),e.codec="gzip_data"):a===2?(r.readVarint(),e.codec="jpeg_image"):a===3?(r.readVarint(),e.codec="webp_image"):a===4&&(r.readVarint(),e.codec="png_image")}function l1(a,e,r){let s=0,h=0;a===1?e.firstByte=r.readFixed64():a===2?e.lastByte=r.readFixed64():a===3?e.filters.push(function(l,m){return l.readFields(Tx,{},m)}(r,r.readVarint()+r.pos)):a===4?e.codec=function(l,m){return l.readFields(s1,{},m)}(r,r.readVarint()+r.pos):a===5?h=r.readFloat():a===6?s=r.readFloat():a===7?e.bands.push(r.readString()):a===8?e.offset=r.readDouble():a===9&&(e.scale=r.readDouble()),e.offset===0&&(e.offset=h),e.scale===0&&(e.scale=s)}function u1(a,e,r){a===1?e.version=r.readVarint():a===2?e.name=r.readString():a===3?e.units=r.readString():a===4?e.tileSize=r.readVarint():a===5?e.buffer=r.readVarint():a===6?e.pixelFormat=r.readVarint():a===7&&e.dataIndex.push(function(s,h){return s.readFields(l1,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},h)}(r,r.readVarint()+r.pos))}function Yd(a,e,r){if(a===2)(function(s,h,l){s.readFields(Ix,l,h)})(r,r.readVarint()+r.pos,e);else if(a===3)throw new Error("Not implemented")}function Ix(a,e,r){if(a===1){let s=0;const h=r.readVarint()+r.pos;for(;r.pos<h;)e[s++]=r.readVarint()}}function Mx(a,e){if(e.length!==4)throw new Error(`Expected data of dimension 4 but got ${e.length}.`);let r=e[3];for(let s=2;s>=1;s--){const h=s===1?1:0,l=s===2?1:0;for(let m=0;m<e[0];m++){const S=e[1]*m;for(let O=h;O<e[1];O++){const z=e[2]*(O+S);for(let w=l;w<e[2];w++){const R=e[3]*(w+z);for(let N=0;N<e[3];N++){const P=R+N;a[P]+=a[P-r]}}}}r*=e[s]}return a}function ib(a){for(let e=0,r=a.length;e<r;e++)a[e]=a[e]>>>1^-(1&a[e]);return a}function Cx(a,e){switch(e){case"uint32":return a;case"uint16":for(let r=0;r<a.length;r+=2){const s=a[r],h=a[r+1];a[r]=(240&s)>>4|(61440&s)>>8|(240&h)<<4|61440&h,a[r+1]=15&s|(3840&s)>>4|(15&h)<<8|(3840&h)<<4}return a;case"uint8":for(let r=0;r<a.length;r+=4){const s=a[r],h=a[r+1],l=a[r+2],m=a[r+3];a[r+0]=(192&s)>>6|(192&h)>>4|(192&l)>>2|192&m,a[r+1]=(48&s)>>4|(48&h)>>2|48&l|(48&m)<<2,a[r+2]=(12&s)>>2|12&h|(12&l)<<2|(12&m)<<4,a[r+3]=3&s|(3&h)<<2|(3&l)<<4|(3&m)<<6}return a;default:throw new Error(`Invalid pixel format, "${e}"`)}}Fi(yv,"DEMData"),Fi(v_,"DemMinMaxQuadTree",{omit:["dem"]});var Lh=Uint8Array,gg=Uint16Array,x_=Int32Array,Mm=new Lh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Cm=new Lh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c1=new Lh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ay=function(a,e){for(var r=new gg(31),s=0;s<31;++s)r[s]=e+=1<<a[s-1];var h=new x_(r[30]);for(s=1;s<30;++s)for(var l=r[s];l<r[s+1];++l)h[l]=l-r[s]<<5|s;return{b:r,r:h}},Py=Ay(Mm,2),Oy=Py.b,d1=Py.r;Oy[28]=258,d1[258]=28;for(var h1=Ay(Cm,0).b,xv=new gg(32768),Cu=0;Cu<32768;++Cu){var Yp=(43690&Cu)>>1|(21845&Cu)<<1;xv[Cu]=((65280&(Yp=(61680&(Yp=(52428&Yp)>>2|(13107&Yp)<<2))>>4|(3855&Yp)<<4))>>8|(255&Yp)<<8)>>1}var ph=function(a,e,r){for(var s=a.length,h=0,l=new gg(e);h<s;++h)a[h]&&++l[a[h]-1];var m,S=new gg(e);for(h=1;h<e;++h)S[h]=S[h-1]+l[h-1]<<1;m=new gg(1<<e);var O=15-e;for(h=0;h<s;++h)if(a[h])for(var z=h<<4|a[h],w=e-a[h],R=S[a[h]-1]++<<w,N=R|(1<<w)-1;R<=N;++R)m[xv[R]>>O]=z;return m},Xp=new Lh(288);for(Cu=0;Cu<144;++Cu)Xp[Cu]=8;for(Cu=144;Cu<256;++Cu)Xp[Cu]=9;for(Cu=256;Cu<280;++Cu)Xp[Cu]=7;for(Cu=280;Cu<288;++Cu)Xp[Cu]=8;var Ry=new Lh(32);for(Cu=0;Cu<32;++Cu)Ry[Cu]=5;var mh=ph(Xp,9),b_=ph(Ry,5),Jp=function(a){for(var e=a[0],r=1;r<a.length;++r)a[r]>e&&(e=a[r]);return e},Dh=function(a,e,r){var s=e/8|0;return(a[s]|a[s+1]<<8)>>(7&e)&r},kh=function(a,e){var r=e/8|0;return(a[r]|a[r+1]<<8|a[r+2]<<16)>>(7&e)},Ly=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fd=function(a,e,r){var s=new Error(e||Ly[a]);if(s.code=a,Error.captureStackTrace&&Error.captureStackTrace(s,Fd),!r)throw s;return s},Ax=new Lh(0),ob=typeof TextDecoder!="undefined"&&new TextDecoder;try{ob.decode(Ax,{stream:!0})}catch(a){}const ab={gzip_data:"gzip"};class Qh extends Error{constructor(e){super(e),this.name="MRTError"}}const Px={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},f1={uint32:1,uint16:2,uint8:4},Qp={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let Qf;class qf{constructor(e=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=e}getLayer(e){const r=this.layers[e];if(!r)throw new Qh(`Layer '${e}' not found`);return r}getHeaderLength(e){const r=new Uint8Array(e),s=new DataView(e);if(r[0]!==13)throw new Qh("File is not a valid MRT.");return s.getUint32(1,!0)}parseHeader(e){const r=new Uint8Array(e),s=this.getHeaderLength(e);if(r.length<s)throw new Qh(`Expected header with length >= ${s} but got buffer of length ${r.length}`);const h=function(l,m){return l.readFields(Sx,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new Qf(r.subarray(0,s)));if(!isNaN(this.x)&&(this.x!==h.x||this.y!==h.y||this.z!==h.z))throw new Qh(`Invalid attempt to parse header ${h.z}/${h.x}/${h.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=h.x,this.y=h.y,this.z=h.z;for(const l of h.layers)this.layers[l.name]=new ep(l,{cacheSize:this._cacheSize});return this}createDecodingTask(e){const r=[],s=this.getLayer(e.layerName);for(let h of e.blockIndices){const l=s.dataIndex[h],m=l.firstByte-e.firstByte,S=l.lastByte-e.firstByte;if(s._blocksInProgress.has(h))continue;const O={layerName:s.name,firstByte:m,lastByte:S,pixelFormat:s.pixelFormat,blockIndex:h,blockShape:[l.bands.length].concat(s.bandShape),buffer:s.buffer,codec:l.codec.codec,filters:l.filters.map(z=>z.filter)};s._blocksInProgress.add(h),r.push(O)}return new Pf(r,()=>{r.forEach(h=>s._blocksInProgress.delete(h.blockIndex))},(h,l)=>{if(r.forEach(m=>s._blocksInProgress.delete(m.blockIndex)),h)throw h;l.forEach(m=>{this.getLayer(m.layerName).processDecodedData(m)})})}}class ep{constructor({version:e,name:r,units:s,tileSize:h,pixelFormat:l,buffer:m,dataIndex:S},O){if(this.version=e,this.version!==1)throw new Qh(`Cannot parse raster layer encoded with MRT version ${e}`);this.name=r,this.units=s,this.tileSize=h,this.buffer=m,this.pixelFormat=Px[l],this.dataIndex=S,this.bandShape=[h+2*m,h+2*m,f1[this.pixelFormat]],this._decodedBlocks=new i1(O?O.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return f1[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:e})=>e).flat()}processDecodedData(e){const r=e.blockIndex.toString();this._decodedBlocks.get(r)||this._decodedBlocks.put(r,e.data)}getBlockForBand(e){let r=0;switch(typeof e){case"string":for(const[s,h]of this.dataIndex.entries()){for(const[l,m]of h.bands.entries())if(m===e)return{bandIndex:r+l,blockIndex:s,blockBandIndex:l};r+=h.bands.length}break;case"number":for(const[s,h]of this.dataIndex.entries()){if(e>=r&&e<r+h.bands.length)return{bandIndex:e,blockIndex:s,blockBandIndex:e-r};r+=h.bands.length}break;default:throw new Qh(`Invalid band \`${JSON.stringify(e)}\`. Expected string or integer.`)}throw new Qh(`Band not found: ${JSON.stringify(e)}`)}getDataRange(e){let r=1/0,s=-1/0;const h=[],l=new Set;for(const m of e){const{blockIndex:S}=this.getBlockForBand(m);if(S<0)throw new Qh(`Invalid band: ${JSON.stringify(m)}`);const O=this.dataIndex[S];h.includes(S)||h.push(S),l.add(S),r=Math.min(r,O.firstByte),s=Math.max(s,O.lastByte)}if(l.size>this.cacheSize)throw new Qh(`Number of blocks to decode (${l.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:r,lastByte:s,blockIndices:h}}hasBand(e){const{blockIndex:r}=this.getBlockForBand(e);return r>=0}hasDataForBand(e){const{blockIndex:r}=this.getBlockForBand(e);return r>=0&&!!this._decodedBlocks.get(r.toString())}getBandView(e){const{blockIndex:r,blockBandIndex:s}=this.getBlockForBand(e),h=this._decodedBlocks.get(r.toString());if(!h)throw new Qh(`Data for band ${JSON.stringify(e)} of layer "${this.name}" not decoded.`);const l=this.dataIndex[r],m=this.bandShape.reduce((z,w)=>z*w,1),S=s*m,O=h.subarray(S,S+m);return{data:O,bytes:new Uint8Array(O.buffer).subarray(O.byteOffset,O.byteOffset+O.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:l.offset,scale:l.scale}}}qf.setPbf=function(a){Qf=a};class Pf{constructor(e,r,s){this.tasks=e,this._onCancel=r,this._onComplete=s,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(e,r){this._finalized||(this._onComplete(e,r),this._finalized=!0)}}qf.performDecoding=function(a,e){const r=new Uint8Array(a);return Promise.all(e.tasks.map(s=>{const{layerName:h,firstByte:l,lastByte:m,pixelFormat:S,blockShape:O,blockIndex:z,filters:w,codec:R}=s,N=r.subarray(l,m+1),P=new Uint32Array(O[0]*O[1]*O[2]);let D;if(R!=="gzip_data")throw new Qh(`Unhandled codec: ${R}`);return D=function(G,oe){if(!globalThis.DecompressionStream&&oe==="gzip_data")return Promise.resolve(((ve=function(ct){ct[0]==31&&ct[1]==139&&ct[2]==8||Fd(6,"invalid gzip data");var Kt=ct[3],Zt=10;4&Kt&&(Zt+=2+(ct[10]|ct[11]<<8));for(var Ut=(Kt>>3&1)+(Kt>>4&1);Ut>0;Ut-=!ct[Zt++]);return Zt+(2&Kt)}(Oe=G))+8>Oe.length&&Fd(6,"invalid gzip data"),function(ct,Kt,Zt,Ut){var En=ct.length;if(!En||Kt.f&&!Kt.l)return Zt||new Lh(0);var Yt=!Zt,Cn=Yt||Kt.i!=2,Vn=Kt.i;Yt&&(Zt=new Lh(3*En));var zn,Zn,qn=function(om){var Om=Zt.length;if(om>Om){var wg=new Lh(Math.max(2*Om,om));wg.set(Zt),Zt=wg}},hr=Kt.f||0,Kn=Kt.p||0,Zr=Kt.b||0,si=Kt.l,Wr=Kt.d,zi=Kt.m,yi=Kt.n,vi=8*En;do{if(!si){hr=Dh(ct,Kn,1);var li=Dh(ct,Kn+1,3);if(Kn+=3,!li){var lo=ct[(sa=4+((Kn+7)/8|0))-4]|ct[sa-3]<<8,ji=sa+lo;if(ji>En){Vn&&Fd(0);break}Cn&&qn(Zr+lo),Zt.set(ct.subarray(sa,ji),Zr),Kt.b=Zr+=lo,Kt.p=Kn=8*ji,Kt.f=hr;continue}if(li==1)si=mh,Wr=b_,zi=9,yi=5;else if(li==2){var Yi=Dh(ct,Kn,31)+257,Yo=Dh(ct,Kn+10,15)+4,ga=Yi+Dh(ct,Kn+5,31)+1;Kn+=14;for(var Ea=new Lh(ga),pa=new Lh(19),Oa=0;Oa<Yo;++Oa)pa[c1[Oa]]=Dh(ct,Kn+3*Oa,7);Kn+=3*Yo;var ka=Jp(pa),el=(1<<ka)-1,Gs=ph(pa,ka);for(Oa=0;Oa<ga;){var sa,Ds=Gs[Dh(ct,Kn,el)];if(Kn+=15&Ds,(sa=Ds>>4)<16)Ea[Oa++]=sa;else{var Ns=0,Tl=0;for(sa==16?(Tl=3+Dh(ct,Kn,3),Kn+=2,Ns=Ea[Oa-1]):sa==17?(Tl=3+Dh(ct,Kn,7),Kn+=3):sa==18&&(Tl=11+Dh(ct,Kn,127),Kn+=7);Tl--;)Ea[Oa++]=Ns}}var Au=Ea.subarray(0,Yi),vu=Ea.subarray(Yi);zi=Jp(Au),yi=Jp(vu),si=ph(Au,zi),Wr=ph(vu,yi)}else Fd(1);if(Kn>vi){Vn&&Fd(0);break}}Cn&&qn(Zr+131072);for(var Du=(1<<zi)-1,Xl=(1<<yi)-1,ku=Kn;;ku=Kn){var ac=(Ns=si[kh(ct,Kn)&Du])>>4;if((Kn+=15&Ns)>vi){Vn&&Fd(0);break}if(Ns||Fd(2),ac<256)Zt[Zr++]=ac;else{if(ac==256){ku=Kn,si=null;break}var $c=ac-254;ac>264&&($c=Dh(ct,Kn,(1<<(Of=Mm[Oa=ac-257]))-1)+Oy[Oa],Kn+=Of);var Il=Wr[kh(ct,Kn)&Xl],Qd=Il>>4;if(Il||Fd(3),Kn+=15&Il,vu=h1[Qd],Qd>3){var Of=Cm[Qd];vu+=kh(ct,Kn)&(1<<Of)-1,Kn+=Of}if(Kn>vi){Vn&&Fd(0);break}Cn&&qn(Zr+131072);var Bh=Zr+$c;if(Zr<vu){var tf=0-vu,im=Math.min(vu,Bh);for(tf+Zr<0&&Fd(3);Zr<im;++Zr)Zt[Zr]=(void 0)[tf+Zr]}for(;Zr<Bh;++Zr)Zt[Zr]=Zt[Zr-vu]}}Kt.l=si,Kt.p=ku,Kt.b=Zr,Kt.f=hr,si&&(hr=1,Kt.m=zi,Kt.d=Wr,Kt.n=yi)}while(!hr);return Zr!=Zt.length&&Yt?(zn=Zt,((Zn=Zr)==null||Zn>zn.length)&&(Zn=zn.length),new Lh(zn.subarray(0,Zn))):Zt.subarray(0,Zr)}(Oe.subarray(ve,-8),{i:2},new Lh(((ce=Oe)[(Ae=ce.length)-4]|ce[Ae-3]<<8|ce[Ae-2]<<16|ce[Ae-1]<<24)>>>0))));var ce,Ae,Oe,ve;const Fe=ab[oe];if(!Fe)throw new Error(`Unhandled codec: ${oe}`);const Ye=new globalThis.DecompressionStream(Fe);return new Response(new Blob([G]).stream().pipeThrough(Ye)).arrayBuffer().then(ct=>new Uint8Array(ct))}(N,R).then(G=>(function(oe,ce){oe.readFields(Yd,ce)}(new Qf(G),P),new Qp[S](P.buffer))),D.then(G=>{for(let oe=w.length-1;oe>=0;oe--)switch(w[oe]){case"delta_filter":Mx(G,O);break;case"zigzag_filter":ib(G);break;case"bitshuffle_filter":Cx(G,S);break;default:throw new Qh(`Unhandled filter "${w[oe]}"`)}return{layerName:h,blockIndex:z,data:G}}).catch(G=>{throw G})}))},Fi(Pf,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});let _h,Md,Hu,qp,vg,em=null;function bv(){return Jr()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:Md||Jn.DRACO_URL}function wv(){if(Jr()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(qp)return qp;const a=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return qp=WebAssembly.validate(a)?Jn.MESHOPT_SIMD_URL:Jn.MESHOPT_URL,qp}const w_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ev={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},tm={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function yg(a,e,r){const s=r.json.bufferViews.length,h=r.buffers.length;e.bufferView=s,r.json.bufferViews[s]={buffer:h,byteLength:a.byteLength},r.buffers[h]=a}const wp="KHR_draco_mesh_compression";function Am(a,e){const r=a.extensions&&a.extensions[wp];if(!r)return;const s=new Hu.Decoder,h=Ep(e,r.bufferView),l=new Hu.Mesh;if(!s.DecodeArrayToMesh(h,h.byteLength,l))throw new Error("Failed to decode Draco mesh");const m=e.json.accessors[a.indices],S=w_[m.componentType],O=m.count*S.BYTES_PER_ELEMENT,z=Hu._malloc(O);S===Uint16Array?s.GetTrianglesUInt16Array(l,O,z):s.GetTrianglesUInt32Array(l,O,z),yg(Hu.memory.buffer.slice(z,z+O),m,e),Hu._free(z);for(const w of Object.keys(r.attributes)){const R=s.GetAttributeByUniqueId(l,r.attributes[w]),N=e.json.accessors[a.attributes[w]],P=Ev[N.componentType],D=N.count*tm[N.type]*w_[N.componentType].BYTES_PER_ELEMENT,G=Hu._malloc(D);s.GetAttributeDataArrayForAllPoints(l,R,Hu[P],D,G),yg(Hu.memory.buffer.slice(G,G+D),N,e),Hu._free(G)}s.destroy(),l.destroy(),delete a.extensions[wp]}const tp="EXT_meshopt_compression";function fa(a,e){if(!a.extensions||!a.extensions[tp])return;const r=a.extensions[tp],s=new Uint8Array(e.buffers[r.buffer],r.byteOffset||0,r.byteLength||0),h=new Uint8Array(r.count*r.byteStride);vg.decodeGltfBuffer(h,r.count,r.byteStride,s,r.mode,r.filter),a.buffer=e.buffers.length,a.byteOffset=0,e.buffers[a.buffer]=h.buffer,delete a.extensions[tp]}const Ka=1179937895,Kl=new TextDecoder("utf8");function Yl(a,e){return new URL(a,e).href}function Sl(a,e,r,s){return fetch(Yl(a.uri,s)).then(h=>h.arrayBuffer()).then(h=>{e.buffers[r]=h})}function Ep(a,e){const r=a.json.bufferViews[e];return new Uint8Array(a.buffers[r.buffer],r.byteOffset||0,r.byteLength)}function ic(a,e,r,s){if(a.uri){const h=Yl(a.uri,s);return fetch(h).then(l=>l.blob()).then(l=>createImageBitmap(l)).then(l=>{e.images[r]=l})}if(a.bufferView!==void 0){const h=Ep(e,a.bufferView),l=new Blob([h],{type:a.mimeType});return createImageBitmap(l).then(m=>{e.images[r]=m})}}function Xd(a,e=0,r){const s={json:null,images:[],buffers:[]};if(new Uint32Array(a,e,1)[0]===Ka){const w=new Uint32Array(a,e);let R=2;const N=(w[R++]>>2)-3,P=w[R++]>>2;if(R++,s.json=JSON.parse(Kl.decode(w.subarray(R,R+P))),R+=P,R<N){const D=w[R++];R++;const G=e+(R<<2);s.buffers[0]=a.slice(G,G+D)}}else s.json=JSON.parse(Kl.decode(new Uint8Array(a,e)));const{buffers:h,images:l,meshes:m,extensionsUsed:S,bufferViews:O}=s.json;let z=Promise.resolve();if(h){const w=[];for(let R=0;R<h.length;R++){const N=h[R];N.uri?w.push(Sl(N,s,R,r)):s.buffers[R]||(s.buffers[R]=null)}z=Promise.all(w)}return z.then(()=>{const w=[],R=S&&S.includes(wp),N=S&&S.includes(tp);if(R&&w.push(function(){if(!Hu)return _h!=null?_h:(_h=function(P){let D,G=null;function oe(){D=new Uint8Array(G.buffer)}function ce(){throw new Error("Unexpected Draco error.")}const Ae={a:{a:ce,d:function(Oe,ve,Fe){return D.copyWithin(Oe,ve,ve+Fe)},c:function(Oe){const ve=D.length,Fe=Math.max(Oe>>>0,Math.ceil(1.2*ve)),Ye=Math.ceil((Fe-ve)/65536);try{return G.grow(Ye),oe(),!0}catch(ct){return!1}},b:ce}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(P,Ae):P.then(Oe=>Oe.arrayBuffer()).then(Oe=>WebAssembly.instantiate(Oe,Ae))).then(Oe=>{const{Rb:ve,Qb:Fe,P:Ye,T:ct,X:Kt,Ja:Zt,La:Ut,Qa:En,Va:Yt,Wa:Cn,eb:Vn,jb:zn,f:Zn,e:qn,yb:hr,zb:Kn,Ab:Zr,Bb:si,Db:Wr,Gb:zi}=Oe.instance.exports;G=qn;const yi=(()=>{let vi=0,li=0,lo=0,ji=0;return Yi=>{lo&&(ve(ji),ve(vi),li+=lo,lo=vi=0),vi||(li+=128,vi=Fe(li));const Yo=Yi.length+7&-8;let ga=vi;Yo>=li&&(lo=Yo,ga=ji=Fe(Yo));for(let Ea=0;Ea<Yi.length;Ea++)D[ga+Ea]=Yi[Ea];return ga}})();return oe(),Zn(),{memory:qn,_free:ve,_malloc:Fe,Mesh:class{constructor(){this.ptr=Ye()}destroy(){ct(this.ptr)}},Decoder:class{constructor(){this.ptr=Zt()}destroy(){zn(this.ptr)}DecodeArrayToMesh(vi,li,lo){const ji=yi(vi),Yi=Ut(this.ptr,ji,li,lo.ptr);return!!Kt(Yi)}GetAttributeByUniqueId(vi,li){return{ptr:En(this.ptr,vi.ptr,li)}}GetTrianglesUInt16Array(vi,li,lo){Yt(this.ptr,vi.ptr,li,lo)}GetTrianglesUInt32Array(vi,li,lo){Cn(this.ptr,vi.ptr,li,lo)}GetAttributeDataArrayForAllPoints(vi,li,lo,ji,Yi){Vn(this.ptr,vi.ptr,li.ptr,lo,ji,Yi)}},DT_INT8:hr(),DT_UINT8:Kn(),DT_INT16:Zr(),DT_UINT16:si(),DT_UINT32:Wr(),DT_FLOAT32:zi()}})}(fetch(bv())),_h.then(P=>{Hu=P,_h=void 0}))}()),N&&w.push(function(){if(vg)return;const P=function(D){let G;const oe=WebAssembly.instantiateStreaming(D,{}).then(Oe=>{G=Oe.instance,G.exports.__wasm_call_ctors()}),ce={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ae={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:oe,supported:!0,decodeGltfBuffer(Oe,ve,Fe,Ye,ct,Kt){(function(Zt,Ut,En,Yt,Cn,Vn,zn){const Zn=Zt.exports.sbrk,qn=Yt+3&-4,hr=Zn(qn*Cn),Kn=Zn(Vn.length),Zr=new Uint8Array(Zt.exports.memory.buffer);Zr.set(Vn,Kn);const si=Ut(hr,Yt,Cn,Kn,Vn.length);if(si===0&&zn&&zn(hr,qn,Cn),En.set(Zr.subarray(hr,hr+Yt*Cn)),Zn(hr-Zn(0)),si!==0)throw new Error(`Malformed buffer data: ${si}`)})(G,G.exports[Ae[ct]],Oe,ve,Fe,Ye,G.exports[ce[Kt]])}}}(fetch(wv()));return P.ready.then(()=>{vg=P})}()),l)for(let P=0;P<l.length;P++)w.push(ic(l[P],s,P,r));return(w.length?Promise.all(w):Promise.resolve()).then(()=>{if(R&&m)for(const{primitives:P}of m)for(const D of P)Am(D,s);if(N&&m&&O)for(const P of O)fa(P,s);return s})})}function qh(a,e){const r=a.json.bufferViews[e.bufferView],s=w_[e.componentType];return new s(a.buffers[r.buffer],(e.byteOffset||0)+(r.byteOffset||0),e.count*(r.byteStride&&r.byteStride!==tm[e.type]*s.BYTES_PER_ELEMENT?r.byteStride/s.BYTES_PER_ELEMENT:tm[e.type]))}function xg(a,e,r,s){const h=w_[e.componentType],l=function(w){switch(w){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(h),m=a.json.bufferViews[e.bufferView],S=m.byteStride?m.byteStride/h.BYTES_PER_ELEMENT:tm[e.type],O=r.float32,z=O.length/r.capacity;for(let w=0,R=0;w<e.count*S;w+=S,R+=z)for(let N=0;N<z;N++)O[R+N]=s[w+N]*l;r._trim()}function oc(a,e,r){const s=a.indices,h=a.attributes,l={};l.indexArray=new _u;const m=e.json.accessors[s],S=m.count/3;l.indexArray.reserve(S);const O=qh(e,m);for(let N=0;N<S;N++)l.indexArray.emplaceBack(O[3*N],O[3*N+1],O[3*N+2]);l.indexArray._trim(),l.vertexArray=new cl;const z=e.json.accessors[h.POSITION];l.vertexArray.reserve(z.count);const w=qh(e,z);for(let N=0;N<z.count;N++)l.vertexArray.emplaceBack(w[3*N],w[3*N+1],w[3*N+2]);if(l.vertexArray._trim(),l.aabb=new uo(z.min,z.max),l.centroid=function(N,P){const D=[0,0,0],G=N.length;if(G>0){for(let oe=0;oe<G;oe++){const ce=3*N[oe];D[0]+=P[ce],D[1]+=P[ce+1],D[2]+=P[ce+2]}D[0]/=G,D[1]/=G,D[2]/=G}return D}(O,w),h.COLOR_0!==void 0){const N=e.json.accessors[h.COLOR_0],P=tm[N.type],D=qh(e,N);l.colorArray=P===3?new cl:new dl,l.colorArray.resize(N.count),xg(e,N,l.colorArray,D)}if(h.NORMAL!==void 0){l.normalArray=new cl;const N=e.json.accessors[h.NORMAL];l.normalArray.resize(N.count);const P=qh(e,N);xg(e,N,l.normalArray,P)}if(h.TEXCOORD_0!==void 0&&r.length>0){l.texcoordArray=new $d;const N=e.json.accessors[h.TEXCOORD_0];l.texcoordArray.resize(N.count);const P=qh(e,N);xg(e,N,l.texcoordArray,P)}if(h._FEATURE_ID_RGBA4444!==void 0){const N=e.json.accessors[h._FEATURE_ID_RGBA4444];e.json.extensionsUsed&&e.json.extensionsUsed.includes("EXT_meshopt_compression")&&(l.featureData=qh(e,N))}h._FEATURE_RGBA4444!==void 0&&(l.featureData=new Uint32Array(qh(e,e.json.accessors[h._FEATURE_RGBA4444]).buffer));const R=a.material;return l.material=function(N,P){const{emissiveFactor:D=[0,0,0],alphaMode:G="OPAQUE",alphaCutoff:oe=.5,normalTexture:ce,occlusionTexture:Ae,emissiveTexture:Oe,doubleSided:ve}=N,{baseColorFactor:Fe=[1,1,1,1],metallicFactor:Ye=1,roughnessFactor:ct=1,baseColorTexture:Kt,metallicRoughnessTexture:Zt}=N.pbrMetallicRoughness||{},Ut=Ae?P[Ae.index]:void 0;if(Ae&&Ae.extensions&&Ae.extensions.KHR_texture_transform&&Ut){const En=Ae.extensions.KHR_texture_transform;Ut.offsetScale=[En.offset[0],En.offset[1],En.scale[0],En.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Uo(...Fe),metallicFactor:Ye,roughnessFactor:ct,baseColorTexture:Kt?P[Kt.index]:void 0,metallicRoughnessTexture:Zt?P[Zt.index]:void 0},doubleSided:ve,emissiveFactor:D,alphaMode:G,alphaCutoff:oe,normalTexture:ce?P[ce.index]:void 0,occlusionTexture:Ut,emissionTexture:Oe?P[Oe.index]:void 0,defined:N.defined===void 0}}(R!==void 0?e.json.materials[R]:{defined:!1},r),l}function p1(a,e,r){const{matrix:s,rotation:h,translation:l,scale:m,mesh:S,extras:O,children:z}=a,w={};if(w.matrix=s||le.mat4.fromRotationTranslationScale([],h||[0,0,0,1],l||[0,0,0],m||[1,1,1]),S!==void 0){w.meshes=r[S];const R=w.anchor=[0,0];for(const N of w.meshes){const{min:P,max:D}=N.aabb;R[0]+=P[0]+D[0],R[1]+=P[1]+D[1]}R[0]=Math.floor(R[0]/w.meshes.length/2),R[1]=Math.floor(R[1]/w.meshes.length/2)}if(O&&(O.id&&(w.id=O.id),O.lights&&(w.lights=function(R){if(!R.length)return[];const N=function(ce){const Ae=atob(ce),Oe=new Uint8Array(Ae.length);for(let ve=0;ve<Ae.length;ve++)Oe[ve]=Ae.codePointAt(ve);return Oe}(R),P=[],D=N.length/24,G=new Uint16Array(N.buffer),oe=new Float32Array(N.buffer);for(let ce=0;ce<D;ce++){const Ae=G[2*ce*6]/30,Oe=G[2*ce*6+1]/30,ve=G[2*ce*6+10]/100,Fe=oe[6*ce+1],Ye=oe[6*ce+2],ct=oe[6*ce+3],Kt=oe[6*ce+4],Zt=ct-Fe,Ut=Kt-Ye,En=Math.hypot(Zt,Ut);P.push({pos:[Fe+.5*Zt,Ye+.5*Ut,Oe],normal:[Ut/En,-Zt/En,0],width:En,height:Ae,depth:ve,points:[Fe,Ye,ct,Kt]})}return P}(O.lights))),z){const R=[];for(const N of z)R.push(p1(e.json.nodes[N],e,r));w.children=R}return w}function sb(a){if(a.vertices.length===0||a.indices.length===0)return null;const e=new nc(a.vertices,a.indices,8,256),[r,s]=[e.min.clone(),e.max.clone()];return{vertices:a.vertices,indices:a.indices,grid:e,min:r,max:s}}function lb(a){if(!a.extras||!a.extras.ground)return null;const e=a.extras.ground;if(!e||!Array.isArray(e)||e.length===0)return null;const r=e[0];if(!r||!Array.isArray(r)||r.length===0)return null;const s=[];for(const m of r){if(!Array.isArray(m)||m.length!==2)continue;const S=m[0],O=m[1];typeof S=="number"&&typeof O=="number"&&s.push(new Mt(S,O))}if(s.length<3)return null;s.length>1&&s[s.length-1].equals(s[0])&&s.pop();let h=0;for(let m=0;m<s.length;m++){const S=s[m],O=s[(m+1)%s.length],z=s[(m+2)%s.length];h+=(S.x-O.x)*(z.y-O.y)-(z.x-O.x)*(S.y-O.y)}h>0&&s.reverse();const l=jf(s.flatMap(m=>[m.x,m.y]),[]);return l.length===0?null:{vertices:s,indices:l}}function Ox(a,e){const r=[],s=[];let h=0;const l=[];for(const m of a){h=r.length;const S=m.vertexArray.float32,O=m.indexArray.uint16;for(let z=0;z<m.vertexArray.length;z++)l[0]=S[3*z+0],l[1]=S[3*z+1],l[2]=S[3*z+2],le.vec3.transformMat4(l,l,e),r.push(new Mt(l[0],l[1]));for(let z=0;z<3*m.indexArray.length;z++)s.push(O[z]+h)}if(s.length%3!=0)return null;for(let m=0;m<s.length;m+=3){const S=r[s[m+0]],O=r[s[m+1]],z=r[s[m+2]];(S.x-O.x)*(z.y-O.y)-(z.x-O.x)*(S.y-O.y)>0&&([s[m+1],s[m+2]]=[s[m+2],s[m+1]])}return{vertices:r,indices:s}}function m1(a){const e=function(O,z){const w=[],R=WebGL2RenderingContext;if(O.json.textures)for(const N of O.json.textures){const P={magFilter:R.LINEAR,minFilter:R.NEAREST,wrapS:R.REPEAT,wrapT:R.REPEAT};N.sampler!==void 0&&Object.assign(P,O.json.samplers[N.sampler]),w.push({image:z[N.source],sampler:P,uploaded:!1})}return w}(a,a.images),r=function(O,z){const w=[];for(const R of O.json.meshes){const N=[];for(const P of R.primitives)N.push(oc(P,O,z));w.push(N)}return w}(a,e),{scenes:s,scene:h,nodes:l}=a.json,m=s?s[h||0].nodes:l,S=[];for(const O of m)S.push(p1(l[O],a,r));return function(O,z,w){const R={},N=new Set;for(let P=0;P<O.length;P++){const D=w[z[P]];if(!D.extras)continue;const G=D.extras["mapbox:footprint:version"],oe=D.extras["mapbox:footprint:id"];(G||oe)&&N.add(P),G==="1.0.0"&&oe&&(R[oe]=P)}for(let P=0;P<O.length;P++){if(N.has(P))continue;const D=O[P],G=w[z[P]];if(!G.extras)continue;let oe=null;D.id in R&&(oe=Ox(O[R[D.id]].meshes,D.matrix)),oe||(oe=lb(G)),oe&&(D.footprint=sb(oe))}if(N.size>0){const P=Array.from(N.values()).sort((D,G)=>D-G);for(let D=P.length-1;D>=0;D--)O.splice(P[D],1)}}(S,m,a.json.nodes),S}function Rx(a){a.heightmap=new Float32Array(4096),a.heightmap.fill(-1);const e=a.vertexArray.float32,r=a.aabb.min[0]-1,s=a.aabb.min[1]-1,h=Sm/(a.aabb.max[0]-r+2),l=Sm/(a.aabb.max[1]-s+2);for(let m=0;m<e.length;m+=3){const S=e[m+2],O=(e[m+0]-r)*h|0,z=(e[m+1]-s)*l|0;S>a.heightmap[z*Sm+O]&&(a.heightmap[z*Sm+O]=S)}}function Nh(a,e){const r={};r.indexArray=new _u,r.indexArray.reserve(4*a.length),r.vertexArray=new cl,r.vertexArray.reserve(10*a.length),r.colorArray=new dl,r.vertexArray.reserve(10*a.length);let s=0;for(const m of a){const S=Math.min(10,Math.max(4,1.3*m.height))*e,O=[-m.normal[1],m.normal[0],0],z=Math.min(.29,.1*m.width/m.depth),w=m.width-2*m.depth*e*(z+.01),R=le.vec3.scaleAndAdd([],m.pos,O,w/2),N=le.vec3.scaleAndAdd([],m.pos,O,-w/2),P=[R[0],R[1],R[2]+m.height],D=[N[0],N[1],N[2]+m.height],G=le.vec3.scaleAndAdd([],m.normal,O,z);le.vec3.scale(G,G,S);const oe=le.vec3.scaleAndAdd([],m.normal,O,-z);le.vec3.scale(oe,oe,S),le.vec3.add(G,R,G),le.vec3.add(oe,N,oe),R[2]+=.1,N[2]+=.1,r.vertexArray.emplaceBack(G[0],G[1],G[2]),r.vertexArray.emplaceBack(oe[0],oe[1],oe[2]),r.vertexArray.emplaceBack(R[0],R[1],R[2]),r.vertexArray.emplaceBack(N[0],N[1],N[2]),r.vertexArray.emplaceBack(P[0],P[1],P[2]),r.vertexArray.emplaceBack(D[0],D[1],D[2]),r.vertexArray.emplaceBack(R[0],R[1],R[2]),r.vertexArray.emplaceBack(N[0],N[1],N[2]),r.vertexArray.emplaceBack(G[0],G[1],G[2]),r.vertexArray.emplaceBack(oe[0],oe[1],oe[2]);const ce=w/S/2;r.colorArray.emplaceBack(-ce-z,-1,ce,.8),r.colorArray.emplaceBack(ce+z,-1,ce,.8),r.colorArray.emplaceBack(-ce,0,ce,1.3),r.colorArray.emplaceBack(ce,0,ce,1.3),r.colorArray.emplaceBack(ce+z,-.8,ce,.7),r.colorArray.emplaceBack(ce+z,-.8,ce,.7),r.colorArray.emplaceBack(0,0,ce,1.3),r.colorArray.emplaceBack(0,0,ce,1.3),r.colorArray.emplaceBack(ce+z,-1.2,ce,.8),r.colorArray.emplaceBack(ce+z,-1.2,ce,.8),r.indexArray.emplaceBack(6+s,4+s,8+s),r.indexArray.emplaceBack(7+s,9+s,5+s),r.indexArray.emplaceBack(0+s,1+s,2+s),r.indexArray.emplaceBack(1+s,3+s,2+s),s+=10}const h={defined:!0,emissiveFactor:[0,0,0]},l={};return l.baseColorFactor=Uo.white,h.pbrMetallicRoughness=l,r.material=h,r.aabb=new uo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),r}class gh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const s=e[r];this._stringToNumber[s]=r,this._numberToString[r]=s}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const zh=["id","tile","layer","source","sourceLayer","state"];class ef{constructor(e,r,s,h,l){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=s,this._y=h,this.properties=e.properties,this.id=l}clone(){const e=new ef(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(e.state=Object.assign({},this.state)),this.layer&&(e.layer=Object.assign({},this.layer)),this.source&&(e.source=this.source),this.sourceLayer&&(e.sourceLayer=this.sourceLayer),e}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const r of zh)this[r]!==void 0&&(e[r]=this[r]);return e}}class nm{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new fu(Ft,16,0),this.featureIndexArray=new _f,this.promoteId=r,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(e,r,s,h,l,m=0,S=0){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,h,l,m);const z=this.grid;for(let w=0;w<r.length;w++){const R=r[w],N=[1/0,1/0,-1/0,-1/0];for(let P=0;P<R.length;P++){const D=R[P];N[0]=Math.min(N[0],D.x),N[1]=Math.min(N[1],D.y),N[2]=Math.max(N[2],D.x),N[3]=Math.max(N[3],D.y)}S!==0&&(N[0]-=S,N[1]-=S,N[2]+=S,N[3]+=S),N[0]<Ft&&N[1]<Ft&&N[2]>=0&&N[3]>=0&&z.insert(O,N[0],N[1],N[2],N[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Np.VectorTile(new n_(this.rawTileData)).layers,this.sourceLayerCoder=new gh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r){const{tilespaceGeometry:s,transform:h,tileTransform:l,pixelPosMatrix:m,availableImages:S}=r;this.loadVTLayers(),this.serializedLayersCache.clear();const O=s.bufferedTilespaceBounds,z=this.grid.query(O.min.x,O.min.y,O.max.x,O.max.y,(P,D,G,oe)=>Rn(s.bufferedTilespaceGeometry,P,D,G,oe));z.sort(Fh);let w=null;h.elevation&&z.length>0&&(w=Wp.create(h.elevation,this.tileID));const R={};let N;for(let P=0;P<z.length;P++){const D=z[P];if(D===N)continue;N=D;const G=this.featureIndexArray.get(D);let oe=null;this.is3DTile?this.loadMatchingModelFeature(R,G,e,s,h):this.loadMatchingFeature(R,G,e,S,(ce,Ae,Oe,ve=0)=>(oe||(oe=re(ce,this.tileID.canonical,l)),Ae.queryIntersectsFeature(s,ce,Oe,oe,this.z,h,m,w,ve)))}return R}loadMatchingFeature(e,r,s,h,l){const{featureIndex:m,bucketIndex:S,sourceLayerIndex:O,layoutVertexArrayOffset:z}=r,w=this.bucketLayerIDs[S],R=s.layers,N=Object.keys(R);if(N.length&&!function(ce,Ae){for(let Oe=0;Oe<ce.length;Oe++)if(Ae.indexOf(ce[Oe])>=0)return!0;return!1}(N,w))return;const P=s.sourceCache,D=this.sourceLayerCoder.decode(O),G=this.vtLayers[D].feature(m),oe=this.getId(G,D);for(let ce=0;ce<w.length;ce++){const Ae=w[ce];if(!R[Ae])continue;const{styleLayer:Oe,targets:ve}=R[Ae];let Fe={};oe!==void 0&&(Fe=P.getFeatureState(Oe.sourceLayer,oe));const Ye=!l||l(G,Oe,Fe,z);if(!Ye)continue;const ct=new ef(G,this.z,this.x,this.y,oe);ct.tile=this.tileID.canonical,ct.state=Fe;let Kt=this.serializedLayersCache.get(Ae);Kt||(Kt=Oe.serialize(),Kt.id=Ae,this.serializedLayersCache.set(Ae,Kt)),ct.source=Kt.source,ct.sourceLayer=Kt["source-layer"],ct.layer=Lt({},Kt),ct.layer.paint=vh(Kt.paint,Oe.paint,G,Fe,h),ct.layer.layout=vh(Kt.layout,Oe.layout,G,Fe,h);let Zt=!1;for(const Ut of ve){this.updateFeatureProperties(ct,Ut);const{filter:En}=Ut;if(En){if(G.properties=ct.properties,En.needGeometry){const Yt=fe(G,!0);if(!En.filter(new Ts(this.tileID.overscaledZ),Yt,this.tileID.canonical))continue}else if(!En.filter(new Ts(this.tileID.overscaledZ),G))continue}Zt=!0,Ut.targetId&&this.addFeatureVariant(ct,Ut)}Zt&&this.appendToResult(e,Ae,m,ct,Ye)}}loadMatchingModelFeature(e,r,s,h,l){const m=this.bucketLayerIDs[0][0],S=s.layers;if(!S[m])return;const{styleLayer:O,targets:z}=S[m];if(O.type!=="model")return;const w=h.tile,R=r.featureIndex,N=w.getBucket(O);if(!(N&&N instanceof Lu))return;const P=function(Kt,Zt,Ut,En){const Yt=Kt.getNodesInfo()[Zt];if(Yt.hiddenByReplacement||!Yt.node.meshes)return;let Cn=Number.MAX_VALUE;const Vn=Yt.node,zn=Ut.tile,Zn=En.calculatePosMatrix(zn.tileID.toUnwrapped(),En.worldSize),qn=Yt.evaluatedScale;let hr=0;En.elevation&&Vn.elevation&&(hr=Vn.elevation*En.elevation.exaggeration()),le.mat4.translate(Zn,Zn,[(Vn.anchor?Vn.anchor[0]:0)*(qn[0]-1),(Vn.anchor?Vn.anchor[1]:0)*(qn[1]-1),hr]),le.mat4.scale(Zn,Zn,qn);const Kn=Ut.queryGeometry,Zr=Kn.isPointQuery()?Kn.screenBounds:Kn.screenGeometry,si=function(zi){const yi=le.mat4.multiply([],Zn,zi.matrix);le.mat4.multiply(yi,En.expandedFarZProjMatrix,yi);for(let vi=0;vi<zi.meshes.length;++vi){const li=zi.meshes[vi];if(vi===zi.lightMeshIndex)continue;const lo=wy(Zr,En,yi,li.aabb);lo!=null&&(Cn=Math.min(lo,Cn))}if(zi.children)for(const vi of zi.children)si(vi)};if(si(Vn),Cn===Number.MAX_VALUE)return;const Wr=new Da(0,0);return V0(zn.tileID.canonical,Wr,Yt.node.anchor[0],Yt.node.anchor[1]),{intersectionZ:Cn,position:Wr,feature:Yt.feature}}(N,R,h,l);if(!P)return;const{z:D,x:G,y:oe}=w.tileID.canonical,{feature:ce,intersectionZ:Ae,position:Oe}=P;let ve={};ce.id!==void 0&&(ve=s.sourceCache.getFeatureState(O.sourceLayer,ce.id));const Fe=new ef({},D,G,oe,ce.id);Fe.tile=this.tileID.canonical,Fe.state=ve,Fe.properties=ce.properties,Fe.geometry={type:"Point",coordinates:[Oe.lng,Oe.lat]};let Ye=this.serializedLayersCache.get(m);Ye||(Ye=O.serialize(),Ye.id=m,this.serializedLayersCache.set(m,Ye)),Fe.source=Ye.source,Fe.sourceLayer=Ye["source-layer"],Fe.layer=Lt({},Ye);let ct=!1;for(const Kt of z){this.updateFeatureProperties(Fe,Kt);const{filter:Zt}=Kt;if(Zt){if(ce.properties=Fe.properties,Zt.needGeometry){if(!Zt.filter(new Ts(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!Zt.filter(new Ts(this.tileID.overscaledZ),ce))continue}ct=!0,Kt.targetId&&this.addFeatureVariant(Fe,Kt)}ct&&this.appendToResult(e,m,R,Fe,Ae)}updateFeatureProperties(e,r,s){if(r.properties){const h={};for(const l in r.properties){const m=r.properties[l].evaluate({zoom:this.z},e._vectorTileFeature,e.state,e.tile,s);m!=null&&(h[l]=m)}e.properties=h}}addFeatureVariant(e,r,s){const h={target:r.target,namespace:r.namespace,uniqueFeatureID:r.uniqueFeatureID};r.properties&&(h.properties=e.properties),e.variants=e.variants||{},e.variants[r.targetId]=e.variants[r.targetId]||[],e.variants[r.targetId].push(h)}appendToResult(e,r,s,h,l){let m=e[r];m===void 0&&(m=e[r]=[]),m.push({featureIndex:s,feature:h,intersectionZ:l})}lookupSymbolFeatures(e,r,s,h,l){const m={};this.loadVTLayers();for(const S of e)this.loadMatchingFeature(m,{bucketIndex:r,sourceLayerIndex:s,featureIndex:S,layoutVertexArrayOffset:0},h,l);return m}loadFeature(e){const{featureIndex:r,sourceLayerIndex:s}=e;this.loadVTLayers();const h=this.sourceLayerCoder.decode(s),l=this.vtFeatures[h];if(l[r])return l[r];const m=this.vtLayers[h].feature(r);return l[r]=m,m}hasLayer(e){for(const r of this.bucketLayerIDs)for(const s of r)if(e===s)return!0;return!1}getId(e,r){let s=e.id;if(this.promoteId){const h=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[r];if(h!=null)if(Array.isArray(h)){if(!this.promoteIdExpression){const l=Fu(h);if(l.result!=="success"){const m=l.value.map(S=>`${S.key}: ${S.message}`).join(", ");return void cn(`Failed to create expression for promoteId: ${m}`)}this.promoteIdExpression=l.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Ql),s=this.promoteIdExpression.evaluate({zoom:0},e)}else s=e.properties[h];typeof s=="boolean"&&(s=Number(s))}return s}}function vh(a,e,r,s,h){return In(a,(l,m)=>{const S=e instanceof Qu?e.get(m):null;return S&&S.evaluate?S.evaluate(r,s,h):S})}function Fh(a,e){return e-a}Fi(nm,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const rm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Jd{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,s]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=s>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const l=rm[15&s];if(!l)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(e,2,1),[S]=new Uint32Array(e,4,1);return new Jd(S,m,l,e)}constructor(e,r=64,s=Float64Array,h){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const l=rm.indexOf(this.ArrayType),m=2*e*this.ArrayType.BYTES_PER_ELEMENT,S=e*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-S%8)%8;if(l<0)throw new Error(`Unexpected typed array class: ${s}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+S+O,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+m+S+O),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+S+O,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+l]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=r,s}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Sp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:l,coords:m,nodeSize:S}=this,O=[0,l.length-1,0],z=[];for(;O.length;){const w=O.pop()||0,R=O.pop()||0,N=O.pop()||0;if(R-N<=S){for(let oe=N;oe<=R;oe++){const ce=m[2*oe],Ae=m[2*oe+1];ce>=e&&ce<=s&&Ae>=r&&Ae<=h&&z.push(l[oe])}continue}const P=N+R>>1,D=m[2*P],G=m[2*P+1];D>=e&&D<=s&&G>=r&&G<=h&&z.push(l[P]),(w===0?e<=D:r<=G)&&(O.push(N),O.push(P-1),O.push(1-w)),(w===0?s>=D:h>=G)&&(O.push(P+1),O.push(R),O.push(1-w))}return z}within(e,r,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:l,nodeSize:m}=this,S=[0,h.length-1,0],O=[],z=s*s;for(;S.length;){const w=S.pop()||0,R=S.pop()||0,N=S.pop()||0;if(R-N<=m){for(let oe=N;oe<=R;oe++)Tv(l[2*oe],l[2*oe+1],e,r)<=z&&O.push(h[oe]);continue}const P=N+R>>1,D=l[2*P],G=l[2*P+1];Tv(D,G,e,r)<=z&&O.push(h[P]),(w===0?e-s<=D:r-s<=G)&&(S.push(N),S.push(P-1),S.push(1-w)),(w===0?e+s>=D:r+s>=G)&&(S.push(P+1),S.push(R),S.push(1-w))}return O}}function Sp(a,e,r,s,h,l){if(h-s<=r)return;const m=s+h>>1;Sv(a,e,m,s,h,l),Sp(a,e,r,s,m-1,1-l),Sp(a,e,r,m+1,h,1-l)}function Sv(a,e,r,s,h,l){for(;h>s;){if(h-s>600){const z=h-s+1,w=r-s+1,R=Math.log(z),N=.5*Math.exp(2*R/3),P=.5*Math.sqrt(R*N*(z-N)/z)*(w-z/2<0?-1:1);Sv(a,e,r,Math.max(s,Math.floor(r-w*N/z+P)),Math.min(h,Math.floor(r+(z-w)*N/z+P)),l)}const m=e[2*r+l];let S=s,O=h;for(Pm(a,e,s,r),e[2*h+l]>m&&Pm(a,e,s,h);S<O;){for(Pm(a,e,S,O),S++,O--;e[2*S+l]<m;)S++;for(;e[2*O+l]>m;)O--}e[2*s+l]===m?Pm(a,e,s,O):(O++,Pm(a,e,O,h)),O<=r&&(s=O+1),r<=O&&(h=O-1)}}function Pm(a,e,r,s){bg(a,r,s),bg(e,2*r,2*s),bg(e,2*r+1,2*s+1)}function bg(a,e,r){const s=a[e];a[e]=a[r],a[r]=s}function Tv(a,e,r,s){const h=a-r,l=e-s;return h*h+l*l}n.$=rf,n.A=cs,n.B=2,n.C=xm,n.D=xp,n.E=ao,n.F=oy,n.G=class extends av{},n.H=ol,n.I=zd,n.J=hl,n.K=od,n.L=_s,n.M=$l,n.N=zu,n.O=Iu,n.P=Mt,n.Q=yd,n.R=yo,n.S=pd,n.T=P0,n.U=Fu,n.V=av,n.W=Ir,n.X=ni,n.Y=tr,n.Z=ms,n._=No,n.a=function(a){return Jn.API_CDN_URL_REGEX.test(a)},n.a$=ef,n.a0=Xi,n.a1=tu,n.a2=function(a){const e=a.value;let r=[];if(!e)return r;const s=ol(e);return s!=="string"?(r=r.concat([new av(a.key,e,`string expected, "${s}" found`)]),r):(dg(e,!0)||(r=r.concat([new av(a.key,e,`invalid url "${e}"`)])),r)},n.a3=gr,n.a4=Va,n.a5=gl,n.a6=di,n.a7=class{constructor(a){this.specification=a}possiblyEvaluate(a,e){return mr(a.expression.evaluate(e))}interpolate(a,e,r){return{x:$i(a.x,e.x,r),y:$i(a.y,e.y,r),z:$i(a.z,e.z,r),azimuthal:$i(a.azimuthal,e.azimuthal,r),polar:$i(a.polar,e.polar,r)}}},n.a8=Ts,n.a9=zc,n.aA=Qc,n.aB=class{constructor(a){this.entries={},this.scheduler=a}request(a,e,r,s){const h=this.entries[a]=this.entries[a]||{callbacks:[]};if(h.result){const[l,m]=h.result;return this.scheduler?this.scheduler.add(()=>{s(l,m)},e):s(l,m),()=>{}}return h.callbacks.push(s),h.cancel||(h.cancel=r((l,m)=>{h.result=[l,m];for(const S of h.callbacks)this.scheduler?this.scheduler.add(()=>{S(l,m)},e):S(l,m);setTimeout(()=>delete this.entries[a],3e3)})),()=>{h.result||(h.callbacks=h.callbacks.filter(l=>l!==s),h.callbacks.length||(h.cancel(),delete this.entries[a]))}}},n.aC=Uu,n.aD=function(a,e,r){const s=JSON.stringify(a.request);return a.data&&(this.deduped.entries[s]={result:[null,a.data]}),this.deduped.request(s,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},h=>{const l=$o(a.request,(m,S,O,z)=>{m?h(m):S&&h(null,{vectorTile:r?void 0:new Np.VectorTile(new n_(S)),rawData:S,cacheControl:O,expires:z})});return()=>{l.cancel(),h()}},e)},n.aE=function(a){Yr++,Yr>Fn&&(a.getActor().send("enforceCacheSizeLimit",rn),Yr=0)},n.aF=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},n.aG=mi,n.aH=xy,n.aI=L0,n.aJ=yy,n.aK=function(a,e){const r=document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let s=0;s<a.length;s++){const h=document.createElement("source");Aa(a[s])||(r.crossOrigin="Anonymous"),h.src=a[s],r.appendChild(h)}return{cancel:()=>{}}},n.aL=iv,n.aM=function(a){return fetch(a).then(e=>e.arrayBuffer()).then(e=>Xd(e,0,a))},n.aN=m1,n.aO=class{constructor(a,e,r,s){this.id=a,this.position=e!=null?new Da(e[0],e[1]):new Da(0,0),this.orientation=r!=null?r:[0,0,0],this.nodes=s,this.uploaded=!1,this.aabb=new uo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(a,e){if(le.mat4.multiply(a.matrix,e,a.matrix),a.meshes)for(const r of a.meshes){const s=uo.applyTransformFast(r.aabb,a.matrix);this.aabb.encapsulate(s)}if(a.children)for(const r of a.children)this._applyTransformations(r,a.matrix)}computeBoundsAndApplyParent(){const a=le.mat4.identity([]);for(const e of this.nodes)this._applyTransformations(e,a)}computeModelMatrix(a,e,r,s,h,l,m=!1){Ah(this.matrix,this,a.transform,this.position,e,r,s,h,l,m)}upload(a){if(!this.uploaded){for(const e of this.nodes)Ph(e,a);for(const e of this.nodes)ys(e);this.uploaded=!0}}destroy(){for(const a of this.nodes)hg(a)}},n.aP=ar,n.aQ=u_,n.aR=ld,n.aS=dc,n.aT=Ha,n.aU=_u,n.aV=en,n.aW=ih,n.aX=ag,n.aY=function(){uc.isLoading()||uc.isLoaded()||jc()!=="deferred"||Bd()},n.aZ=sm,n.a_=fe,n.aa=o,n.ab=le,n.ac=At,n.ad=Qu,n.ae=td,n.af=$i,n.ag=Ft,n.ah=es,n.ai=lr,n.aj=Uo,n.ak=class{constructor(a){this.specification=a}possiblyEvaluate(a,e){return function([r,s]){const h=mr([1,r,s]);return{x:h.x,y:h.y,z:h.z}}(a.expression.evaluate(e))}interpolate(a,e,r){return{x:$i(a.x,e.x,r),y:$i(a.y,e.y,r),z:$i(a.z,e.z,r)}}},n.al=function(a,e,r=0,s=!0){const h=new Mt(r,r),l=a.sub(h),m=e.add(h),S=[l,new Mt(m.x,l.y),m,new Mt(l.x,m.y)];return s&&S.push(l.clone()),S},n.am=function(a,e){const r=[];for(let s=0;s<a.length;s++){const h=Bt(s-1,-1,a.length-1),l=Bt(s+1,-1,a.length-1),m=a[s],S=a[l],O=a[h].sub(m).unit(),z=S.sub(m).unit(),w=z.angleWithSep(O.x,O.y),R=O.add(z).unit().mult(-1*e/Math.sin(w/2));r.push(m.add(R))}return r},n.an=y0,n.ao=Rn,n.ap=function(a,e,r=0){return le.vec3.fromValues(((e.x-r)*a.scale-a.x)*Ft,(e.y*a.scale-a.y)*Ft,hp(e.z,e.y))},n.aq=zo,n.ar=Vv,n.as=function(a){let e=1/0,r=1/0,s=-1/0,h=-1/0;for(const l of a)e=Math.min(e,l.x),r=Math.min(r,l.y),s=Math.max(s,l.x),h=Math.max(h,l.y);return{min:new Mt(e,r),max:new Mt(s,h)}},n.at=Wd,n.au=nn,n.av=v,n.aw=Me,n.ax=bc,n.ay=function(a,e){const r={};for(let s=0;s<e.length;s++){const h=e[s];h in a&&(r[h]=a[h])}return r},n.az=ch,n.b=function(a){return Jn.API_FONTS_REGEX.test(a)},n.b$=by,n.b0=Ie,n.b1=Ug,n.b2=bi,n.b3=re,n.b4=Vu,n.b5=df,n.b6=Ao,n.b7=za,n.b8=jf,n.b9=C0,n.bA=Mh,n.bB=bm,n.bC=Jg,n.bD=Hg,n.bE=Jd,n.bF=Bt,n.bG=St,n.bH=yl,n.bI=function(a,e,r){a[4*e+0]=r[0],a[4*e+1]=r[1],a[4*e+2]=r[2],a[4*e+3]=r[3]},n.bJ=cp,n.bK=Sd,n.bL=xc,n.bM=Zs,n.bN=Eh,n.bO=Da,n.bP=w0,n.bQ=Kr,n.bR=Pa,n.bS=D0,n.bT=ri,n.bU=Mu,n.bV=function(a,e,r,s,h,l,m,S,O){if(O.name==="globe")return Mu(a,e,new ri(r,s,h),!1);const z=u_({z:r,x:s,y:h},O);return new uo([(l+z.x/z.scale)*e,e*(z.y/z.scale),m],[(l+z.x2/z.scale)*e,e*(z.y2/z.scale),S])},n.bW=function(a,e,r){let s=0;for(let h=0;h<2;++h)a[h]>0&&(s+=(a[h]-0)*(a[h]-0)),e[h]<0&&(s+=(0-e[h])*(0-e[h]));return s},n.bX=Is,n.bY=Lp,n.bZ=function(a){const e=le.mat4.identity(new Float64Array(16));le.mat4.multiply(e,a.pixelMatrix,a.globeMatrix);const r=[0,Uc,0],s=[0,Td,0];return le.vec3.transformMat4(r,r,e),le.vec3.transformMat4(s,s,e),[r[0]>0&&r[0]<=a.width&&r[1]>0&&r[1]<=a.height&&!ud(a,new Da(a.center.lat,90)),s[0]>0&&s[0]<=a.width&&s[1]>0&&s[1]<=a.height&&!ud(a,new Da(a.center.lat,-90))]},n.b_=function(a,e){const{scale:r}=a.tileTransform,s=r*Ft/(a.tileSize*Math.pow(2,e.zoom-a.tileID.overscaledZ+a.tileID.canonical.z));return le.mat2.scale(new Float32Array(4),e.inverseAdjustmentMatrix,[s,s])},n.ba=function(a,e){const r=td(e.zoom);if(r===0)return xl(a);const s=Ws(a),h=Us(s),l=Wd(s.getWest())*e.worldSize,m=Wd(s.getEast())*e.worldSize,S=Qc(s.getNorth())*e.worldSize,O=Qc(s.getSouth())*e.worldSize,z=[l,S,0],w=[m,S,0],R=[l,O,0],N=[m,O,0],P=le.mat4.invert([],e.globeMatrix);return le.vec3.transformMat4(z,z,P),le.vec3.transformMat4(w,w,P),le.vec3.transformMat4(R,R,P),le.vec3.transformMat4(N,N,P),h[0]=lu(h[0],R,r),h[1]=lu(h[1],N,r),h[2]=lu(h[2],w,r),h[3]=lu(h[3],z,r),uo.fromPoints(h)},n.bb=Wu,n.bc=gs,n.bd=lu,n.be=Od,n.bf=wo,n.bg=qf,n.bh=n_,n.bi=$o,n.bj=function(a){const e=[];for(const r in a)e.push(a[r]);return e},n.bk=function(a,e){const r=[];for(const s in a)s in e||r.push(s);return r},n.bl=Sn,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=or,n.bo=function(a,e){const{x:r,y:s}=a.point,h=ed(r,s,a.worldSize/a._pixelsPerMercatorPixel,0,0);return le.mat4.multiply(h,h,Vs(xl(e)))},n.bp=Z_,n.bq=Ch,n.br=qm,n.bs=function(a,e,r,s,h){const l=5*e+2;a.float32[l+0]=r,a.float32[l+1]=s,a.float32[l+2]=h},n.bt=rg,n.bu=iy,n.bv=We,n.bw=cd,n.bx=O_,n.by=B0,n.bz=wc,n.c=Br,n.c$=(a,e,r,s,h,l,m,S)=>{const O=a.transform,z=O.pitch<15?Gv(.07,.7,Me((14-O.zoom)/5,0,1)):.07,w=r.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:$v(a,e,r,s),u_texsize:e.imageAtlasTexture?e.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:O.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:h,u_width_scale:l,u_floor_width_scale:m,u_image:0,u_tile_units_to_pixels:U1(e,O),u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:S,u_trim_fade_range:r.paint.get("line-trim-fade-range"),u_trim_color:r.paint.get("line-trim-color").toRenderColor(w?null:r.lut).toArray01(),u_emissive_strength:r.paint.get("line-emissive-strength"),u_zbias_factor:z,u_tile_to_meter:t(e.tileID.canonical,0)}},n.c0=ox,n.c1=function(a){const e=ox(a,!0);return le.mat2.invert([],[e[0],e[1],e[4],e[5]])},n.c2=Ga,n.c3=function(a){const{x:e,y:r}=a.point,{lng:s,lat:h}=a._center;return ed(e,r,a.worldSize,s,h)},n.c4=Pe,n.c5=gi,n.c6=lh,n.c7=function(a){const e=Math.round((a+45+360)%360/90)%4;return ut[e]},n.c8=45,n.c9=dp,n.cA=class extends Ed{constructor(a){super(a),this.current=Op}set(a,e,r){if(this.fetchUniformLocation(a,e)){for(let s=0;s<9;s++)if(r[s]!==this.current[s]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},n.cB=Ve,n.cC=function(a,e,r){const s=td(r.zoom),h=a.style.map._antialias,l=a.terrain&&a.terrain.exaggeration()>0;return s===0&&!h&&!l},n.cD=function(a){const e=a.pixelsPerMeter,r=e/yl(1,a.center.lat),s=le.mat4.identity(new Float64Array(16));return le.mat4.translate(s,s,[a.point.x,a.point.y,0]),le.mat4.scale(s,s,[r,r,e]),Float32Array.from(s)},n.cE=Ws,n.cF=function(a){const e=Is-5;a=Me(a,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(lr(a))),3);return Math.round(r*(Ff.length-1))},n.cG=function(a,e,r,s){const h=e.getNorth(),l=e.getSouth(),m=e.getWest(),S=e.getEast(),O=1<<a.z,z=S-m,w=h-l,R=z/yf,N=-w/Ff[r],P=[0,R,0,N,0,0,h,m,0];if(a.z>0){const D=180/s;le.mat3.multiply(P,P,[D/z+1,0,0,0,D/w+1,0,-.5*D/R,.5*D/N,1])}return P[2]=O,P[5]=a.x,P[8]=a.y,P},n.cH=xl,n.cI=function(a,e,r){const s=le.mat4.identity(new Float64Array(16)),h=(e/(1<<a)-.5)*Math.PI*2;return le.mat4.rotateY(s,r.globeMatrix,h),Float32Array.from(s)},n.cJ=class{isDataAvailableAtPoint(a){const e=this._source();if(this.isUsingMockSource()||!e||a.y<0||a.y>1)return!1;const r=e.getSource().maxzoom,s=1<<r,h=Math.floor(a.x),l=Math.floor((a.x-h)*s),m=Math.floor(a.y*s),S=this.findDEMTileFor(new mi(r,h,r,l,m));return!(!S||!S.dem)}getAtPointOrZero(a,e=0){return this.getAtPoint(a,e)||0}getAtPoint(a,e,r=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);const s=this._source();if(!s||a.y<0||a.y>1)return e;const h=s.getSource().maxzoom,l=1<<h,m=Math.floor(a.x),S=a.x-m,O=new mi(h,m,h,Math.floor(S*l),Math.floor(a.y*l)),z=this.findDEMTileFor(O);if(!z||!z.dem)return e;const w=z.dem,R=1<<z.tileID.canonical.z,N=(S*R-z.tileID.canonical.x)*w.dim,P=(a.y*R-z.tileID.canonical.y)*w.dim,D=Math.floor(N),G=Math.floor(P);return(r?this.exaggeration():1)*$i($i(w.get(D,G),w.get(D,G+1),P-G),$i(w.get(D+1,G),w.get(D+1,G+1),P-G),N-D)}getAtTileOffset(a,e,r){const s=1<<a.canonical.z;return this.getAtPointOrZero(new o(a.wrap+(a.canonical.x+e/Ft)/s,(a.canonical.y+r/Ft)/s))}getAtTileOffsetFunc(a,e,r,s){return h=>{const l=this.getAtTileOffset(a,h.x,h.y),m=s.upVector(a.canonical,h.x,h.y),S=s.upVectorScale(a.canonical,e,r).metersToTile;return le.vec3.scale(m,m,l*S),m}}getForTilePoints(a,e,r,s){if(this.isUsingMockSource())return!1;const h=Wp.create(this,a,s);return!!h&&(e.forEach(l=>{l[2]=this.exaggeration()*h.getElevationAt(l[0],l[1],r)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(a);if(!e||!e.dem)return null;const r=e.dem.tree,s=e.tileID,h=1<<a.canonical.z-s.canonical.z;let l=a.canonical.x/h-s.canonical.x,m=a.canonical.y/h-s.canonical.y,S=0;for(let O=0;O<a.canonical.z-s.canonical.z&&!r.leaves[S];O++){l*=2,m*=2;const z=2*Math.floor(m)+Math.floor(l);S=r.childOffsets[S]+z,l%=1,m%=1}return{min:this.exaggeration()*r.minimums[S],max:this.exaggeration()*r.maximums[S]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const a=this.visibleDemTiles;if(a.length===0)return null;let e=!1,r=Number.MAX_VALUE,s=Number.MIN_VALUE;for(const h of a){const l=this.getMinMaxForTile(h.tileID);l&&(r=Math.min(r,l.min),s=Math.max(s,l.max),e=!0)}return e?{min:r,max:s}:null}},n.cK=Gm,n.cL=na,n.cM=function(a,e){return[Math.pow(a[0],2.2)*e,Math.pow(a[1],2.2)*e,Math.pow(a[2],2.2)*e]},n.cN=qc,n.cO=Nn,n.cP=Nt,n.cQ=256,n.cR=function(a,e){const r=[0,0,0],s=Wu(xl(e.canonical));return le.vec3.transformMat4(r,r,s),le.vec3.transformMat4(r,r,a),r},n.cS=a=>({u_camera_to_center_distance:new Zs(a),u_extrude_scale:new Rp(a),u_device_pixel_ratio:new Zs(a),u_matrix:new cp(a),u_inv_rot_matrix:new cp(a),u_merc_center:new Sd(a),u_tile_id:new xc(a),u_zoom_transition:new Zs(a),u_up_dir:new xc(a),u_emissive_strength:new Zs(a)}),n.cT=a=>({u_matrix:new cp(a),u_pixels_to_tile_units:new Rp(a),u_device_pixel_ratio:new Zs(a),u_width_scale:new Zs(a),u_floor_width_scale:new Zs(a),u_units_to_pixels:new Sd(a),u_dash_image:new Eh(a),u_gradient_image:new Eh(a),u_image_height:new Zs(a),u_texsize:new Sd(a),u_tile_units_to_pixels:new Zs(a),u_alpha_discard_threshold:new Zs(a),u_trim_offset:new Sd(a),u_trim_fade_range:new Sd(a),u_trim_color:new oh(a),u_emissive_strength:new Zs(a),u_zbias_factor:new Zs(a),u_tile_to_meter:new Zs(a)}),n.cU=a=>({u_matrix:new cp(a),u_texsize:new Sd(a),u_pixels_to_tile_units:new Rp(a),u_device_pixel_ratio:new Zs(a),u_width_scale:new Zs(a),u_floor_width_scale:new Zs(a),u_image:new Eh(a),u_units_to_pixels:new Sd(a),u_tile_units_to_pixels:new Zs(a),u_alpha_discard_threshold:new Zs(a),u_trim_offset:new Sd(a),u_trim_fade_range:new Sd(a),u_trim_color:new oh(a),u_emissive_strength:new Zs(a),u_zbias_factor:new Zs(a),u_tile_to_meter:new Zs(a)}),n.cV=ad,n.cW=l0,n.cX=W1,n.cY=Wl,n.cZ=(a,e,r,s,h,l)=>{const m=a.transform,S=m.projection.name==="globe";let O;if(l.paint.get("circle-pitch-alignment")==="map")if(S){const w=qc(m.zoom,e.canonical)*m._pixelsPerMercatorPixel;O=Float32Array.from([w,0,0,w])}else O=m.calculatePixelsToTileUnitsMatrix(r);else O=new Float32Array([m.pixelsToGLUnits[0],0,0,m.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:a.transform.getCameraToCenterDistance(m.projection),u_matrix:a.translatePosMatrix(e.projMatrix,r,l.paint.get("circle-translate"),l.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Dt.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Yh,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:l.paint.get("circle-emissive-strength")};if(S){z.u_inv_rot_matrix=s,z.u_merc_center=h,z.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],z.u_zoom_transition=td(m.zoom);const w=h[0]*Ft,R=h[1]*Ft;z.u_up_dir=m.projection.upVector(new ri(0,0,0),w,R)}return z},n.c_=Zv,n.ca=oh,n.cb=function(a,e,r){const s=Math.sqrt(a*a+e*e+r*r),h=s>0?Math.acos(r/s)*Dr:0;let l=a!==0||e!==0?Math.atan2(-e,-a)*Dr+90:0;return l<0&&(l+=360),[s,l,h]},n.cc=t,n.cd=uo,n.ce=mr,n.cf=function(a){return[Math.pow(a[0],.45454545454545453),Math.pow(a[1],.45454545454545453),Math.pow(a[2],.45454545454545453)]},n.cg=function(a,e){return a.readFields(bp,{icons:[]},e)},n.ch=function(a){return a({pluginStatus:zl,pluginURL:ll}),gd.on("pluginStateChange",a),a},n.ci=cv,n.cj=If,n.ck=m0,n.cl=Vo,n.cm=Fl,n.cn=sn,n.co=ma,n.cp=hn,n.cq=function(a){const e=a.indexOf(qu);return e>=0?a.slice(0,e):a},n.cr=function(a){return a.indexOf(qu)>=0},n.cs=function(a){const e=a.indexOf(qu);return e>=0?a.slice(e+1):""},n.ct=function(a){const e=[],r=a.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),a.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},n.cu=function(a,e,r,s){return a.type==="custom"?new qx(a,e):new Yf[a.type](a,e,r,s)},n.cv=Gn,n.cw=class extends ef{constructor(a,e){super(a._vectorTileFeature,a._z,a._x,a._y,a.id),a.state&&(this.state=Object.assign({},a.state)),this.target=e.target,this.namespace=e.namespace,e.properties&&(this.properties=e.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=a.source,this.sourceLayer=a.sourceLayer,this.layer=a.layer)}toJSON(){const a=super.toJSON();return a.target=this.target,a.namespace=this.namespace,a}},n.cx=gd,n.cy=Xo,n.cz=up,n.d=function(a){return Jn.API_TILEJSON_REGEX.test(a)},n.d$=nm,n.d0=(a,e,r,s,h,l,m,S,O)=>{const z=a.transform,w=z.calculatePixelsToTileUnitsMatrix(e),R=r.paint.get("line-trim-color-use-theme").constantOr("default")==="none",N=z.pitch<15?Gv(.07,.7,Me((14-z.zoom)/5,0,1)):.07;return{u_matrix:$v(a,e,r,s),u_pixels_to_tile_units:w,u_device_pixel_ratio:l,u_width_scale:m,u_floor_width_scale:S,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:h,u_texsize:V1(r)&&e.lineAtlasTexture?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:U1(e,a.transform),u_alpha_discard_threshold:0,u_trim_offset:O,u_trim_fade_range:r.paint.get("line-trim-fade-range"),u_trim_color:r.paint.get("line-trim-color").toRenderColor(R?null:r.lut).toArray01(),u_emissive_strength:r.paint.get("line-emissive-strength"),u_zbias_factor:N,u_tile_to_meter:t(e.tileID.canonical,0)}},n.d1=gn,n.d2=fm,n.d3=Bg,n.d4=Gi,n.d5=vm,n.d6=$f,n.d7=450,n.d8=7,n.d9=Qx,n.dA=Gt,n.dB=u,n.dC=uh,n.dD=function([a,e,r]){const s=Math.hypot(a,e,r),h=Math.atan2(a,r),l=.5*Math.PI-Math.acos(-e/s);return new Da(Pe(h),Pe(l))},n.dE=k0,n.dF=function(a){const e=a.navigator?a.navigator.userAgent:null;return!!function(r){if(Ot==null){const s=r.navigator?r.navigator.userAgent:null;Ot=!!r.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ot}(a)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dG=function(a,e){rn=a,Fn=e},n.dH=ud,n.dI=Hd,n.dJ=function(a){const e=[0,0,0],r=le.mat4.identity(new Float64Array(16));return le.mat4.multiply(r,a.pixelMatrix,a.globeMatrix),le.vec3.transformMat4(e,e,r),new Mt(e[0],e[1])},n.dK=function(a,e,r=!1){if(zl===Wa||zl===To||zl===is)throw new Error("setRTLTextPlugin cannot be called multiple times.");ll=Dt.resolveURL(a),zl=Wa,Xs=e,_d(),r||Bd()},n.dL=jc,n.dM=function(){cv().acquire($0)},n.dN=function(){const a=h_;a&&(a.isPreloaded()&&a.numActive()===1?(a.release($0),h_=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dO=Xf,n.dP=function(a){const e=Xn();if(!e)return;const r=e.delete(xn);a&&r.catch(a).then(()=>a())},n.dQ=d_,n.dR=bv,n.dS=function(a){Md=Dt.resolveURL(a),em||(em=new xp(cv(),new ao)),em.broadcast("setDracoUrl",Md)},n.dT=wv,n.dU=function(a){qp=Dt.resolveURL(a),em||(em=new xp(cv(),new ao)),em.broadcast("setMeshoptUrl",qp)},n.dV=Fi,n.dW=Th,n.dX=Tf,n.dY=Np,n.dZ=class{constructor(a,e){this.pos=a,this.dir=e}intersectsPlane(a,e,r){const s=le.vec2.dot(e,this.dir);if(Math.abs(s)<1e-6)return!1;const h=((a[0]-this.pos[0])*e[0]+(a[1]-this.pos[1])*e[1])/s;return r[0]=this.pos[0]+this.dir[0]*h,r[1]=this.pos[1]+this.dir[1]*h,!0}},n.d_=gh,n.da=ra,n.db=bd,n.dc=256,n.dd=Vs,n.de=cl,n.df=Xc,n.dg=lf,n.dh=function(a,e,r,s,h){return Me((a-e)/(r-e)*(h-s)+s,s,h)},n.di=pl,n.dj=Zo,n.dk=class{constructor(a,e,r,s){this.context=a,this.format=s,this.size=r,this.texture=a.gl.createTexture();const[h,l,m]=this.size,{gl:S}=a;S.bindTexture(S.TEXTURE_3D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),S.texImage3D(S.TEXTURE_3D,0,this.format,h,l,m,0,_y(this.format),A0(this.format),e.data)}bind(a,e){const{context:r}=this,{gl:s}=r;s.bindTexture(s.TEXTURE_3D,this.texture),a!==this.minFilter&&(s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MAG_FILTER,a),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MIN_FILTER,a),this.minFilter=a),e!==this.wrapS&&(s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_S,e),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_T,e),this.wrapS=e)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}},n.dl=N0,n.dm=[1,1,1],n.dn=Wp,n.dp=Zp,n.dq=rh,n.dr=$d,n.ds=Hh,n.dt=uf,n.du=sd,n.dv=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Mt(1/0,1/0),max:new Mt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(a,e=!1){const r=D_(new Mt(0,0),new Mt(Ft,Ft),a),s=[];if(e&&!zp(r,this._globalClipBounds))return s;for(const h of this._activeRegions){if(h.hiddenByOverlap||!zp(r,h))continue;const l=kg(h.min,h.max,a);s.push({min:l.min,max:l.max,sourceId:this._sourceIds[h.priority],footprint:h.footprint,footprintTileId:h.tileId,order:h.order,clipMask:h.clipMask,clipScope:h.clipScope})}return s}setSources(a){this._setSources(a.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{const r=[];for(const s of e.cache.getVisibleCoordinates()){const h=e.cache.getTile(s).buckets[e.layer];h&&h.updateFootprints(s.toUnwrapped(),r)}return r},getOrder:()=>e.order,getClipMask:()=>e.clipMask,getClipScope:()=>e.clipScope})))}_addSource(a){const e=a.getFootprints();if(e.length===0)return;const r=a.getOrder(),s=a.getClipMask(),h=a.getClipScope();for(const l of e){if(!l.footprint)continue;const m=D_(l.footprint.min,l.footprint.max,l.id);this._activeRegions.push({min:m.min,max:m.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:l.id,footprint:l.footprint,order:r,clipMask:s,clipScope:h})}this._sourceIds.push(a.getSourceId())}_computeReplacement(){this._activeRegions.sort((e,r)=>e.priority-r.priority||Vf(e.min,r.min)||Vf(e.max,r.max)||e.order-r.order||e.clipMask-r.clipMask||function(s,h){const l=(m,S)=>m+S;return s.length-h.length||s.reduce(l,"").localeCompare(h.reduce(l,""))}(e.clipScope,r.clipScope));let a=this._activeRegions.length!==this._prevRegions.length;if(!a){let e=0;for(;!a&&e!==this._activeRegions.length;){const r=this._activeRegions[e],s=this._prevRegions[e];a=r.priority!==s.priority||!R_(r,s)||r.order!==s.order||r.clipMask!==s.clipMask||!or(r.clipScope,s.clipScope),++e}}if(a){++this._updateTime;for(const r of this._activeRegions)r.order!==Nv&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,r.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,r.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,r.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,r.max.y));const e=r=>{const s=this._activeRegions;if(r>=s.length)return r;const h=s[r].priority;for(;r<s.length&&s[r].priority===h;)++r;return r};if(this._sourceIds.length>1){let r=0,s=e(r);for(;r!==s;){let h=r;const l=r;for(;h!==s;){const m=this._activeRegions[h];m.hiddenByOverlap=!1;for(let S=0;S<l;S++){const O=this._activeRegions[S];if(!O.hiddenByOverlap&&m.order===Nv&&zp(m,O)&&(m.hiddenByOverlap=hh(m.footprint,m.tileId,O.footprint,O.tileId),m.hiddenByOverlap))break}++h}r=s,s=e(r)}}}}_setSources(a){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let e=a.length-1;e>=0;e--)this._addSource(a[e]);this._computeReplacement()}},n.dw=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy()}_fillGridMeshWithLods(a,e){const r=new Vu,s=new _u,h=[],l=a+1+2,m=e[0]+1,S=e[0]+1+(1+e.length),O=(z,w,R)=>{let N=z===l-1?z-2:z===0?z:z-1;return N+=R?24575:0,[N,w]};for(let z=0;z<l;++z)r.emplaceBack(...O(z,0,!0));for(let z=0;z<m;++z)for(let w=0;w<l;++w)r.emplaceBack(...O(w,z,(w===0||w===l-1)&&!0));for(let z=0;z<e.length;++z){const w=e[z];for(let R=0;R<l;++R)r.emplaceBack(...O(R,w,!0))}for(let z=0;z<e.length;++z){const w=s.length,R=e[z]+1+2,N=new _u;for(let G=0;G<R-1;G++){const oe=G===R-2,ce=oe?l*(S-e.length+z-G):l;for(let Ae=0;Ae<l-1;Ae++){const Oe=G*l+Ae;G===0||oe||Ae===0||Ae===l-2?(N.emplaceBack(Oe+1,Oe,Oe+ce),N.emplaceBack(Oe+ce,Oe+ce+1,Oe+1)):(s.emplaceBack(Oe+1,Oe,Oe+ce),s.emplaceBack(Oe+ce,Oe+ce+1,Oe+1))}}const P=za.simpleSegment(0,w,r.length,s.length-w);for(let G=0;G<N.uint16.length;G+=3)s.emplaceBack(N.uint16[G],N.uint16[G+1],N.uint16[G+2]);const D=za.simpleSegment(0,w,r.length,s.length-w);h.push({withoutSkirts:P,withSkirts:D})}return{vertices:r,indices:s,segments:h}}_createGrid(a){const e=this._fillGridMeshWithLods(yf,Ff);this._gridSegments=e.segments,this._gridBuffer=a.createVertexBuffer(e.vertices,Ao.members),this._gridIndexBuffer=a.createIndexBuffer(e.indices,!0)}_createPoles(a){const e=new _u;for(let m=0;m<=yf;m++)e.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=a.createIndexBuffer(e,!0);const r=new Xc,s=new Xc,h=new Xc,l=new Xc;this._poleSegments=[];for(let m=0,S=0;m<lh;m++){const O=360/(1<<m);r.emplaceBack(0,-bc,0,.5,0),s.emplaceBack(0,-bc,0,.5,1),h.emplaceBack(0,-bc,0,.5,.5),l.emplaceBack(0,-bc,0,.5,.5);for(let z=0;z<=yf;z++){let w=z/yf,R=0;const N=$i(0,O,w),[P,D,G]=xf(Kh,tc,N,bc);r.emplaceBack(P,D,G,w,R),s.emplaceBack(P,D,G,w,1-R);const oe=lr(N);w=.5+.5*Math.sin(oe),R=.5+.5*Math.cos(oe),h.emplaceBack(P,D,G,w,R),l.emplaceBack(P,D,G,w,1-R)}this._poleSegments.push(za.simpleSegment(S,0,66,64)),S+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(r,bo,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(s,bo,!1),this._texturedPoleNorthVertexBuffer=a.createVertexBuffer(h,bo,!1),this._texturedPoleSouthVertexBuffer=a.createVertexBuffer(l,bo,!1)}getGridBuffers(a,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a,e){return[e?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,e?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}},n.dx=Nv,n.dy=gt,n.dz=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.e=Jn,n.e0=n0,n.e1=In,n.e2=bs,n.e3=Up,n.e4=function(a,e,r,s,h,l,m,S,O,z,w=1,R,N){a.createArrays(),a.tilePixelRatio=Ft/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const P=a.layers[0].layout,D=a.layers[0]._unevaluatedLayout._values,G={};G.scaleFactor=w,G.textSizeScaleRange=P.get("text-size-scale-range"),G.iconSizeScaleRange=P.get("icon-size-scale-range");const[oe,ce]=G.textSizeScaleRange,[Ae,Oe]=G.iconSizeScaleRange;if(G.textScaleFactor=Me(G.scaleFactor,oe,ce),G.iconScaleFactor=Me(G.scaleFactor,Ae,Oe),a.textSizeData.kind==="composite"){const{minZoom:ct,maxZoom:Kt}=a.textSizeData;G.compositeTextSizes=[D["text-size"].possiblyEvaluate(new Ts(ct),S),D["text-size"].possiblyEvaluate(new Ts(Kt),S)]}if(a.iconSizeData.kind==="composite"){const{minZoom:ct,maxZoom:Kt}=a.iconSizeData;G.compositeIconSizes=[D["icon-size"].possiblyEvaluate(new Ts(ct),S),D["icon-size"].possiblyEvaluate(new Ts(Kt),S)]}G.layoutTextSize=D["text-size"].possiblyEvaluate(new Ts(O+1),S),G.layoutIconSize=D["icon-size"].possiblyEvaluate(new Ts(O+1),S),G.textMaxSize=D["text-size"].possiblyEvaluate(new Ts(18),S);const ve=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",Fe=P.get("text-size");let Ye=!1;for(const ct of a.features)if(ct.icon&&ct.icon.nameSecondary){Ye=!0;break}for(const ct of a.features){const Kt=P.get("text-font").evaluate(ct,{},S).join(","),Zt=Fe.evaluate(ct,{},S)*G.textScaleFactor,Ut=G.layoutTextSize.evaluate(ct,{},S)*G.textScaleFactor,En=(G.layoutIconSize.evaluate(ct,{},S),{horizontal:{},vertical:void 0}),Yt=ct.text;let Cn,Vn=[0,0];if(Yt){const qn=Yt.toString(),hr=P.get("text-letter-spacing").evaluate(ct,{},S)*cd,Kn=P.get("text-line-height").evaluate(ct,{},S)*cd,Zr=Nl(qn)?hr:0,si=P.get("text-anchor").evaluate(ct,{},S),Wr=P.get("text-variable-anchor");if(!Wr){const lo=P.get("text-radial-offset").evaluate(ct,{},S);Vn=lo?Jg(si,[lo*cd,Vp]):P.get("text-offset").evaluate(ct,{},S).map(ji=>ji*cd)}let zi=ve?"center":P.get("text-justify").evaluate(ct,{},S);const yi=P.get("symbol-placement")==="point",vi=yi?P.get("text-max-width").evaluate(ct,{},S)*cd:1/0,li=lo=>{a.allowVerticalPlacement&&Ss(qn)&&(En.vertical=Xv(Yt,e,r,h,Kt,vi,Kn,si,lo,Zr,Vn,Ch.vertical,!0,Ut,Zt))};if(!ve&&Wr){const lo=zi==="auto"?Wr.map(Yi=>bm(Yi)):[zi];let ji=!1;for(let Yi=0;Yi<lo.length;Yi++){const Yo=lo[Yi];if(!En.horizontal[Yo])if(ji)En.horizontal[Yo]=En.horizontal[0];else{const ga=Xv(Yt,e,r,h,Kt,vi,Kn,"center",Yo,Zr,Vn,Ch.horizontal,!1,Ut,Zt);ga&&(En.horizontal[Yo]=ga,ji=ga.positionedLines.length===1)}}li("left")}else{if(zi==="auto"&&(zi=bm(si)),yi||P.get("text-writing-mode").indexOf("horizontal")>=0||!Ss(qn)){const lo=Xv(Yt,e,r,h,Kt,vi,Kn,si,zi,Zr,Vn,Ch.horizontal,!1,Ut,Zt);lo&&(En.horizontal[zi]=lo)}li(yi?"left":zi)}}let zn=!1;if(ct.icon&&ct.icon.namePrimary){const qn=G_(a.iconSizeData,D["icon-size"],S,a.zoom,ct)*G.iconScaleFactor*R,hr=ct.icon.getPrimary().scaleSelf(qn).serialize(),Kn=s[hr];Kn&&(Cn=K1(h[hr],ct.icon.nameSecondary?h[ct.icon.getSecondary().scaleSelf(qn).serialize()]:void 0,P.get("icon-offset").evaluate(ct,{},S),P.get("icon-anchor").evaluate(ct,{},S)),zn=Kn.sdf,a.sdfIcons===void 0?a.sdfIcons=Kn.sdf:a.sdfIcons!==Kn.sdf&&cn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Kn.pixelRatio!==a.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const Zn=Af(En.horizontal)||En.vertical;a.iconsInText||(a.iconsInText=!!Zn&&Zn.iconsInText),(Zn||Cn)&&g0(a,ct,En,Cn,s,G,Ut,0,Vn,zn,m,S,z,N,Ye)}l&&a.generateCollisionDebugBuffers(O,a.collisionBoxArray,G.textScaleFactor)},n.e5=yv,n.e6=Pn,n.e7=Lg,n.e8=Yv,n.e9=j,n.ea=function(a){let e=0;if(new Uint32Array(a,0,1)[0]!==Ka){const r=new Uint32Array(a,0,7),[,,s,h,l,m]=r;e=r.byteLength+h+l+m+l,(s!==a.byteLength||e>=a.byteLength)&&cn("Invalid b3dm header information.")}return Xd(a,e)},n.eb=function(a,e){const r=m1(a);for(const s of r){for(const h of s.meshes)Rx(h);s.lights&&(s.lightMeshIndex=s.meshes.length,s.meshes.push(Nh(s.lights,e)))}return r},n.ec=Lu,n.ed=uv,n.ee=uc,n.ef=function(a){er(),jn!=null&&jn.then(e=>{e.keys().then(r=>{for(let s=0;s<r.length-a;s++)e.delete(r[s])})})},n.f=function(a){return a.indexOf("mapbox:")===0},n.g=function(a,e){return Xo(Lt(a,{method:"GET"}),e)},n.h=rr,n.i=function(a){return Jn.API_STYLE_REGEX.test(a)&&!Br(a)},n.j=function(a){return decodeURIComponent(atob(a).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,(e,r)=>String.fromCharCode(+("0x"+r))))},n.l=Lt,n.m=qr,n.n=function(a,e){return Xo(Lt(a,{type:"json"}),e)},n.o=oa,n.p=function(a,e){return Xo(Lt(a,{method:"POST"}),e)},n.q=Dt,n.r=fc,n.s=function(a){try{const e=self[a];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(e){return!1}},n.t=ot,n.u=function(){return function a(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()},n.v=function(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)},n.w=cn,n.x=function(){return Iy||(Iy=new Xf),Iy},n.y=Sa,n.z=ja}),M(["./shared"],function(n){function j(fn){const Ne=fn?fn.url.toString():void 0;return Ne?performance.getEntriesByName(Ne):[]}function $(fn){if(typeof fn=="number"||typeof fn=="boolean"||typeof fn=="string"||fn==null)return JSON.stringify(fn);if(Array.isArray(fn)){let Ge="[";for(const ot of fn)Ge+=`${$(ot)},`;return`${Ge}]`}let Ne="{";for(const Ge of Object.keys(fn).sort())Ne+=`${Ge}:${$(fn[Ge])},`;return`${Ne}}`}function U(fn){let Ne="";for(const Ge of n.bm)(fn.type!=="model"||Ge!=="minzoom"&&Ge!=="maxzoom")&&(Ne+=`/${$(fn[Ge])}`);return Ne}class Y{constructor(Ne){this.keyCache={},this._layers={},this._layerConfigs={},Ne&&this.replace(Ne)}replace(Ne,Ge){this._layerConfigs={},this._layers={},this.update(Ne,[],Ge)}update(Ne,Ge,ot){this._options=ot;for(const jt of Ne)this._layerConfigs[jt.id]=jt,(this._layers[jt.id]=n.cu(jt,this.scope,null,this._options)).compileFilter(ot),this.keyCache[jt.id]&&delete this.keyCache[jt.id];for(const jt of Ge)delete this.keyCache[jt],delete this._layerConfigs[jt],delete this._layers[jt];this.familiesBySource={};const Dt=function(jt,sn){const xn={};for(let Fn=0;Fn<jt.length;Fn++){const Un=jt[Fn];let jn=sn&&sn[Un.id];!jn&&(jn=U(Un),Un.type==="line"&&Un.paint)&&function Xn(er){return typeof er=="string"&&er==="line-progress"||(Array.isArray(er)?er.some(Xn):!(!er||typeof er!="object")&&Object.values(er).some(Xn))}(Un.paint["line-width"])&&(jn+=`/${$(Un.paint["line-width"])}`),sn&&(sn[Un.id]=jn);let _n=xn[jn];_n||(_n=xn[jn]=[]),_n.push(Un)}const rn=[];for(const Fn in xn)rn.push(xn[Fn]);return rn}(n.bj(this._layerConfigs),this.keyCache);for(const jt of Dt){const sn=jt.map(_n=>this._layers[_n.id]),xn=sn[0];if(xn.visibility==="none")continue;const rn=xn.source||"";let Fn=this.familiesBySource[rn];Fn||(Fn=this.familiesBySource[rn]={});const Un=xn.sourceLayer||"_geojsonTileLayer";let jn=Fn[Un];jn||(jn=Fn[Un]=[]),jn.push(sn)}}}const te=1*n.dX;class X{constructor(Ne){const Ge={},ot=[];for(const xn in Ne){const rn=Ne[xn],Fn=Ge[xn]={};for(const Un in rn.glyphs){const jn=rn.glyphs[+Un];if(!jn||jn.bitmap.width===0||jn.bitmap.height===0)continue;const _n=jn.metrics.localGlyph?te:1,Xn={x:0,y:0,w:jn.bitmap.width+2*_n,h:jn.bitmap.height+2*_n};ot.push(Xn),Fn[Un]=Xn}}const{w:Dt,h:jt}=n.F(ot),sn=new n.dW({width:Dt||1,height:jt||1});for(const xn in Ne){const rn=Ne[xn];for(const Fn in rn.glyphs){const Un=rn.glyphs[+Fn];if(!Un||Un.bitmap.width===0||Un.bitmap.height===0)continue;const jn=Ge[xn][Fn],_n=Un.metrics.localGlyph?te:1;n.dW.copy(Un.bitmap,sn,{x:0,y:0},{x:jn.x+_n,y:jn.y+_n},Un.bitmap)}}this.image=sn,this.positions=Ge}}n.dV(X,"GlyphAtlas");const B="3d_elevation_id",K="hd_road_elevation";class de{constructor(){this._valid=!1}reset(Ne){return this.feature=Ne,this._valid=!0,this._geometry=Ne.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(Ne,Ge){return this._valid&&Ne(Ge(this._geometry)),this}require(Ne,Ge,ot){return this.get(Ne,!0,Ge,ot)}optional(Ne,Ge,ot){return this.get(Ne,!1,Ge,ot)}success(){return this._valid}get(Ne,Ge,ot,Dt){const jt=this.feature.properties.hasOwnProperty(Ne)?+this.feature.properties[Ne]:void 0;return this._valid&&jt!==void 0?ot(Dt?Dt(jt):jt):Ge&&(this._valid=!1),this}}class he{constructor(Ne,Ge){this.featureFunc=Ne,this.vertexFunc=Ge}parseFeature(Ne,Ge,ot){return this.featureFunc(Ne,Ge,ot)}parseVertex(Ne,Ge,ot){return this.vertexFunc(Ne,Ge,ot)}}const J=new he((fn,Ne,Ge)=>fn.reset(Ne).require(B,ot=>{Ge.id=ot}).optional("fixed_height_relative",ot=>{Ge.constantHeight=ot},se.decodeRelativeHeight).geometry(ot=>{Ge.bounds=ot},se.computeBounds).success(),(fn,Ne,Ge)=>fn.reset(Ne).require(B,ot=>{Ge.id=ot}).require("elevation_idx",ot=>{Ge.idx=ot}).require("extent",ot=>{Ge.extent=ot}).require("height_relative",ot=>{Ge.height=ot},se.decodeRelativeHeight).geometry(ot=>{Ge.position=ot},se.getPoint).success()),ae=new he((fn,Ne,Ge)=>fn.reset(Ne).require(B,ot=>{Ge.id=ot}).optional("fixed_height",ot=>{Ge.constantHeight=ot},se.decodeMetricHeight).geometry(ot=>{Ge.bounds=ot},se.computeBounds).success(),(fn,Ne,Ge)=>fn.reset(Ne).require(B,ot=>{Ge.id=ot}).require("elevation_idx",ot=>{Ge.idx=ot}).require("extent",ot=>{Ge.extent=ot}).require("height",ot=>{Ge.height=ot},se.decodeMetricHeight).geometry(ot=>{Ge.position=ot},se.getPoint).success());class se{static computeBounds(Ne){const Ge=new n.P(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),ot=new n.P(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const Dt of Ne[0])Ge.x>Dt.x&&(Ge.x=Dt.x),Ge.y>Dt.y&&(Ge.y=Dt.y),ot.x<Dt.x&&(ot.x=Dt.x),ot.y<Dt.y&&(ot.y=Dt.y);return{min:Ge,max:ot}}static getPoint(Ne){return n.ab.vec2.fromValues(Ne[0][0].x,Ne[0][0].y)}static decodeRelativeHeight(Ne){return 1e-4*Ne*5}static decodeMetricHeight(Ne){return 1e-4*Ne}static parse(Ne){const Ge=[],ot=[],Dt=Ne.length,jt=new de;for(let xn=0;xn<Dt;xn++){const rn=Ne.feature(xn),Fn=rn.properties.hasOwnProperty("version")?String(rn.properties.version):void 0,Un=(sn=Fn)?sn==="1.0.1"?ae:void 0:J;if(Un===void 0){n.w(`Unknown elevation feature version number ${Fn||"(unknown)"}`);continue}const jn=rn.properties.hasOwnProperty("type")?rn.properties.type:void 0;if(jn){if(n.dY.VectorTileFeature.types[rn.type]==="Point"&&jn==="curve_point"){const _n={};Un.parseVertex(jt,rn,_n)&&Ge.push(_n)}else if(n.dY.VectorTileFeature.types[rn.type]==="Polygon"&&jn==="curve_meta"){const _n={};Un.parseFeature(jt,rn,_n)&&ot.push(_n)}}}var sn;return{vertices:Ge,features:ot}}}class Ee{constructor(Ne,Ge,ot,Dt,jt,sn){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=Ne,this.heightRange={min:ot,max:ot},this.safeArea=Ge,this.constantHeight=ot,this.constantHeight==null&&(this.constantHeight!=null||Dt.length!==0)){this.vertices=Dt,this.edges=jt,this.edges=this.edges.filter(xn=>xn.a<this.vertices.length&&xn.b<this.vertices.length&&!n.ab.vec2.exactEquals(this.vertices[xn.a].position,this.vertices[xn.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const xn of this.vertices)this.vertexProps.push({dir:n.ab.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,xn.height),this.heightRange.max=Math.max(this.heightRange.max,xn.height);for(const xn of this.edges){const rn=this.vertices[xn.a].position,Fn=this.vertices[xn.b].position,Un=n.ab.vec2.subtract(n.ab.vec2.create(),Fn,rn),jn=n.ab.vec2.length(Un),_n=n.ab.vec2.scale(n.ab.vec2.create(),Un,1/jn);this.edgeProps.push({vec:Un,dir:_n,len:jn});const Xn=this.vertexProps[xn.a].dir,er=this.vertexProps[xn.b].dir;n.ab.vec2.add(Xn,Xn,_n),n.ab.vec2.add(er,er,_n)}for(const xn of this.vertexProps)xn.dir[0]===0&&xn.dir[1]===0||n.ab.vec2.normalize(xn.dir,xn.dir);this.tessellate(sn)}}pointElevation(Ne){if(this.constantHeight!=null)return this.constantHeight;const Ge=this.getClosestEdge(Ne);if(Ge==null)return 0;const[ot,Dt]=Ge;return(1-(jt=Dt))*this.vertices[this.edges[ot].a].height+jt*this.vertices[this.edges[ot].b].height;var jt}getClosestEdge(Ne){if(this.edges.length===0)return;let Ge=0,ot=Number.POSITIVE_INFINITY,Dt=0;const jt=n.ab.vec2.fromValues(Ne.x,Ne.y);for(let sn=0;sn<this.edges.length;sn++){const xn=this.edges[sn],rn=this.edgeProps[sn].dir,Fn=new n.dZ(jt,this.edgeProps[sn].dir),Un=this.vertices[xn.a].position,jn=this.vertices[xn.b].position,_n=n.ab.vec2.create(),Xn=n.ab.vec2.create(),er=Fn.intersectsPlane(Un,this.vertexProps[xn.a].dir,_n),Yr=Fn.intersectsPlane(jn,this.vertexProps[xn.b].dir,Xn);if(!er||!Yr)continue;const qr=n.ab.vec2.subtract(n.ab.vec2.create(),Xn,_n),Gr=n.ab.vec2.subtract(n.ab.vec2.create(),jt,_n),ci=n.ab.vec2.dot(qr,qr),Ci=ci>0?n.ab.vec2.dot(Gr,qr)/ci:0,Ki=n.aw(Ci,0,1),Bi=Math.abs((Ci-Ki)*this.edgeProps[sn].len),Di=n.ab.vec2.subtract(n.ab.vec2.create(),jt,Un),yo=Bi+Math.abs(n.ab.vec2.dot(Di,n.ab.vec2.fromValues(rn[1],-rn[0])));yo<ot&&(Ge=sn,ot=yo,Dt=Ki)}return[Ge,Dt]}tessellate(Ne){for(let Ge=this.edges.length-1;Ge>=0;--Ge){const ot=this.edges[Ge].a,Dt=this.edges[Ge].b,{position:jt,height:sn,extent:xn}=this.vertices[ot],{position:rn,height:Fn,extent:Un}=this.vertices[Dt],jn=this.vertexProps[ot].dir,_n=this.vertexProps[Dt].dir,Xn=n.ab.vec3.fromValues(jt[0]/Ne,jt[1]/Ne,sn),er=n.ab.vec3.fromValues(rn[0]/Ne,rn[1]/Ne,Fn),Yr=n.ab.vec3.fromValues(jn[1],-jn[0],0);n.ab.vec3.scale(Yr,Yr,xn);const qr=n.ab.vec3.fromValues(_n[1],-_n[0],0);if(n.ab.vec3.scale(qr,qr,Un),this.distSqLines(n.ab.vec3.fromValues(Xn[0]+.5*Yr[0],Xn[1]+.5*Yr[1],Xn[2]+.5*Yr[2]),n.ab.vec3.fromValues(er[0]-.5*qr[0],er[1]-.5*qr[1],er[2]-.5*qr[2]),n.ab.vec3.fromValues(Xn[0]-.5*Yr[0],Xn[1]-.5*Yr[1],Xn[2]-.5*Yr[2]),n.ab.vec3.fromValues(er[0]+.5*qr[0],er[1]+.5*qr[1],er[2]+.5*qr[2]))<=.0025000000000000005)continue;const Gr=this.vertices.length,ci=n.ab.vec2.add(n.ab.vec2.create(),jt,rn);this.vertices.push({position:n.ab.vec2.scale(ci,ci,.5),height:.5*(sn+Fn),extent:.5*(xn+Un)});const Ci=n.ab.vec2.add(n.ab.vec2.create(),jn,_n);this.vertexProps.push({dir:n.ab.vec2.normalize(Ci,Ci)}),this.edges.splice(Ge,1),this.edgeProps.splice(Ge,1),this.edges.push({a:ot,b:Gr}),this.edges.push({a:Gr,b:Dt});const Ki=n.ab.vec2.subtract(n.ab.vec2.create(),this.vertices[Gr].position,jt),Bi=n.ab.vec2.length(Ki),Di={vec:Ki,dir:n.ab.vec2.scale(n.ab.vec2.create(),Ki,1/Bi),len:Bi};this.edgeProps.push(Di),this.edgeProps.push(Di)}}distSqLines(Ne,Ge,ot,Dt){const jt=n.ab.vec3.subtract(n.ab.vec3.create(),Ge,Ne),sn=n.ab.vec3.subtract(n.ab.vec3.create(),Dt,ot),xn=n.ab.vec3.subtract(n.ab.vec3.create(),Ne,ot),rn=n.ab.vec3.dot(jt,jt),Fn=n.ab.vec3.dot(jt,sn),Un=n.ab.vec3.dot(jt,xn),jn=n.ab.vec3.dot(sn,sn),_n=n.ab.vec3.dot(sn,xn),Xn=rn*jn-Fn*Fn;if(Xn===0){const ci=n.ab.vec3.dot(xn,sn)/n.ab.vec3.dot(sn,sn),Ci=n.ab.vec3.lerp(n.ab.vec3.create(),ot,Dt,ci);return n.ab.vec3.squaredDistance(Ci,Ne)}const er=(Fn*_n-Un*jn)/Xn,Yr=(rn*_n-Fn*Un)/Xn,qr=n.ab.vec3.lerp(n.ab.vec3.create(),Ne,Ge,er),Gr=n.ab.vec3.lerp(n.ab.vec3.create(),ot,Dt,Yr);return n.ab.vec3.squaredDistance(qr,Gr)}}class Le{static parseFrom(Ne,Ge){const ot=se.parse(Ne);if(!ot)return[];let{vertices:Dt,features:jt}=ot;const sn=1/n.cc(Ge);jt.sort((Un,jn)=>Un.id-jn.id),Dt.sort((Un,jn)=>Un.id-jn.id||Un.idx-jn.idx),Dt=Dt.filter((Un,jn,_n)=>jn===_n.findIndex(Xn=>Xn.id===Un.id&&Xn.idx===Un.idx));const xn=new Array;let rn=0;const Fn=Dt.length;for(const Un of jt){if(Un.constantHeight){xn.push(new Ee(Un.id,Un.bounds,Un.constantHeight));continue}for(;rn!==Fn&&Dt[rn].id<Un.id;)rn++;if(rn===Fn||Dt[rn].id!==Un.id)continue;const jn=new Array,_n=new Array,Xn=rn;for(;rn!==Fn&&Dt[rn].id===Un.id;){const er=Dt[rn];if(jn.push({position:er.position,height:er.height,extent:er.extent}),rn!==Xn&&Dt[rn-1].idx===er.idx-1){const Yr=rn-Xn;_n.push({a:Yr-1,b:Yr})}rn++}xn.push(new Ee(Un.id,Un.bounds,void 0,jn,_n,sn))}return xn}}n.dV(Ee,"ElevationFeature");class ke{constructor(Ne){this.tileID=new n.aG(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.tileZoom=Ne.tileZoom,this.uid=Ne.uid,this.zoom=Ne.zoom,this.lut=Ne.lut,this.canonical=Ne.tileID.canonical,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.scope=Ne.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ne.showCollisionBoxes,this.collectResourceTiming=!!Ne.request&&Ne.request.collectResourceTiming,this.promoteId=Ne.promoteId,this.isSymbolTile=Ne.isSymbolTile,this.tileTransform=n.aQ(Ne.tileID.canonical,Ne.projection),this.projection=Ne.projection,this.worldview=Ne.worldview,this.localizableLayerIds=Ne.localizableLayerIds,this.brightness=Ne.brightness,this.extraShadowCaster=!!Ne.extraShadowCaster,this.tessellationStep=Ne.tessellationStep,this.scaleFactor=Ne.scaleFactor}parse(Ne,Ge,ot,Dt,jt){this.status="parsing",this.data=Ne,this.collisionBoxArray=new n.aW;const sn=new n.d_(Object.keys(Ne.layers).sort()),xn=new n.d$(this.tileID,this.promoteId);xn.bucketLayerIDs=[];const rn={},Fn=new n.e0(256,256),Un={featureIndex:xn,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Fn,availableImages:ot,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},jn=Ge.familiesBySource[this.source];for(const ci in jn){const Ci=Ne.layers[ci];if(!Ci)continue;let Ki=!1,Bi=!1,Di=!1;for(const Xo of jn[ci])Xo[0].type==="symbol"?Ki=!0:Bi=!0,Xo[0].is3D()&&Xo[0].type!=="model"&&(Di=!0);if(this.extraShadowCaster&&!Di||this.isSymbolTile===!0&&!Ki||this.isSymbolTile===!1&&!Bi)continue;Ci.version===1&&n.w(`Vector tile source "${this.source}" layer "${ci}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const yo=sn.encode(ci),po=[];let Vo=!1;for(let Xo=0,$o=0;Xo<Ci.length;Xo++){const Aa=Ci.feature(Xo),qa=xn.getId(Aa,ci);if(this.localizableLayerIds&&this.localizableLayerIds.has(ci)){const Oo=Aa.properties?Aa.properties.worldview:null;if(this.worldview&&typeof Oo=="string")if(Oo==="all")Aa.properties.$localized=!0;else{if(!Oo.split(",").includes(this.worldview))continue;Aa.properties.$localized=!0,Aa.properties.worldview=this.worldview}}!Vo&&Aa.properties&&Aa.properties.hasOwnProperty(B)&&(Vo=!0),po.push({feature:Aa,id:qa,index:$o,sourceLayerIndex:yo}),$o++}Vo&&Ne.layers.hasOwnProperty(K)&&(Un.elevationFeatures=Le.parseFrom(Ne.layers[K],this.canonical));for(const Xo of jn[ci]){const $o=Xo[0];(!this.extraShadowCaster||$o.is3D()&&$o.type!=="model")&&(this.isSymbolTile!==void 0&&$o.type==="symbol"!==this.isSymbolTile||$o.minzoom&&this.zoom<Math.floor($o.minzoom)||$o.maxzoom&&this.zoom>=$o.maxzoom||$o.visibility!=="none"&&(ye(Xo,this.zoom,Un.brightness,ot),(rn[$o.id]=$o.createBucket({index:xn.bucketLayerIDs.length,layers:Xo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yo,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(po,Un,this.tileID.canonical,this.tileTransform),xn.bucketLayerIDs.push(Xo.map(Aa=>n.aC(Aa.id,Aa.scope)))))}}let _n,Xn,er,Yr;Fn.trim();const qr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Gr=()=>{if(_n)return this.status="done",jt(_n);if(this.extraShadowCaster)this.status="done",jt(null,{buckets:n.bj(rn).filter(ci=>!ci.isEmpty()),featureIndex:xn,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Un.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Xn&&er&&Yr){const ci=new X(Xn),Ci=new n.e3(er,Yr,this.lut);for(const Ki in rn){const Bi=rn[Ki];Bi instanceof n.aX?(ye(Bi.layers,this.zoom,Un.brightness,ot),n.e4(Bi,Xn,ci.positions,er,Ci.iconPositions,this.showCollisionBoxes,ot,this.tileID.canonical,this.tileZoom,this.projection,this.scaleFactor,this.pixelRatio,this.brightness)):Bi.hasPattern&&(Bi instanceof n.b1||Bi instanceof n.b2||Bi instanceof n.d5)&&(ye(Bi.layers,this.zoom,Un.brightness,ot),Bi.addFeatures(Un,this.tileID.canonical,Ci.patternPositions,ot,this.tileTransform,this.brightness))}this.status="done",jt(null,{buckets:n.bj(rn).filter(Ki=>!Ki.isEmpty()),featureIndex:xn,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ci.image,lineAtlas:Fn,imageAtlas:Ci,brightness:Un.brightness})}};if(!this.extraShadowCaster){const ci=n.e1(Un.glyphDependencies,Bi=>Object.keys(Bi).map(Number));Object.keys(ci).length?Dt.send("getGlyphs",{uid:this.uid,stacks:ci,scope:this.scope},(Bi,Di)=>{_n||(_n=Bi,Xn=Di,Gr())},void 0,!1,qr):Xn={};const Ci=Object.keys(Un.iconDependencies);Ci.length?Dt.send("getImages",{icons:Ci,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Bi,Di)=>{if(_n)return;_n=Bi;const yo={};Object.values(Di).some(po=>po.usvg)?this.rasterize(Dt,yo,Di,Un.iconDependencies,()=>{er=yo,Gr()}):(this.fillImageMap(yo,Un.iconDependencies,Di),er=yo,Gr())},void 0,!1,qr):er={};const Ki=Object.keys(Un.patternDependencies);Ki.length?Dt.send("getImages",{icons:Ki,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Bi,Di)=>{if(!_n){_n=Bi;const yo={};Object.values(Di).some(po=>po.usvg)?this.rasterize(Dt,yo,Di,Un.patternDependencies,()=>{Yr=yo,Gr()}):(this.fillImageMap(yo,Un.patternDependencies,Di),Yr=yo,Gr())}},void 0,!1,qr):Yr={}}Gr()}fillImageMap(Ne,Ge,ot){for(const Dt in ot){const jt=Ge[Dt]||[];for(const sn of jt)ot[sn.id].usvg||(Ne[sn.serialize()]=ot[sn.id])}}getImageTaskQueue(Ne,Ge,ot){const Dt={};for(const jt in Ge){const sn=ot[jt]||[];for(const xn of sn){const rn=xn.serialize();Ge[xn.id].usvg?Dt[rn]||(Dt[rn]=xn):Ne[rn]=Ge[xn.id]}}return Dt}rasterize(Ne,Ge,ot,Dt,jt){const sn=this.getImageTaskQueue(Ge,ot,Dt);this.rasterizeTask=Ne.send("rasterizeImages",{scope:this.scope,imageTasks:sn},(xn,rn)=>{if(!xn)for(const Fn in rn){const{id:Un}=n.e2.deserializeFromString(Fn);Ge[Fn]=Object.assign({},ot[Un],{data:rn[Fn]})}jt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function ye(fn,Ne,Ge,ot){const Dt=new n.a8(Ne,{brightness:Ge});for(const jt of fn)jt.recalculate(Dt,ot)}class Se extends n.E{constructor(Ne,Ge,ot,Dt,jt,sn){super(),this.actor=Ne,this.layerIndex=Ge,this.availableImages=ot,this.loadVectorData=jt||n.aD,this.loading={},this.loaded={},this.deduped=new n.aB(Ne.scheduler),this.isSpriteLoaded=Dt,this.scheduler=Ne.scheduler,this.brightness=sn}loadTile(Ne,Ge){const ot=Ne.uid,Dt=Ne&&Ne.request,jt=Dt&&Dt.collectResourceTiming,sn=this.loading[ot]=new ke(Ne);sn.abort=this.loadVectorData(Ne,(xn,rn)=>{const Fn=!this.loading[ot];if(delete this.loading[ot],sn.cancelRasterize(),Fn||xn||!rn)return sn.status="done",Fn||(this.loaded[ot]=sn),Ge(xn);const Un=rn.rawData,jn={};rn.expires&&(jn.expires=rn.expires),rn.cacheControl&&(jn.cacheControl=rn.cacheControl),sn.vectorTile=rn.vectorTile||new n.dY.VectorTile(new n.bh(Un));const _n=()=>{sn.parse(sn.vectorTile,this.layerIndex,this.availableImages,this.actor,(Xn,er)=>{if(Xn||!er)return Ge(Xn);const Yr={};if(jt){const qr=j(Dt);qr.length>0&&(Yr.resourceTiming=JSON.parse(JSON.stringify(qr)))}Ge(null,n.l({rawTileData:Un.slice(0)},er,jn,Yr))})};this.isSpriteLoaded?_n():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(_n,{type:"parseTile",isSymbolTile:Ne.isSymbolTile,zoom:Ne.tileZoom}):_n()}),this.loaded=this.loaded||{},this.loaded[ot]=sn})}reloadTile(Ne,Ge){const ot=this.loaded,Dt=Ne.uid;if(ot&&ot[Dt]){const jt=ot[Dt];jt.scaleFactor=Ne.scaleFactor,jt.showCollisionBoxes=Ne.showCollisionBoxes,jt.projection=Ne.projection,jt.brightness=Ne.brightness,jt.tileTransform=n.aQ(Ne.tileID.canonical,Ne.projection),jt.extraShadowCaster=Ne.extraShadowCaster,jt.lut=Ne.lut;const sn=(xn,rn)=>{const Fn=jt.reloadCallback;Fn&&(delete jt.reloadCallback,jt.parse(jt.vectorTile,this.layerIndex,this.availableImages,this.actor,Fn)),Ge(xn,rn)};jt.status==="parsing"?jt.reloadCallback=sn:jt.status==="done"&&(jt.vectorTile?jt.parse(jt.vectorTile,this.layerIndex,this.availableImages,this.actor,sn):sn())}else Ge(null,void 0)}abortTile(Ne,Ge){const ot=Ne.uid,Dt=this.loading[ot];Dt&&(Dt.abort&&Dt.abort(),delete this.loading[ot]),Ge()}removeTile(Ne,Ge){const ot=this.loaded,Dt=Ne.uid;ot&&ot[Dt]&&delete ot[Dt],Ge()}}class be{loadTile(Ne,Ge){const{uid:ot,encoding:Dt,rawImageData:jt,padding:sn}=Ne,xn=ImageBitmap&&jt instanceof ImageBitmap?this.getImageData(jt,sn):jt;Ge(null,new n.e5(ot,xn,Dt,sn<1))}getImageData(Ne,Ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ne.width,Ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ne.width,this.offscreenCanvas.height=Ne.height,this.offscreenCanvasContext.drawImage(Ne,0,0,Ne.width,Ne.height);const ot=this.offscreenCanvasContext.getImageData(-Ge,-Ge,Ne.width+2*Ge,Ne.height+2*Ge);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ot}}n.bg.setPbf(n.bh);class Ue{decodeRasterArray({task:Ne,buffer:Ge},ot){n.bg.performDecoding(Ge,Ne).then(Dt=>{ot(null,Dt)},Dt=>{ot(Dt)})}}const qe=n.dY.VectorTileFeature.prototype.toGeoJSON;class je{constructor(Ne){this._feature=Ne,this.extent=n.ag,this.type=Ne.type,this.properties=Ne.tags,"id"in Ne&&!isNaN(Ne.id)&&(this.id=parseInt(Ne.id,10))}loadGeometry(){if(this._feature.type===1){const Ne=[];for(const Ge of this._feature.geometry)Ne.push([new n.P(Ge[0],Ge[1])]);return Ne}{const Ne=[];for(const Ge of this._feature.geometry){const ot=[];for(const Dt of Ge)ot.push(new n.P(Dt[0],Dt[1]));Ne.push(ot)}return Ne}}toGeoJSON(Ne,Ge,ot){return qe.call(this,Ne,Ge,ot)}}class nt{constructor(Ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ag,this.length=Ne.length,this._features=Ne}feature(Ne){return new je(this._features[Ne])}}const Ct=64/4096,ft=128;class Et{constructor(){this.features=new Map}clear(){this.features.clear()}load(Ne=[],Ge){for(const ot of Ne){const Dt=ot.id;if(Dt==null)continue;let jt=this.features.get(Dt);jt&&this.updateCache(jt,Ge),ot.geometry?(jt=_t(ot),this.updateCache(jt,Ge),this.features.set(Dt,jt)):this.features.delete(Dt),this.updateCache(jt,Ge)}}updateCache(Ne,Ge){for(const{canonical:ot,uid:Dt}of Object.values(Ge)){const{z:jt,x:sn,y:xn}=ot;yt(Ne,Math.pow(2,jt),sn,xn)&&delete Ge[Dt]}}getTile(Ne,Ge,ot){const Dt=Math.pow(2,Ne),jt=[];for(const sn of this.features.values())yt(sn,Dt,Ge,ot)&&jt.push(st(sn,Dt,Ge,ot));return{features:jt}}getFeatures(){return[...this.features.values()]}}function yt({minX:fn,minY:Ne,maxX:Ge,maxY:ot},Dt,jt,sn){return fn<(jt+1+Ct)/Dt&&Ne<(sn+1+Ct)/Dt&&Ge>(jt-Ct)/Dt&&ot>(sn-Ct)/Dt}function _t(fn){const{id:Ne,geometry:Ge,properties:ot}=fn;if(!Ge)return;if(Ge.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Dt,coordinates:jt}=Ge,sn={id:Ne,type:1,geometry:[],tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},xn=sn.geometry;if(Dt==="Point")He(jt,xn,sn);else if(Dt==="MultiPoint")for(const rn of jt)He(rn,xn,sn);else if(Dt==="LineString")sn.type=2,bt(jt,xn,sn);else if(Dt==="MultiLineString")sn.type=2,Tt(jt,xn,sn);else if(Dt==="Polygon")sn.type=3,Tt(jt,xn,sn,!0);else{if(Dt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");sn.type=3;for(const rn of jt)Tt(rn,xn,sn,!0)}return sn}function He([fn,Ne],Ge,ot){const Dt=n.at(fn);let jt=n.aA(Ne);jt=jt<0?0:jt>1?1:jt,Ge.push(Dt,jt),ot.minX=Math.min(ot.minX,Dt),ot.minY=Math.min(ot.minY,jt),ot.maxX=Math.max(ot.maxX,Dt),ot.maxY=Math.max(ot.maxY,jt)}function bt(fn,Ne,Ge,ot=!1,Dt=!1){const jt=[];for(const sn of fn)He(sn,jt,Ge);Ne.push(jt),ot&&function(sn,xn){let rn=0;for(let Fn=0,Un=sn.length,jn=Un-2;Fn<Un;jn=Fn,Fn+=2)rn+=(sn[Fn]-sn[jn])*(sn[Fn+1]+sn[jn+1]);if(rn>0===xn)for(let Fn=0,Un=sn.length;Fn<Un/2;Fn+=2){const jn=sn[Fn],_n=sn[Fn+1];sn[Fn]=sn[Un-2-Fn],sn[Fn+1]=sn[Un-1-Fn],sn[Un-2-Fn]=jn,sn[Un-1-Fn]=_n}}(jt,Dt)}function Tt(fn,Ne,Ge,ot=!1){for(let Dt=0;Dt<fn.length;Dt++)bt(fn[Dt],Ne,Ge,ot,Dt===0)}function st(fn,Ne,Ge,ot){const{id:Dt,type:jt,geometry:sn,tags:xn}=fn,rn=[];if(jt===1)(function(Fn,Un,jn,_n,Xn){for(let er=0;er<Fn.length;er+=2){const Yr=Math.round(n.ag*(Fn[er+0]*Un-jn)),qr=Math.round(n.ag*(Fn[er+1]*Un-_n));Xn.push([Yr,qr])}})(sn,Ne,Ge,ot,rn);else for(const Fn of sn)Qe(Fn,Ne,Ge,ot,rn);return{id:Dt,type:jt,geometry:rn,tags:xn}}function Qe(fn,Ne,Ge,ot,Dt){const jt=-ft,sn=n.ag+ft;let xn;for(let rn=0;rn<fn.length-2;rn+=2){let Fn=Math.round(n.ag*(fn[rn+0]*Ne-Ge)),Un=Math.round(n.ag*(fn[rn+1]*Ne-ot)),jn=Math.round(n.ag*(fn[rn+2]*Ne-Ge)),_n=Math.round(n.ag*(fn[rn+3]*Ne-ot));const Xn=jn-Fn,er=_n-Un;Fn<jt&&jn<jt||(Fn<jt?(Un+=Math.round(er*((jt-Fn)/Xn)),Fn=jt):jn<jt&&(_n=Un+Math.round(er*((jt-Fn)/Xn)),jn=jt),Un<jt&&_n<jt||(Un<jt?(Fn+=Math.round(Xn*((jt-Un)/er)),Un=jt):_n<jt&&(jn=Fn+Math.round(Xn*((jt-Un)/er)),_n=jt),Fn>=sn&&jn>=sn||(Fn>=sn?(Un+=Math.round(er*((sn-Fn)/Xn)),Fn=sn):jn>=sn&&(_n=Un+Math.round(er*((sn-Fn)/Xn)),jn=sn),Un>=sn&&_n>=sn||(Un>=sn?(Fn+=Math.round(Xn*((sn-Un)/er)),Un=sn):_n>=sn&&(jn=Fn+Math.round(Xn*((sn-Un)/er)),_n=sn),xn&&Fn===xn[xn.length-1][0]&&Un===xn[xn.length-1][1]||(xn=[[Fn,Un]],Dt.push(xn)),xn.push([jn,_n])))))}}var mt,Ht,vt,ue={exports:{}},lt=function(){if(vt)return ue.exports;vt=1;var fn=n.e8(),Ne=function(){if(Ht)return mt;Ht=1;var Un=n.e6(),jn=n.e7().VectorTileFeature;function _n(er,Yr){this.options=Yr||{},this.features=er,this.length=er.length}function Xn(er,Yr){this.id=typeof er.id=="number"?er.id:void 0,this.type=er.type,this.rawGeometry=er.type===1?[er.geometry]:er.geometry,this.properties=er.tags,this.extent=Yr||4096}return mt=_n,_n.prototype.feature=function(er){return new Xn(this.features[er],this.options.extent)},Xn.prototype.loadGeometry=function(){var er=this.rawGeometry;this.geometry=[];for(var Yr=0;Yr<er.length;Yr++){for(var qr=er[Yr],Gr=[],ci=0;ci<qr.length;ci++)Gr.push(new Un(qr[ci][0],qr[ci][1]));this.geometry.push(Gr)}return this.geometry},Xn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var er=this.geometry,Yr=1/0,qr=-1/0,Gr=1/0,ci=-1/0,Ci=0;Ci<er.length;Ci++)for(var Ki=er[Ci],Bi=0;Bi<Ki.length;Bi++){var Di=Ki[Bi];Yr=Math.min(Yr,Di.x),qr=Math.max(qr,Di.x),Gr=Math.min(Gr,Di.y),ci=Math.max(ci,Di.y)}return[Yr,Gr,qr,ci]},Xn.prototype.toGeoJSON=jn.prototype.toGeoJSON,mt}();function Ge(Un){var jn=new fn;return function(_n,Xn){for(var er in _n.layers)Xn.writeMessage(3,ot,_n.layers[er])}(Un,jn),jn.finish()}function ot(Un,jn){var _n;jn.writeVarintField(15,Un.version||1),jn.writeStringField(1,Un.name||""),jn.writeVarintField(5,Un.extent||4096);var Xn={keys:[],values:[],keycache:{},valuecache:{}};for(_n=0;_n<Un.length;_n++)Xn.feature=Un.feature(_n),jn.writeMessage(2,Dt,Xn);var er=Xn.keys;for(_n=0;_n<er.length;_n++)jn.writeStringField(3,er[_n]);var Yr=Xn.values;for(_n=0;_n<Yr.length;_n++)jn.writeMessage(4,Fn,Yr[_n])}function Dt(Un,jn){var _n=Un.feature;_n.id!==void 0&&jn.writeVarintField(1,_n.id),jn.writeMessage(2,jt,Un),jn.writeVarintField(3,_n.type),jn.writeMessage(4,rn,_n)}function jt(Un,jn){var _n=Un.feature,Xn=Un.keys,er=Un.values,Yr=Un.keycache,qr=Un.valuecache;for(var Gr in _n.properties){var ci=_n.properties[Gr],Ci=Yr[Gr];if(ci!==null){Ci===void 0&&(Xn.push(Gr),Yr[Gr]=Ci=Xn.length-1),jn.writeVarint(Ci);var Ki=typeof ci;Ki!=="string"&&Ki!=="boolean"&&Ki!=="number"&&(ci=JSON.stringify(ci));var Bi=Ki+":"+ci,Di=qr[Bi];Di===void 0&&(er.push(ci),qr[Bi]=Di=er.length-1),jn.writeVarint(Di)}}}function sn(Un,jn){return(jn<<3)+(7&Un)}function xn(Un){return Un<<1^Un>>31}function rn(Un,jn){for(var _n=Un.loadGeometry(),Xn=Un.type,er=0,Yr=0,qr=_n.length,Gr=0;Gr<qr;Gr++){var ci=_n[Gr],Ci=1;Xn===1&&(Ci=ci.length),jn.writeVarint(sn(1,Ci));for(var Ki=Xn===3?ci.length-1:ci.length,Bi=0;Bi<Ki;Bi++){Bi===1&&Xn!==1&&jn.writeVarint(sn(2,Ki-1));var Di=ci[Bi].x-er,yo=ci[Bi].y-Yr;jn.writeVarint(xn(Di)),jn.writeVarint(xn(yo)),er+=Di,Yr+=yo}Xn===3&&jn.writeVarint(sn(7,1))}}function Fn(Un,jn){var _n=typeof Un;_n==="string"?jn.writeStringField(1,Un):_n==="boolean"?jn.writeBooleanField(7,Un):_n==="number"&&(Un%1!=0?jn.writeDoubleField(3,Un):Un<0?jn.writeSVarintField(6,Un):jn.writeVarintField(5,Un))}return ue.exports=Ge,ue.exports.fromVectorTileJs=Ge,ue.exports.fromGeojsonVt=function(Un,jn){jn=jn||{};var _n={};for(var Xn in Un)_n[Xn]=new Ne(Un[Xn].features,jn),_n[Xn].name=Xn,_n[Xn].version=jn.version,_n[Xn].extent=jn.extent;return Ge({layers:_n})},ue.exports.GeoJSONWrapper=Ne,ue.exports}(),le=n.e9(lt);const Je={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:fn=>fn},we=Math.fround||(Pn=new Float32Array(1),fn=>(Pn[0]=+fn,Pn[0]));var Pn;const Mt=3,or=5,wr=6;class Dr{constructor(Ne){this.options=Object.assign(Object.create(Je),Ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ne){const{log:Ge,minZoom:ot,maxZoom:Dt}=this.options;Ge&&console.time("total time");const jt=`prepare ${Ne.length} points`;Ge&&console.time(jt),this.points=Ne;const sn=[];for(let rn=0;rn<Ne.length;rn++){const Fn=Ne[rn];if(!Fn.geometry)continue;const[Un,jn]=Fn.geometry.coordinates,_n=we(ut(Un)),Xn=we(Ve(jn));sn.push(_n,Xn,1/0,rn,-1,1),this.options.reduce&&sn.push(0)}let xn=this.trees[Dt+1]=this._createTree(sn);Ge&&console.timeEnd(jt);for(let rn=Dt;rn>=ot;rn--){const Fn=+Date.now();xn=this.trees[rn]=this._createTree(this._cluster(xn,rn)),Ge&&console.log("z%d: %d clusters in %dms",rn,xn.numItems,+Date.now()-Fn)}return Ge&&console.timeEnd("total time"),this}getClusters(Ne,Ge){let ot=((Ne[0]+180)%360+360)%360-180;const Dt=Math.max(-90,Math.min(90,Ne[1]));let jt=Ne[2]===180?180:((Ne[2]+180)%360+360)%360-180;const sn=Math.max(-90,Math.min(90,Ne[3]));if(Ne[2]-Ne[0]>=360)ot=-180,jt=180;else if(ot>jt){const jn=this.getClusters([ot,Dt,180,sn],Ge),_n=this.getClusters([-180,Dt,jt,sn],Ge);return jn.concat(_n)}const xn=this.trees[this._limitZoom(Ge)],rn=xn.range(ut(ot),Ve(sn),ut(jt),Ve(Dt)),Fn=xn.data,Un=[];for(const jn of rn){const _n=this.stride*jn;Un.push(Fn[_n+or]>1?lr(Fn,_n,this.clusterProps):this.points[Fn[_n+Mt]])}return Un}getChildren(Ne){const Ge=this._getOriginId(Ne),ot=this._getOriginZoom(Ne),Dt="No cluster with the specified id.",jt=this.trees[ot];if(!jt)throw new Error(Dt);const sn=jt.data;if(Ge*this.stride>=sn.length)throw new Error(Dt);const xn=this.options.radius/(this.options.extent*Math.pow(2,ot-1)),rn=jt.within(sn[Ge*this.stride],sn[Ge*this.stride+1],xn),Fn=[];for(const Un of rn){const jn=Un*this.stride;sn[jn+4]===Ne&&Fn.push(sn[jn+or]>1?lr(sn,jn,this.clusterProps):this.points[sn[jn+Mt]])}if(Fn.length===0)throw new Error(Dt);return Fn}getLeaves(Ne,Ge,ot){const Dt=[];return this._appendLeaves(Dt,Ne,Ge=Ge||10,ot=ot||0,0),Dt}getTile(Ne,Ge,ot){const Dt=this.trees[this._limitZoom(Ne)],jt=Math.pow(2,Ne),{extent:sn,radius:xn}=this.options,rn=xn/sn,Fn=(ot-rn)/jt,Un=(ot+1+rn)/jt,jn={features:[]};return this._addTileFeatures(Dt.range((Ge-rn)/jt,Fn,(Ge+1+rn)/jt,Un),Dt.data,Ge,ot,jt,jn),Ge===0&&this._addTileFeatures(Dt.range(1-rn/jt,Fn,1,Un),Dt.data,jt,ot,jt,jn),Ge===jt-1&&this._addTileFeatures(Dt.range(0,Fn,rn/jt,Un),Dt.data,-1,ot,jt,jn),jn.features.length?jn:null}getClusterExpansionZoom(Ne){let Ge=this._getOriginZoom(Ne)-1;for(;Ge<=this.options.maxZoom;){const ot=this.getChildren(Ne);if(Ge++,ot.length!==1)break;Ne=ot[0].properties.cluster_id}return Ge}_appendLeaves(Ne,Ge,ot,Dt,jt){const sn=this.getChildren(Ge);for(const xn of sn){const rn=xn.properties;if(rn&&rn.cluster?jt+rn.point_count<=Dt?jt+=rn.point_count:jt=this._appendLeaves(Ne,rn.cluster_id,ot,Dt,jt):jt<Dt?jt++:Ne.push(xn),Ne.length===ot)break}return jt}_createTree(Ne){const Ge=new n.bE(Ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ot=0;ot<Ne.length;ot+=this.stride)Ge.add(Ne[ot],Ne[ot+1]);return Ge.finish(),Ge.data=Ne,Ge}_addTileFeatures(Ne,Ge,ot,Dt,jt,sn){for(const xn of Ne){const rn=xn*this.stride,Fn=Ge[rn+or]>1;let Un,jn,_n;if(Fn)Un=Pe(Ge,rn,this.clusterProps),jn=Ge[rn],_n=Ge[rn+1];else{const Yr=this.points[Ge[rn+Mt]];Un=Yr.properties;const[qr,Gr]=Yr.geometry.coordinates;jn=ut(qr),_n=Ve(Gr)}const Xn={type:1,geometry:[[Math.round(this.options.extent*(jn*jt-ot)),Math.round(this.options.extent*(_n*jt-Dt))]],tags:Un};let er;er=Fn||this.options.generateId?Ge[rn+Mt]:this.points[Ge[rn+Mt]].id,er!==void 0&&(Xn.id=er),sn.features.push(Xn)}}_limitZoom(Ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ne),this.options.maxZoom+1))}_cluster(Ne,Ge){const{radius:ot,extent:Dt,reduce:jt,minPoints:sn}=this.options,xn=ot/(Dt*Math.pow(2,Ge)),rn=Ne.data,Fn=[],Un=this.stride;for(let jn=0;jn<rn.length;jn+=Un){if(rn[jn+2]<=Ge)continue;rn[jn+2]=Ge;const _n=rn[jn],Xn=rn[jn+1],er=Ne.within(rn[jn],rn[jn+1],xn),Yr=rn[jn+or];let qr=Yr;for(const Gr of er){const ci=Gr*Un;rn[ci+2]>Ge&&(qr+=rn[ci+or])}if(qr>Yr&&qr>=sn){let Gr,ci=_n*Yr,Ci=Xn*Yr,Ki=-1;const Bi=(jn/Un<<5)+(Ge+1)+this.points.length;for(const Di of er){const yo=Di*Un;if(rn[yo+2]<=Ge)continue;rn[yo+2]=Ge;const po=rn[yo+or];ci+=rn[yo]*po,Ci+=rn[yo+1]*po,rn[yo+4]=Bi,jt&&(Gr||(Gr=this._map(rn,jn,!0),Ki=this.clusterProps.length,this.clusterProps.push(Gr)),jt(Gr,this._map(rn,yo)))}rn[jn+4]=Bi,Fn.push(ci/qr,Ci/qr,1/0,Bi,-1,qr),jt&&Fn.push(Ki)}else{for(let Gr=0;Gr<Un;Gr++)Fn.push(rn[jn+Gr]);if(qr>1)for(const Gr of er){const ci=Gr*Un;if(!(rn[ci+2]<=Ge)){rn[ci+2]=Ge;for(let Ci=0;Ci<Un;Ci++)Fn.push(rn[ci+Ci])}}}}return Fn}_getOriginId(Ne){return Ne-this.points.length>>5}_getOriginZoom(Ne){return(Ne-this.points.length)%32}_map(Ne,Ge,ot){if(Ne[Ge+or]>1){const sn=this.clusterProps[Ne[Ge+wr]];return ot?Object.assign({},sn):sn}const Dt=this.points[Ne[Ge+Mt]].properties,jt=this.options.map(Dt);return ot&&jt===Dt?Object.assign({},jt):jt}}function lr(fn,Ne,Ge){return{type:"Feature",id:fn[Ne+Mt],properties:Pe(fn,Ne,Ge),geometry:{type:"Point",coordinates:[(ot=fn[Ne],360*(ot-.5)),gt(fn[Ne+1])]}};var ot}function Pe(fn,Ne,Ge){const ot=fn[Ne+or],Dt=ot>=1e4?`${Math.round(ot/1e3)}k`:ot>=1e3?Math.round(ot/100)/10+"k":ot,jt=fn[Ne+wr],sn=jt===-1?{}:Object.assign({},Ge[jt]);return Object.assign(sn,{cluster:!0,cluster_id:fn[Ne+Mt],point_count:ot,point_count_abbreviated:Dt})}function ut(fn){return fn/360+.5}function Ve(fn){const Ne=Math.sin(fn*Math.PI/180),Ge=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Ge<0?0:Ge>1?1:Ge}function gt(fn){const Ne=(180-360*fn)*Math.PI/180;return 360*Math.atan(Math.exp(Ne))/Math.PI-90}function Gt(fn,Ne,Ge,ot){let Dt=ot;const jt=Ne+(Ge-Ne>>1);let sn,xn=Ge-Ne;const rn=fn[Ne],Fn=fn[Ne+1],Un=fn[Ge],jn=fn[Ge+1];for(let _n=Ne+3;_n<Ge;_n+=3){const Xn=Me(fn[_n],fn[_n+1],rn,Fn,Un,jn);if(Xn>Dt)sn=_n,Dt=Xn;else if(Xn===Dt){const er=Math.abs(_n-jt);er<xn&&(sn=_n,xn=er)}}Dt>ot&&(sn-Ne>3&&Gt(fn,Ne,sn,ot),fn[sn+2]=Dt,Ge-sn>3&&Gt(fn,sn,Ge,ot))}function Me(fn,Ne,Ge,ot,Dt,jt){let sn=Dt-Ge,xn=jt-ot;if(sn!==0||xn!==0){const rn=((fn-Ge)*sn+(Ne-ot)*xn)/(sn*sn+xn*xn);rn>1?(Ge=Dt,ot=jt):rn>0&&(Ge+=sn*rn,ot+=xn*rn)}return sn=fn-Ge,xn=Ne-ot,sn*sn+xn*xn}function At(fn,Ne,Ge,ot){const Dt={id:fn!=null?fn:null,type:Ne,geometry:Ge,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Bt(Dt,Ge);else if(Ne==="Polygon")Bt(Dt,Ge[0]);else if(Ne==="MultiLineString")for(const jt of Ge)Bt(Dt,jt);else if(Ne==="MultiPolygon")for(const jt of Ge)Bt(Dt,jt[0]);return Dt}function Bt(fn,Ne){for(let Ge=0;Ge<Ne.length;Ge+=3)fn.minX=Math.min(fn.minX,Ne[Ge]),fn.minY=Math.min(fn.minY,Ne[Ge+1]),fn.maxX=Math.max(fn.maxX,Ne[Ge]),fn.maxY=Math.max(fn.maxY,Ne[Ge+1])}function Sn(fn,Ne,Ge,ot){if(!Ne.geometry)return;const Dt=Ne.geometry.coordinates;if(Dt&&Dt.length===0)return;const jt=Ne.geometry.type,sn=Math.pow(Ge.tolerance/((1<<Ge.maxZoom)*Ge.extent),2);let xn=[],rn=Ne.id;if(Ge.promoteId?rn=Ne.properties[Ge.promoteId]:Ge.generateId&&(rn=ot||0),jt==="Point")Lt(Dt,xn);else if(jt==="MultiPoint")for(const Fn of Dt)Lt(Fn,xn);else if(jt==="LineString")Bn(Dt,xn,sn,!1);else if(jt==="MultiLineString"){if(Ge.lineMetrics){for(const Fn of Dt)xn=[],Bn(Fn,xn,sn,!1),fn.push(At(rn,"LineString",xn,Ne.properties));return}en(Dt,xn,sn,!1)}else if(jt==="Polygon")en(Dt,xn,sn,!0);else{if(jt!=="MultiPolygon"){if(jt==="GeometryCollection"){for(const Fn of Ne.geometry.geometries)Sn(fn,{id:rn,geometry:Fn,properties:Ne.properties},Ge,ot);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Fn of Dt){const Un=[];en(Fn,Un,sn,!0),xn.push(Un)}}fn.push(At(rn,jt,xn,Ne.properties))}function Lt(fn,Ne){Ne.push(gn(fn[0]),ar(fn[1]),0)}function Bn(fn,Ne,Ge,ot){let Dt,jt,sn=0;for(let rn=0;rn<fn.length;rn++){const Fn=gn(fn[rn][0]),Un=ar(fn[rn][1]);Ne.push(Fn,Un,0),rn>0&&(sn+=ot?(Dt*Un-Fn*jt)/2:Math.sqrt(Math.pow(Fn-Dt,2)+Math.pow(Un-jt,2))),Dt=Fn,jt=Un}const xn=Ne.length-3;Ne[2]=1,Gt(Ne,0,xn,Ge),Ne[xn+2]=1,Ne.size=Math.abs(sn),Ne.start=0,Ne.end=Ne.size}function en(fn,Ne,Ge,ot){for(let Dt=0;Dt<fn.length;Dt++){const jt=[];Bn(fn[Dt],jt,Ge,ot),Ne.push(jt)}}function gn(fn){return fn/360+.5}function ar(fn){const Ne=Math.sin(fn*Math.PI/180),Ge=.5-.25*Math.log((1+Ne)/(1-Ne))/Math.PI;return Ge<0?0:Ge>1?1:Ge}function Sr(fn,Ne,Ge,ot,Dt,jt,sn,xn){if(ot/=Ne,jt>=(Ge/=Ne)&&sn<ot)return fn;if(sn<Ge||jt>=ot)return null;const rn=[];for(const Fn of fn){const Un=Fn.geometry;let jn=Fn.type;const _n=Dt===0?Fn.minX:Fn.minY,Xn=Dt===0?Fn.maxX:Fn.maxY;if(_n>=Ge&&Xn<ot){rn.push(Fn);continue}if(Xn<Ge||_n>=ot)continue;let er=[];if(jn==="Point"||jn==="MultiPoint")In(Un,er,Ge,ot,Dt);else if(jn==="LineString")Gn(Un,er,Ge,ot,Dt,!1,xn.lineMetrics);else if(jn==="MultiLineString")mn(Un,er,Ge,ot,Dt,!1);else if(jn==="Polygon")mn(Un,er,Ge,ot,Dt,!0);else if(jn==="MultiPolygon")for(const Yr of Un){const qr=[];mn(Yr,qr,Ge,ot,Dt,!0),qr.length&&er.push(qr)}if(er.length){if(xn.lineMetrics&&jn==="LineString"){for(const Yr of er)rn.push(At(Fn.id,jn,Yr,Fn.tags));continue}jn!=="LineString"&&jn!=="MultiLineString"||(er.length===1?(jn="LineString",er=er[0]):jn="MultiLineString"),jn!=="Point"&&jn!=="MultiPoint"||(jn=er.length===3?"Point":"MultiPoint"),rn.push(At(Fn.id,jn,er,Fn.tags))}}return rn.length?rn:null}function In(fn,Ne,Ge,ot,Dt){for(let jt=0;jt<fn.length;jt+=3){const sn=fn[jt+Dt];sn>=Ge&&sn<=ot&&cn(Ne,fn[jt],fn[jt+1],fn[jt+2])}}function Gn(fn,Ne,Ge,ot,Dt,jt,sn){let xn=hn(fn);const rn=Dt===0?Ln:Er;let Fn,Un,jn=fn.start;for(let qr=0;qr<fn.length-3;qr+=3){const Gr=fn[qr],ci=fn[qr+1],Ci=fn[qr+2],Ki=fn[qr+3],Bi=fn[qr+4],Di=Dt===0?Gr:ci,yo=Dt===0?Ki:Bi;let po=!1;sn&&(Fn=Math.sqrt(Math.pow(Gr-Ki,2)+Math.pow(ci-Bi,2))),Di<Ge?yo>Ge&&(Un=rn(xn,Gr,ci,Ki,Bi,Ge),sn&&(xn.start=jn+Fn*Un)):Di>ot?yo<ot&&(Un=rn(xn,Gr,ci,Ki,Bi,ot),sn&&(xn.start=jn+Fn*Un)):cn(xn,Gr,ci,Ci),yo<Ge&&Di>=Ge&&(Un=rn(xn,Gr,ci,Ki,Bi,Ge),po=!0),yo>ot&&Di<=ot&&(Un=rn(xn,Gr,ci,Ki,Bi,ot),po=!0),!jt&&po&&(sn&&(xn.end=jn+Fn*Un),Ne.push(xn),xn=hn(fn)),sn&&(jn+=Fn)}let _n=fn.length-3;const Xn=fn[_n],er=fn[_n+1],Yr=Dt===0?Xn:er;Yr>=Ge&&Yr<=ot&&cn(xn,Xn,er,fn[_n+2]),_n=xn.length-3,jt&&_n>=3&&(xn[_n]!==xn[0]||xn[_n+1]!==xn[1])&&cn(xn,xn[0],xn[1],xn[2]),xn.length&&Ne.push(xn)}function hn(fn){const Ne=[];return Ne.size=fn.size,Ne.start=fn.start,Ne.end=fn.end,Ne}function mn(fn,Ne,Ge,ot,Dt,jt){for(const sn of fn)Gn(sn,Ne,Ge,ot,Dt,jt,!1)}function cn(fn,Ne,Ge,ot){fn.push(Ne,Ge,ot)}function Ln(fn,Ne,Ge,ot,Dt,jt){const sn=(jt-Ne)/(ot-Ne);return cn(fn,jt,Ge+(Dt-Ge)*sn,1),sn}function Er(fn,Ne,Ge,ot,Dt,jt){const sn=(jt-Ge)/(Dt-Ge);return cn(fn,Ne+(ot-Ne)*sn,jt,1),sn}function mr(fn,Ne){const Ge=[];for(let ot=0;ot<fn.length;ot++){const Dt=fn[ot],jt=Dt.type;let sn;if(jt==="Point"||jt==="MultiPoint"||jt==="LineString")sn=Jr(Dt.geometry,Ne);else if(jt==="MultiLineString"||jt==="Polygon"){sn=[];for(const xn of Dt.geometry)sn.push(Jr(xn,Ne))}else if(jt==="MultiPolygon"){sn=[];for(const xn of Dt.geometry){const rn=[];for(const Fn of xn)rn.push(Jr(Fn,Ne));sn.push(rn)}}Ge.push(At(Dt.id,jt,sn,Dt.tags))}return Ge}function Jr(fn,Ne){const Ge=[];Ge.size=fn.size,fn.start!==void 0&&(Ge.start=fn.start,Ge.end=fn.end);for(let ot=0;ot<fn.length;ot+=3)Ge.push(fn[ot]+Ne,fn[ot+1],fn[ot+2]);return Ge}function Ie(fn,Ne){if(fn.transformed)return fn;const Ge=1<<fn.z,ot=fn.x,Dt=fn.y;for(const jt of fn.features){const sn=jt.geometry,xn=jt.type;if(jt.geometry=[],xn===1)for(let rn=0;rn<sn.length;rn+=2)jt.geometry.push(Ot(sn[rn],sn[rn+1],Ne,Ge,ot,Dt));else for(let rn=0;rn<sn.length;rn++){const Fn=[];for(let Un=0;Un<sn[rn].length;Un+=2)Fn.push(Ot(sn[rn][Un],sn[rn][Un+1],Ne,Ge,ot,Dt));jt.geometry.push(Fn)}}return fn.transformed=!0,fn}function Ot(fn,Ne,Ge,ot,Dt,jt){return[Math.round(Ge*(fn*ot-Dt)),Math.round(Ge*(Ne*ot-jt))]}function St(fn,Ne,Ge,ot,Dt){const jt=Ne===Dt.maxZoom?0:Dt.tolerance/((1<<Ne)*Dt.extent),sn={features:[],numPoints:0,numSimplified:0,numFeatures:fn.length,source:null,x:Ge,y:ot,z:Ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const xn of fn)at(sn,xn,jt,Dt);return sn}function at(fn,Ne,Ge,ot){const Dt=Ne.geometry,jt=Ne.type,sn=[];if(fn.minX=Math.min(fn.minX,Ne.minX),fn.minY=Math.min(fn.minY,Ne.minY),fn.maxX=Math.max(fn.maxX,Ne.maxX),fn.maxY=Math.max(fn.maxY,Ne.maxY),jt==="Point"||jt==="MultiPoint")for(let xn=0;xn<Dt.length;xn+=3)sn.push(Dt[xn],Dt[xn+1]),fn.numPoints++,fn.numSimplified++;else if(jt==="LineString")Xe(sn,Dt,fn,Ge,!1,!1);else if(jt==="MultiLineString"||jt==="Polygon")for(let xn=0;xn<Dt.length;xn++)Xe(sn,Dt[xn],fn,Ge,jt==="Polygon",xn===0);else if(jt==="MultiPolygon")for(let xn=0;xn<Dt.length;xn++){const rn=Dt[xn];for(let Fn=0;Fn<rn.length;Fn++)Xe(sn,rn[Fn],fn,Ge,!0,Fn===0)}if(sn.length){let xn=Ne.tags||null;if(jt==="LineString"&&ot.lineMetrics){xn={};for(const Fn in Ne.tags)xn[Fn]=Ne.tags[Fn];xn.mapbox_clip_start=Dt.start/Dt.size,xn.mapbox_clip_end=Dt.end/Dt.size}const rn={geometry:sn,type:jt==="Polygon"||jt==="MultiPolygon"?3:jt==="LineString"||jt==="MultiLineString"?2:1,tags:xn};Ne.id!==null&&(rn.id=Ne.id),fn.features.push(rn)}}function Xe(fn,Ne,Ge,ot,Dt,jt){const sn=ot*ot;if(ot>0&&Ne.size<(Dt?sn:ot))return void(Ge.numPoints+=Ne.length/3);const xn=[];for(let rn=0;rn<Ne.length;rn+=3)(ot===0||Ne[rn+2]>sn)&&(Ge.numSimplified++,xn.push(Ne[rn],Ne[rn+1])),Ge.numPoints++;Dt&&function(rn,Fn){let Un=0;for(let jn=0,_n=rn.length,Xn=_n-2;jn<_n;Xn=jn,jn+=2)Un+=(rn[jn]-rn[Xn])*(rn[jn+1]+rn[Xn+1]);if(Un>0===Fn)for(let jn=0,_n=rn.length;jn<_n/2;jn+=2){const Xn=rn[jn],er=rn[jn+1];rn[jn]=rn[_n-2-jn],rn[jn+1]=rn[_n-1-jn],rn[_n-2-jn]=Xn,rn[_n-1-jn]=er}}(xn,jt),fn.push(xn)}const Nt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Nn{constructor(Ne,Ge){const ot=(Ge=this.options=function(jt,sn){for(const xn in sn)jt[xn]=sn[xn];return jt}(Object.create(Nt),Ge)).debug;if(ot&&console.time("preprocess data"),Ge.maxZoom<0||Ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ge.promoteId&&Ge.generateId)throw new Error("promoteId and generateId cannot be used together.");let Dt=function(jt,sn){const xn=[];if(jt.type==="FeatureCollection")for(let rn=0;rn<jt.features.length;rn++)Sn(xn,jt.features[rn],sn,rn);else Sn(xn,jt.type==="Feature"?jt:{geometry:jt},sn);return xn}(Ne,Ge);this.tiles={},this.tileCoords=[],ot&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ge.indexMaxZoom,Ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Dt=function(jt,sn){const xn=sn.buffer/sn.extent;let rn=jt;const Fn=Sr(jt,1,-1-xn,xn,0,-1,2,sn),Un=Sr(jt,1,1-xn,2+xn,0,-1,2,sn);return(Fn||Un)&&(rn=Sr(jt,1,-xn,1+xn,0,-1,2,sn)||[],Fn&&(rn=mr(Fn,1).concat(rn)),Un&&(rn=rn.concat(mr(Un,-1)))),rn}(Dt,Ge),Dt.length&&this.splitTile(Dt,0,0,0),ot&&(Dt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Ne,Ge,ot,Dt,jt,sn,xn){const rn=[Ne,Ge,ot,Dt],Fn=this.options,Un=Fn.debug;for(;rn.length;){Dt=rn.pop(),ot=rn.pop(),Ge=rn.pop(),Ne=rn.pop();const jn=1<<Ge,_n=Jn(Ge,ot,Dt);let Xn=this.tiles[_n];if(!Xn&&(Un>1&&console.time("creation"),Xn=this.tiles[_n]=St(Ne,Ge,ot,Dt,Fn),this.tileCoords.push({z:Ge,x:ot,y:Dt}),Un)){Un>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ge,ot,Dt,Xn.numFeatures,Xn.numPoints,Xn.numSimplified),console.timeEnd("creation"));const po=`z${Ge}`;this.stats[po]=(this.stats[po]||0)+1,this.total++}if(Xn.source=Ne,jt==null){if(Ge===Fn.indexMaxZoom||Xn.numPoints<=Fn.indexMaxPoints)continue}else{if(Ge===Fn.maxZoom||Ge===jt)continue;if(jt!=null){const po=jt-Ge;if(ot!==sn>>po||Dt!==xn>>po)continue}}if(Xn.source=null,Ne.length===0)continue;Un>1&&console.time("clipping");const er=.5*Fn.buffer/Fn.extent,Yr=.5-er,qr=.5+er,Gr=1+er;let ci=null,Ci=null,Ki=null,Bi=null,Di=Sr(Ne,jn,ot-er,ot+qr,0,Xn.minX,Xn.maxX,Fn),yo=Sr(Ne,jn,ot+Yr,ot+Gr,0,Xn.minX,Xn.maxX,Fn);Ne=null,Di&&(ci=Sr(Di,jn,Dt-er,Dt+qr,1,Xn.minY,Xn.maxY,Fn),Ci=Sr(Di,jn,Dt+Yr,Dt+Gr,1,Xn.minY,Xn.maxY,Fn),Di=null),yo&&(Ki=Sr(yo,jn,Dt-er,Dt+qr,1,Xn.minY,Xn.maxY,Fn),Bi=Sr(yo,jn,Dt+Yr,Dt+Gr,1,Xn.minY,Xn.maxY,Fn),yo=null),Un>1&&console.timeEnd("clipping"),rn.push(ci||[],Ge+1,2*ot,2*Dt),rn.push(Ci||[],Ge+1,2*ot,2*Dt+1),rn.push(Ki||[],Ge+1,2*ot+1,2*Dt),rn.push(Bi||[],Ge+1,2*ot+1,2*Dt+1)}}getTile(Ne,Ge,ot){Ne=+Ne,Ge=+Ge,ot=+ot;const Dt=this.options,{extent:jt,debug:sn}=Dt;if(Ne<0||Ne>24)return null;const xn=1<<Ne,rn=Jn(Ne,Ge=Ge+xn&xn-1,ot);if(this.tiles[rn])return Ie(this.tiles[rn],jt);sn>1&&console.log("drilling down to z%d-%d-%d",Ne,Ge,ot);let Fn,Un=Ne,jn=Ge,_n=ot;for(;!Fn&&Un>0;)Un--,jn>>=1,_n>>=1,Fn=this.tiles[Jn(Un,jn,_n)];return Fn&&Fn.source?(sn>1&&(console.log("found parent tile z%d-%d-%d",Un,jn,_n),console.time("drilling down")),this.splitTile(Fn.source,Un,jn,_n,Ne,Ge,ot),sn>1&&console.timeEnd("drilling down"),this.tiles[rn]?Ie(this.tiles[rn],jt):null):null}}function Jn(fn,Ne,Ge){return 32*((1<<fn)*Ge+Ne)+fn}function rr(fn,Ne){const Ge=fn.tileID.canonical;if(!this._geoJSONIndex)return void Ne(null,null);const ot=this._geoJSONIndex.getTile(Ge.z,Ge.x,Ge.y);if(!ot)return void Ne(null,null);const Dt=new nt(ot.features);let jt=le(Dt);jt.byteOffset===0&&jt.byteLength===jt.buffer.byteLength||(jt=new Uint8Array(jt)),Ne(null,{vectorTile:Dt,rawData:jt.buffer})}class Br extends Se{constructor(Ne,Ge,ot,Dt,jt,sn){super(Ne,Ge,ot,Dt,rr,sn),jt&&(this.loadGeoJSON=jt),this._dynamicIndex=new Et}loadData(Ne,Ge){const ot=Ne&&Ne.request,Dt=ot&&ot.collectResourceTiming;this.loadGeoJSON(Ne,(jt,sn)=>{if(jt||!sn)return Ge(jt);if(typeof sn!="object")return Ge(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));{try{if(Ne.filter){const rn=n.U(Ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rn.result==="error")throw new Error(rn.value.map(Fn=>`${Fn.key}: ${Fn.message}`).join(", "));sn.features=sn.features.filter(Fn=>rn.value.evaluate({zoom:0},Fn))}Ne.dynamic?(sn.type==="Feature"&&(sn={type:"FeatureCollection",features:[sn]}),Ne.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(sn.features,this.loaded),Ne.cluster&&(sn.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=Ne.cluster?new Dr(function({superclusterOptions:rn,clusterProperties:Fn}){if(!Fn||!rn)return rn;const Un={},jn={},_n={accumulated:null,zoom:0},Xn={properties:null},er=Object.keys(Fn);for(const Yr of er){const[qr,Gr]=Fn[Yr],ci=n.U(Gr),Ci=n.U(typeof qr=="string"?[qr,["accumulated"],["get",Yr]]:qr);Un[Yr]=ci.value,jn[Yr]=Ci.value}return rn.map=Yr=>{Xn.properties=Yr;const qr={};for(const Gr of er)qr[Gr]=Un[Gr].evaluate(_n,Xn);return qr},rn.reduce=(Yr,qr)=>{Xn.properties=qr;for(const Gr of er)_n.accumulated=Yr[Gr],Yr[Gr]=jn[Gr].evaluate(_n,Xn)},rn}(Ne)).load(sn.features):Ne.dynamic?this._dynamicIndex:function(rn,Fn){return new Nn(rn,Fn)}(sn,Ne.geojsonVtOptions)}catch(rn){return Ge(rn)}const xn={};if(Dt){const rn=j(ot);rn&&(xn.resourceTiming={},xn.resourceTiming[Ne.source]=JSON.parse(JSON.stringify(rn)))}Ge(null,xn)}})}reloadTile(Ne,Ge){const ot=this.loaded;return ot&&ot[Ne.uid]?Ne.partial?Ge(null,void 0):super.reloadTile(Ne,Ge):this.loadTile(Ne,Ge)}loadGeoJSON(Ne,Ge){if(Ne.request)n.n(Ne.request,Ge);else{if(typeof Ne.data!="string")return Ge(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));try{return Ge(null,JSON.parse(Ne.data))}catch(ot){return Ge(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ne,Ge){try{Ge(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(ot){Ge(ot)}}getClusterChildren(Ne,Ge){try{Ge(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(ot){Ge(ot)}}getClusterLeaves(Ne,Ge){try{Ge(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(ot){Ge(ot)}}}class Hr{constructor(Ne,Ge){this.tileID=new n.aG(Ne.tileID.overscaledZ,Ne.tileID.wrap,Ne.tileID.canonical.z,Ne.tileID.canonical.x,Ne.tileID.canonical.y),this.tileZoom=Ne.tileZoom,this.uid=Ne.uid,this.zoom=Ne.zoom,this.canonical=Ne.tileID.canonical,this.pixelRatio=Ne.pixelRatio,this.tileSize=Ne.tileSize,this.source=Ne.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Ne.projection,this.brightness=Ge}parse(Ne,Ge,ot,Dt){this.status="parsing";const jt=new n.aG(ot.tileID.overscaledZ,ot.tileID.wrap,ot.tileID.canonical.z,ot.tileID.canonical.x,ot.tileID.canonical.y),sn=[],xn=Ge.familiesBySource[ot.source],rn=new n.d$(jt,ot.promoteId);return rn.bucketLayerIDs=[],rn.is3DTile=!0,n.ea(Ne).then(Fn=>{if(!Fn)return Dt(new Error("Could not parse tile"));const Un=n.eb(Fn,1/n.cc(ot.tileID.canonical)),jn=Fn.json.extensionsUsed&&Fn.json.extensionsUsed.includes("MAPBOX_mesh_features")||Fn.json.asset.extras&&Fn.json.asset.extras.MAPBOX_mesh_features,_n=Fn.json.extensionsUsed&&Fn.json.extensionsUsed.includes("EXT_meshopt_compression"),Xn=new n.a8(this.zoom,{brightness:this.brightness});for(const er in xn)for(const Yr of xn[er]){const qr=Yr[0];rn.bucketLayerIDs.push(Yr.map(ci=>n.aC(ci.id,ci.scope))),qr.recalculate(Xn,[]);const Gr=new n.ec(Yr,Un,jt,jn,_n,this.brightness,rn);jn||(Gr.needsUpload=!0),sn.push(Gr),Gr.evaluate(qr)}this.status="done",Dt(null,{buckets:sn,featureIndex:rn,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Fn=>Dt(new Error(Fn.message)))}}class zr{constructor(Ne,Ge,ot,Dt,jt,sn){this.actor=Ne,this.layerIndex=Ge,this.availableImages=ot,this.brightness=sn,this.loading={},this.loaded={}}loadTile(Ne,Ge){const ot=Ne.uid,Dt=this.loading[ot]=new Hr(Ne,this.brightness);n.bi(Ne.request,(jt,sn)=>{const xn=!this.loading[ot];return delete this.loading[ot],xn||jt?(Dt.status="done",xn||(this.loaded[ot]=Dt),Ge(jt)):sn&&sn.byteLength!==0?void Dt.parse(sn,this.layerIndex,Ne,(rn,Fn)=>{Dt.status="done",this.loaded=this.loaded||{},this.loaded[ot]=Dt,rn||!Fn?Ge(rn):Ge(null,Fn)}):(Dt.status="done",this.loaded[ot]=Dt,Ge())})}reloadTile(Ne,Ge){const ot=this.loaded,Dt=Ne.uid;if(ot&&ot[Dt]){const jt=ot[Dt];jt.projection=Ne.projection,jt.brightness=Ne.brightness;const sn=(xn,rn)=>{jt.reloadCallback&&(delete jt.reloadCallback,this.loadTile(Ne,Ge)),Ge(xn,rn)};jt.status==="parsing"?jt.reloadCallback=sn:jt.status==="done"&&this.loadTile(Ne,Ge)}}abortTile(Ne,Ge){const ot=Ne.uid;this.loading[ot]&&delete this.loading[ot],Ge()}removeTile(Ne,Ge){const ot=this.loaded,Dt=Ne.uid;ot&&ot[Dt]&&delete ot[Dt],Ge()}}class Tr{constructor(Ne){this.self=Ne,this.actor=new n.ed(Ne,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.I,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:Se,geojson:Br,"batched-model":zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ge,ot)=>{if(this.workerSourceTypes[Ge])throw new Error(`Worker source with name "${Ge}" already registered.`);this.workerSourceTypes[Ge]=ot},this.self.registerRTLTextPlugin=Ge=>{if(n.ee.isParsed())throw new Error("RTL text plugin already registered.");n.ee.applyArabicShaping=Ge.applyArabicShaping,n.ee.processBidirectionalText=Ge.processBidirectionalText,n.ee.processStyledBidirectionalText=Ge.processStyledBidirectionalText}}clearCaches(Ne,Ge,ot){delete this.layerIndexes[Ne],delete this.availableImages[Ne],delete this.workerSources[Ne],delete this.demWorkerSources[Ne],delete this.rasterArrayWorkerSource,ot()}checkIfReady(Ne,Ge,ot){ot()}setReferrer(Ne,Ge){this.referrer=Ge}spriteLoaded(Ne,{scope:Ge,isLoaded:ot}){if(this.isSpriteLoaded[Ne]||(this.isSpriteLoaded[Ne]={}),this.isSpriteLoaded[Ne][Ge]=ot,this.workerSources[Ne]&&this.workerSources[Ne][Ge])for(const Dt in this.workerSources[Ne][Ge]){const jt=this.workerSources[Ne][Ge][Dt];for(const sn in jt){const xn=jt[sn];xn instanceof Se&&(xn.isSpriteLoaded=ot,xn.fire(new n.z("isSpriteLoaded")))}}}setImages(Ne,{scope:Ge,images:ot},Dt){if(this.availableImages[Ne]||(this.availableImages[Ne]={}),this.availableImages[Ne][Ge]=ot,this.workerSources[Ne]&&this.workerSources[Ne][Ge]){for(const jt in this.workerSources[Ne][Ge]){const sn=this.workerSources[Ne][Ge][jt];for(const xn in sn)sn[xn].availableImages=ot}Dt()}else Dt()}setProjection(Ne,Ge){this.projections[Ne]=n.bP(Ge)}setBrightness(Ne,Ge,ot){this.brightness=Ge,ot()}setLayers(Ne,Ge,ot){this.getLayerIndex(Ne,Ge.scope).replace(Ge.layers,Ge.options),ot()}updateLayers(Ne,Ge,ot){this.getLayerIndex(Ne,Ge.scope).update(Ge.layers,Ge.removedIds,Ge.options),ot()}loadTile(Ne,Ge,ot){Ge.projection=this.projections[Ne]||this.defaultProjection,this.getWorkerSource(Ne,Ge.type,Ge.source,Ge.scope).loadTile(Ge,ot)}loadDEMTile(Ne,Ge,ot){this.getDEMWorkerSource(Ne,Ge.source,Ge.scope).loadTile(Ge,ot)}decodeRasterArray(Ne,Ge,ot){this.getRasterArrayWorkerSource().decodeRasterArray(Ge,ot)}reloadTile(Ne,Ge,ot){Ge.projection=this.projections[Ne]||this.defaultProjection,this.getWorkerSource(Ne,Ge.type,Ge.source,Ge.scope).reloadTile(Ge,ot)}abortTile(Ne,Ge,ot){this.getWorkerSource(Ne,Ge.type,Ge.source,Ge.scope).abortTile(Ge,ot)}removeTile(Ne,Ge,ot){this.getWorkerSource(Ne,Ge.type,Ge.source,Ge.scope).removeTile(Ge,ot)}removeSource(Ne,Ge,ot){if(!(this.workerSources[Ne]&&this.workerSources[Ne][Ge.scope]&&this.workerSources[Ne][Ge.scope][Ge.type]&&this.workerSources[Ne][Ge.scope][Ge.type][Ge.source]))return;const Dt=this.workerSources[Ne][Ge.scope][Ge.type][Ge.source];delete this.workerSources[Ne][Ge.scope][Ge.type][Ge.source],Dt.removeSource!==void 0?Dt.removeSource(Ge,ot):ot()}loadWorkerSource(Ne,Ge,ot){try{this.self.importScripts(Ge.url),ot()}catch(Dt){ot(Dt.toString())}}syncRTLPluginState(Ne,Ge,ot){try{n.ee.setState(Ge);const Dt=n.ee.getPluginURL();if(n.ee.isLoaded()&&!n.ee.isParsed()&&Dt!=null){this.self.importScripts(Dt);const jt=n.ee.isParsed();ot(jt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Dt}`),jt)}}catch(Dt){ot(Dt.toString())}}setDracoUrl(Ne,Ge){this.dracoUrl=Ge}getAvailableImages(Ne,Ge){this.availableImages[Ne]||(this.availableImages[Ne]={});let ot=this.availableImages[Ne][Ge];return ot||(ot=[]),ot}getLayerIndex(Ne,Ge){this.layerIndexes[Ne]||(this.layerIndexes[Ne]={});let ot=this.layerIndexes[Ne][Ge];return ot||(ot=this.layerIndexes[Ne][Ge]=new Y,ot.scope=Ge),ot}getWorkerSource(Ne,Ge,ot,Dt){return this.workerSources[Ne]||(this.workerSources[Ne]={}),this.workerSources[Ne][Dt]||(this.workerSources[Ne][Dt]={}),this.workerSources[Ne][Dt][Ge]||(this.workerSources[Ne][Dt][Ge]={}),this.isSpriteLoaded[Ne]||(this.isSpriteLoaded[Ne]={}),this.workerSources[Ne][Dt][Ge][ot]||(this.workerSources[Ne][Dt][Ge][ot]=new this.workerSourceTypes[Ge]({send:(jt,sn,xn,rn,Fn,Un)=>{this.actor.send(jt,sn,xn,Ne,Fn,Un)},scheduler:this.actor.scheduler},this.getLayerIndex(Ne,Dt),this.getAvailableImages(Ne,Dt),this.isSpriteLoaded[Ne][Dt],void 0,this.brightness)),this.workerSources[Ne][Dt][Ge][ot]}rasterizeImages(Ne,Ge,ot){const{imageTasks:Dt,scope:jt}=Ge,sn={};for(const xn in Dt){const{image:rn,imageIdWithOptions:Fn}=Dt[xn];sn[xn]=this.imageRasterizer.rasterize(Fn,rn,jt,Ne)}ot(void 0,sn)}removeRasterizedImages(Ne,Ge,ot){const{imageIds:Dt,scope:jt}=Ge;this.imageRasterizer.removeImagesFromCacheByIds(Dt,jt,Ne),ot()}getDEMWorkerSource(Ne,Ge,ot){return this.demWorkerSources[Ne]||(this.demWorkerSources[Ne]={}),this.demWorkerSources[Ne][ot]||(this.demWorkerSources[Ne][ot]={}),this.demWorkerSources[Ne][ot][Ge]||(this.demWorkerSources[Ne][ot][Ge]=new be),this.demWorkerSources[Ne][ot][Ge]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new Ue),this.rasterArrayWorkerSource}enforceCacheSizeLimit(Ne,Ge){n.ef(Ge)}getWorkerPerformanceMetrics(Ne,Ge,ot){ot(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Tr(self)),Tr}),M(["./shared"],function(n){var j="3.10.0";const $={create:"create",load:"load",fullLoad:"fullLoad"},U={mark(u){performance.mark(u)},measure(u,t,o){performance.measure(u,t,o)}};function Y(u){const t=u.name.split("?")[0];return n.a(t)&&t.includes("mapbox-gl.js")?"javascript":n.a(t)&&t.includes("mapbox-gl.css")?"css":n.b(t)?"fontRange":n.c(t)?"sprite":n.i(t)?"style":n.d(t)?"tilejson":"other"}var te,X={},B=function(){if(te)return X;function u(d){return!t(d)}function t(d){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,A,k=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(k);try{A=new Worker(Z),b=!0}catch(q){b=!1}return A&&A.terminate(),URL.revokeObjectURL(Z),b}()?function(){var b=document.createElement("canvas");b.width=b.height=1;var A=b.getContext("2d");if(!A)return!1;var k=A.getImageData(0,0,1,1);return k&&k.width===b.width}()?(o[v=d&&d.failIfMajorPerformanceCaveat]===void 0&&(o[v]=function(b){var A,k=function(Z){var q=document.createElement("canvas"),re=Object.create(u.webGLContextAttributes);return re.failIfMajorPerformanceCaveat=Z,q.getContext("webgl2",re)}(b);if(!k)return!1;try{A=k.createShader(k.VERTEX_SHADER)}catch(Z){return!1}return!(!A||k.isContextLost())&&(k.shaderSource(A,"void main() {}"),k.compileShader(A),k.getShaderParameter(A,k.COMPILE_STATUS)===!0)}(v)),o[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var v}te=1,X.supported=u,X.notSupportedReason=t;var o={};return u.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},X}();function K(u,t,o){const d=document.createElement(u);return t!=null&&(d.className=t),o&&o.appendChild(d),d}function de(u,t,o){const d=document.createElementNS("http://www.w3.org/2000/svg",u);for(const v of Object.keys(t))d.setAttributeNS(null,v,String(t[v]));return o&&o.appendChild(d),d}const he=typeof document!="undefined"?document.documentElement&&document.documentElement.style:null,J=he&&he.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ae;function se(){he&&J&&(ae=he[J],he[J]="none")}function Ee(){he&&J&&(he[J]=ae)}function Le(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",Le,!0)}function ke(){window.addEventListener("click",Le,!0),window.setTimeout(()=>{window.removeEventListener("click",Le,!0)},0)}function ye(u,t){const o=u.getBoundingClientRect();return Ue(u,o,t)}function Se(u,t){const o=u.getBoundingClientRect(),d=[];for(let v=0;v<t.length;v++)d.push(Ue(u,o,t[v]));return d}function be(u){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&u.button===2&&u.ctrlKey?0:u.button}function Ue(u,t,o){const d=u.offsetWidth===t.width?1:u.offsetWidth/t.width;return new n.P((o.clientX-t.left)*d,(o.clientY-t.top)*d)}const qe="01",je="NO_ACCESS_TOKEN";class nt{constructor(t,o,d){this._transformRequestFn=t,this._customAccessToken=o,this._silenceAuthErrors=!!d,this._createSkuToken()}_createSkuToken(){const t=function(){let o="";for(let d=0;d<10;d++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",qe,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}normalizeStyleURL(t,o){if(!n.f(t))return t;const d=ft(t);return d.params.push(`sdk=js-${j}`),d.path=`/styles/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeGlyphsURL(t,o){if(!n.f(t))return t;const d=ft(t);return d.path=`/fonts/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeModelURL(t,o){if(!n.f(t))return t;const d=ft(t);return d.path=`/models/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeSourceURL(t,o,d,v){if(!n.f(t))return t;const b=ft(t);return b.path=`/v4/${b.authority}.json`,b.params.push("secure"),d&&b.params.push(`language=${d}`),v&&b.params.push(`worldview=${v}`),this._makeAPIURL(b,this._customAccessToken||o)}normalizeIconsetURL(t,o){const d=ft(t);return n.f(t)?(d.path=`/styles/v1${d.path}/iconset.pbf`,this._makeAPIURL(d,this._customAccessToken||o)):Et(d)}normalizeSpriteURL(t,o,d,v){const b=ft(t);return n.f(t)?(b.path=`/styles/v1${b.path}/sprite${o}${d}`,this._makeAPIURL(b,this._customAccessToken||v)):(b.path+=`${o}${d}`,Et(b))}normalizeTileURL(t,o,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!n.f(t))return t;const v=ft(t);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||d&&v.authority!=="raster"&&d===512?"@2x":""}${n.m.supported?".webp":"$1"}`),v.authority==="raster"?v.path=`/${n.e.RASTER_URL_PREFIX}${v.path}`:v.authority==="rasterarrays"?v.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${v.path}`:v.authority==="3dtiles"?v.path=`/${n.e.TILES3D_URL_PREFIX}${v.path}`:(v.path=v.path.replace(/^.+\/v4\//,"/"),v.path=`/${n.e.TILE_URL_VERSION}${v.path}`);const b=this._customAccessToken||function(A){for(const k of A){const Z=k.match(/^access_token=(.*)$/);if(Z)return Z[1]}return null}(v.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&b&&this._skuToken&&v.params.push(`sku=${this._skuToken}`),this._makeAPIURL(v,b)}canonicalizeTileURL(t,o){const d=ft(t);if(!d.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!d.path.match(/\.[\w]+$/))return t;let v="mapbox://";d.path.match(/^\/raster\/v1\//)?v+=`raster/${d.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:d.path.match(/^\/rasterarrays\/v1\//)?v+=`rasterarrays/${d.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:v+=`tiles/${d.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let b=d.params;return o&&(b=b.filter(A=>!A.match(/^access_token=/))),b.length&&(v+=`?${b.join("&")}`),v}canonicalizeTileset(t,o){const d=!!o&&n.f(o),v=[];for(const b of t.tiles||[])n.h(b)?v.push(this.canonicalizeTileURL(b,d)):v.push(b);return v}_makeAPIURL(t,o){const d="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",v=ft(n.e.API_URL);if(t.protocol=v.protocol,t.authority=v.authority,t.protocol==="http"){const b=t.params.indexOf("secure");b>=0&&t.params.splice(b,1)}if(v.path!=="/"&&(t.path=`${v.path}${t.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return Et(t);if(o=o||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${d}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${d}`)}return t.params=t.params.filter(b=>b.indexOf("access_token")===-1),t.params.push(`access_token=${o||""}`),Et(t)}}const Ct=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ft(u){const t=u.match(Ct);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Et(u){const t=u.params.length?`?${u.params.join("&")}`:"";return`${u.protocol}://${u.authority}${u.path}${t}`}const yt="mapbox.eventData";function _t(u){if(!u)return null;const t=u.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(n.j(t[1]))}catch(o){return null}}class He{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const o=_t(n.e.ACCESS_TOKEN);let d="";return d=o&&o.u?n.k(o.u):n.e.ACCESS_TOKEN||"",t?`${yt}.${t}:${d}`:`${yt}:${d}`}fetchEventData(){const t=n.s("localStorage"),o=this.getStorageKey(),d=this.getStorageKey("uuid");if(t)try{const v=localStorage.getItem(o);v&&(this.eventData=JSON.parse(v));const b=localStorage.getItem(d);b&&(this.anonId=b)}catch(v){n.w("Unable to read from LocalStorage")}}saveEventData(){const t=n.s("localStorage"),o=this.getStorageKey(),d=this.getStorageKey("uuid"),v=this.anonId;if(t&&v)try{localStorage.setItem(d,v),Object.keys(this.eventData).length>=1&&localStorage.setItem(o,JSON.stringify(this.eventData))}catch(b){n.w("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,o,d,v){if(!n.e.EVENTS_URL)return;const b=ft(n.e.EVENTS_URL);b.params.push(`access_token=${v||n.e.ACCESS_TOKEN||""}`);const A={event:this.type,created:new Date(t).toISOString()},k=o?n.l(A,o):A,Z={url:Et(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=n.p(Z,q=>{this.pendingRequest=null,d(q),this.saveEventData(),this.processRequests(v)})}queueRequest(t,o){this.queue.push(t),this.processRequests(o)}}const bt=new class extends He{constructor(u){super("appUserTurnstile"),this._customAccessToken=u}postTurnstileEvent(u,t){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(u)&&u.some(o=>n.f(o)||n.h(o))&&this.queueRequest(Date.now(),t)}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=_t(n.e.ACCESS_TOKEN),o=t?t.u:n.e.ACCESS_TOKEN;let d=o!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),d=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),A=new Date(v),k=(v-this.eventData.lastSuccess)/864e5;d=d||k>=1||k<-1||b.getDate()!==A.getDate()}else d=!0;d?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:j,skuId:qe,"enabled.telemetry":!1,userId:this.anonId},b=>{b||(this.eventData.lastSuccess=v,this.eventData.tokenU=o)},u):this.processRequests()}},Tt=bt.postTurnstileEvent.bind(bt),st=new class extends He{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(u,t,o,d){this.skuToken=t,this.errorCb=d,n.e.EVENTS_URL&&(o||n.e.ACCESS_TOKEN?this.queueRequest({id:u,timestamp:Date.now()},o):this.errorCb(new Error(je)))}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:o}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:j,skuId:qe,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):t&&(this.success[t]=!0)},u))}remove(){this.errorCb=null}},Qe=st.postMapLoadEvent.bind(st),mt=new class extends He{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(u){let t=this.mapInstanceIdMap.get(u);return t||(t=n.u(),this.mapInstanceIdMap.set(u,t)),t}getEventId(u){const t=this.eventIdPerMapInstanceMap.get(u)||0;return this.eventIdPerMapInstanceMap.set(u,t+1),t}postStyleLoadEvent(u,t){const{map:o,style:d,importedStyles:v}=t;if(!n.e.EVENTS_URL||!u&&!n.e.ACCESS_TOKEN)return;const b=this.getMapInstanceId(o),A={mapInstanceId:b,eventId:this.getEventId(b),style:d};v.length&&(A.importedStyles=v),this.queueRequest({timestamp:Date.now(),payload:A},u)}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:t,payload:o}=this.queue.shift();this.postEvent(t,o,()=>{},u)}},Ht=mt.postStyleLoadEvent.bind(mt),vt=new class extends He{constructor(){super("gljs.performance")}postPerformanceEvent(u,t){n.e.EVENTS_URL&&(u||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},u)}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:t,performanceData:o}=this.queue.shift(),d=function(v){const b=performance.getEntriesByType("resource"),A=performance.getEntriesByType("mark"),k=function(Te){const et={};if(Te){for(const We in Te)if(We!=="other")for(const rt of Te[We]){const it=`${We}ResolveRangeMin`,kt=`${We}ResolveRangeMax`,qt=`${We}RequestCount`,Qt=`${We}RequestCachedCount`;et[it]=Math.min(et[it]||1/0,rt.startTime),et[kt]=Math.max(et[kt]||-1/0,rt.responseEnd);const vn=on=>{et[on]===void 0&&(et[on]=0),++et[on]};rt.transferSize!==void 0&&rt.transferSize===0&&vn(Qt),vn(qt)}}return et}(function(Te,et){const We={};if(Te)for(const rt of Te){const it=et(rt);We[it]===void 0&&(We[it]=[]),We[it].push(rt)}return We}(b,Y)),Z=window.devicePixelRatio,q=navigator.connection||navigator.mozConnection||navigator.webkitConnection,re=q?q.effectiveType:void 0,fe={counters:[],metadata:[],attributes:[]},pe=(Te,et,We)=>{We!=null&&Te.push({name:et,value:We.toString()})};for(const Te in k)pe(fe.counters,Te,k[Te]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(pe(fe.counters,"interactionRangeMin",v.interactionRange[0]),pe(fe.counters,"interactionRangeMax",v.interactionRange[1])),A)for(const Te of Object.keys($)){const et=$[Te],We=A.find(rt=>rt.name===et);We&&pe(fe.counters,et,We.startTime)}return pe(fe.counters,"visibilityHidden",v.visibilityHidden),pe(fe.attributes,"style",function(Te){if(Te)for(const et of Te){const We=et.name.split("?")[0];if(n.i(We)){const rt=We.split("/").slice(-2);if(rt.length===2)return`mapbox://styles/${rt[0]}/${rt[1]}`}}}(b)),pe(fe.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),pe(fe.attributes,"fogEnabled",v.fogEnabled?"true":"false"),pe(fe.attributes,"projection",v.projection),pe(fe.attributes,"zoom",v.zoom),pe(fe.metadata,"devicePixelRatio",Z),pe(fe.metadata,"connectionEffectiveType",re),pe(fe.metadata,"navigatorUserAgent",navigator.userAgent),pe(fe.metadata,"screenWidth",window.screen.width),pe(fe.metadata,"screenHeight",window.screen.height),pe(fe.metadata,"windowWidth",window.innerWidth),pe(fe.metadata,"windowHeight",window.innerHeight),pe(fe.metadata,"mapWidth",v.width/Z),pe(fe.metadata,"mapHeight",v.height/Z),pe(fe.metadata,"webglRenderer",v.renderer),pe(fe.metadata,"webglVendor",v.vendor),pe(fe.metadata,"sdkVersion",j),pe(fe.metadata,"sdkIdentifier","mapbox-gl-js"),fe}(o);for(const v of d.metadata);for(const v of d.counters);for(const v of d.attributes);this.postEvent(t,d,()=>{},u)}},ue=vt.postPerformanceEvent.bind(vt),lt=new class extends He{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(u,t,o,d){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const v=ft(n.e.API_URL+n.e.SESSION_PATH);v.params.push(`sku=${t||""}`),v.params.push(`access_token=${d||n.e.ACCESS_TOKEN||""}`);const b={url:Et(v),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(b,A=>{this.pendingRequest=null,o(A),this.saveEventData(),this.processRequests(d)})}getSessionAPI(u,t,o,d){this.skuToken=t,this.errorCb=d,n.e.SESSION_PATH&&n.e.API_URL&&(o||n.e.ACCESS_TOKEN?this.queueRequest({id:u,timestamp:Date.now()},o):this.errorCb(new Error(je)))}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:o}=this.queue.shift();t&&this.success[t]||this.getSession(o,this.skuToken,d=>{d?this.errorCb(d):t&&(this.success[t]=!0)},u)}remove(){this.errorCb=null}},le=lt.getSessionAPI.bind(lt),Je=new Set;function we(u,t){t?Je.add(u):Je.delete(u)}class Pn{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(t,o){this._updatedSourceCaches[t]=o,this.setDirty()}discardSourceCacheUpdate(t){delete this._updatedSourceCaches[t]}updateLayer(t){const o=t.scope;this._updatedLayers[o]=this._updatedLayers[o]||new Set,this._updatedLayers[o].add(t.id),this.setDirty()}removeLayer(t){const o=t.scope;this._removedLayers[o]=this._removedLayers[o]||{},this._updatedLayers[o]=this._updatedLayers[o]||new Set,this._removedLayers[o][t.id]=t,this._updatedLayers[o].delete(t.id),this._updatedPaintProps.delete(t.fqid),this.setDirty()}getRemovedLayer(t){return this._removedLayers[t.scope]?this._removedLayers[t.scope][t.id]:null}discardLayerRemoval(t){this._removedLayers[t.scope]&&delete this._removedLayers[t.scope][t.id]}getLayerUpdatesByScope(){const t={};for(const o in this._updatedLayers)t[o]=t[o]||{},t[o].updatedIds=Array.from(this._updatedLayers[o].values());for(const o in this._removedLayers)t[o]=t[o]||{},t[o].removedIds=Object.keys(this._removedLayers[o]);return t}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(t){this._updatedPaintProps.add(t.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(t){this._updatedImages.add(t),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Mt(u){const{userImage:t}=u;return!!(t&&t.render&&t.render())&&(u.data.replace(new Uint8Array(t.data.buffer)),!0)}class or extends n.E{constructor(t){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=t,t!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.I),this._imageRasterizer}createScope(t){this.images[t]={},this.loaded[t]=!1,this.updatedImages[t]={},this.patterns[t]={},this.callbackDispatchedThisFrame[t]={},this.atlasImage[t]=new n.r({width:1,height:1})}isLoaded(){for(const t in this.loaded)if(!this.loaded[t])return!1;return!0}setLoaded(t,o){if(this.loaded[o]!==t&&(this.loaded[o]=t,t)){for(const{ids:d,callback:v}of this.requestors)this._notify(d,o,v);this.requestors=[]}}hasImage(t,o){return!!this.getImage(t,o)}getImage(t,o){return this.images[o][t]}addImage(t,o,d){this._validate(t,d)&&(this.images[o][t]=d)}_validate(t,o){let d=!0;return this._validateStretch(o.stretchX,o.data&&o.data.width)||(this.fire(new n.y(new Error(`Image "${t}" has invalid "stretchX" value`))),d=!1),this._validateStretch(o.stretchY,o.data&&o.data.height)||(this.fire(new n.y(new Error(`Image "${t}" has invalid "stretchY" value`))),d=!1),this._validateContent(o.content,o)||(this.fire(new n.y(new Error(`Image "${t}" has invalid "content" value`))),d=!1),d}_validateStretch(t,o){if(!t)return!0;let d=0;for(const v of t){if(v[0]<d||v[1]<v[0]||o<v[1])return!1;d=v[1]}return!0}_validateContent(t,o){return t?t.length!==4||!o.usvg&&(t[0]<0||o.data.width<t[0]||t[1]<0||o.data.height<t[1]||t[2]<0||o.data.width<t[2]||t[3]<0||o.data.height<t[3])?!1:!(t[2]<t[0]||t[3]<t[1]):!0}updateImage(t,o,d){d.version=this.images[o][t].version+1,this.images[o][t]=d,this.updatedImages[o][t]=!0,this.removeFromImageRasterizerCache(t,o)}removeFromImageRasterizerCache(t,o){this.spriteFormat!=="raster"&&(n.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[t],scope:o}):this.imageRasterizer.removeImagesFromCacheByIds([t],o))}removeImage(t,o){const d=this.images[o][t];delete this.images[o][t],delete this.patterns[o][t],this.removeFromImageRasterizerCache(t,o),d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(t){return Object.keys(this.images[t])}getImages(t,o,d){let v=!0;const b=!!this.loaded[o];if(!b)for(const A of t)this.images[o][A]||(v=!1);b||v?this._notify(t,o,d):this.requestors.push({ids:t,scope:o,callback:d})}rasterizeImages({scope:t,imageTasks:o},d){const v={};for(const b in o){const A=o[b],k=this.getImage(A.id,t);k&&(v[b]={image:k,imageIdWithOptions:A})}n.t()?this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{imageTasks:v,scope:t},d):this.rasterizeImagesInMainThread({imageTasks:v,scope:t},d)}rasterizeImagesInMainThread(t,o){const{imageTasks:d,scope:v}=t,b={};for(const A in d){const{image:k,imageIdWithOptions:Z}=d[A];b[A]=this.imageRasterizer.rasterize(Z,k,v,"")}o(void 0,b)}getUpdatedImages(t){return this.updatedImages[t]}_notify(t,o,d){const v={};for(const b of t){this.images[o][b]||this.fire(new n.z("styleimagemissing",{id:b}));const A=this.images[o][b];A?v[b]={data:A.usvg?null:A.data.clone(),pixelRatio:A.pixelRatio,sdf:A.sdf,usvg:A.usvg,version:A.version,stretchX:A.stretchX,stretchY:A.stretchY,content:A.content,hasRenderCallback:!!(A.userImage&&A.userImage.render)}:n.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,v)}getPixelSize(t){const{width:o,height:d}=this.atlasImage[t];return{width:o,height:d}}getPattern(t,o,d){const v=this.patterns[o][t],b=this.getImage(t,o);if(!b)return null;if(v&&v.position.version===b.version)return v.position;if(v)v.position.version=b.version;else{b.usvg&&!b.data&&(b.data=this.imageRasterizer.rasterize(n.A.from(t).getPrimary(),b,o,""));const A={w:b.data.width+2*n.B,h:b.data.height+2*n.B,x:0,y:0},k=new n.C(A,b,n.B);this.patterns[o][t]={bin:A,position:k}}return this._updatePatternAtlas(o,d),this.patterns[o][t].position}bind(t,o){const d=t.gl;let v=this.atlasTexture[o];v?this.dirty&&(v.update(this.atlasImage[o]),this.dirty=!1):(v=new n.T(t,this.atlasImage[o],d.RGBA8),this.atlasTexture[o]=v),v.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(t,o){const d=[];for(const k in this.patterns[t])d.push(this.patterns[t][k].bin);const{w:v,h:b}=n.F(d),A=this.atlasImage[t];A.resize({width:v||1,height:b||1});for(const k in this.patterns[t]){const{bin:Z,position:q}=this.patterns[t][k];let re=q.padding;const fe=Z.x+re,pe=Z.y+re,Te=this.images[t][k].data,et=Te.width,We=Te.height;re=re>1?re-1:re,n.r.copy(Te,A,{x:0,y:0},{x:fe,y:pe},{width:et,height:We},o),n.r.copy(Te,A,{x:0,y:We-re},{x:fe,y:pe-re},{width:et,height:re},o),n.r.copy(Te,A,{x:0,y:0},{x:fe,y:pe+We},{width:et,height:re},o),n.r.copy(Te,A,{x:et-re,y:0},{x:fe-re,y:pe},{width:re,height:We},o),n.r.copy(Te,A,{x:0,y:0},{x:fe+et,y:pe},{width:re,height:We},o),n.r.copy(Te,A,{x:et-re,y:We-re},{x:fe-re,y:pe-re},{width:re,height:re},o),n.r.copy(Te,A,{x:0,y:We-re},{x:fe+et,y:pe-re},{width:re,height:re},o),n.r.copy(Te,A,{x:0,y:0},{x:fe+et,y:pe+We},{width:re,height:re},o),n.r.copy(Te,A,{x:et-re,y:0},{x:fe-re,y:pe+We},{width:re,height:re},o)}this.dirty=!0}beginFrame(){for(const t in this.images)this.callbackDispatchedThisFrame[t]={}}dispatchRenderCallbacks(t,o){for(const d of t){if(this.callbackDispatchedThisFrame[o][d])continue;this.callbackDispatchedThisFrame[o][d]=!0;const v=this.images[o][d];Mt(v)&&this.updateImage(d,o,v)}}}function wr(u){const t=u.key,o=u.value,d=u.valueSpec||{},v=u.objectElementValidators||{},b=u.style,A=u.styleSpec;let k=[];const Z=n.H(o);if(Z!=="object")return[new n.V(t,o,`object expected, ${Z} found`)];for(const q in o){const re=q.split(".")[0];let fe;v[re]?fe=v[re]:d[re]?fe=cn:v["*"]?fe=v["*"]:d["*"]&&(fe=cn),fe?k=k.concat(fe({key:(t&&`${t}.`)+q,value:o[q],valueSpec:d[re]||d["*"],style:b,styleSpec:A,object:o,objectKey:q},o)):k.push(new n.G(t,o[q],`unknown property "${q}"`))}for(const q in d)v[q]||d[q].required&&d[q].default===void 0&&o[q]===void 0&&k.push(new n.V(t,o,`missing required property "${q}"`));return k}function Dr(u){const t=u.value,o=u.valueSpec,d=u.style,v=u.styleSpec,b=u.key,A=u.arrayElementValidator||cn;if(n.H(t)!=="array")return[new n.V(b,t,`array expected, ${n.H(t)} found`)];if(o.length&&t.length!==o.length)return[new n.V(b,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new n.V(b,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let k={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};v.$version<7&&(k.function=o.function),n.H(o.value)==="object"&&(k=o.value);let Z=[];for(let q=0;q<t.length;q++)Z=Z.concat(A({array:t,arrayIndex:q,value:t[q],valueSpec:k,style:d,styleSpec:v,key:`${b}[${q}]`},!0));return Z}function lr(u){const t=u.key,o=u.value,d=u.valueSpec;let v=n.H(o);if(v==="number"&&o!=o&&(v="NaN"),v!=="number")return[new n.V(t,o,`number expected, ${v} found`)];if("minimum"in d){let b=d.minimum;if(n.H(d.minimum)==="array"&&(b=d.minimum[u.arrayIndex]),o<b)return[new n.V(t,o,`${o} is less than the minimum value ${b}`)]}if("maximum"in d){let b=d.maximum;if(n.H(d.maximum)==="array"&&(b=d.maximum[u.arrayIndex]),o>b)return[new n.V(t,o,`${o} is greater than the maximum value ${b}`)]}return[]}function Pe(u){const t=u.valueSpec,o=n.K(u.value.type);let d,v,b,A={};const k=o!=="categorical"&&u.value.property===void 0,Z=!k,q=n.H(u.value.stops)==="array"&&n.H(u.value.stops[0])==="array"&&n.H(u.value.stops[0][0])==="object",re=wr({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Te){if(o==="identity")return[new n.V(Te.key,Te.value,'identity function may not have a "stops" property')];let et=[];const We=Te.value;return et=et.concat(Dr({key:Te.key,value:We,valueSpec:Te.valueSpec,style:Te.style,styleSpec:Te.styleSpec,arrayElementValidator:fe})),n.H(We)==="array"&&We.length===0&&et.push(new n.V(Te.key,We,"array must have at least one stop")),et},default:function(Te){return cn({key:Te.key,value:Te.value,valueSpec:t,style:Te.style,styleSpec:Te.styleSpec})}}});return o==="identity"&&k&&re.push(new n.V(u.key,u.value,'missing required property "property"')),o==="identity"||u.value.stops||re.push(new n.V(u.key,u.value,'missing required property "stops"')),o==="exponential"&&u.valueSpec.expression&&!n.L(u.valueSpec)&&re.push(new n.V(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(Z&&!n.M(u.valueSpec)?re.push(new n.V(u.key,u.value,"property functions not supported")):k&&!n.N(u.valueSpec)&&re.push(new n.V(u.key,u.value,"zoom functions not supported"))),o!=="categorical"&&!q||u.value.property!==void 0||re.push(new n.V(u.key,u.value,'"property" property is required')),re;function fe(Te){let et=[];const We=Te.value,rt=Te.key;if(n.H(We)!=="array")return[new n.V(rt,We,`array expected, ${n.H(We)} found`)];if(We.length!==2)return[new n.V(rt,We,`array length 2 expected, length ${We.length} found`)];if(q){if(n.H(We[0])!=="object")return[new n.V(rt,We,`object expected, ${n.H(We[0])} found`)];if(We[0].zoom===void 0)return[new n.V(rt,We,"object stop key must have zoom")];if(We[0].value===void 0)return[new n.V(rt,We,"object stop key must have value")];const it=n.K(We[0].zoom);if(typeof it!="number")return[new n.V(rt,We[0].zoom,"stop zoom values must be numbers")];if(b&&b>it)return[new n.V(rt,We[0].zoom,"stop zoom values must appear in ascending order")];it!==b&&(b=it,v=void 0,A={}),et=et.concat(wr({key:`${rt}[0]`,value:We[0],valueSpec:{zoom:{}},style:Te.style,styleSpec:Te.styleSpec,objectElementValidators:{zoom:lr,value:pe}}))}else et=et.concat(pe({key:`${rt}[0]`,value:We[0],valueSpec:{},style:Te.style,styleSpec:Te.styleSpec},We));return n.O(n.Q(We[1]))?et.concat([new n.V(`${rt}[1]`,We[1],"expressions are not allowed in function stops.")]):et.concat(cn({key:`${rt}[1]`,value:We[1],valueSpec:t,style:Te.style,styleSpec:Te.styleSpec}))}function pe(Te,et){const We=n.H(Te.value),rt=n.K(Te.value),it=Te.value!==null?Te.value:et;if(d){if(We!==d)return[new n.V(Te.key,it,`${We} stop domain type must match previous stop domain type ${d}`)]}else d=We;if(We!=="number"&&We!=="string"&&We!=="boolean"&&typeof rt!="number"&&typeof rt!="string"&&typeof rt!="boolean")return[new n.V(Te.key,it,"stop domain value must be a number, string, or boolean")];if(We!=="number"&&o!=="categorical"){let kt=`number expected, ${We} found`;return n.M(t)&&o===void 0&&(kt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(Te.key,it,kt)]}return o!=="categorical"||We!=="number"||typeof rt=="number"&&isFinite(rt)&&Math.floor(rt)===rt?o!=="categorical"&&We==="number"&&typeof rt=="number"&&typeof v=="number"&&v!==void 0&&rt<v?[new n.V(Te.key,it,"stop domain values must appear in ascending order")]:(v=rt,o==="categorical"&&rt in A?[new n.V(Te.key,it,"stop domain values must be unique")]:(A[rt]=!0,[])):[new n.V(Te.key,it,`integer expected, found ${String(rt)}`)]}}function ut(u){const t=(u.expressionContext==="property"?n.S:n.U)(n.Q(u.value),u.valueSpec);if(t.result==="error")return t.value.map(d=>new n.V(`${u.key}${d.key}`,u.value,d.message));const o=t.value.expression||t.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!o.outputDefined())return[new n.V(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!n.W(o))return[new n.V(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter")return Ve(o,u);if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!n.X(o,["zoom","feature-state"]))return[new n.V(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!n.Y(o))return[new n.V(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ve(u,t){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const v of t.valueSpec.expression.parameters)o.delete(v);if(o.size===0)return[];const d=[];return u instanceof n.Z&&o.has(u.name)?[new n.V(t.key,t.value,`["${u.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(u.eachChild(v=>{d.push(...Ve(v,t))}),d)}function gt(u){const t=u.key,o=u.value,d=u.valueSpec,v=[];return Array.isArray(d.values)?d.values.indexOf(n.K(o))===-1&&v.push(new n.V(t,o,`expected one of [${d.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(d.values).indexOf(n.K(o))===-1&&v.push(new n.V(t,o,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(o)} found`)),v}function Gt(u){return n.$(n.Q(u.value))?ut(n.J({},u,{expressionContext:"filter",valueSpec:u.styleSpec[`filter_${u.layerType||"fill"}`]})):Me(u)}function Me(u){const t=u.value,o=u.key;if(n.H(t)!=="array")return[new n.V(o,t,`array expected, ${n.H(t)} found`)];const d=u.styleSpec;let v,b=[];if(t.length<1)return[new n.V(o,t,"filter array must have at least 1 element")];switch(b=b.concat(gt({key:`${o}[0]`,value:t[0],valueSpec:d.filter_operator,style:u.style,styleSpec:u.styleSpec})),n.K(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&n.K(t[1])==="$type"&&b.push(new n.V(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&b.push(new n.V(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(v=n.H(t[1]),v!=="string"&&b.push(new n.V(`${o}[1]`,t[1],`string expected, ${v} found`)));for(let A=2;A<t.length;A++)v=n.H(t[A]),n.K(t[1])==="$type"?b=b.concat(gt({key:`${o}[${A}]`,value:t[A],valueSpec:d.geometry_type,style:u.style,styleSpec:u.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&b.push(new n.V(`${o}[${A}]`,t[A],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let A=1;A<t.length;A++)b=b.concat(Me({key:`${o}[${A}]`,value:t[A],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":v=n.H(t[1]),t.length!==2?b.push(new n.V(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):v!=="string"&&b.push(new n.V(`${o}[1]`,t[1],`string expected, ${v} found`))}return b}function At(u,t){const o=u.key,d=u.style,v=u.layer,b=u.styleSpec,A=u.value,k=u.objectKey,Z=b[`${t}_${u.layerType}`];if(!Z)return[];const q=k.match(/^(.*)-use-theme$/);if(t==="paint"&&q&&Z[q[1]])return n.O(A)?[].concat(cn({key:u.key,value:A,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:d,styleSpec:b,expressionContext:"property",propertyType:t,propertyKey:k})):cn({key:o,value:A,valueSpec:{type:"string"},style:d,styleSpec:b});const re=k.match(/^(.*)-transition$/);if(t==="paint"&&re&&Z[re[1]]&&Z[re[1]].transition)return cn({key:o,value:A,valueSpec:b.transition,style:d,styleSpec:b});const fe=u.valueSpec||Z[k];if(!fe)return[new n.G(o,A,`unknown property "${k}"`)];let pe;if(n.H(A)==="string"&&n.M(fe)&&!fe.tokens&&(pe=/^{([^}]+)}$/.exec(A))){const et=`\`{ "type": "identity", "property": ${pe?JSON.stringify(pe[1]):'"_"'} }\``;return[new n.V(o,A,`"${k}" does not support interpolation syntax
Use an identity property function instead: ${et}.`)]}const Te=[];if(u.layerType==="symbol")k!=="text-field"||!d||d.glyphs||d.imports||Te.push(new n.V(o,A,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&n.a0(n.Q(A))&&n.K(A.type)==="identity"&&Te.push(new n.V(o,A,'"text-font" does not support identity functions'));else if(u.layerType==="model"&&t==="paint"&&v&&v.layout&&v.layout.hasOwnProperty("model-id")&&n.M(fe)&&(n.a1(fe)||n.N(fe))){const et=n.S(n.Q(A),fe),We=et.value.expression||et.value._styleExpression.expression;We&&!n.X(We,["measure-light"])&&(k==="model-emissive-strength"&&n.Y(We)&&n.W(We)||Te.push(new n.V(o,A,`${k} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return Te.concat(cn({key:u.key,value:A,valueSpec:fe,style:d,styleSpec:b,expressionContext:"property",propertyType:t,propertyKey:k}))}function Bt(u){return At(u,"paint")}function Sn(u){return At(u,"layout")}function Lt(u){let t=[];const o=u.value,d=u.key,v=u.style,b=u.styleSpec;o.type||o.ref||t.push(new n.V(d,o,'either "type" or "ref" is required'));let A=n.K(o.type);const k=n.K(o.ref);if(o.id){const Z=n.K(o.id);for(let q=0;q<u.arrayIndex;q++){const re=v.layers[q];n.K(re.id)===Z&&t.push(new n.V(d,o.id,`duplicate layer id "${o.id}", previously used at line ${re.id.__line__}`))}}if("ref"in o){let Z;["type","source","source-layer","filter","layout"].forEach(q=>{q in o&&t.push(new n.V(d,o[q],`"${q}" is prohibited for ref layers`))}),v.layers.forEach(q=>{n.K(q.id)===k&&(Z=q)}),Z?Z.ref?t.push(new n.V(d,o.ref,"ref cannot reference another ref layer")):A=n.K(Z.type):typeof k=="string"&&t.push(new n.V(d,o.ref,`ref layer "${k}" not found`))}else if(A!=="background"&&A!=="sky"&&A!=="slot")if(o.source){const Z=v.sources&&v.sources[o.source],q=Z&&n.K(Z.type);Z?q==="vector"&&A==="raster"?t.push(new n.V(d,o.source,`layer "${o.id}" requires a raster source`)):q==="raster"&&A!=="raster"?t.push(new n.V(d,o.source,`layer "${o.id}" requires a vector source`)):q!=="vector"||o["source-layer"]?q==="raster-dem"&&A!=="hillshade"?t.push(new n.V(d,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="raster-array"||["raster","raster-particle"].includes(A)?A!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||q==="geojson"&&Z.lineMetrics?A==="raster-particle"&&q!=="raster-array"&&t.push(new n.V(d,o.source,`layer "${o.id}" requires a 'raster-array' source.`)):t.push(new n.V(d,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new n.V(d,o.source,"raster-array source can only be used with layer type 'raster'.")):t.push(new n.V(d,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new n.V(d,o.source,`source "${o.source}" not found`))}else t.push(new n.V(d,o,'missing required property "source"'));return t=t.concat(wr({key:d,value:o,valueSpec:b.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":()=>[],type:()=>cn({key:`${d}.type`,value:o.type,valueSpec:b.layer.type,style:u.style,styleSpec:u.styleSpec,object:o,objectKey:"type"}),filter:Z=>Gt(n.J({layerType:A},Z)),layout:Z=>wr({layer:o,key:Z.key,value:Z.value,valueSpec:{},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":q=>Sn(n.J({layerType:A},q))}}),paint:Z=>wr({layer:o,key:Z.key,value:Z.value,valueSpec:{},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":q=>Bt(n.J({layerType:A,layer:o},q))}})}})),t}function Bn(u){const t=u.value,o=u.key,d=n.H(t);return d!=="string"?[new n.V(o,t,`string expected, ${d} found`)]:[]}const en={promoteId:function u({key:t,value:o}){if(n.H(o)==="string")return Bn({key:t,value:o});if(Array.isArray(o)){const d=[],v=n.Q(o),b=n.U(v);return b.result==="error"&&b.value.forEach(A=>{d.push(new n.V(`${t}${A.key}`,null,`${A.message}`))}),n.X(b.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||d.push(new n.V(`${t}`,null,"promoteId expression should be only feature dependent")),d}{const d=[];for(const v in o)d.push(...u({key:`${t}.${v}`,value:o[v]}));return d}}};function gn(u){const t=u.value,o=u.key,d=u.styleSpec,v=u.style;if(!t.type)return[new n.V(o,t,'"type" is required')];const b=n.K(t.type);let A=[];switch(["vector","raster","raster-dem","raster-array"].includes(b)&&(t.url||t.tiles||A.push(new n.G(o,t,'Either "url" or "tiles" is required.'))),b){case"vector":case"raster":case"raster-dem":case"raster-array":return A=A.concat(wr({key:o,value:t,valueSpec:d[`source_${b.replace("-","_")}`],style:u.style,styleSpec:d,objectElementValidators:en})),A;case"geojson":if(A=wr({key:o,value:t,valueSpec:d.source_geojson,style:v,styleSpec:d,objectElementValidators:en}),t.cluster)for(const k in t.clusterProperties){const[Z,q]=t.clusterProperties[k],re=typeof Z=="string"?[Z,["accumulated"],["get",k]]:Z;A.push(...ut({key:`${o}.${k}.map`,value:q,expressionContext:"cluster-map"})),A.push(...ut({key:`${o}.${k}.reduce`,value:re,expressionContext:"cluster-reduce"}))}return A;case"video":return wr({key:o,value:t,valueSpec:d.source_video,style:v,styleSpec:d});case"image":return wr({key:o,value:t,valueSpec:d.source_image,style:v,styleSpec:d});case"canvas":return[new n.V(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gt({key:`${o}.type`,value:t.type,valueSpec:{values:ar(d)},style:v,styleSpec:d})}}function ar(u){return u.source.reduce((t,o)=>{const d=u[o];return d.type.type==="enum"&&(t=t.concat(Object.keys(d.type.values))),t},[])}function Sr(u){const t=u.value,o=u.styleSpec,d=o.light,v=u.style;let b=[];const A=n.H(t);if(t===void 0)return b;if(A!=="object")return b=b.concat([new n.V("light",t,`object expected, ${A} found`)]),b;for(const k in t){const Z=k.match(/^(.*)-transition$/),q=k.match(/^(.*)-use-theme$/);b=b.concat(q&&d[q[1]]?cn({key:k,value:t[k],valueSpec:{type:"string"},style:v,styleSpec:o}):Z&&d[Z[1]]&&d[Z[1]].transition?cn({key:k,value:t[k],valueSpec:o.transition,style:v,styleSpec:o}):d[k]?cn({key:k,value:t[k],valueSpec:d[k],style:v,styleSpec:o}):[new n.V(k,t[k],`unknown property "${k}"`)])}return b}function In(u){const t=u.value;let o=[];if(!t)return o;const d=n.H(t);if(d!=="object")return o=o.concat([new n.V("light-3d",t,`object expected, ${d} found`)]),o;const v=u.styleSpec,b=v["light-3d"],A=u.key,k=u.style,Z=u.style.lights;for(const fe of["type","id"])if(!(fe in t))return o=o.concat([new n.V("light-3d",t,`missing property ${fe} on light`)]),o;if(t.type&&Z)for(let fe=0;fe<u.arrayIndex;fe++){const pe=n.K(t.type),Te=Z[fe];n.K(Te.type)===pe&&o.push(new n.V(A,t.id,`duplicate light type "${t.type}", previously defined at line ${Te.id.__line__}`))}const q=`properties_light_${t.type}`;if(!(q in v))return o=o.concat([new n.V("light-3d",t,`Invalid light type ${t.type}`)]),o;const re=v[q];for(const fe in t)if(fe==="properties"){const pe=t[fe],Te=n.H(pe);if(Te!=="object")return o=o.concat([new n.V("properties",pe,`object expected, ${Te} found`)]),o;for(const et in pe)o=o.concat(re[et]?cn({key:et,value:pe[et],valueSpec:re[et],style:k,styleSpec:v}):[new n.G(u.key,pe[et],`unknown property "${et}"`)])}else{const pe=fe.match(/^(.*)-transition$/),Te=fe.match(/^(.*)-use-theme$/);o=o.concat(Te&&b[Te[1]]?cn({key:fe,value:t[fe],valueSpec:{type:"string"},style:k,styleSpec:v}):pe&&b[pe[1]]&&b[pe[1]].transition?cn({key:fe,value:t[fe],valueSpec:v.transition,style:k,styleSpec:v}):b[fe]?cn({key:fe,value:t[fe],valueSpec:b[fe],style:k,styleSpec:v}):[new n.G(fe,t[fe],`unknown property "${fe}"`)])}return o}function Gn(u){const t=u.value,o=u.key,d=u.style,v=u.styleSpec,b=v.terrain;let A=[];const k=n.H(t);if(t===void 0||k==="null")return A;if(k!=="object")return A=A.concat([new n.V("terrain",t,`object expected, ${k} found`)]),A;for(const Z in t){const q=Z.match(/^(.*)-transition$/),re=Z.match(/^(.*)-use-theme$/);A=A.concat(re&&b[re[1]]?cn({key:Z,value:t[Z],valueSpec:{type:"string"},style:d,styleSpec:v}):q&&b[q[1]]&&b[q[1]].transition?cn({key:Z,value:t[Z],valueSpec:v.transition,style:d,styleSpec:v}):b[Z]?cn({key:Z,value:t[Z],valueSpec:b[Z],style:d,styleSpec:v}):[new n.G(Z,t[Z],`unknown property "${Z}"`)])}if(t.source){const Z=d.sources&&d.sources[t.source],q=Z&&n.K(Z.type);Z?q!=="raster-dem"&&A.push(new n.V(o,t.source,`terrain cannot be used with a source of type ${String(q)}, it only be used with a "raster-dem" source type`)):A.push(new n.V(o,t.source,`source "${t.source}" not found`))}else A.push(new n.V(o,t,'terrain is missing required property "source"'));return A}function hn(u){const t=u.value,o=u.style,d=u.styleSpec,v=d.fog;let b=[];const A=n.H(t);if(t===void 0)return b;if(A!=="object")return b=b.concat([new n.V("fog",t,`object expected, ${A} found`)]),b;for(const k in t){const Z=k.match(/^(.*)-transition$/),q=k.match(/^(.*)-use-theme$/);b=b.concat(q&&v[q[1]]?cn({key:k,value:t[k],valueSpec:{type:"string"},style:o,styleSpec:d}):Z&&v[Z[1]]&&v[Z[1]].transition?cn({key:k,value:t[k],valueSpec:d.transition,style:o,styleSpec:d}):v[k]?cn({key:k,value:t[k],valueSpec:v[k],style:o,styleSpec:d}):[new n.G(k,t[k],`unknown property "${k}"`)])}return b}const mn={"*":()=>[],array:Dr,boolean:function(u){const t=u.value,o=u.key,d=n.H(t);return d!=="boolean"?[new n.V(o,t,`boolean expected, ${d} found`)]:[]},number:lr,color:function(u){const t=u.key,o=u.value,d=n.H(o);return d!=="string"?[new n.V(t,o,`color expected, ${d} found`)]:n._.parseCSSColor(o)===null?[new n.V(t,o,`color expected, "${o}" found`)]:[]},enum:gt,filter:Gt,function:Pe,layer:Lt,object:wr,source:gn,model:n.a2,light:Sr,"light-3d":In,terrain:Gn,fog:hn,string:Bn,formatted:function(u){return Bn(u).length===0?[]:ut(u)},resolvedImage:function(u){return Bn(u).length===0?[]:ut(u)},projection:function(u){const t=u.value,o=u.styleSpec,d=o.projection,v=u.style;let b=[];const A=n.H(t);if(A==="object")for(const k in t)b=b.concat(cn({key:k,value:t[k],valueSpec:d[k],style:v,styleSpec:o}));else A!=="string"&&(b=b.concat([new n.V("projection",t,`object or string expected, ${A} found`)]));return b},import:function(u){const{value:t,styleSpec:o}=u,A=t,{data:d}=A,v=Zy(A,["data"]);Object.defineProperty(v,"__line__",{value:t.__line__,enumerable:!1});let b=wr(n.J({},u,{value:v,valueSpec:o.import}));return n.K(v.id)===""&&b.push(new n.V(`${u.key}.id`,v,"import id can't be an empty string")),d&&(b=b.concat(Er(d,o,{key:`${u.key}.data`}))),b}};function cn(u,t=!1){const o=u.value,d=u.valueSpec,v=u.styleSpec;if(d.expression&&n.a0(n.K(o)))return Pe(u);if(d.expression&&n.O(n.Q(o)))return ut(u);if(d.type&&mn[d.type]){const b=mn[d.type](u);return t===!0&&b.length>0&&n.H(u.value)==="array"?ut(u):b}return wr(n.J({},u,{valueSpec:d.type?v[d.type]:d}))}function Ln(u){const t=u.value,o=u.key,d=Bn(u);return d.length||(t.indexOf("{fontstack}")===-1&&d.push(new n.V(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&d.push(new n.V(o,t,'"glyphs" url must include a "{range}" token'))),d}function Er(u,t=n.a3,o={}){return cn({key:o.key||"",value:u,valueSpec:t.$root,styleSpec:t,style:u,objectElementValidators:{glyphs:Ln,"*":()=>[]}})}function mr(u,t=n.a3){return zr(Er(u,t))}const Jr=u=>zr(gn(u)),Ie=u=>zr(Sr(u)),Ot=u=>zr(In(u)),St=u=>zr(Gn(u)),at=u=>zr(hn(u)),Xe=u=>zr(function(t){const o=t.value,d=t.style,v=t.styleSpec,b=v.snow;let A=[];const k=n.H(o);if(o===void 0)return A;if(k!=="object")return A=A.concat([new n.V("snow",o,`object expected, ${k} found`)]),A;for(const Z in o){const q=Z.match(/^(.*)-transition$/);A=A.concat(q&&b[q[1]]&&b[q[1]].transition?cn({key:Z,value:o[Z],valueSpec:v.transition,style:d,styleSpec:v}):b[Z]?cn({key:Z,value:o[Z],valueSpec:b[Z],style:d,styleSpec:v}):[new n.G(Z,o[Z],`unknown property "${Z}"`)])}return A}(u)),Nt=u=>zr(function(t){const o=t.value,d=t.style,v=t.styleSpec,b=v.rain;let A=[];const k=n.H(o);if(o===void 0)return A;if(k!=="object")return A=A.concat([new n.V("rain",o,`object expected, ${k} found`)]),A;for(const Z in o){const q=Z.match(/^(.*)-transition$/);A=A.concat(q&&b[q[1]]&&b[q[1]].transition?cn({key:Z,value:o[Z],valueSpec:v.transition,style:d,styleSpec:v}):b[Z]?cn({key:Z,value:o[Z],valueSpec:b[Z],style:d,styleSpec:v}):[new n.G(Z,o[Z],`unknown property "${Z}"`)])}return A}(u)),Nn=u=>zr(Lt(u)),Jn=u=>zr(Gt(u)),rr=u=>zr(Bt(u)),Br=u=>zr(Sn(u)),Hr=u=>zr(n.a2(u));function zr(u){return u.slice().sort((t,o)=>t.line&&o.line?t.line-o.line:0)}function Tr(u,t){let o=!1;if(t&&t.length)for(const d of t)d instanceof n.G?n.w(d.message):(u.fire(new n.y(new Error(d.message))),o=!0);return o}let fn;class Ne extends n.E{constructor(t,o="flat"){super(),this._transitionable=new n.a4(fn||(fn=new n.a5({anchor:new n.a6(n.a3.light.anchor),position:new n.a7(n.a3.light.position),color:new n.a6(n.a3.light.color),intensity:new n.a6(n.a3.light.intensity)}))),this.setLight(t,o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o,d={}){this._validate(Ie,t,d)||(this._transitionable.setTransitionOrValue(t),this.id=o)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,d){return(!d||d.validate!==!1)&&Tr(this,t.call(mr,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}}let Ge=class extends n.E{constructor(u,t,o,d){super(),this.scope=o,this._transitionable=new n.a4(new n.a5({source:new n.a6(n.a3.terrain.source),exaggeration:new n.a6(n.a3.terrain.exaggeration)}),o,d),this._transitionable.setTransitionOrValue(u,d),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=t}get(){return this._transitionable.serialize()}set(u,t){this._transitionable.setTransitionOrValue(u,t)}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}getExaggeration(u){return this._transitioning.possiblyEvaluate(new n.a8(u)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const u=this._transitionable._values.exaggeration;if(!u)return null;const t=u.value.expression;if(!t)return null;let o=-1,d=-1,v=1;for(const b of t.zoomStops)v=t.evaluate(new n.a8(b)),v>.01?(o=b,d=-1):d=b;return v<.01&&o>0&&d>o?[o,d]:null}isZoomDependent(){const u=this._transitionable._values.exaggeration;return u!=null&&u.value!=null&&u.value.expression!=null&&u.value.expression instanceof n.a9}};const ot=45,Dt=65,jt=.05;function sn(u,t,o,d){const v=n.ac(ot,Dt,o),[b,A]=xn(u,d);let k=1-Math.min(1,Math.exp((t-b)/(A-b)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*v*u.alpha}function xn(u,t){const o=.5/Math.tan(.5*t);return[u.range[0]+o,u.range[1]+o]}function rn(u,t,o,d,v){const b=n.ab.vec3.transformMat4([],[t,o,d],v.mercatorFogMatrix);return sn(u,n.ab.vec3.length(b),v.pitch,v._fov)}function Fn(u,t,o,d,v,b,A){const k=[[o,d,0],[v,d,0],[v,b,0],[o,b,0]];let Z=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(const re of k){const fe=n.ab.vec3.transformMat4([],re,t),pe=n.ab.vec3.length(fe);Z=Math.min(Z,pe),q=Math.max(q,pe)}return[sn(u,Z,A.pitch,A._fov),sn(u,q,A.pitch,A._fov)]}class Un extends n.E{constructor(t,o,d,v){super();const b=new n.a5({range:new n.a6(n.a3.fog.range),color:new n.a6(n.a3.fog.color),"color-use-theme":new n.a6({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a6(n.a3.fog["high-color"]),"high-color-use-theme":new n.a6({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a6(n.a3.fog["space-color"]),"space-color-use-theme":new n.a6({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a6(n.a3.fog["horizon-blend"]),"star-intensity":new n.a6(n.a3.fog["star-intensity"]),"vertical-range":new n.a6(n.a3.fog["vertical-range"])});this._transitionable=new n.a4(b,d,new Map(v)),this.set(t,v),this._transitioning=this._transitionable.untransitioned(),this._transform=o,this.properties=new n.ad(b),this.scope=d}get state(){const t=this._transform,o=t.projection.name==="globe",d=n.ae(t.zoom),v=this.properties.get("range"),b=[.5,3];return{range:o?[n.af(b[0],v[0],d),n.af(b[1],v[1],d)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,o,d={}){if(this._validate(at,t,d))return;const v=n.l({},t);for(const b of Object.keys(n.a3.fog))v[b]===void 0&&(v[b]=n.a3.fog[b].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,o)}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const o=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ac(ot,Dt,t))*o.a}getOpacityAtLatLng(t,o){return this._transform.projection.supportsFog?function(d,v,b){const A=n.aa.fromLngLat(v),k=b.elevation?b.elevation.getAtPointOrZero(A):0;return rn(d,A.x,A.y,k,b)}(this.state,t,o):0}getOpacityForTile(t){if(!this._transform.projection.supportsFog)return[1,1];const o=this._transform.calculateFogTileMatrix(t.toUnwrapped());return Fn(this.state,o,0,0,n.ag,n.ag,this._transform)}getOpacityForBounds(t,o,d,v,b){return this._transform.projection.supportsFog?Fn(this.state,t,o,d,v,b,this._transform):[1,1]}getFovAdjustedRange(t){return this._transform.projection.supportsFog?xn(this.state,t):[0,1]}isVisibleOnFrustum(t){if(!this._transform.projection.supportsFog)return!1;const o=[4,5,6,7];for(const d of o){const v=t.points[d];let b;if(v[2]>=0)b=v;else{const A=t.points[d-4];b=n.ah(A,v,A[2]/(A[2]-v[2]))}if(rn(this.state,b[0],b[1],0,this._transform)>=jt)return!0}return!1}updateConfig(t){this._transitionable.setTransitionOrValue(this._options,new Map(t))}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,d){return(!d||d.validate!==!1)&&Tr(this,t.call(mr,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}}let jn,_n,Xn,er,Yr=class extends n.E{constructor(u,t,o,d){super();const v=jn||(jn=new n.a5({density:new n.a6(n.a3.snow.density),intensity:new n.a6(n.a3.snow.intensity),color:new n.a6(n.a3.snow.color),opacity:new n.a6(n.a3.snow.opacity),vignette:new n.a6(n.a3.snow.vignette),"vignette-color":new n.a6(n.a3.snow["vignette-color"]),"center-thinning":new n.a6(n.a3.snow["center-thinning"]),direction:new n.a6(n.a3.snow.direction),"flake-size":new n.a6(n.a3.snow["flake-size"])}));this._transitionable=new n.a4(v,o,new Map(d)),this.set(u,d),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.ad(v),this.scope=o}get state(){const u=this.properties.get("opacity"),t=this.properties.get("color"),o=this.properties.get("direction"),d=n.ai(o[0]),v=-Math.max(n.ai(o[1]),.01),b=[Math.cos(d)*Math.cos(v),Math.sin(d)*Math.cos(v),Math.sin(v)],A=this.properties.get("vignette"),k=this.properties.get("vignette-color");return k.a=A,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.aj(t.r,t.g,t.b,t.a*u),direction:b,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:k}}get(){return this._transitionable.serialize()}set(u,t,o={}){if(this._validate(Xe,u,o))return;const d=n.l({},u);for(const v of Object.keys(n.a3.snow))d[v]===void 0&&(d[v]=n.a3.snow[v].default);this._options=d,this._transitionable.setTransitionOrValue(this._options,t)}updateConfig(u){this._transitionable.setTransitionOrValue(this._options,new Map(u))}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,t,o){return(!o||o.validate!==!1)&&Tr(this,u.call(mr,n.l({value:t,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}},qr=class extends n.E{constructor(u,t,o,d){super();const v=_n||(_n=new n.a5({density:new n.a6(n.a3.rain.density),intensity:new n.a6(n.a3.rain.intensity),color:new n.a6(n.a3.rain.color),opacity:new n.a6(n.a3.rain.opacity),vignette:new n.a6(n.a3.rain.vignette),"vignette-color":new n.a6(n.a3.rain["vignette-color"]),"center-thinning":new n.a6(n.a3.rain["center-thinning"]),direction:new n.a6(n.a3.rain.direction),"droplet-size":new n.a6(n.a3.rain["droplet-size"]),"distortion-strength":new n.a6(n.a3.rain["distortion-strength"])}));this._transitionable=new n.a4(v,o,new Map(d)),this.set(u,d),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.ad(v),this.scope=o}get state(){const u=this.properties.get("opacity"),t=this.properties.get("color"),o=this.properties.get("direction"),d=n.ai(o[0]),v=-Math.max(n.ai(o[1]),.01),b=[Math.cos(d)*Math.cos(v),Math.sin(d)*Math.cos(v),Math.sin(v)],A=this.properties.get("vignette-color");return A.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.aj(t.r,t.g,t.b,t.a*u),direction:b,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:A}}get(){return this._transitionable.serialize()}set(u,t,o={}){if(this._validate(Nt,u,o))return;const d=n.l({},u);for(const v of Object.keys(n.a3.rain))d[v]===void 0&&(d[v]=n.a3.rain[v].default);this._options=d,this._transitionable.setTransitionOrValue(this._options,t)}updateConfig(u){this._transitionable.setTransitionOrValue(this._options,new Map(u))}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,t,o){return(!o||o.validate!==!1)&&Tr(this,u.call(mr,n.l({value:t,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}};class Gr extends n.E{constructor(t,o,d,v){super(),this.scope=d,this._options=t,this.properties=new n.ad(o),this._transitionable=new n.a4(o,d,new Map(v)),this._transitionable.setTransitionOrValue(t.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(t){this._transitionable.setTransitionOrValue(this._options.properties,new Map(t))}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(t,o){this._options=t,this._transitionable.setTransitionOrValue(t.properties,o)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class ci{constructor(t,o,d,v){this.screenBounds=t,this.cameraPoint=o,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=d,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(t,o){let d,v;if(t instanceof n.P||typeof t[0]=="number"){const b=n.P.convert(t);d=[b],v=o.isPointAboveHorizon(b)}else{const b=n.P.convert(t[0]),A=n.P.convert(t[1]);d=[b,A],v=n.al(b,A).every(k=>o.isPointAboveHorizon(k))}return new ci(d,o.getCameraPoint(),v,o)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(t){return n.al(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const o=this.screenBounds[0],d=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],v=n.al(o,d,0,!1);return this.cameraPoint.y>d.y&&(this.cameraPoint.x>o.x&&this.cameraPoint.x<d.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=d.x?v[2]=this.cameraPoint:this.cameraPoint.x<=o.x&&(v[3]=this.cameraPoint)),n.am(v,t)}bufferedCameraGeometryGlobe(t){const o=this.screenBounds[0],d=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],v=n.al(o,d,t),b=this.cameraPoint.clone();switch(3*((b.y>o.y)+(b.y>d.y))+((b.x>o.x)+(b.x>d.x))){case 0:v[0]=b,v[4]=b.clone();break;case 1:v.splice(1,0,b);break;case 2:v[1]=b;break;case 3:v.splice(4,0,b);break;case 5:v.splice(2,0,b);break;case 6:v[3]=b;break;case 7:v.splice(3,0,b);break;case 8:v[2]=b}return v}containsTile(t,o,d,v=0){const b=t.queryPadding/o._pixelsPerMercatorPixel+1,A=d?this._bufferedCameraMercator(b,o):this._bufferedScreenMercator(b,o);let k=t.tileID.wrap+(A.unwrapped?v:0);const Z=A.polygon.map(rt=>n.an(t.tileTransform,rt,k));if(!n.ao(Z,0,0,n.ag,n.ag))return;k=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const q=this.screenGeometryMercator.polygon.map(rt=>n.ap(t.tileTransform,rt,k)),re=q.map(rt=>new n.P(rt[0],rt[1])),fe=o.getFreeCameraOptions().position||new n.aa(0,0,0),pe=n.ap(t.tileTransform,fe,k),Te=q.map(rt=>{const it=n.ab.vec3.sub(rt,rt,pe);return n.ab.vec3.normalize(it,it),new n.aq(pe,it)}),et=n.ar(t,1,o.zoom)*o._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:re,tilespaceRays:Te,bufferedTilespaceGeometry:Z,bufferedTilespaceBounds:(We=n.as(Z),We.min.x=n.aw(We.min.x,0,n.ag),We.min.y=n.aw(We.min.y,0,n.ag),We.max.x=n.aw(We.max.x,0,n.ag),We.max.y=n.aw(We.max.y,0,n.ag),We),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:et};var We}_bufferedScreenMercator(t,o){const d=Bi(t);if(this._screenRaycastCache[d])return this._screenRaycastCache[d];{let v;return v=o.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(t),o):{polygon:this.bufferedScreenGeometry(t).map(b=>o.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[d]=v,v}}_bufferedCameraMercator(t,o){const d=Bi(t);if(this._cameraRaycastCache[d])return this._cameraRaycastCache[d];{let v;return v=o.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),o):{polygon:this.bufferedCameraGeometry(t).map(b=>o.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[d]=v,v}}_projectAndResample(t,o){const d=function(b,A){const k=n.ab.mat4.multiply([],A.pixelMatrix,A.globeMatrix),Z=[0,-n.ax,0,1],q=[0,n.ax,0,1],re=[0,0,0,1];n.ab.vec4.transformMat4(Z,Z,k),n.ab.vec4.transformMat4(q,q,k),n.ab.vec4.transformMat4(re,re,k);const fe=new n.P(Z[0]/Z[3],Z[1]/Z[3]),pe=new n.P(q[0]/q[3],q[1]/q[3]),Te=n.au(b,fe)&&Z[3]<re[3],et=n.au(b,pe)&&q[3]<re[3];if(!Te&&!et)return null;const We=function(dn,nn,Rn){for(let $n=1;$n<dn.length;$n++){const Pr=Ki(nn.pointCoordinate3D(dn[$n-1]).x),dr=Ki(nn.pointCoordinate3D(dn[$n]).x);if(Rn<0){if(Pr<dr)return{idx:$n,t:-Pr/(dr-1-Pr)}}else if(dr<Pr)return{idx:$n,t:(1-Pr)/(dr+1-Pr)}}return null}(b,A,Te?-1:1);if(!We)return null;const{idx:rt,t:it}=We;let kt=rt>1?Ci(b.slice(0,rt),A):[],qt=rt<b.length?Ci(b.slice(rt),A):[];kt=kt.map(dn=>new n.P(Ki(dn.x),dn.y)),qt=qt.map(dn=>new n.P(Ki(dn.x),dn.y));const Qt=[...kt];Qt.length===0&&Qt.push(qt[qt.length-1]);const vn=n.af(Qt[Qt.length-1].y,(qt.length===0?kt[0]:qt[0]).y,it);let on;return on=Te?[new n.P(0,vn),new n.P(0,0),new n.P(1,0),new n.P(1,vn)]:[new n.P(1,vn),new n.P(1,1),new n.P(0,1),new n.P(0,vn)],Qt.push(...on),qt.length===0?Qt.push(kt[0]):Qt.push(...qt),{polygon:Qt.map(dn=>new n.aa(dn.x,dn.y)),unwrapped:!1}}(t,o);if(d)return d;const v=function(b,A){let k=!1,Z=-1/0,q=0;for(let fe=0;fe<b.length-1;fe++)b[fe].x>Z&&(Z=b[fe].x,q=fe);for(let fe=0;fe<b.length-1;fe++){const pe=(q+fe)%(b.length-1),Te=b[pe],et=b[pe+1];Math.abs(Te.x-et.x)>.5&&(Te.x<et.x?(Te.x+=1,pe===0&&(b[b.length-1].x+=1)):(et.x+=1,pe+1===b.length-1&&(b[0].x+=1)),k=!0)}const re=n.at(A.center.lng);return k&&re<Math.abs(re-1)&&b.forEach(fe=>{fe.x-=1}),{polygon:b,unwrapped:k}}(Ci(t,o).map(b=>new n.P(Ki(b.x),b.y)),o);return{polygon:v.polygon.map(b=>new n.aa(b.x,b.y)),unwrapped:v.unwrapped}}}function Ci(u,t){return n.av(u,o=>{const d=t.pointCoordinate3D(o);o.x=d.x,o.y=d.y},.00390625)}function Ki(u){return u<0?1+u%1:u%1}function Bi(u){return 100*u|0}function Di(u,t,o,d,v){const b=function(k,Z){if(k)return v(k);if(Z){if(u.url&&Z.tiles&&u.tiles&&delete u.tiles,Z.variants){if(!Array.isArray(Z.variants))return v(new Error("variants must be an array"));for(const re of Z.variants){if(re==null||typeof re!="object"||re.constructor!==Object)return v(new Error("variant must be an object"));if(!Array.isArray(re.capabilities))return v(new Error("capabilities must be an array"));if(re.capabilities.length===1&&re.capabilities[0]==="meshopt"){Z=n.l(Z,re);break}}}const q=n.ay(n.l({},Z,u),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);q.tiles=t.canonicalizeTileset(q,u.url),v(null,q)}},A=function(k,Z,q){if(!k)return null;if(!Z&&!q)return k;q=q||k.worldview_default;const re=Object.values(k.language||{});if(re.length===0)return null;const fe=Object.values(k.worldview||{});if(fe.length===0)return null;const pe=re.every(et=>et===Z),Te=fe.every(et=>et===q);return pe&&Te?k:Z in(k.language_options||{})||q in(k.worldview_options||{})?null:k.language_options&&k.worldview_options?k:null}(u.data,o,d);return A?n.q.frame(()=>b(null,A)):u.url?n.n(t.transformRequest(t.normalizeSourceURL(u.url,null,o,d),n.R.Source),b):n.q.frame(()=>{const q=u,{data:k}=q,Z=Zy(q,["data"]);b(null,Z)})}class yo{constructor(t,o,d){this.bounds=n.az.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=d||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),d=Math.floor(n.at(this.bounds.getWest())*o),v=Math.floor(n.aA(this.bounds.getNorth())*o),b=Math.ceil(n.at(this.bounds.getEast())*o),A=Math.ceil(n.aA(this.bounds.getSouth())*o);return t.x>=d&&t.x<b&&t.y>=v&&t.y<A}}class po extends n.E{constructor(t,o,d,v){if(super(),this.id=t,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.ay(o,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},o),this._collectResourceTiming=!!o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new n.aB}load(t){this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Di(this._options,this.map._requestManager,o,d,(v,b)=>{if(this._tileJSONRequest=null,this._loaded=!0,v)o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),d&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new n.y(v));else if(b){if(n.l(this,b),this.hasWorldviews=!!b.worldview_options,b.worldview_default&&(this.worldviewDefault=b.worldview_default),b.vector_layers){this.vectorLayers=b.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const A of b.vector_layers)this.vectorLayerIds.push(A.id),b.worldview&&b.worldview[A.source]&&this.localizableLayerIds.add(A.id)}b.bounds&&(this.tileBounds=new yo(b.bounds,this.minzoom,this.maxzoom)),Tt(b.tiles,this.map._requestManager._customAccessToken),this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))}t&&t(v)})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest();const t=n.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(t))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(t){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(t,o){const d=t.tileID.canonical.url(this.tiles,this.scheme),v=this.map._requestManager.normalizeTileURL(d),b=this.map._requestManager.transformRequest(v,n.R.Tile),A=this.map.style?this.map.style.getLut(this.scope):null,k=A?{image:A.image.clone()}:null,Z={request:b,data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,lut:k,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:t.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(d)&&(Z.worldview=this.map.getWorldview()||this.worldviewDefault,Z.localizableLayerIds=this.localizableLayerIds),Z.request.collectResourceTiming=this._collectResourceTiming,t.actor&&t.state!=="expired")t.state==="loading"?t.reloadCallback=o:t.request=t.actor.send("reloadTile",Z,q.bind(this));else if(t.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",Z,q.bind(this),void 0,!0);else{const re=n.aD.call({deduped:this._deduped},Z,(fe,pe)=>{fe||!pe?q.call(this,fe):(Z.data={cacheControl:pe.cacheControl,expires:pe.expires,rawData:pe.rawData.slice(0)},t.actor&&t.actor.send("loadTile",Z,q.bind(this),void 0,!0))},!0);t.request={cancel:re}}function q(re,fe){return delete t.request,t.aborted?o(null):re&&re.status!==404?o(re):(fe&&fe.resourceTiming&&(t.resourceTiming=fe.resourceTiming),this.map._refreshExpiredTiles&&fe&&t.setExpiryData(fe),t.loadVectorData(fe,this.map.painter),n.aE(this.dispatcher),o(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(t,o){t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id,scope:this.scope}),t.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Vo extends n.E{constructor(t,o,d,v){super(),this.id=t,this.dispatcher=d,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},o),n.l(this,n.ay(o,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"})),this._tileJSONRequest=Di(this._options,this.map._requestManager,null,null,(o,d)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new n.y(o)):d&&(n.l(this,d),d.raster_layers&&(this.rasterLayers=d.raster_layers,this.rasterLayerIds=this.rasterLayers.map(v=>v.id)),d.bounds&&(this.tileBounds=new yo(d.bounds,this.minzoom,this.maxzoom)),Tt(d.tiles),this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))),t&&t(o)})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest();const t=n.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(t))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(t){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,o){const d=n.q.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),d,this.tileSize);t.request=n.o(this.map._requestManager.transformRequest(v,n.R.Tile),(b,A,k,Z)=>(delete t.request,t.aborted?(t.state="unloaded",o(null)):b?(t.state="errored",o(b)):A?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:k,expires:Z}),t.setTexture(A,this.map.painter),t.state="loaded",n.aE(this.dispatcher),void o(null)):o(null)))}abortTile(t,o){t.request&&(t.request.cancel(),delete t.request),o&&o()}unloadTile(t,o){t.texture&&t.texture instanceof n.T?(t.destroy(!0),t.texture&&t.texture instanceof n.T&&this.map.painter.saveTileTexture(t.texture)):t.destroy(),o&&o()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Xo extends Vo{constructor(t,o,d,v){super(t,o,d,v),this.type="raster-array",this.maxzoom=22,this._options=n.l({type:"raster-array"},o)}triggerRepaint(t){const o=this.map.painter._terrain,d=this.map.style.getSourceCache(this.id);o&&o.enabled&&d&&o._clearRenderCacheForTile(d.id,t.tileID),this.map.triggerRepaint()}loadTile(t,o){const d=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),v=this.map._requestManager.transformRequest(d,n.R.Tile);t.requestParams=v,t.actor||(t.actor=this.dispatcher.getActor()),t.request=t.fetchHeader(void 0,(b,A,k,Z)=>{if(delete t.request,t.aborted)return t.state="unloaded",o(null);if(b)return b.code===20?void 0:(t.state="errored",o(b));this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:k,expires:Z}),t.state="empty",o(null)})}unloadTile(t,o){const d=t.texture;d&&d instanceof n.T?(t.destroy(!0),this.map.painter.saveTileTexture(d)):(t.destroy(),t.flushQueues(),t._isHeaderLoaded=!1,delete t._mrt,delete t.textureDescriptor),t.fbo&&(t.fbo.destroy(),delete t.fbo),delete t.request,delete t.requestParams,delete t.neighboringTiles,t.state="unloaded"}prepareTile(t,o,d){t._isHeaderLoaded&&(t.state!=="empty"&&(t.state="reloading"),t.fetchBand(o,d,(v,b)=>{if(v)return t.state="errored",this.fire(new n.y(v)),void this.triggerRepaint(t);b&&(t.setTexture(b,this.map.painter),t.state="loaded",this.triggerRepaint(t))}))}getInitialBand(t){if(!this.rasterLayers)return 0;const o=this.rasterLayers.find(({id:b})=>b===t),d=o&&o.fields,v=d&&d.bands&&d.bands;return v?v[0]:0}getTextureDescriptor(t,o,d){if(!t)return;const v=o.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!v)return;let b=null;o instanceof n.aH?b=o.paint.get("raster-array-band"):o instanceof n.aI&&(b=o.paint.get("raster-particle-array-band"));const A=b||this.getInitialBand(v);if(A!=null)if(t.textureDescriptor){if(!t.updateNeeded(v,A)||d)return Object.assign({},t.textureDescriptor,{texture:t.texture})}else this.prepareTile(t,v,A)}}const $o={vector:po,raster:Vo,"raster-dem":class extends Vo{constructor(u,t,o,d){super(u,t,o,d),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},t),this.encoding=t.encoding||"mapbox"}loadTile(u,t){const o=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function d(v,b){v&&(u.state="errored",t(v)),b&&(u.dem=b,u.dem.onDeserialize(),u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0,u.state="loaded",t(null))}u.request=n.o(this.map._requestManager.transformRequest(o,n.R.Tile),function(v,b,A,k){if(delete u.request,u.aborted)u.state="unloaded",t(null);else if(v)u.state="errored",t(v);else if(b){this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:A,expires:k});const Z=ImageBitmap&&b instanceof ImageBitmap&&n.t(),q=1-(b.width-n.aF(b.width))/2;q<1||u.neighboringTiles||(u.neighboringTiles=this._getNeighboringTiles(u.tileID));const re=Z?b:n.q.getImageData(b,q),fe={uid:u.uid,coord:u.tileID,source:this.id,scope:this.scope,rawImageData:re,encoding:this.encoding,padding:q};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",fe,d.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(u){const t=u.canonical,o=Math.pow(2,t.z),d=(t.x-1+o)%o,v=t.x===0?u.wrap-1:u.wrap,b=(t.x+1+o)%o,A=t.x+1===o?u.wrap+1:u.wrap,k={};return k[new n.aG(u.overscaledZ,v,t.z,d,t.y).key]={backfilled:!1},k[new n.aG(u.overscaledZ,A,t.z,b,t.y).key]={backfilled:!1},t.y>0&&(k[new n.aG(u.overscaledZ,v,t.z,d,t.y-1).key]={backfilled:!1},k[new n.aG(u.overscaledZ,u.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},k[new n.aG(u.overscaledZ,A,t.z,b,t.y-1).key]={backfilled:!1}),t.y+1<o&&(k[new n.aG(u.overscaledZ,v,t.z,d,t.y+1).key]={backfilled:!1},k[new n.aG(u.overscaledZ,u.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},k[new n.aG(u.overscaledZ,A,t.z,b,t.y+1).key]={backfilled:!1}),k}},"raster-array":Xo,geojson:class extends n.E{constructor(u,t,o,d){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(d),this._data=t.data,this._options=n.l({},t),this._collectResourceTiming=t.collectResourceTiming,t.maxzoom!==void 0&&(this.maxzoom=t.maxzoom),t.minzoom!==void 0&&(this.minzoom=t.minzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution),this.promoteId=t.promoteId;const v=n.ag/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(t.buffer!==void 0?t.buffer:128)*v,tolerance:(t.tolerance!==void 0?t.tolerance:.375)*v,extent:n.ag,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:t.clusterMaxZoom!==void 0?t.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,t.clusterMinPoints||2),extent:n.ag,radius:(t.clusterRadius!==void 0?t.clusterRadius:50)*v,log:!1,generateId:t.generateId||!1},clusterProperties:t.clusterProperties,filter:t.filter,dynamic:t.dynamic},t.workerOptions)}onAdd(u){this.map=u,this.setData(this._data)}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){if(!this._options.dynamic)return this.fire(new n.y(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof u!="string"&&(u.type==="Feature"&&(u={type:"FeatureCollection",features:[u]}),u.type!=="FeatureCollection"))return this.fire(new n.y(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof u!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const t=new Map;for(const o of this._data.features)t.set(o.id,o);for(const o of u.features)t.set(o.id,o);this._data.features=[...t.values()]}else this._data=u;return this._updateWorkerData(!0),this}getClusterExpansionZoom(u,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id,scope:this.scope},t),this}getClusterChildren(u,t){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id,scope:this.scope},t),this}getClusterLeaves(u,t,o,d){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:u,limit:t,offset:o},d),this}_updateWorkerData(u=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.z("dataloading",{dataType:"source"})),this._loaded=!1;const t=n.l({append:u},this.workerOptions);t.scope=this.scope;const o=this._data;typeof o=="string"?(t.request=this.map._requestManager.transformRequest(n.q.resolveURL(o),n.R.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,(d,v)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new n.y(d));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b.resourceTiming=v.resourceTiming[this.id]),u&&(this._partialReload=!0),this.fire(new n.z("data",b)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(u),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const u=n.aC(this.id,this.scope);this.map.style.clearSource(u),this._updateWorkerData()}loadTile(u,t){const o=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const d=this.map.style?this.map.style.getLut(this.scope):null,v=d?{image:d.image.clone()}:null,b=this._partialReload,A={type:this.type,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:v,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:b};u.request=this.actor.send(o,A,(k,Z)=>b&&!Z?(u.state="loaded",t(null)):(delete u.request,u.destroy(),u.aborted?t(null):k?t(k):(u.loadVectorData(Z,this.map.painter,o==="reloadTile"),t(null))),void 0,o==="loadTile")}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u,t){this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id,scope:this.scope}),u.destroy()}onRemove(u){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aJ{constructor(u,t,o,d){super(u,t,o,d),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const t of u.urls)this.urls.push(this.map._requestManager.transformRequest(t,n.R.Source).url);n.aK(this.urls,(t,o)=>{this._loaded=!0,t?this.fire(new n.y(t)):o&&(this.video=o,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const t=this.video.seekable;u<t.start(0)||u>t.end(0)?this.fire(new n.y(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${t.start(0)} and ${t.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,t=u.gl;this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(u,this.video,t.RGBA8),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(u)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aJ,model:class extends n.E{constructor(u,t,o,d){super(),this.id=u,this.type="model",this.models=[],this._loaded=!1,this._options=t}load(){const u=[];for(const t in this._options.models){const o=this._options.models[t],d=n.aM(this.map._requestManager.transformRequest(o.uri,n.R.Model).url).then(v=>{if(!v)return;const b=n.aN(v),A=new n.aO(t,o.position,o.orientation,b);A.computeBoundsAndApplyParent(),this.models.push(A)}).catch(v=>{this.fire(new n.y(new Error(`Could not load model ${t} from ${o.uri}: ${v.message}`)))});u.push(d)}return Promise.allSettled(u).then(()=>{this._loaded=!0,this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(t=>{this.fire(new n.y(new Error(`Could not load models: ${t.message}`)))})}onAdd(u){this.map=u,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(u,t){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(u,t,o,d){super(),this.type="batched-model",this.id=u,this.tileSize=512,this._options=t,this.tiles=this._options.tiles,this.maxzoom=t.maxzoom||19,this.minzoom=t.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=o,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(d)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest();const u=n.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(u))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(u){this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"}));const t=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map.getWorldview();this._tileJSONRequest=Di(this._options,this.map._requestManager,t,o,(d,v)=>{this._tileJSONRequest=null,this._loaded=!0,d?(t&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${t}`),o&&o.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${o}`),this.fire(new n.y(d))):v&&(n.l(this,v),v.bounds&&(this.tileBounds=new yo(v.bounds,this.minzoom,this.maxzoom)),Tt(v.tiles,this.map._requestManager._customAccessToken),this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))),u&&u(d)})}hasTransition(){return!1}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loaded(){return this._loaded}loadTile(u,t){const o=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),d={request:this.map._requestManager.transformRequest(o,n.R.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:u.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,lut:null,maxZoom:null,promoteId:null,pixelRatio:null,scaleFactor:null};if(u.actor&&u.state!=="expired")if(u.state==="loading")u.reloadCallback=t;else{if(u.buckets){const b=Object.values(u.buckets);for(const A of b)A.dirty=!0;return void(u.state="loaded")}u.request=u.actor.send("reloadTile",d,v.bind(this))}else u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",d,v.bind(this),void 0,!0);function v(b,A){return u.aborted?t(null):b&&b.status!==404?t(b):(this.map._refreshExpiredTiles&&A&&u.setExpiryData(A),u.loadModelData(A,this.map.painter),u.state="loaded",void t(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aJ{constructor(u,t,o,d){super(u,t,o,d),t.coordinates?Array.isArray(t.coordinates)&&t.coordinates.length===4&&!t.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new n.y(new n.V(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.y(new n.V(`sources.${u}`,null,'missing required property "coordinates"'))),t.animate&&typeof t.animate!="boolean"&&this.fire(new n.y(new n.V(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),t.canvas?typeof t.canvas=="string"||t.canvas instanceof HTMLCanvasElement||this.fire(new n.y(new n.V(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.y(new n.V(`sources.${u}`,null,'missing required property "canvas"'))),this.options=t,this.animate=t.animate===void 0||t.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.y(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(u){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const t=this.map.painter.context;this.texture?!u&&!this._playing||this.texture instanceof n.aL||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(t,this.canvas,t.gl.RGBA8,{premultiply:!0}),this._prepareData(t)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}},custom:class extends n.E{constructor(u,t,o,d){super(),this.id=u,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=t,this.setEventedParent(d),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.y(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.y(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new yo(this._implementation.bounds,this.minzoom,this.maxzoom)),t.update=this._update.bind(this),t.clearTiles=this._clearTiles.bind(this),t.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.ay(t,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.ay(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(u){this.map=u,this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(u),this.load()}onRemove(u){this._implementation.onRemove&&this._implementation.onRemove(u)}hasTile(u){if(this._implementation.hasTile){const{x:t,y:o,z:d}=u.canonical;return this._implementation.hasTile({x:t,y:o,z:d})}return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,t){const{x:o,y:d,z:v}=u.tileID.canonical,b=new AbortController;u.request=Promise.resolve(this._implementation.loadTile({x:o,y:d,z:v},{signal:b.signal})).then(function(A){return delete u.request,u.aborted?(u.state="unloaded",t(null)):A===void 0?(u.state="errored",t(null)):A===null?(this.loadTileData(u,{width:this.tileSize,height:this.tileSize,data:null}),u.state="loaded",t(null)):function(k){return k instanceof ImageData||k instanceof HTMLCanvasElement||k instanceof ImageBitmap||k instanceof HTMLImageElement}(A)?(this.loadTileData(u,A),u.state="loaded",void t(null)):(u.state="errored",t(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(A=>{A.code!==20&&(u.state="errored",t(A))}),u.request.cancel=()=>b.abort()}loadTileData(u,t){u.setTexture(t,this.map.painter)}unloadTile(u,t){if(u.texture&&u.texture instanceof n.T?(u.destroy(!0),u.texture&&u.texture instanceof n.T&&this.map.painter.saveTileTexture(u.texture)):u.destroy(),this._implementation.unloadTile){const{x:o,y:d,z:v}=u.tileID.canonical;this._implementation.unloadTile({x:o,y:d,z:v})}t&&t()}abortTile(u,t){u.request&&u.request.cancel&&(u.request.cancel(),delete u.request),t&&t()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(u=>({x:u.canonical.x,y:u.canonical.y,z:u.canonical.z}))}_clearTiles(){const u=n.aC(this.id,this.scope);this.map.style.clearSource(u)}_update(){this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))}}},Aa=function(u,t,o,d){const v=new $o[t.type](u,t,o,d);if(v.id!==u)throw new Error(`Expected Source id to be ${u} instead of ${v.id}`);return n.aP(["load","abort","unload","serialize","prepare"],v),v};function qa(u,t,o=""){return`${o}:${t.id||""}:${t.layer.id}:${function(d){if("layerId"in d)return`layer:${d.layerId}`;{const{featuresetId:v,importId:b}=d;return`featureset:${v}${b?`:import:${b}`:""}`}}(u.target)}`}function Oo(u,t,o,d=""){if(u.uniqueFeatureID){const v=qa(u,t,d);if(o.has(v))return!0;o.add(v)}return!1}function Do(u,t,o,d,v=!1){const b=t.sourceCache.transform,A=t.sourceCache.tilesIn(u,t.has3DLayers,v);A.sort(xs);const k=[];for(const Z of A){const q=Z.tile.queryRenderedFeatures(t,Z,o,d,b,v);Object.keys(q).length&&k.push({wrappedTileID:Z.tile.tileID.wrapped().key,queryResults:q})}return k.length===0?{}:function(Z){const q={},re={};for(const fe of Z){const pe=fe.queryResults,Te=fe.wrappedTileID,et=re[Te]=re[Te]||{};for(const We in pe){const rt=pe[We],it=et[We]=et[We]||{},kt=q[We]=q[We]||[];for(const qt of rt)it[qt.featureIndex]||(it[qt.featureIndex]=!0,kt.push(qt))}}return q}(k)}function oa(u,t,o,d,v){const b={},A=d.queryRenderedSymbols(u),k=[];for(const Z of Object.keys(A).map(Number))k.push(v[Z]);k.sort(xs);for(const Z of k){const q=Z.featureIndex.lookupSymbolFeatures(A[Z.bucketInstanceId],Z.bucketIndex,Z.sourceLayerIndex,t,o);for(const re in q){const fe=b[re]=b[re]||[],pe=q[re];pe.sort((Te,et)=>{const We=Z.featureSortOrder;if(We){const rt=We.indexOf(Te.featureIndex);return We.indexOf(et.featureIndex)-rt}return et.featureIndex-Te.featureIndex});for(const Te of pe)fe.push(Te)}}return b}function Fa(u,t){const o=u.getRenderableIds().map(b=>u.getTileByID(b)),d=[],v={};for(let b=0;b<o.length;b++){const A=o[b],k=A.tileID.canonical.key;v[k]||(v[k]=!0,A.querySourceFeatures(d,t))}return d}function xs(u,t){const o=u.tileID,d=t.tileID;return o.overscaledZ-d.overscaledZ||o.canonical.y-d.canonical.y||o.wrap-d.wrap||o.canonical.x-d.canonical.x}function tl(u,t){const o={};if(!t)return o;for(const d of u){const v=d.layerIds.map(b=>t.getLayer(b)).filter(Boolean);if(v.length!==0){d.layers=v,d.stateDependentLayerIds&&(d.stateDependentLayers=d.stateDependentLayerIds.map(b=>v.filter(A=>A.id===b)[0]));for(const b of v)o[b.fqid]=d}}return o}const Na=32,ro=33,xa=new Uint16Array(8184);for(let u=0;u<2046;u++){let t=u+2,o=0,d=0,v=0,b=0,A=0,k=0;for(1&t?v=b=A=Na:o=d=k=Na;(t>>=1)>1;){const q=o+v>>1,re=d+b>>1;1&t?(v=o,b=d,o=A,d=k):(o=v,d=b,v=A,b=k),A=q,k=re}const Z=4*u;xa[Z+0]=o,xa[Z+1]=d,xa[Z+2]=v,xa[Z+3]=b}const Ba=new Uint16Array(2178),ma=new Uint8Array(1089),ja=new Uint16Array(1089);function Sa(u){return u===0?-.03125:u===32?.03125:0}const us={type:2,extent:n.ag,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ag+1,0),new n.P(n.ag+1,n.ag+1),new n.P(0,n.ag+1),new n.P(0,0)]]};class ua{constructor(t,o,d,v,b){this.tileID=t,this.uid=n.aV(),this.uses=0,this.tileSize=o,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,v&&v.style&&(this._lastUpdatedBrightness=v.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(t){const o=t+this.timeAdded;o<n.q.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aQ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,o,d){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=tl(t.buckets,o.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof n.aX){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof n.aX&&b.hasRTLText){this.hasRTLText=!0,n.aY();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v],A=o.style.getOwnLayer(v);if(!A)continue;const k=A.queryRadius(b);this.queryPadding=Math.max(this.queryPadding,k)}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas),this._lastUpdatedBrightness=t.brightness}else this.collisionBoxArray=new n.aW}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(t,o,d){t&&(t.resourceTiming&&(this.resourceTiming=t.resourceTiming),this.buckets=Object.assign({},this.buckets,tl(t.buckets,o.style)),t.featureIndex&&(this.latestFeatureIndex=t.featureIndex))}getBucket(t){return this.buckets[t.fqid]}upload(t){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(t)}const o=t.gl,d=this.imageAtlas;if(d&&!d.uploaded){const v=!!Object.keys(d.patternPositions).length;this.imageAtlasTexture=new n.T(t,d.image,o.RGBA8,{useMipmap:v}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(t,this.glyphAtlasImage,o.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(t,this.lineAtlas.image,o.R8),this.lineAtlas.uploaded=!0)}prepare(t,o,d){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture,d),!o||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const v=o.style.getBrightness();(this._lastUpdatedBrightness||v)&&(this._lastUpdatedBrightness&&v&&Math.abs(this._lastUpdatedBrightness-v)<.001||(this.updateBuckets(o,this._lastUpdatedBrightness!==v),this._lastUpdatedBrightness=v))}queryRenderedFeatures(t,o,d,v,b,A){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const k=function(Z,q){const re=n.ab.mat4.fromScaling([],[.5*Z.width,.5*-Z.height,1]);return n.ab.mat4.translate(re,re,[1,-1,0]),n.ab.mat4.multiply(re,re,Z.calculateProjMatrix(q.toUnwrapped())),Float32Array.from(re)}(b,this.tileID);return this.latestFeatureIndex.query(t,{tilespaceGeometry:o,pixelPosMatrix:k,transform:v,availableImages:d,tileTransform:this.tileTransform})}querySourceFeatures(t,o){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const v=d.loadVTLayers(),b=o?o.sourceLayer:"",A=v._geojsonTileLayer||v[b];if(!A)return;const k=n.aZ(o&&o.filter),{z:Z,x:q,y:re}=this.tileID.canonical,fe={z:Z,x:q,y:re};for(let pe=0;pe<A.length;pe++){const Te=A.feature(pe);if(k.needGeometry){const rt=n.a_(Te,!0);if(!k.filter(new n.a8(this.tileID.overscaledZ),rt,this.tileID.canonical))continue}else if(!k.filter(new n.a8(this.tileID.overscaledZ),Te))continue;const et=d.getId(Te,b),We=new n.a$(Te,Z,q,re,et);We.tile=fe,t.push(We)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const d=n.b0(t.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const d=Date.now();let v=!1;if(this.expirationTime>d)v=!1;else if(o)if(this.expirationTime<o)v=!0;else{const b=this.expirationTime-o;b?this.expirationTime=d+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(t){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&t&&this.updateBuckets(t)}updateBuckets(t,o){if(!this.latestFeatureIndex||!t.style)return;const d=this.latestFeatureIndex.loadVTLayers(),v=t.style.listImages(),b=t.style.getBrightness();for(const A in this.buckets){if(!t.style.hasLayer(A))continue;const k=this.buckets[A],Z=k.layers[0],q=Z.sourceLayer||"_geojsonTileLayer",re=d[q],fe=t.style.getLayerSourceCache(Z);let pe={};fe&&(pe=fe._state.getState(q,void 0));const Te=this.imageAtlas&&this.imageAtlas.patternPositions||{},et=Object.keys(pe).length>0&&!o;et&&!k.stateDependentLayers.length&&!o||k.update(pe,re,v,Te,et?k.stateDependentLayers:k.layers,o,b),(k instanceof n.b1||k instanceof n.b2)&&t._terrain&&t._terrain.enabled&&fe&&k.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(fe.id,this.tileID);const We=t&&t.style&&t.style.getOwnLayer(A);We&&(this.queryPadding=Math.max(this.queryPadding,We.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=n.q.now()+t}setTexture(t,o){const d=o.context,v=d.gl;this.texture=this.texture||o.getTileTexture(t.width),this.texture&&this.texture instanceof n.T?this.texture.update(t):(this.texture=new n.T(d,t,v.RGBA8,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(t,o){const d={};for(const v of o)d[v]=!0;this.dependencies[t]=d}hasDependency(t,o){for(const d of t){const v=this.dependencies[d];if(v){for(const b of o)if(v[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const d=n.b3(us,this.tileID.canonical,this.tileTransform)[0],v=new n.b4,b=new n.b5;for(let A=0;A<d.length;A++){const{x:k,y:Z}=d[A];v.emplaceBack(k,Z),b.emplaceBack(A)}b.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(b),this._tileDebugBuffer=t.createVertexBuffer(v,n.b6.members),this._tileDebugSegments=n.b7.simpleSegment(0,0,v.length,b.length)}_makeTileBoundsBuffers(t,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const d=n.b3(us,this.tileID.canonical,this.tileTransform)[0];let v,b;if(this.isRaster){const A=function(k,Z){const q=n.aQ(k,Z),re=Math.pow(2,k.z);for(let rt=0;rt<ro;rt++)for(let it=0;it<ro;it++){const kt=n.aR((k.x+(it+Sa(it))/Na)/re),qt=n.aS((k.y+(rt+Sa(rt))/Na)/re),Qt=Z.project(kt,qt),vn=rt*ro+it;Ba[2*vn+0]=Math.round((Qt.x*q.scale-q.x)*n.ag),Ba[2*vn+1]=Math.round((Qt.y*q.scale-q.y)*n.ag)}ma.fill(0),ja.fill(0);for(let rt=2045;rt>=0;rt--){const it=4*rt,kt=xa[it+0],qt=xa[it+1],Qt=xa[it+2],vn=xa[it+3],on=kt+Qt>>1,dn=qt+vn>>1,nn=on+dn-qt,Rn=dn+kt-on,$n=qt*ro+kt,Pr=vn*ro+Qt,dr=dn*ro+on,Or=Math.hypot((Ba[2*$n+0]+Ba[2*Pr+0])/2-Ba[2*dr+0],(Ba[2*$n+1]+Ba[2*Pr+1])/2-Ba[2*dr+1])>=16;ma[dr]=ma[dr]||(Or?1:0),rt<1022&&(ma[dr]=ma[dr]||ma[(qt+Rn>>1)*ro+(kt+nn>>1)]||ma[(vn+Rn>>1)*ro+(Qt+nn>>1)])}const fe=new n.aT,pe=new n.aU;let Te=0;function et(rt,it){const kt=it*ro+rt;return ja[kt]===0&&(fe.emplaceBack(Ba[2*kt+0],Ba[2*kt+1],rt*n.ag/Na,it*n.ag/Na),ja[kt]=++Te),ja[kt]-1}function We(rt,it,kt,qt,Qt,vn){const on=rt+kt>>1,dn=it+qt>>1;if(Math.abs(rt-Qt)+Math.abs(it-vn)>1&&ma[dn*ro+on])We(Qt,vn,rt,it,on,dn),We(kt,qt,Qt,vn,on,dn);else{const nn=et(rt,it),Rn=et(kt,qt),$n=et(Qt,vn);pe.emplaceBack(nn,Rn,$n)}}return We(0,0,Na,Na,Na,0),We(Na,Na,0,0,0,Na),{vertices:fe,indices:pe}}(this.tileID.canonical,o);v=A.vertices,b=A.indices}else{v=new n.aT,b=new n.aU;for(const{x:k,y:Z}of d)v.emplaceBack(k,Z,0,0);const A=n.b8(v.int16,void 0,4);for(let k=0;k<A.length;k+=3)b.emplaceBack(A[k],A[k+1],A[k+2])}this._tileBoundsBuffer=t.createVertexBuffer(v,n.b9.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(b),this._tileBoundsSegments=n.b7.simpleSegment(0,0,v.length,b.length)}_makeGlobeTileDebugBuffers(t,o){const d=o.projection;if(!d||d.name!=="globe"||o.freezeTileCoverage)return;const v=this.tileID.canonical,b=n.ba(v,o),A=n.bb(b),k=n.ae(o.zoom);let Z;k>0&&(Z=n.ab.mat4.invert(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,v,o,A,Z,k),this._makeGlobeTileDebugTextBuffer(t,v,o,A,Z,k)}_globePoint(t,o,d,v,b,A,k){let Z=n.bc(t,o,d);if(A){const q=1<<d.z,re=n.at(v.center.lng),fe=n.aA(v.center.lat),pe=(d.x+.5)/q-re;let Te=0;pe>.5?Te=-1:pe<-.5&&(Te=1);let et=(t/n.ag+d.x)/q+Te,We=(o/n.ag+d.y)/q;et=(et-re)*v._pixelsPerMercatorPixel+re,We=(We-fe)*v._pixelsPerMercatorPixel+fe;const rt=[et*v.worldSize,We*v.worldSize,0];n.ab.vec3.transformMat4(rt,rt,A),Z=n.bd(Z,rt,k)}return n.ab.vec3.transformMat4(Z,Z,b)}_makeGlobeTileDebugBorderBuffer(t,o,d,v,b,A){const k=new n.b4,Z=new n.b5,q=new n.be,re=(pe,Te,et,We,rt)=>{const it=(et-pe)/(rt-1),kt=(We-Te)/(rt-1),qt=k.length;for(let Qt=0;Qt<rt;Qt++){const vn=pe+Qt*it,on=Te+Qt*kt;k.emplaceBack(vn,on);const dn=this._globePoint(vn,on,o,d,v,b,A);q.emplaceBack(dn[0],dn[1],dn[2]),Z.emplaceBack(qt+Qt)}},fe=n.ag;re(0,0,fe,0,16),re(fe,0,fe,fe,16),re(fe,fe,0,fe,16),re(0,fe,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(Z),this._tileDebugBuffer=t.createVertexBuffer(k,n.b6.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(q,n.bf.members),this._tileDebugSegments=n.b7.simpleSegment(0,0,k.length,Z.length)}_makeGlobeTileDebugTextBuffer(t,o,d,v,b,A){const k=n.ag/4,Z=new n.b4,q=new n.aU,re=new n.be,fe=25;q.reserve(32),Z.reserve(fe),re.reserve(fe);const pe=(Te,et)=>fe*Te+et;for(let Te=0;Te<fe;Te++){const et=Te*k;for(let We=0;We<fe;We++){const rt=We*k;Z.emplaceBack(rt,et);const it=this._globePoint(rt,et,o,d,v,b,A);re.emplaceBack(it[0],it[1],it[2])}}for(let Te=0;Te<4;Te++)for(let et=0;et<4;et++){const We=pe(Te,et),rt=pe(Te,et+1),it=pe(Te+1,et),kt=pe(Te+1,et+1);q.emplaceBack(We,rt,it),q.emplaceBack(it,rt,kt)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(q),this._tileDebugTextBuffer=t.createVertexBuffer(Z,n.b6.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(re,n.bf.members),this._tileDebugTextSegments=n.b7.simpleSegment(0,0,fe,32)}destroy(t=!1){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!t&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bg.setPbf(n.bh);class ao extends ua{constructor(t,o,d,v,b){super(t,o,d,v,b),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(t,o){const d=o.context,v=d.gl;this.texture=this.texture||o.getTileTexture(t.width),this.texture&&this.texture instanceof n.T?this.texture.update(t,{premultiply:!1}):this.texture=new n.T(d,t,v.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(t=16384,o){const d=this._mrt=new n.bg(30),v=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(t-1)}});return this.entireBuffer=null,this.request=n.bi(v,(b,A,k,Z)=>{if(b)o(b);else try{const q=d.getHeaderLength(A);if(q>t)return void(this.request=this.fetchHeader(q,o));d.parseHeader(A),this._isHeaderLoaded=!0;let re=0;for(const fe of Object.values(d.layers))re=Math.max(re,fe.dataIndex[fe.dataIndex.length-1].last_byte);A.byteLength>=re&&(this.entireBuffer=A),o(null,this.entireBuffer||A,k,Z)}catch(q){o(q)}}),this.request}fetchBand(t,o,d){const v=this._mrt;if(!this._isHeaderLoaded||!v)return void d(new Error("Tile header is not ready"));const b=this.actor;if(!b)return void d(new Error("Can't fetch tile band without an actor"));let A;const k=(fe,pe)=>{A.complete(fe,pe),fe?d(fe):(this.updateTextureDescriptor(t,o),d(null,this.textureDescriptor&&this.textureDescriptor.img))},Z=(fe,pe)=>{if(fe)return d(fe);const Te=b.send("decodeRasterArray",{buffer:pe,task:A},k,void 0,!0);this._workQueue.push(()=>{Te&&Te.cancel(),A.cancel()})},q=v.getLayer(t);if(!q)return void d(new Error(`Unknown sourceLayer "${t}"`));if(q.hasDataForBand(o))return this.updateTextureDescriptor(t,o),void d(null,this.textureDescriptor?this.textureDescriptor.img:null);const re=q.getDataRange([o]);if(A=v.createDecodingTask(re),!A||A.tasks.length)if(this.flushQueues(),this.entireBuffer)Z(null,this.entireBuffer.slice(re.firstByte,re.lastByte+1));else{const fe=Object.assign({},this.requestParams,{headers:{Range:`bytes=${re.firstByte}-${re.lastByte}`}}),pe=n.bi(fe,Z);this._fetchQueue.push(()=>{pe.cancel(),A.cancel()})}else d(null)}updateNeeded(t,o){return(!this.textureDescriptor||this.textureDescriptor.band!==o||this.textureDescriptor.layer!==t)&&this.state!=="errored"}updateTextureDescriptor(t,o){if(!this._mrt)return;const d=this._mrt.getLayer(t);if(!d||!d.hasBand(o)||!d.hasDataForBand(o))return;const{bytes:v,tileSize:b,buffer:A,offset:k,scale:Z}=d.getBandView(o),q=b+2*A,re={data:v,width:q,height:q},fe=this.texture;fe&&fe instanceof n.T&&fe.update(re,{premultiply:!1}),this.textureDescriptor={layer:t,band:o,img:re,buffer:A,offset:k,tileSize:b,format:d.pixelFormat,mix:[Z,256*Z,65536*Z,16777216*Z]}}}class Ma{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,d){const v=t.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:o,timeout:void 0};if(d!==void 0&&(b.timeout=setTimeout(()=>{this.remove(t,b)},d)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const d=t.wrapped().key,v=o===void 0?0:this.data[d].indexOf(o),b=this.data[d][v];return this.data[d].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(b.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const d in this.data)for(const v of this.data[d])t(v.value)||o.push(v);for(const d of o)this.remove(d.value.tileID,d)}}class ko{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,d){const v=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][v]=this.stateChanges[t][v]||{},n.l(this.stateChanges[t][v],d),this.deletedStates[t]===null){this.deletedStates[t]={};for(const b in this.state[t])b!==v&&(this.deletedStates[t][b]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][v]===null){this.deletedStates[t][v]={};for(const b in this.state[t][v])d[b]||(this.deletedStates[t][v][b]=null)}else for(const b in d)this.deletedStates[t]&&this.deletedStates[t][v]&&this.deletedStates[t][v][b]===null&&delete this.deletedStates[t][v][b]}removeFeatureState(t,o,d){if(this.deletedStates[t]===null)return;const v=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},d&&o!==void 0)this.deletedStates[t][v]!==null&&(this.deletedStates[t][v]=this.deletedStates[t][v]||{},this.deletedStates[t][v][d]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][v])for(d in this.deletedStates[t][v]={},this.stateChanges[t][v])this.deletedStates[t][v][d]=null;else this.deletedStates[t][v]=null;else this.deletedStates[t]=null}getState(t,o){const d=this.state[t]||{},v=this.stateChanges[t]||{},b=this.deletedStates[t];if(b===null)return{};if(o!==void 0){const k=String(o),Z=n.l({},d[k],v[k]);if(b){const q=b[o];if(q===null)return{};for(const re in q)delete Z[re]}return Z}const A=n.l({},d,v);if(b)for(const k in b)delete A[k];return A}initializeTileState(t,o){t.refreshFeatureState(o)}coalesceChanges(t,o){const d={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const A in this.stateChanges[v])this.state[v][A]||(this.state[v][A]={}),n.l(this.state[v][A],this.stateChanges[v][A]),b[A]=this.state[v][A];d[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const A in this.state[v])b[A]={},this.state[v][A]={};else for(const A in this.deletedStates[v]){if(this.deletedStates[v][A]===null)this.state[v][A]={};else if(this.state[v][A])for(const k of Object.keys(this.deletedStates[v][A]))delete this.state[v][A][k];b[A]=this.state[v][A]}d[v]=d[v]||{},n.l(d[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const v in t)t[v].refreshFeatureState(o)}}class No extends n.E{constructor(t,o,d){super(),this.id=t,this._onlySymbols=d,o.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Ma(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new ko,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(t){this.map=t,this._minTileCacheSize=this._minTileCacheSize===void 0&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const o=this._tiles[t];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,o){return t.isSymbolTile=this._onlySymbols,t.isExtraShadowCaster=this._shadowCasterTiles[t.tileID.key],this._source.loadTile(t,o)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t)}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t)}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const d=this._tiles[o];d.upload(t),d.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return n.bj(this._tiles).map(t=>t.tileID).sort(Uo).map(t=>t.key)}getRenderableIds(t,o){const d=[];for(const v in this._tiles)this._isIdRenderable(+v,t,o)&&d.push(this._tiles[v]);return t?d.sort((v,b)=>{const A=v.tileID,k=b.tileID,Z=new n.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle),q=new n.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return A.overscaledZ-k.overscaledZ||q.y-Z.y||q.x-Z.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(Uo).map(v=>v.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o,d){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())&&(d||!this._shadowCasterTiles[t])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(+t,"reloading")}}_reloadTile(t,o){const d=this._tiles[t];d&&(d.state!=="loading"&&(d.state=o),this._loadTile(d,this._tileLoaded.bind(this,d,t,o)))}_tileLoaded(t,o,d,v){if(v)if(t.state="errored",v.status!==404)this._source.fire(new n.y(v,{tile:t}));else{if(this._source.fire(new n.z("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:t})),!(t.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform)}else t.timeAdded=n.q.now(),d==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this._source.type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new n.z("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const o=this.getRenderableIds();for(let v=0;v<o.length;v++){const b=o[v];if(t.neighboringTiles&&t.neighboringTiles[b]){const A=this.getTileByID(b);d(t,A),d(A,t)}}function d(v,b){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let A=b.tileID.canonical.x-v.tileID.canonical.x;const k=b.tileID.canonical.y-v.tileID.canonical.y,Z=Math.pow(2,v.tileID.canonical.z),q=b.tileID.key;A===0&&k===0||Math.abs(k)>1||(Math.abs(A)>1&&(Math.abs(A+Z)===1?A+=Z:Math.abs(A-Z)===1&&(A-=Z)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,A,k),v.neighboringTiles&&v.neighboringTiles[q]&&(v.neighboringTiles[q].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,d,v){for(const b in this._tiles){let A=this._tiles[b];if(v[b]||!A.hasData()||A.tileID.overscaledZ<=o||A.tileID.overscaledZ>d)continue;let k=A.tileID;for(;A&&A.tileID.overscaledZ>o+1;){const q=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[q.key],A&&A.hasData()&&(k=q)}let Z=k;for(;Z.overscaledZ>o;)if(Z=Z.scaledTo(Z.overscaledZ-1),t[Z.key]){v[k.key]=k;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const d=this._loadedParentTiles[t.key];return d&&d.tileID.overscaledZ>=o?d:null}for(let d=t.overscaledZ-1;d>=o;d--){const v=t.scaledTo(d),b=this._getLoadedTile(v);if(b)return b}}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,o){o=o||this._source.tileSize;const d=Math.ceil(t.width/o)+1,v=Math.ceil(t.height/o)+1,b=Math.floor(d*v*5),A=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,A):A;this._cache.setMaxSize(k)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,o){const d={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+o),d[b.tileID.key]=b}this._tiles=d;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(t,o,d,v){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;this.updateCacheSize(t,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const b=this._source.type==="batched-model";let A,k=this._source.maxzoom;const Z=this.map&&this.map.painter?this.map.painter._terrain:null;if(Z&&Z.sourceCache===this&&Z.attenuationRange()){const fe=Z.attenuationRange()[0],pe=Math.floor(fe)-Math.log2(Z.getDemUpscale());k>pe&&(k=pe)}if(this.used||this.usedForTerrain){if(this._source.tileID)A=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(fe=>new n.aG(fe.canonical.z,fe.wrap,fe.canonical.z,fe.canonical.x,fe.canonical.y));else if(this.tileCoverLift!==0){const fe=t.clone();fe.tileCoverLift=this.tileCoverLift,A=fe.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:k,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:b}),this._source.minzoom<=1&&t.projection.name==="globe"&&(A.push(new n.aG(1,0,1,0,0)),A.push(new n.aG(1,0,1,1,0)),A.push(new n.aG(1,0,1,0,1)),A.push(new n.aG(1,0,1,1,1)))}else if(A=t.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:k,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:b}),this._source.hasTile){const fe=this._source.hasTile.bind(this._source);A=A.filter(pe=>fe(pe))}}else A=[];if(A.length>0&&this.castsShadows&&v&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Hs(this._source.type)){const fe=t.coveringZoomLevel({tileSize:o||this._source.tileSize,roundZoom:this._source.roundZoom&&!d}),pe=Math.min(fe,this._source.maxzoom);if(b){const Te=t.extendTileCover(A,pe);for(const et of Te)A.push(et)}else{const Te=t.extendTileCover(A,pe,v);for(const et of Te)this._shadowCasterTiles[et.key]=!0,A.push(et)}}const q=this._updateRetainedTiles(A);if(Hs(this._source.type)&&A.length!==0){const fe={},pe={},Te=Object.keys(q);for(const We of Te){const rt=q[We],it=this._tiles[We];if(!it||it.fadeEndTime&&it.fadeEndTime<=n.q.now())continue;const kt=this.findLoadedParent(rt,Math.max(rt.overscaledZ-No.maxOverzooming,this._source.minzoom));kt&&(this._addTile(kt.tileID),fe[kt.tileID.key]=kt.tileID),pe[We]=rt}const et=A[A.length-1].overscaledZ;for(const We in this._tiles){const rt=this._tiles[We];if(q[We]||!rt.hasData())continue;let it=rt.tileID;for(;it.overscaledZ>et;){it=it.scaledTo(it.overscaledZ-1);const kt=this._tiles[it.key];if(kt&&kt.hasData()&&pe[it.key]){q[We]=rt.tileID;break}}}for(const We in fe)q[We]||(this._coveredTiles[We]=!0,q[We]=fe[We])}for(const fe in q)this._tiles[fe].clearFadeHold();const re=n.bk(this._tiles,q);for(const fe of re){const pe=this._tiles[fe];pe.hasSymbolBuckets&&!pe.holdingForFade()?pe.setHoldDuration(this.map._fadeDuration):pe.hasSymbolBuckets&&!pe.symbolFadeFinished()||this._removeTile(+fe)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const o={};if(t.length===0)return o;const d={},v=t.reduce((q,re)=>Math.min(q,re.overscaledZ),1/0),b=t[0].overscaledZ,A=Math.max(b-No.maxOverzooming,this._source.minzoom),k=Math.max(b+No.maxUnderzooming,this._source.minzoom),Z={};for(const q of t){const re=this._addTile(q);o[q.key]=q,re.hasData()||v<this._source.maxzoom&&(Z[q.key]=q)}this._retainLoadedChildren(Z,v,k,o);for(const q of t){let re=this._tiles[q.key];if(re.hasData())continue;if(q.canonical.z>=this._source.maxzoom){const pe=q.children(this._source.maxzoom)[0],Te=this.getTile(pe);if(Te&&Te.hasData()){o[pe.key]=pe;continue}}else{const pe=q.children(this._source.maxzoom);if(o[pe[0].key]&&o[pe[1].key]&&o[pe[2].key]&&o[pe[3].key])continue}let fe=re.wasRequested();for(let pe=q.overscaledZ-1;pe>=A;--pe){const Te=q.scaledTo(pe);if(d[Te.key]||(d[Te.key]=!0,re=this.getTile(Te),!re&&fe&&(re=this._addTile(Te)),re&&(o[Te.key]=Te,fe=re.wasRequested(),re.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let d,v=this._tiles[t].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){d=this._loadedParentTiles[v.key];break}o.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(d=this._getLoadedTile(b),d)break;v=b}for(const b of o)this._loadedParentTiles[b]=d}}_addTile(t){let o=this._tiles[t.key];if(o)return o.isExtraShadowCaster!==!0||this._shadowCasterTiles[t.key]||this._reloadTile(t.key,"reloading"),o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const d=!!o;if(!d){const v=this.map?this.map.painter:null,b=this._source.tileSize*t.overscaleFactor();o=this._source.type==="raster-array"?new ao(t,b,this.transform.tileZoom,v,this._isRaster):new ua(t,b,this.transform.tileZoom,v,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,t.key,o.state))}return o?(o.uses++,this._tiles[t.key]=o,d||this._source.fire(new n.z("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const d=o.getExpiryTimeout();d&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},d))}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&o.state!=="reloading"||o.state==="empty"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,o,d){const v=[],b=this.transform;if(!b)return v;const A=b.projection.name==="globe",k=n.at(b.center.lng);for(const Z in this._tiles){const q=this._tiles[Z];if(d&&q.clearQueryDebugViz(),q.holdingForFade())continue;let re;if(A){const fe=q.tileID.canonical;if(fe.z===0){const pe=[Math.abs(n.aw(k,...$i(fe,-1))-k),Math.abs(n.aw(k,...$i(fe,1))-k)];re=[0,2*pe.indexOf(Math.min(...pe))-1]}else{const pe=[Math.abs(n.aw(k,...$i(fe,-1))-k),Math.abs(n.aw(k,...$i(fe,0))-k),Math.abs(n.aw(k,...$i(fe,1))-k)];re=[pe.indexOf(Math.min(...pe))-1]}}else re=[0];for(const fe of re){const pe=t.containsTile(q,b,o,fe);pe&&v.push(pe)}}return v}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(t){return this._getRenderableCoordinates(t)}_getRenderableCoordinates(t,o){const d=this.getRenderableIds(t,o).map(b=>this._tiles[b].tileID),v=this.transform.projection.name==="globe";for(const b of d)b.projMatrix=this.transform.calculateProjMatrix(b.toUnwrapped()),b.expandedProjMatrix=v?this.transform.calculateProjMatrix(b.toUnwrapped(),!1,!0):b.projMatrix;return d}sortCoordinatesByDistance(t){const o=t.slice(),d=this.transform._camera.position,v=this.transform._camera.forward(),b={};for(const A of o){const k=1/(1<<A.canonical.z);b[A.key]=((A.canonical.x+.5)*k+A.wrap-d[0])*v[0]+((A.canonical.y+.5)*k-d[1])*v[1]-d[2]*v[2]}return o.sort((A,k)=>b[A.key]-b[k.key]),o}hasTransition(){if(this._source.hasTransition())return!0;if(Hs(this._source.type))for(const t in this._tiles){const o=this._tiles[t];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(t,o,d){this._state.updateState(t=t||"_geojsonTileLayer",o,d)}removeFeatureState(t,o,d){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,d)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,d){const v=this._tiles[t];v&&v.setDependencies(o,d)}reloadTilesForDependencies(t,o){for(const d in this._tiles)this._tiles[d].hasDependency(t,o)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(t,o))}_preloadTiles(t,o){if(!this._sourceLoaded){const Z=()=>{this._sourceLoaded&&(this._source.off("data",Z),this._preloadTiles(t,o))};return void this._source.on("data",Z)}const d=new Map,v=Array.isArray(t)?t:[t],b=this.map.painter.terrain,A=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const Z of v){const q=Z.coveringTiles({tileSize:A,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const re of q)d.set(re.key,re);this.usedForTerrain&&Z.updateElevation(!1)}const k=Array.from(d.values());n.bl(k,(Z,q)=>{const re=new ua(Z,this._source.tileSize*Z.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(re,fe=>{this._source.type==="raster-dem"&&re.dem&&this._backfillDEM(re),q(fe,re)})},o)}}function Uo(u,t){const o=Math.abs(2*u.wrap)-+(u.wrap<0),d=Math.abs(2*t.wrap)-+(t.wrap<0);return u.overscaledZ-t.overscaledZ||d-o||t.canonical.y-u.canonical.y||t.canonical.x-u.canonical.x}function Hs(u){return u==="raster"||u==="image"||u==="video"||u==="custom"}function $i(u,t){const o=1<<u.z;return[u.x/o+t,(u.x+1)/o+t]}No.maxOverzooming=10,No.maxUnderzooming=3;class es{constructor(t){this.style=t,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const t=!1,o=!1;for(const d in this.style._mergedLayers){const v=this.style._mergedLayers[d];if(v.type==="fill-extrusion")this.layers.push({layer:v,visible:t,visibilityChanged:o});else if(v.type==="model"){const b=this.style.getLayerSource(v);b&&b.type==="batched-model"&&this.layers.push({layer:v,visible:t,visibilityChanged:o})}}}onNewFrame(t){this.layersGotHidden=!1;for(const o of this.layers){const d=o.layer;let v=!1;d.type==="fill-extrusion"?v=!d.isHidden(t)&&d.paint.get("fill-extrusion-opacity")>0:d.type==="model"&&(v=!d.isHidden(t)&&d.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!v&&o.visible,o.visible=v}}updateZOffset(t,o){this.currentBuildingBuckets=[];for(const v of this.layers){const b=v.layer,A=this.style.getLayerSourceCache(b);let k=1;b.type==="fill-extrusion"&&(k=v.visible?b.paint.get("fill-extrusion-vertical-scale"):0);let Z=A?A.getTile(o):null;if(!Z&&A&&o.canonical.z>A.getSource().minzoom){let q=o.scaledTo(Math.min(A.getSource().maxzoom,o.overscaledZ-1));for(;q.overscaledZ>=A.getSource().minzoom&&(Z=A.getTile(q),!Z&&q.overscaledZ!==0);)q=q.scaledTo(q.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:Z?Z.getBucket(b):null,tileID:Z?Z.tileID:o,verticalScale:k})}t.hasAnyZOffset=!1;let d=!1;for(let v=0;v<t.symbolInstances.length;v++){const b=t.symbolInstances.get(v),A=b.zOffset,k=this._getHeightAtTileOffset(o,b.tileAnchorX,b.tileAnchorY);b.zOffset=k!==Number.NEGATIVE_INFINITY?k:A,d||A===b.zOffset||(d=!0),t.hasAnyZOffset||b.zOffset===0||(t.hasAnyZOffset=!0)}d&&(t.zOffsetBuffersNeedUpload=!0,t.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(t,o,d,v){let b=o,A=d;if(t.canonical.z!==v.canonical.z){const k=v.canonical,Z=1/(1<<t.canonical.z-k.z);b=(o+t.canonical.x*n.ag)*Z-k.x*n.ag|0,A=(d+t.canonical.y*n.ag)*Z-k.y*n.ag|0}return{tileX:b,tileY:A}}_getHeightAtTileOffset(t,o,d){let v,b;for(let A=0;A<this.layers.length;++A){if(this.layers[A].layer.type!=="fill-extrusion")continue;const{bucket:k,tileID:Z,verticalScale:q}=this.currentBuildingBuckets[A];if(!k)continue;const{tileX:re,tileY:fe}=this._mapCoordToOverlappingTile(t,o,d,Z),pe=k.getHeightAtTileCoord(re,fe);pe&&pe.height!==void 0&&(pe.hidden?v=pe.height:b=Math.max(pe.height*q,b||0))}if(b!==void 0)return b;for(let A=0;A<this.layers.length;++A){const k=this.layers[A];if(k.layer.type!=="model"||!k.visible)continue;const{bucket:Z,tileID:q}=this.currentBuildingBuckets[A];if(!Z)continue;const{tileX:re,tileY:fe}=this._mapCoordToOverlappingTile(t,o,d,q),pe=Z.getHeightAtTileCoord(re,fe);if(pe&&!pe.hidden)return pe.height===void 0&&v!==void 0?Math.min(pe.maxHeight,v)*pe.verticalScale:pe.height?pe.height*pe.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Ll(u,t){const o={};for(const d in u)d!=="ref"&&(o[d]=u[d]);return n.bm.forEach(d=>{d in t&&(o[d]=t[d])}),o}function hl(u){u=u.slice();const t=Object.create(null);for(let o=0;o<u.length;o++)t[u[o].id]=u[o];for(let o=0;o<u.length;o++)"ref"in u[o]&&(u[o]=Ll(u[o],t[u[o].ref]));return u}const ho={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Ul(u,t,o){o.push({command:ho.addSource,args:[u,t[u]]})}function Ml(u,t,o){t.push({command:ho.removeSource,args:[u]}),o[u]=!0}function Ri(u,t,o,d){Ml(u,o,d),Ul(u,t,o)}function Wo(u,t,o){let d;for(d in u[o])if(u[o].hasOwnProperty(d)&&d!=="data"&&!n.bn(u[o][d],t[o][d]))return!1;for(d in t[o])if(t[o].hasOwnProperty(d)&&d!=="data"&&!n.bn(u[o][d],t[o][d]))return!1;return!0}function fo(u,t,o,d,v,b){let A;for(A in t=t||{},u=u||{})u.hasOwnProperty(A)&&(n.bn(u[A],t[A])||o.push({command:b,args:[d,A,t[A],v]}));for(A in t)t.hasOwnProperty(A)&&!u.hasOwnProperty(A)&&(n.bn(u[A],t[A])||o.push({command:b,args:[d,A,t[A],v]}))}function ts(u){return u.id}function il(u,t){return u[t.id]=t,u}class Jo{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=n.aw(t,0,1);let o=1,d=this._distances[o];const v=t*this.paddedLength+this.padding;for(;d<v&&o<this._distances.length;)d=this._distances[++o];const b=o-1,A=this._distances[b],k=d-A,Z=k>0?(v-A)/k:0;return this.points[b].mult(1-Z).add(this.points[o].mult(Z))}}class Jl{constructor(t,o,d){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(t/d),this.yCellCount=Math.ceil(o/d);for(let A=0;A<this.xCellCount*this.yCellCount;A++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,d,v,b){this._forEachCell(o,d,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(t,o,d,v){this._forEachCell(o-v,d-v,o+v,d+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(d),this.circles.push(v)}_insertBoxCell(t,o,d,v,b,A){this.boxCells[b].push(A)}_insertCircleCell(t,o,d,v,b,A){this.circleCells[b].push(A)}_query(t,o,d,v,b,A){if(d<0||t>this.width||v<0||o>this.height)return!b&&[];const k=[];if(t<=0&&o<=0&&this.width<=d&&this.height<=v){if(b)return!0;for(let Z=0;Z<this.boxKeys.length;Z++)k.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(let Z=0;Z<this.circleKeys.length;Z++){const q=this.circles[3*Z],re=this.circles[3*Z+1],fe=this.circles[3*Z+2];k.push({key:this.circleKeys[Z],x1:q-fe,y1:re-fe,x2:q+fe,y2:re+fe})}return A?k.filter(A):k}return this._forEachCell(t,o,d,v,this._queryCell,k,{hitTest:b,seenUids:{box:{},circle:{}}},A),b?k.length>0:k}_queryCircle(t,o,d,v,b){const A=t-d,k=t+d,Z=o-d,q=o+d;if(k<0||A>this.width||q<0||Z>this.height)return!v&&[];const re=[];return this._forEachCell(A,Z,k,q,this._queryCellCircle,re,{hitTest:v,circle:{x:t,y:o,radius:d},seenUids:{box:{},circle:{}}},b),v?re.length>0:re}query(t,o,d,v,b){return this._query(t,o,d,v,!1,b)}hitTest(t,o,d,v,b){return this._query(t,o,d,v,!0,b)}hitTestCircle(t,o,d,v){return this._queryCircle(t,o,d,!0,v)}_queryCell(t,o,d,v,b,A,k,Z){const q=k.seenUids,re=this.boxCells[b];if(re!==null){const pe=this.bboxes;for(const Te of re)if(!q.box[Te]){q.box[Te]=!0;const et=4*Te;if(t<=pe[et+2]&&o<=pe[et+3]&&d>=pe[et+0]&&v>=pe[et+1]&&(!Z||Z(this.boxKeys[Te]))){if(k.hitTest)return A.push(!0),!0;A.push({key:this.boxKeys[Te],x1:pe[et],y1:pe[et+1],x2:pe[et+2],y2:pe[et+3]})}}}const fe=this.circleCells[b];if(fe!==null){const pe=this.circles;for(const Te of fe)if(!q.circle[Te]){q.circle[Te]=!0;const et=3*Te;if(this._circleAndRectCollide(pe[et],pe[et+1],pe[et+2],t,o,d,v)&&(!Z||Z(this.circleKeys[Te]))){if(k.hitTest)return A.push(!0),!0;{const We=pe[et],rt=pe[et+1],it=pe[et+2];A.push({key:this.circleKeys[Te],x1:We-it,y1:rt-it,x2:We+it,y2:rt+it})}}}}}_queryCellCircle(t,o,d,v,b,A,k,Z){const q=k.circle,re=k.seenUids,fe=this.boxCells[b];if(fe!==null){const Te=this.bboxes;for(const et of fe)if(!re.box[et]){re.box[et]=!0;const We=4*et;if(this._circleAndRectCollide(q.x,q.y,q.radius,Te[We+0],Te[We+1],Te[We+2],Te[We+3])&&(!Z||Z(this.boxKeys[et])))return A.push(!0),!0}}const pe=this.circleCells[b];if(pe!==null){const Te=this.circles;for(const et of pe)if(!re.circle[et]){re.circle[et]=!0;const We=3*et;if(this._circlesCollide(Te[We],Te[We+1],Te[We+2],q.x,q.y,q.radius)&&(!Z||Z(this.circleKeys[et])))return A.push(!0),!0}}}_forEachCell(t,o,d,v,b,A,k,Z){const q=this._convertToXCellCoord(t),re=this._convertToYCellCoord(o),fe=this._convertToXCellCoord(d),pe=this._convertToYCellCoord(v);for(let Te=q;Te<=fe;Te++)for(let et=re;et<=pe;et++)if(b.call(this,t,o,d,v,this.xCellCount*et+Te,A,k,Z))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,d,v,b,A){const k=v-t,Z=b-o,q=d+A;return q*q>k*k+Z*Z}_circleAndRectCollide(t,o,d,v,b,A,k){const Z=(A-v)/2,q=Math.abs(t-(v+Z));if(q>Z+d)return!1;const re=(k-b)/2,fe=Math.abs(o-(b+re));if(fe>re+d)return!1;if(q<=Z||fe<=re)return!0;const pe=q-Z,Te=fe-re;return pe*pe+Te*Te<=d*d}}const zs={unknown:0,flipRequired:1,flipNotRequired:2},Cs=Math.tan(85*Math.PI/180);function oo(u,t,o,d,v,b,A){const k=n.ab.mat4.create();if(o)if(b.name==="globe"){const Z=n.bo(v,t);n.ab.mat4.multiply(k,k,Z)}else{const Z=n.ab.mat2.invert([],A);k[0]=Z[0],k[1]=Z[1],k[4]=Z[2],k[5]=Z[3],d||n.ab.mat4.rotateZ(k,k,v.angle)}else n.ab.mat4.multiply(k,v.labelPlaneMatrix,u);return k}function qi(u,t,o,d,v,b,A){const k=oo(u,t,o,d,v,b,A);return b.name==="globe"&&o||(k[2]=k[6]=k[10]=k[14]=0),k}function Ta(u,t,o,d,v,b,A){if(o){if(b.name==="globe"){const k=oo(u,t,o,d,v,b,A);return n.ab.mat4.invert(k,k),n.ab.mat4.multiply(k,u,k),k}{const k=n.ab.mat4.clone(u),Z=n.ab.mat4.identity([]);return Z[0]=A[0],Z[1]=A[1],Z[4]=A[2],Z[5]=A[3],n.ab.mat4.multiply(k,k,Z),d||n.ab.mat4.rotateZ(k,k,-v.angle),k}}return v.glCoordMatrix}function la(u,t,o,d){const v=[u,t,o,1];o?n.ab.vec4.transformMat4(v,v,d):ws(v,v,d);const b=v[3];return v[0]/=b,v[1]/=b,v[2]/=b,v}function Os(u,t){return Math.min(.5+u/t*.5,1.5)}function Vl(u,t){const o=u[0]/u[3],d=u[1]/u[3];return o>=-t[0]&&o<=t[0]&&d>=-t[1]&&d<=t[1]}function ns(u,t,o,d,v,b,A,k,Z,q){const re=o.transform,fe=d?u.textSizeData:u.iconSizeData,pe=n.bp(fe,o.transform.zoom),Te=re.projection.name==="globe",et=[256/o.width*2+1,256/o.height*2+1],We=d?u.text.dynamicLayoutVertexArray:u.icon.dynamicLayoutVertexArray;We.clear();let rt=null;Te&&(rt=d?u.text.globeExtVertexArray:u.icon.globeExtVertexArray);const it=u.lineVertexArray,kt=d?u.text.placedSymbolArray:u.icon.placedSymbolArray,qt=o.transform.width/o.transform.height;let Qt,vn=!1;for(let on=0;on<kt.length;on++){const dn=kt.get(on),{numGlyphs:nn,writingMode:Rn}=dn;if(Rn!==n.bq.vertical||vn||Qt===n.bq.horizontal||(vn=!0),Qt=Rn,(dn.hidden||Rn===n.bq.vertical)&&!vn){fs(nn,We);continue}vn=!1;const $n=new n.P(dn.tileAnchorX,dn.tileAnchorY);let{x:Pr,y:dr,z:Or}=re.projection.projectTilePoint($n.x,$n.y,q.canonical);if(Z){const[Kr,mi,gi]=Z($n);Pr+=Kr,dr+=mi,Or+=gi}const kr=[Pr,dr,Or,1];if(n.ab.vec4.transformMat4(kr,kr,t),!Vl(kr,et)){fs(nn,We);continue}const Yn=kr[3],Mr=Os(o.transform.getCameraToCenterDistance(re.projection),Yn),ti=n.br(fe,pe,dn),ir=A?ti/Mr:ti*Mr,Fr=la(Pr,dr,Or,v);if(Fr[3]<=0){fs(nn,We);continue}let Cr={};const xi=A?null:Z,ri=bs(dn,ir,!1,k,t,v,b,u.glyphOffsetArray,it,We,rt,Fr,$n,Cr,qt,xi,re.projection,q,A);vn=ri.useVertical,xi&&ri.needsFlipping&&(Cr={}),(ri.notEnoughRoom||vn||ri.needsFlipping&&bs(dn,ir,!0,k,t,v,b,u.glyphOffsetArray,it,We,rt,Fr,$n,Cr,qt,xi,re.projection,q,A).notEnoughRoom)&&fs(nn,We)}d?(u.text.dynamicLayoutVertexBuffer.updateData(We),rt&&u.text.globeExtVertexBuffer&&u.text.globeExtVertexBuffer.updateData(rt)):(u.icon.dynamicLayoutVertexBuffer.updateData(We),rt&&u.icon.globeExtVertexBuffer&&u.icon.globeExtVertexBuffer.updateData(rt))}function yu(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We){const{lineStartIndex:rt,glyphStartIndex:it,segment:kt}=k,qt=it+k.numGlyphs,Qt=rt+k.lineLength,vn=t.getoffsetX(it),on=t.getoffsetX(qt-1),dn=Dl(u*vn,o,d,v,b,A,kt,rt,Qt,Z,q,re,fe,pe,!0,Te,et,We);if(!dn)return null;const nn=Dl(u*on,o,d,v,b,A,kt,rt,Qt,Z,q,re,fe,pe,!0,Te,et,We);return nn?{first:dn,last:nn}:null}function Fs(u,t,o,d){return u===n.bq.horizontal&&Math.abs(d)>Math.abs(o)?{useVertical:!0}:u===n.bq.vertical?d>0?{needsFlipping:!0}:null:t!==zs.unknown&&function(v,b){return v===0||Math.abs(b/v)>Cs}(o,d)?t===zs.flipRequired?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function bs(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it,kt){const qt=t/24,Qt=u.lineOffsetX*qt,vn=u.lineOffsetY*qt,{lineStartIndex:on,glyphStartIndex:dn,numGlyphs:nn,segment:Rn,writingMode:$n,flipState:Pr}=u,dr=on+u.lineLength,Or=kr=>{if(re){const[ir,Fr,Cr]=kr.up,xi=q.length;n.bs(re,xi+0,ir,Fr,Cr),n.bs(re,xi+1,ir,Fr,Cr),n.bs(re,xi+2,ir,Fr,Cr),n.bs(re,xi+3,ir,Fr,Cr)}const[Yn,Mr,ti]=kr.point;n.bt(q,Yn,Mr,ti,kr.angle)};if(nn>1){const kr=yu(qt,k,Qt,vn,o,fe,pe,u,Z,b,Te,We,!1,rt,it,kt);if(!kr)return{notEnoughRoom:!0};if(d&&!o){let[Yn,Mr,ti]=kr.first.point,[ir,Fr,Cr]=kr.last.point;[Yn,Mr]=la(Yn,Mr,ti,A),[ir,Fr]=la(ir,Fr,Cr,A);const xi=Fs($n,Pr,(ir-Yn)*et,Fr-Mr);if(u.flipState=xi&&xi.needsFlipping?zs.flipRequired:zs.flipNotRequired,xi)return xi}Or(kr.first);for(let Yn=dn+1;Yn<dn+nn-1;Yn++){const Mr=Dl(qt*k.getoffsetX(Yn),Qt,vn,o,fe,pe,Rn,on,dr,Z,b,Te,We,!1,!1,rt,it,kt);if(!Mr)return q.length-=4*(Yn-dn),{notEnoughRoom:!0};Or(Mr)}Or(kr.last)}else{if(d&&!o){const Yn=la(pe.x,pe.y,0,v),Mr=on+Rn+1,ti=new n.P(Z.getx(Mr),Z.gety(Mr)),ir=la(ti.x,ti.y,0,v),Fr=ir[3]>0?ir:Gl(pe,ti,Yn,1,v,void 0,rt,it.canonical),Cr=Fs($n,Pr,(Fr[0]-Yn[0])*et,Fr[1]-Yn[1]);if(u.flipState=Cr&&Cr.needsFlipping?zs.flipRequired:zs.flipNotRequired,Cr)return Cr}const kr=Dl(qt*k.getoffsetX(dn),Qt,vn,o,fe,pe,Rn,on,dr,Z,b,Te,We,!1,!1,rt,it,kt);if(!kr)return{notEnoughRoom:!0};Or(kr)}return{}}function cs(u,t,o,d,v){const{x:b,y:A,z:k}=d.projectTilePoint(u.x,u.y,t);if(!v)return la(b,A,k,o);const[Z,q,re]=v(u);return la(b+Z,A+q,k+re,o)}function Gl(u,t,o,d,v,b,A,k){const Z=cs(u.sub(t)._unit()._add(u),k,v,A,b);return n.ab.vec3.sub(Z,o,Z),n.ab.vec3.normalize(Z,Z),n.ab.vec3.scaleAndAdd(Z,o,Z,d)}function Dl(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it){const kt=d?u-t:u+t;let qt=kt>0?1:-1,Qt=0;d&&(qt*=-1,Qt=Math.PI),qt<0&&(Qt+=Math.PI);let vn=k+A+(qt>0?0:1)|0,on=v,dn=v,nn=0,Rn=0;const $n=Math.abs(kt),Pr=[],dr=[];let Or=b,kr=Or;const Yn=()=>Gl(kr,Or,dn,$n-nn+1,re,pe,We,rt.canonical);for(;nn+Rn<=$n;){if(vn+=qt,vn<k||vn>=Z)return null;if(dn=on,kr=Or,Pr.push(dn),Te&&dr.push(kr),Or=new n.P(q.getx(vn),q.gety(vn)),on=fe[vn],!on){const mi=cs(Or,rt.canonical,re,We,pe);on=mi[3]>0?fe[vn]=mi:Yn()}nn+=Rn,Rn=n.ab.vec3.distance(dn,on)}et&&pe&&(fe[vn]&&(on=Yn(),Rn=n.ab.vec3.distance(dn,on)),fe[vn]=on);const Mr=($n-nn)/Rn,ti=Or.sub(kr)._mult(Mr)._add(kr),ir=n.ab.vec3.sub([],on,dn),Fr=n.ab.vec3.scaleAndAdd([],dn,ir,Mr);let Cr=[0,0,1],xi=ir[0],ri=ir[1];if(it&&(Cr=We.upVector(rt.canonical,ti.x,ti.y),Cr[0]!==0||Cr[1]!==0||Cr[2]!==1)){const mi=[Cr[2],0,-Cr[0]],gi=n.ab.vec3.cross([],Cr,mi);n.ab.vec3.normalize(mi,mi),n.ab.vec3.normalize(gi,gi),xi=n.ab.vec3.dot(ir,mi),ri=n.ab.vec3.dot(ir,gi)}if(o){const mi=n.ab.vec3.cross([],Cr,ir);n.ab.vec3.normalize(mi,mi),n.ab.vec3.scaleAndAdd(Fr,Fr,mi,o*qt)}const Kr=Qt+Math.atan2(ri,xi);return Pr.push(Fr),Te&&dr.push(ti),{point:Fr,angle:Kr,path:Pr,tilePath:dr,up:Cr}}function fs(u,t){const o=t.length,d=o+4*u;t.resize(d),t.float32.fill(-1/0,4*o,4*d)}function ws(u,t,o){const d=t[0],v=t[1];return u[0]=o[0]*d+o[4]*v+o[12],u[1]=o[1]*d+o[5]*v+o[13],u[3]=o[3]*d+o[7]*v+o[15],u}const ps=100;class Za{constructor(t,o,d=new Jl(t.width+200,t.height+200,25),v=new Jl(t.width+200,t.height+200,25)){this.transform=t,this.grid=d,this.ignoredGrid=v,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ps,this.screenBottomBoundary=t.height+ps,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=o}placeCollisionBox(t,o,d,v,b,A,k,Z){let q=d.projectedAnchorX,re=d.projectedAnchorY,fe=d.projectedAnchorZ;const pe=d.elevation,Te=d.tileID,et=t.getProjection();if(pe&&Te){const[on,dn,nn]=et.upVector(Te.canonical,d.tileAnchorX,d.tileAnchorY),Rn=et.upVectorScale(Te.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;q+=on*pe*Rn,re+=dn*pe*Rn,fe+=nn*pe*Rn}const We=this.projectAndGetPerspectiveRatio(k,q,re,fe,d.tileID,et.name==="globe"||!!pe||this.transform.pitch>0,et),rt=A*We.perspectiveRatio,it=(d.x1*o+v.x-d.padding)*rt+We.point.x,kt=(d.y1*o+v.y-d.padding)*rt+We.point.y,qt=(d.x2*o+v.x+d.padding)*rt+We.point.x,Qt=(d.y2*o+v.y+d.padding)*rt+We.point.y,vn=We.perspectiveRatio<=.55||We.occluded;return!this.isInsideGrid(it,kt,qt,Qt)||!b&&this.grid.hitTest(it,kt,qt,Qt,Z)||vn?{box:[],offscreen:!1,occluded:We.occluded}:{box:[it,kt,qt,Qt],offscreen:this.isOffscreen(it,kt,qt,Qt),occluded:!1}}placeCollisionCircles(t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We){const rt=[],it=this.transform.elevation,kt=t.getProjection(),qt=it?it.getAtTileOffsetFunc(We,this.transform.center.lat,this.transform.worldSize,kt):null,Qt=new n.P(d.tileAnchorX,d.tileAnchorY);let{x:vn,y:on,z:dn}=kt.projectTilePoint(Qt.x,Qt.y,We.canonical);if(qt){const[ti,ir,Fr]=qt(Qt);vn+=ti,on+=ir,dn+=Fr}const nn=kt.name==="globe",Rn=this.projectAndGetPerspectiveRatio(k,vn,on,dn,We,nn||!!it||this.transform.pitch>0,kt),{perspectiveRatio:$n}=Rn,Pr=(fe?A/$n:A*$n)/n.bw,dr=la(vn,on,dn,Z),Or=Rn.signedDistanceFromCamera>0?yu(Pr,b,d.lineOffsetX*Pr,d.lineOffsetY*Pr,!1,dr,Qt,d,v,Z,{},it&&!fe?qt:null,fe&&!!it,kt,We,fe):null;let kr=!1,Yn=!1,Mr=!0;if(Or&&!Rn.occluded){const ti=.5*Te*$n+et,ir=new n.P(-100,-100),Fr=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Cr=new Jo,{first:xi,last:ri}=Or,Kr=xi.path.length;let mi=[];for(let Li=Kr-1;Li>=1;Li--)mi.push(xi.path[Li]);for(let Li=1;Li<ri.path.length;Li++)mi.push(ri.path[Li]);const gi=2.5*ti;q&&(mi=mi.map(([Li,bo,wo],Ao)=>(qt&&!nn&&(wo=qt(Ao<Kr-1?xi.tilePath[Kr-1-Ao]:ri.tilePath[Ao-Kr+2])[2]),la(Li,bo,wo,q))),mi.some(Li=>Li[3]<=0)&&(mi=[]));let Gi=[];if(mi.length>0){let Li=1/0,bo=-1/0,wo=1/0,Ao=-1/0;for(const zo of mi)Li=Math.min(Li,zo[0]),wo=Math.min(wo,zo[1]),bo=Math.max(bo,zo[0]),Ao=Math.max(Ao,zo[1]);bo>=ir.x&&Li<=Fr.x&&Ao>=ir.y&&wo<=Fr.y&&(Gi=[mi.map(zo=>new n.P(zo[0],zo[1]))],(Li<ir.x||bo>Fr.x||wo<ir.y||Ao>Fr.y)&&(Gi=n.bu(Gi,ir.x,ir.y,Fr.x,Fr.y)))}for(const Li of Gi){Cr.reset(Li,.25*ti);let bo=0;bo=Cr.length<=.5*ti?1:Math.ceil(Cr.paddedLength/gi)+1;for(let wo=0;wo<bo;wo++){const Ao=wo/Math.max(bo-1,1),zo=Cr.lerp(Ao),Ga=zo.x+ps,ba=zo.y+ps;rt.push(Ga,ba,ti,0);const wl=Ga-ti,os=ba-ti,ia=Ga+ti,Pa=ba+ti;if(Mr=Mr&&this.isOffscreen(wl,os,ia,Pa),Yn=Yn||this.isInsideGrid(wl,os,ia,Pa),!o&&this.grid.hitTestCircle(Ga,ba,ti,pe)&&(kr=!0,!re))return{circles:[],offscreen:!1,collisionDetected:kr,occluded:!1}}}}return{circles:!re&&kr||!Yn?[]:rt,offscreen:Mr,collisionDetected:kr,occluded:Rn.occluded}}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let d=1/0,v=1/0,b=-1/0,A=-1/0;for(const re of t){const fe=new n.P(re.x+ps,re.y+ps);d=Math.min(d,fe.x),v=Math.min(v,fe.y),b=Math.max(b,fe.x),A=Math.max(A,fe.y),o.push(fe)}const k=this.grid.query(d,v,b,A).concat(this.ignoredGrid.query(d,v,b,A)),Z={},q={};for(const re of k){const fe=re.key;if(Z[fe.bucketInstanceId]===void 0&&(Z[fe.bucketInstanceId]={}),Z[fe.bucketInstanceId][fe.featureIndex])continue;const pe=[new n.P(re.x1,re.y1),new n.P(re.x2,re.y1),new n.P(re.x2,re.y2),new n.P(re.x1,re.y2)];n.bv(o,pe)&&(Z[fe.bucketInstanceId][fe.featureIndex]=!0,q[fe.bucketInstanceId]===void 0&&(q[fe.bucketInstanceId]=[]),q[fe.bucketInstanceId].push(fe.featureIndex))}return q}insertCollisionBox(t,o,d,v,b){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:v,collisionGroupID:b},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,d,v,b){const A=o?this.ignoredGrid:this.grid,k={bucketInstanceId:d,featureIndex:v,collisionGroupID:b};for(let Z=0;Z<t.length;Z+=4)A.insertCircle(k,t[Z],t[Z+1],t[Z+2])}projectAndGetPerspectiveRatio(t,o,d,v,b,A,k){const Z=[o,d,v,1];let q=!1;v||this.transform.pitch>0?(n.ab.vec4.transformMat4(Z,Z,t),this.fogState&&b&&k.name!=="globe"&&(q=function(pe,Te,et,We,rt,it){const kt=it.calculateFogTileMatrix(rt),qt=[Te,et,We];return n.ab.vec3.transformMat4(qt,qt,kt),sn(pe,n.ab.vec3.length(qt),it.pitch,it._fov)}(this.fogState,o,d,v,b.toUnwrapped(),this.transform)>.9)):ws(Z,Z,t);const re=Z[3];return{point:new n.P((Z[0]/re+1)/2*this.transform.width+ps,(-Z[1]/re+1)/2*this.transform.height+ps),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/re*.5,1.5),signedDistanceFromCamera:re,occluded:A&&Z[2]>re||q}}isOffscreen(t,o,d,v){return d<ps||t>=this.screenRightBoundary||v<ps||o>this.screenBottomBoundary}isInsideGrid(t,o,d,v){return d>=0&&t<this.gridRightBoundary&&v>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=n.ab.mat4.identity([]);return n.ab.mat4.translate(t,t,[-100,-100,0]),t}}function ru(u,t,o){const d=t.createTileMatrix(u,u.worldSize,o.toUnwrapped());return n.ab.mat4.multiply(new Float32Array(16),u.projMatrix,d)}function Es(u,t,o){if(t.projection.name===o.projection.name)return u.projMatrix;const d=o.clone();return d.setProjection(t.projection),ru(d,t.getProjection(),u)}function xu(u,t,o){return t.name===o.projection.name?u.projMatrix:ru(o,t,u)}class Yu{constructor(t,o,d,v){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):v&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class ol{constructor(t,o,d,v,b,A=!1){this.text=new Yu(t?t.text:null,o,d,b),this.icon=new Yu(t?t.icon:null,o,v,b),this.clipped=A}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sc{constructor(t,o,d,v=!1){this.text=t,this.icon=o,this.skipFade=d,this.clipped=v}}class Pu{constructor(){this.invProjMatrix=n.ab.mat4.create(),this.viewportMatrix=n.ab.mat4.create(),this.circles=[]}}class Lc{constructor(t,o,d,v,b){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=d,this.bucketIndex=v,this.tileID=b}}class Ql{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:d=>d.collisionGroupID===o}}return this.collisionGroups[t]}}function ms(u,t,o,d,v){const{horizontalAlign:b,verticalAlign:A}=n.bD(u),k=-(b-.5)*t,Z=-(A-.5)*o,q=n.bC(u,d);return new n.P(k+q[0]*v,Z+q[1]*v)}function cu(u,t,o,d,v){const b=new n.P(u,t);return o&&b._rotate(d?v:-v),b}class Tc{constructor(t,o,d,v,b,A){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new Za(this.transform,b),this.buildingIndex=A,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new Ql(d),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,o,d,v,b=1){const A=d.getBucket(o),k=d.latestFeatureIndex;if(!A||!k||o.fqid!==A.layerIds[0])return;const Z=A.layers[0].layout,q=A.layers[0].paint,re=d.collisionBoxArray,fe=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),pe=d.tileSize/n.ag,Te=d.tileID.toUnwrapped();this.transform.setProjection(A.projection);const et=(We=d.tileID,rt=A.getProjection(),it=this.transform,rt.name===this.projection?it.calculateProjMatrix(We.toUnwrapped()):ru(it,rt,We));var We,rt,it;const kt=Z.get("text-pitch-alignment")==="map",qt=Z.get("text-rotation-alignment")==="map";o.compileFilter(o.options);const Qt=o.dynamicFilter(),vn=o.dynamicFilterNeedsFeature(),on=this.transform.calculatePixelsToTileUnitsMatrix(d),dn=qi(et,d.tileID.canonical,kt,qt,this.transform,A.getProjection(),on);let nn=null;if(kt){const ti=Ta(et,d.tileID.canonical,kt,qt,this.transform,A.getProjection(),on);nn=n.ab.mat4.multiply([],this.transform.labelPlaneMatrix,ti)}let Rn=null;Qt&&d.latestFeatureIndex&&(Rn={unwrappedTileID:Te,dynamicFilter:Qt,dynamicFilterNeedsFeature:vn}),this.retainedQueryData[A.bucketInstanceId]=new Lc(A.bucketInstanceId,k,A.sourceLayerIndex,A.index,d.tileID);const[$n,Pr]=A.layers[0].layout.get("text-size-scale-range"),dr=n.aw(b,$n,Pr),[Or,kr]=Z.get("icon-size-scale-range"),Yn=n.aw(b,Or,kr),Mr={bucket:A,layout:Z,paint:q,posMatrix:et,textLabelPlaneMatrix:dn,labelToScreenMatrix:nn,clippingData:Rn,scale:fe,textPixelRatio:pe,holdingForFade:d.holdingForFade(),collisionBoxArray:re,partiallyEvaluatedTextSize:n.bp(A.textSizeData,this.transform.zoom,dr),partiallyEvaluatedIconSize:n.bp(A.iconSizeData,this.transform.zoom,Yn),collisionGroup:this.collisionGroups.get(A.sourceID),latestFeatureIndex:d.latestFeatureIndex};if(v)for(const ti of A.sortKeyRanges){const{sortKey:ir,symbolInstanceStart:Fr,symbolInstanceEnd:Cr}=ti;t.push({sortKey:ir,symbolInstanceStart:Fr,symbolInstanceEnd:Cr,parameters:Mr})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:Mr})}attemptAnchorPlacement(t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it,kt){const{textOffset0:qt,textOffset1:Qt,crossTileID:vn}=pe,on=[qt,Qt],dn=ms(t,d,v,on,b),nn=this.collisionIndex.placeCollisionBox(et,b,o,cu(dn.x,dn.y,A,k,this.transform.angle),fe,Z,q,re.predicate);if(rt){const Rn=et.getSymbolInstanceIconSize(kt,this.transform.zoom,pe.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(et,Rn,rt,cu(dn.x,dn.y,A,k,this.transform.angle),fe,Z,q,re.predicate).box.length===0)return}if(nn.box.length>0){let Rn;return this.prevPlacement&&this.prevPlacement.variableOffsets[vn]&&this.prevPlacement.placements[vn]&&this.prevPlacement.placements[vn].text&&(Rn=this.prevPlacement.variableOffsets[vn].anchor),this.variableOffsets[vn]={textOffset:on,width:d,height:v,anchor:t,textScale:b,prevAnchor:Rn},this.markUsedJustification(et,t,pe,We),et.allowVerticalPlacement&&(this.markUsedOrientation(et,We,pe),this.placedOrientations[vn]=We),{shift:dn,placedGlyphBoxes:nn}}}placeLayerBucketPart(t,o,d,v,b=1){const{bucket:A,layout:k,paint:Z,posMatrix:q,textLabelPlaneMatrix:re,labelToScreenMatrix:fe,clippingData:pe,textPixelRatio:Te,holdingForFade:et,collisionBoxArray:We,partiallyEvaluatedTextSize:rt,partiallyEvaluatedIconSize:it,collisionGroup:kt,latestFeatureIndex:qt}=t.parameters,Qt=k.get("text-optional"),vn=k.get("icon-optional"),on=k.get("text-allow-overlap"),dn=k.get("icon-allow-overlap"),nn=k.get("text-rotation-alignment")==="map",Rn=k.get("text-pitch-alignment")==="map",$n=k.get("symbol-z-elevate"),Pr=Z.get("symbol-z-offset"),dr=k.get("symbol-elevation-reference")==="sea",[Or,kr]=k.get("text-size-scale-range"),[Yn,Mr]=k.get("icon-size-scale-range"),ti=n.aw(b,Or,kr),ir=n.aw(b,Yn,Mr);this.transform.setProjection(A.projection);let Fr=on&&(dn||!A.hasIconData()||vn),Cr=dn&&(on||!A.hasTextData()||Qt);const xi=!Pr.isConstant();!A.collisionArrays&&We&&A.deserializeCollisionBoxes(We),d&&v&&A.updateCollisionDebugBuffers(this.transform.zoom,We,ti,ir);const ri=(Kr,mi,gi)=>{const{crossTileID:Gi,numVerticalGlyphVertices:Li}=Kr;let bo=null;if(pe&&pe.dynamicFilterNeedsFeature||xi){const Us=this.retainedQueryData[A.bucketInstanceId];bo=qt.loadFeature({featureIndex:Kr.featureIndex,bucketIndex:Us.bucketIndex,sourceLayerIndex:Us.sourceLayerIndex,layoutVertexArrayOffset:0})}if(pe&&!(0,pe.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},bo,this.retainedQueryData[A.bucketInstanceId].tileID.canonical,new n.P(Kr.tileAnchorX,Kr.tileAnchorY),this.transform.calculateDistanceTileData(pe.unwrappedTileID)))return this.placements[Gi]=new Sc(!1,!1,!1,!0),void o.add(Gi);const wo=Pr.evaluate(bo,{});if(o.has(Gi))return;if(et)return void(this.placements[Gi]=new Sc(!1,!1,!1));let Ao=!1,zo=!1,Ga=!0,ba=!1,wl=!1,os=null,ia={box:null,offscreen:null,occluded:null},Pa={box:null,offscreen:null,occluded:null},uo=null,na=null,Ya=null,Ia=0,Ms=0,$u=0;gi.textFeatureIndex?Ia=gi.textFeatureIndex:Kr.useRuntimeCollisionCircles&&(Ia=Kr.featureIndex),gi.verticalTextFeatureIndex&&(Ms=gi.verticalTextFeatureIndex);const xl=Us=>{Us.tileID=this.retainedQueryData[A.bucketInstanceId].tileID;const gs=this.transform.elevation;Us.elevation=dr?wo:wo+(gs?gs.getAtTileOffset(Us.tileID,Us.tileAnchorX,Us.tileAnchorY):0),Us.elevation+=Kr.zOffset},lu=gi.textBox;if(lu){xl(lu);const Us=Xa=>{let El=n.bq.horizontal;if(A.allowVerticalPlacement&&!Xa&&this.prevPlacement){const Wu=this.prevPlacement.placedOrientations[Gi];Wu&&(this.placedOrientations[Gi]=Wu,El=Wu,this.markUsedOrientation(A,El,Kr))}return El},gs=(Xa,El)=>{if(A.allowVerticalPlacement&&Li>0&&gi.verticalTextBox){for(const Wu of A.writingModes)if(Wu===n.bq.vertical?(ia=El(),Pa=ia):ia=Xa(),ia&&ia.box&&ia.box.length)break}else ia=Xa()};if(k.get("text-variable-anchor")){let Xa=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Gi]){const Vs=this.prevPlacement.variableOffsets[Gi];Xa.indexOf(Vs.anchor)>0&&(Xa=Xa.filter(hc=>hc!==Vs.anchor),Xa.unshift(Vs.anchor))}const El=(Vs,hc,qc)=>{const ed=A.getSymbolInstanceTextSize(rt,Kr,this.transform.zoom,mi),td=(Vs.x2-Vs.x1)*ed+2*Vs.padding,Hd=(Vs.y2-Vs.y1)*ed+2*Vs.padding,ud=Kr.hasIconTextFit&&!dn?hc:null;ud&&xl(ud);let ec={box:[],offscreen:!1,occluded:!1};const Kh=on?2*Xa.length:Xa.length;for(let tc=0;tc<Kh;++tc){const Yh=this.attemptAnchorPlacement(Xa[tc%Xa.length],Vs,td,Hd,ed,nn,Rn,Te,q,kt,tc>=Xa.length,Kr,mi,A,qc,ud,rt,it);if(Yh&&(ec=Yh.placedGlyphBoxes,ec&&ec.box&&ec.box.length)){Ao=!0,os=Yh.shift;break}}return ec};gs(()=>El(lu,gi.iconBox,n.bq.horizontal),()=>{const Vs=gi.verticalTextBox;return Vs&&xl(Vs),A.allowVerticalPlacement&&!(ia&&ia.box&&ia.box.length)&&Li>0&&Vs?El(Vs,gi.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),ia&&(Ao=ia.box,Ga=ia.offscreen,ba=ia.occluded);const Wu=Us(!(!ia||!ia.box));if(!Ao&&this.prevPlacement){const Vs=this.prevPlacement.variableOffsets[Gi];Vs&&(this.variableOffsets[Gi]=Vs,this.markUsedJustification(A,Vs.anchor,Kr,Wu))}}else{const Xa=(El,Wu)=>{const Vs=A.getSymbolInstanceTextSize(rt,Kr,this.transform.zoom,mi,b),hc=this.collisionIndex.placeCollisionBox(A,Vs,El,new n.P(0,0),on,Te,q,kt.predicate);return hc&&hc.box&&hc.box.length&&(this.markUsedOrientation(A,Wu,Kr),this.placedOrientations[Gi]=Wu),hc};gs(()=>Xa(lu,n.bq.horizontal),()=>{const El=gi.verticalTextBox;return A.allowVerticalPlacement&&Li>0&&El?(xl(El),Xa(El,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Us(!!(ia&&ia.box&&ia.box.length))}}if(uo=ia,Ao=uo&&uo.box&&uo.box.length>0,Ga=uo&&uo.offscreen,ba=uo&&uo.occluded,Kr.useRuntimeCollisionCircles){const Us=A.text.placedSymbolArray.get(Kr.centerJustifiedTextSymbolIndex>=0?Kr.centerJustifiedTextSymbolIndex:Kr.verticalPlacedTextSymbolIndex),gs=n.br(A.textSizeData,rt,Us),Xa=k.get("text-padding");na=this.collisionIndex.placeCollisionCircles(A,on,Us,A.lineVertexArray,A.glyphOffsetArray,gs,q,re,fe,d,Rn,kt.predicate,Kr.collisionCircleDiameter*gs/n.bw,Xa,this.retainedQueryData[A.bucketInstanceId].tileID),Ao=on||na.circles.length>0&&!na.collisionDetected,Ga=Ga&&na.offscreen,ba=na.occluded}if(gi.iconFeatureIndex&&($u=gi.iconFeatureIndex),gi.iconBox){const Us=gs=>{xl(gs);const Xa=Kr.hasIconTextFit&&os?cu(os.x,os.y,nn,Rn,this.transform.angle):new n.P(0,0),El=A.getSymbolInstanceIconSize(it,this.transform.zoom,Kr.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(A,El,gs,Xa,dn,Te,q,kt.predicate)};Pa&&Pa.box&&Pa.box.length&&gi.verticalIconBox?(Ya=Us(gi.verticalIconBox),zo=Ya.box.length>0):(Ya=Us(gi.iconBox),zo=Ya.box.length>0),Ga=Ga&&Ya.offscreen,wl=Ya.occluded}const Zu=Qt||Kr.numHorizontalGlyphVertices===0&&Li===0,Mu=vn||Kr.numIconVertices===0;if(Zu||Mu?Mu?Zu||(zo=zo&&Ao):Ao=zo&&Ao:zo=Ao=zo&&Ao,Ao&&uo&&uo.box&&this.collisionIndex.insertCollisionBox(uo.box,k.get("text-ignore-placement"),A.bucketInstanceId,Pa&&Pa.box&&Ms?Ms:Ia,kt.ID),zo&&Ya&&this.collisionIndex.insertCollisionBox(Ya.box,k.get("icon-ignore-placement"),A.bucketInstanceId,$u,kt.ID),na&&(Ao&&this.collisionIndex.insertCollisionCircles(na.circles,k.get("text-ignore-placement"),A.bucketInstanceId,Ia,kt.ID),d)){const Us=A.bucketInstanceId;let gs=this.collisionCircleArrays[Us];gs===void 0&&(gs=this.collisionCircleArrays[Us]=new Pu);for(let Xa=0;Xa<na.circles.length;Xa+=4)gs.circles.push(na.circles[Xa+0]),gs.circles.push(na.circles[Xa+1]),gs.circles.push(na.circles[Xa+2]),gs.circles.push(na.collisionDetected?1:0)}const Ws=A.projection.name!=="globe";Fr=Fr&&(Ws||!ba),Cr=Cr&&(Ws||!wl),this.placements[Gi]=new Sc(Ao||Fr,zo||Cr,Ga||A.justReloaded),o.add(Gi)};if($n&&this.buildingIndex&&(this.buildingIndex.updateZOffset(A,this.retainedQueryData[A.bucketInstanceId].tileID),A.updateZOffset()),A.sortFeaturesByY){const Kr=A.getSortedSymbolIndexes(this.transform.angle);for(let mi=Kr.length-1;mi>=0;--mi){const gi=Kr[mi];ri(A.symbolInstances.get(gi),gi,A.collisionArrays[gi])}A.hasAnyZOffset&&n.w(`${A.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(A.hasAnyZOffset){const Kr=A.getSortedIndexesByZOffset();for(let mi=0;mi<Kr.length;++mi){const gi=Kr[mi];ri(A.symbolInstances.get(gi),gi,A.collisionArrays[gi])}}else for(let Kr=t.symbolInstanceStart;Kr<t.symbolInstanceEnd;Kr++)ri(A.symbolInstances.get(Kr),Kr,A.collisionArrays[Kr]);if(d&&A.bucketInstanceId in this.collisionCircleArrays){const Kr=this.collisionCircleArrays[A.bucketInstanceId];n.ab.mat4.invert(Kr.invProjMatrix,q),Kr.viewportMatrix=this.collisionIndex.getViewportMatrix()}A.justReloaded=!1}markUsedJustification(t,o,d,v){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:Z,crossTileID:q}=d,re=n.bB(o),fe=v===n.bq.vertical?Z:re==="left"?b:re==="center"?A:re==="right"?k:-1;b>=0&&(t.text.placedSymbolArray.get(b).crossTileID=fe>=0&&b!==fe?0:q),A>=0&&(t.text.placedSymbolArray.get(A).crossTileID=fe>=0&&A!==fe?0:q),k>=0&&(t.text.placedSymbolArray.get(k).crossTileID=fe>=0&&k!==fe?0:q),Z>=0&&(t.text.placedSymbolArray.get(Z).crossTileID=fe>=0&&Z!==fe?0:q)}markUsedOrientation(t,o,d){const v=o===n.bq.horizontal||o===n.bq.horizontalOnly?o:0,b=o===n.bq.vertical?o:0,{leftJustifiedTextSymbolIndex:A,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:Z,verticalPlacedTextSymbolIndex:q}=d,re=t.text.placedSymbolArray;A>=0&&(re.get(A).placedOrientation=v),k>=0&&(re.get(k).placedOrientation=v),Z>=0&&(re.get(Z).placedOrientation=v),q>=0&&(re.get(q).placedOrientation=b)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let d=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const v=o?o.symbolFadeChange(t):1,b=o?o.opacities:{},A=o?o.variableOffsets:{},k=o?o.placedOrientations:{};for(const Z in this.placements){const q=this.placements[Z],re=b[Z];re?(this.opacities[Z]=new ol(re,v,q.text,q.icon,null,q.clipped),d=d||q.text!==re.text.placed||q.icon!==re.icon.placed):(this.opacities[Z]=new ol(null,v,q.text,q.icon,q.skipFade,q.clipped),d=d||q.text||q.icon)}for(const Z in b){const q=b[Z];if(!this.opacities[Z]){const re=new ol(q,v,!1,!1);re.isHidden()||(this.opacities[Z]=re,d=d||q.text.placed||q.icon.placed)}}for(const Z in A)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=A[Z]);for(const Z in k)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=k[Z]);d?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o,d,v){const b=new Set;for(const A of o){const k=A.getBucket(t);k&&A.latestFeatureIndex&&t.fqid===k.layerIds[0]&&(this.updateBucketOpacities(k,b,A,A.collisionBoxArray,d,v,A.tileID,t.scope),k.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(k,A.tileID),k.updateZOffset()))}}updateBucketOpacities(t,o,d,v,b,A,k,Z){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const q=t.layers[0].layout,re=t.layers[0].paint,fe=!!t.layers[0].dynamicFilter(),pe=new ol(null,0,!1,!1,!0),Te=q.get("text-allow-overlap"),et=q.get("icon-allow-overlap"),We=q.get("text-variable-anchor"),rt=q.get("text-rotation-alignment")==="map",it=q.get("text-pitch-alignment")==="map",kt=re.get("symbol-z-offset"),qt=q.get("symbol-elevation-reference")==="sea",Qt=!kt.isConstant(),vn=new ol(null,0,Te&&(et||!t.hasIconData()||q.get("icon-optional")),et&&(Te||!t.hasTextData()||q.get("text-optional")),!0);!t.collisionArrays&&v&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(v);const on=(nn,Rn,$n)=>{for(let Pr=0;Pr<Rn/4;Pr++)nn.opacityVertexArray.emplaceBack($n)};let dn=0;A&&t.updateReplacement(k,A);for(let nn=0;nn<t.symbolInstances.length;nn++){const Rn=t.symbolInstances.get(nn),{numHorizontalGlyphVertices:$n,numVerticalGlyphVertices:Pr,crossTileID:dr,numIconVertices:Or,tileAnchorX:kr,tileAnchorY:Yn}=Rn;let Mr=null;const ti=this.retainedQueryData[t.bucketInstanceId];Qt&&Rn&&ti&&(Mr=d.latestFeatureIndex.loadFeature({featureIndex:Rn.featureIndex,bucketIndex:ti.bucketIndex,sourceLayerIndex:ti.sourceLayerIndex,layoutVertexArrayOffset:0}));const ir=kt.evaluate(Mr,{}),Fr=o.has(dr);let Cr=this.opacities[dr];Fr?Cr=pe:Cr||(Cr=vn,this.opacities[dr]=Cr),o.add(dr);const xi=$n>0||Pr>0,ri=Or>0,Kr=this.placedOrientations[dr],mi=Kr===n.bq.vertical,gi=Kr===n.bq.horizontal||Kr===n.bq.horizontalOnly;!xi&&!ri||Cr.isHidden()||dn++;let Gi=!1;if((xi||ri)&&A)for(const Li of t.activeReplacements){if(n.bx(Li,b,n.by.Symbol,Z)||Li.min.x>kr||kr>Li.max.x||Li.min.y>Yn||Yn>Li.max.y)continue;const bo=n.bz(kr,Yn,k.canonical,Li.footprintTileId.canonical);if(Gi=n.bA(bo,Li.footprint),Gi)break}if(xi){const Li=Gi?Al:Cl(Cr.text);on(t.text,$n,mi?Al:Li),on(t.text,Pr,gi?Al:Li);const bo=Cr.text.isHidden(),{leftJustifiedTextSymbolIndex:wo,centerJustifiedTextSymbolIndex:Ao,rightJustifiedTextSymbolIndex:zo,verticalPlacedTextSymbolIndex:Ga}=Rn,ba=t.text.placedSymbolArray,wl=bo||mi?1:0;wo>=0&&(ba.get(wo).hidden=wl),Ao>=0&&(ba.get(Ao).hidden=wl),zo>=0&&(ba.get(zo).hidden=wl),Ga>=0&&(ba.get(Ga).hidden=bo||gi?1:0);const os=this.variableOffsets[dr];os&&this.markUsedJustification(t,os.anchor,Rn,Kr);const ia=this.placedOrientations[dr];ia&&(this.markUsedJustification(t,"left",Rn,ia),this.markUsedOrientation(t,ia,Rn))}if(ri){const Li=Gi?Al:Cl(Cr.icon),{placedIconSymbolIndex:bo,verticalPlacedIconSymbolIndex:wo}=Rn,Ao=t.icon.placedSymbolArray,zo=Cr.icon.isHidden()?1:0;bo>=0&&(on(t.icon,Or,mi?Al:Li),Ao.get(bo).hidden=zo),wo>=0&&(on(t.icon,Rn.numVerticalIconVertices,gi?Al:Li),Ao.get(wo).hidden=zo)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Li=t.collisionArrays[nn];if(Li){let bo=new n.P(0,0),wo=!0;if(Li.textBox||Li.verticalTextBox){if(We){const zo=this.variableOffsets[dr];zo?(bo=ms(zo.anchor,zo.width,zo.height,zo.textOffset,zo.textScale),rt&&bo._rotate(it?this.transform.angle:-this.transform.angle)):wo=!1}fe&&(wo=!Cr.clipped),Li.textBox&&Ic(t.textCollisionBox.collisionVertexArray,Cr.text.placed,!wo||mi,ir,qt,bo.x,bo.y),Li.verticalTextBox&&Ic(t.textCollisionBox.collisionVertexArray,Cr.text.placed,!wo||gi,ir,qt,bo.x,bo.y)}const Ao=wo&&!!(!gi&&Li.verticalIconBox);Li.iconBox&&Ic(t.iconCollisionBox.collisionVertexArray,Cr.icon.placed,Ao,ir,qt,Rn.hasIconTextFit?bo.x:0,Rn.hasIconTextFit?bo.y:0),Li.verticalIconBox&&Ic(t.iconCollisionBox.collisionVertexArray,Cr.icon.placed,!Ao,ir,qt,Rn.hasIconTextFit?bo.x:0,Rn.hasIconTextFit?bo.y:0)}}}if(t.fullyClipped=dn===0,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const nn=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=nn.invProjMatrix,t.placementViewportMatrix=nn.viewportMatrix,t.collisionCircleArray=nn.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const d=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*d>t}setStale(){this.stale=!0}}function Ic(u,t,o,d,v,b,A){u.emplaceBack(t?1:0,o?1:0,b||0,A||0,d,v?1:0),u.emplaceBack(t?1:0,o?1:0,b||0,A||0,d,v?1:0),u.emplaceBack(t?1:0,o?1:0,b||0,A||0,d,v?1:0),u.emplaceBack(t?1:0,o?1:0,b||0,A||0,d,v?1:0)}const bu=Math.pow(2,25),Dc=Math.pow(2,24),kc=Math.pow(2,17),du=Math.pow(2,16),ql=Math.pow(2,9),wu=Math.pow(2,8),Qs=Math.pow(2,1);function Cl(u){if(u.opacity===0&&!u.placed)return 0;if(u.opacity===1&&u.placed)return 4294967295;const t=u.placed?1:0,o=Math.floor(127*u.opacity);return o*bu+t*Dc+o*kc+t*du+o*ql+t*wu+o*Qs+t}const Al=0;class eu{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&t.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(t,o,d,v,b,A){const k=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(k,v,t[this._currentTileIndex],this._sortAcrossTiles,A),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((Z,q)=>Z.sortKey-q.sortKey));this._currentPartIndex<k.length;){const Z=k[this._currentPartIndex];if(o.placeLayerBucketPart(Z,this._seenCrossTileIDs,d,Z.symbolInstanceStart===0,A),this._currentPartIndex++,b())return!0}return!1}}class Eu{constructor(t,o,d,v,b,A,k,Z,q){this.placement=new Tc(t,b,A,k,Z,q),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(t,o,d,v,b){const A=n.q.now(),k=()=>{const Z=n.q.now()-A;return!this._forceFullPlacement&&Z>2};for(;this._currentPlacementIndex>=0;){const Z=o[t[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(Z.type==="symbol"&&(!Z.minzoom||Z.minzoom<=q)&&(!Z.maxzoom||Z.maxzoom>q)){const re=Z,fe=re.layout.get("symbol-z-elevate"),pe=re.layout.get("symbol-sort-key").constantOr(1)!==void 0,Te=re.layout.get("symbol-z-order"),et=Te==="viewport-y"||Te==="auto"&&!(Te!=="viewport-y"&&pe),We=re.layout.get("text-allow-overlap")||re.layout.get("icon-allow-overlap")||re.layout.get("text-ignore-placement")||re.layout.get("icon-ignore-placement"),rt=et&&We,it=this._inProgressLayer=this._inProgressLayer||new eu(re),kt=n.aC(Z.source,Z.scope);if(it.continuePlacement(fe||rt?v[kt]:d[kt],this.placement,this._showCollisionBoxes,Z,k,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Nc=512/n.ag/2;class Mc{constructor(t,o,d){this.tileID=t,this.bucketInstanceId=d,this.index=new n.bE(o.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=t.canonical.x*n.ag,b=t.canonical.y*n.ag;for(let A=0;A<o.length;A++){const{key:k,crossTileID:Z,tileAnchorX:q,tileAnchorY:re}=o.get(A),fe=Math.floor((v+q)*Nc),pe=Math.floor((b+re)*Nc);this.index.add(fe,pe),this.keys.push(k),this.crossTileIDs.push(Z)}this.index.finish()}findMatches(t,o,d){const v=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),b=Nc/Math.pow(2,o.canonical.z-this.tileID.canonical.z),A=o.canonical.x*n.ag,k=o.canonical.y*n.ag;for(let Z=0;Z<t.length;Z++){const q=t.get(Z);if(q.crossTileID)continue;const{key:re,tileAnchorX:fe,tileAnchorY:pe}=q,Te=Math.floor((A+fe)*b),et=Math.floor((k+pe)*b),We=this.index.range(Te-v,et-v,Te+v,et+v);for(const rt of We){const it=this.crossTileIDs[rt];if(this.keys[rt]===re&&!d.has(it)){d.add(it),q.crossTileID=it;break}}}}}class fd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ad{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const d in this.indexes){const v=this.indexes[d],b={};for(const A in v){const k=v[A];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+o),b[k.tileID.key]=k}this.indexes[d]=b}this.lng=t}addBucket(t,o,d){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let b=0;b<o.symbolInstances.length;b++)o.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);const v=this.usedCrossTileIDs[t.overscaledZ];for(const b in this.indexes){const A=this.indexes[b];if(Number(b)>t.overscaledZ)for(const k in A){const Z=A[k];Z.tileID.isChildOf(t)&&Z.findMatches(o.symbolInstances,t,v)}else{const k=A[t.scaledTo(Number(b)).key];k&&k.findMatches(o.symbolInstances,t,v)}}for(let b=0;b<o.symbolInstances.length;b++){const A=o.symbolInstances.get(b);A.crossTileID||(A.crossTileID=d.generate(),v.add(A.crossTileID))}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Mc(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const d of o.crossTileIDs)this.usedCrossTileIDs[t].delete(d)}removeStaleBuckets(t){let o=!1;for(const d in this.indexes){const v=this.indexes[d];for(const b in v)t[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,v[b]),delete v[b],o=!0)}return o}}class jo{constructor(){this.layerIndexes={},this.crossTileIDs=new fd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,d,v){let b=this.layerIndexes[t.fqid];b===void 0&&(b=this.layerIndexes[t.fqid]=new Ad);let A=!1;const k={};v.name!=="globe"&&b.handleWrapJump(d);for(const Z of o){const q=Z.getBucket(t);q&&t.fqid===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(Z.tileID,q,this.crossTileIDs)&&(A=!0),k[q.bucketInstanceId]=!0)}return b.removeStaleBuckets(k)&&(A=!0),A}pruneUnusedLayers(t){const o={};t.forEach(d=>{o[d]=!0});for(const d in this.layerIndexes)o[d]||delete this.layerIndexes[d]}}const aa=771;class go{constructor(t,o,d,v){this.blendFunction=t,this.blendColor=o,this.mask=d,this.blendEquation=v}}go.Replace=[1,0,1,0],go.disabled=new go(go.Replace,n.aj.transparent,[!1,!1,!1,!1]),go.unblended=new go(go.Replace,n.aj.transparent,[!0,!0,!0,!0]),go.alphaBlended=new go([1,aa,1,aa],n.aj.transparent,[!0,!0,!0,!0]),go.alphaBlendedNonPremultiplied=new go([770,aa,770,aa],n.aj.transparent,[!0,!0,!0,!0]),go.multiply=new go([774,0,774,0],n.aj.transparent,[!0,!0,!0,!0]);class Ui{constructor(t,o,d){this.func=t,this.mask=o,this.range=d}}Ui.ReadOnly=!1,Ui.ReadWrite=!0,Ui.disabled=new Ui(519,Ui.ReadOnly,[0,1]);const qs=7680;class Io{constructor(t,o,d,v,b,A){this.test=t,this.ref=o,this.mask=d,this.fail=v,this.depthFail=b,this.pass=A}}Io.disabled=new Io({func:519,mask:0},0,0,qs,qs,qs);const Nu=1029,Cc=2305;class Mo{constructor(t,o,d){this.enable=t,this.mode=o,this.frontFace=d}}function Zc(u,t){const o=n.bG(u,3);n.ab.mat4.fromQuat(u,t),n.bI(u,3,o)}function gc(u,t){const o=n.ab.quat.identity([]);return n.ab.quat.rotateZ(o,o,-t),n.ab.quat.rotateX(o,o,-u),o}function Pd(u,t){const o=[u[0],u[1],0],d=[t[0],t[1],0];if(n.ab.vec3.length(o)>=1e-15){const A=n.ab.vec3.normalize([],o);n.ab.vec3.scale(d,A,n.ab.vec3.dot(d,A)),t[0]=d[0],t[1]=d[1]}const v=n.ab.vec3.cross([],t,u);if(n.ab.vec3.len(v)<1e-15)return null;const b=Math.atan2(-v[1],v[0]);return gc(Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2]),b)}Mo.disabled=new Mo(!1,Nu,Cc),Mo.backCCW=new Mo(!0,Nu,Cc),Mo.backCW=new Mo(!0,Nu,2304),Mo.frontCW=new Mo(!0,1028,2304),Mo.frontCCW=new Mo(!0,1028,Cc);class Wc{constructor(t,o){this.position=t,this.orientation=o}get position(){return this._position}set position(t){if(t){const o=t instanceof n.aa?t:new n.aa(t[0],t[1],t[2]);this._renderWorldCopies&&(o.x=n.bF(o.x,0,1)),this._position=o}else this._position=null}lookAtPoint(t,o){if(this.orientation=null,!this.position)return;const d=this.position,v=this._elevation?this._elevation.getAtPointOrZero(n.aa.fromLngLat(t)):0,b=n.aa.fromLngLat(t,v),A=[b.x-d.x,b.y-d.y,b.z-d.z];o||(o=[0,0,1]),o[2]=Math.abs(o[2]),this.orientation=Pd(A,o)}setPitchBearing(t,o){this.orientation=gc(n.ai(t),n.ai(-o))}}class kl{constructor(t,o){this._transform=n.ab.mat4.identity([]),this.orientation=o,this.position=t}get mercatorPosition(){const t=this.position;return new n.aa(t[0],t[1],t[2])}get position(){const t=n.bG(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var o;t&&n.bI(this._transform,3,[(o=t)[0],o[1],o[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||n.ab.quat.identity([]),t&&Zc(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),o=this.right();return{bearing:Math.atan2(-o[1],o[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,o){this._orientation=gc(t,o),Zc(this._transform,this._orientation)}forward(){const t=n.bG(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=n.bG(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=n.bG(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,o){const d=new Float64Array(16);return n.ab.mat4.invert(d,this.getWorldToCamera(t,o)),d}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(t,o,d){const v=this.position;n.ab.vec3.scale(v,v,-t);const b=new Float64Array(16);return n.ab.mat4.fromScaling(b,[d,d,d]),n.ab.mat4.translate(b,b,v),b[10]*=o,b}getWorldToCamera(t,o){const d=new Float64Array(16),v=new Float64Array(4),b=this.position;return n.ab.quat.conjugate(v,this._orientation),n.ab.vec3.scale(b,b,-t),n.ab.mat4.fromQuat(d,v),n.ab.mat4.translate(d,d,b),d[1]*=-1,d[5]*=-1,d[9]*=-1,d[13]*=-1,d[8]*=o,d[9]*=o,d[10]*=o,d[11]*=o,d}getCameraToClipPerspective(t,o,d,v){const b=new Float64Array(16);return n.ab.mat4.perspective(b,t,o,d,v),b}getCameraToClipOrthographic(t,o,d,v,b,A){const k=new Float64Array(16);return n.ab.mat4.ortho(k,t,o,d,v,b,A),k}getDistanceToElevation(t,o=!1){const d=t===0?0:n.bH(t,o?n.aS(this.position[1]):this.position[1]),v=this.forward();return(d-this.position[2])/v[2]}clone(){return new kl([...this.position],[...this.orientation])}}const zt={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Ft{constructor(t=0,o=0,d=0,v=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(d)||d<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=d,this.right=v}interpolate(t,o,d){return o.top!=null&&t.top!=null&&(this.top=n.af(t.top,o.top,d)),o.bottom!=null&&t.bottom!=null&&(this.bottom=n.af(t.bottom,o.bottom,d)),o.left!=null&&t.left!=null&&(this.left=n.af(t.left,o.left,d)),o.right!=null&&t.right!=null&&(this.right=n.af(t.right,o.right,d)),this}getCenter(t,o){const d=n.aw((this.left+t-this.right)/2,0,t),v=n.aw((this.top+o-this.bottom)/2,0,o);return new n.P(d,v)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Ft(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Tn=(u,t,o)=>(1-o)*u+o*t,vr=u=>u*u*u*u*u;class cr{constructor(t,o,d,v,b,A,k){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=t||0,this._maxZoom=o||22,this._minPitch=d!=null?d:0,this._maxPitch=v!=null?v:60,this.setProjection(A),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ft,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new kl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const t=new cr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(t,o=!1){const d=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||d)&&this._updateCameraOnTerrain(),(t||d)&&this._constrainCamera(o),this._calcMatrices()}getProjection(){return n.ay(this.projection,["name","center","parallels"])}setProjection(t){this.projectionOptions=t||{name:"mercator"};const o=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const d=this.getProjection(),v=!n.bn(o,d);return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setOrthographicProjectionAtLowPitch(t){return this._orthographicProjectionAtLowPitch!==t&&(this._orthographicProjectionAtLowPitch=t,this._calcMatrices(),!0)}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const o=t!==this.projection.name;return o&&this._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const o=-t*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=n.ab.mat2.create(),n.ab.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const o=n.aw(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=n.ai(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const o=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._setZoom(o),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(t){this._tileCoverLift!==t&&(this._tileCoverLift=t)}_updateCameraOnTerrain(){const t=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,o=this.elevation&&t===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||t===Number.NEGATIVE_INFINITY&&(!o||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;o||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&d.exaggeration()&&this._centerAltitudeValidForExaggeration!==d.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*d.exaggeration(),this._centerAltitudeValidForExaggeration=d.exaggeration()):(this._centerAltitude=t||0,this._centerAltitudeValidForExaggeration=d.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,o=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],d=this.horizonLineFromTop();let v=0,b=0;for(let A=0;A<o.length;A++){const k=new n.P(o[A][0]*this.width,d+o[A][1]*(this.height-d)),Z=t.pointCoordinate(k);if(!Z)continue;const q=1/Math.hypot(Z[0]-this._camera.position[0],Z[1]-this._camera.position[1]);v+=Z[3]*q,b+=q}return b===0?NaN:v/b}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const t=this._seaLevelZoom,o=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),d=this.pixelsPerMeter/this.worldSize*o,v=this._mercatorZfromZoom(t),b=this._mercatorZfromZoom(this._maxZoom),A=Math.max(v-d,b);this._setZoom(this._zoomFromMercatorZ(A))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(t){const o=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let d;d=t.z<this._camera.position[2]?[o.x,o.y,o.z]:[t.x,t.y,t.z];const v=n.ab.vec3.length(n.ab.vec3.sub([],this._camera.position,d));return n.aw(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height||!t.position&&!t.orientation)return;this._updateCameraState();let o=!1;if(t.orientation&&!n.ab.quat.exactEquals(t.orientation,this._camera.orientation)&&(o=this._setCameraOrientation(t.orientation)),t.position){const d=[t.position.x,t.position.y,t.position.z];n.ab.vec3.exactEquals(d,this._camera.position)||(this._setCameraPosition(d),o=!0)}o&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,o=new Wc;return o.position=new n.aa(t[0],t[1],t[2]),o.orientation=this._camera.orientation,o._elevation=this.elevation,o._renderWorldCopies=this.renderWorldCopies,o}_setCameraOrientation(t){if(!n.ab.quat.length(t))return!1;n.ab.quat.normalize(t,t);const o=n.ab.vec3.transformQuat([],[0,0,-1],t),d=n.ab.vec3.transformQuat([],[0,-1,0],t);if(d[2]<0)return!1;const v=Pd(o,d);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(t){const o=this.zoomScale(this.minZoom)*this.tileSize,d=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;t[2]=n.aw(t[2],v/d,v/o),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,d){this._unmodified=!1,this._edgeInsets.interpolate(t,o,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const o=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(t){const o=[new n.bQ(0,t)];if(this.renderWorldCopies){const d=this.pointCoordinate(new n.P(0,0)),v=this.pointCoordinate(new n.P(this.width,0)),b=this.pointCoordinate(new n.P(this.width,this.height)),A=this.pointCoordinate(new n.P(0,this.height)),k=Math.floor(Math.min(d.x,v.x,b.x,A.x)),Z=Math.floor(Math.max(d.x,v.x,b.x,A.x)),q=1;for(let re=k-q;re<=Z+q;re++)re!==0&&o.push(new n.bQ(re,t))}return o}isLODDisabled(t){return(!t||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(t,o,d){let v=[];const b=d!==void 0,A=!b;if(A&&this.zoom<o||b&&d[0]===0&&d[1]===0)return v;const k=new Set,Z=(re,fe,pe,Te,et)=>{const We=n.c5(fe,re,pe,Te,et);k.has(We)||(v.push(new n.aG(re,fe,pe,Te,et)),k.add(We))};for(let re=0;re<t.length;re++){const fe=t[re];if(A&&fe.canonical.z!==o)continue;const pe=fe.canonical,Te=fe.overscaledZ,et=fe.wrap,We=1<<pe.z,rt=pe.x+1<We,it=pe.x>0,kt=pe.y+1<We,qt=pe.y>0,Qt=fe.wrap-(it?0:1),vn=fe.wrap+(rt?0:1),on=it?pe.x-1:We-1,dn=rt?pe.x+1:0;if(b)d[0]<0?(Z(Te,vn,pe.z,dn,pe.y),d[1]<0&&kt&&(Z(Te,et,pe.z,pe.x,pe.y+1),Z(Te,vn,pe.z,dn,pe.y+1)),d[1]>0&&qt&&(Z(Te,et,pe.z,pe.x,pe.y-1),Z(Te,vn,pe.z,dn,pe.y-1))):d[0]>0?(Z(Te,Qt,pe.z,on,pe.y),d[1]<0&&kt&&(Z(Te,et,pe.z,pe.x,pe.y+1),Z(Te,Qt,pe.z,on,pe.y+1)),d[1]>0&&qt&&(Z(Te,et,pe.z,pe.x,pe.y-1),Z(Te,Qt,pe.z,on,pe.y-1))):d[1]<0&&kt?Z(Te,et,pe.z,pe.x,pe.y+1):qt&&Z(Te,et,pe.z,pe.x,pe.y-1);else{const nn=fe.visibleQuadrants;1&nn&&(Z(Te,Qt,pe.z,on,pe.y),qt&&(Z(Te,et,pe.z,pe.x,pe.y-1),Z(Te,Qt,pe.z,on,pe.y-1))),2&nn&&(Z(Te,vn,pe.z,dn,pe.y),qt&&(Z(Te,et,pe.z,pe.x,pe.y-1),Z(Te,vn,pe.z,dn,pe.y-1))),4&nn&&(Z(Te,Qt,pe.z,on,pe.y),kt&&(Z(Te,et,pe.z,pe.x,pe.y+1),Z(Te,Qt,pe.z,on,pe.y+1))),8&nn&&(Z(Te,vn,pe.z,dn,pe.y),kt&&(Z(Te,et,pe.z,pe.x,pe.y+1),Z(Te,vn,pe.z,dn,pe.y+1)))}}const q=[];for(const re of v)v.some(fe=>re.isChildOf(fe))||q.push(re);if(v=q.filter(re=>!t.some(fe=>!!(re.overscaledZ<o&&fe.isChildOf(re))||re.equals(fe)||re.isChildOf(fe))),A){const re=1<<o,fe=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=[re*fe.x,re*fe.y],Te=4,et=Te*Te;v=v.filter(We=>{const rt=We.canonical.x+.5-pe[0],it=We.canonical.y+.5-pe[1];return rt*rt+it*it<et})}return v}coveringTiles(t){let o=this.coveringZoomLevel(t);const d=o,v=this.elevation&&this.elevation.exaggeration(),b=v&&!t.isTerrainDEM,A=this.projection.name==="mercator";if(t.minzoom!==void 0&&o<t.minzoom)return[];t.maxzoom!==void 0&&o>t.maxzoom&&(o=t.maxzoom);const k=this.locationCoordinate(this.center),Z=this.center.lat,q=1<<o,re=[q*k.x,q*k.y,0],fe=this.projection.name==="globe",pe=!fe,Te=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,pe),et=fe?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),We=q*n.bH(1,this.center.lat),rt=this._camera.position[2]/n.bH(1,this.center.lat),it=[q*et.x,q*et.y,rt*(pe?1:We)],kt=fe||v,qt=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),Qt=this.isLODDisabled(!0)?o:0;let vn;if(this._elevation&&t.isTerrainDEM)vn=1e4*this._elevation.exaggeration();else if(this._elevation){const ir=this._elevation.getMinMaxForVisibleTiles();vn=ir?ir.max:this._centerAltitude}else vn=this._centerAltitude;const on=t.isTerrainDEM?-vn:this._elevation?this._elevation.getMinElevationBelowMSL():0,dn=this.projection.isReprojectedInTileSpace?n.bS(this):1,nn=ir=>{const Cr=new n.aa(ir.x+25e-6,ir.y,ir.z),xi=new n.aa(ir.x,ir.y+25e-6,ir.z),ri=ir.toLngLat(),Kr=Cr.toLngLat(),mi=xi.toLngLat(),gi=this.locationCoordinate(ri),Gi=this.locationCoordinate(Kr),Li=this.locationCoordinate(mi),bo=Math.hypot(Gi.x-gi.x,Gi.y-gi.y),wo=Math.hypot(Li.x-gi.x,Li.y-gi.y);return Math.sqrt(bo*wo)*dn/25e-6},Rn=ir=>{const Fr=vn,Cr=on;return{aabb:n.bV(this,q,0,0,0,ir,Cr,Fr,this.projection),zoom:0,x:0,y:0,minZ:Cr,maxZ:Fr,wrap:ir,fullyVisible:!1}},$n=[];let Pr=[];const dr=o,Or=t.reparseOverscaled?d:o,kr=(rt-this._centerAltitude)*We,Yn=ir=>{if(!this._elevation||!ir.tileID||!A)return;const Fr=this._elevation.getMinMaxForTile(ir.tileID),Cr=ir.aabb;Fr?(Cr.min[2]=Fr.min,Cr.max[2]=Fr.max,Cr.center[2]=(Cr.min[2]+Cr.max[2])/2):(ir.shouldSplit=ti(ir),ir.shouldSplit||(Cr.min[2]=Cr.max[2]=Cr.center[2]=this._centerAltitude))},Mr=(ir,Fr)=>{if(.707*Fr<ir)return 1;const Cr=Fr/ir;return Cr/(1.4144271570014144+(Math.pow(1.1,Cr-1.4144271570014144+1)-1)/(1.1-1)-1)},ti=ir=>{if(ir.zoom<Qt)return!0;if(ir.zoom===dr)return!1;if(ir.shouldSplit!=null)return ir.shouldSplit;const Fr=ir.aabb.distanceX(it),Cr=ir.aabb.distanceY(it);let xi=kr,ri=1;if(fe){xi=ir.aabb.distanceZ(it);const wo=Math.pow(2,ir.zoom),Ao=n.aS((ir.y+1)/wo),zo=n.aS(ir.y/wo),Ga=Math.min(Math.max(Z,Ao),zo),ba=n.c9(Ga)/n.c9(Z);if(ri=Ga===Z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ba/this._mercatorScaleRatio),this.zoom<=n.c6&&ir.zoom===dr-1&&ba>=.9)return!0}else if(b&&(xi=ir.aabb.distanceZ(it)*We),this.projection.isReprojectedInTileSpace&&d<=5){const wo=Math.pow(2,ir.zoom),Ao=nn(new n.aa((ir.x+.5)/wo,(ir.y+.5)/wo));ri=Ao>.85?1:Ao}if(!A){const wo=Math.sqrt(Fr*Fr+Cr*Cr+xi*xi);let Ao=(1<<dr-ir.zoom)*qt*ri;return Ao*=Mr(Math.max(xi,kr),wo),wo<Ao}let Kr=Number.MAX_VALUE,mi=0;const gi=ir.aabb.getCorners(),Gi=[];for(const wo of gi){n.ab.vec3.sub(Gi,wo,it),fe||(b?Gi[2]*=We:Gi[2]=kr);const Ao=n.ab.vec3.dot(Gi,this._camera.forward());Ao<Kr&&(Kr=Ao,mi=Math.abs(Gi[2]))}let Li=(1<<dr-ir.zoom)*qt*ri;if(Li*=Mr(Math.max(mi,kr),Kr),Kr<Li)return!0;const bo=ir.aabb.closestPoint(re);return bo[0]===re[0]&&bo[1]===re[1]};if(this.renderWorldCopies)for(let ir=1;ir<=3;ir++)$n.push(Rn(-ir)),$n.push(Rn(ir));for($n.push(Rn(0));$n.length>0;){const ir=$n.pop(),Fr=ir.x,Cr=ir.y;let xi=ir.fullyVisible;const ri=()=>this.projection.name==="globe"&&(ir.y===0||ir.y===(1<<ir.zoom)-1);if(!xi){let Kr=kt?ir.aabb.intersects(Te):ir.aabb.intersectsFlat(Te);if(Kr===0&&ri()){const mi=new n.bT(ir.zoom,Fr,Cr);Kr=n.bU(this,q,mi,!0).intersects(Te)}if(Kr===0)continue;xi=Kr===2}if(ir.zoom!==dr&&ti(ir))for(let Kr=0;Kr<4;Kr++){const mi=(Fr<<1)+Kr%2,gi=(Cr<<1)+(Kr>>1),Gi={aabb:A?ir.aabb.quadrant(Kr):n.bV(this,q,ir.zoom+1,mi,gi,ir.wrap,ir.minZ,ir.maxZ,this.projection),zoom:ir.zoom+1,x:mi,y:gi,wrap:ir.wrap,fullyVisible:xi,tileID:void 0,shouldSplit:void 0,minZ:ir.minZ,maxZ:ir.maxZ};b&&!fe&&(Gi.tileID=new n.aG(ir.zoom+1===dr?Or:ir.zoom+1,ir.wrap,ir.zoom+1,mi,gi),Yn(Gi)),$n.push(Gi)}else{const Kr=ir.zoom===dr?Or:ir.zoom;if(t.minzoom&&t.minzoom>Kr)continue;let mi=0;if(!xi){let bo=kt?ir.aabb.intersectsPrecise(Te):ir.aabb.intersectsPreciseFlat(Te);if(bo===0&&ri()){const wo=new n.bT(ir.zoom,Fr,Cr);bo=n.bU(this,q,wo,!0).intersectsPrecise(Te)}if(bo===0)continue;if(t.calculateQuadrantVisibility)if(Te.containsPoint(ir.aabb.center))mi=15;else for(let wo=0;wo<4;wo++)ir.aabb.quadrant(wo).intersects(Te)!==0&&(mi|=1<<wo)}const gi=re[0]-(.5+Fr+(ir.wrap<<ir.zoom))*(1<<o-ir.zoom),Gi=re[1]-.5-Cr,Li=ir.tileID?ir.tileID:new n.aG(Kr,ir.wrap,ir.zoom,Fr,Cr);t.calculateQuadrantVisibility&&(Li.visibleQuadrants=mi),Pr.push({tileID:Li,distanceSq:gi*gi+Gi*Gi})}}if(this.fogCullDistSq){const ir=this.fogCullDistSq,Fr=this.horizonLineFromTop();Pr=Pr.filter(Cr=>{const xi=[0,0,0,1],ri=[n.ag,n.ag,0,1],Kr=this.calculateFogTileMatrix(Cr.tileID.toUnwrapped());n.ab.vec4.transformMat4(xi,xi,Kr),n.ab.vec4.transformMat4(ri,ri,Kr);const mi=n.ab.vec4.min([],xi,ri),gi=n.ab.vec4.max([],xi,ri),Gi=n.bW(mi,gi);if(Gi===0)return!0;let Li=!1;const bo=this._elevation;if(bo&&Gi>ir&&Fr!==0){const wo=this.calculateProjMatrix(Cr.tileID.toUnwrapped());let Ao;t.isTerrainDEM||(Ao=bo.getMinMaxForTile(Cr.tileID)),Ao||(Ao={min:on,max:vn});const zo=n.c7(this.rotation),Ga=[zo[0]*n.ag,zo[1]*n.ag,Ao.max];n.ab.vec3.transformMat4(Ga,Ga,wo),Li=(1-Ga[1])*this.height*.5<Fr}return Gi<ir||Li})}return Pr.sort((ir,Fr)=>ir.distanceSq-Fr.distanceSq).map(ir=>ir.tileID)}resize(t,o){this.width=t,this.height=o,this.pixelsToGLUnits=[2/t,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const o=n.aw(t.lat,-n.bX,n.bX),d=this.projection.project(t.lng,o);return new n.P(d.x*this.worldSize,d.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,o){let d,v;const b=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;d=(o.x-b.x)/k,v=(o.y-b.y)/k}else{const k=this.pointCoordinate(o),Z=this.pointCoordinate(b);d=k.x-Z.x,v=k.y-Z.y}const A=this.locationCoordinate(t);this.setLocation(new n.aa(A.x-d,A.y-v))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(t,o){const d=o?n.bH(o,t.lat):void 0,v=this.projection.project(t.lng,t.lat);return new n.aa(v.x,v.y,d)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(t,o){const d=o!=null?o:this._centerAltitude,v=[t.x,t.y,0,1],b=[t.x,t.y,1,1];n.ab.vec4.transformMat4(v,v,this.pixelMatrixInverse),n.ab.vec4.transformMat4(b,b,this.pixelMatrixInverse);const A=b[3];n.ab.vec4.scale(v,v,1/v[3]),n.ab.vec4.scale(b,b,1/A);const k=v[2],Z=b[2];return{p0:v,p1:b,t:k===Z?0:(d-k)/(Z-k)}}screenPointToMercatorRay(t){const o=[t.x,t.y,0,1],d=[t.x,t.y,1,1];return n.ab.vec4.transformMat4(o,o,this.pixelMatrixInverse),n.ab.vec4.transformMat4(d,d,this.pixelMatrixInverse),n.ab.vec4.scale(o,o,1/o[3]),n.ab.vec4.scale(d,d,1/d[3]),o[2]=n.bH(o[2],this._center.lat)*this.worldSize,d[2]=n.bH(d[2],this._center.lat)*this.worldSize,n.ab.vec4.scale(o,o,1/this.worldSize),n.ab.vec4.scale(d,d,1/this.worldSize),new n.aq([o[0],o[1],o[2]],n.ab.vec3.normalize([],n.ab.vec3.sub([],d,o)))}rayIntersectionCoordinate(t){const{p0:o,p1:d,t:v}=t,b=n.bH(o[2],this._center.lat),A=n.bH(d[2],this._center.lat);return new n.aa(n.af(o[0],d[0],v)/this.worldSize,n.af(o[1],d[1],v)/this.worldSize,n.af(b,A,v))}pointCoordinate(t,o=this._centerAltitude){return this.projection.pointCoordinate(this,t.x,t.y,o)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let o=this.projection.pointCoordinate3D(this,t.x,t.y);if(o)return new n.aa(o[0],o[1],o[2]);let d=0,v=this.horizonLineFromTop();if(t.y>v)return this.pointCoordinate(t);const b=.02*v,A=t.clone();for(let k=0;k<10&&v-d>b;k++){A.y=n.af(d,v,.66);const Z=this.projection.pointCoordinate3D(this,A.x,A.y);Z?(v=A.y,o=Z):d=A.y}return o?new n.aa(o[0],o[1],o[2]):this.pointCoordinate(t)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(t);const o=this.pointCoordinate(t);return o.y>=0&&o.y<=1}_coordinatePoint(t,o){const d=o&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,v=[t.x*this.worldSize,t.y*this.worldSize,d+t.toAltitude(),1];return n.ab.vec4.transformMat4(v,v,this.pixelMatrix),v[3]>0?new n.P(v[0]/v[3],v[1]/v[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:o}=this._edgeInsets,d=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,b=this.pointLocation3D(new n.P(o,t)),A=this.pointLocation3D(new n.P(v,t)),k=this.pointLocation3D(new n.P(v,d)),Z=this.pointLocation3D(new n.P(o,d));let q=Math.min(b.lng,A.lng,k.lng,Z.lng),re=Math.max(b.lng,A.lng,k.lng,Z.lng),fe=Math.min(b.lat,A.lat,k.lat,Z.lat),pe=Math.max(b.lat,A.lat,k.lat,Z.lat);const Te=Math.pow(2,-this.zoom)/16*270,et=this.projection.name==="globe"?1:4,We=(rt,it,kt,qt,Qt)=>{const vn=(rt+kt)/2,on=(it+qt)/2,dn=new n.P(vn,on),{lng:nn,lat:Rn}=this.pointLocation3D(dn),$n=Math.max(0,q-nn,fe-Rn,nn-re,Rn-pe);q=Math.min(q,nn),re=Math.max(re,nn),fe=Math.min(fe,Rn),pe=Math.max(pe,Rn),(Qt<et||$n>Te)&&(We(rt,it,vn,on,Qt+1),We(vn,on,kt,qt,Qt+1))};if(We(o,t,v,t,1),We(v,t,v,d,1),We(v,d,o,d,1),We(o,d,o,t,1),this.projection.name==="globe"){const[rt,it]=n.bZ(this);rt?(pe=90,re=180,q=-180):it&&(fe=-90,re=180,q=-180)}return new n.az(new n.bO(q,fe),new n.bO(re,pe))}_getBoundsRectangular(t,o){const{top:d,left:v}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,A=this.width-this._edgeInsets.right,k=new n.P(v,d),Z=new n.P(A,d),q=new n.P(A,b),re=new n.P(v,b);let fe=this.pointCoordinate(k,t),pe=this.pointCoordinate(Z,t);const Te=this.pointCoordinate(q,o),et=this.pointCoordinate(re,o),We=(rt,it)=>(it.y-rt.y)/(it.x-rt.x);return fe.y>1&&pe.y>=0?fe=new n.aa((1-et.y)/We(et,fe)+et.x,1):fe.y<0&&pe.y<=1&&(fe=new n.aa(-et.y/We(et,fe)+et.x,0)),pe.y>1&&fe.y>=0?pe=new n.aa((1-Te.y)/We(Te,pe)+Te.x,1):pe.y<0&&fe.y<=1&&(pe=new n.aa(-Te.y/We(Te,pe)+Te.x,0)),new n.az().extend(this.coordinateLocation(fe)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(et)).extend(this.coordinateLocation(Te))}_getBoundsRectangularTerrain(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);const o=t.visibleDemTiles.reduce((d,v)=>{if(v.dem){const b=v.dem.tree;d.min=Math.min(d.min,b.minimums[0]),d.max=Math.max(d.max,b.maximums[0])}return d},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(o.min*t.exaggeration(),o.max*t.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(t=!0){const o=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,d=this.height/2-o*(1-this._horizonShift);return t?Math.max(0,d):d}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.at(this.minLng)*this.tileSize,this.worldMaxX=n.at(this.maxLng)*this.tileSize,this.worldMinY=n.aA(this.maxLat)*this.tileSize,this.worldMaxY=n.aA(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,o){return this.projection.createTileMatrix(this,o,t)}calculateDistanceTileData(t){const o=t.key,d=this._distanceTileDataCache;if(d[o])return d[o];const v=t.canonical,b=1/this.height,A=this.cameraWorldSize,k=A/this.zoomScale(v.z),Z=(v.x+Math.pow(2,v.z)*t.wrap)*k,q=v.y*k,re=this.point;re.x*=A/this.worldSize,re.y*=A/this.worldSize;const fe=this.angle,pe=Math.sin(-fe),Te=-Math.cos(-fe);return d[o]={bearing:[pe,Te],center:[(re.x-Z)*b,(re.y-q)*b],scale:k/n.ag*b},d[o]}calculateFogTileMatrix(t){const o=t.key,d=this._fogTileMatrixCache;if(d[o])return d[o];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return n.ab.mat4.multiply(v,this.worldToFogMatrix,v),d[o]=new Float32Array(v),d[o]}calculateProjMatrix(t,o=!1,d=!1){const v=t.key;let b;if(b=d?this._expandedProjMatrixCache:o?this._alignedProjMatrixCache:this._projMatrixCache,b[v])return b[v];const A=this.calculatePosMatrix(t,this.worldSize);let k;return k=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.expandedFarZProjMatrix:o?this.alignedProjMatrix:this.projMatrix,n.ab.mat4.multiply(A,k,A),b[v]=new Float32Array(A),b[v]}calculatePixelsToTileUnitsMatrix(t){const o=t.tileID.key,d=this._pixelsToTileUnitsCache;if(d[o])return d[o];const v=n.b_(t,this);return d[o]=v,d[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const t=1/this.worldSize,o=n.ab.mat4.fromScaling([],[t,t,t]);return n.ab.mat4.multiply(o,o,this.globeMatrix),o}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const t=this._elevation;this._updateCameraState();const o=n.bH(1,this._center.lat)*this.worldSize,d=this._computeCameraPosition(o),v=this._camera.forward(),b=n.bH(1,this._center.lat);d[2]/=b,v[2]/=b,n.ab.vec3.normalize(v,v);const A=t.raycast(d,v,t.exaggeration());if(A){const k=n.ab.vec3.scaleAndAdd([],d,v,A),Z=new n.aa(k[0],k[1],n.bH(k[2],n.aS(k[1]))),q=(Z.z+n.ab.vec3.length([Z.x-d[0],Z.y-d[1],Z.z-d[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(q),this._centerAltitude=Z.toAltitude(),this._center=this.coordinateLocation(Z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const o=this._elevation,d=n.bH(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),b=o.getAtPointOrZero(new n.aa(...v)),A=this.pixelsPerMeter/this.worldSize*b,k=this._minimumHeightOverTerrain(),Z=v[2]-A;if(Z<=k)if(Z<0||t){const q=this.locationCoordinate(this._center,this._centerAltitude),re=[v[0],v[1],q.z-v[2]],fe=n.ab.vec3.length(re);re[2]-=(k-Z)/this._pixelsPerMercatorPixel;const pe=n.ab.vec3.length(re);if(pe===0)return;n.ab.vec3.scale(re,re,fe/pe*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],q.z*this._pixelsPerMercatorPixel-re[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const pe=this.center;return pe.lat=n.aw(pe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(pe.lng=n.aw(pe.lng,this.minLng,this.maxLng)),this.center=pe,void(this._constraining=!1)}const o=this._unmodified,{x:d,y:v}=this.point;let b=0,A=d,k=v;const Z=this.width/2,q=this.height/2,re=this.worldMinY*this.scale,fe=this.worldMaxY*this.scale;if(v-q<re&&(k=re+q),v+q>fe&&(k=fe-q),fe-re<this.height&&(b=Math.max(b,this.height/(fe-re)),k=(fe+re)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const pe=this.worldMinX*this.scale,Te=this.worldMaxX*this.scale,et=this.worldSize/2-(pe+Te)/2;A=(d+et+this.worldSize)%this.worldSize-et,A-Z<pe&&(A=pe+Z),A+Z>Te&&(A=Te-Z),Te-pe<this.width&&(b=Math.max(b,this.width/(Te-pe)),A=(Te+pe)/2)}A===d&&k===v||(this.center=this.unproject(new n.P(A,k))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=o,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,o=this.projection.name==="globe",d=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const v=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?d:1,A=this._camera.getWorldToCamera(this.worldSize,b);let k;const Z=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(Z[8]=2*-t.x/this.width,Z[9]=2*t.y/this.height,this.isOrthographic){let Rn=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),$n=Rn*this.aspect,Pr=-$n,dr=-Rn;$n-=t.x,Pr-=t.x,Rn+=t.y,dr+=t.y,k=this._camera.getCameraToClipOrthographic(Pr,$n,dr,Rn,this._nearZ,this._farZ),((Or,kr,Yn,Mr)=>{for(let ti=0;ti<16;ti++)Or[ti]=Tn(kr[ti],Yn[ti],Mr)})(k,k,Z,vr(this.pitch>=15?1:this.pitch/15))}else k=Z;const q=n.ab.mat4.mul([],Z,A);let re=n.ab.mat4.mul([],k,A);if(this.projection.isReprojectedInTileSpace){const Rn=this.locationCoordinate(this.center),$n=n.ab.mat4.identity([]);n.ab.mat4.translate($n,$n,[Rn.x*this.worldSize,Rn.y*this.worldSize,0]),n.ab.mat4.multiply($n,$n,n.c0(this)),n.ab.mat4.translate($n,$n,[-Rn.x*this.worldSize,-Rn.y*this.worldSize,0]),n.ab.mat4.multiply(re,re,$n),n.ab.mat4.multiply(q,q,$n),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ab.mat4.scale([],re,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=re,this.invProjMatrix=n.ab.mat4.invert(new Float64Array(16),this.projMatrix),o){const Rn=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Rn[8]=2*-t.x/this.width,Rn[9]=2*t.y/this.height,this.expandedFarZProjMatrix=n.ab.mat4.mul([],Rn,A)}else this.expandedFarZProjMatrix=this.projMatrix;const fe=n.ab.mat4.invert([],k);this.frustumCorners=n.c2.fromInvProjectionMatrix(fe,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!o);const pe=new Float32Array(16);n.ab.mat4.identity(pe),n.ab.mat4.scale(pe,pe,[1,-1,1]),n.ab.mat4.rotateX(pe,pe,this._pitch),n.ab.mat4.rotateZ(pe,pe,this.angle);const Te=n.ab.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ab.mat4.clone(Te);const et=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Te[8]=2*-t.x/this.width,Te[9]=2*(t.y+et)/this.height,this.skyboxMatrix=n.ab.mat4.multiply(pe,Te,pe);const We=this.point,rt=We.x,it=We.y,kt=this.width%2/2,qt=this.height%2/2,Qt=Math.cos(this.angle),vn=Math.sin(this.angle),on=rt-Math.round(rt)+Qt*kt+vn*qt,dn=it-Math.round(it)+Qt*qt+vn*kt,nn=new Float64Array(re);if(n.ab.mat4.translate(nn,nn,[on>.5?on-1:on,dn>.5?dn-1:dn,0]),this.alignedProjMatrix=nn,re=n.ab.mat4.create(),n.ab.mat4.scale(re,re,[this.width/2,-this.height/2,1]),n.ab.mat4.translate(re,re,[1,-1,0]),this.labelPlaneMatrix=re,re=n.ab.mat4.create(),n.ab.mat4.scale(re,re,[1,-1,1]),n.ab.mat4.translate(re,re,[-1,-1,0]),n.ab.mat4.scale(re,re,[2/this.width,2/this.height,1]),this.glCoordMatrix=re,this.pixelMatrix=n.ab.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,q),this._calcFogMatrices(),this._distanceTileDataCache={},re=n.ab.mat4.invert(new Float64Array(16),this.pixelMatrix),!re)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=re,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const Rn=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ab.vec3.transformMat4(Rn,Rn,A),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=re;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,o=this.cameraPixelsPerMeter,d=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,b=[t,t,o];n.ab.vec3.scale(b,b,v),n.ab.vec3.scale(d,d,-1),n.ab.vec3.multiply(d,d,b);const A=n.ab.mat4.create();n.ab.mat4.translate(A,A,d),n.ab.mat4.scale(A,A,b),this.mercatorFogMatrix=A,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,o,v)}_computeCameraPosition(t){const o=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,d=this._camera.forward(),v=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*o-t/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-d[0]*b,v.y/this.worldSize-d[1]*b,t/this.worldSize*this._centerAltitude-d[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const o=this._maxCameraBoundsDistance()*Math.cos(this._pitch),d=this._camera.position[2],v=t[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(b=Math.min((o-d)/v,1)),this._camera.position=n.ab.vec3.scaleAndAdd([],this._camera.position,t,b),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,o=this._camera.forward(),{pitch:d,bearing:v}=this._camera.getPitchBearing(),b=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,A=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ai(this._maxPitch)),k=Math.max((t[2]-b)/Math.cos(d),A),Z=this._zoomFromMercatorZ(k);n.ab.vec3.scaleAndAdd(t,t,o,k),this._pitch=n.aw(d,n.ai(this.minPitch),n.ai(this.maxPitch)),this.angle=n.bF(v,-Math.PI,Math.PI),this._setZoom(n.aw(Z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.aa(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(t){let o=0,d=n.bY,v=0,b=1/0;for(;d-o>1e-6&&d>o;){const A=o+.5*(d-o),k=this.tileSize*Math.pow(2,A),Z=this.getCameraToCenterDistance(this.projection,A,k),q=this.scaleZoom(Z/(t*this.tileSize)),re=Math.abs(A-q);re<b&&(b=re,v=A),A<q?o=A:d=A}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,o){const d=Math.min(t.x,o.x),v=Math.max(t.x,o.x),b=Math.min(t.y,o.y),A=Math.max(t.y,o.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new n.P(d,b),new n.P(v,A),new n.P(d,A),new n.P(v,b)],Z=this.renderWorldCopies?-3:0,q=this.renderWorldCopies?4:1;for(const re of k){const fe=this.pointRayIntersection(re);if(fe.t<0)return!0;const pe=this.rayIntersectionCoordinate(fe);if(pe.x<Z||pe.y<0||pe.x>q||pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(t,o){const d=n.ab.vec3.length(n.ab.vec3.sub([],this._camera.position,t)),v=this._zoomFromMercatorZ(d)+o;return d-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const t=function([o,d,v],b){const A=[o,d,v,1];n.ab.vec4.transformMat4(A,A,b);const k=A[3]=Math.max(A[3],1e-6);return A[0]/=k,A[1]/=k,A[2]/=k,A}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,t))}}getCameraToCenterDistance(t,o=this.zoom,d=this.worldSize){const v=n.b$(t,o,this.width,this.height,1024),b=t.pixelSpaceConversion(this.center.lat,d,v);let A=.5/Math.tan(.5*this._fov)*this.height*b;return this.isOrthographic&&(A=Tn(1,A,vr(this.pitch>=15?1:this.pitch/15))),A}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ab.mat4.multiply(t,t,this.globeMatrix),t}getFrustum(t){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,t,this.projection.zAxisUnit==="meters")}}const Nr=(u,t)=>{if(t>0&&u.terrain&&n.w("Cutoff is currently disabled on terrain"),t<=0||u.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const o=u.transform,d=Math.max(Math.abs(o._zoom-(u.minCutoffZoom-1)),1),v=o.isLODDisabled(!1)?n.ac(60,45,o.pitch):n.ac(30,15,o.pitch),b=o._farZ-o._nearZ,A=t*o.height,k=((1-(Z=v))*o.cameraToCenterDistance+Z*(o._farZ+A))*d;var Z;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[o._nearZ,o._farZ,(k-o._nearZ)/b,(k-A-o._nearZ)/b]}}},Lr={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Qr{constructor(t,o){this.aabb=t,this.lastCascade=o}}class ui{add(t,o){const d=this.receivers[t.key];d!==void 0?(d.aabb.min[0]=Math.min(d.aabb.min[0],o.min[0]),d.aabb.min[1]=Math.min(d.aabb.min[1],o.min[1]),d.aabb.min[2]=Math.min(d.aabb.min[2],o.min[2]),d.aabb.max[0]=Math.max(d.aabb.max[0],o.max[0]),d.aabb.max[1]=Math.max(d.aabb.max[1],o.max[1]),d.aabb.max[2]=Math.max(d.aabb.max[2],o.max[2])):this.receivers[t.key]=new Qr(o,null)}clear(){this.receivers={}}get(t){return this.receivers[t.key]}computeRequiredCascades(t,o,d){const v=n.cd.fromPoints(t.points);let b=0;for(const A in this.receivers){const k=this.receivers[A];if(!k||!v.intersectsAabb(k.aabb))continue;k.aabb.min=v.closestPoint(k.aabb.min),k.aabb.max=v.closestPoint(k.aabb.max);const Z=k.aabb.getCorners();for(let q=0;q<d.length;q++){let re=!0;for(const fe of Z){const pe=[fe[0]*o,fe[1]*o,fe[2]];if(n.ab.vec3.transformMat4(pe,pe,d[q].matrix),pe[0]<-1||pe[0]>1||pe[1]<-1||pe[1]>1){re=!1;break}}if(k.lastCascade=q,b=Math.max(b,q),re)break}}return b+1}}class Ii{constructor(t){this.painter=t,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new ui,this._depthMode=new Ui(t.context.gl.LEQUAL,Ui.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,t.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),t.tp.registerParameter(Lr,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),t.tp.registerParameter(Lr,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),t.tp.registerParameter(Lr,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),t.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const t of this._cascades)t.texture.destroy(),t.framebuffer.destroy();this._cascades=[]}updateShadowParameters(t,o){const d=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!o||!o.properties)return;const v=o.properties.get("shadow-intensity");if(!o.shadowsEnabled()||v<=0||(this._shadowLayerCount=d.style.order.reduce((et,We)=>{const rt=d.style._mergedLayers[We];return et+(rt.hasShadowPass()&&!rt.isHidden(t.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const b=d.context,A=Lr.shadowMapResolution,k=Lr.shadowMapResolution;if(this._cascades.length===0||Lr.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let et=0;et<Lr.cascadeCount;++et){const We=d._shadowMapDebug,rt=b.gl,it=b.createFramebuffer(A,k,We,"texture"),kt=new n.T(b,{width:A,height:k,data:null},rt.DEPTH_COMPONENT16);if(it.depthAttachment.set(kt.texture),We){const qt=new n.T(b,{width:A,height:k,data:null},rt.RGBA8);it.colorAttachment.set(qt.texture)}this._cascades.push({framebuffer:it,texture:kt,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=Ai(o);let Z=0;if(t.elevation){const et=t.elevation,We=[1e4,-1e4];et.visibleDemTiles.filter(rt=>rt.dem).forEach(rt=>{const it=rt.dem.tree;We[0]=Math.min(We[0],it.minimums[0]),We[1]=Math.max(We[1],it.maximums[0])}),We[0]!==1e4&&(Z=(We[1]-We[0])*et.exaggeration())}const q=1.5*t.cameraToCenterDistance,re=3*q,fe=new Float64Array(16);for(let et=0;et<this._cascades.length;++et){const We=this._cascades[et];let rt=t.height/50,it=1;Lr.cascadeCount===1?it=re:et===0?it=q:(rt=q,it=re);const[kt,qt]=Ji(t,this.shadowDirection,rt,it,Lr.shadowMapResolution,Z);We.scale=t.scale,We.matrix=kt,We.boundingSphereRadius=qt,n.ab.mat4.invert(fe,We.matrix),We.frustum=n.bR.fromInvProjectionMatrix(fe,1,0,!0),We.far=it}const pe=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[pe].far,this._cascades[pe].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Lr.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Lr.shadowMapResolution,this._uniformValues.u_shadowmap_0=zt.ShadowMap0,this._uniformValues.u_shadowmap_1=zt.ShadowMap0+1,this._groundShadowTiles=d.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Te=d.transform.elevation;for(const et of this._groundShadowTiles){let We={min:0,max:0};if(Te){const rt=Te.getMinMaxForTile(et);rt&&(We=rt)}this.addShadowReceiver(et.toUnwrapped(),We.min,We.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(t){this._enabled=t}drawShadowPass(t,o){if(!this.enabled)return;const d=this.painter,v=d.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(d.transform.getFrustum(0),d.transform.worldSize,this._cascades),v.viewport.set([0,0,Lr.shadowMapResolution,Lr.shadowMapResolution]);for(let b=0;b<this._numCascadesToRender;++b){d.currentShadowCascade=b,v.bindFramebuffer.set(this._cascades[b].framebuffer.framebuffer),v.clear({color:n.aj.white,depth:1});for(const A of t.order){const k=t._mergedLayers[A];if(!k.hasShadowPass()||k.isHidden(d.transform.zoom))continue;const Z=t.getLayerSourceCache(k),q=Z?o[Z.id]:void 0;(k.type==="model"||q&&q.length)&&d.renderLayer(d,Z,k,q)}}d.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const t=this.painter,o=t.style,d=t.context,v=o.directionalLight,b=o.ambientLight;if(!v||!b)return;const A=[],k=Nr(t,t.longestCutoffRange);k.shouldRenderCutoff&&A.push("RENDER_CUTOFF"),A.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&A.push("NORMAL_OFFSET");const Z=Zi(o,v,b),q=new Ui(d.gl.LEQUAL,Ui.ReadOnly,t.depthRangeFor3D);for(const re of this._groundShadowTiles){const fe=re.toUnwrapped(),pe=t.isTileAffectedByFog(re),Te=t.getOrCreateProgram("groundShadow",{defines:A,overrideFog:pe});this.setupShadows(fe,Te),t.uploadCommonUniforms(d,Te,fe,null,k);const et={u_matrix:t.transform.calculateProjMatrix(fe),u_ground_shadow_factor:Z};Te.draw(t,d.gl.TRIANGLES,q,Io.disabled,go.multiply,Mo.disabled,et,"ground_shadow",t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments,{},t.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?go.unblended:go.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(t){const o=this.painter.transform,d=o.calculatePosMatrix(t,o.worldSize);return n.ab.mat4.multiply(d,this._cascades[this.painter.currentShadowCascade].matrix,d),Float32Array.from(d)}calculateShadowPassMatrixFromMatrix(t){return n.ab.mat4.multiply(t,this._cascades[this.painter.currentShadowCascade].matrix,t),Float32Array.from(t)}setupShadows(t,o,d,v=0){if(!this.enabled)return;const b=this.painter.transform,A=this.painter.context,k=A.gl,Z=this._uniformValues,q=new Float64Array(16),re=b.calculatePosMatrix(t,b.worldSize);for(let fe=0;fe<this._cascades.length;fe++)n.ab.mat4.multiply(q,this._cascades[fe].matrix,re),Z[fe===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(q),A.activeTexture.set(k.TEXTURE0+zt.ShadowMap0+fe),this._cascades[fe].texture.bind(k.NEAREST,k.CLAMP_TO_EDGE);if(this.useNormalOffset=!!d,this.useNormalOffset){const fe=n.cc(t.canonical),pe=2/b.tileSize*n.ag/Lr.shadowMapResolution,Te=pe*this._cascades[0].boundingSphereRadius,et=pe*this._cascades[this._cascades.length-1].boundingSphereRadius,We=(d==="vector-tile"?1:3)/Math.pow(2,v-t.canonical.z-(1-b.zoom+Math.floor(b.zoom)));Z.u_shadow_normal_offset=[fe,Te*We,et*We],Z.u_shadow_bias=[6e-5,.0012,.012]}else Z.u_shadow_bias=[36e-5,.0012,.012];o.setShadowUniformValues(A,Z)}setupShadowsFromMatrix(t,o,d=!1){if(!this.enabled)return;const v=this.painter.context,b=v.gl,A=this._uniformValues,k=new Float64Array(16);for(let Z=0;Z<Lr.cascadeCount;Z++)n.ab.mat4.multiply(k,this._cascades[Z].matrix,t),A[Z===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(k),v.activeTexture.set(b.TEXTURE0+zt.ShadowMap0+Z),this._cascades[Z].texture.bind(b.NEAREST,b.CLAMP_TO_EDGE);if(this.useNormalOffset=d,d){const Z=Lr.normalOffset;A.u_shadow_normal_offset=[1,Z,Z],A.u_shadow_bias=[6e-5,.0012,.012]}else A.u_shadow_bias=[36e-5,.0012,.012];o.setShadowUniformValues(v,A)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(t,o,d,v){if(v[2]>=0)return{};const b=function(Z,q,re){const fe=re/(1<<Z.canonical.z);return new n.cd([Z.canonical.x*fe+Z.wrap*re,Z.canonical.y*fe+Z.wrap*re,0],[(Z.canonical.x+1)*fe+Z.wrap*re,(Z.canonical.y+1)*fe+Z.wrap*re,q])}(t,o,d).getCorners(),A=o/-v[2];v[0]<0?(n.ab.vec3.add(b[0],b[0],[v[0]*A,0,0]),n.ab.vec3.add(b[3],b[3],[v[0]*A,0,0])):v[0]>0&&(n.ab.vec3.add(b[1],b[1],[v[0]*A,0,0]),n.ab.vec3.add(b[2],b[2],[v[0]*A,0,0])),v[1]<0?(n.ab.vec3.add(b[0],b[0],[0,v[1]*A,0]),n.ab.vec3.add(b[1],b[1],[0,v[1]*A,0])):v[1]>0&&(n.ab.vec3.add(b[2],b[2],[0,v[1]*A,0]),n.ab.vec3.add(b[3],b[3],[0,v[1]*A,0]));const k={};return k.vertices=b,k.planes=[Ur(b[1],b[0],b[4]),Ur(b[2],b[1],b[5]),Ur(b[3],b[2],b[6]),Ur(b[0],b[3],b[7])],k}addShadowReceiver(t,o,d){this._receivers.add(t,n.cd.fromTileIdAndHeight(t,o,d))}getMaxCascadeForTile(t){const o=this._receivers.get(t);return o&&o.lastCascade?o.lastCascade:0}}function Ur(u,t,o){const d=n.ab.vec3.sub([],o,t),v=n.ab.vec3.sub([],u,t),b=n.ab.vec3.cross([],d,v),A=n.ab.vec3.length(b);return A===0?[0,0,1,0]:(n.ab.vec3.scale(b,b,1/A),[b[0],b[1],b[2],-n.ab.vec3.dot(b,t)])}function Ai(u){const t=u.properties.get("direction"),o=n.cb(t.x,t.y,t.z);o[2]=n.aw(o[2],0,75);const d=n.ce([o[0],o[1],o[2]]);return n.ab.vec3.fromValues(d.x,d.y,d.z)}function Zi(u,t,o){const d=t.properties.get("color-use-theme")==="none",v=t.properties.get("color"),b=t.properties.get("intensity"),A=t.properties.get("direction"),k=[A.x,A.y,A.z],Z=o.properties.get("color-use-theme")==="none",q=o.properties.get("color"),re=o.properties.get("intensity"),fe=Math.max(n.ab.vec3.dot([0,0,1],k),0),pe=[0,0,0];n.ab.vec3.scale(pe,q.toRenderColor(Z?null:u.getLut(t.scope)).toArray01Linear().slice(0,3),re);const Te=[0,0,0];return n.ab.vec3.scale(Te,v.toRenderColor(d?null:u.getLut(o.scope)).toArray01Linear().slice(0,3),fe*b),n.cf([pe[0]>0?pe[0]/(pe[0]+Te[0]):0,pe[1]>0?pe[1]/(pe[1]+Te[1]):0,pe[2]>0?pe[2]/(pe[2]+Te[2]):0])}function Ji(u,t,o,d,v,b){const A=u.zoom,k=u.scale,Z=u.worldSize,q=1/Z,re=u.aspect,fe=Math.sqrt(1+re*re)*Math.tan(.5*u.fovX),pe=fe*fe,Te=d-o,et=d+o;let We,rt;pe>Te/et?(We=d,rt=d*fe):(We=.5*et*(1+pe),rt=.5*Math.sqrt(Te*Te+2*(d*d+o*o)*pe+et*et*pe*pe));const it=u.projection.pixelsPerMeter(u.center.lat,Z),kt=u._camera.getCameraToWorldMercator(),qt=[0,0,-We*q];n.ab.vec3.transformMat4(qt,qt,kt);let Qt=rt*q;const vn=u._edgeInsets;if(!(vn.left===0&&vn.top===0&&vn.right===0&&vn.bottom===0||vn.left===vn.right&&vn.top===vn.bottom)){const xi=u._camera.getWorldToCamera(u.worldSize,u.projection.zAxisUnit==="meters"?it:1),ri=u._camera.getCameraToClipPerspective(u._fov,u.width/u.height,o,d);ri[8]=2*-u.centerOffset.x/u.width,ri[9]=2*u.centerOffset.y/u.height;const Kr=new Float64Array(16);n.ab.mat4.mul(Kr,ri,xi);const mi=new Float64Array(16);n.ab.mat4.invert(mi,Kr);const gi=n.bR.fromInvProjectionMatrix(mi,Z,A,!0);for(const Gi of gi.points){const Li=((on=Gi)[0]/=k,on[1]/=k,on[2]=n.bH(on[2],u._center.lat),on);Qt=Math.max(Qt,n.ab.vec3.len(n.ab.vec3.subtract([],qt,Li)))}}var on;Qt*=v/(v-1);const dn=Math.acos(t[2]),nn=Math.atan2(-t[0],-t[1]),Rn=new kl;Rn.position=qt,Rn.setPitchBearing(dn,nn);const $n=Rn.getWorldToCamera(Z,it),Pr=Qt*Z,dr=Math.min(u._mercatorZfromZoom(17)*Z*-2,-2*Pr),Or=Rn.getCameraToClipOrthographic(-Pr,Pr,-Pr,Pr,dr,(Pr+b*it)/t[2]),kr=new Float64Array(16);n.ab.mat4.multiply(kr,Or,$n);const Yn=n.ab.vec3.fromValues(Math.floor(1e6*qt[0])/1e6*Z,Math.floor(1e6*qt[1])/1e6*Z,0),Mr=.5*v,ti=[0,0,0];n.ab.vec3.transformMat4(ti,Yn,kr),n.ab.vec3.scale(ti,ti,Mr);const ir=[Math.floor(ti[0]),Math.floor(ti[1]),Math.floor(ti[2])],Fr=[0,0,0];n.ab.vec3.sub(Fr,ti,ir),n.ab.vec3.scale(Fr,Fr,-1/Mr);const Cr=new Float64Array(16);return n.ab.mat4.identity(Cr),n.ab.mat4.translate(Cr,Cr,Fr),n.ab.mat4.multiply(kr,Cr,kr),[kr,Pr]}class no extends n.E{constructor(t){super(),this.requestManager=t,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(t,o){return n.aM(this.requestManager.transformRequest(o,n.R.Model).url).then(d=>{if(!d)return;const v=n.aN(d),b=new n.aO(t,void 0,void 0,v);return b.computeBoundsAndApplyParent(),b}).catch(d=>{if(d&&d.status===404)return null;this.fire(new n.y(new Error(`Could not load model ${t} from ${o}: ${d.message}`)))})}load(t,o,d={keepNumReferences:!1}){this.models[o]||(this.models[o]={});const v=Object.keys(t);this.numModelsLoading[o]=(this.numModelsLoading[o]||0)+v.length;const b=[];for(const A of v)b.push(this.loadModel(A,t[A]));Promise.allSettled(b).then(A=>{for(let k=0;k<A.length;k++){const{status:Z,value:q}=A[k];if(Z==="fulfilled"&&q){const re=this.models[o][v[k]];this.models[o][v[k]]={model:q,numReferences:d.keepNumReferences&&re?re.numReferences:1}}}this.numModelsLoading[o]-=v.length,this.fire(new n.z("data",{dataType:"style"}))}).catch(A=>{this.fire(new n.y(new Error(`Could not load models: ${A.message}`)))})}isLoaded(){for(const t in this.numModelsLoading)if(this.numModelsLoading[t]>0)return!1;return!0}hasModel(t,o){return!!this.getModel(t,o)}getModel(t,o){return this.models[o]||(this.models[o]={}),this.models[o][t]?this.models[o][t].model:void 0}addModel(t,o,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={}),this.hasModel(t,d)&&this.models[d][t].numReferences++,this.modelUris[d][t]=this.requestManager.normalizeModelURL(o),this.load({[t]:this.modelUris[d][t]},d)}addModels(t,o){this.models[o]||(this.models[o]={}),this.modelUris[o]||(this.modelUris[o]={});const d=this.modelUris[o];for(const v in t)this.models[o][v]={},d[v]=this.requestManager.normalizeModelURL(t[v]);this.load(d,o,{keepNumReferences:!0})}reloadModels(t){this.load(this.modelUris[t],t)}addModelsFromBucket(t,o){this.models[o]||(this.models[o]={}),this.modelUris[o]||(this.modelUris[o]={});const d={};for(const v of t)this.hasModel(v,o)?this.models[o][v].numReferences++:(this.modelUris[o][v]=this.requestManager.normalizeModelURL(v),d[v]=this.modelUris[o][v]);this.load(d,o)}removeModel(t,o){if(this.models[o]&&this.models[o][t]&&(this.models[o][t].numReferences--,this.models[o][t].numReferences===0)){const d=this.models[o][t].model;delete this.models[o][t],delete this.modelUris[o][t],d.destroy()}}listModels(t){return this.models[t]||(this.models[t]={}),Object.keys(this.models[t])}upload(t,o){this.models[o]||(this.models[o]={});for(const d in this.models[o])this.models[o][d].model&&this.models[o][d].model.upload(t.context)}}const Lo=new n.a5({data:new n.a6(n.a3.colorTheme.data)}),mo={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Po(u){return u=u||{},Object.assign(u,mo)}class I extends n.E{constructor(t){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aP(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=t,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(t=>{t.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.y(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=t.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=t.stylesheet.indoor.buildingFeaturesetId,this._scope=t.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:t=>(t.feature&&t.feature.properties.floorplan&&this.selectFloorplan(t.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(t){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(A,k){const[Z,q]=A,{center:re,radius:fe}=k,[pe,Te]=re,et=Math.abs(Z-pe);return Math.sqrt(Av(et>180?360-et:et,2)+Av(q-Te,2))<=fe}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.z("floorplangone")));const o={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},d=new n.P(this._map.transform.width/2,this._map.transform.height/2),v=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],b=this._map.queryRenderedFeatures(t?v:d,o);b.length>0&&(this._selectedFloorplan&&b[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=b[0],this._floorplanSelected(!1)))}_floorplanSelected(t){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(b){const[[A,k],[Z,q]]=b,re=(Z-A+360)%360,fe=re>180?360-re:re;return{center:[(A+fe/2+360)%360,(k+q)/2],radius:Math.sqrt(Av(fe,2)+Av(q-k,2))/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const o=this._floorplanStates[this._indoorData.id].selectedBuilding,d=this._floorplanStates[this._indoorData.id].selectedLevel;let v;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const b of this._indoorData.levels)b.id===this._selectedLevel.id&&(v=b.id);if(this.fire(new n.z("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:v})),o){const b=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(b,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(d){const b=this._indoorData.levels.find(A=>A.id===d);this._updateLevels(b,t)}else t&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(t,o){o&&t&&t.extent&&this._map.fitBounds(t.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=t?t.id:void 0;const d=this._indoorData.levels.filter(v=>t.levels.includes(v.id));this.fire(new n.z("buildingselected",{buildingId:t.id,levels:d}))}_levelSelected(t){if(t==="overview")this._updateLevels(void 0,!0);else{const o=this._indoorData.levels.find(d=>d.id===t);this._updateLevels(o,!0)}this.fire(new n.z("levelselected",{levelId:t==="overview"?void 0:t}))}_updateLevels(t,o){if(!t)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(o&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function d(q){const re=q.indexOf("/floor/");if(re===-1)return q;const fe=re+7,pe=q.indexOf("/",fe);return pe===-1?q.slice(fe):q.slice(fe,pe)}this._selectedLevel=t,this._floorplanStates[this._indoorData.id].selectedLevel=t?t.id:void 0;const v=[],b={},A={},k={},Z={};for(const q of this._indoorData.levels)if(v.push(q.id),b[q.id]=q.height,A[q.id]=q.base,t){if(this.mergeFloors){const re=d(t.id),fe=d(q.id);k[q.id]=fe===re?"true":"false"}else k[q.id]=q.id===t.id?"true":"false";Z[q.id]=q.base<t.base?"true":"false"}else Z[q.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",v]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",b]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",A]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",k]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",Z]),t&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!t.isUnderground),o&&t.extent)){const q=this._map.cameraForBounds(t.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),re=this._map.getZoom(),fe=q.zoom?Math.abs(re-q.zoom):0;this._map.fitBounds(t.extent,fe>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:re})}}selectFloorplan(t){const o={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},d=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],v=this._map.queryRenderedFeatures(d,o);if(v.length>0){for(const b of v)if(JSON.parse(b.properties["indoor-data"]).floorplanIDs.includes(t)){this._selectedFloorplan=b,this._floorplanSelected(!0);break}}}selectBuilding(t){const o=this._indoorData.buildings.find(d=>d.id===t);this._buildingSelected(o,!0)}selectLevel(t){this._levelSelected(t)}}function c(u){if(!u.metadata||!u.metadata.content_area)return;const t=n.q.devicePixelRatio,{left:o,top:d,width:v,height:b}=u.metadata.content_area,A=o*t,k=d*t;return[A,k,A+v*t,k+b*t]}function f(u){if(u)return u.map(([t,o])=>[t*n.q.devicePixelRatio,o*n.q.devicePixelRatio])}const T=(u,t)=>Tr(u,t&&t.filter(o=>o.identifier!=="source.canvas")),W=n.ay(ho,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),me=n.ay(ho,["setCenter","setZoom","setBearing","setPitch"]),ze=new Set(["background","sky","slot","custom"]),tt={version:8,layers:[],sources:{}},It={duration:300,delay:0};class ne extends n.E{constructor(t,o={}){super(),this.map=t,this.scope=o.scope||"",this.globalId=null,this.fragments=[],this.importDepth=o.importDepth||0,this.importsCache=o.importsCache||new Map,this.resolvedImports=o.resolvedImports||new Set,this.transition=n.l({},It),this._buildingIndex=new es(this),this.crossTileSymbolIndex=new jo,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=o.styleChanges||new Pn,this.dispatcher=o.dispatcher?o.dispatcher:new n.D(n.ci(),this),o.imageManager?this.imageManager=o.imageManager:(this.imageManager=new or(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=o.glyphManager?o.glyphManager:new n.cj(t._requestManager,o.localFontFamily?n.ck.all:o.localIdeographFontFamily?n.ck.ideographs:n.ck.none,o.localFontFamily||o.localIdeographFontFamily),o.modelManager?this.modelManager=o.modelManager:(this.modelManager=new no(t._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=o.configOptions?o.configOptions:new Map,this._configDependentLayers=o.configDependentLayers?o.configDependentLayers:new Set,this._config=o.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:o.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=o.initialConfig,this.dispatcher.broadcast("setReferrer",n.cl());const d=this;this._rtlTextPluginCallback=ne.registerForPluginStateChange(v=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(b,A)=>{if(n.cm(b),A&&A.every(k=>k))for(const k in d._sourceCaches){const Z=d._sourceCaches[k],q=Z.getSource().type;q!=="vector"&&q!=="geojson"||Z.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.getOwnSource(v.sourceId);if(b&&b.vectorLayerIds)for(const A in this._layers){const k=this._layers[A];k.source===b.id&&this._validateLayer(k)}})}load(t){return t?(typeof t=="string"?this.loadURL(t):this.loadJSON(t),this):this}_getGlobalId(t){if(!t)return null;if(typeof t=="string"){if(n.f(t))return t;const o=n.cn(t);if(!o.startsWith("http"))try{return new URL(o,location.href).toString()}catch(d){return o}return o}return`json://${n.co(JSON.stringify(t))}`}_diffStyle(t,o,d){this.globalId=this._getGlobalId(t);const v=(b,A)=>{try{A(null,this.setState(b,d))}catch(k){A(k,!1)}};if(typeof t=="string"){const b=this.map._requestManager.normalizeStyleURL(t),A=this.map._requestManager.transformRequest(b,n.R.Style);n.n(A,(k,Z)=>{k?this.fire(new n.y(k)):Z&&v(Z,o)})}else typeof t=="object"&&v(t,o)}loadURL(t,o={}){this.fire(new n.z("dataloading",{dataType:"style"}));const d=typeof o.validate=="boolean"?o.validate:!n.f(t);this.globalId=this._getGlobalId(t),t=this.map._requestManager.normalizeStyleURL(t,o.accessToken),this.resolvedImports.add(t);const v=this.importsCache.get(t);if(v)return this._load(v,d);const b=this.map._requestManager.transformRequest(t,n.R.Style);this._request=n.n(b,(A,k)=>{if(this._request=null,A)this.fire(new n.y(A));else if(k)return this.importsCache.set(t,k),this._load(k,d)})}loadJSON(t,o={}){this.fire(new n.z("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(t),this._request=n.q.frame(()=>{this._request=null,this._load(t,o.validate!==!1)})}loadEmpty(){this.fire(new n.z("dataloading",{dataType:"style"})),this._load(tt,!1)}_loadImports(t,o,d){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const v=[];for(const b of t){const A=this._createFragmentStyle(b),k=new Promise(re=>{A.once("style.import.load",re),A.once("error",re)}).then(()=>this.mergeAll());if(v.push(k),this.resolvedImports.has(b.url)){A.loadEmpty();continue}const Z=b.data||this.importsCache.get(b.url);Z?(A.loadJSON(Z,{validate:o}),this._isInternalStyle(Z)&&(A.globalId=null)):b.url?A.loadURL(b.url,{validate:o}):A.loadEmpty();const q={style:A,id:b.id,config:b.config};if(d){const re=this.fragments.findIndex(({id:fe})=>fe===d);this.fragments=this.fragments.slice(0,re).concat(q).concat(this.fragments.slice(re))}else this.fragments.push(q)}return Promise.allSettled(v)}getImportGlobalIds(t=this,o=new Set){for(const d of t.fragments)d.style.globalId&&o.add(d.style.globalId),this.getImportGlobalIds(d.style,o);return[...o.values()]}_createFragmentStyle(t){const o=this.scope?n.aC(t.id,this.scope):t.id;let d;const v=this._initialConfig&&this._initialConfig[o];(t.config||v)&&(d=n.l({},t.config,v));const b=new ne(this.map,{scope:o,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:d,configOptions:this.options,colorThemeOverride:t["color-theme"],configDependentLayers:this._configDependentLayers});return b.setEventedParent(this.map,{style:b}),b}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(t){return this.isRootStyle()&&(t.fragment||!!t.schema&&t.fragment!==!1)}_load(t,o){const d=t.indoor?Po(t.schema):t.schema;if(this._isInternalStyle(t)){const A=n.l({},tt,{imports:[{id:"basemap",data:t,url:""}]});return void this._load(A,o)}if(this.updateConfig(this._config,d),o&&T(this,mr(t)))return;this._loaded=!0,this.stylesheet=n.cp(t);const v=()=>{for(const q in t.sources)this.addSource(q,t.sources[q],{validate:!1,isInitialLoad:!0});t.sprite?this._loadIconset(t.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(t.glyphs,this.scope);const A=hl(this.stylesheet.layers);if(this._order=A.map(q=>q.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const q=this.stylesheet.lights[0];this.light=new Ne(q.properties,q.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Ne(this.stylesheet.light)),this._layers={};for(const q of A){const re=n.cu(q,this.scope,this._styleColorTheme.lut,this.options);re.configDependencies.size!==0&&this._configDependentLayers.add(re.fqid),re.setEventedParent(this,{layer:{id:re.id}}),this._layers[re.id]=re;const fe=this.getOwnLayerSourceCache(re),pe=!!this.directionalLight&&this.directionalLight.shadowsEnabled();fe&&re.canCastShadows()&&pe&&(fe.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const k=this.stylesheet.terrain;k&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(k,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.z("data",{dataType:"style"}));const Z=this.isRootStyle();t.imports?this._loadImports(t.imports,o).then(()=>{this._reloadImports(),this.fire(new n.z(Z?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.z(Z?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const b=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(b){const A=this._evaluateColorThemeData(b);this._loadColorTheme(A).then(()=>{v()}).catch(k=>{n.w(`Couldn't load color theme from the stylesheet: ${k}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}mergeAll(){let t,o,d,v,b,A,k,Z,q,re;const fe={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(pe=>{if(pe.stylesheet){if(pe.light!=null&&(t=pe.light),pe.stylesheet.lights)for(const Te of pe.stylesheet.lights)Te.type==="ambient"&&pe.ambientLight!=null&&(o=pe.ambientLight),Te.type==="directional"&&pe.directionalLight!=null&&(d=pe.directionalLight);v=this._prioritizeTerrain(v,pe.terrain,pe.stylesheet.terrain),pe.stylesheet.fog&&pe.fog!=null&&(b=pe.fog),pe.stylesheet.snow&&pe.snow!=null&&(A=pe.snow),pe.stylesheet.rain&&pe.rain!=null&&(k=pe.rain),pe.stylesheet.camera!=null&&(re=pe.stylesheet.camera),pe.stylesheet.projection!=null&&(Z=pe.stylesheet.projection),pe.stylesheet.transition!=null&&(q=pe.stylesheet.transition),fe[pe.scope]=pe._styleColorTheme}}),this.light=t,this.ambientLight=o,this.directionalLight=d,this.fog=b,this.snow=A,this.rain=k,this._styleColorThemeForScope=fe,v===null?delete this.terrain:this.terrain=v,this.camera=re||{"camera-projection":"perspective"},this.projection=Z||{name:"mercator"},this.transition=n.l({},It,q),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(t){const o=d=>{for(const v of d.fragments)o(v.style);t(d)};o(this)}_prioritizeTerrain(t,o,d){const v=t&&t.drapeRenderMode===0;return d===null?o&&o.drapeRenderMode===0?o:v?t:null:o!=null&&(!t||v||o&&o.drapeRenderMode===1)?o:t}mergeTerrain(){let t;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(o=>{t=this._prioritizeTerrain(t,o.terrain,o.stylesheet.terrain)}),t===null?delete this.terrain:this.terrain=t}mergeProjection(){let t;this.forEachFragmentStyle(o=>{o.stylesheet.projection!=null&&(t=o.stylesheet.projection)}),this.projection=t||{name:"mercator"}}mergeSources(){const t={},o={},d={};this.forEachFragmentStyle(v=>{for(const b in v._sourceCaches){const A=n.aC(b,v.scope);t[A]=v._sourceCaches[b]}for(const b in v._otherSourceCaches){const A=n.aC(b,v.scope);o[A]=v._otherSourceCaches[b]}for(const b in v._symbolSourceCaches){const A=n.aC(b,v.scope);d[A]=v._symbolSourceCaches[b]}}),this._mergedSourceCaches=t,this._mergedOtherSourceCaches=o,this._mergedSymbolSourceCaches=d}mergeLayers(){const t={},o=[],d={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(b=>{for(const A of b._order){const k=b._layers[A];if(k.type==="slot"){const Z=n.cq(A);if(t[Z])continue;t[Z]=[]}k.slot&&t[k.slot]?t[k.slot].push(k):o.push(k)}}),this._mergedOrder=[];const v=(b=[])=>{for(const A of b)if(A.type==="slot"){const k=n.cq(A.id);t[k]&&v(t[k]),this._mergedSlots.push(k)}else{const k=n.aC(A.id,A.scope);this._mergedOrder.push(k),d[k]=A,A.is3D()&&(this._has3DLayers=!0),A.type==="circle"&&(this._hasCircleLayers=!0),A.type==="symbol"&&(this._hasSymbolLayers=!0),A.type==="clip"&&(this._clipLayerPresent=!0)}};v(o),this._mergedOrder.sort((b,A)=>{const k=d[b],Z=d[A];return k.hasInitialOcclusionOpacityProperties?Z.is3D()?1:0:k.is3D()&&Z.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=d,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(t){return this.stylesheet.camera=n.l({},this.stylesheet.camera,t),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(t){return t.data?function(o,d,v){const b=n.l({},d);for(const k of Object.keys(n.a3.colorTheme))b[k]===void 0&&(b[k]=n.a3.colorTheme[k].default);const A=new n.a4(Lo,o,new Map(v));return A.setTransitionOrValue(b,v),A.untransitioned().possiblyEvaluate(new n.a8(0))}(this.scope,t,this.options).get("data"):null}_loadColorTheme(t){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const o=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((d,v)=>{const b="data:image/png;base64,";if(!t||t.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void d();let A=t;A.startsWith(b)||(A=b+A);const k="mapbox-reserved-lut",Z=new Image;Z.src=A,Z.onerror=()=>{this._styleColorTheme.lutLoading=!1,v(new Error("Failed to load image data"))},Z.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==o)return void d();this._styleColorTheme.lutLoading=!1;const{width:q,height:re,data:fe}=n.q.getImageData(Z);if(re>32)return void v(new Error("The height of the image must be less than or equal to 32 pixels."));if(q!==re*re)return void v(new Error("The width of the image must be equal to the height squared."));this.getImage(k)&&this.removeImage(k),this.addImage(k,{data:new n.r({width:q,height:re},fe),pixelRatio:1,sdf:!1,usvg:!1,version:0});const pe=this.imageManager.getImage(k,this.scope);pe?(this._styleColorTheme.lut={image:pe.data,data:t},d()):v(new Error("Missing LUT image."))}})}getLut(t){const o=this._styleColorThemeForScope[t];return o?o.lut:null}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(t){this._spriteRequest=function(o,d,v){let b,A,k;const Z=n.q.devicePixelRatio>1?"@2x":"";let q=n.n(d.transformRequest(d.normalizeSpriteURL(o,Z,".json"),n.R.SpriteJSON),(pe,Te)=>{q=null,k||(k=pe,b=Te,fe())}),re=n.o(d.transformRequest(d.normalizeSpriteURL(o,Z,".png"),n.R.SpriteImage),(pe,Te)=>{re=null,k||(k=pe,A=Te,fe())});function fe(){if(k)v(k);else if(b&&A){const pe=n.q.getImageData(A),Te={};for(const et in b){const{width:We,height:rt,x:it,y:kt,sdf:qt,pixelRatio:Qt,stretchX:vn,stretchY:on,content:dn}=b[et],nn=new n.r({width:We,height:rt});n.r.copy(pe,nn,{x:it,y:kt},{x:0,y:0},{width:We,height:rt},null),Te[et]={data:nn,pixelRatio:Qt,sdf:qt,stretchX:vn,stretchY:on,content:dn,usvg:!1}}v(null,Te)}}return{cancel(){q&&(q.cancel(),q=null),re&&(re.cancel(),re=null)}}}(t,this.map._requestManager,(o,d)=>{if(this._spriteRequest=null,o)this.fire(new n.y(o));else if(d)for(const v in d)this.imageManager.addImage(v,this.scope,d[v]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.z("data",{dataType:"style"}))})}_loadIconset(t){if(!n.f(t)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(t);const o=this.map._spriteFormat==="auto";var d,v;this._spriteRequest=(v=(b,A)=>{if(this._spriteRequest=null,b)o?this._loadSprite(t):this.fire(new n.y(b));else if(A)for(const k in A)this.imageManager.addImage(k,this.scope,A[k]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.z("data",{dataType:"style"}))},n.bi((d=this.map._requestManager).transformRequest(d.normalizeIconsetURL(t),n.R.Iconset),(b,A)=>{if(b)return void v(b);const k={},Z=n.cg(new n.bh(A));for(const q of Z.icons){const re={version:1,pixelRatio:n.q.devicePixelRatio,content:c(q),stretchX:q.metadata?f(q.metadata.stretch_x_areas):void 0,stretchY:q.metadata?f(q.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:q};k[q.name]=re}v(null,k)}))}_validateLayer(t){const o=this.getOwnSource(t.source);if(!o)return;const d=t.sourceLayer;d&&(o.type==="geojson"||o.vectorLayerIds&&o.vectorLayerIds.indexOf(d)===-1)&&this.fire(new n.y(new Error(`Source layer "${d}" does not exist on source "${o.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:t}of this.fragments)if(!t.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((t,o)=>{const d=this.fragments[o];return d&&d.style&&(t.data=d.style.serialize()),t})}_serializeSources(){const t={};for(const o in this._sourceCaches){const d=this._sourceCaches[o].getSource();t[d.id]||(t[d.id]=d.serialize())}return t}_serializeLayers(t){const o=[];for(const d of t){const v=this._layers[d];v&&v.type!=="custom"&&o.push(v.serialize())}return o}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(t){return t?this.order:this._mergedOrder}isLayerDraped(t){return!!this.terrain&&t.isDraped(this.getLayerSourceCache(t))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(t){const o=this.getOwnLayer(t);if(o)return o;this.fire(new n.y(new Error(`The layer '${t}' does not exist in the map's style.`)))}_checkSource(t){const o=this.getOwnSource(t);if(o)return o;this.fire(new n.y(new Error(`The source '${t}' does not exist in the map's style.`)))}precompilePrograms(t,o){const d=this.map.painter;if(d)for(let v=t.minzoom||0;v<(t.maxzoom||25.5);v++){const b=t.getProgramIds();if(b)for(const A of b){const k=t.getDefaultProgramParams(A,o.zoom,this._styleColorTheme.lut);k&&(d.style=this,this.fog&&(d._fogVisible=!0,k.overrideFog=!0,d.getOrCreateProgram(A,k)),d._fogVisible=!1,k.overrideFog=!1,d.getOrCreateProgram(A,k),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(k.overrideRtt=!0,d.getOrCreateProgram(A,k)))}}}update(t){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(t),this.directionalLight&&this.directionalLight.recalculate(t);const o=this.calculateLightsBrightness();t.brightness=o||0,o!==this._brightness&&(this._brightness=o,this.dispatcher.broadcast("setBrightness",o));const d=this._changes.isDirty();let v=!1;if(this._changes.isDirty()){const A=this._changes.getLayerUpdatesByScope();for(const k in A){const{updatedIds:Z,removedIds:q}=A[k];(Z||q)&&(this._updateWorkerLayers(k,Z,q),v=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(t),this.light&&this.light.updateTransitions(t),this.ambientLight&&this.ambientLight.updateTransitions(t),this.directionalLight&&this.directionalLight.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this.snow&&this.snow.updateTransitions(t),this.rain&&this.rain.updateTransitions(t),this._changes.reset()}const b={};for(const A in this._mergedSourceCaches){const k=this._mergedSourceCaches[A];b[A]=k.used,k.used=!1,k.tileCoverLift=0}for(const A of this._mergedOrder){const k=this._mergedLayers[A];if(k.recalculate(t,this._availableImages),!k.isHidden(t.zoom)){const Z=this.getLayerSourceCache(k);Z&&(Z.used=!0,Z.tileCoverLift=Math.max(Z.tileCoverLift,k.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(k,t)}):this.precompilePrograms(k,t))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&v&&this.mergeLayers();for(const A in b){const k=this._mergedSourceCaches[A];b[A]!==k.used&&k.getSource().fire(new n.z("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.snow&&this.snow.recalculate(t),this.rain&&this.rain.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new n.z("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=this._changes.getUpdatedImages();if(t.length){for(const o in this._sourceCaches)this._sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changes.resetUpdatedImages()}}_updateWorkerLayers(t,o,d){const v=this.getFragmentStyle(t);v&&this.dispatcher.broadcast("updateLayers",{layers:o?v._serializeLayers(o):[],scope:t,removedIds:d||[],options:v.options})}setState(t,o){if(this._checkLoaded(),T(this,mr(t)))return!1;(t=n.cp(t)).layers=hl(t.layers);const d=function(A,k){if(!A)return[{command:ho.setStyle,args:[k]}];let Z=[];try{if(!n.bn(A.version,k.version))return[{command:ho.setStyle,args:[k]}];if(n.bn(A.center,k.center)||Z.push({command:ho.setCenter,args:[k.center]}),n.bn(A.zoom,k.zoom)||Z.push({command:ho.setZoom,args:[k.zoom]}),n.bn(A.bearing,k.bearing)||Z.push({command:ho.setBearing,args:[k.bearing]}),n.bn(A.pitch,k.pitch)||Z.push({command:ho.setPitch,args:[k.pitch]}),n.bn(A.sprite,k.sprite)||Z.push({command:ho.setSprite,args:[k.sprite]}),n.bn(A.glyphs,k.glyphs)||Z.push({command:ho.setGlyphs,args:[k.glyphs]}),n.bn(A.imports,k.imports)||function(Te=[],et=[],We){et=et||[];const rt=(Te=Te||[]).map(ts),it=et.map(ts),kt=Te.reduce(il,{}),qt=et.reduce(il,{}),Qt=rt.slice();let vn,on,dn,nn;for(vn=0,on=0;vn<rt.length;vn++)dn=rt[vn],qt.hasOwnProperty(dn)?on++:(We.push({command:ho.removeImport,args:[dn]}),Qt.splice(Qt.indexOf(dn,on),1));for(vn=0,on=0;vn<it.length;vn++)dn=it[it.length-1-vn],Qt[Qt.length-1-vn]!==dn&&(kt.hasOwnProperty(dn)?(We.push({command:ho.removeImport,args:[dn]}),Qt.splice(Qt.lastIndexOf(dn,Qt.length-on),1)):on++,nn=Qt[Qt.length-vn],We.push({command:ho.addImport,args:[qt[dn],nn]}),Qt.splice(Qt.length-vn,0,dn));for(const Rn of et){const $n=kt[Rn.id];$n&&!n.bn($n,Rn)&&We.push({command:ho.updateImport,args:[Rn.id,Rn]})}}(A.imports,k.imports,Z),n.bn(A.transition,k.transition)||Z.push({command:ho.setTransition,args:[k.transition]}),n.bn(A.light,k.light)||Z.push({command:ho.setLight,args:[k.light]}),n.bn(A.fog,k.fog)||Z.push({command:ho.setFog,args:[k.fog]}),n.bn(A.snow,k.snow)||Z.push({command:ho.setSnow,args:[k.snow]}),n.bn(A.rain,k.rain)||Z.push({command:ho.setRain,args:[k.rain]}),n.bn(A.projection,k.projection)||Z.push({command:ho.setProjection,args:[k.projection]}),n.bn(A.lights,k.lights)||Z.push({command:ho.setLights,args:[k.lights]}),n.bn(A.camera,k.camera)||Z.push({command:ho.setCamera,args:[k.camera]}),!n.bn(A["color-theme"],k["color-theme"]))return[{command:ho.setStyle,args:[k]}];const q={},re=[];(function(Te,et,We,rt){let it;for(it in et=et||{},Te=Te||{})Te.hasOwnProperty(it)&&(et.hasOwnProperty(it)||Ml(it,We,rt));for(it in et){if(!et.hasOwnProperty(it))continue;const kt=et[it];Te.hasOwnProperty(it)?n.bn(Te[it],kt)||(Te[it].type==="geojson"&&kt.type==="geojson"&&Wo(Te,et,it)?We.push({command:ho.setGeoJSONSourceData,args:[it,kt.data]}):Ri(it,et,We,rt)):Ul(it,et,We)}})(A.sources,k.sources,re,q);const fe=[];A.layers&&A.layers.forEach(Te=>{Te.source&&q[Te.source]?Z.push({command:ho.removeLayer,args:[Te.id]}):fe.push(Te)});let pe=A.terrain;pe&&q[pe.source]&&(Z.push({command:ho.setTerrain,args:[void 0]}),pe=void 0),Z=Z.concat(re),n.bn(pe,k.terrain)||Z.push({command:ho.setTerrain,args:[k.terrain]}),function(Te,et,We){et=et||[];const rt=(Te=Te||[]).map(ts),it=et.map(ts),kt=Te.reduce(il,{}),qt=et.reduce(il,{}),Qt=rt.slice(),vn=Object.create(null);let on,dn,nn,Rn,$n,Pr,dr;for(on=0,dn=0;on<rt.length;on++)nn=rt[on],qt.hasOwnProperty(nn)?dn++:(We.push({command:ho.removeLayer,args:[nn]}),Qt.splice(Qt.indexOf(nn,dn),1));for(on=0,dn=0;on<it.length;on++)nn=it[it.length-1-on],Qt[Qt.length-1-on]!==nn&&(kt.hasOwnProperty(nn)?(We.push({command:ho.removeLayer,args:[nn]}),Qt.splice(Qt.lastIndexOf(nn,Qt.length-dn),1)):dn++,Pr=Qt[Qt.length-on],We.push({command:ho.addLayer,args:[qt[nn],Pr]}),Qt.splice(Qt.length-on,0,nn),vn[nn]=!0);for(on=0;on<it.length;on++)if(nn=it[on],Rn=kt[nn],$n=qt[nn],!vn[nn]&&!n.bn(Rn,$n))if(n.bn(Rn.source,$n.source)&&n.bn(Rn["source-layer"],$n["source-layer"])&&n.bn(Rn.type,$n.type)){for(dr in fo(Rn.layout,$n.layout,We,nn,null,ho.setLayoutProperty),fo(Rn.paint,$n.paint,We,nn,null,ho.setPaintProperty),n.bn(Rn.slot,$n.slot)||We.push({command:ho.setSlot,args:[nn,$n.slot]}),n.bn(Rn.filter,$n.filter)||We.push({command:ho.setFilter,args:[nn,$n.filter]}),n.bn(Rn.minzoom,$n.minzoom)&&n.bn(Rn.maxzoom,$n.maxzoom)||We.push({command:ho.setLayerZoomRange,args:[nn,$n.minzoom,$n.maxzoom]}),Rn)Rn.hasOwnProperty(dr)&&dr!=="layout"&&dr!=="paint"&&dr!=="filter"&&dr!=="metadata"&&dr!=="minzoom"&&dr!=="maxzoom"&&dr!=="slot"&&(dr.indexOf("paint.")===0?fo(Rn[dr],$n[dr],We,nn,dr.slice(6),ho.setPaintProperty):n.bn(Rn[dr],$n[dr])||We.push({command:ho.setLayerProperty,args:[nn,dr,$n[dr]]}));for(dr in $n)$n.hasOwnProperty(dr)&&!Rn.hasOwnProperty(dr)&&dr!=="layout"&&dr!=="paint"&&dr!=="filter"&&dr!=="metadata"&&dr!=="minzoom"&&dr!=="maxzoom"&&dr!=="slot"&&(dr.indexOf("paint.")===0?fo(Rn[dr],$n[dr],We,nn,dr.slice(6),ho.setPaintProperty):n.bn(Rn[dr],$n[dr])||We.push({command:ho.setLayerProperty,args:[nn,dr,$n[dr]]}))}else We.push({command:ho.removeLayer,args:[nn]}),Pr=Qt[Qt.lastIndexOf(nn)+1],We.push({command:ho.addLayer,args:[$n,Pr]})}(fe,k.layers,Z)}catch(q){console.warn("Unable to compute style diff:",q),Z=[{command:ho.setStyle,args:[k]}]}return Z}(this.serialize(),t).filter(A=>!(A.command in me));if(d.length===0)return!1;const v=d.filter(A=>!(A.command in W));if(v.length>0)throw new Error(`Unimplemented: ${v.map(A=>A.command).join(", ")}.`);const b=[];return d.forEach(A=>{b.push(this[A.command].apply(this,A.args))}),o&&Promise.all(b).then(o),this.stylesheet=t,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(t,o){return this.getImage(t)?this.fire(new n.y(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,this.scope,o),this._afterImageUpdated(t),this)}updateImage(t,o,d=!1){this.imageManager.updateImage(t,this.scope,o),d&&this._afterImageUpdated(t)}getImage(t){return this.imageManager.getImage(t,this.scope)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t,this.scope),this._afterImageUpdated(t),this):this.fire(new n.y(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(t),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new n.z("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(t,o,d={}){return this._checkLoaded(),this._validate(Hr,`models.${t}`,o,null,d)||(this.modelManager.addModel(t,o,this.scope),this._changes.setDirty()),this}hasModel(t){return this.modelManager.hasModel(t,this.scope)}removeModel(t){return this.hasModel(t)?(this.modelManager.removeModel(t,this.scope),this):this.fire(new n.y(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(t,o,d={}){if(this._checkLoaded(),this.getOwnSource(t)!==void 0)throw new Error(`There is already a source with ID "${t}".`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(Jr,`sources.${t}`,o,null,d))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const v=Aa(t,o,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const b=A=>{const k=(A?"symbol:":"other:")+v.id,Z=n.aC(k,this.scope),q=this._sourceCaches[k]=new No(Z,v,A);(A?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=q,q.onAdd(this.map)};b(!1),o.type!=="vector"&&o.type!=="geojson"||b(!0),v.onAdd&&v.onAdd(this.map),d.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(t){this._checkLoaded();const o=this.getOwnSource(t);if(!o)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===t)return this.fire(new n.y(new Error(`Source "${t}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===t)return this.fire(new n.y(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const d=this.getOwnSourceCaches(t);for(const v of d){const b=n.cq(v.id);delete this._sourceCaches[b],this._changes.discardSourceCacheUpdate(v.id),v.fire(new n.z("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],this.mergeSources(),o.setEventedParent(null),o.onRemove&&o.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(t,o){this._checkLoaded(),this.getOwnSource(t).setData(o),this._changes.setDirty()}getOwnSource(t){const o=this.getOwnSourceCache(t);return o&&o.getSource()}getOwnSources(){const t=[];for(const o in this._otherSourceCaches){const d=this.getOwnSourceCache(o);d&&t.push(d.getSource())}return t}areTilesLoaded(){const t=this._mergedSourceCaches;for(const o in t){const d=t[o]._tiles;for(const v in d){const b=d[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}setLights(t){if(this._checkLoaded(),!t)return delete this.ambientLight,void delete this.directionalLight;const o=this._getTransitionParameters();for(const v of t){if(this._validate(Ot,"lights",v))return;switch(v.type){case"ambient":if(this.ambientLight){const b=this.ambientLight;b.set(v),b.updateTransitions(o)}else this.ambientLight=new Gr(v,Xn||(Xn=new n.a5({color:new n.a6(n.a3.properties_light_ambient.color),"color-use-theme":new n.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a6(n.a3.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const b=this.directionalLight;b.set(v),b.updateTransitions(o)}else this.directionalLight=new Gr(v,er||(er=new n.a5({direction:new n.ak(n.a3.properties_light_directional.direction),color:new n.a6(n.a3.properties_light_directional.color),"color-use-theme":new n.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a6(n.a3.properties_light_directional.intensity),"cast-shadows":new n.a6(n.a3.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a6(n.a3.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a6(n.a3.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const d=new n.a8(this.z||0,o);this.ambientLight&&this.ambientLight.recalculate(d),this.directionalLight&&this.directionalLight.recalculate(d),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const t=this.directionalLight,o=this.ambientLight;if(!t||!o)return;const d=pe=>.2126*(pe[0]<=.03928?pe[0]/12.92:Math.pow((pe[0]+.055)/1.055,2.4))+.7152*(pe[1]<=.03928?pe[1]/12.92:Math.pow((pe[1]+.055)/1.055,2.4))+.0722*(pe[2]<=.03928?pe[2]/12.92:Math.pow((pe[2]+.055)/1.055,2.4)),v=t.properties.get("color").toRenderColor(null).toArray01(),b=t.properties.get("intensity"),A=t.properties.get("direction"),k=1-n.cb(A.x,A.y,A.z)[2]/90,Z=d(v)*b*k,q=o.properties.get("color").toRenderColor(null).toArray01(),re=o.properties.get("intensity"),fe=d(q)*re;return Number(((Z+fe)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const t=[];return this.directionalLight&&t.push(this.directionalLight.get()),this.ambientLight&&t.push(this.ambientLight.get()),t}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(t){if(!t)return this;if(n.cr(t)){const o=n.cs(t),d=this.fragments.find(({id:b})=>b===o);if(!d)throw new Error(`Style import '${t}' not found`);const v=n.cq(t);return d.style.getFragmentStyle(v)}{const o=this.fragments.find(({id:d})=>d===t);return o?o.style:void 0}}setFeaturesetSelectors(t){if(!t)return;const o={},d=(v,b="")=>`${v}::${b}`;this._featuresetSelectors={};for(const v in t){const b=this._featuresetSelectors[v]=[];for(const A of t[v].selectors){if(A.featureNamespace){const Z=this.getOwnLayer(A.layer);if(!Z){n.w(`Layer is undefined for selector: ${A.layer}`);continue}const q=d(Z.source,Z.sourceLayer);if(q in o&&o[q]!==A.featureNamespace){n.w(`"featureNamespace ${A.featureNamespace} of featureset ${v}'s selector is not associated to the same source, skip this selector`);continue}o[q]=A.featureNamespace}let k;if(A.properties)for(const Z in A.properties){const q=n.U(A.properties[Z]);q.result==="success"&&(k=k||{},k[Z]=q.value)}b.push({layerId:A.layer,namespace:A.featureNamespace,properties:k,uniqueFeatureID:A._uniqueFeatureID})}}}getFeaturesetDescriptors(t){const o=this.getFragmentStyle(t);if(!o||!o.stylesheet.featuresets)return[];const d=[];for(const v in o.stylesheet.featuresets)d.push({featuresetId:v,importId:o.scope?o.scope:void 0});return d}getFeaturesetLayers(t,o){const d=this.getFragmentStyle(o),v=d.stylesheet.featuresets;if(!v||!v[t])return this.fire(new n.y(new Error(`The featureset '${t}' does not exist in the map's style and cannot be queried.`))),[];const b=[];for(const A of v[t].selectors){const k=d.getOwnLayer(A.layer);k&&b.push(k)}return b}getConfigProperty(t,o){const d=this.getFragmentStyle(t);if(!d)return null;const v=n.aC(o,d.scope),b=d.options.get(v),A=b?b.value||b.default:null;return A?A.serialize():null}setConfigProperty(t,o,d){const v=this.getFragmentStyle(t);if(!v)return;const b=v.stylesheet.indoor?Po(v.stylesheet.schema):v.stylesheet.schema;if(!b||!b[o])return;const A=n.U(d);if(A.result!=="success")return void T(this,A.value);const k=A.value.expression,Z=n.aC(o,v.scope),q=v.options.get(Z);if(!q)return;let re;const{minValue:fe,maxValue:pe,stepValue:Te,type:et,values:We}=b[o],rt=n.U(b[o].default);rt.result==="success"&&(re=rt.value.expression),re?(this.options.set(Z,Object.assign({},q,{value:k,default:re,minValue:fe,maxValue:pe,stepValue:Te,type:et,values:We})),this.updateConfigDependencies(o)):this.fire(new n.y(new Error(`No schema defined for the config option "${o}" in the "${t}" fragment.`)))}getConfig(t){const o=this.getFragmentStyle(t);if(!o)return null;const d=o.stylesheet.schema;if(!d)return null;const v={};for(const b in d){const A=n.aC(b,o.scope),k=o.options.get(A),Z=k?k.value||k.default:null;v[b]=Z?Z.serialize():null}return v}setConfig(t,o){const d=this.getFragmentStyle(t);d&&(d.updateConfig(o,d.stylesheet.schema),this.updateConfigDependencies())}getSchema(t){const o=this.getFragmentStyle(t);return o?o.stylesheet.schema:null}setSchema(t,o){const d=this.getFragmentStyle(t);d&&(d.stylesheet.schema=o,d.updateConfig(d._config,o),this.updateConfigDependencies())}updateConfig(t,o){if(this._config=t,t||o)if(o)for(const d in o){let v,b;const A=n.U(o[d].default);if(A.result==="success"&&(v=A.value.expression),t&&t[d]!==void 0){const pe=n.U(t[d]);pe.result==="success"&&(b=pe.value.expression)}const{minValue:k,maxValue:Z,stepValue:q,type:re,values:fe}=o[d];if(v){const pe=n.aC(d,this.scope);this.options.set(pe,{default:v,value:b,minValue:k,maxValue:Z,stepValue:q,type:re,values:fe})}else this.fire(new n.y(new Error(`No schema defined for config option "${d}".`)))}else this.fire(new n.y(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(t){for(const o of this._configDependentLayers){const d=this.getLayer(o);if(d){if(t&&!d.configDependencies.has(t))continue;d.possiblyEvaluateVisibility(),this._updateLayer(d)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(o=>{const d=o._styleColorTheme.colorThemeOverride?o._styleColorTheme.colorThemeOverride:o._styleColorTheme.colorTheme;if(d){const v=o._evaluateColorThemeData(d);(!o._styleColorTheme.lut&&v!==""||o._styleColorTheme.lut&&v!==o._styleColorTheme.lut.data)&&o.setColorTheme(d)}}),this._changes.setDirty()}addLayer(t,o,d={}){this._checkLoaded();const v=t.id;if(this._layers[v])return void this.fire(new n.y(new Error(`Layer with id "${v}" already exists on this map`)));let b;if(t.type==="custom"){if(T(this,n.ct(t)))return;b=n.cu(t,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof t.source=="object"&&(this.addSource(v,t.source),t=n.cp(t),t=n.l(t,{source:v})),this._validate(Nn,`layers.${v}`,t,{arrayIndex:-1},d))return;b=n.cu(t,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid);let A=this._order.length;if(o){const re=this._order.indexOf(o);if(re===-1)return void this.fire(new n.y(new Error(`Layer with id "${o}" does not exist on this map.`)));b.slot===this._layers[o].slot?A=re:n.w(`Layer with id "${o}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(A,0,v),this._layerOrderChanged=!0,this._layers[v]=b;const k=this.getOwnLayerSourceCache(b),Z=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&b.canCastShadows()&&Z&&(k.castsShadows=!0);const q=this._changes.getRemovedLayer(b);if(q&&b.source&&k&&b.type!=="custom"){this._changes.discardLayerRemoval(b);const re=n.aC(b.source,b.scope);q.type!==b.type?this._changes.updateSourceCache(re,"clear"):(this._changes.updateSourceCache(re,"reload"),k.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),b.scope=this.scope,this.mergeLayers()}moveLayer(t,o){this._checkLoaded();const d=this._checkLayer(t);if(!d||t===o)return;const v=this._order.indexOf(t);this._order.splice(v,1);let b=this._order.length;if(o){const A=this._order.indexOf(o);if(A===-1)return void this.fire(new n.y(new Error(`Layer with id "${o}" does not exist on this map.`)));d.slot===this._layers[o].slot?b=A:n.w(`Layer with id "${o}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(b,0,t),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(t){this._checkLoaded();const o=this._checkLayer(t);if(!o)return;o.setEventedParent(null);const d=this._order.indexOf(t);this._order.splice(d,1),delete this._layers[t],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(o.fqid),this._changes.removeLayer(o);const v=this.getOwnLayerSourceCache(o);if(v&&v.castsShadows){let b=!1;for(const A in this._layers)if(this._layers[A].source===o.source&&this._layers[A].canCastShadows()){b=!0;break}v.castsShadows=b}o.onRemove&&o.onRemove(this.map),this.mergeLayers()}getOwnLayer(t){return this._layers[t]}hasLayer(t){return t in this._mergedLayers}hasLayerType(t){for(const o in this._layers)if(this._layers[o].type===t)return!0;return!1}setLayerZoomRange(t,o,d){this._checkLoaded();const v=this._checkLayer(t);v&&(v.minzoom===o&&v.maxzoom===d||(o!=null&&(v.minzoom=o),d!=null&&(v.maxzoom=d),this._updateLayer(v)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(t,o){this._checkLoaded();const d=this._checkLayer(t);d&&d.slot!==o&&(d.slot=o,this._updateLayer(d))}setFilter(t,o,d={}){this._checkLoaded();const v=this._checkLayer(t);if(v&&!n.bn(v.filter,o))return o==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(Jn,`layers.${v.id}.filter`,o,{layerType:v.type},d)||(v.filter=n.cp(o),this._updateLayer(v)))}getFilter(t){const o=this._checkLayer(t);if(o)return n.cp(o.filter)}setLayoutProperty(t,o,d,v={}){this._checkLoaded();const b=this._checkLayer(t);if(b&&!n.bn(b.getLayoutProperty(o),d)){if(d!=null&&(!v||v.validate!==!1)&&T(b,Br.call(mr,{key:`layers.${t}.layout.${o}`,layerType:b.type,objectKey:o,value:d,styleSpec:n.a3,style:{glyphs:!0,sprite:!0}})))return;b.setLayoutProperty(o,d),b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid),this._updateLayer(b)}}getLayoutProperty(t,o){const d=this._checkLayer(t);if(d)return d.getLayoutProperty(o)}setPaintProperty(t,o,d,v={}){this._checkLoaded();const b=this._checkLayer(t);if(!b||n.bn(b.getPaintProperty(o),d)||d!=null&&(!v||v.validate!==!1)&&T(b,rr.call(mr,{key:`layers.${t}.paint.${o}`,layerType:b.type,objectKey:o,value:d,styleSpec:n.a3})))return;const A=b.setPaintProperty(o,d);b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid),A&&this._updateLayer(b),this._changes.updatePaintProperties(b)}getPaintProperty(t,o){const d=this._checkLayer(t);if(d)return d.getPaintProperty(o)}setFeatureState(t,o){if(this._checkLoaded(),"target"in t){if("featuresetId"in t.target){const{featuresetId:Z,importId:q}=t.target,re=this.getFragmentStyle(q),fe=re.getFeaturesetLayers(Z);for(const{source:pe,sourceLayer:Te}of fe)re.setFeatureState({id:t.id,source:pe,sourceLayer:Te},o)}else if("layerId"in t.target){const{layerId:Z}=t.target,q=this.getLayer(Z);this.setFeatureState({id:t.id,source:q.source,sourceLayer:q.sourceLayer},o)}return}const d=t.source,v=t.sourceLayer,b=this._checkSource(d);if(!b)return;const A=b.type;if(A==="geojson"&&v)return void this.fire(new n.y(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(A==="vector"&&!v)return void this.fire(new n.y(new Error("The sourceLayer parameter must be provided for vector source types.")));t.id===void 0&&this.fire(new n.y(new Error("The feature id parameter must be provided.")));const k=this.getOwnSourceCaches(d);for(const Z of k)Z.setFeatureState(v,t.id,o)}removeFeatureState(t,o){if(this._checkLoaded(),"target"in t){if("featuresetId"in t.target){const{featuresetId:Z,importId:q}=t.target,re=this.getFragmentStyle(q),fe=re.getFeaturesetLayers(Z);for(const{source:pe,sourceLayer:Te}of fe)re.removeFeatureState({id:t.id,source:pe,sourceLayer:Te},o)}else if("layerId"in t.target){const{layerId:Z}=t.target,q=this.getLayer(Z);this.removeFeatureState({id:t.id,source:q.source,sourceLayer:q.sourceLayer},o)}return}const d=t.source,v=this._checkSource(d);if(!v)return;const b=v.type,A=b==="vector"?t.sourceLayer:void 0;if(b==="vector"&&!A)return void this.fire(new n.y(new Error("The sourceLayer parameter must be provided for vector source types.")));if(o&&typeof t.id!="string"&&typeof t.id!="number")return void this.fire(new n.y(new Error("A feature id is required to remove its specific state property.")));const k=this.getOwnSourceCaches(d);for(const Z of k)Z.removeFeatureState(A,t.id,o)}getFeatureState(t){if(this._checkLoaded(),"target"in t){let b;if("featuresetId"in t.target){const{featuresetId:A,importId:k}=t.target,Z=this.getFragmentStyle(k),q=Z.getFeaturesetLayers(A);for(const{source:re,sourceLayer:fe}of q){const pe=Z.getFeatureState({id:t.id,source:re,sourceLayer:fe});if(pe&&!b)b=pe;else if(!n.bn(b,pe))return void this.fire(new n.y(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in t.target){const{layerId:A}=t.target,k=this.getLayer(A);b=this.getFeatureState({id:t.id,source:k.source,sourceLayer:k.sourceLayer})}return b}const o=t.source,d=t.sourceLayer,v=this._checkSource(o);if(v){if(v.type!=="vector"||d)return t.id===void 0&&this.fire(new n.y(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(o)[0].getFeatureState(d,t.id);this.fire(new n.y(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(t){return this.stylesheet.transition=n.l({},this.stylesheet.transition,t),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const t=this.getTerrain(),o=t&&this.terrain&&this.terrain.scope===this.scope?t:this.stylesheet.terrain;return n.cv({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:o,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateFilteredLayers(t){for(const o of Object.values(this._mergedLayers))t(o)&&this._updateLayer(o)}_updateLayer(t){this._changes.updateLayer(t);const o=this.getLayerSourceCache(t),d=n.aC(t.source,t.scope),v=this._changes.getUpdatedSourceCaches();t.source&&!v[d]&&o&&o.getSource().type!=="raster"&&(this._changes.updateSourceCache(d,"reload"),o.pause()),t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const o=k=>this._mergedLayers[k].is3D(),d=this.order,v={},b=[];for(let k=d.length-1;k>=0;k--){const Z=d[k];if(o(Z)){v[Z]=k;for(const q of t){const re=q[Z];if(re)for(const fe of re)b.push(fe)}}}b.sort((k,Z)=>Z.intersectionZ-k.intersectionZ);const A=[];for(let k=d.length-1;k>=0;k--){const Z=d[k];if(o(Z))for(let q=b.length-1;q>=0;q--){const re=b[q].feature;if(re.layer&&v[re.layer.id]<k)break;A.push(re),b.pop()}else for(const q of t){const re=q[Z];if(re)for(const fe of re)A.push(fe.feature)}}return A}queryRenderedFeatures(t,o,d){let v;o&&!Array.isArray(o)&&o.filter&&(this._validate(Jn,"queryRenderedFeatures.filter",o.filter,null,o),v=n.aZ(o.filter));const b={},A=re=>{if(ze.has(re.type))return;const fe=this.getOwnLayerSourceCache(re),pe=b[fe.id]=b[fe.id]||{sourceCache:fe,layers:{},has3DLayers:!1};re.is3D()&&(pe.has3DLayers=!0),pe.layers[re.fqid]=pe.layers[re.fqid]||{styleLayer:re,targets:[]},pe.layers[re.fqid].targets.push({filter:v})};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new n.y(new Error("parameters.layers must be an Array."))),[];for(const re of o.layers){const fe=this._layers[re];if(!fe)return this.fire(new n.y(new Error(`The layer '${re}' does not exist in the map's style and cannot be queried for features.`))),[];A(fe)}}else for(const re in this._layers)A(this._layers[re]);const k=this._queryRenderedFeatures(t,b,d),Z=this._flattenAndSortRenderedFeatures(k),q=[];for(const re of Z)n.cs(re.layer.id)===this.scope&&q.push(re);return q}queryRenderedFeatureset(t,o,d){let v;o&&!Array.isArray(o)&&o.filter&&(this._validate(Jn,"queryRenderedFeatures.filter",o.filter,null,o),v=n.aZ(o.filter));const b="mock",A=[];if(o&&o.target)A.push(Object.assign({},o,{targetId:b,filter:v}));else{const re=this.getFeaturesetDescriptors();for(const fe of re)A.push({targetId:b,filter:v,target:fe});for(const{style:fe}of this.fragments){const pe=fe.getFeaturesetDescriptors();for(const Te of pe)A.push({targetId:b,filter:v,target:Te})}}const k=this.queryRenderedTargets(t,A,d),Z=[],q=new Set;for(const re of k)for(const fe of re.variants[b])Oo(fe,re,q)||Z.push(new n.cw(re,fe));return Z}queryRenderedTargets(t,o,d){const v={},b=(k,Z,q,re)=>{const fe=v[Z.id]=v[Z.id]||{sourceCache:Z,layers:{},has3DLayers:!1};if(fe.layers[k.fqid]=fe.layers[k.fqid]||{styleLayer:k,targets:[]},k.is3D()&&(fe.has3DLayers=!0),!re)return q.uniqueFeatureID=!1,void fe.layers[k.fqid].targets.push(q);fe.layers[k.fqid].targets.push(Object.assign({},q,{namespace:re.namespace,properties:re.properties,uniqueFeatureID:re.uniqueFeatureID}))};for(const k of o)if("featuresetId"in k.target){const{featuresetId:Z,importId:q}=k.target,re=this.getFragmentStyle(q);if(!re||!re._featuresetSelectors)continue;const fe=re._featuresetSelectors[Z];if(!fe){this.fire(new n.y(new Error(`The featureset '${Z}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const pe of fe){const Te=re.getOwnLayer(pe.layerId);Te&&!ze.has(Te.type)&&b(Te,re.getOwnLayerSourceCache(Te),k,pe)}}else if("layerId"in k.target){const{layerId:Z}=k.target,q=this.getLayer(Z);if(!q||ze.has(q.type))continue;b(q,this.getLayerSourceCache(q),k)}const A=this._queryRenderedFeatures(t,v,d);return this._flattenAndSortRenderedFeatures(A)}_queryRenderedFeatures(t,o,d){const v=[],b=!!this.map._showQueryGeometry,A=ci.createFromScreenPoints(t,d);for(const k in o){const Z=Do(A,o[k],this._availableImages,d,b);Object.keys(Z).length&&v.push(Z)}if(this.placement)for(const k in o){if(!o[k].sourceCache._onlySymbols)continue;const Z=oa(A.screenGeometry,o[k],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(Z).length&&v.push(Z)}return v}querySourceFeatures(t,o){const d=o&&o.filter;d&&this._validate(Jn,"querySourceFeatures.filter",d,null,o);let v=[];const b=this.getOwnSourceCaches(t);for(const A of b)v=v.concat(Fa(A,o));return v}addSourceType(t,o,d){return ne.getSourceType(t)?d(new Error(`A source type called "${t}" already exists.`)):(ne.setSourceType(t,o),o.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:o.workerSourceURL},d):d(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(t,o,d={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const k in t)if(!n.bn(t[k],v[k])){b=!0;break}if(!b)return;const A=this._getTransitionParameters();this.light.setLight(t,o,d),this.light.updateTransitions(A)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(t,o=1){if(this._checkLoaded(),!t)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),o===0&&delete this.terrain,t===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let d=t;const v=t.source==null;if(o===1){if(this.disableElevatedTerrain)return;if(typeof d.source=="object"){const k="terrain-dem-src";this.addSource(k,d.source),d=n.cp(d),d=n.l(d,{source:k})}const b=n.l({},d),A={};if(this.terrain&&v){b.source=this.terrain.get().source;const k=this.terrain?this.getFragmentStyle(this.terrain.scope):null;k&&(A.style=k.serialize())}if(this._validate(St,"terrain",b,A))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&o!==this.terrain.drapeRenderMode){if(!d)return;this._createTerrain(d,o),this.fire(new n.z("data",{dataType:"style"}))}else{const b=this.terrain,A=b.get();for(const k of Object.keys(n.a3.terrain))!d.hasOwnProperty(k)&&n.a3.terrain[k].default&&(d[k]=n.a3.terrain[k].default);for(const k in t)if(!n.bn(t[k],A[k])){b.set(t,this.options),this.stylesheet.terrain=t;const Z=this._getTransitionParameters({duration:0});b.updateTransitions(Z),this.fire(new n.z("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const o=this.fog=new Un(t,this.map.transform,this.scope,this.options);this.stylesheet.fog=o.get();const d=this._getTransitionParameters({duration:0});o.updateTransitions(d)}_createSnow(t){const o=this.snow=new Yr(t,this.map.transform,this.scope,this.options);this.stylesheet.snow=o.get();const d=this._getTransitionParameters({duration:0});o.updateTransitions(d)}_createRain(t){const o=this.rain=new qr(t,this.map.transform,this.scope,this.options);this.stylesheet.rain=o.get();const d=this._getTransitionParameters({duration:0});o.updateTransitions(d)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const t of this.map._markers)t._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const o=this.fog;if(!n.bn(o.get(),t)){o.set(t,this.options),this.stylesheet.fog=o.get();const d=this._getTransitionParameters({duration:0});o.updateTransitions(d)}}else this._createFog(t);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(t){if(this._checkLoaded(),!t)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const o=this.snow;if(!n.bn(o.get(),t)){o.set(t,this.options),this.stylesheet.snow=o.get();const d=this._getTransitionParameters({duration:0});o.updateTransitions(d)}}else this._createSnow(t);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(t){if(this._checkLoaded(),!t)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const o=this.rain;if(!n.bn(o.get(),t)){o.set(t,this.options),this.stylesheet.rain=o.get();const d=this._getTransitionParameters({duration:0});o.updateTransitions(d)}}else this._createRain(t);this._markersNeedUpdate=!0}_reloadColorTheme(){const t=()=>{for(const v in this._layers)this._layers[v].lut=this._styleColorTheme.lut;for(const v in this._sourceCaches)this._sourceCaches[v].clearTiles()},o=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!o)return this._styleColorTheme.lut=null,void t();const d=this._evaluateColorThemeData(o);this._loadColorTheme(d).then(()=>{this.fire(new n.z("colorthemeset")),t()}).catch(v=>{n.w(`Couldn't set color theme: ${v}`)})}setColorTheme(t){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=t,this._reloadColorTheme()}setImportColorTheme(t,o){const d=this.getFragmentStyle(t);d&&(d._styleColorTheme.colorThemeOverride=o,d._reloadColorTheme())}_getTransitionParameters(t){return{now:n.q.now(),transition:n.l(this.transition,t)}}updateDrapeFirstLayers(){if(!this.terrain)return;const t=[],o=[];for(const d of this._mergedOrder)this.isLayerDraped(this._mergedLayers[d])?t.push(d):o.push(d);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...o)}_createTerrain(t,o){const d=this.terrain=new Ge(t,o,this.scope,this.options);o===1&&(this.stylesheet.terrain=t),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_force3DLayerUpdate(){for(const t in this._layers){const o=this._layers[t];o.type==="fill-extrusion"&&this._updateLayer(o)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const o=this._layers[t];o.type==="symbol"&&this._updateLayer(o)}}_validate(t,o,d,v,b={}){if(b&&b.validate===!1)return!1;const A=n.l({},this.serialize());return T(this,t.call(mr,n.l({key:o,style:A,value:d,styleSpec:n.a3},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cx.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._mergedLayers)this._mergedLayers[t].setEventedParent(null);for(const t in this._mergedSourceCaches)this._mergedSourceCaches[t].clearTiles(),this._mergedSourceCaches[t].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(t){const o=this.getSourceCaches(t);for(const d of o)d.clearTiles()}clearSources(){for(const t in this._mergedSourceCaches)this._mergedSourceCaches[t].clearTiles()}reloadSource(t){const o=this.getSourceCaches(t);for(const d of o)d.resume(),d.reload()}reloadSources(){for(const t of this.getSources())t.reload&&t.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(t=>{t.modelManager.reloadModels(t.scope)})}updateSources(t){let o;this.directionalLight&&(o=Ai(this.directionalLight));for(const d in this._mergedSourceCaches)this._mergedSourceCaches[d].update(t,void 0,void 0,o)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const o=this._sourceCaches[t];o.resume(),o.reload()}}_updatePlacement(t,o,d,v,b,A,k=!1){let Z=!1,q=!1;const re={},fe={};for(const pe of this._mergedOrder){const Te=this._mergedLayers[pe];if(Te.type!=="symbol")continue;const et=n.aC(Te.source,Te.scope);let We=re[et];if(!We){const it=this.getLayerSourceCache(Te);if(!it)continue;const kt=it.getRenderableIds(!0).map(qt=>it.getTileByID(qt));fe[et]=kt.slice(),We=re[et]=kt.sort((qt,Qt)=>Qt.tileID.overscaledZ-qt.tileID.overscaledZ||(qt.tileID.isLessThan(Qt.tileID)?-1:1))}const rt=this.crossTileSymbolIndex.addLayer(Te,We,o.center.lng,o.projection);Z=Z||rt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),k=k||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new n.z("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),o.zoom))&&(this.pauseablePlacement=new Eu(o,this._mergedOrder,k,d,v,b,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,re,fe,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),q=!0),Z&&this.pauseablePlacement.placement.setStale()),q||Z){this._buildingIndex.onNewFrame(o.zoom);for(let pe=0;pe<this._mergedOrder.length;pe++){const Te=this._mergedLayers[this._mergedOrder[pe]];if(Te.type!=="symbol")continue;const et=this.isLayerClipped(Te);this.placement.updateLayerOpacities(Te,re[n.aC(Te.source,Te.scope)],pe,et?A:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}addImport(t,o){this._checkLoaded();const d=this.stylesheet.imports=this.stylesheet.imports||[];if(d.findIndex(({id:b})=>b===t.id)!==-1)return void this.fire(new n.y(new Error(`Import with id '${t.id}' already exists in the map's style.`)));if(!o)return d.push(t),this._loadImports([t],!0);const v=d.findIndex(({id:b})=>b===o);return v===-1&&this.fire(new n.y(new Error(`Import with id "${o}" does not exist on this map.`))),this.stylesheet.imports=d.slice(0,v).concat(t).concat(d.slice(v)),this._loadImports([t],!0,o)}updateImport(t,o){this._checkLoaded();const d=this.stylesheet.imports||[],v=this.getImportIndex(t);return v===-1?this:typeof o=="string"?(this.setImportUrl(t,o),this):(o.url&&o.url!==d[v].url&&this.setImportUrl(t,o.url),n.bn(o.config,d[v].config)||this.setImportConfig(t,o.config,o.data.schema),n.bn(o.data,d[v].data)||this.setImportData(t,o.data),this)}moveImport(t,o){this._checkLoaded();let d=this.stylesheet.imports||[];const v=this.getImportIndex(t);if(v===-1)return this;const b=this.getImportIndex(o);if(b===-1)return this;const A=d[v],k=this.fragments[v];return d=d.filter(({id:Z})=>Z!==t),this.fragments=this.fragments.filter(({id:Z})=>Z!==t),this.stylesheet.imports=d.slice(0,b).concat(A).concat(d.slice(b)),this.fragments=this.fragments.slice(0,b).concat(k).concat(this.fragments.slice(b)),this.mergeLayers(),this}setImportUrl(t,o){this._checkLoaded();const d=this.stylesheet.imports||[],v=this.getImportIndex(t);if(v===-1)return this;d[v].url=o;const b=this.fragments[v];return b.style=this._createFragmentStyle(d[v]),b.style.on("style.import.load",()=>this.mergeAll()),b.style.loadURL(o),this}setImportData(t,o){this._checkLoaded();const d=this.getImportIndex(t),v=this.stylesheet.imports||[];return d===-1?this:o?(this.fragments[d].style.setState(o),this._reloadImports(),this):(delete v[d].data,this.setImportUrl(t,v[d].url))}setImportConfig(t,o,d){this._checkLoaded();const v=this.getImportIndex(t),b=this.stylesheet.imports||[];if(v===-1)return this;o?b[v].config=o:delete b[v].config;const A=this.fragments[v];d&&A.style.stylesheet&&(A.style.stylesheet.schema=d);const k=A.style.stylesheet&&A.style.stylesheet.schema;return A.config=o,A.style.updateConfig(o,k),this.updateConfigDependencies(),this}removeImport(t){this._checkLoaded();const o=this.stylesheet.imports||[],d=this.getImportIndex(t);d!==-1&&(o.splice(d,1),this.fragments[d].style._remove(),this.fragments.splice(d,1),this._reloadImports())}getImportIndex(t){const o=(this.stylesheet.imports||[]).findIndex(d=>d.id===t);return o===-1&&this.fire(new n.y(new Error(`Import '${t}' does not exist in the map's style and cannot be updated.`))),o}getLayer(t){return this._mergedLayers[t]}getSources(){const t=[];for(const o in this._mergedOtherSourceCaches){const d=this._mergedOtherSourceCaches[o];d&&t.push(d.getSource())}return t}getSource(t,o){const d=this.getSourceCache(t,o);return d&&d.getSource()}getLayerSource(t){const o=this.getLayerSourceCache(t);return o&&o.getSource()}getSourceCache(t,o){const d=n.aC(t,o);return this._mergedOtherSourceCaches[d]}getLayerSourceCache(t){const o=n.aC(t.source,t.scope);return t.type==="symbol"?this._mergedSymbolSourceCaches[o]:this._mergedOtherSourceCaches[o]}getSourceCaches(t){if(t==null)return Object.values(this._mergedSourceCaches);const o=[];return this._mergedOtherSourceCaches[t]&&o.push(this._mergedOtherSourceCaches[t]),this._mergedSymbolSourceCaches[t]&&o.push(this._mergedSymbolSourceCaches[t]),o}updateSourceCaches(){const t=this._changes.getUpdatedSourceCaches();for(const o in t){const d=t[o];d==="reload"?this.reloadSource(o):d==="clear"&&this.clearSource(o)}}updateLayers(t){const o=this._changes.getUpdatedPaintProperties();for(const d of o){const v=this.getLayer(d);v&&v.updateTransitions(t)}}getImages(t,o,d){this.imageManager.getImages(o.icons,o.scope,d),this._updateTilesForChangedImages();const v=b=>{b&&b.setDependencies(o.tileID.key,o.type,o.icons)};v(this._otherSourceCaches[o.source]),v(this._symbolSourceCaches[o.source])}rasterizeImages(t,o,d){this.imageManager.rasterizeImages(o,d)}getGlyphs(t,o,d){this.glyphManager.getGlyphs(o.stacks,o.scope,d)}getResource(t,o,d){return n.cy(o,d)}getOwnSourceCache(t){return this._otherSourceCaches[t]}getOwnLayerSourceCache(t){return t.type==="symbol"?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}getOwnSourceCaches(t){const o=[];return this._otherSourceCaches[t]&&o.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&o.push(this._symbolSourceCaches[t]),o}_isSourceCacheLoaded(t){const o=this.getOwnSourceCaches(t);return o.length===0?(this.fire(new n.y(new Error(`There is no source with ID '${t}'`))),!1):o.every(d=>d.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(t,o){if(!this._clipLayerPresent&&t.type!=="fill-extrusion")return!1;const d=t.type==="fill-extrusion"&&t.sourceLayer==="building";if(t.is3D()){if(d||o&&o.type==="batched-model"||t.type==="model")return!0}else if(t.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(t=>{t.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ne.getSourceType=function(u){return $o[u]},ne.setSourceType=function(u,t){$o[u]=t},ne.registerForPluginStateChange=n.ch;var ge=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,xe=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,xt=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,pn="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Mn=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Hn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Qn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,tr=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Ir=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,oi=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ni=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const _i=[];xo(ge,_i),xo(xt,_i),xo(xe,_i);const wi={"_prelude_fog.vertex.glsl":Hn,"_prelude_terrain.vertex.glsl":Mn,"_prelude_shadow.vertex.glsl":oi,"_prelude_fog.fragment.glsl":Qn,"_prelude_shadow.fragment.glsl":ni,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":tr,"_prelude_raster_particle.glsl":Ir},Si={};Qi("",Mn),Qi(Qn,Hn),Qi(ni,oi),Qi(tr,""),Qi(Ir,"");const So=Qi(xe,xt),io=ge;var Wi={background:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Qi("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Qi(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Qi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Qi("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Qi("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Qi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Qi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Qi(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Qi(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Qi(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Qi("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Qi("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Qi(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Qi(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Qi("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Qi(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,pn),skyboxGradient:Qi(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,pn),skyboxCapture:Qi(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Qi(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Qi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Qi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Qi(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:Qi("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:Qi("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:Qi("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:Qi("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function xo(u,t){const o=u.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let d of o)if(d=d.trim(),d[0]==="#"&&d.includes("if")&&!d.includes("endif")){d=d.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=d.split(" ");for(const b of v)t.includes(b)||t.push(b)}}function Qi(u,t){const o=/#include\s+"([^"]+)"/g,d=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=t.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(q=>{const re=q.split(" ");return re[re.length-1]}),v=[...new Set(v)]);const b={},A=[],k=[];if(u=u.replace(o,(q,re)=>(k.push(re),"")),(t=t.replace(o,(q,re)=>(A.push(re),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let Z=[..._i];xo(u,Z),xo(t,Z);for(const q of[...A,...k])wi[q]||console.error(`Undefined include: ${q}`),Si[q]||(Si[q]=[],xo(wi[q],Si[q])),Z=[...Z,...Si[q]];return{fragmentSource:u=u.replace(d,(q,re,fe,pe,Te)=>(b[Te]=!0,re==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
in ${fe} ${pe} ${Te};
#else
uniform ${fe} ${pe} u_${Te};
#endif
`:re==="initialize"?`
#ifdef HAS_UNIFORM_u_${Te}
    ${fe} ${pe} ${Te} = u_${Te};
#endif
`:re==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Te}
    in ${fe} ${pe} ${Te};
#endif
`:re==="initialize-attribute"?"":void 0)),vertexSource:t=t.replace(d,(q,re,fe,pe,Te)=>{const et=pe==="float"?"vec2":pe,We=Te.match(/color/)?"color":et;return re==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Te}
in ${fe} ${pe} a_${Te};
#endif
`:b[Te]?re==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
uniform lowp float u_${Te}_t;
in ${fe} ${et} a_${Te};
out ${fe} ${pe} ${Te};
#else
uniform ${fe} ${pe} u_${Te};
#endif
`:re==="initialize"?We==="vec4"?`
#ifndef HAS_UNIFORM_u_${Te}
    ${Te} = a_${Te};
#else
    ${fe} ${pe} ${Te} = u_${Te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Te}
    ${Te} = unpack_mix_${We}(a_${Te}, u_${Te}_t);
#else
    ${fe} ${pe} ${Te} = u_${Te};
#endif
`:re==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Te}
    in ${fe} ${pe} a_${Te};
    out ${fe} ${pe} ${Te};
#endif
`:re==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Te}
    ${Te} = a_${Te};
#endif
`:void 0:re==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
uniform lowp float u_${Te}_t;
in ${fe} ${et} a_${Te};
#else
uniform ${fe} ${pe} u_${Te};
#endif
`:re==="define-instanced"?We==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Te}0;
in vec4 a_${Te}1;
in vec4 a_${Te}2;
in vec4 a_${Te}3;
#else
uniform ${fe} ${pe} u_${Te};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${fe} ${et} a_${Te};
#else
uniform ${fe} ${pe} u_${Te};
#endif
`:re==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Te}
    ${fe} ${pe} ${Te} = a_${Te};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${Te}
    ${fe} ${pe} ${Te} = a_${Te};
#else
    ${fe} ${pe} ${Te} = u_${Te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Te}
    ${fe} ${pe} ${Te} = unpack_mix_${We}(a_${Te}, u_${Te}_t);
#else
    ${fe} ${pe} ${Te} = u_${Te};
#endif
`}),staticAttributes:v,usedDefines:Z,vertexIncludes:A,fragmentIncludes:k}}class Ho{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,o,d,v,b,A,k,Z){this.context=t;let q=this.boundPaintVertexBuffers.length!==v.length;for(let fe=0;!q&&fe<v.length;fe++)this.boundPaintVertexBuffers[fe]!==v[fe]&&(q=!0);let re=this.boundDynamicVertexBuffers.length!==k.length;for(let fe=0;!re&&fe<k.length;fe++)this.boundDynamicVertexBuffers[fe]!==k[fe]&&(re=!0);if(!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==d||q||re||this.boundIndexBuffer!==b||this.boundVertexOffset!==A)this.freshBind(o,d,v,b,A,k,Z);else{t.bindVertexArrayOES.set(this.vao);for(const fe of k)fe&&(fe.bind(),Z&&fe.instanceCount&&fe.setVertexAttribDivisor(t.gl,o,Z));b&&b.dynamicDraw&&b.bind()}}freshBind(t,o,d,v,b,A,k){const Z=t.numAttributes,q=this.context,re=q.gl;this.vao&&this.destroy(),this.vao=q.gl.createVertexArray(),q.bindVertexArrayOES.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=A,o.enableAttributes(re,t),o.bind(),o.setVertexAttribPointers(re,t,b);for(const fe of d)fe.enableAttributes(re,t),fe.bind(),fe.setVertexAttribPointers(re,t,b);for(const fe of A)fe&&(fe.enableAttributes(re,t),fe.bind(),fe.setVertexAttribPointers(re,t,b),k&&fe.instanceCount&&fe.setVertexAttribDivisor(re,t,k));v&&v.bind(),q.currentNumAttributes=Z}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function La(u,t){const o=Math.pow(2,t.canonical.z),d=t.canonical.y;return[new n.aa(0,d/o).toLngLat().lat,new n.aa(0,(d+1)/o).toLngLat().lat]}function as(u,t,o,d,v,b,A){const k=u.context,Z=k.gl,q=o.hillshadeFBO;if(!q)return;u.prepareDrawTile();const re=u.isTileAffectedByFog(t),fe=u.getOrCreateProgram("hillshade",{overrideFog:re});k.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,q.colorAttachment.get());const pe=((rt,it,kt,qt)=>{const Qt=kt.paint.get("hillshade-shadow-color"),vn=kt.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",on=kt.paint.get("hillshade-highlight-color"),dn=kt.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",nn=kt.paint.get("hillshade-accent-color"),Rn=kt.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",$n=kt.paint.get("hillshade-emissive-strength");let Pr=n.ai(kt.paint.get("hillshade-illumination-direction"));if(kt.paint.get("hillshade-illumination-anchor")==="viewport")Pr-=rt.transform.angle;else if(rt.style&&rt.style.enable3dLights()&&rt.style.directionalLight){const Or=rt.style.directionalLight.properties.get("direction"),kr=n.cb(Or.x,Or.y,Or.z);Pr=n.ai(kr[1])}const dr=!rt.options.moving;return{u_matrix:qt||rt.transform.calculateProjMatrix(it.tileID.toUnwrapped(),dr),u_image:0,u_latrange:La(0,it.tileID),u_light:[kt.paint.get("hillshade-exaggeration"),Pr],u_shadow:Qt.toRenderColor(vn?null:kt.lut),u_highlight:on.toRenderColor(dn?null:kt.lut),u_emissive_strength:$n,u_accent:nn.toRenderColor(Rn?null:kt.lut)}})(u,o,d,u.terrain?t.projMatrix:null);u.uploadCommonUniforms(k,fe,t.toUnwrapped());const{tileBoundsBuffer:Te,tileBoundsIndexBuffer:et,tileBoundsSegments:We}=u.getTileBoundsBuffers(o);fe.draw(u,Z.TRIANGLES,v,b,A,Mo.disabled,pe,d.id,Te,et,We)}function Ja(u,t,o){if(!t.needsDEMTextureUpload)return;const d=u.context,v=d.gl;d.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||u.getTileTexture(o.stride);const b=o.getPixels();t.demTexture?t.demTexture.update(b,{premultiply:!1}):t.demTexture=new n.T(d,b,v.R32F,{premultiply:!1}),t.needsDEMTextureUpload=!1}function Rs(u,t,o){const d=u.context,v=d.gl;if(!t.dem)return;const b=t.dem;if(d.activeTexture.set(v.TEXTURE1),Ja(u,t,b),!t.demTexture)return;t.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const A=b.dim;d.activeTexture.set(v.TEXTURE0);let k=t.hillshadeFBO;if(!k){const pe=new n.T(d,{width:A,height:A,data:null},v.RGBA8);pe.bind(v.LINEAR,v.CLAMP_TO_EDGE),k=t.hillshadeFBO=d.createFramebuffer(A,A,!0,"renderbuffer"),k.colorAttachment.set(pe.texture)}d.bindFramebuffer.set(k.framebuffer),d.viewport.set([0,0,A,A]);const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:q,tileBoundsSegments:re}=u.getMercatorTileBoundsBuffers(),fe=[];u.linearFloatFilteringSupported()&&fe.push("TERRAIN_DEM_FLOAT_FORMAT"),u.getOrCreateProgram("hillshadePrepare",{defines:fe}).draw(u,v.TRIANGLES,Ui.disabled,Io.disabled,go.unblended,Mo.disabled,((pe,Te)=>{const et=Te.stride,We=n.ab.mat4.create();return n.ab.mat4.ortho(We,0,n.ag,-n.ag,0,0,1),n.ab.mat4.translate(We,We,[0,-n.ag,0]),{u_matrix:We,u_image:1,u_dimension:[et,et],u_zoom:pe.overscaledZ}})(t.tileID,b),o.id,Z,q,re),t.needsHillshadePrepare=!1}class Go{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ti extends Go{getDefault(){return n.aj.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ei extends Go{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class fr extends Go{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class nr extends Go{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class _r extends Go{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class ei extends Go{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Xr extends Go{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class fi extends Go{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Vi extends Go{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class vo extends Go{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ro extends Go{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class _a extends Go{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class ca extends Go{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class ta extends Go{getDefault(){const t=this.gl;return[t.ONE,t.ZERO,t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ds extends Go{getDefault(){return n.aj.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class iu extends Go{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(t,t),this.current=t,this.dirty=!1)}}class Ks extends Go{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class Ou extends Go{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class bl extends Go{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}let vs=class extends Go{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}};class Co extends Go{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Pl extends Go{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class As extends Go{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class nl extends Go{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ol extends Go{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Ac extends Go{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Su extends Go{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Bs extends Go{getDefault(){return null}set(t){this.gl&&(t!==this.current||this.dirty)&&(this.gl.bindVertexArray(t),this.current=t,this.dirty=!1)}}class hs extends Go{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class ou extends Go{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class fl extends Go{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class pl extends Go{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Rl extends pl{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class au extends pl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,this.attachment(),o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Xu extends pl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,this.attachment(),o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Ys extends au{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const sc=(u,t,o)=>({u_matrix:u,u_image0:0,u_skirt_height:t,u_ground_shadow_factor:o}),hu=(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We)=>({u_proj_matrix:Float32Array.from(u),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(d),u_merc_matrix:o,u_zoom_transition:v,u_merc_center:b,u_image0:0,u_frustum_tl:A,u_frustum_tr:k,u_frustum_br:Z,u_frustum_bl:q,u_globe_pos:re,u_globe_radius:fe,u_viewport:pe,u_grid_matrix:We?Float32Array.from(We):new Float32Array(9),u_skirt_height:Te,u_far_z_cutoff:et});function vc(u,t){return u!=null&&t!=null&&!(!u.hasData()||!t.hasData())&&u.demTexture!=null&&t.demTexture!=null&&u.tileID.key!==t.tileID.key}const js=new class{constructor(){this.operations={}}newMorphing(u,t,o,d,v){if(u in this.operations){const b=this.operations[u];b.to.tileID.key!==o.tileID.key&&(b.queued=o)}else this.operations[u]={startTime:d,phase:0,duration:v,from:t,to:o,queued:null}}getMorphValuesForProxy(u){if(!(u in this.operations))return null;const t=this.operations[u];return{from:t.from,to:t.to,phase:t.phase}}update(u){for(const t in this.operations){const o=this.operations[t];for(o.phase=(u-o.startTime)/o.duration;o.phase>=1||!this._validOp(o);)if(!this._nextOp(o,u)){delete this.operations[t];break}}}_nextOp(u,t){return!!u.queued&&(u.from=u.to,u.to=u.queued,u.queued=null,u.phase=0,u.startTime=t,!0)}_validOp(u){return u.from.hasData()&&u.to.hasData()}},lc={0:null,1:"TERRAIN_VERTEX_MORPHING"};function $l(u,t,o){if(t===0)return 0;const d=t<1&&o===514?.25/t:1;return 6*Math.pow(1.5,22-u)*Math.max(t,1)*d}function tu(u,t){const o=1<<u.z;return!t&&(u.x===0||u.x===o-1)||u.y===0||u.y===o-1}const zu=u=>({u_matrix:u});function _s(u,t,o,d,v){if(v>0){const b=n.q.now(),A=(b-u.timeAdded)/v,k=t?(b-t.timeAdded)/v:-1,Z=o.getSource(),q=d.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),re=!t||Math.abs(t.tileID.overscaledZ-q)>Math.abs(u.tileID.overscaledZ-q),fe=re&&u.refreshedUponExpiration?1:n.aw(re?A:1-k,0,1);return u.refreshedUponExpiration&&A>=1&&(u.refreshedUponExpiration=!1),t?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}class Xi extends No{constructor(t){const o={type:"raster-dem",maxzoom:t.transform.maxZoom},d=new n.D(n.ci(),null),v=Aa("mock-dem",o,d,t.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,o){t.state="loaded",o(null)}}class Qo extends No{constructor(t){const o=Aa("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new n.D(n.ci(),null),t.style);super("proxy",o,!1),o.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,o,d){if(t.freezeTileCoverage)return;this.transform=t;const v=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,A)=>{if(b[A.key]="",!this._tiles[A.key]){const k=new ua(A,this._source.tileSize*A.overscaleFactor(),t.tileZoom);k.state="loaded",this._tiles[A.key]=k}return b},{});for(const b in this._tiles)b in v||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(t){const o=this.proxyCachedFBO[t];if(o!==void 0){const d=Object.values(o);this.renderCachePool.push(...d),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach(t=>t.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ua extends n.aG{constructor(t,o,d){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=o,this.projMatrix=d}}class al extends n.cJ{constructor(t,o){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},t.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),t.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),t.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[d,v,b]=function(Z){const q=new n.b4,re=new n.aU,fe=131;q.reserve(17161),re.reserve(33800);const pe=n.ag/128,Te=n.ag+pe/2,et=Te+pe;for(let rt=-pe;rt<et;rt+=pe)for(let it=-pe;it<et;it+=pe){const kt=it<0||it>Te||rt<0||rt>Te?24575:0,qt=n.aw(Math.round(it),0,n.ag),Qt=n.aw(Math.round(rt),0,n.ag);q.emplaceBack(qt+kt,Qt)}const We=(rt,it)=>{const kt=it*fe+rt;re.emplaceBack(kt+1,kt,kt+fe),re.emplaceBack(kt+fe,kt+fe+1,kt+1)};for(let rt=1;rt<129;rt++)for(let it=1;it<129;it++)We(it,rt);return[0,129].forEach(rt=>{for(let it=0;it<130;it++)We(it,rt),We(rt,it)}),[q,re,32768]}(),A=t.context;this.gridBuffer=A.createVertexBuffer(d,n.b6.members),this.gridIndexBuffer=A.createIndexBuffer(v),this.gridSegments=n.b7.simpleSegment(0,0,d.length,v.length),this.gridNoSkirtSegments=n.b7.simpleSegment(0,0,d.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Qo(o.map),this.orthoMatrix=n.ab.mat4.create(),n.ab.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ag,0,n.ag,0,1);const k=A.gl;this._overlapStencilMode=new Io({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=o,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Xi(o.map),this._pendingGroundEffectLayers=[]}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),this._style=t,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(t,o,d){if(t&&t.terrain){this._style!==t&&(this.style=t,this._evaluationZoom=void 0);const v=t.terrain.properties,b=t.terrain.drapeRenderMode===0,A=t.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const k=t.terrain&&t.terrain.scope,Z=v.get("source"),q=b?this._mockSourceCache:t.getSourceCache(Z,k);if(!q)return void n.w(`Couldn't find terrain source "${Z}".`);if(this.sourceCache=q,this._attenuationRange=t.terrain.getAttenuationRange(),this._exaggeration=A?this.calculateExaggeration(o):v.get("exaggeration"),!o.projection.requiresDraping&&A&&this._exaggeration===0)return void this._disable();this.enabled=!0;const re=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const fe=this.getScaledDemTileSize();this.sourceCache.update(o,fe,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,re(),this._initializing=!0),re(),o.updateElevation(!0,d),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(o),this._emptyDEMTextureDirty=!0,this._previousZoom=o.zoom}else this._disable()}calculateExaggeration(t){if(this._attenuationRange&&t.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(t.zoom);const o=this._previousCameraAltitude,d=t.getFreeCameraOptions().position.z/t.pixelsPerMeter*t.worldSize;this._previousCameraAltitude=d;const v=o!=null?d-o:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const b=t.zoom,A=this._style.terrain;if(!this._previousUpdateTimestamp)return A.getExaggeration(b);let k=b-this._previousZoom;const Z=this._previousUpdateTimestamp;let q=b;this._evaluationZoom!=null&&(q=this._evaluationZoom,Math.abs(b-q)>.5&&(k=.5*(b-q+k)),k*v<0&&(q+=k)),this._evaluationZoom=q;const re=A.getExaggeration(q),fe=re===A.getExaggeration(Math.max(0,q-.1));if(fe&&Math.abs(re-this._exaggeration)<.01)return re;let pe=Math.min(.1,.00375*(this._updateTimestamp-Z));return(fe||re<.1||Math.abs(k)<1e-4)&&(pe=Math.min(.2,4*pe)),n.af(this._exaggeration,re,pe)}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(t){t.coord&&t.dataType==="source"?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):t.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._mergedSourceCaches)this._style._mergedSourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(t=>t.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const o=this.proxySourceCache,d=this.painter.transform;this._initializing&&(this._initializing=d._centerAltitude===0&&this.getAtPointOrZero(n.aa.fromLngLat(d.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=o.getIds().map(Z=>{const q=o.getTileByID(Z).tileID;return q.projMatrix=d.calculateProjMatrix(q.toUnwrapped()),q});(function(Z,q){const re=q.transform.pointCoordinate(q.transform.getCameraPoint()),fe=new n.P(re.x,re.y);Z.sort((pe,Te)=>{if(Te.overscaledZ-pe.overscaledZ)return Te.overscaledZ-pe.overscaledZ;const et=new n.P(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),We=new n.P(Te.canonical.x+(1<<Te.canonical.z)*Te.wrap,Te.canonical.y),rt=fe.mult(1<<pe.canonical.z);return rt.x-=.5,rt.y-=.5,rt.distSqr(et)-rt.distSqr(We)})})(v,this.painter);const b=this.proxyToSource||{};this.proxyToSource={},v.forEach(Z=>{this.proxyToSource[Z.key]={}}),this.terrainTileForTile={};const A=this._style._mergedSourceCaches;for(const Z in A){const q=A[Z];if(!q.used||(q!==this.sourceCache&&this.resetTileLookupCache(q.id),this._setupProxiedCoordsForOrtho(q,t[Z],b),q.usedForTerrain))continue;const re=t[Z];q.getSource().reparseOverscaled&&this._assignTerrainTiles(re)}this.proxiedCoords[o.id]=v.map(Z=>new Ua(Z,Z.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1;const k={};this._visibleDemTiles=[];for(const Z of this.proxyCoords){const q=this.terrainTileForTile[Z.key];if(!q)continue;const re=q.tileID.key;re in k||(this._visibleDemTiles.push(q),k[re]=re)}}_assignTerrainTiles(t){this._initializing||t.forEach(o=>{if(this.terrainTileForTile[o.key])return;const d=this._findTileCoveringTileID(o,this.sourceCache);d&&(this.terrainTileForTile[o.key]=d)})}_prepareDEMTextures(){const t=this.painter.context,o=t.gl;for(const d in this.terrainTileForTile){const v=this.terrainTileForTile[d],b=v.dem;!b||v.demTexture&&!v.needsDEMTextureUpload||(t.activeTexture.set(o.TEXTURE1),Ja(this.painter,v,b))}}_prepareDemTileUniforms(t,o,d,v){if(!o||o.demTexture==null)return!1;const b=t.tileID.canonical,A=Math.pow(2,o.tileID.canonical.z-b.z),k=v||"";return d[`u_dem_tl${k}`]=[b.x*A%1,b.y*A%1],d[`u_dem_scale${k}`]=A,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let t=0;const o=this._visibleDemTiles.reduce((d,v)=>{if(!v.dem)return d;const b=v.dem.tree.minimums[0];return b>0&&t++,d+b},0);return t?o/t:0}_updateEmptyDEMTexture(){const t=this.painter.context,o=t.gl;t.activeTexture.set(o.TEXTURE2);const d=this._getLoadedAreaMinimum(),v=new n.cK({width:1,height:1},new Float32Array([d]));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(v,{premultiply:!1}):b=this._emptyDEMTexture=new n.T(t,v,o.R32F,{premultiply:!1}),b}setupElevationDraw(t,o,d){const v=this.painter.context,b=v.gl,A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};A.u_exaggeration=this.exaggeration();let k=null,Z=null,q=1;if(d&&d.morphing&&this._useVertexMorphing){const Te=d.morphing.srcDemTile,et=d.morphing.dstDemTile;q=d.morphing.phase,Te&&et&&(this._prepareDemTileUniforms(t,Te,A,"_prev")&&(Z=Te),this._prepareDemTileUniforms(t,et,A)&&(k=et))}const re=Te=>Te&&Te.demTexture&&this.painter.linearFloatFilteringSupported()?b.LINEAR:b.NEAREST;let fe=null;var pe;if(this.enabled?Z&&k?(fe=k.demTexture,v.activeTexture.set(b.TEXTURE4),Z.demTexture.bind(re(Z),b.CLAMP_TO_EDGE),A.u_dem_lerp=q):(k=this.terrainTileForTile[t.tileID.key],fe=this._prepareDemTileUniforms(t,k,A)?k.demTexture:this.emptyDEMTexture):fe=this.emptyDEMTexture,v.activeTexture.set(b.TEXTURE2),fe&&(A.u_dem_size=(pe=fe).size[0]===1?1:pe.size[0]-2,fe.bind(re(k),b.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(d&&d.useDepthForOcclusion,o,A),d&&d.useMeterToDem&&k){const Te=(1<<k.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;A.u_meter_to_dem=Te}if(d&&d.labelPlaneMatrixInv&&(A.u_label_plane_matrix_inv=d.labelPlaneMatrixInv),o.setTerrainUniformValues(v,A),this.painter.transform.projection.name==="globe"){const Te=this.globeUniformValues(this.painter.transform,t.tileID.canonical,d&&d.useDenormalizedUpVectorScale);o.setGlobeUniformValues(v,Te)}}globeUniformValues(t,o,d){const v=t.projection;return{u_tile_tl_up:v.upVector(o,0,0),u_tile_tr_up:v.upVector(o,n.ag,0),u_tile_br_up:v.upVector(o,n.ag,n.ag),u_tile_bl_up:v.upVector(o,0,n.ag),u_tile_up_scale:d?n.cL(1):v.upVectorScale(o,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const o=this.painter,d=this.painter.context;t.length!==0&&(d.bindFramebuffer.set(null),d.viewport.set([0,0,o.width,o.height]),o.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,b,A,k,Z){if(v.transform.projection.name==="globe")(function(q,re,fe,pe,Te){const et=q.context,We=et.gl;let rt,it;const kt=q.transform,qt=n.cC(q,et,kt),Qt=(Or,kr)=>{if(it===kr)return;const Yn=[lc[kr],"PROJECTION_GLOBE_VIEW"];qt&&Yn.push("CUSTOM_ANTIALIASING");const Mr=q.isTileAffectedByFog(Or);rt=q.getOrCreateProgram("globeRaster",{defines:Yn,overrideFog:Mr}),it=kr},vn=q.colorModeForRenderPass(),on=new Ui(We.LEQUAL,Ui.ReadWrite,q.depthRangeFor3D);js.update(Te);const dn=n.cD(kt),nn=[n.at(kt.center.lng),n.aA(kt.center.lat)],Rn=q.globeSharedBuffers,$n=[kt.width*n.q.devicePixelRatio,kt.height*n.q.devicePixelRatio],Pr=Float32Array.from(kt.globeMatrix),dr={useDenormalizedUpVectorScale:!0};{const Or=q.transform,kr=$l(Or.zoom,re.exaggeration(),re.sourceCache._source.tileSize);it=-1;const Yn=We.TRIANGLES;for(const Mr of pe){const ti=fe.getTile(Mr),ir=Io.disabled,Fr=re.prevTerrainTileForTile[Mr.key],Cr=re.terrainTileForTile[Mr.key];vc(Fr,Cr)&&js.newMorphing(Mr.key,Fr,Cr,Te,250),et.activeTexture.set(We.TEXTURE0),ti.texture&&ti.texture.bind(We.LINEAR,We.CLAMP_TO_EDGE);const xi=js.getMorphValuesForProxy(Mr.key),ri=xi?1:0;xi&&n.J(dr,{morphing:{srcDemTile:xi.from,dstDemTile:xi.to,phase:n.cB(xi.phase)}});const Kr=n.cE(Mr.canonical),mi=n.cF(Kr.getCenter().lat),gi=n.cG(Mr.canonical,Kr,mi,Or.worldSize/Or._pixelsPerMercatorPixel),Gi=n.bb(n.cH(Mr.canonical)),Li=hu(Or.expandedFarZProjMatrix,Pr,dn,Gi,n.ae(Or.zoom),nn,Or.frustumCorners.TL,Or.frustumCorners.TR,Or.frustumCorners.BR,Or.frustumCorners.BL,Or.globeCenterInViewSpace,Or.globeRadius,$n,kr,Or._farZ,gi);if(Qt(Mr,ri),rt&&(re.setupElevationDraw(ti,rt,dr),q.uploadCommonUniforms(et,rt,Mr.toUnwrapped()),Rn)){const[bo,wo,Ao]=Rn.getGridBuffers(mi,kr!==0);rt.draw(q,Yn,on,ir,vn,Mo.backCCW,Li,"globe_raster",bo,wo,Ao)}}}if(Rn&&(q.renderDefaultNorthPole||q.renderDefaultSouthPole)){const Or=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];qt&&Or.push("CUSTOM_ANTIALIASING"),rt=q.getOrCreateProgram("globeRaster",{defines:Or});for(const kr of pe){const{x:Yn,y:Mr,z:ti}=kr.canonical,ir=Mr===0,Fr=Mr===(1<<ti)-1,[Cr,xi,ri,Kr]=Rn.getPoleBuffers(ti,!1);if(Kr&&(ir||Fr)){const mi=fe.getTile(kr);et.activeTexture.set(We.TEXTURE0),mi.texture&&mi.texture.bind(We.LINEAR,We.CLAMP_TO_EDGE);let gi=n.cI(ti,Yn,kt);const Gi=n.bb(n.cH(kr.canonical)),Li=(bo,wo)=>bo.draw(q,We.TRIANGLES,on,Io.disabled,vn,Mo.disabled,hu(kt.expandedFarZProjMatrix,gi,gi,Gi,0,nn,kt.frustumCorners.TL,kt.frustumCorners.TR,kt.frustumCorners.BR,kt.frustumCorners.BL,kt.globeCenterInViewSpace,kt.globeRadius,$n,0,kt._farZ),"globe_pole_raster",wo,ri,Kr);re.setupElevationDraw(mi,rt,dr),q.uploadCommonUniforms(et,rt,kr.toUnwrapped()),ir&&q.renderDefaultNorthPole&&Li(rt,Cr),Fr&&q.renderDefaultSouthPole&&(gi=n.ab.mat4.scale(n.ab.mat4.create(),gi,[1,-1,1]),Li(rt,xi))}}}})(v,b,A,k,Z);else{const q=v.context,re=q.gl;let fe,pe;const Te=v.shadowRenderer,et=Nr(v,v.longestCutoffRange),We=vn=>{if(pe===vn)return;const on=[];on.push(lc[vn]),et.shouldRenderCutoff&&on.push("RENDER_CUTOFF"),Te&&(on.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Te.useNormalOffset&&on.push("NORMAL_OFFSET")),fe=v.getOrCreateProgram("terrainRaster",{defines:on}),pe=vn},rt=v.colorModeForRenderPass(),it=new Ui(re.LEQUAL,Ui.ReadWrite,v.depthRangeFor3D);js.update(Z);const kt=v.transform,qt=$l(kt.zoom,b.exaggeration(),b.sourceCache._source.tileSize);let Qt=[0,0,0];if(Te){const vn=v.style.directionalLight,on=v.style.ambientLight;vn&&on&&(Qt=Zi(v.style,vn,on))}{pe=-1;const vn=re.TRIANGLES,[on,dn]=[b.gridIndexBuffer,b.gridSegments];for(const nn of k){const Rn=A.getTile(nn),$n=Io.disabled,Pr=b.prevTerrainTileForTile[nn.key],dr=b.terrainTileForTile[nn.key];vc(Pr,dr)&&js.newMorphing(nn.key,Pr,dr,Z,250),q.activeTexture.set(re.TEXTURE0),Rn.texture&&Rn.texture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const Or=js.getMorphValuesForProxy(nn.key),kr=Or?1:0;let Yn;Or&&(Yn={morphing:{srcDemTile:Or.from,dstDemTile:Or.to,phase:n.cB(Or.phase)}});const Mr=sc(nn.projMatrix,tu(nn.canonical,kt.renderWorldCopies)?qt/10:qt,Qt);if(We(kr),!fe)continue;b.setupElevationDraw(Rn,fe,Yn);const ti=nn.toUnwrapped();Te&&Te.setupShadows(ti,fe),v.uploadCommonUniforms(q,fe,ti,null,et),fe.draw(v,vn,it,$n,rt,Mo.backCCW,Mr,"terrain_raster",b.gridBuffer,on,dn)}}}}(o,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,o.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(this._drapedRenderBatches.length===0)return t+1;this.renderingToTexture=!0;const o=this.painter,d=this.painter.context,v=this.proxySourceCache,b=this.proxiedCoords[v.id],A=this._drapedRenderBatches.shift(),k=o.style.order,Z=[];let q=0;for(const re of b){const fe=v.getTileByID(re.proxyTileKey),pe=v.proxyCachedFBO[re.key]?v.proxyCachedFBO[re.key][t]:void 0,Te=pe!==void 0?v.renderCache[pe]:this.pool[q++],et=pe!==void 0;if(fe.texture=Te.tex,et&&!Te.dirty){Z.push(fe.tileID);continue}let We;d.bindFramebuffer.set(Te.fb.framebuffer),this.renderedToTile=!1,Te.dirty&&(d.clear({color:n.aj.transparent,stencil:0}),Te.dirty=!1);for(let rt=A.start;rt<=A.end;++rt){const it=o.style._mergedLayers[k[rt]];if(it.isHidden(o.transform.zoom))continue;const kt=o.style.getLayerSourceCache(it),qt=kt?this.proxyToSource[re.key][kt.id]:[re];if(!qt)continue;const Qt=qt;d.viewport.set([0,0,Te.fb.width,Te.fb.height]),We!==(kt?kt.id:null)&&(this._setupStencil(Te,qt,it,kt),We=kt?kt.id:null),o.renderLayer(o,kt,it,Qt)}if(this._drapedRenderBatches.length===0)for(const rt of this._pendingGroundEffectLayers){const it=o.style._mergedLayers[k[rt]];if(it.isHidden(o.transform.zoom))continue;const kt=o.style.getLayerSourceCache(it),qt=kt?this.proxyToSource[re.key][kt.id]:[re];if(!qt)continue;const Qt=qt;d.viewport.set([0,0,Te.fb.width,Te.fb.height]),We!==(kt?kt.id:null)&&(this._setupStencil(Te,qt,it,kt),We=kt?kt.id:null),o.renderLayer(o,kt,it,Qt)}this.renderedToTile?(Te.dirty=!0,Z.push(fe.tileID)):et||--q,q===5&&(q=0,this.renderToBackBuffer(Z))}return this.renderToBackBuffer(Z),this.renderingToTexture=!1,d.bindFramebuffer.set(null),d.viewport.set([0,0,o.width,o.height]),A.end+1}postRender(){}isLayerOrderingCorrect(t){const o=t.order.length;let d=-1,v=o;for(let b=0;b<o;++b)this._style.isLayerDraped(t._mergedLayers[t.order[b]])?d=Math.max(d,b):v=Math.min(v,b);return v>d}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter(o=>o.dem).forEach(o=>{t=Math.min(t,o.dem.tree.minimums[0])}),t===0?t:(t-30)*this._exaggeration}raycast(t,o,d){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const A=b.tileID,k=1<<A.overscaledZ,{x:Z,y:q}=A.canonical,re=Z/k,fe=(Z+1)/k,pe=q/k,Te=(q+1)/k;return{minx:re,miny:pe,maxx:fe,maxy:Te,t:b.dem.tree.raycastRoot(re,pe,fe,Te,t,o,d),tile:b}});v.sort((b,A)=>(b.t!==null?b.t:Number.MAX_VALUE)-(A.t!==null?A.t:Number.MAX_VALUE));for(const b of v){if(b.t==null)return null;const A=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,t,o,d);if(A!=null)return A}return null}_createFBO(){const t=this.painter.context,o=t.gl,d=this.drapeBufferSize;t.activeTexture.set(o.TEXTURE0);const v=new n.T(t,{width:d[0],height:d[1],data:null},o.RGBA8);v.bind(o.LINEAR,o.CLAMP_TO_EDGE);const b=t.createFramebuffer(d[0],d[1],!0,null);return b.colorAttachment.set(v.texture),b.depthAttachment=new Ys(t,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,d[0],d[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:b,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const t in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[t].hasTransition())return!0;return this._style.order.some(t=>{const o=this._style._mergedLayers[t],d=o.isHidden(this.painter.transform.zoom);return o.type==="hillshade"||o.type==="custom"?!d&&o.shouldRedrape():!d&&o.hasTransition()})}_clearLineLayersFromRenderCache(){let t=!1;for(const d of this._style.getSources())if(d instanceof po){t=!0;break}if(!t)return;const o={};for(let d=0;d<this._style.order.length;++d){const v=this._style._mergedLayers[this._style.order[d]],b=this._style.getLayerSourceCache(v);if(b&&!o[b.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof n.a9){o[b.id]=!0;for(const A of this.proxyCoords){const k=this.proxyToSource[A.key][b.id];if(k)for(const Z of k)this._clearRenderCacheForTile(b.id,Z)}}}}_clearRasterLayersFromRenderCache(){let t=!1;for(const d in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[d]._source instanceof Vo){t=!0;break}if(!t)return;const o={};for(let d=0;d<this._style.order.length;++d){const v=this._style._mergedLayers[this._style.order[d]],b=this._style.getLayerSourceCache(v);if(!b||o[b.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const A=v.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const Z=this.proxyToSource[k.key][b.id];if(Z)for(const q of Z){const re=_s(b.getTile(q),b.findLoadedParent(q,0),b,this.painter.transform,A);(re.opacity!==1||re.mix!==0)&&this._clearRenderCacheForTile(b.id,q)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const t=this._style.order,o=t.length;if(o===0)return;const d=[];this._pendingGroundEffectLayers=[];let v,b=0,A=this._style._mergedLayers[t[b]];for(;!this._style.isLayerDraped(A)&&A.isHidden(this.painter.transform.zoom)&&++b<o;)A=this._style._mergedLayers[t[b]];for(;b<o;++b){const k=this._style._mergedLayers[t[b]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?v===void 0&&(v=b):(k.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(b),v!==void 0&&(d.push({start:v,end:b-1}),v=void 0)))}if(v!==void 0&&d.push({start:v,end:b-1}),d.length!==0){const k=d[d.length-1];this._pendingGroundEffectLayers.every(Z=>Z>k.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=d}_setupRenderCache(t){const o=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,o.renderCache.length>o.renderCachePool.length){const A=Object.values(o.proxyCachedFBO);o.proxyCachedFBO={};for(let k=0;k<A.length;++k){const Z=Object.values(A[k]);o.renderCachePool.push(...Z)}}return}this._clearRasterLayersFromRenderCache();const d=this.proxyCoords,v=this._tilesDirty;for(let A=d.length-1;A>=0;A--){const k=d[A];if(o.getTileByID(k.key),o.proxyCachedFBO[k.key]!==void 0){const Z=t[k.key],q=this.proxyToSource[k.key];let re=0;for(const fe in q){const pe=q[fe],Te=Z[fe];if(!Te||Te.length!==pe.length||pe.some((et,We)=>et!==Te[We]||v[fe]&&v[fe].hasOwnProperty(et.key))){re=-1;break}++re}for(const fe in o.proxyCachedFBO[k.key])o.renderCache[o.proxyCachedFBO[k.key][fe]].dirty=re<0||re!==Object.values(Z).length}}const b=[...this._drapedRenderBatches];b.sort((A,k)=>k.end-k.start-(A.end-A.start));for(const A of b)for(const k of d){if(o.proxyCachedFBO[k.key])continue;let Z=o.renderCachePool.pop();Z===void 0&&o.renderCache.length<50&&(Z=o.renderCache.length,o.renderCache.push(this._createFBO())),Z!==void 0&&(o.proxyCachedFBO[k.key]={},o.proxyCachedFBO[k.key][A.start]=Z,o.renderCache[Z].dirty=!0)}this._tilesDirty={}}_setupStencil(t,o,d,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,A=b.gl;if(o.length<=1)return void(this._overlapStencilType=!1);let k;if(d.isTileClipped())k=o.length,this._overlapStencilMode.test={func:A.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(o[0].overscaledZ>o[o.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:A.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,d.isTileClipped()&&this._renderTileClippingMasks(o,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):Io.disabled}_renderTileClippingMasks(t,o){const d=this.painter,v=this.painter.context,b=v.gl;d._tileClippingMaskIDs={},v.setColorMode(go.disabled),v.setDepthMode(Ui.disabled);const A=d.getOrCreateProgram("clippingMask");for(const k of t){const Z=d._tileClippingMaskIDs[k.key]=--o;A.draw(d,b.TRIANGLES,Ui.disabled,new Io({func:b.ALWAYS,mask:0},Z,255,b.KEEP,b.KEEP,b.REPLACE),go.disabled,Mo.disabled,zu(k.projMatrix),"$clipping",d.tileExtentBuffer,d.quadTriangleIndexBuffer,d.tileExtentSegments)}}pointCoordinate(t){const o=this.painter.transform;if(t.x<0||t.x>o.width||t.y<0||t.y>o.height)return null;const d=[t.x,t.y,1,1];n.ab.vec4.transformMat4(d,d,o.pixelMatrixInverse),n.ab.vec4.scale(d,d,1/d[3]),d[0]/=o.worldSize,d[1]/=o.worldSize;const v=o._camera.position,b=n.bH(1,o.center.lat),A=[v[0],v[1],v[2]/b,0],k=n.ab.vec3.subtract([],d.slice(0,3),A);n.ab.vec3.normalize(k,k);const Z=this.raycast(A,k,this._exaggeration);return Z!==null&&Z?(n.ab.vec3.scaleAndAdd(A,A,k,Z),A[3]=A[2],A[2]*=b,A):null}_setupProxiedCoordsForOrtho(t,o,d){if(t.getSource()instanceof n.aJ)return this._setupProxiedCoordsForImageSource(t,o,d);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const v=this.proxiedCoords[t.id]=[],b=this.proxyCoords;for(let Z=0;Z<b.length;Z++){const q=b[Z],re=this._findTileCoveringTileID(q,t);if(re){const fe=this._createProxiedId(q,re,d[q.key]&&d[q.key][t.id]);v.push(fe),this.proxyToSource[q.key][t.id]=[fe]}}let A=!1;const k=new Set;for(let Z=0;Z<o.length;Z++){const q=t.getTile(o[Z]);if(!q||!q.hasData())continue;const re=this._findTileCoveringTileID(q.tileID,this.proxySourceCache);if(re&&re.tileID.canonical.z!==q.tileID.canonical.z){const fe=this.proxyToSource[re.tileID.key][t.id],pe=this._createProxiedId(re.tileID,q,d[re.tileID.key]&&d[re.tileID.key][t.id]);fe?fe.splice(fe.length-1,0,pe):this.proxyToSource[re.tileID.key][t.id]=[pe];const Te=this.proxyToSource[re.tileID.key][t.id];k.has(Te)||k.add(Te),v.push(pe),A=!0}}if(this._sourceTilesOverlap[t.id]=A,A&&this._debugParams.sortTilesHiZFirst)for(const Z of k)Z.sort((q,re)=>re.overscaledZ-q.overscaledZ)}_setupProxiedCoordsForImageSource(t,o,d){if(!t.getSource().loaded())return;const v=this.proxiedCoords[t.id]=[],b=this.proxyCoords,A=t.getSource(),k=A.tileID;if(!k)return;const Z=new n.P(k.x,k.y)._div(1<<k.z),q=A.coordinates.map(n.aa.fromLngLat).reduce((fe,pe)=>(fe.min.x=Math.min(fe.min.x,pe.x-Z.x),fe.min.y=Math.min(fe.min.y,pe.y-Z.y),fe.max.x=Math.max(fe.max.x,pe.x-Z.x),fe.max.y=Math.max(fe.max.y,pe.y-Z.y),fe),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),re=(fe,pe)=>{const Te=fe.wrap+fe.canonical.x/(1<<fe.canonical.z),et=fe.canonical.y/(1<<fe.canonical.z),We=n.ag/(1<<fe.canonical.z),rt=pe.wrap+pe.canonical.x/(1<<pe.canonical.z),it=pe.canonical.y/(1<<pe.canonical.z);return Te+We<rt+q.min.x||Te>rt+q.max.x||et+We<it+q.min.y||et>it+q.max.y};for(let fe=0;fe<b.length;fe++){const pe=b[fe];for(let Te=0;Te<o.length;Te++){const et=t.getTile(o[Te]);if(!et||!et.hasData()||re(pe,et.tileID))continue;const We=this._createProxiedId(pe,et,d[pe.key]&&d[pe.key][t.id]),rt=this.proxyToSource[pe.key][t.id];rt?rt.push(We):this.proxyToSource[pe.key][t.id]=[We],v.push(We)}}}_createProxiedId(t,o,d){let v=this.orthoMatrix;if(d){const b=d.find(A=>A.key===o.tileID.key);if(b)return b}if(o.tileID.key!==t.key){const b=t.canonical.z-o.tileID.canonical.z;let A,k,Z;v=n.ab.mat4.create();const q=o.tileID.wrap-t.wrap<<t.overscaledZ;b>0?(A=n.ag>>b,k=A*((o.tileID.canonical.x<<b)-t.canonical.x+q),Z=A*((o.tileID.canonical.y<<b)-t.canonical.y)):(A=n.ag<<-b,k=n.ag*(o.tileID.canonical.x-(t.canonical.x+q<<-b)),Z=n.ag*(o.tileID.canonical.y-(t.canonical.y<<-b))),n.ab.mat4.ortho(v,0,A,0,A,0,1),n.ab.mat4.translate(v,v,[k,Z,0])}return new Ua(o.tileID,t.key,v)}_findTileCoveringTileID(t,o){let d=o.getTile(t);if(d&&d.hasData())return d;const v=this._findCoveringTileCache[o.id],b=v[t.key];if(d=b?o.getTileByID(b):null,d&&d.hasData()||b===null)return d;let A=d?d.tileID:t,k=A.overscaledZ;const Z=o.getSource().minzoom,q=[];if(!b){const fe=o.getSource().maxzoom;if(t.canonical.z>=fe){const pe=t.canonical.z-fe;o.getSource().reparseOverscaled?(k=Math.max(t.canonical.z+2,o.transform.tileZoom),A=new n.aG(k,t.wrap,fe,t.canonical.x>>pe,t.canonical.y>>pe)):pe!==0&&(k=fe,A=new n.aG(k,t.wrap,fe,t.canonical.x>>pe,t.canonical.y>>pe))}A.key!==t.key&&(q.push(A.key),d=o.getTile(A))}const re=fe=>{q.forEach(pe=>{v[pe]=fe}),q.length=0};for(k-=1;k>=Z&&(!d||!d.hasData());k--){d&&re(d.tileID.key);const fe=A.calculateScaledKey(k);if(d=o.getTileByID(fe),d&&d.hasData())break;const pe=v[fe];if(pe===null)break;pe===void 0?q.push(fe):d=o.getTileByID(pe)}return re(d?d.tileID.key:null),d&&d.hasData()?d:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,o){let d=this._tilesDirty[t];d||(d=this._tilesDirty[t]={}),d[o.key]=!0}}function ml(u,t,o){const d=function(k,Z,q){const re=n.ab.vec3.dot(Z,k),fe=n.ab.vec3.dot(q,[.2126,.7152,.0722]),pe=(et,We,rt)=>(1-rt)*et+rt*We,Te=pe(1-.3*Math.min(fe,1),1,Math.min(re+1,1));return pe(.92,1,Math.asin(n.aw(Z[2],-1,1))/Math.PI+.5)*Te}(u,[0,0,1],t),v=[0,0,0];n.ab.vec3.scale(v,o.slice(0,3),d);const b=[0,0,0];n.ab.vec3.scale(b,t.slice(0,3),u[2]);const A=[0,0,0];return n.ab.vec3.add(A,v,b),n.cf(A)}const Ls=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Tu=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Hc{static cacheKey(t,o,d,v){let b=`${o}${v?v.cacheKey:""}`;for(const A of d)t.usedDefines.includes(A)&&(b+=`/${A}`);return b}constructor(t,o,d,v,b,A){const k=t.gl;this.program=k.createProgram(),this.configuration=v,this.name=o,this.fixedDefines=[...A];const Z=v?v.getBinderAttributes():[],q=(d.staticAttributes||[]).concat(Z);let re=v?v.defines():[];re=re.concat(A.map(rt=>`#define ${rt}`));const fe=`#version 300 es
`;let pe=fe+re.concat("precision mediump float;",io,So.fragmentSource).join(`
`);for(const rt of d.fragmentIncludes)pe+=`
${wi[rt]}`;pe+=`
${d.fragmentSource}`;let Te=fe+re.concat("precision highp float;",io,So.vertexSource).join(`
`);for(const rt of d.vertexIncludes)Te+=`
${wi[rt]}`;this.forceManualRenderingForInstanceIDShaders=t.forceManualRenderingForInstanceIDShaders&&d.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(Te+=`
uniform int u_instanceID;
`),Te+=`
${d.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(Te=Te.replaceAll("gl_InstanceID","u_instanceID"));const et=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(et,pe),k.compileShader(et),k.attachShader(this.program,et);const We=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(We,Te),k.compileShader(We),k.attachShader(this.program,We),this.attributes={},this.numAttributes=q.length;for(let rt=0;rt<this.numAttributes;rt++)if(q[rt]){const it=q[rt].startsWith("a_")?q[rt]:`a_${q[rt]}`;k.bindAttribLocation(this.program,rt,it),this.attributes[it]=rt}k.linkProgram(this.program),k.deleteShader(We),k.deleteShader(et),this.fixedUniforms=b(t),this.binderUniforms=v?v.getUniforms(t):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(rt=>({u_instanceID:new n.bN(rt)}))(t)),(A.includes("TERRAIN")||o.indexOf("symbol")!==-1||o.indexOf("circle")!==-1)&&(this.terrainUniforms=(rt=>({u_dem:new n.bN(rt),u_dem_prev:new n.bN(rt),u_dem_tl:new n.bK(rt),u_dem_scale:new n.bM(rt),u_dem_tl_prev:new n.bK(rt),u_dem_scale_prev:new n.bM(rt),u_dem_size:new n.bM(rt),u_dem_lerp:new n.bM(rt),u_exaggeration:new n.bM(rt),u_depth:new n.bN(rt),u_depth_size_inv:new n.bK(rt),u_depth_range_unpack:new n.bK(rt),u_occluder_half_size:new n.bM(rt),u_occlusion_depth_offset:new n.bM(rt),u_meter_to_dem:new n.bM(rt),u_label_plane_matrix_inv:new n.bJ(rt)}))(t)),A.includes("GLOBE")&&(this.globeUniforms=(rt=>({u_tile_tl_up:new n.bL(rt),u_tile_tr_up:new n.bL(rt),u_tile_br_up:new n.bL(rt),u_tile_bl_up:new n.bL(rt),u_tile_up_scale:new n.bM(rt)}))(t)),A.includes("FOG")&&(this.fogUniforms=(rt=>({u_fog_matrix:new n.bJ(rt),u_fog_range:new n.bK(rt),u_fog_color:new n.ca(rt),u_fog_horizon_blend:new n.bM(rt),u_fog_vertical_limit:new n.bK(rt),u_fog_temporal_offset:new n.bM(rt),u_frustum_tl:new n.bL(rt),u_frustum_tr:new n.bL(rt),u_frustum_br:new n.bL(rt),u_frustum_bl:new n.bL(rt),u_globe_pos:new n.bL(rt),u_globe_radius:new n.bM(rt),u_globe_transition:new n.bM(rt),u_is_globe:new n.bN(rt),u_viewport:new n.bK(rt)}))(t)),A.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(rt=>({u_cutoff_params:new n.ca(rt)}))(t)),A.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(rt=>({u_lighting_ambient_color:new n.bL(rt),u_lighting_directional_dir:new n.bL(rt),u_lighting_directional_color:new n.bL(rt),u_ground_radiance:new n.bL(rt)}))(t)),A.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(rt=>({u_light_matrix_0:new n.bJ(rt),u_light_matrix_1:new n.bJ(rt),u_fade_range:new n.bK(rt),u_shadow_normal_offset:new n.bL(rt),u_shadow_intensity:new n.bM(rt),u_shadow_texel_size:new n.bM(rt),u_shadow_map_resolution:new n.bM(rt),u_shadow_direction:new n.bL(rt),u_shadow_bias:new n.bL(rt),u_shadowmap_0:new n.bN(rt),u_shadowmap_1:new n.bN(rt)}))(t))}}setTerrainUniformValues(t,o){if(!this.terrainUniforms)return;const d=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const v in o)d[v]&&d[v].set(this.program,v,o[v])}}setGlobeUniformValues(t,o){if(!this.globeUniforms)return;const d=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const v in o)d[v]&&d[v].set(this.program,v,o[v])}}setFogUniformValues(t,o){if(!this.fogUniforms)return;const d=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const v in o)d[v].set(this.program,v,o[v])}}setCutoffUniformValues(t,o){if(!this.cutoffUniforms)return;const d=this.cutoffUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const v in o)d[v].set(this.program,v,o[v])}}setLightsUniformValues(t,o){if(!this.lightsUniforms)return;const d=this.lightsUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const v in o)d[v].set(this.program,v,o[v])}}setShadowUniformValues(t,o){if(this.failedToCreate||!this.shadowUniforms)return;const d=this.shadowUniforms;t.program.set(this.program);for(const v in o)d[v].set(this.program,v,o[v])}_drawDebugWireframe(t,o,d,v,b,A,k,Z,q,re){const fe=t.options.wireframe;if(fe.terrain===!1&&fe.layers2D===!1&&fe.layers3D===!1)return;const pe=t.context;if(!(!(!fe.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!fe.layers2D||t._terrain&&t._terrain.renderingToTexture||!Ls.includes(this.name))||!(!fe.layers3D||!Tu.includes(this.name))))return;const Te=pe.gl,et=t.wireframeDebugCache.getLinesFromTrianglesBuffer(t.frameCounter,b,pe);if(!et)return;const We=[...this.fixedDefines];We.push("DEBUG_WIREFRAME");const rt=t.getOrCreateProgram(this.name,{config:this.configuration,defines:We});pe.program.set(rt.program);const it=(Qt,vn,on)=>{if(vn[Qt]&&on[Qt])for(const dn in vn[Qt])on[Qt][dn]&&on[Qt][dn].set(on.program,dn,vn[Qt][dn].current)};q&&q.setUniforms(rt.program,pe,rt.binderUniforms,k,{zoom:Z}),it("fixedUniforms",this,rt),it("terrainUniforms",this,rt),it("globeUniforms",this,rt),it("fogUniforms",this,rt),it("lightsUniforms",this,rt),it("shadowUniforms",this,rt),et.bind(),pe.setColorMode(new go([Te.ONE,Te.ONE_MINUS_SRC_ALPHA,Te.ZERO,Te.ONE],n.aj.transparent,[!0,!0,!0,!1])),pe.setDepthMode(new Ui(o.func===Te.LESS?Te.LEQUAL:o.func,Ui.ReadOnly,o.range)),pe.setStencilMode(Io.disabled);const kt=3*A.primitiveLength*2,qt=3*A.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Qt=re||1;for(let vn=0;vn<Qt;++vn)rt.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",vn),Te.drawElements(Te.LINES,kt,Te.UNSIGNED_SHORT,qt)}else re&&re>1?Te.drawElementsInstanced(Te.LINES,kt,Te.UNSIGNED_SHORT,qt,re):Te.drawElements(Te.LINES,kt,Te.UNSIGNED_SHORT,qt);b.bind(),pe.program.set(this.program),pe.setDepthMode(o),pe.setStencilMode(d),pe.setColorMode(v)}checkUniforms(t,o,d){if(this.fixedDefines.includes(o)){for(const v of Object.keys(d))if(!d[v].initialized)throw new Error(`Program '${this.name}', from draw '${t}': uniform ${v} not set but required by ${o} being defined`)}}draw(t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt){const it=t.context,kt=it.gl;if(this.failedToCreate)return;it.program.set(this.program),it.setDepthMode(d),it.setStencilMode(v),it.setColorMode(b),it.setCullFace(A);for(const vn of Object.keys(this.fixedUniforms))this.fixedUniforms[vn].set(this.program,vn,k[vn]);et&&et.setUniforms(this.program,it,this.binderUniforms,pe,{zoom:Te});const qt={[kt.POINTS]:1,[kt.LINES]:2,[kt.TRIANGLES]:3,[kt.LINE_STRIP]:1}[o];this.checkUniforms(Z,"RENDER_SHADOWS",this.shadowUniforms);const Qt=rt&&rt>0?1:void 0;for(const vn of fe.get()){const on=vn.vaos||(vn.vaos={});if((on[Z]||(on[Z]=new Ho)).bind(it,this,q,et?et.getPaintVertexBuffers():[],re,vn.vertexOffset,We||[],Qt),this.forceManualRenderingForInstanceIDShaders){const dn=rt||1;for(let nn=0;nn<dn;++nn)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",nn),re?kt.drawElements(o,vn.primitiveLength*qt,kt.UNSIGNED_SHORT,vn.primitiveOffset*qt*2):kt.drawArrays(o,vn.vertexOffset,vn.vertexLength)}else rt&&rt>1?kt.drawElementsInstanced(o,vn.primitiveLength*qt,kt.UNSIGNED_SHORT,vn.primitiveOffset*qt*2,rt):re?kt.drawElements(o,vn.primitiveLength*qt,kt.UNSIGNED_SHORT,vn.primitiveOffset*qt*2):kt.drawArrays(o,vn.vertexOffset,vn.vertexLength);o===kt.TRIANGLES&&re&&this._drawDebugWireframe(t,d,v,b,re,vn,pe,Te,et,rt)}}}function $s(u,t){const o=Math.pow(2,t.tileID.overscaledZ),d=t.tileSize*Math.pow(2,u.transform.tileZoom)/o,v=d*(t.tileID.canonical.x+t.tileID.wrap*o),b=d*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture?t.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.ar(t,1,u.transform.tileZoom),u_pixel_coord_upper:[v>>16,b>>16],u_pixel_coord_lower:[65535&v,65535&b]}}const Iu={terrain:0,flat:1},Fu=n.ab.mat4.create(),rd=(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it)=>{const kt=t.style.light,qt=kt.properties.get("position"),Qt=[qt.x,qt.y,qt.z],vn=n.ab.mat3.create();kt.properties.get("anchor")==="viewport"&&(n.ab.mat3.fromRotation(vn,-t.transform.angle),n.ab.vec3.transformMat3(Qt,Qt,vn));const on=kt.properties.get("color"),dn=t.transform,nn={u_matrix:u,u_lightpos:Qt,u_lightintensity:kt.properties.get("intensity"),u_lightcolor:[on.r,on.g,on.b],u_vertical_gradient:+o,u_opacity:d,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Fu,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Iu[q],u_base_type:Iu[re],u_ao:v,u_edge_radius:b,u_width_scale:A,u_flood_light_color:et,u_vertical_scale:We,u_flood_light_intensity:rt,u_ground_shadow_factor:it};return dn.projection.name==="globe"&&(nn.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],nn.u_zoom_transition=fe,nn.u_inv_rot_matrix=Te,nn.u_merc_center=pe,nn.u_up_dir=dn.projection.upVector(new n.bT(0,0,0),pe[0]*n.ag,pe[1]*n.ag),nn.u_height_lift=Z),nn},zc=(u,t,o,d,v,b)=>({u_matrix:u,u_edge_radius:t,u_width_scale:o,u_vertical_scale:d,u_height_type:Iu[v],u_base_type:Iu[b]}),pd=(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt)=>{const it=rd(u,t,o,d,v,b,A,k,q,re,fe,pe,Te,et,We,rt,1,[0,0,0]),kt={u_height_factor:-Math.pow(2,k.overscaledZ)/Z.tileSize/8};return n.l(it,$s(t,Z),kt)},Bu=(u,t)=>({u_matrix:u,u_emissive_strength:t}),Ju=(u,t,o,d)=>n.l(Bu(u,t),$s(o,d)),Pc=(u,t,o)=>({u_matrix:u,u_world:o,u_emissive_strength:t}),md=(u,t,o,d,v)=>n.l(Ju(u,t,o,d),{u_world:v}),eh=(u,t,o,d)=>{const v=n.ag/o.tileSize;return{u_matrix:u,u_camera_to_center_distance:t.getCameraToCenterDistance(d),u_extrude_scale:[t.pixelsToGLUnits[0]/v,t.pixelsToGLUnits[1]/v]}},fu=(u,t,o=1)=>({u_matrix:u,u_color:t.toRenderColor(null),u_overlay:0,u_overlay_scale:o}),ju=n.ab.mat4.create(),Fi=(u,t,o,d,v,b,A)=>{const k=u.transform,Z=k.projection.name==="globe",q=Z?n.cN(k.zoom,t.canonical)*k._pixelsPerMercatorPixel:n.ar(o,1,b),re={u_matrix:t.projMatrix,u_extrude_scale:q,u_intensity:A,u_inv_rot_matrix:ju,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Z){re.u_inv_rot_matrix=d,re.u_merc_center=v,re.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],re.u_zoom_transition=n.ae(k.zoom);const fe=v[0]*n.ag,pe=v[1]*n.ag;re.u_up_dir=k.projection.upVector(new n.bT(0,0,0),fe,pe)}return re};function Fc(u,[t,o,d,v],[b,A]){if(b===A)return[0,0,0,0];const k=255*(u-1)/(u*(A-b));return[t*k,o*k,d*k,v*k]}function Oc(u,t,[o,d]){return o===d?0:.5/u+(t-o)*(u-1)/(u*(d-o))}const nu=(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it,kt,qt,Qt)=>({u_matrix:u,u_normalize_matrix:t,u_globe_matrix:o,u_merc_matrix:d,u_grid_matrix:v,u_tl_parent:b,u_scale_parent:q,u_fade_t:re.mix,u_opacity:re.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:n.cO(fe.paint.get("raster-saturation")),u_contrast_factor:n.cP(fe.paint.get("raster-contrast")),u_spin_weights:ss(fe.paint.get("raster-hue-rotate")),u_perspective_transform:pe,u_raster_elevation:Te,u_zoom_transition:A,u_merc_center:k,u_cutoff_params:Z,u_colorization_mix:Fc(n.cQ,We,it),u_colorization_offset:Oc(n.cQ,rt,it),u_color_ramp:et,u_texture_offset:[qt/(kt+2*qt),kt/(kt+2*qt)],u_texture_res:[kt+2*qt,kt+2*qt],u_emissive_strength:Qt});function ss(u){u*=Math.PI/180;const t=Math.sin(u),o=Math.cos(u);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const Pi=.05,Ss=(u,t,o,d,v,b,A,k,Z,q,re,fe)=>({u_matrix:u,u_normalize_matrix:t,u_globe_matrix:o,u_merc_matrix:d,u_grid_matrix:v,u_tl_parent:b,u_scale_parent:q,u_fade_t:re.mix,u_opacity:re.opacity,u_image0:0,u_image1:1,u_raster_elevation:fe,u_zoom_transition:A,u_merc_center:k,u_cutoff_params:Z}),Nl=(u,t,o,d,v,b,A,k,Z,q)=>({u_particle_texture:u,u_particle_texture_side_len:t,u_tile_offset:o,u_velocity:d,u_color_ramp:b,u_velocity_res:v,u_max_speed:A,u_uv_offset:k,u_data_scale:[255*Z[0],255*Z[1]],u_data_offset:q,u_particle_pos_scale:1.1,u_particle_pos_offset:[Pi,Pi]}),pu=(u,t,o,d,v,b,A,k,Z,q)=>({u_particle_texture:u,u_particle_texture_side_len:t,u_velocity:o,u_velocity_res:d,u_max_speed:v,u_speed_factor:b,u_reset_rate:A,u_rand_seed:Math.random(),u_uv_offset:k,u_data_scale:[255*Z[0],255*Z[1]],u_data_offset:q,u_particle_pos_scale:1.1,u_particle_pos_offset:[Pi,Pi]}),Bc=n.ab.mat4.create(),id=(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it,kt,qt,Qt,vn)=>{const on=v.transform,dn={u_is_size_zoom_constant:+(u==="constant"||u==="source"),u_is_size_feature_constant:+(u==="constant"||u==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:on.getCameraToCenterDistance(kt),u_rotate_symbol:+o,u_aspect_ratio:on.width/on.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:A,u_coord_matrix:k,u_is_text:+q,u_elevation_from_sea:Z?1:0,u_pitch_with_map:+d,u_texsize:re,u_texsize_icon:fe,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Bc,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Bc,u_up_vector:[0,-1,0],u_color_adj_mat:qt,u_icon_transition:Qt||0,u_gamma_scale:d?v.transform.getCameraToCenterDistance(kt)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:+pe,u_scale_factor:vn||1};return kt.name==="globe"&&(dn.u_tile_id=[Te.canonical.x,Te.canonical.y,1<<Te.canonical.z],dn.u_zoom_transition=et,dn.u_inv_rot_matrix=rt,dn.u_merc_center=We,dn.u_camera_forward=on._camera.forward(),dn.u_ecef_origin=n.cR(on.globeMatrix,Te.toUnwrapped()),dn.u_tile_matrix=Float32Array.from(on.globeMatrix),dn.u_up_vector=it),dn},mu=(u,t,o,d)=>({u_matrix:u,u_emissive_strength:t,u_opacity:o,u_color:d}),sl=(u,t,o,d,v,b,A,k,Z)=>n.l(function(q,re,fe,pe,Te,et){const{width:We,height:rt}=pe.imageManager.getPixelSize(re),it=Math.pow(2,et.tileID.overscaledZ),kt=et.tileSize*Math.pow(2,pe.transform.tileZoom)/it,qt=kt*(et.tileID.canonical.x+et.tileID.wrap*it),Qt=kt*et.tileID.canonical.y;return{u_image:0,u_pattern_tl:fe.tl,u_pattern_br:fe.br,u_texsize:[We,rt],u_pattern_size:fe.displaySize,u_pattern_units_to_pixels:Te?[pe.transform.width,-1*pe.transform.height]:[1/n.ar(et,1,pe.transform.tileZoom),1/n.ar(et,1,pe.transform.tileZoom)],u_pixel_coord_upper:[qt>>16,Qt>>16],u_pixel_coord_lower:[65535&qt,65535&Qt]}}(0,b,A,d,k,Z),{u_matrix:u,u_emissive_strength:t,u_opacity:o}),rs=new Float32Array(n.ab.mat4.identity([])),Wa=(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te=[0,0,0],et)=>{const We=v.style.light,rt=We.properties.get("position"),it=[-rt.x,-rt.y,rt.z],kt=n.ab.mat3.create();We.properties.get("anchor")==="viewport"&&(n.ab.mat3.fromRotation(kt,-v.transform.angle),n.ab.vec3.transformMat3(it,it,kt));const qt=re.alphaMode==="MASK",Qt=We.properties.get("color").toRenderColor(null),vn=pe.paint.get("model-ambient-occlusion-intensity"),on=pe.paint.get("model-color").constantOr(n.aj.white).toRenderColor(null),dn=pe.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:u,u_lighting_matrix:t,u_normal_matrix:o,u_node_matrix:d||rs,u_lightpos:it,u_lightintensity:We.properties.get("intensity"),u_lightcolor:[Qt.r,Qt.g,Qt.b],u_camera_pos:Te,u_opacity:b,u_baseTextureIsAlpha:0,u_alphaMask:+qt,u_alphaCutoff:re.alphaCutoff,u_baseColorFactor:[A.r,A.g,A.b,A.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:Z,u_roughnessFactor:q,u_baseColorTexture:zt.BaseColor,u_metallicRoughnessTexture:zt.MetallicRoughness,u_normalTexture:zt.Normal,u_occlusionTexture:zt.Occlusion,u_emissionTexture:zt.Emission,u_lutTexture:zt.LUT,u_color_mix:[on.r,on.g,on.b,dn],u_aoIntensity:vn,u_emissive_strength:fe,u_occlusionTextureTransform:et||[0,0,0,0]}},To=(u,t=rs,o=rs)=>({u_matrix:u,u_instance:t,u_node_matrix:o}),is={fillExtrusion:u=>({u_matrix:new n.bJ(u),u_lightpos:new n.bL(u),u_lightintensity:new n.bM(u),u_lightcolor:new n.bL(u),u_vertical_gradient:new n.bM(u),u_opacity:new n.bM(u),u_edge_radius:new n.bM(u),u_width_scale:new n.bM(u),u_ao:new n.bK(u),u_height_type:new n.bN(u),u_base_type:new n.bN(u),u_tile_id:new n.bL(u),u_zoom_transition:new n.bM(u),u_inv_rot_matrix:new n.bJ(u),u_merc_center:new n.bK(u),u_up_dir:new n.bL(u),u_height_lift:new n.bM(u),u_flood_light_color:new n.bL(u),u_vertical_scale:new n.bM(u),u_flood_light_intensity:new n.bM(u),u_ground_shadow_factor:new n.bL(u)}),fillExtrusionDepth:u=>({u_matrix:new n.bJ(u),u_edge_radius:new n.bM(u),u_width_scale:new n.bM(u),u_vertical_scale:new n.bM(u),u_height_type:new n.bN(u),u_base_type:new n.bN(u)}),fillExtrusionPattern:u=>({u_matrix:new n.bJ(u),u_lightpos:new n.bL(u),u_lightintensity:new n.bM(u),u_lightcolor:new n.bL(u),u_vertical_gradient:new n.bM(u),u_height_factor:new n.bM(u),u_edge_radius:new n.bM(u),u_width_scale:new n.bM(u),u_ao:new n.bK(u),u_height_type:new n.bN(u),u_base_type:new n.bN(u),u_tile_id:new n.bL(u),u_zoom_transition:new n.bM(u),u_inv_rot_matrix:new n.bJ(u),u_merc_center:new n.bK(u),u_up_dir:new n.bL(u),u_height_lift:new n.bM(u),u_image:new n.bN(u),u_texsize:new n.bK(u),u_pixel_coord_upper:new n.bK(u),u_pixel_coord_lower:new n.bK(u),u_tile_units_to_pixels:new n.bM(u),u_opacity:new n.bM(u)}),fillExtrusionGroundEffect:u=>({u_matrix:new n.bJ(u),u_opacity:new n.bM(u),u_ao_pass:new n.bM(u),u_meter_to_tile:new n.bM(u),u_ao:new n.bK(u),u_flood_light_intensity:new n.bM(u),u_flood_light_color:new n.bL(u),u_attenuation:new n.bM(u),u_edge_radius:new n.bM(u),u_fb:new n.bN(u),u_fb_size:new n.bM(u),u_dynamic_offset:new n.bM(u)}),fill:u=>({u_matrix:new n.bJ(u),u_emissive_strength:new n.bM(u)}),fillPattern:u=>({u_matrix:new n.bJ(u),u_emissive_strength:new n.bM(u),u_image:new n.bN(u),u_texsize:new n.bK(u),u_pixel_coord_upper:new n.bK(u),u_pixel_coord_lower:new n.bK(u),u_tile_units_to_pixels:new n.bM(u)}),fillOutline:u=>({u_matrix:new n.bJ(u),u_emissive_strength:new n.bM(u),u_world:new n.bK(u)}),fillOutlinePattern:u=>({u_matrix:new n.bJ(u),u_emissive_strength:new n.bM(u),u_world:new n.bK(u),u_image:new n.bN(u),u_texsize:new n.bK(u),u_pixel_coord_upper:new n.bK(u),u_pixel_coord_lower:new n.bK(u),u_tile_units_to_pixels:new n.bM(u)}),circle:n.cS,collisionBox:u=>({u_matrix:new n.bJ(u),u_camera_to_center_distance:new n.bM(u),u_extrude_scale:new n.bK(u)}),collisionCircle:u=>({u_matrix:new n.bJ(u),u_inv_matrix:new n.bJ(u),u_camera_to_center_distance:new n.bM(u),u_viewport_size:new n.bK(u)}),debug:u=>({u_color:new n.cz(u),u_matrix:new n.bJ(u),u_overlay:new n.bN(u),u_overlay_scale:new n.bM(u)}),clippingMask:u=>({u_matrix:new n.bJ(u)}),heatmap:u=>({u_extrude_scale:new n.bM(u),u_intensity:new n.bM(u),u_matrix:new n.bJ(u),u_inv_rot_matrix:new n.bJ(u),u_merc_center:new n.bK(u),u_tile_id:new n.bL(u),u_zoom_transition:new n.bM(u),u_up_dir:new n.bL(u)}),heatmapTexture:u=>({u_image:new n.bN(u),u_color_ramp:new n.bN(u),u_opacity:new n.bM(u)}),hillshade:u=>({u_matrix:new n.bJ(u),u_image:new n.bN(u),u_latrange:new n.bK(u),u_light:new n.bK(u),u_shadow:new n.cz(u),u_highlight:new n.cz(u),u_emissive_strength:new n.bM(u),u_accent:new n.cz(u)}),hillshadePrepare:u=>({u_matrix:new n.bJ(u),u_image:new n.bN(u),u_dimension:new n.bK(u),u_zoom:new n.bM(u)}),line:n.cT,linePattern:n.cU,raster:u=>({u_matrix:new n.bJ(u),u_normalize_matrix:new n.bJ(u),u_globe_matrix:new n.bJ(u),u_merc_matrix:new n.bJ(u),u_grid_matrix:new n.cA(u),u_tl_parent:new n.bK(u),u_scale_parent:new n.bM(u),u_fade_t:new n.bM(u),u_opacity:new n.bM(u),u_image0:new n.bN(u),u_image1:new n.bN(u),u_brightness_low:new n.bM(u),u_brightness_high:new n.bM(u),u_saturation_factor:new n.bM(u),u_contrast_factor:new n.bM(u),u_spin_weights:new n.bL(u),u_perspective_transform:new n.bK(u),u_raster_elevation:new n.bM(u),u_zoom_transition:new n.bM(u),u_merc_center:new n.bK(u),u_cutoff_params:new n.ca(u),u_colorization_mix:new n.ca(u),u_colorization_offset:new n.bM(u),u_color_ramp:new n.bN(u),u_texture_offset:new n.bK(u),u_texture_res:new n.bK(u),u_emissive_strength:new n.bM(u)}),rasterParticle:u=>({u_matrix:new n.bJ(u),u_normalize_matrix:new n.bJ(u),u_globe_matrix:new n.bJ(u),u_merc_matrix:new n.bJ(u),u_grid_matrix:new n.cA(u),u_tl_parent:new n.bK(u),u_scale_parent:new n.bM(u),u_fade_t:new n.bM(u),u_opacity:new n.bM(u),u_image0:new n.bN(u),u_image1:new n.bN(u),u_raster_elevation:new n.bM(u),u_zoom_transition:new n.bM(u),u_merc_center:new n.bK(u),u_cutoff_params:new n.ca(u)}),rasterParticleTexture:u=>({u_texture:new n.bN(u),u_opacity:new n.bM(u)}),rasterParticleDraw:u=>({u_particle_texture:new n.bN(u),u_particle_texture_side_len:new n.bM(u),u_tile_offset:new n.bK(u),u_velocity:new n.bN(u),u_color_ramp:new n.bN(u),u_velocity_res:new n.bK(u),u_max_speed:new n.bM(u),u_uv_offset:new n.bK(u),u_data_scale:new n.bK(u),u_data_offset:new n.bM(u),u_particle_pos_scale:new n.bM(u),u_particle_pos_offset:new n.bK(u)}),rasterParticleUpdate:u=>({u_particle_texture:new n.bN(u),u_particle_texture_side_len:new n.bM(u),u_velocity:new n.bN(u),u_velocity_res:new n.bK(u),u_max_speed:new n.bM(u),u_speed_factor:new n.bM(u),u_reset_rate:new n.bM(u),u_rand_seed:new n.bM(u),u_uv_offset:new n.bK(u),u_data_scale:new n.bK(u),u_data_offset:new n.bM(u),u_particle_pos_scale:new n.bM(u),u_particle_pos_offset:new n.bK(u)}),symbol:u=>({u_is_size_zoom_constant:new n.bN(u),u_is_size_feature_constant:new n.bN(u),u_size_t:new n.bM(u),u_size:new n.bM(u),u_camera_to_center_distance:new n.bM(u),u_rotate_symbol:new n.bN(u),u_aspect_ratio:new n.bM(u),u_fade_change:new n.bM(u),u_matrix:new n.bJ(u),u_label_plane_matrix:new n.bJ(u),u_coord_matrix:new n.bJ(u),u_is_text:new n.bN(u),u_elevation_from_sea:new n.bN(u),u_pitch_with_map:new n.bN(u),u_texsize:new n.bK(u),u_texsize_icon:new n.bK(u),u_texture:new n.bN(u),u_texture_icon:new n.bN(u),u_gamma_scale:new n.bM(u),u_device_pixel_ratio:new n.bM(u),u_tile_id:new n.bL(u),u_zoom_transition:new n.bM(u),u_inv_rot_matrix:new n.bJ(u),u_merc_center:new n.bK(u),u_camera_forward:new n.bL(u),u_tile_matrix:new n.bJ(u),u_up_vector:new n.bL(u),u_ecef_origin:new n.bL(u),u_is_halo:new n.bN(u),u_icon_transition:new n.bM(u),u_color_adj_mat:new n.bJ(u),u_scale_factor:new n.bM(u)}),background:u=>({u_matrix:new n.bJ(u),u_emissive_strength:new n.bM(u),u_opacity:new n.bM(u),u_color:new n.cz(u)}),backgroundPattern:u=>({u_matrix:new n.bJ(u),u_emissive_strength:new n.bM(u),u_opacity:new n.bM(u),u_image:new n.bN(u),u_pattern_tl:new n.bK(u),u_pattern_br:new n.bK(u),u_texsize:new n.bK(u),u_pattern_size:new n.bK(u),u_pixel_coord_upper:new n.bK(u),u_pixel_coord_lower:new n.bK(u),u_pattern_units_to_pixels:new n.bK(u)}),terrainRaster:u=>({u_matrix:new n.bJ(u),u_image0:new n.bN(u),u_skirt_height:new n.bM(u),u_ground_shadow_factor:new n.bL(u)}),skybox:u=>({u_matrix:new n.bJ(u),u_sun_direction:new n.bL(u),u_cubemap:new n.bN(u),u_opacity:new n.bM(u),u_temporal_offset:new n.bM(u)}),skyboxGradient:u=>({u_matrix:new n.bJ(u),u_color_ramp:new n.bN(u),u_center_direction:new n.bL(u),u_radius:new n.bM(u),u_opacity:new n.bM(u),u_temporal_offset:new n.bM(u)}),skyboxCapture:u=>({u_matrix_3f:new n.cA(u),u_sun_direction:new n.bL(u),u_sun_intensity:new n.bM(u),u_color_tint_r:new n.ca(u),u_color_tint_m:new n.ca(u),u_luminance:new n.bM(u)}),globeRaster:u=>({u_proj_matrix:new n.bJ(u),u_globe_matrix:new n.bJ(u),u_normalize_matrix:new n.bJ(u),u_merc_matrix:new n.bJ(u),u_zoom_transition:new n.bM(u),u_merc_center:new n.bK(u),u_image0:new n.bN(u),u_grid_matrix:new n.cA(u),u_skirt_height:new n.bM(u),u_far_z_cutoff:new n.bM(u),u_frustum_tl:new n.bL(u),u_frustum_tr:new n.bL(u),u_frustum_br:new n.bL(u),u_frustum_bl:new n.bL(u),u_globe_pos:new n.bL(u),u_globe_radius:new n.bM(u),u_viewport:new n.bK(u)}),globeAtmosphere:u=>({u_frustum_tl:new n.bL(u),u_frustum_tr:new n.bL(u),u_frustum_br:new n.bL(u),u_frustum_bl:new n.bL(u),u_horizon:new n.bM(u),u_transition:new n.bM(u),u_fadeout_range:new n.bM(u),u_color:new n.ca(u),u_high_color:new n.ca(u),u_space_color:new n.ca(u),u_temporal_offset:new n.bM(u),u_horizon_angle:new n.bM(u)}),model:u=>({u_matrix:new n.bJ(u),u_lighting_matrix:new n.bJ(u),u_normal_matrix:new n.bJ(u),u_node_matrix:new n.bJ(u),u_lightpos:new n.bL(u),u_lightintensity:new n.bM(u),u_lightcolor:new n.bL(u),u_camera_pos:new n.bL(u),u_opacity:new n.bM(u),u_baseColorFactor:new n.ca(u),u_emissiveFactor:new n.ca(u),u_metallicFactor:new n.bM(u),u_roughnessFactor:new n.bM(u),u_baseTextureIsAlpha:new n.bN(u),u_alphaMask:new n.bN(u),u_alphaCutoff:new n.bM(u),u_baseColorTexture:new n.bN(u),u_metallicRoughnessTexture:new n.bN(u),u_normalTexture:new n.bN(u),u_occlusionTexture:new n.bN(u),u_emissionTexture:new n.bN(u),u_lutTexture:new n.bN(u),u_color_mix:new n.ca(u),u_aoIntensity:new n.bM(u),u_emissive_strength:new n.bM(u),u_occlusionTextureTransform:new n.ca(u)}),modelDepth:u=>({u_matrix:new n.bJ(u),u_instance:new n.bJ(u),u_node_matrix:new n.bJ(u)}),groundShadow:u=>({u_matrix:new n.bJ(u),u_ground_shadow_factor:new n.bL(u)}),stars:u=>({u_matrix:new n.bJ(u),u_up:new n.bL(u),u_right:new n.bL(u),u_intensity_multiplier:new n.bM(u)}),snowParticle:u=>({u_modelview:new n.bJ(u),u_projection:new n.bJ(u),u_time:new n.bM(u),u_cam_pos:new n.bL(u),u_velocityConeAperture:new n.bM(u),u_velocity:new n.bM(u),u_horizontalOscillationRadius:new n.bM(u),u_horizontalOscillationRate:new n.bM(u),u_boxSize:new n.bM(u),u_billboardSize:new n.bM(u),u_simpleShapeParameters:new n.bK(u),u_screenSize:new n.bK(u),u_thinningCenterPos:new n.bK(u),u_thinningShape:new n.bL(u),u_thinningAffectedRatio:new n.bM(u),u_thinningParticleOffset:new n.bM(u),u_particleColor:new n.ca(u),u_direction:new n.bL(u)}),rainParticle:u=>({u_modelview:new n.bJ(u),u_projection:new n.bJ(u),u_time:new n.bM(u),u_cam_pos:new n.bL(u),u_texScreen:new n.bN(u),u_velocityConeAperture:new n.bM(u),u_velocity:new n.bM(u),u_boxSize:new n.bM(u),u_rainDropletSize:new n.bK(u),u_distortionStrength:new n.bM(u),u_rainDirection:new n.bL(u),u_color:new n.ca(u),u_screenSize:new n.bK(u),u_thinningCenterPos:new n.bK(u),u_thinningShape:new n.bL(u),u_thinningAffectedRatio:new n.bM(u),u_thinningParticleOffset:new n.bM(u),u_shapeDirectionalPower:new n.bM(u),u_shapeNormalPower:new n.bM(u),u_mode:new n.bM(u)}),vignette:u=>({u_vignetteShape:new n.bL(u),u_vignetteColor:new n.ca(u)}),occlusion:u=>({u_matrix:new n.bJ(u),u_anchorPos:new n.bL(u),u_screenSizePx:new n.bK(u),u_occluderSizePx:new n.bK(u),u_color:new n.ca(u)})};class Xs{constructor(t,o,d,v){this.id=Xs.uniqueIdxCounter,Xs.uniqueIdxCounter++,this.context=t;const b=t.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||v||o.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){this.id=Xs.uniqueIdxCounter,Xs.uniqueIdxCounter++;const o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Xs.uniqueIdxCounter=0;const zl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ll{constructor(t,o,d,v,b,A){this.length=o.length,this.attributes=d,this.itemSize=o.bytesPerElement,this.dynamicDraw=v,this.instanceCount=A,this.context=t;const k=t.gl;this.buffer=k.createBuffer(),t.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||b||o.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let d=0;d<this.attributes.length;d++){const v=o.attributes[this.attributes[d].name];v!==void 0&&t.enableVertexAttribArray(v)}}setVertexAttribPointers(t,o,d){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],A=o.attributes[b.name];A!==void 0&&t.vertexAttribPointer(A,b.components,t[zl[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}setVertexAttribDivisor(t,o,d){for(let v=0;v<this.attributes.length;v++){const b=o.attributes[this.attributes[v].name];b!==void 0&&this.instanceCount&&this.instanceCount>0&&t.vertexAttribDivisor(b,d)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fl{constructor(t,o,d,v,b){this.context=t,this.width=o,this.height=d;const A=this.framebuffer=t.gl.createFramebuffer();v&&(this.colorAttachment=new Rl(t,A)),b&&(this.depthAttachmentType=b,this.depthAttachment=b==="renderbuffer"?new au(t,A):new Xu(t,A))}destroy(){const t=this.context.gl;if(this.colorAttachment){const o=this.colorAttachment.get();o&&t.deleteTexture(o)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const o=this.depthAttachment.get();o&&t.deleteRenderbuffer(o)}else{const o=this.depthAttachment.get();o&&t.deleteTexture(o)}t.deleteFramebuffer(this.framebuffer)}}class _d{constructor(t,o){this.gl=t,this.clearColor=new Ti(this),this.clearDepth=new Ei(this),this.clearStencil=new fr(this),this.colorMask=new nr(this),this.depthMask=new _r(this),this.stencilMask=new ei(this),this.stencilFunc=new Xr(this),this.stencilOp=new fi(this),this.stencilTest=new Vi(this),this.depthRange=new vo(this),this.depthTest=new Ro(this),this.depthFunc=new _a(this),this.blend=new ca(this),this.blendFunc=new ta(this),this.blendColor=new ds(this),this.blendEquation=new iu(this),this.cullFace=new Ks(this),this.cullFaceSide=new Ou(this),this.frontFace=new bl(this),this.program=new vs(this),this.activeTexture=new Co(this),this.viewport=new Pl(this),this.bindFramebuffer=new As(this),this.bindRenderbuffer=new nl(this),this.bindTexture=new Ol(this),this.bindVertexBuffer=new Ac(this),this.bindElementBuffer=new Su(this),this.bindVertexArrayOES=new Bs(this),this.pixelStoreUnpack=new hs(this),this.pixelStoreUnpackPremultiplyAlpha=new ou(this),this.pixelStoreUnpackFlipY=new fl(this),this.options=o?Object.assign({},o):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=o&&!!o.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=t.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxPointSize=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o,d){return new Xs(this,t,o,d)}createVertexBuffer(t,o,d,v,b){return new ll(this,t,o,d,v,b)}createRenderbuffer(t,o,d){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,t,o,d),this.bindRenderbuffer.set(null),b}createFramebuffer(t,o,d,v){return new Fl(this,t,o,d,v)}clear({color:t,depth:o,stencil:d,colorMask:v}){const b=this.gl;let A=0;t&&(A|=b.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set(v||[!0,!0,!0,!0])),o!==void 0&&(A|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),d!==void 0&&(A|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),b.clear(A)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){n.bn(t.blendFunction,go.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor),t.blendEquation?this.blendEquation.set(t.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(t.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let gd;function jc(u,t,o,d,v,b,A){const k=u.context,Z=k.gl,q=u.transform,re=u.getOrCreateProgram("collisionBox"),fe=[];let pe=0,Te=0;for(let Qt=0;Qt<d.length;Qt++){const vn=d[Qt],on=t.getTile(vn),dn=on.getBucket(o);if(!dn)continue;const nn=Es(vn,dn,q);let Rn=nn;v[0]===0&&v[1]===0||(Rn=u.translatePosMatrix(nn,on,v,b));const $n=A?dn.textCollisionBox:dn.iconCollisionBox,Pr=dn.collisionCircleArray;if(Pr.length>0){const dr=n.ab.mat4.create(),Or=Rn;n.ab.mat4.mul(dr,dn.placementInvProjMatrix,q.glCoordMatrix),n.ab.mat4.mul(dr,dr,dn.placementViewportMatrix),fe.push({circleArray:Pr,circleOffset:Te,transform:Or,invTransform:dr,projection:dn.getProjection()}),pe+=Pr.length/4,Te=pe}$n&&(u.terrain&&u.terrain.setupElevationDraw(on,re),re.draw(u,Z.LINES,Ui.disabled,Io.disabled,u.colorModeForRenderPass(),Mo.disabled,eh(Rn,q,on,dn.getProjection()),o.id,$n.layoutVertexBuffer,$n.indexBuffer,$n.segments,null,q.zoom,null,[$n.collisionVertexBuffer,$n.collisionVertexBufferExt]))}if(!A||!fe.length)return;const et=u.getOrCreateProgram("collisionCircle"),We=new n.cV;We.resize(4*pe),We._trim();let rt=0;for(const Qt of fe)for(let vn=0;vn<Qt.circleArray.length/4;vn++){const on=4*vn,dn=Qt.circleArray[on+0],nn=Qt.circleArray[on+1],Rn=Qt.circleArray[on+2],$n=Qt.circleArray[on+3];We.emplace(rt++,dn,nn,Rn,$n,0),We.emplace(rt++,dn,nn,Rn,$n,1),We.emplace(rt++,dn,nn,Rn,$n,2),We.emplace(rt++,dn,nn,Rn,$n,3)}(!gd||gd.length<2*pe)&&(gd=function(Qt){const vn=2*Qt,on=new n.aU;on.resize(vn),on._trim();for(let dn=0;dn<vn;dn++){const nn=6*dn;on.uint16[nn+0]=4*dn+0,on.uint16[nn+1]=4*dn+1,on.uint16[nn+2]=4*dn+2,on.uint16[nn+3]=4*dn+2,on.uint16[nn+4]=4*dn+3,on.uint16[nn+5]=4*dn+0}return on}(pe));const it=k.createIndexBuffer(gd,!0),kt=k.createVertexBuffer(We,n.cW.members,!0);for(const Qt of fe){const vn={u_matrix:Qt.transform,u_inv_matrix:Qt.invTransform,u_camera_to_center_distance:(qt=q).getCameraToCenterDistance(Qt.projection),u_viewport_size:[qt.width,qt.height]};et.draw(u,Z.TRIANGLES,Ui.disabled,Io.disabled,u.colorModeForRenderPass(),Mo.disabled,vn,o.id,kt,it,n.b7.simpleSegment(0,2*Qt.circleOffset,Qt.circleArray.length,Qt.circleArray.length/2),null,q.zoom)}var qt;kt.destroy(),it.destroy()}const Bd=n.ab.mat4.create();function uc(u){const t=u._camera.getWorldToCamera(u.worldSize,1),o=n.ab.mat4.multiply([],t,u.globeMatrix);n.ab.mat4.invert(o,o);const d=[0,0,0],v=[0,1,0,0];return n.ab.vec4.transformMat4(v,v,o),d[0]=v[0],d[1]=v[1],d[2]=v[2],n.ab.vec3.normalize(d,d),d}function Ts({width:u,height:t,anchor:o,textOffset:d,textScale:v},b){const{horizontalAlign:A,verticalAlign:k}=n.bD(o),Z=-(A-.5)*u,q=-(k-.5)*t,re=n.bC(o,d);return new n.P((Z/v+re[0])*b,(q/v+re[1])*b)}function jd(u,t,o,d,v,b,A,k,Z,q,re){const fe=u.text.placedSymbolArray,pe=u.text.dynamicLayoutVertexArray,Te=u.icon.dynamicLayoutVertexArray,et={},We=u.getProjection(),rt=xu(k,We,b),it=b.elevation,kt=We.upVectorScale(k.canonical,b.center.lat,b.worldSize).metersToTile;pe.clear();for(let qt=0;qt<fe.length;qt++){const Qt=fe.get(qt),{tileAnchorX:vn,tileAnchorY:on,numGlyphs:dn}=Qt,nn=Qt.hidden||!Qt.crossTileID||u.allowVerticalPlacement&&!Qt.placedOrientation?null:d[Qt.crossTileID];if(nn){let Rn=0,$n=0,Pr=0;if(it){const Cr=it?it.getAtTileOffset(k,vn,on):0,[xi,ri,Kr]=We.upVector(k.canonical,vn,on);Rn=Cr*xi*kt,$n=Cr*ri*kt,Pr=Cr*Kr*kt}let[dr,Or,kr,Yn]=la(Qt.projectedAnchorX+Rn,Qt.projectedAnchorY+$n,Qt.projectedAnchorZ+Pr,o?rt:A);const Mr=Os(b.getCameraToCenterDistance(We),Yn);let ti=v.evaluateSizeForFeature(u.textSizeData,q,Qt)*Mr/n.bw;o&&(ti*=u.tilePixelRatio/Z);const ir=Ts(nn,ti);o?({x:dr,y:Or,z:kr}=We.projectTilePoint(vn+ir.x,on+ir.y,k.canonical),[dr,Or,kr]=la(dr+Rn,Or+$n,kr+Pr,A)):(t&&ir._rotate(-b.angle),dr+=ir.x,Or+=ir.y,kr=0);const Fr=u.allowVerticalPlacement&&Qt.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let Cr=0;Cr<dn;Cr++)n.bt(pe,dr,Or,kr,Fr);re&&Qt.associatedIconIndex>=0&&(et[Qt.associatedIconIndex]={x:dr,y:Or,z:kr,angle:Fr})}else fs(dn,pe)}if(re){Te.clear();const qt=u.icon.placedSymbolArray;for(let Qt=0;Qt<qt.length;Qt++){const vn=qt.get(Qt),{numGlyphs:on}=vn,dn=et[Qt];if(vn.hidden||!dn)fs(on,Te);else{const{x:nn,y:Rn,z:$n,angle:Pr}=dn;for(let dr=0;dr<on;dr++)n.bt(Te,nn,Rn,$n,Pr)}}u.icon.dynamicLayoutVertexBuffer.updateData(Te)}u.text.dynamicLayoutVertexBuffer.updateData(pe)}function qo(u,t,o,d,v,b,A={}){const k=o.paint.get("icon-translate"),Z=o.paint.get("text-translate"),q=o.paint.get("icon-translate-anchor"),re=o.paint.get("text-translate-anchor"),fe=o.layout.get("icon-rotation-alignment"),pe=o.layout.get("text-rotation-alignment"),Te=o.layout.get("icon-pitch-alignment"),et=o.layout.get("text-pitch-alignment"),We=o.layout.get("icon-keep-upright"),rt=o.layout.get("text-keep-upright"),it=o.paint.get("icon-color-saturation"),kt=o.paint.get("icon-color-contrast"),qt=o.paint.get("icon-color-brightness-min"),Qt=o.paint.get("icon-color-brightness-max"),vn=o.layout.get("symbol-elevation-reference")==="sea",on=u.context,dn=on.gl,nn=u.transform,Rn=fe==="map",$n=pe==="map",Pr=Te==="map",dr=et==="map",Or=o.layout.get("symbol-sort-key").constantOr(1)!==void 0;let kr=!1;const Yn=u.depthModeForSublayer(0,Ui.ReadOnly),Mr=[n.at(nn.center.lng),n.aA(nn.center.lat)],ti=o.layout.get("text-variable-anchor"),ir=nn.projection.name==="globe",Fr=[],Cr=[0,-1,0];for(const xi of d){const ri=t.getTile(xi),Kr=ri.getBucket(o);if(!Kr||Kr.projection.name==="mercator"&&ir||Kr.fullyClipped)continue;const mi=Kr.projection.name==="globe",gi=mi?n.ae(nn.zoom):0,Gi=xu(xi,Kr.getProjection(),nn),Li=nn.calculatePixelsToTileUnitsMatrix(ri),bo=ti&&Kr.hasTextData(),wo=Kr.hasIconTextFit()&&bo&&Kr.hasIconData(),Ao=Kr.getProjection().createInversionMatrix(nn,xi.canonical),zo=Ya=>{nn.depthOcclusionForSymbolsAndCircles&&(o.hasInitialOcclusionOpacityProperties||u.terrain)&&(Ya.push("DEPTH_D24"),Ya.push("DEPTH_OCCLUSION"))},Ga=()=>{const Ya=Rn&&o.layout.get("symbol-placement")!=="point",Ia=[];zo(Ia);const Ms=Ya||wo,$u=o.paint.get("icon-image-cross-fade").constantOr(0);u.terrainRenderModeElevated()&&Pr&&Ia.push("PITCH_WITH_MAP_TERRAIN"),mi&&(Ia.push("PROJECTION_GLOBE_VIEW"),Ms&&Ia.push("PROJECTED_POS_ON_VIEWPORT")),$u>0&&Ia.push("ICON_TRANSITION"),Kr.icon.zOffsetVertexBuffer&&Ia.push("Z_OFFSET"),it===0&&kt===0&&qt===0&&Qt===1||Ia.push("COLOR_ADJUSTMENT"),Kr.sdfIcons&&Ia.push("RENDER_SDF");const xl=Kr.icon.programConfigurations.get(o.id),lu=u.getOrCreateProgram("symbol",{config:xl,defines:Ia}),Zu=ri.imageAtlasTexture?ri.imageAtlasTexture.size:[0,0],Mu=Kr.iconSizeData,Ws=n.bp(Mu,nn.zoom),Us=Pr||nn.pitch!==0,gs=oo(Gi,ri.tileID.canonical,Pr,Rn,nn,Kr.getProjection(),Li),Xa=Ta(Gi,ri.tileID.canonical,Pr,Rn,nn,Kr.getProjection(),Li),El=u.translatePosMatrix(Xa,ri,k,q,!0),Wu=u.translatePosMatrix(Gi,ri,k,q),Vs=Ms?Bd:gs,hc=Rn&&!Pr&&!Ya;let qc=Cr;!ir&&!nn.mercatorFromTransition||Rn||(qc=uc(nn));const ed=mi?qc:Cr,td=o.getColorAdjustmentMatrix(it,kt,qt,Qt),Hd=id(Mu.kind,Ws,hc,Pr,u,Wu,Vs,El,vn,!1,Zu,[0,0],!0,xi,gi,Mr,Ao,ed,Kr.getProjection(),td,$u),ud=ri.imageAtlasTexture?ri.imageAtlasTexture:null,ec=o.layout.get("icon-size").constantOr(0)!==1||Kr.iconsNeedLinear,Kh=Kr.sdfIcons||u.options.rotating||u.options.zooming||ec||Us?dn.LINEAR:dn.NEAREST,tc=Kr.sdfIcons&&o.paint.get("icon-halo-width").constantOr(1)!==0,Yh=u.terrain&&Pr&&Ya?n.ab.mat4.invert(n.ab.mat4.create(),gs):Bd;if(Ya&&Kr.icon){const Wl=nn.elevation,fp=Wl?Wl.getAtTileOffsetFunc(xi,nn.center.lat,nn.worldSize,Kr.getProjection()):null,dh=qi(Gi,ri.tileID.canonical,Pr,Rn,nn,Kr.getProjection(),Li);ns(Kr,Gi,u,!1,dh,Xa,Pr,We,fp,xi)}return{program:lu,buffers:Kr.icon,uniformValues:Hd,atlasTexture:ud,atlasTextureIcon:null,atlasInterpolation:Kh,atlasInterpolationIcon:null,isSDF:Kr.sdfIcons,hasHalo:tc,tile:ri,labelPlaneMatrixInv:Yh}},ba=()=>{const Ya=$n&&o.layout.get("symbol-placement")!=="point",Ia=[],Ms=Ya||ti||wo;u.terrainRenderModeElevated()&&dr&&Ia.push("PITCH_WITH_MAP_TERRAIN"),mi&&(Ia.push("PROJECTION_GLOBE_VIEW"),Ms&&Ia.push("PROJECTED_POS_ON_VIEWPORT")),Kr.text.zOffsetVertexBuffer&&Ia.push("Z_OFFSET"),Kr.iconsInText&&Ia.push("RENDER_TEXT_AND_SYMBOL"),Ia.push("RENDER_SDF"),zo(Ia);const $u=Kr.text.programConfigurations.get(o.id),xl=u.getOrCreateProgram("symbol",{config:$u,defines:Ia});let lu,Zu=[0,0],Mu=null;const Ws=Kr.textSizeData;Kr.iconsInText&&(Zu=ri.imageAtlasTexture?ri.imageAtlasTexture.size:[0,0],Mu=ri.imageAtlasTexture?ri.imageAtlasTexture:null,lu=dr||nn.pitch!==0||u.options.rotating||u.options.zooming||Ws.kind==="composite"||Ws.kind==="camera"?dn.LINEAR:dn.NEAREST);const Us=ri.glyphAtlasTexture?ri.glyphAtlasTexture.size:[0,0],gs=o.layout.get("text-size-scale-range"),Xa=n.aw(u.scaleFactor,gs[0],gs[1]),El=n.bp(Ws,nn.zoom,Xa),Wu=oo(Gi,ri.tileID.canonical,dr,$n,nn,Kr.getProjection(),Li),Vs=Ta(Gi,ri.tileID.canonical,dr,$n,nn,Kr.getProjection(),Li),hc=u.translatePosMatrix(Vs,ri,Z,re,!0),qc=u.translatePosMatrix(Gi,ri,Z,re),ed=Ms?Bd:Wu,td=$n&&!dr&&!Ya;let Hd=Cr;!ir&&!nn.mercatorFromTransition||$n||(Hd=uc(nn));const ud=id(Ws.kind,El,td,dr,u,qc,ed,hc,vn,!0,Us,Zu,!0,xi,gi,Mr,Ao,mi?Hd:Cr,Kr.getProjection(),null,null,Xa),ec=ri.glyphAtlasTexture?ri.glyphAtlasTexture:null,Kh=dn.LINEAR,tc=o.paint.get("text-halo-width").constantOr(1)!==0,Yh=u.terrain&&dr&&Ya?n.ab.mat4.invert(n.ab.mat4.create(),Wu):Bd;if(Ya&&Kr.text){const Wl=nn.elevation,fp=Wl?Wl.getAtTileOffsetFunc(xi,nn.center.lat,nn.worldSize,Kr.getProjection()):null,dh=qi(Gi,ri.tileID.canonical,dr,$n,nn,Kr.getProjection(),Li);ns(Kr,Gi,u,!0,dh,Vs,dr,rt,fp,xi)}return{program:xl,buffers:Kr.text,uniformValues:ud,atlasTexture:ec,atlasTextureIcon:Mu,atlasInterpolation:Kh,atlasInterpolationIcon:lu,isSDF:!0,hasHalo:tc,tile:ri,labelPlaneMatrixInv:Yh}},wl=Kr.icon.segments.get().length,os=Kr.text.segments.get().length,ia=wl&&!A.onlyText?Ga():null,Pa=os&&!A.onlyIcons?ba():null,uo=o.paint.get("icon-opacity").constantOr(1),na=o.paint.get("text-opacity").constantOr(1);if(Or&&Kr.canOverlap){kr=!0;const Ya=uo&&!A.onlyText?Kr.icon.segments.get():[],Ia=na&&!A.onlyIcons?Kr.text.segments.get():[];for(const Ms of Ya)Fr.push({segments:new n.b7([Ms]),sortKey:Ms.sortKey,state:ia});for(const Ms of Ia)Fr.push({segments:new n.b7([Ms]),sortKey:Ms.sortKey,state:Pa})}else A.onlyText||Fr.push({segments:uo?Kr.icon.segments:new n.b7([]),sortKey:0,state:ia}),A.onlyIcons||Fr.push({segments:na?Kr.text.segments:new n.b7([]),sortKey:0,state:Pa})}kr&&Fr.sort((xi,ri)=>xi.sortKey-ri.sortKey);for(const xi of Fr){const ri=xi.state;if(ri)if(u.terrain?u.terrain.setupElevationDraw(ri.tile,ri.program,{useDepthForOcclusion:nn.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:ri.labelPlaneMatrixInv}):u.setupDepthForOcclusion(nn.depthOcclusionForSymbolsAndCircles,ri.program),on.activeTexture.set(dn.TEXTURE0),ri.atlasTexture&&ri.atlasTexture.bind(ri.atlasInterpolation,dn.CLAMP_TO_EDGE,!0),ri.atlasTextureIcon&&(on.activeTexture.set(dn.TEXTURE1),ri.atlasTextureIcon&&ri.atlasTextureIcon.bind(ri.atlasInterpolationIcon,dn.CLAMP_TO_EDGE,!0)),u.uploadCommonLightUniforms(u.context,ri.program),ri.hasHalo){const Kr=ri.uniformValues;Kr.u_is_halo=1,Va(ri.buffers,xi.segments,o,u,ri.program,Yn,v,b,Kr,2),Kr.u_is_halo=0}else{if(ri.isSDF){const Kr=ri.uniformValues;ri.hasHalo&&(Kr.u_is_halo=1,Va(ri.buffers,xi.segments,o,u,ri.program,Yn,v,b,Kr,1)),Kr.u_is_halo=0}Va(ri.buffers,xi.segments,o,u,ri.program,Yn,v,b,ri.uniformValues,1)}}}function Va(u,t,o,d,v,b,A,k,Z,q){const re=[u.dynamicLayoutVertexBuffer,u.opacityVertexBuffer,u.iconTransitioningVertexBuffer,u.globeExtVertexBuffer,u.zOffsetVertexBuffer];v.draw(d,d.context.gl.TRIANGLES,b,A,k,Mo.disabled,Z,o.id,u.layoutVertexBuffer,u.indexBuffer,t,o.paint,d.transform.zoom,u.programConfigurations.get(o.id),re,q)}function _l(u,t,o,d,v,b,A){const k=u.context.gl,Z=o.paint.get("fill-pattern"),q=o.is3D(),re=q?u.stencilModeFor3D():Io.disabled,fe=Z&&Z.constantOr(1);let pe,Te,et,We,rt;A?(Te=fe&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=k.LINES):(Te=fe?"fillPattern":"fill",pe=k.TRIANGLES);for(const it of d){const kt=t.getTile(it);if(fe&&!kt.patternsLoaded())continue;const qt=kt.getBucket(o);if(!qt)continue;u.prepareDrawTile();const Qt=qt.programConfigurations.get(o.id),vn=u.isTileAffectedByFog(it),on=u.getOrCreateProgram(Te,{config:Qt,overrideFog:vn});fe&&(u.context.activeTexture.set(k.TEXTURE0),kt.imageAtlasTexture&&kt.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Qt.updatePaintBuffers());const dn=Z.constantOr(null);if(dn&&kt.imageAtlas){const $n=kt.imageAtlas,Pr=n.A.from(dn).getPrimary().scaleSelf(n.q.devicePixelRatio).serialize(),dr=$n.patternPositions[Pr];dr&&Qt.setConstantPatternPositions(dr)}const nn=u.translatePosMatrix(it.projMatrix,kt,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor")),Rn=o.paint.get("fill-emissive-strength");if(A){We=qt.indexBuffer2,rt=qt.segments2;const $n=u.terrain&&u.terrain.renderingToTexture?u.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];et=Te==="fillOutlinePattern"&&fe?md(nn,Rn,u,kt,$n):Pc(nn,Rn,$n)}else We=qt.indexBuffer,rt=qt.segments,et=fe?Ju(nn,Rn,u,kt):Bu(nn,Rn);u.uploadCommonUniforms(u.context,on,it.toUnwrapped()),on.draw(u,pe,v,q?re:u.stencilModeForClipping(it),b,Mo.disabled,et,o.id,qt.layoutVertexBuffer,We,rt,o.paint,u.transform.zoom,Qt,void 0)}}function Zl(u,t,o,d,v,b,A,k){o.resetLayerRenderingStats(u);const Z=u.context,q=Z.gl,re=u.transform,fe=o.paint.get("fill-extrusion-pattern"),pe=fe.constantOr(1),Te=o.paint.get("fill-extrusion-opacity"),et=u.style.enable3dLights(),We=o.paint.get(et&&!pe?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),rt=[o.paint.get("fill-extrusion-ambient-occlusion-intensity"),We],it=o.layout.get("fill-extrusion-edge-radius"),kt=it>0&&!o.paint.get("fill-extrusion-rounded-roof"),qt=kt?0:it,Qt=re.projection.name==="globe"?n.d3():0,vn=re.projection.name==="globe",on=vn?n.ae(re.zoom):0,dn=[n.at(re.center.lng),n.aA(re.center.lat)],nn=o.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Rn=o.paint.get("fill-extrusion-flood-light-color").toRenderColor(nn?null:o.lut).toArray01().slice(0,3),$n=o.paint.get("fill-extrusion-flood-light-intensity"),Pr=o.paint.get("fill-extrusion-vertical-scale"),dr=o.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Or=o.paint.get("fill-extrusion-height-alignment"),kr=o.paint.get("fill-extrusion-base-alignment"),Yn=Nr(u,o.paint.get("fill-extrusion-cutoff-fade-range")),Mr=[];let ti;vn&&Mr.push("PROJECTION_GLOBE_VIEW"),rt[0]>0&&Mr.push("FAUX_AO"),kt&&Mr.push("ZERO_ROOF_RADIUS"),k&&Mr.push("HAS_CENTROID"),$n>0&&Mr.push("FLOOD_LIGHT"),Yn.shouldRenderCutoff&&Mr.push("RENDER_CUTOFF"),dr&&Mr.push("RENDER_WALL_MODE");const ir=u.renderPass==="shadow",Fr=u.shadowRenderer,Cr=ir&&!!Fr;u.shadowRenderer&&(u.shadowRenderer.useNormalOffset=!0);let xi=[0,0,0];if(Fr){const mi=u.style.directionalLight,gi=u.style.ambientLight;mi&&gi&&(xi=Zi(u.style,mi,gi)),ir||(Mr.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Fr.useNormalOffset&&Mr.push("NORMAL_OFFSET")),ti=Mr.concat(["SHADOWS_SINGLE_CASCADE"])}const ri=Cr?"fillExtrusionDepth":pe?"fillExtrusionPattern":"fillExtrusion",Kr=o.getLayerRenderingStats();for(const mi of d){const gi=t.getTile(mi),Gi=gi.getBucket(o);if(!Gi||Gi.projection.name!==re.projection.name)continue;let Li=!1;Fr&&(Li=Fr.getMaxCascadeForTile(mi.toUnwrapped())===0);const bo=u.isTileAffectedByFog(mi),wo=Gi.programConfigurations.get(o.id),Ao=u.getOrCreateProgram(ri,{config:wo,defines:Li?ti:Mr,overrideFog:bo});if(u.terrain&&u.terrain.setupElevationDraw(gi,Ao,{useMeterToDem:!0}),!Gi.centroidVertexBuffer){const Pa=Ao.attributes.a_centroid_pos;Pa!==void 0&&q.vertexAttrib2f(Pa,0,0)}!ir&&Fr&&Fr.setupShadows(gi.tileID.toUnwrapped(),Ao,"vector-tile",gi.tileID.overscaledZ),pe&&(u.context.activeTexture.set(q.TEXTURE0),gi.imageAtlasTexture&&gi.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),wo.updatePaintBuffers());const zo=fe.constantOr(null);if(zo&&gi.imageAtlas){const Pa=gi.imageAtlas,uo=n.A.from(zo).getPrimary().scaleSelf(n.q.devicePixelRatio),na=Pa.patternPositions[uo.serialize()];na&&wo.setConstantPatternPositions(na)}const Ga=o.paint.get("fill-extrusion-vertical-gradient"),ba=1/Gi.tileToMeter;let wl;if(ir&&Fr){if(vd(gi.tileID,Gi,u))continue;const Pa=Fr.calculateShadowPassMatrixFromTile(gi.tileID.toUnwrapped());wl=zc(Pa,qt,ba,Pr,Or,kr)}else{const Pa=u.translatePosMatrix(mi.expandedProjMatrix,gi,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),uo=re.projection.createInversionMatrix(re,mi.canonical);wl=pe?pd(Pa,u,Ga,Te,rt,qt,ba,mi,gi,Qt,Or,kr,on,dn,uo,Rn,Pr):rd(Pa,u,Ga,Te,rt,qt,ba,mi,Qt,Or,kr,on,dn,uo,Rn,Pr,$n,xi)}u.uploadCommonUniforms(Z,Ao,mi.toUnwrapped(),null,Yn);let os=Gi.segments;if(re.projection.name==="mercator"&&!ir&&(os=Gi.getVisibleSegments(gi.tileID,u.terrain,u.transform.getFrustum(0)),!os.get().length))continue;if(Kr)if(ir)for(const Pa of os.get())Kr.numRenderedVerticesInShadowPass+=Pa.primitiveLength;else for(const Pa of os.get())Kr.numRenderedVerticesInTransparentPass+=Pa.primitiveLength;const ia=[];(u.terrain||k)&&ia.push(Gi.centroidVertexBuffer),vn&&ia.push(Gi.layoutVertexExtBuffer),dr&&ia.push(Gi.wallVertexBuffer),Ao.draw(u,Z.gl.TRIANGLES,v,b,A,Mo.backCCW,wl,o.id,Gi.layoutVertexBuffer,Gi.indexBuffer,os,o.paint,u.transform.zoom,wo,ia)}u.shadowRenderer&&(u.shadowRenderer.useNormalOffset=!1)}function ul(u,t,o,d,v,b,A,k,Z,q,re,fe,pe,Te,et,We,rt,it,kt){const qt=u.context,Qt=qt.gl,vn=u.transform,on=u.transform.zoom,dn=[],nn=Nr(u,o.paint.get("fill-extrusion-cutoff-fade-range"));q==="clear"?(dn.push("CLEAR_SUBPASS"),kt&&(dn.push("CLEAR_FROM_TEXTURE"),qt.activeTexture.set(Qt.TEXTURE0),kt.bind(Qt.LINEAR,Qt.CLAMP_TO_EDGE))):q==="sdf"&&dn.push("SDF_SUBPASS"),rt&&dn.push("HAS_CENTROID"),nn.shouldRenderCutoff&&dn.push("RENDER_CUTOFF");const Rn=o.layout.get("fill-extrusion-edge-radius"),$n=(Pr,dr,Or,kr,Yn)=>{const Mr=dr.programConfigurations.get(o.id),ti=u.isTileAffectedByFog(Pr),ir=u.getOrCreateProgram("fillExtrusionGroundEffect",{config:Mr,defines:dn,overrideFog:ti}),Fr=((xi,ri,Kr,mi,gi,Gi,Li,bo,wo,Ao,zo)=>({u_matrix:ri,u_opacity:Kr,u_ao_pass:mi?1:0,u_meter_to_tile:gi,u_ao:Gi,u_flood_light_intensity:Li,u_flood_light_color:bo,u_attenuation:wo,u_edge_radius:Ao,u_fb:0,u_fb_size:zo,u_dynamic_offset:1}))(0,kr,re,Z,Yn,[fe,pe*Yn],Te,et,We,on>=17?0:Rn*Yn,kt?kt.size[0]:0),Cr=[];rt&&Cr.push(dr.hiddenByLandmarkVertexBuffer),u.uploadCommonUniforms(qt,ir,Pr.toUnwrapped(),null,nn),ir.draw(u,qt.gl.TRIANGLES,v,b,A,k,Fr,o.id,dr.vertexBuffer,dr.indexBuffer,Or,o.paint,on,Mr,Cr)};for(const Pr of d){const dr=t.getTile(Pr),Or=dr.getBucket(o);if(!Or||Or.projection.name!==vn.projection.name||!Or.groundEffect||Or.groundEffect&&!Or.groundEffect.hasData())continue;const kr=Or.groundEffect,Yn=1/Or.tileToMeter;{const Mr=u.translatePosMatrix(Pr.projMatrix,dr,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),ti=kr.getDefaultSegment();$n(Pr,kr,ti,Mr,Yn)}if(it)for(let Mr=0;Mr<4;Mr++){const ti=n.d4[Mr](Pr),ir=t.getTile(ti);if(!ir)continue;const Fr=ir.getBucket(o);if(!Fr||Fr.projection.name!==vn.projection.name||!Fr.groundEffect||Fr.groundEffect&&!Fr.groundEffect.hasData())continue;const Cr=Fr.groundEffect;let xi,ri;Mr===0?(xi=[-n.ag,0,0],ri=1):Mr===1?(xi=[n.ag,0,0],ri=0):Mr===2?(xi=[0,-n.ag,0],ri=3):(xi=[0,n.ag,0],ri=2);const Kr=Cr.regionSegments[ri];if(!Kr)continue;const mi=new Float32Array(16);n.ab.mat4.translate(mi,Pr.projMatrix,xi),$n(Pr,Cr,Kr,u.translatePosMatrix(mi,dr,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Yn)}}}function Kc(u,t,o,d,v,b,A){d.centroidVertexArray.length===0&&d.createCentroidsBuffer();const k=b?b.findDEMTileFor(o):null;if(!(k&&k.dem||A))return;b&&k&&k.dem&&d.selfDEMTileTimestamp!==k.dem._timestamp&&(d.borderDoneWithNeighborZ=[-1,-1,-1,-1],d.selfDEMTileTimestamp=k.dem._timestamp);const Z=it=>new n.P(Math.ceil((it+n.d7)*n.d8),0),q=it=>{const kt=t.getSource().minzoom,qt=vn=>{const on=t.getTileByID(vn);if(on&&on.hasData())return on.getBucket(v)},Qt=[0,-1,1];for(const vn of Qt){if(it.overscaledZ+vn<kt)continue;const on=qt(it.calculateScaledKey(it.overscaledZ+vn));if(on)return on}},re=[0,0,0],fe=(it,kt)=>(re[0]=Math.min(it.min.y,kt.min.y),re[1]=Math.max(it.max.y,kt.max.y),re[2]=n.ag-kt.min.x>it.max.x?kt.min.x-n.ag:it.max.x,re),pe=(it,kt)=>(re[0]=Math.min(it.min.x,kt.min.x),re[1]=Math.max(it.max.x,kt.max.x),re[2]=n.ag-kt.min.y>it.max.y?kt.min.y-n.ag:it.max.y,re),Te=[(it,kt)=>fe(it,kt),(it,kt)=>fe(kt,it),(it,kt)=>pe(it,kt),(it,kt)=>pe(kt,it)],et=(it,kt,qt,Qt,vn,on,dn)=>{if(!b)return 0;const nn=[[on?qt:it,on?it:qt,0],[on?qt:kt,on?kt:qt,0]],Rn=dn<0?n.ag+dn:dn,$n=[on?Rn:(it+kt)/2,on?(it+kt)/2:Rn,0];return qt===0&&dn<0||qt!==0&&dn>0?b.getForTilePoints(vn,[$n],!0,Qt):nn.push($n),b.getForTilePoints(o,nn,!0,k),Math.max(nn[0][2],nn[1][2],$n[2])/b.exaggeration()};for(let it=0;it<4;it++){const kt=d.borderFeatureIndices[it];if(kt.length===0)continue;const qt=n.d4[it](o),Qt=q(qt);if(!(Qt&&Qt instanceof n.d5))continue;const vn=b?b.findDEMTileFor(qt):null;if(!(vn&&vn.dem||A)||(b&&vn&&vn.dem&&d.borderDEMTileTimestamp[it]!==vn.dem._timestamp&&(d.borderDoneWithNeighborZ[it]=-1,d.borderDEMTileTimestamp[it]=vn.dem._timestamp),d.borderDoneWithNeighborZ[it]===Qt.canonical.z))continue;Qt.centroidVertexArray.length===0&&Qt.createCentroidsBuffer();const on=(it<2?1:5)-it,dn=Qt.borderDoneWithNeighborZ[on]!==d.canonical.z,nn=Qt.borderFeatureIndices[on];let Rn=0;if(d.canonical.z!==Qt.canonical.z){for(const $n of kt)d.showCentroid(d.featuresOnBorder[$n]);if(dn)for(const $n of nn)Qt.showCentroid(Qt.featuresOnBorder[$n]);d.borderDoneWithNeighborZ[it]=Qt.canonical.z,Qt.borderDoneWithNeighborZ[on]=d.canonical.z}for(const $n of kt){const Pr=d.featuresOnBorder[$n],dr=d.centroidData[Pr.centroidDataIndex],Or=Pr.borders[it];let kr;for(;Rn<nn.length;){kr=Qt.featuresOnBorder[nn[Rn]];const Yn=kr.borders[on];if(Yn[1]>Or[0]+3||Yn[0]>Or[0]-3)break;Qt.showCentroid(kr),Rn++}if(kr&&Rn<nn.length){const Yn=Rn;let Mr=0;for(;!(kr.borders[on][0]>Or[1]-3)&&(Mr++,++Rn!==nn.length);)kr=Qt.featuresOnBorder[nn[Rn]];kr=Qt.featuresOnBorder[nn[Yn]];let ti=!1;if(Mr>=1){const Cr=kr.borders[on];Math.abs(Or[0]-Cr[0])<3&&Math.abs(Or[1]-Cr[1])<3&&(Mr=1,ti=!0,Rn=Yn+1)}else if(Mr===0){d.showCentroid(Pr);continue}const ir=Qt.centroidData[kr.centroidDataIndex];A&&ti&&(((We=dr).flags|(rt=ir).flags)&n.d6?(We.flags|=n.d6,rt.flags|=n.d6):(We.flags&=~n.d6,rt.flags&=~n.d6));const Fr=Pr.intersectsCount()>1||kr.intersectsCount()>1;if(Mr>1)Rn=Yn,dr.centroidXY=ir.centroidXY=new n.P(0,0);else if(vn&&vn.dem&&!Fr){const Cr=Te[it](dr,ir),xi=it%2?n.ag-1:0,ri=et(Cr[0],Math.min(n.ag-1,Cr[1]),xi,vn,qt,it<2,Cr[2]);dr.centroidXY=ir.centroidXY=Z(ri)}else Fr?dr.centroidXY=ir.centroidXY=new n.P(0,0):(dr.centroidXY=d.encodeBorderCentroid(Pr),ir.centroidXY=Qt.encodeBorderCentroid(kr));d.writeCentroidToBuffer(dr),Qt.writeCentroidToBuffer(ir)}else d.showCentroid(Pr)}d.borderDoneWithNeighborZ[it]=Qt.canonical.z,Qt.borderDoneWithNeighborZ[on]=d.canonical.z}var We,rt;(d.needsCentroidUpdate||!d.centroidVertexBuffer&&d.centroidVertexArray.length!==0)&&d.uploadCentroid(u)}const Qu=[1,0,0],di=[0,1,0],Ni=[0,0,1];function vd(u,t,o){const d=o.transform,v=o.shadowRenderer;if(!v)return!0;const b=u.toUnwrapped(),A=d.tileSize*v._cascades[o.currentShadowCascade].scale;let k=t.maxHeight;if(d.elevation){const We=d.elevation.getMinMaxForTile(u);We&&(k+=We.max)}const Z=[...v.shadowDirection];Z[2]=-Z[2];const q=v.computeSimplifiedTileShadowVolume(b,k,A,Z);if(!q)return!1;const re=[Qu,di,Ni,Z,[Z[0],0,Z[2]],[0,Z[1],Z[2]]],fe=d.projection.name==="globe",pe=d.scaleZoom(A),Te=n.bR.fromInvProjectionMatrix(d.invProjMatrix,d.worldSize,pe,!fe),et=v.getCurrentCascadeFrustum();return Te.intersectsPrecise(q.vertices,q.planes,re)===0||et.intersectsPrecise(q.vertices,q.planes,re)===0}function gl(u){return[u[0]*n.d9,u[1]*n.d9,u[2]*n.d9,0]}function gr(u,t,o,d,v,b,A,k,Z){const q=d.getSource(),re=o.globeSharedBuffers;if(!re)return;let fe,pe,Te;if(t&&(fe=d.getTile(t)),q instanceof n.aJ?(pe=q.texture,Te=n.cI(0,0,o.transform)):fe&&t&&(pe=fe.texture,Te=n.cI(t.canonical.z,t.canonical.x,o.transform)),!pe||!Te)return;u||(Te=n.ab.mat4.scale(n.ab.mat4.create(),Te,[1,-1,1]));const et=o.context,We=et.gl,rt=v.paint.get("raster-resampling")==="nearest"?We.NEAREST:We.LINEAR,it=o.colorModeForDrapableLayerRenderPass(b),kt=A.defines;kt.push("GLOBE_POLES");const qt=new Ui(We.LEQUAL,Ui.ReadWrite,o.depthRangeFor3D),Qt=Float32Array.from(o.transform.expandedFarZProjMatrix),vn=Float32Array.from(n.bb(n.cH(new n.bT(0,0,0))));o.terrain&&o.terrain.prepareDrawTile(),et.activeTexture.set(We.TEXTURE0),pe.bind(rt,We.CLAMP_TO_EDGE),et.activeTexture.set(We.TEXTURE1),pe.bind(rt,We.CLAMP_TO_EDGE),pe.useMipmap&&et.extTextureFilterAnisotropic&&o.transform.pitch>20&&We.texParameterf(We.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax);const[on,dn,nn,Rn]=t?re.getPoleBuffers(t.canonical.z,!1):re.getPoleBuffers(0,!0),$n=v.paint.get("raster-elevation");let Pr;u?(Pr=on,o.renderDefaultNorthPole=$n!==0):(Pr=dn,o.renderDefaultSouthPole=$n!==0);const dr=gl(A.mix),Or=((Yn,Mr,ti,ir,Fr,Cr,xi,ri,Kr,mi,gi,Gi,Li)=>nu(Yn,Mr,ti,new Float32Array(16),new Float32Array(9),[0,0],ir,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Cr,[0,0],ri,2,mi,gi,Gi,1,0,Li))(Qt,vn,Te,n.ae(o.transform.zoom),0,v,0,$n,0,dr,A.offset,A.range,b),kr=o.getOrCreateProgram("raster",{defines:kt});o.uploadCommonUniforms(et,kr,null),kr.draw(o,We.TRIANGLES,qt,Z,it,k,Or,v.id,Pr,nn,Rn)}function od(u){const t=u._nearZ,o=u.projection.farthestPixelDistance(u),d=o-t,v=.2*u.height,b=t+v;return[t,o,(b-v-t)/d,(b-t)/d]}function yd(u,t,o,d){if(u)return t instanceof Xo&&u instanceof ao?t.getTextureDescriptor(u,o,!0):{texture:u.texture,mix:gl(d.mix),offset:d.offset,buffer:0,tileSize:1}}var rf=n.da([{name:"a_index",type:"Int16",components:1}]);class sm{constructor(t,o,d,v){const b={width:d[0],height:d[1],data:null},A=t.gl;this.targetColorTexture=new n.T(t,b,A.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(t,b,A.RGBA8,{useMipmap:!1}),this.context=t,this.updateParticleTexture(o,v),this.lastInvalidatedAt=0}updateParticleTexture(t,o){if(this.particleTextureDimension===o.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const d=this.context.gl,v=o.width*o.height;this.particleTexture0=new n.T(this.context,o,d.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,o,d.RGBA8,{premultiply:!1,useMipmap:!1});const b=new n.db;b.reserve(v);for(let A=0;A<v;A++)b.emplaceBack(A);this.particleIndexBuffer=this.context.createVertexBuffer(b,rf.members,!0),this.particleSegment=n.b7.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=o.width}update(t){return!(this.lastInvalidatedAt<t&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function th(u,t,o){if(!u)return null;const d=t.getTextureDescriptor(u,o,!0);if(!d)return null;let{texture:v,mix:b,offset:A,tileSize:k,buffer:Z,format:q}=d;if(!v||!q)return null;let re=!1;return q==="uint32"&&(re=!0,b[3]=0,b=Fc(n.dc,b,[0,o.paint.get("raster-particle-max-speed")]),A=Oc(n.dc,A,[0,o.paint.get("raster-particle-max-speed")])),{texture:v,textureOffset:[Z/(k+2*Z),k/(k+2*Z)],tileSize:k,scalarData:re,scale:b,offset:A,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[q]]}}function yh(u){const t=u._nearZ,o=u.projection.farthestPixelDistance(u),d=o-t,v=.2*u.height,b=t+v;return[t,o,(b-v-t)/d,(b-t)/d]}const nh=new n.aj(1,0,0,1),km=new n.aj(0,1,0,1),xh=new n.aj(0,0,1,1),Ud=new n.aj(1,0,1,1),of=new n.aj(0,1,1,1);function bh(u,t,o,d,v,b,A){const k=u.context,Z=u.transform,q=k.gl,re=Z.projection.name==="globe",fe=re?["PROJECTION_GLOBE_VIEW"]:[];let pe=n.ab.mat4.clone(o.projMatrix);if(re&&n.ae(Z.zoom)>0){const dr=n.ba(o.canonical,Z),Or=n.dd(dr);pe=n.ab.mat4.multiply(new Float32Array(16),Z.globeMatrix,Or),n.ab.mat4.multiply(pe,Z.projMatrix,pe)}const Te=n.ab.mat4.create();Te[12]+=2*v/(n.q.devicePixelRatio*Z.width),Te[13]+=2*b/(n.q.devicePixelRatio*Z.height),n.ab.mat4.multiply(pe,Te,pe);const et=u.getOrCreateProgram("debug",{defines:fe}),We=t.getTileByID(o.key);u.terrain&&u.terrain.setupElevationDraw(We,et);const rt=Ui.disabled,it=Io.disabled,kt=u.colorModeForRenderPass(),qt="$debug";k.activeTexture.set(q.TEXTURE0),u.emptyTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),re?We._makeGlobeTileDebugBuffers(u.context,Z):We._makeDebugTileBoundsBuffers(u.context,Z.projection);const Qt=We._tileDebugBuffer||u.debugBuffer,vn=We._tileDebugIndexBuffer||u.debugIndexBuffer,on=We._tileDebugSegments||u.debugSegments;if(et.draw(u,q.LINE_STRIP,rt,it,kt,Mo.disabled,fu(pe,d),qt,Qt,vn,on,null,null,null,[We._globeTileDebugBorderBuffer]),A){const dr=We.latestRawTileData,Or=Math.floor((dr&&dr.byteLength||0)/1024);let kr=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(kr+=` => ${o.overscaledZ}`),kr+=` ${We.state}`,kr+=` ${Or}kb`,function(Yn,Mr){Yn.initDebugOverlayCanvas();const ti=Yn.debugOverlayCanvas,ir=Yn.context.gl,Fr=Yn.debugOverlayCanvas.getContext("2d");Fr.clearRect(0,0,ti.width,ti.height),Fr.shadowColor="white",Fr.shadowBlur=2,Fr.lineWidth=1.5,Fr.strokeStyle="white",Fr.textBaseline="top",Fr.font="bold 36px Open Sans, sans-serif",Fr.fillText(Mr,5,5),Fr.strokeText(Mr,5,5),Yn.debugOverlayTexture.update(ti),Yn.debugOverlayTexture.bind(ir.LINEAR,ir.CLAMP_TO_EDGE)}(u,kr)}const dn=t.getTile(o).tileSize,nn=512/Math.min(dn,512)*(o.overscaledZ/Z.zoom)*.5,Rn=We._tileDebugTextBuffer||u.debugBuffer,$n=We._tileDebugTextIndexBuffer||u.quadTriangleIndexBuffer,Pr=We._tileDebugTextSegments||u.debugSegments;et.draw(u,q.TRIANGLES,rt,it,go.alphaBlended,Mo.disabled,fu(pe,n.aj.transparent,nn),qt,Rn,$n,Pr,null,null,null,[We._globeTileDebugTextBuffer])}function rp(u,t,o,d){xd(u,0,t+o/2,u.transform.width,o,d)}function Ip(u,t,o,d){xd(u,t-o/2,0,o,u.transform.height,d)}function xd(u,t,o,d,v,b){const A=u.context,k=A.gl;k.enable(k.SCISSOR_TEST),k.scissor(t*n.q.devicePixelRatio,o*n.q.devicePixelRatio,d*n.q.devicePixelRatio,v*n.q.devicePixelRatio),A.clear({color:b}),k.disable(k.SCISSOR_TEST)}const qu=n.da([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Uu}=qu;function Rc(u,t,o,d){u.emplaceBack(t,o,d)}class Vd{constructor(t){this.vertexArray=new n.de,this.indices=new n.aU,Rc(this.vertexArray,-1,-1,1),Rc(this.vertexArray,1,-1,1),Rc(this.vertexArray,-1,1,1),Rc(this.vertexArray,1,1,1),Rc(this.vertexArray,-1,-1,-1),Rc(this.vertexArray,1,-1,-1),Rc(this.vertexArray,-1,1,-1),Rc(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Uu),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=n.b7.simpleSegment(0,0,36,12)}}function Bl(u,t,o,d,v,b){const A=u.context.gl,k=t.paint.get("sky-atmosphere-color"),Z=t.paint.get("sky-atmosphere-halo-color"),q=t.paint.get("sky-atmosphere-sun-intensity"),re=((fe,pe,Te,et,We)=>({u_matrix_3f:fe,u_sun_direction:pe,u_sun_intensity:Te,u_color_tint_r:[et.r,et.g,et.b,et.a],u_color_tint_m:[We.r,We.g,We.b,We.a],u_luminance:5e-5}))(n.ab.mat3.fromMat4(n.ab.mat3.create(),d),v,q,k,Z);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+b,t.skyboxTexture,0),o.draw(u,A.TRIANGLES,Ui.disabled,Io.disabled,go.unblended,Mo.frontCW,re,"skyboxCapture",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}const wh=n.da([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Yc{constructor(t){const o=new n.df;o.emplaceBack(-1,1,1,0,0),o.emplaceBack(1,1,1,1,0),o.emplaceBack(1,-1,1,1,1),o.emplaceBack(-1,-1,1,0,1);const d=new n.aU;d.emplaceBack(0,1,2),d.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(o,wh.members),this.indexBuffer=t.createIndexBuffer(d),this.segments=n.b7.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ks=n.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class ra{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Uh{constructor(t){this.colorModeAlphaBlendedWriteRGB=new go([1,aa,1,aa],n.aj.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new go([1,0,1,0],n.aj.transparent,[!1,!1,!1,!0]),this.params=new ra,this.updateNeeded=!0,t.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),t.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),t.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),t.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(t){const o=t.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Yc(o);const d=this.params.sizeRange,v=this.params.intensityRange,b=function(re){const fe=n.di(30),pe=[];for(let Te=0;Te<re;++Te){const et=2*Math.PI*fe(),We=Math.acos(1-2*fe())-.5*Math.PI;pe.push(n.ab.vec3.fromValues(Math.cos(We)*Math.cos(et),Math.cos(We)*Math.sin(et),Math.sin(We)))}return pe}(this.params.starsCount),A=n.di(300),k=new n.dg,Z=new n.aU;let q=0;for(let re=0;re<b.length;++re){const fe=n.ab.vec3.scale([],b[re],200),pe=Math.max(0,1+.01*d*(1*A()-.5)),Te=Math.max(0,1+.01*v*(1*A()-.5));k.emplaceBack(fe[0],fe[1],fe[2],-1,-1,pe,Te),k.emplaceBack(fe[0],fe[1],fe[2],1,-1,pe,Te),k.emplaceBack(fe[0],fe[1],fe[2],1,1,pe,Te),k.emplaceBack(fe[0],fe[1],fe[2],-1,1,pe,Te),Z.emplaceBack(q+0,q+1,q+2),Z.emplaceBack(q+0,q+2,q+3),q+=4}this.starsVx=o.createVertexBuffer(k,ks.members),this.starsIdx=o.createIndexBuffer(Z),this.starsSegments=n.b7.simpleSegment(0,0,k.length,Z.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(t,o){const d=t.context,v=d.gl,b=t.transform,A=new Ui(v.LEQUAL,Ui.ReadOnly,[0,1]),k=n.ae(b.zoom),Z=t.style.getLut(o.scope),q=o.properties.get("color-use-theme")==="none",re=o.properties.get("color").toRenderColor(q?null:Z).toArray01(),fe=o.properties.get("high-color-use-theme")==="none",pe=o.properties.get("high-color").toRenderColor(fe?null:Z).toArray01(),Te=o.properties.get("space-color-use-theme")==="none",et=o.properties.get("space-color").toRenderColor(Te?null:Z).toArray01PremultipliedAlpha(),We=5e-4,rt=n.dh(o.properties.get("horizon-blend"),0,1,We,.25),it=n.cC(t,d,b)&&rt===We?b.worldSize/(2*Math.PI*1.025)-1:b.globeRadius,kt=t.frameCounter/1e3%1,qt=n.ab.vec3.length(b.globeCenterInViewSpace),Qt=Math.sqrt(Math.pow(qt,2)-Math.pow(it,2)),vn=Math.acos(Qt/qt),on=dn=>{const nn=b.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];dn&&nn.push("ALPHA_PASS");const Rn=t.getOrCreateProgram("globeAtmosphere",{defines:nn}),$n=((dr,Or,kr,Yn,Mr,ti,ir,Fr,Cr,xi,ri,Kr)=>({u_frustum_tl:dr,u_frustum_tr:Or,u_frustum_br:kr,u_frustum_bl:Yn,u_horizon:Mr,u_transition:ti,u_fadeout_range:ir,u_color:Fr,u_high_color:Cr,u_space_color:xi,u_temporal_offset:ri,u_horizon_angle:Kr}))(b.frustumCorners.TL,b.frustumCorners.TR,b.frustumCorners.BR,b.frustumCorners.BL,b.frustumCorners.horizon,k,rt,re,pe,et,kt,vn);t.uploadCommonUniforms(d,Rn);const Pr=this.atmosphereBuffer;Pr&&Rn.draw(t,v.TRIANGLES,A,Io.disabled,dn?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Mo.backCW,$n,dn?"atmosphere_glow_alpha":"atmosphere_glow",Pr.vertexBuffer,Pr.indexBuffer,Pr.segments)};on(!1),on(!0)}drawStars(t,o){const d=n.aw(o.properties.get("star-intensity"),0,1);if(d===0)return;const v=t.context,b=v.gl,A=t.transform,k=t.getOrCreateProgram("stars"),Z=n.ab.quat.identity([]);n.ab.quat.rotateX(Z,Z,-A._pitch),n.ab.quat.rotateZ(Z,Z,-A.angle),n.ab.quat.rotateX(Z,Z,n.ai(A._center.lat)),n.ab.quat.rotateY(Z,Z,-n.ai(A._center.lng));const q=n.ab.mat4.fromQuat(new Float32Array(16),Z),re=n.ab.mat4.multiply([],A.starsProjMatrix,q),fe=n.ab.mat3.fromMat4([],q),pe=n.ab.mat3.invert([],fe),Te=[0,1,0];n.ab.vec3.transformMat3(Te,Te,pe),n.ab.vec3.scale(Te,Te,this.params.sizeMultiplier);const et=[1,0,0];n.ab.vec3.transformMat3(et,et,pe),n.ab.vec3.scale(et,et,this.params.sizeMultiplier);const We=(rt=Te,it=et,kt=d,{u_matrix:Float32Array.from(re),u_up:rt,u_right:it,u_intensity_multiplier:kt});var rt,it,kt;t.uploadCommonUniforms(v,k),this.starsVx&&this.starsIdx&&k.draw(t,b.TRIANGLES,Ui.disabled,Io.disabled,this.colorModeAlphaBlendedWriteRGB,Mo.disabled,We,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Vu(u,t){const o=[...u],d=t.cameraWorldSizeForFog/t.worldSize,v=n.ab.mat4.identity([]);return n.ab.mat4.scale(v,v,[d,d,1]),n.ab.mat4.multiply(o,v,o),n.ab.mat4.multiply(o,t.worldToFogMatrix,o),o}function Od(u,t,o,d,v){const b=o.material,A=d.context,{baseColorTexture:k,metallicRoughnessTexture:Z}=b.pbrMetallicRoughness,{normalTexture:q,occlusionTexture:re,emissionTexture:fe}=b;function pe(et,We,rt){if(et&&(u.push(We),A.activeTexture.set(A.gl.TEXTURE0+rt),et.gfxTexture)){const{minFilter:it,magFilter:kt,wrapS:qt,wrapT:Qt}=et.sampler;et.gfxTexture.bindExtraParam(it,kt,qt,Qt)}}pe(k,"HAS_TEXTURE_u_baseColorTexture",zt.BaseColor),pe(Z,"HAS_TEXTURE_u_metallicRoughnessTexture",zt.MetallicRoughness),pe(q,"HAS_TEXTURE_u_normalTexture",zt.Normal),pe(re,"HAS_TEXTURE_u_occlusionTexture",zt.Occlusion),pe(fe,"HAS_TEXTURE_u_emissionTexture",zt.Emission),v&&(v.texture||(v.texture=new n.dk(d.context,v.image,[v.image.height,v.image.height,v.image.height],A.gl.RGBA8)),A.activeTexture.set(A.gl.TEXTURE0+zt.LUT),v.texture&&v.texture.bind(A.gl.LINEAR,A.gl.CLAMP_TO_EDGE),u.push("APPLY_LUT_ON_GPU")),o.texcoordBuffer&&(u.push("HAS_ATTRIBUTE_a_uv_2f"),t.push(o.texcoordBuffer)),o.colorBuffer&&(u.push(o.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),t.push(o.colorBuffer)),o.normalBuffer&&(u.push("HAS_ATTRIBUTE_a_normal_3f"),t.push(o.normalBuffer)),o.pbrBuffer&&(u.push("HAS_ATTRIBUTE_a_pbr"),u.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),t.push(o.pbrBuffer)),b.alphaMode!=="OPAQUE"&&b.alphaMode!=="MASK"||u.push("UNPREMULT_TEXTURE_IN_SHADER"),b.defined||u.push("DIFFUSE_SHADED");const Te=d.shadowRenderer;Te&&(u.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Te.useNormalOffset&&u.push("NORMAL_OFFSET"))}function Ha(u,t,o,d,v,b){const A=o.paint.get("model-opacity").constantOr(1),k=t.context,Z=new Ui(t.context.gl.LEQUAL,Ui.ReadWrite,t.depthRangeFor3D),q=t.transform,re=u.mesh,fe=re.material,pe=fe.pbrMetallicRoughness,Te=t.style.fog;let et;et=t.transform.projection.zAxisUnit==="pixels"?[...u.nodeModelMatrix]:n.ab.mat4.multiply([],d.zScaleMatrix,u.nodeModelMatrix),n.ab.mat4.multiply(et,d.negCameraPosMatrix,et);const We=n.ab.mat4.invert([],et);n.ab.mat4.transpose(We,We);const rt=o.paint.get("model-color-use-theme").constantOr("default")==="none",it=o.paint.get("model-emissive-strength").constantOr(0),kt=Wa(new Float32Array(u.worldViewProjection),new Float32Array(et),new Float32Array(We),null,t,A,pe.baseColorFactor.toRenderColor(null),fe.emissiveFactor,pe.metallicFactor,pe.roughnessFactor,fe,it,o),qt={defines:[]},Qt=[],vn=t.shadowRenderer;vn&&(vn.useNormalOffset=!1),Od(qt.defines,Qt,re,t,rt?null:o.lut);let on=null;if(Te){const Rn=Vu(u.nodeModelMatrix,t.transform);if(on=new Float32Array(Rn),q.projection.name!=="globe"){const $n=re.aabb.min,Pr=re.aabb.max,[dr,Or]=Te.getOpacityForBounds(Rn,$n[0],$n[1],Pr[0],Pr[1]);qt.overrideFog=dr>=jt||Or>=jt}}const dn=Nr(t,o.paint.get("model-cutoff-fade-range"));dn.shouldRenderCutoff&&qt.defines.push("RENDER_CUTOFF");const nn=t.getOrCreateProgram("model",qt);t.uploadCommonUniforms(k,nn,null,on,dn),t.renderPass!=="shadow"&&vn&&vn.setupShadowsFromMatrix(u.nodeModelMatrix,nn),nn.draw(t,k.gl.TRIANGLES,Z,v,b,re.material.doubleSided?Mo.disabled:Mo.backCCW,kt,o.id,re.vertexBuffer,re.indexBuffer,re.segments,o.paint,t.transform.zoom,void 0,Qt)}function Rf(u,t,o,d,v,b,A){let k;k=u.projection.name==="globe"?n.dl(o,u):[...o],n.ab.mat4.multiply(k,k,t.matrix);const Z=n.ab.mat4.multiply([],d,k);if(t.meshes)for(const q of t.meshes){if(q.material.alphaMode!=="BLEND"){A.push({mesh:q,depth:0,modelIndex:v,worldViewProjection:Z,nodeModelMatrix:k});continue}const re=n.ab.vec3.transformMat4([],q.centroid,Z);!u.isOrthographic&&re[2]<=0||b.push({mesh:q,depth:re[2],modelIndex:v,worldViewProjection:Z,nodeModelMatrix:k})}if(t.children)for(const q of t.children)Rf(u,q,o,d,v,b,A)}function Rd(u,t,o,d){const v=o.shadowRenderer;if(!v)return;const b=v.getShadowPassDepthMode(),A=v.getShadowPassColorMode(),k=v.calculateShadowPassMatrixFromMatrix(t),Z=To(k);o.getOrCreateProgram("modelDepth",{defines:o._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(o,o.context.gl.TRIANGLES,b,Io.disabled,A,Mo.backCCW,Z,d.id,u.vertexBuffer,u.indexBuffer,u.segments,d.paint,o.transform.zoom,void 0,void 0)}function cl(u,t,o){const d=t.updateZoomBasedPaintProperties(),v=function(b,A,k){let Z,q,re,fe=b.terrain?b.terrain.exaggeration():0;if(b.terrain&&fe>0){const pe=b.terrain,Te=pe.findDEMTileFor(k);Te&&Te.dem?Z=n.dn.create(pe,k,Te):fe=0}if(fe===0&&(A.terrainElevationMin=0,A.terrainElevationMax=0),fe===A.validForExaggeration&&(fe===0||Z&&Z._demTile&&Z._demTile.tileID===A.validForDEMTile.id&&Z._dem._timestamp===A.validForDEMTile.timestamp))return!1;for(const pe in A.instancesPerModel){const Te=A.instancesPerModel[pe];for(let et=0;et<Te.instancedDataArray.length;++et){const We=(Z?fe*Z.getElevationAt(0|Te.instancedDataArray.float32[16*et],0|Te.instancedDataArray.float32[16*et+1],!0,!0):0)+Te.instancesEvaluatedElevation[et];Te.instancedDataArray.float32[16*et+6]=We,q=q?Math.min(A.terrainElevationMin,We):We,re=re?Math.max(A.terrainElevationMax,We):We}}return A.terrainElevationMin=q||0,A.terrainElevationMax=re||0,A.validForExaggeration=fe,A.validForDEMTile=Z&&Z._demTile?{id:Z._demTile.tileID,timestamp:Z._dem._timestamp}:{id:void 0,timestamp:0},!0}(u,t,o);(d||v)&&(t.uploaded=!1,t.upload(u.context))}const Js={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.cd([0,0,0],[n.ag,n.ag,0])};function Gu(u,t){const o=1<<u.canonical.z,d=t.getFreeCameraOptions().position,v=t.elevation,b=u.canonical.x/o,A=(u.canonical.x+1)/o,k=u.canonical.y/o,Z=(u.canonical.y+1)/o;let q=t._centerAltitude;if(v){const Te=v.getMinMaxForTile(u);Te&&Te.max>q&&(q=Te.max)}const re=n.aw(d.x,b,A)-d.x,fe=n.aw(d.y,k,Z)-d.y,pe=n.bH(q,t.center.lat)-d.z;return t._zoomFromMercatorZ(Math.sqrt(re*re+fe*fe+pe*pe))}function Vh(u,t,o,d,v,b,A){const k=u.context,Z=u.renderPass==="shadow",q=u.shadowRenderer,re=Z&&q?q.getShadowPassDepthMode():new Ui(k.gl.LEQUAL,Ui.ReadWrite,u.depthRangeFor3D),fe=u.isTileAffectedByFog(b);if(o.meshes)for(const pe of o.meshes){const Te=["MODEL_POSITION_ON_GPU"],et=[];let We,rt,it;d.instancedDataArray.length>20&&Te.push("INSTANCED_ARRAYS");const kt=Nr(u,t.paint.get("model-cutoff-fade-range"));if(kt.shouldRenderCutoff&&Te.push("RENDER_CUTOFF"),Z&&q)We=u.getOrCreateProgram("modelDepth",{defines:Te}),rt=To(A.shadowTileMatrix,A.shadowTileMatrix,Float32Array.from(o.matrix)),it=q.getShadowPassColorMode();else{Od(Te,et,pe,u,t.paint.get("model-color-use-theme").constantOr("default")==="none"?null:t.lut),We=u.getOrCreateProgram("model",{defines:Te,overrideFog:fe});const Qt=pe.material,vn=Qt.pbrMetallicRoughness,on=t.paint.get("model-opacity").constantOr(1),dn=t.paint.get("model-emissive-strength").constantOr(0);rt=Wa(b.expandedProjMatrix,Float32Array.from(o.matrix),new Float32Array(16),null,u,on,vn.baseColorFactor.toRenderColor(null),Qt.emissiveFactor,vn.metallicFactor,vn.roughnessFactor,Qt,dn,t,v),q&&(A.shadowUniformsInitialized?We.setShadowUniformValues(k,q.getShadowUniformValues()):(q.setupShadows(b.toUnwrapped(),We,"model-tile",b.overscaledZ),A.shadowUniformsInitialized=!0)),it=kt.shouldRenderCutoff||on<1||Qt.alphaMode!=="OPAQUE"?go.alphaBlended:go.unblended}u.uploadCommonUniforms(k,We,b.toUnwrapped(),null,kt);const qt=pe.material.doubleSided?Mo.disabled:Mo.backCCW;if(d.instancedDataArray.length>20)et.push(d.instancedDataBuffer),We.draw(u,k.gl.TRIANGLES,re,Io.disabled,it,qt,rt,t.id,pe.vertexBuffer,pe.indexBuffer,pe.segments,t.paint,u.transform.zoom,void 0,et,d.instancedDataArray.length);else{const Qt=Z?"u_instance":"u_normal_matrix";for(let vn=0;vn<d.instancedDataArray.length;++vn)rt[Qt]=new Float32Array(d.instancedDataArray.arrayBuffer,64*vn,16),We.draw(u,k.gl.TRIANGLES,re,Io.disabled,it,qt,rt,t.id,pe.vertexBuffer,pe.indexBuffer,pe.segments,t.paint,u.transform.zoom,void 0,et)}}if(o.children)for(const pe of o.children)Vh(u,t,pe,d,v,b,A)}const Gd=[1,-1,1];function af(u,t,o,d){if(!o.modelManager)return!0;const v=o.modelManager;if(!o.shadowRenderer)return!0;const b=o.shadowRenderer,A=t.aabb;let k=!0,Z=u.maxHeight;if(Z===0){let re=0;for(const fe in u.instancesPerModel){const pe=v.getModel(fe,d);pe?re=Math.max(re,Math.max(Math.max(pe.aabb.max[0],pe.aabb.max[1]),pe.aabb.max[2])):k=!1}Z=u.maxScale*re*1.41+u.maxVerticalOffset,k&&(u.maxHeight=Z)}A.max[2]=Z,A.min[2]+=u.terrainElevationMin,A.max[2]+=u.terrainElevationMax,n.ab.vec3.transformMat4(A.min,A.min,t.tileMatrix),n.ab.vec3.transformMat4(A.max,A.max,t.tileMatrix);const q=A.intersects(b.getCurrentCascadeFrustum());return o.currentShadowCascade===0&&(u.isInsideFirstShadowMapFrustum=q===2),q===0}function dl(u,t){const o=u.uniformValues.u_cutoff_params[0],d=u.uniformValues.u_cutoff_params[1],v=u.uniformValues.u_cutoff_params[2],b=u.uniformValues.u_cutoff_params[3];return d===o||b===v?1:n.aw(((t-o)/(d-o)-v)/(b-v),0,1)}function cc(u,t,o,d){if(t.pitch<20)return 1;const v=t.getWorldToCameraMatrix();n.ab.mat4.multiply(v,v,u);const b=n.ab.vec4.fromValues(o.min[0],o.min[1],o.min[2],1);let A=n.ab.vec4.transformMat4(n.ab.vec4.create(),b,v),k=A,Z=A;b[1]=o.max[1],A=n.ab.vec4.transformMat4(n.ab.vec4.create(),b,v),k=A[1]<k[1]?A:k,Z=A[1]>Z[1]?A:Z,b[0]=o.max[0],A=n.ab.vec4.transformMat4(n.ab.vec4.create(),b,v),k=A[1]<k[1]?A:k,Z=A[1]>Z[1]?A:Z,b[1]=o.min[1],A=n.ab.vec4.transformMat4(n.ab.vec4.create(),b,v),k=A[1]<k[1]?A:k,Z=A[1]>Z[1]?A:Z;const q=n.aw(d[0],0,1),re=100*t.pixelsPerMeter*n.aw(d[1],0,1),fe=n.aw(d[2],0,1),pe=n.ab.vec4.lerp(n.ab.vec4.create(),k,Z,q),Te=Math.tan(.5*t.fovX),et=-pe[2]*Te;if(re===0)return pe[1]<-Math.abs(et)?fe:1;const We=(-Math.abs(et)-pe[1])/re,rt=(kt,qt,Qt)=>(1-Qt)*kt+Qt*qt,it=n.aw(rt(1,fe,We),fe,1);return rt(1,it,n.aw((t.pitch-20)/20,0,1))}class rh{}class ip{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(t,o,d){{const fe=this._storage.get(o.id);if(fe)return fe.lastUsedFrameIdx=t,fe.buf}const v=d.gl,b=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),A=new ArrayBuffer(b),k=new Int16Array(A);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(A));const Z=new n.dq;for(let fe=0;fe<b/2;fe+=3){const pe=k[fe],Te=k[fe+1],et=k[fe+2];Z.emplaceBack(pe,Te),Z.emplaceBack(Te,et),Z.emplaceBack(et,pe)}const q=d.bindVertexArrayOES.current,re=new rh;return re.buf=new Xs(d,Z),re.lastUsedFrameIdx=t,this._storage.set(o.id,re),d.bindVertexArrayOES.set(q),re.buf}update(t){for(const[o,d]of this._storage)t-d.lastUsedFrameIdx>30&&(d.buf.destroy(),this._storage.delete(o))}destroy(){for(const[t,o]of this._storage)o.buf.destroy(),this._storage.delete(t)}}class Lf{constructor(t){this.occluderSize=30,this.depthOffset=-1e-4,t.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),t.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const ad=n.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class yc{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class _u{constructor(t,o){this.revealStart=11,this.revealRange=2,t.registerParameter(this,[...o,"Reveal"],"revealStart",{min:0,max:17,step:.05}),t.registerParameter(this,[...o,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Df=n.da([{type:"Float32",name:"a_pos_2f",components:2}]);class Gh{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(t,o){const d=t.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const A=new n.dr,k=new n.aU;A.emplaceBack(-1,-1),A.emplaceBack(1,-1),A.emplaceBack(1,1),A.emplaceBack(-1,1),k.emplaceBack(0,1,2),k.emplaceBack(0,2,3),this.vignetteVx=t.context.createVertexBuffer(A,Df.members),this.vignetteIdx=t.context.createIndexBuffer(k)}const v=n.b7.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){t.uploadCommonUniforms(t.context,d);const A={u_vignetteShape:(b={vignetteShape:[o.start,o.range,Math.pow(10,o.fadePower)],vignetteColor:[o.color.r,o.color.g,o.color.b,o.color.a*o.strength]}).vignetteShape,u_vignetteColor:b.vignetteColor};d.draw(t,t.context.gl.TRIANGLES,Ui.disabled,Io.disabled,go.alphaBlended,Mo.disabled,A,"vignette",this.vignetteVx,this.vignetteIdx,v,{})}var b}}class sf{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(t,o){const d=t.getFreeCameraOptions().position,v=d.toAltitude(),b=d.toLngLat(),A=n.ai(b.lng),k=n.ai(b.lat),Z=t.pixelsPerMeter/o,q=A*n.ds,re=n.ds*Math.log(Math.tan(Math.PI/4+k/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const fe=-this._offsetYPrev+re,pe=-this._elevationPrev+v;this._accumulatedOffsetX+=(-this._offsetXPrev+q)*Z,this._accumulatedOffsetY+=fe*Z,this._accumulatedElevation+=pe*Z,this._offsetXPrev=q,this._offsetYPrev=re,this._elevationPrev=v}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Xc(u,t){return[-(u[0]-Math.floor(u[0]/t)*t),-(u[1]-Math.floor(u[1]/t)*t),-(u[2]-Math.floor(u[2]/t)*t)]}function lf(u){const t=n.di(1323123451230),o=[];for(let d=0;d<u;++d){const v=2*t()-1,b=2*t()-1,A=2*t()-1;o.push(n.ab.vec3.fromValues(v,b,A))}return o}function sd(u,t,o,d,v){const b=n.aw((v-o)/(d-o),0,1);return(1-b)*u+b*t}class uf{constructor(t){this._movement=new sf,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Gh,this._ppmScaleFactor=t}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(t,o){const d=t.transform;this._movement.update(d,this._ppmScaleFactor);const v=d.starsProjMatrix,b=n.ab.quat.identity([]);n.ab.quat.rotateX(b,b,n.ai(90)-d._pitch),n.ab.quat.rotateZ(b,b,-d.angle);const A=n.ab.mat4.fromQuat(new Float32Array(16),b),k=n.ab.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),Z=n.ab.mat4.transpose([],k),q=n.ab.mat4.multiply([],Z,A),re=Date.now()/1e3;return this._accumulatedTimeFromStart+=(re-this._prevTime)*o,this._prevTime=re,{projectionMatrix:v,modelviewMatrix:q}}}class $d extends uf{constructor(t){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new _u(t.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(t){const o=t.context;if(!this.particlesVx){const d=lf(this.particlesCount),v=new n.dt,b=new n.aU;let A=0;const k=n.di(1323123451230);for(let Z=0;Z<d.length;++Z){const q=d[Z],re=[2*k()-1,k(),k(),k()];v.emplaceBack(q[0],q[1],q[2],-1,-1,...re),v.emplaceBack(q[0],q[1],q[2],1,-1,...re),v.emplaceBack(q[0],q[1],q[2],1,1,...re),v.emplaceBack(q[0],q[1],q[2],-1,1,...re),b.emplaceBack(A+0,A+1,A+2),b.emplaceBack(A+0,A+2,A+3),A+=4}this.particlesVx=o.createVertexBuffer(v,ad.members),this.particlesIdx=o.createIndexBuffer(b)}}draw(t){if(!this._params.overrideStyleParameters&&!t.style.rain)return;const o=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},d=t.transform.zoom;if(o.revealStart>d)return;const v=sd(0,1,o.revealStart,o.revealStart+o.revealRange,d);if(!this.particlesVx||!this.particlesIdx)return;const b=structuredClone(this._params);let A=[-b.direction.x,b.direction.y,-100];n.ab.vec3.normalize(A,A);const k=structuredClone(this._vignetteParams);k.strength*=v,b.overrideStyleParameters||(b.intensity=t.style.rain.state.density,b.timeFactor=t.style.rain.state.intensity,b.color=structuredClone(t.style.rain.state.color),A=structuredClone(t.style.rain.state.direction),b.screenThinning.intensity=t.style.rain.state.centerThinning,b.dropletSizeX=t.style.rain.state.dropletSize[0],b.dropletSizeYScale=t.style.rain.state.dropletSize[1]/t.style.rain.state.dropletSize[0],b.distortionStrength=100*t.style.rain.state.distortionStrength,k.strength=1,k.color=structuredClone(t.style.rain.state.vignetteColor));const Z=this.updateOnRender(t,b.timeFactor),q=t.context,re=q.gl,fe=t.transform;this.screenTexture&&this.screenTexture.size[0]===t.width&&this.screenTexture.size[1]===t.height||(this.screenTexture=new n.T(q,{width:t.width,height:t.height,data:null},re.RGBA8)),b.distortionStrength>0&&(q.activeTexture.set(re.TEXTURE0),this.screenTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),re.copyTexSubImage2D(re.TEXTURE_2D,0,0,0,0,0,t.width,t.height));const pe=t.getOrCreateProgram("rainParticle");t.uploadCommonUniforms(q,pe),q.activeTexture.set(re.TEXTURE0),this.screenTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const Te=[b.color.r,b.color.g,b.color.b,b.color.a],et=(We,rt)=>{const it=Xc(this._movement.getPosition(),We),kt=b.dropletSizeX,qt=b.dropletSizeX*b.dropletSizeYScale,Qt=t.width/2,vn=t.height/2,on=sd(0,b.screenThinning.start,0,1,b.screenThinning.intensity),dn=sd(.001,b.screenThinning.range,0,1,b.screenThinning.intensity),nn=sd(0,b.screenThinning.particleOffset,0,1,b.screenThinning.intensity),Rn=($n={modelview:Z.modelviewMatrix,projection:Z.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:it,velocityConeAperture:b.velocityConeAperture,velocity:b.velocity,boxSize:We,rainDropletSize:[kt,qt],distortionStrength:b.distortionStrength,rainDirection:A,color:Te,screenSize:[fe.width,fe.height],thinningCenterPos:[Qt,vn],thinningShape:[on,dn,Math.pow(10,b.screenThinning.fadePower)],thinningAffectedRatio:b.screenThinning.affectedRatio,thinningParticleOffset:nn,shapeDirectionalPower:b.shapeDirPower,shapeNormalPower:b.shapeNormalPower,mode:rt?0:1},{u_modelview:Float32Array.from($n.modelview),u_projection:Float32Array.from($n.projection),u_time:$n.time,u_cam_pos:$n.camPos,u_texScreen:0,u_velocityConeAperture:$n.velocityConeAperture,u_velocity:$n.velocity,u_boxSize:$n.boxSize,u_rainDropletSize:$n.rainDropletSize,u_distortionStrength:$n.distortionStrength,u_rainDirection:$n.rainDirection,u_color:$n.color,u_screenSize:$n.screenSize,u_thinningCenterPos:$n.thinningCenterPos,u_thinningShape:$n.thinningShape,u_thinningAffectedRatio:$n.thinningAffectedRatio,u_thinningParticleOffset:$n.thinningParticleOffset,u_shapeDirectionalPower:$n.shapeDirectionalPower,u_shapeNormalPower:$n.shapeNormalPower,u_mode:$n.mode});var $n;const Pr=Math.round(b.intensity*this.particlesCount),dr=n.b7.simpleSegment(0,0,4*Pr,2*Pr);pe.draw(t,re.TRIANGLES,Ui.disabled,Io.disabled,go.alphaBlended,Mo.disabled,Rn,"rain_particles",this.particlesVx,this.particlesIdx,dr,{})};b.distortionStrength>0&&et(b.boxSize,!0),et(b.boxSize,!1),this._vignette.draw(t,k)}}const cf=n.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class df extends uf{constructor(t){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new _u(t.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(t){const o=t.context;if(!this.particlesVx){const d=lf(this.particlesCount),v=new n.du,b=new n.aU;let A=0;const k=n.di(1323123451230);for(let Z=0;Z<d.length;++Z){const q=d[Z],re=k(),fe=k(),pe=k(),Te=[Z/d.length,re,fe,pe],et=[k(),k()];v.emplaceBack(q[0],q[1],q[2],-1,-1,...Te,...et),v.emplaceBack(q[0],q[1],q[2],1,-1,...Te,...et),v.emplaceBack(q[0],q[1],q[2],1,1,...Te,...et),v.emplaceBack(q[0],q[1],q[2],-1,1,...Te,...et),b.emplaceBack(A+0,A+1,A+2),b.emplaceBack(A+0,A+2,A+3),A+=4}this.particlesVx=o.createVertexBuffer(v,cf.members),this.particlesIdx=o.createIndexBuffer(b)}}draw(t){if(!this._params.overrideStyleParameters&&!t.style.snow)return;const o=structuredClone(this._params);let d=[-o.direction.x,o.direction.y,-100];n.ab.vec3.normalize(d,d);const v=structuredClone(this._vignetteParams),b=o.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=t.transform.zoom;if(b.revealStart>A)return;const k=sd(0,1,b.revealStart,b.revealStart+b.revealRange,A);v.strength*=k,o.overrideStyleParameters||(o.intensity=t.style.snow.state.density,o.timeFactor=t.style.snow.state.intensity,o.color=structuredClone(t.style.snow.state.color),d=structuredClone(t.style.snow.state.direction),o.screenThinning.intensity=t.style.snow.state.centerThinning,o.billboardSize=2.79*t.style.snow.state.flakeSize,v.strength=1,v.color=structuredClone(t.style.snow.state.vignetteColor));const Z=this.updateOnRender(t,o.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const q=t.context,re=q.gl,fe=t.transform,pe=t.getOrCreateProgram("snowParticle");t.uploadCommonUniforms(q,pe),((Te,et,We)=>{const rt=Xc(this._movement.getPosition(),Te),it=fe.width/2,kt=fe.height/2,qt=sd(0,We.screenThinning.start,0,1,We.screenThinning.intensity),Qt=sd(.001,We.screenThinning.range,0,1,We.screenThinning.intensity),vn=sd(0,We.screenThinning.particleOffset,0,1,We.screenThinning.intensity),on=(dn={modelview:Z.modelviewMatrix,projection:Z.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:rt,velocityConeAperture:We.velocityConeAperture,velocity:We.velocity,horizontalOscillationRadius:We.horizontalOscillationRadius,horizontalOscillationRate:We.horizontalOscillationRate,boxSize:Te,billboardSize:1*We.billboardSize,simpleShapeParameters:[We.shapeFadeStart,We.shapeFadePower],screenSize:[fe.width,fe.height],thinningCenterPos:[it,kt],thinningShape:[qt,Qt,Math.pow(10,We.screenThinning.fadePower)],thinningAffectedRatio:We.screenThinning.affectedRatio,thinningParticleOffset:vn,color:[We.color.r,We.color.g,We.color.b,We.color.a],direction:d},{u_modelview:Float32Array.from(dn.modelview),u_projection:Float32Array.from(dn.projection),u_time:dn.time,u_cam_pos:dn.camPos,u_velocityConeAperture:dn.velocityConeAperture,u_velocity:dn.velocity,u_horizontalOscillationRadius:dn.horizontalOscillationRadius,u_horizontalOscillationRate:dn.horizontalOscillationRate,u_boxSize:dn.boxSize,u_billboardSize:dn.billboardSize,u_simpleShapeParameters:dn.simpleShapeParameters,u_screenSize:dn.screenSize,u_thinningCenterPos:dn.thinningCenterPos,u_thinningShape:dn.thinningShape,u_thinningAffectedRatio:dn.thinningAffectedRatio,u_thinningParticleOffset:dn.thinningParticleOffset,u_particleColor:dn.color,u_direction:dn.direction});var dn;const nn=Math.round(We.intensity*this.particlesCount),Rn=n.b7.simpleSegment(0,0,4*nn,2*nn);this.particlesVx&&this.particlesIdx&&pe.draw(t,re.TRIANGLES,Ui.disabled,Io.disabled,go.alphaBlended,Mo.disabled,on,"snow_particles",this.particlesVx,this.particlesIdx,Rn,{})})(o.boxSize,0,o),this._vignette.draw(t,v)}}const Ld={symbol:function(u,t,o,d,v){if(u.renderPass!=="translucent")return;const b=Io.disabled,A=u.colorModeForRenderPass(),k=o.layout.get("text-variable-anchor"),Z=o.layout.get("text-size-scale-range"),q=n.aw(u.scaleFactor,Z[0],Z[1]);k&&function(pe,Te,et,We,rt,it,kt,qt){const Qt=Te.transform,vn=rt==="map",on=it==="map";for(const dn of pe){const nn=We.getTile(dn),Rn=nn.getBucket(et);if(!Rn||!Rn.text||!Rn.text.segments.get().length)continue;const $n=n.bp(Rn.textSizeData,Qt.zoom,qt),Pr=xu(dn,Rn.getProjection(),Qt),dr=Qt.calculatePixelsToTileUnitsMatrix(nn),Or=oo(Pr,nn.tileID.canonical,on,vn,Qt,Rn.getProjection(),dr),kr=Rn.hasIconTextFit()&&Rn.hasIconData();if($n){const Yn=Math.pow(2,Qt.zoom-nn.tileID.overscaledZ);jd(Rn,vn,on,kt,n.cX,Qt,Or,dn,Yn,$n,kr)}}}(d,u,o,t,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),v,q);const re=o.paint.get("icon-opacity").constantOr(1)!==0,fe=o.paint.get("text-opacity").constantOr(1)!==0;o.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(re||fe)?qo(u,t,o,d,b,A):(re&&qo(u,t,o,d,b,A,{onlyIcons:!0}),fe&&qo(u,t,o,d,b,A,{onlyText:!0})),t.map.showCollisionBoxes&&(jc(u,t,o,d,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),jc(u,t,o,d,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(u,t,o,d){if(u.renderPass!=="translucent")return;const v=o.paint.get("circle-opacity"),b=o.paint.get("circle-stroke-width"),A=o.paint.get("circle-stroke-opacity"),k=o.layout.get("circle-sort-key").constantOr(1)!==void 0,Z=o.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(b.constantOr(1)===0||A.constantOr(1)===0))return;const q=u.context,re=q.gl,fe=u.transform,pe=u.depthModeForSublayer(0,Ui.ReadOnly),Te=Io.disabled,et=u.colorModeForDrapableLayerRenderPass(Z),We=fe.projection.name==="globe",rt=[n.at(fe.center.lng),n.aA(fe.center.lat)],it=[];for(let qt=0;qt<d.length;qt++){const Qt=d[qt],vn=t.getTile(Qt),on=vn.getBucket(o);if(!on||on.projection.name!==fe.projection.name)continue;const dn=on.programConfigurations.get(o.id),nn=n.cY(o),Rn=u.isTileAffectedByFog(Qt);We&&nn.push("PROJECTION_GLOBE_VIEW"),nn.push("DEPTH_D24"),u.terrain&&fe.depthOcclusionForSymbolsAndCircles&&nn.push("DEPTH_OCCLUSION");const $n=u.getOrCreateProgram("circle",{config:dn,defines:nn,overrideFog:Rn}),Pr=on.layoutVertexBuffer,dr=on.globeExtVertexBuffer,Or=on.indexBuffer,kr=fe.projection.createInversionMatrix(fe,Qt.canonical),Yn={programConfiguration:dn,program:$n,layoutVertexBuffer:Pr,globeExtVertexBuffer:dr,indexBuffer:Or,uniformValues:n.cZ(u,Qt,vn,kr,rt,o),tile:vn};if(k){const Mr=on.segments.get();for(const ti of Mr)it.push({segments:new n.b7([ti]),sortKey:ti.sortKey,state:Yn})}else it.push({segments:on.segments,sortKey:0,state:Yn})}k&&it.sort((qt,Qt)=>qt.sortKey-Qt.sortKey);const kt={useDepthForOcclusion:fe.depthOcclusionForSymbolsAndCircles};for(const qt of it){const{programConfiguration:Qt,program:vn,layoutVertexBuffer:on,globeExtVertexBuffer:dn,indexBuffer:nn,uniformValues:Rn,tile:$n}=qt.state,Pr=qt.segments;u.terrain&&u.terrain.setupElevationDraw($n,vn,kt),u.uploadCommonUniforms(q,vn,$n.tileID.toUnwrapped()),vn.draw(u,re.TRIANGLES,pe,Te,et,Mo.disabled,Rn,o.id,on,nn,Pr,o.paint,fe.zoom,Qt,[dn])}},heatmap:function(u,t,o,d){if(o.paint.get("heatmap-opacity")!==0)if(u.renderPass==="offscreen"){const v=u.context,b=v.gl,A=Io.disabled,k=new go([b.ONE,b.ONE,b.ONE,b.ONE],n.aj.transparent,[!0,!0,!0,!0]);(function(Te,et,We,rt){const it=Te.gl,kt=et.width*rt,qt=et.height*rt;Te.activeTexture.set(it.TEXTURE1),Te.viewport.set([0,0,kt,qt]);let Qt=We.heatmapFbo;if(!Qt||Qt&&(Qt.width!==kt||Qt.height!==qt)){Qt&&Qt.destroy();const vn=it.createTexture();it.bindTexture(it.TEXTURE_2D,vn),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_S,it.CLAMP_TO_EDGE),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_T,it.CLAMP_TO_EDGE),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MIN_FILTER,it.LINEAR),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MAG_FILTER,it.LINEAR),Qt=We.heatmapFbo=Te.createFramebuffer(kt,qt,!0,null),function(on,dn,nn,Rn,$n,Pr){const dr=on.gl;dr.texImage2D(dr.TEXTURE_2D,0,on.extRenderToTextureHalfFloat?dr.RGBA16F:dr.RGBA,$n,Pr,0,dr.RGBA,on.extRenderToTextureHalfFloat?dr.HALF_FLOAT:dr.UNSIGNED_BYTE,null),Rn.colorAttachment.set(nn)}(Te,0,vn,Qt,kt,qt)}else it.bindTexture(it.TEXTURE_2D,Qt.colorAttachment.get()),Te.bindFramebuffer.set(Qt.framebuffer)})(v,u,o,u.transform.projection.name==="globe"?.5:.25),v.clear({color:n.aj.transparent});const Z=u.transform,q=Z.projection.name==="globe",re=q?["PROJECTION_GLOBE_VIEW"]:[],fe=q?Mo.frontCCW:Mo.disabled,pe=[n.at(Z.center.lng),n.aA(Z.center.lat)];for(let Te=0;Te<d.length;Te++){const et=d[Te];if(t.hasRenderableParent(et))continue;const We=t.getTile(et),rt=We.getBucket(o);if(!rt||rt.projection.name!==Z.projection.name)continue;const it=u.isTileAffectedByFog(et),kt=rt.programConfigurations.get(o.id),qt=u.getOrCreateProgram("heatmap",{config:kt,defines:re,overrideFog:it}),{zoom:Qt}=u.transform;u.terrain&&u.terrain.setupElevationDraw(We,qt),u.uploadCommonUniforms(v,qt,et.toUnwrapped());const vn=Z.projection.createInversionMatrix(Z,et.canonical);qt.draw(u,b.TRIANGLES,Ui.disabled,A,k,fe,Fi(u,et,We,vn,pe,Qt,o.paint.get("heatmap-intensity")),o.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,o.paint,u.transform.zoom,kt,q?[rt.globeExtVertexBuffer]:null)}v.viewport.set([0,0,u.width,u.height])}else u.renderPass==="translucent"&&(u.context.setColorMode(u.colorModeForRenderPass()),function(v,b){const A=v.context,k=A.gl,Z=b.heatmapFbo;if(!Z)return;A.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,Z.colorAttachment.get()),A.activeTexture.set(k.TEXTURE1);let q=b.colorRampTexture;q||(q=b.colorRampTexture=new n.T(A,b.colorRamp,k.RGBA8)),q.bind(k.LINEAR,k.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,k.TRIANGLES,Ui.disabled,Io.disabled,v.colorModeForRenderPass(),Mo.disabled,((re,fe,pe,Te)=>({u_image:0,u_color_ramp:1,u_opacity:fe.paint.get("heatmap-opacity")}))(0,b),b.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,b.paint,v.transform.zoom)}(u,o))},line:function(u,t,o,d){if(u.renderPass!=="translucent")return;const v=o.paint.get("line-opacity"),b=o.paint.get("line-width");if(v.constantOr(1)===0||b.constantOr(1)===0)return;const A=o.paint.get("line-emissive-strength"),k=o.paint.get("line-occlusion-opacity"),Z=o.layout.get("line-elevation-reference"),q=o.layout.get("line-width-unit")==="meters",re=Z==="sea",fe=u.context,pe=fe.gl;if(o.hasElevatedBuckets&&u.transform.projection.name==="globe")return;const Te=o.layout.get("line-cross-slope"),et=Te!==void 0,We=Te<1,rt=u.colorModeForDrapableLayerRenderPass(A),it=u.terrain&&u.terrain.renderingToTexture,kt=it?1:n.q.devicePixelRatio,qt=o.paint.get("line-dasharray"),Qt=qt.constantOr(1),vn=o.layout.get("line-cap"),on=qt.constantOr(null),dn=vn.constantOr(null),nn=o.paint.get("line-pattern"),Rn=nn.constantOr(1),$n=nn.constantOr(null),Pr=o.paint.get("line-opacity").constantOr(1);let dr=!Rn&&Pr!==1||u.depthOcclusion&&k>0&&k<1;const Or=o.paint.get("line-gradient"),kr=Rn?"linePattern":"line",Yn=n.c_(o);let Mr;if(it&&u.terrain&&u.terrain.clipOrMaskOverlapStencilType()&&(dr=!1),k!==0&&u.depthOcclusion){const ir=o.paint._values["line-opacity"];ir&&ir.value&&ir.value.kind==="constant"?Mr=ir.value:n.w(`Occlusion opacity for layer ${o.id} is supported only when line-opacity isn't data-driven.`)}b.value.kind!=="constant"&&b.value.isLineProgressConstant===!1&&Yn.push("VARIABLE_LINE_WIDTH");const ti=(ir,Fr,Cr,xi,ri)=>{for(const Kr of ir){const mi=t.getTile(Kr);if(Rn&&!mi.patternsLoaded())continue;const gi=mi.getBucket(o);if(!gi||gi.hasZOffset&&!ri||!gi.hasZOffset&&ri)continue;u.prepareDrawTile();const Gi=gi.programConfigurations.get(o.id),Li=u.isTileAffectedByFog(Kr),bo=u.getOrCreateProgram(kr,{config:Gi,defines:Fr,overrideFog:Li,overrideRtt:!ri&&void 0});if($n&&mi.imageAtlas){const ia=n.A.from($n).getPrimary().scaleSelf(kt).serialize(),Pa=mi.imageAtlas.patternPositions[ia];Pa&&Gi.setConstantPatternPositions(Pa)}if(!Rn&&on&&dn&&mi.lineAtlas){const ia=mi.lineAtlas.getDash(on,dn);ia&&Gi.setConstantPatternPositions(ia)}let[wo,Ao]=o.paint.get("line-trim-offset");(dn==="round"||dn==="square")&&wo!==Ao&&(wo===0&&(wo-=1),Ao===1&&(Ao+=1));const zo=it?Kr.projMatrix:null,Ga=q?1/gi.tileToMeter/n.ar(mi,1,u.transform.zoom):1,ba=q?1/gi.tileToMeter/n.ar(mi,1,Math.floor(u.transform.zoom)):1,wl=Rn?n.c$(u,mi,o,zo,kt,Ga,ba,[wo,Ao]):n.d0(u,mi,o,zo,gi.lineClipsArray.length,kt,Ga,ba,[wo,Ao]);if(Or){const ia=gi.gradients[o.id];let Pa=ia.texture;if(o.gradientVersion!==ia.version){let uo=256;if(o.stepInterpolant){const na=t.getSource().maxzoom,Ya=Kr.canonical.z===na?Math.ceil(1<<u.transform.maxZoom-Kr.canonical.z):1;uo=n.aw(n.d1(gi.maxLineLength/n.ag*1024*Ya),256,fe.maxTextureSize)}ia.gradient=n.d2({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:uo,image:ia.gradient||void 0,clips:gi.lineClipsArray}),ia.texture?ia.texture.update(ia.gradient):ia.texture=new n.T(fe,ia.gradient,pe.RGBA8),ia.version=o.gradientVersion,Pa=ia.texture}fe.activeTexture.set(pe.TEXTURE1),Pa.bind(o.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}Qt&&(fe.activeTexture.set(pe.TEXTURE0),mi.lineAtlasTexture&&mi.lineAtlasTexture.bind(pe.LINEAR,pe.REPEAT),Gi.updatePaintBuffers()),Rn&&(fe.activeTexture.set(pe.TEXTURE0),mi.imageAtlasTexture&&mi.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Gi.updatePaintBuffers()),ri&&!re&&u.terrain.setupElevationDraw(mi,bo),u.uploadCommonUniforms(fe,bo,Kr.toUnwrapped());const os=ia=>{Mr!=null&&(Mr.value=Pr*k),bo.draw(u,pe.TRIANGLES,Cr,ia,rt,Mo.disabled,wl,o.id,gi.layoutVertexBuffer,gi.indexBuffer,gi.segments,o.paint,u.transform.zoom,Gi,[gi.layoutVertexBuffer2,gi.patternVertexBuffer,gi.zOffsetVertexBuffer]),Mr!=null&&(Mr.value=Pr)};if(dr&&!ri){const ia=u.stencilModeForClipping(Kr).ref;ia===0&&it&&fe.clear({stencil:0});const Pa={func:pe.EQUAL,mask:255};wl.u_alpha_discard_threshold=.8,os(new Io(Pa,ia,255,pe.KEEP,pe.KEEP,pe.INVERT)),wl.u_alpha_discard_threshold=0,os(new Io(Pa,ia,255,pe.KEEP,pe.KEEP,pe.KEEP))}else dr&&ri&&(wl.u_alpha_discard_threshold=.001),os(ri?xi:u.stencilModeForClipping(Kr))}};if(o.hasNonElevatedBuckets){const ir=!it&&u.terrain;k!==0&&ir?n.w(`Occlusion opacity for layer ${o.id} is supported on terrain only if the layer has line-z-offset enabled.`):ir?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${o.id}.`):ti(d,Yn,u.depthModeForSublayer(0,Ui.ReadOnly),Io.disabled,!1)}if(o.hasElevatedBuckets){Yn.push("ELEVATED"),et&&Yn.push(We?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),re&&Yn.push("ELEVATION_REFERENCE_SEA");const ir=dr?u.stencilModeFor3D():Io.disabled,Fr=new Ui(u.depthOcclusion?pe.GREATER:pe.LEQUAL,Ui.ReadOnly,u.depthRangeFor3D);u.forceTerrainMode=!0,ti(d,Yn,Fr,ir,!0),u.forceTerrainMode=!1}dr&&(u.resetStencilClippingMasks(),it&&fe.clear({stencil:0})),k===0||u.depthOcclusion||it||u.layersWithOcclusionOpacity.push(u.currentLayer)},fill:function(u,t,o,d){const v=o.paint.get("fill-color"),b=o.paint.get("fill-opacity"),A=o.is3D(),k=new Ui(u.context.gl.LEQUAL,Ui.ReadWrite,u.depthRangeFor3D);if(b.constantOr(1)===0)return;const Z=o.paint.get("fill-emissive-strength"),q=u.colorModeForDrapableLayerRenderPass(Z),re=o.paint.get("fill-pattern"),fe=u.opaquePassEnabledForLayer()&&!re.constantOr(1)&&v.constantOr(n.aj.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(u.renderPass===fe){const pe=A?k:u.depthModeForSublayer(1,u.renderPass==="opaque"?Ui.ReadWrite:Ui.ReadOnly);_l(u,t,o,d,pe,q,!1)}if(!A&&u.renderPass==="translucent"&&o.paint.get("fill-antialias")){const pe=A?k:u.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Ui.ReadOnly);_l(u,t,o,d,pe,q,!0)}},"fill-extrusion":function(u,t,o,d){const v=o.paint.get("fill-extrusion-opacity"),b=u.context,A=b.gl,k=u.terrain,Z=k&&k.renderingToTexture;if(v===0)return;const q=u.conflationActive&&u.style.isLayerClipped(o,t.getSource()),re=u.style.order.indexOf(o.fqid);if(q&&function(fe,pe,Te,et,We){for(const rt of et){const it=pe.getTile(rt).getBucket(Te);it&&(it.updateReplacement(rt,fe.replacementSource,We),it.uploadCentroid(fe.context))}}(u,t,o,d,re),k||q)for(const fe of d){const pe=t.getTile(fe).getBucket(o);pe&&Kc(u.context,t,fe,pe,o,k,q)}if(u.renderPass==="shadow"&&u.shadowRenderer){const fe=u.shadowRenderer;if(k&&v<.65&&o._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.a9)return;const pe=fe.getShadowPassDepthMode(),Te=fe.getShadowPassColorMode();Zl(u,t,o,d,pe,Io.disabled,Te,q)}else if(u.renderPass==="translucent"){const fe=!o.paint.get("fill-extrusion-pattern").constantOr(1),pe=o.paint.get("fill-extrusion-color").constantOr(n.aj.white);if(!Z&&pe.a!==0){const Te=new Ui(u.context.gl.LEQUAL,Ui.ReadWrite,u.depthRangeFor3D);v===1&&fe?Zl(u,t,o,d,Te,Io.disabled,go.unblended,q):(Zl(u,t,o,d,Te,Io.disabled,go.disabled,q),Zl(u,t,o,d,Te,u.stencilModeFor3D(),u.colorModeForRenderPass(),q),u.resetStencilClippingMasks())}if(u.style.enable3dLights()&&fe&&(!k&&u.transform.projection.name!=="globe"||Z)){const Te=o.paint.get("fill-extrusion-opacity"),et=o.paint.get("fill-extrusion-ambient-occlusion-intensity"),We=o.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),rt=o.paint.get("fill-extrusion-flood-light-intensity"),it=o.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",kt=o.paint.get("fill-extrusion-flood-light-color").toRenderColor(it?null:o.lut).toArray01().slice(0,3),qt=et>0&&We>0,Qt=rt>0,vn=(dn,nn,Rn)=>(1-Rn)*dn+Rn*nn,on=dn=>{const nn=u.depthModeForSublayer(1,Ui.ReadOnly,A.LEQUAL,!0),Rn=o.paint.get(dn?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),$n=vn(.1,3,Rn),Pr=u._showOverdrawInspector;if(!Pr){const dr=new Io({func:A.ALWAYS,mask:255},255,255,A.KEEP,A.KEEP,A.REPLACE),Or=new go([A.ONE,A.ONE,A.ONE,A.ONE],n.aj.transparent,[!1,!1,!1,!0],A.MIN);ul(u,t,o,d,nn,dr,Or,Mo.disabled,dn,"sdf",Te,et,We,rt,kt,$n,q,!1)}{const dr=Pr?Io.disabled:new Io({func:A.EQUAL,mask:255},255,255,A.KEEP,A.DECR,A.DECR),Or=Pr?u.colorModeForRenderPass():new go([A.ONE_MINUS_DST_ALPHA,A.DST_ALPHA,A.ONE,A.ONE],n.aj.transparent,[!0,!0,!0,!0]);ul(u,t,o,d,nn,dr,Or,Mo.disabled,dn,"color",Te,et,We,rt,kt,$n,q,!1)}};if(Z){const dn=(nn,Rn,$n)=>{const Pr=u.depthModeForSublayer(1,Ui.ReadOnly,A.LEQUAL,!1),dr=o.paint.get(nn?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Or=vn(.1,3,dr);{const kr=new go([A.ONE,A.ONE,A.ONE,A.ONE],n.aj.transparent,[!1,!1,!1,!0]);ul(u,t,o,d,Pr,Io.disabled,kr,Mo.disabled,nn,"clear",Te,et,We,rt,kt,Or,q,Rn)}{const kr=new Io({func:A.ALWAYS,mask:255},255,255,A.KEEP,A.KEEP,A.REPLACE),Yn=new go([A.ONE,A.ONE,A.ONE,A.ONE],n.aj.transparent,[!1,!1,!1,!0],A.MIN);ul(u,t,o,d,Pr,kr,Yn,Mo.disabled,nn,"sdf",Te,et,We,rt,kt,Or,q,Rn)}{const kr=nn?A.ZERO:A.ONE_MINUS_DST_ALPHA,Yn=new Io({func:A.EQUAL,mask:255},255,255,A.KEEP,A.DECR,A.DECR),Mr=new go([kr,A.DST_ALPHA,A.ONE_MINUS_DST_ALPHA,A.ZERO],n.aj.transparent,[!0,!0,!0,!0]);ul(u,t,o,d,Pr,Yn,Mr,Mo.disabled,nn,"color",Te,et,We,rt,kt,Or,q,Rn)}{const kr=new go([A.ONE,A.ONE,A.ONE,nn?A.ZERO:A.ONE],n.aj.transparent,[!1,!1,!1,!0],nn?A.FUNC_ADD:A.MAX);ul(u,t,o,d,Pr,Io.disabled,kr,Mo.disabled,nn,"clear",Te,et,We,rt,kt,Or,q,Rn,$n)}};if(qt||Qt){let nn;if(u.prepareDrawTile(),k){const Rn=k.drapeBufferSize[0],$n=k.drapeBufferSize[1];nn=k.framebufferCopyTexture,nn&&(!nn||nn.size[0]===Rn&&nn.size[1]===$n)||(nn&&nn.destroy(),nn=k.framebufferCopyTexture=new n.T(b,new n.r({width:Rn,height:$n}),A.RGBA8)),nn.bind(A.LINEAR,A.CLAMP_TO_EDGE),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,0,0,Rn,$n)}qt&&dn(!0,!1,nn),Qt&&dn(!1,!0,nn)}}else qt&&on(!0),Qt&&on(!1),(qt||Qt)&&u.resetStencilClippingMasks()}}},hillshade:function(u,t,o,d){if(u.renderPass!=="offscreen"&&u.renderPass!=="translucent"||u.style.disableElevatedTerrain)return;const v=u.context,b=u.terrain&&u.terrain.renderingToTexture,[A,k]=u.renderPass!=="translucent"||b?[{},d]:u.stencilConfigForOverlap(d);for(const Z of k){const q=t.getTile(Z);if(q.needsHillshadePrepare&&u.renderPass==="offscreen")Rs(u,q,o);else if(u.renderPass==="translucent"){const re=u.depthModeForSublayer(0,Ui.ReadOnly),fe=o.paint.get("hillshade-emissive-strength"),pe=u.colorModeForDrapableLayerRenderPass(fe),Te=b&&u.terrain?u.terrain.stencilModeForRTTOverlap(Z):A[Z.overscaledZ];as(u,Z,q,o,re,Te,pe)}}v.viewport.set([0,0,u.width,u.height]),u.resetStencilClippingMasks()},raster:function(u,t,o,d,v,b){if(u.renderPass!=="translucent"||o.paint.get("raster-opacity")===0)return;const A=u.transform.projection.name==="globe",k=o.paint.get("raster-elevation")!==0,Z=k&&A;if(u.renderElevatedRasterBackface&&!Z)return;const q=u.context,re=q.gl,fe=t.getSource(),pe=function(on,dn,nn,Rn){const $n=dn.paint.get("raster-color"),Pr=on.type==="raster-array",dr=[],Or=dn.paint.get("raster-resampling"),kr=dn.paint.get("raster-color-mix");let Yn=dn.paint.get("raster-color-range");const Mr=[kr[0],kr[1],kr[2],0],ti=kr[3];let ir=Or==="nearest"?Rn.NEAREST:Rn.LINEAR;if(Pr&&(dr.push("RASTER_ARRAY"),$n||dr.push("RASTER_COLOR"),Or==="linear"&&dr.push("RASTER_ARRAY_LINEAR"),ir=Rn.NEAREST,!Yn&&on.rasterLayers)){const Fr=on.rasterLayers.find(({id:Cr})=>Cr===dn.sourceLayer);Fr&&Fr.fields&&Fr.fields.range&&(Yn=Fr.fields.range)}if(Yn=Yn||[0,1],$n){dr.push("RASTER_COLOR"),nn.activeTexture.set(Rn.TEXTURE2),dn.updateColorRamp(Yn);let Fr=dn.colorRampTexture;Fr||(Fr=dn.colorRampTexture=new n.T(nn,dn.colorRamp,Rn.RGBA8)),Fr.bind(Rn.LINEAR,Rn.CLAMP_TO_EDGE)}return{mix:Mr,range:Yn,offset:ti,defines:dr,resampling:ir}}(fe,o,q,re);if(fe instanceof n.aJ&&!d.length&&!A)return;const Te=o.paint.get("raster-emissive-strength"),et=u.colorModeForDrapableLayerRenderPass(Te),We=u.terrain&&u.terrain.renderingToTexture,rt=!u.options.moving,it=o.paint.get("raster-resampling")==="nearest"?re.NEAREST:re.LINEAR;if(fe instanceof n.aJ&&!d.length&&(fe.onNorthPole||fe.onSouthPole)){const on=k?u.stencilModeFor3D():Io.disabled;return void gr(!!fe.onNorthPole,null,u,t,o,Te,pe,Mo.disabled,on)}if(!d.length)return;const[kt,qt]=fe instanceof n.aJ||We?[{},d]:u.stencilConfigForOverlap(d),Qt=qt[qt.length-1].overscaledZ;Z&&pe.defines.push("PROJECTION_GLOBE_VIEW"),k&&pe.defines.push("RENDER_CUTOFF");const vn=(on,dn,nn)=>{for(const Rn of on){const $n=Rn.toUnwrapped(),Pr=t.getTile(Rn);if(We&&(!Pr||!Pr.hasData()))continue;q.activeTexture.set(re.TEXTURE0);const dr=yd(Pr,fe,o,pe);if(!dr||!dr.texture)continue;const{texture:Or,mix:kr,offset:Yn,tileSize:Mr,buffer:ti}=dr;let ir,Fr;We?(ir=Ui.disabled,Fr=Rn.projMatrix):k?(ir=new Ui(re.LEQUAL,Ui.ReadWrite,u.depthRangeFor3D),Fr=A?Float32Array.from(u.transform.expandedFarZProjMatrix):u.transform.calculateProjMatrix($n,rt)):(ir=u.depthModeForSublayer(Rn.overscaledZ-Qt,o.paint.get("raster-opacity")===1?Ui.ReadWrite:Ui.ReadOnly,re.LESS),Fr=u.transform.calculateProjMatrix($n,rt));const Cr=u.terrain&&We?u.terrain.stencilModeForRTTOverlap(Rn):kt[Rn.overscaledZ],xi=b?0:o.paint.get("raster-fade-duration");Pr.registerFadeDuration(xi);const ri=t.findLoadedParent(Rn,0),Kr=_s(Pr,ri,t,u.transform,xi);let mi,gi;u.terrain&&u.terrain.prepareDrawTile(),q.activeTexture.set(re.TEXTURE0),Or.bind(it,re.CLAMP_TO_EDGE),q.activeTexture.set(re.TEXTURE1),ri?(ri.texture&&ri.texture.bind(it,re.CLAMP_TO_EDGE),mi=Math.pow(2,ri.tileID.overscaledZ-Pr.tileID.overscaledZ),gi=[Pr.tileID.canonical.x*mi%1,Pr.tileID.canonical.y*mi%1]):Or.bind(it,re.CLAMP_TO_EDGE),Or.useMipmap&&q.extTextureFilterAnisotropic&&u.transform.pitch>20&&re.texParameterf(re.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax);const Gi=u.transform;let Li;const bo=k?od(Gi):[0,0,0,0];let wo,Ao,zo,Ga,ba,wl=0;if(Z&&fe instanceof n.aJ&&fe.coordinates.length>3)wo=Float32Array.from(n.bb(n.cH(new n.bT(0,0,0)))),Ao=Float32Array.from(Gi.globeMatrix),zo=Float32Array.from(n.cD(Gi)),Ga=[n.at(Gi.center.lng),n.aA(Gi.center.lat)],Li=fe.elevatedGlobePerspectiveTransform,ba=fe.elevatedGlobeGridMatrix||new Float32Array(9);else if(Z){const uo=n.cE(Rn.canonical);wl=n.cF(uo.getCenter().lat),wo=Float32Array.from(n.bb(n.cH(Rn.canonical))),Ao=Float32Array.from(Gi.globeMatrix),zo=Float32Array.from(n.cD(Gi)),Ga=[n.at(Gi.center.lng),n.aA(Gi.center.lat)],Li=[0,0],ba=Float32Array.from(n.cG(Rn.canonical,uo,wl,Gi.worldSize/Gi._pixelsPerMercatorPixel))}else Li=fe instanceof n.aJ?fe.perspectiveTransform:[0,0],wo=new Float32Array(16),Ao=new Float32Array(9),zo=new Float32Array(16),Ga=[0,0],ba=new Float32Array(9);const os=nu(Fr,wo,Ao,zo,ba,gi||[0,0],n.ae(u.transform.zoom),Ga,bo,mi||1,Kr,o,Li,k?o.paint.get("raster-elevation"):0,2,kr,Yn,pe.range,Mr,ti,Te),ia=u.isTileAffectedByFog(Rn),Pa=u.getOrCreateProgram("raster",{defines:pe.defines,overrideFog:ia});if(u.uploadCommonUniforms(q,Pa,$n),fe instanceof n.aJ){const uo=fe.elevatedGlobeVertexBuffer,na=fe.elevatedGlobeIndexBuffer;if(We||!A)fe.boundsBuffer&&fe.boundsSegments&&Pa.draw(u,re.TRIANGLES,ir,Io.disabled,et,Mo.disabled,os,o.id,fe.boundsBuffer,u.quadTriangleIndexBuffer,fe.boundsSegments);else if(uo&&na){const Ya=Gi.zoom<=n.c6?fe.elevatedGlobeSegments:fe.getSegmentsForLongitude(Gi.center.lng);Ya&&Pa.draw(u,re.TRIANGLES,ir,Io.disabled,et,dn,os,o.id,uo,na,Ya)}}else if(Z){ir=new Ui(re.LEQUAL,Ui.ReadOnly,u.depthRangeFor3D);const uo=u.globeSharedBuffers;if(uo){const[na,Ya,Ia]=uo.getGridBuffers(wl,!1);Pa.draw(u,re.TRIANGLES,ir,nn||Cr,u.colorModeForRenderPass(),dn,os,o.id,na,Ya,Ia)}}else{const{tileBoundsBuffer:uo,tileBoundsIndexBuffer:na,tileBoundsSegments:Ya}=u.getTileBoundsBuffers(Pr);Pa.draw(u,re.TRIANGLES,ir,Cr,et,Mo.disabled,os,o.id,uo,na,Ya)}}if(!(fe instanceof n.aJ)&&Z)for(const Rn of on){const $n=Rn.canonical.y===(1<<Rn.canonical.z)-1;Rn.canonical.y===0&&gr(!0,Rn,u,t,o,Te,pe,dn,nn||Io.disabled),$n&&gr(!1,Rn,u,t,o,Te,pe,dn===Mo.frontCW?Mo.backCW:Mo.frontCW,nn||Io.disabled)}};Z?vn(qt,u.renderElevatedRasterBackface?Mo.backCW:Mo.frontCW,u.stencilModeFor3D()):vn(qt,Mo.disabled,void 0),u.resetStencilClippingMasks()},"raster-particle":function(u,t,o,d,v,b){u.renderPass==="offscreen"&&function(A,k,Z,q){if(!q.length)return;const re=A.context,fe=re.gl,pe=k.getSource();if(!(pe instanceof Xo))return;const Te=Math.ceil(Math.sqrt(Z.paint.get("raster-particle-count")));let et=Z.particlePositionRGBAImage;if(!et||et.width!==Te){const qt=function(Qt){const vn=Qt*Qt,on=new Uint8Array(4*vn),dn=function(Rn){return Rn|=0,Rn=Math.imul(2747636419^Rn,2654435769),Rn=Math.imul(Rn^Rn>>>16,2654435769),((Rn=Math.imul(Rn^Rn>>>16,2654435769))>>>0)/4294967296},nn=1/1.1;for(let Rn=0;Rn<vn;Rn++){const $n=nn*(dn(2*Rn+0)+Pi),Pr=nn*(dn(2*Rn+1)+Pi),dr=255*$n%1,Or=255*Pr%1,kr=dr,Yn=Pr-Or/255,Mr=Or;on[4*Rn+0]=255*($n-dr/255),on[4*Rn+1]=255*kr,on[4*Rn+2]=255*Yn,on[4*Rn+3]=255*Mr}return on}(Te);et=Z.particlePositionRGBAImage=new n.r({width:Te,height:Te},qt)}let We=Z.particleFramebuffer;We?We.width!==Te&&(We.destroy(),We=Z.particleFramebuffer=re.createFramebuffer(Te,Te,!0,null)):We=Z.particleFramebuffer=re.createFramebuffer(Te,Te,!0,null);const rt=[];for(const qt of q){const Qt=k.getTile(qt);if(!(Qt instanceof ao))continue;const vn=th(Qt,pe,Z);if(!vn)continue;const on=[Qt.tileSize,Qt.tileSize];let dn=Z.tileFramebuffer;dn||(dn=Z.tileFramebuffer=re.createFramebuffer(on[0],on[1],!0,null));let nn=Qt.rasterParticleState;nn||(nn=Qt.rasterParticleState=new sm(re,qt,on,et));const Rn=nn.update(Z.lastInvalidatedAt);nn.particleTextureDimension!==Te&&nn.updateParticleTexture(qt,et);const $n=nn.targetColorTexture;nn.targetColorTexture=nn.backgroundColorTexture,nn.backgroundColorTexture=$n;const Pr=nn.particleTexture0;nn.particleTexture0=nn.particleTexture1,nn.particleTexture1=Pr,rt.push([qt,vn,nn,Rn])}if(rt.length===0)return;const it=n.q.now(),kt=Z.previousDrawTimestamp?.001*(it-Z.previousDrawTimestamp):.0167;if(Z.previousDrawTimestamp=it,Z.hasColorMap()){re.activeTexture.set(fe.TEXTURE0+2);let qt=Z.colorRampTexture;qt||(qt=Z.colorRampTexture=new n.T(re,Z.colorRamp,fe.RGBA8)),qt.bind(fe.LINEAR,fe.CLAMP_TO_EDGE)}re.bindFramebuffer.set(Z.tileFramebuffer.framebuffer),function(qt,Qt,vn){const on=qt.context,dn=on.gl,nn=Qt.tileFramebuffer;on.activeTexture.set(dn.TEXTURE0);const Rn={u_texture:0,u_opacity:1.05*(Pr=Qt.paint.get("raster-particle-fade-opacity-factor"))/(Pr+.05)},$n=qt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Pr;for(const dr of vn){const[,,Or,kr]=dr;nn.colorAttachment.set(Or.targetColorTexture.texture),on.viewport.set([0,0,nn.width,nn.height]),on.clear({color:n.aj.transparent}),kr&&(Or.backgroundColorTexture.bind(dn.NEAREST,dn.CLAMP_TO_EDGE),$n.draw(qt,dn.TRIANGLES,Ui.disabled,Io.disabled,go.alphaBlended,Mo.disabled,Rn,Qt.id,qt.viewportBuffer,qt.quadTriangleIndexBuffer,qt.viewportSegments))}}(A,Z,rt),function(qt,Qt,vn,on){const dn=qt.context,nn=dn.gl,Rn=vn.tileFramebuffer,$n=qt.transform.projection.name==="globe",Pr=vn.paint.get("raster-particle-max-speed");for(const dr of on){const[Or,kr,Yn]=dr;dn.activeTexture.set(nn.TEXTURE0+0),kr.texture.bind(nn.LINEAR,nn.CLAMP_TO_EDGE),Rn.colorAttachment.set(Yn.targetColorTexture.texture);const Mr=qt.getOrCreateProgram("rasterParticleDraw",{defines:kr.defines,overrideFog:!1});dn.activeTexture.set(nn.TEXTURE0+1);const ti=kr.scalarData?[]:[0,1,2,3].map(Cr=>n.d4[Cr](Or));ti.push(Or);const ir=Or.canonical.x,Fr=Or.canonical.y;for(const Cr of ti){const xi=Qt.getTile($n?Cr.wrapped():Cr);if(!xi)continue;const ri=xi.rasterParticleState;if(!ri)continue;const Kr=Cr.canonical.x+(1<<Cr.canonical.z)*(Cr.wrap-Or.wrap),mi=Cr.canonical.y;ri.particleTexture0.bind(nn.NEAREST,nn.CLAMP_TO_EDGE);const gi=Nl(1,ri.particleTexture0.size[0],[Kr-ir,mi-Fr],0,kr.texture.size,2,Pr,kr.textureOffset,kr.scale,kr.offset);Mr.draw(qt,nn.POINTS,Ui.disabled,Io.disabled,go.alphaBlended,Mo.disabled,gi,vn.id,ri.particleIndexBuffer,void 0,ri.particleSegment)}}}(A,k,Z,rt),re.bindFramebuffer.set(Z.particleFramebuffer.framebuffer),function(qt,Qt,vn,on){const dn=qt.context,nn=dn.gl,Rn=Qt.paint.get("raster-particle-max-speed"),$n=on*Qt.paint.get("raster-particle-speed-factor")*.15,Pr=function(Or){return Math.pow(Or,6)}(.01+1*Qt.paint.get("raster-particle-reset-rate-factor")),dr=Qt.particleFramebuffer;dn.viewport.set([0,0,dr.width,dr.height]);for(const Or of vn){const[,kr,Yn]=Or;dn.activeTexture.set(nn.TEXTURE0+0),kr.texture.bind(nn.LINEAR,nn.CLAMP_TO_EDGE),dn.activeTexture.set(nn.TEXTURE0+1);const Mr=Yn.particleTexture0;Mr.bind(nn.NEAREST,nn.CLAMP_TO_EDGE);const ti=pu(1,Mr.size[0],0,kr.texture.size,Rn,$n,Pr,kr.textureOffset,kr.scale,kr.offset);dr.colorAttachment.set(Yn.particleTexture1.texture),dn.clear({color:n.aj.transparent}),qt.getOrCreateProgram("rasterParticleUpdate",{defines:kr.defines}).draw(qt,nn.TRIANGLES,Ui.disabled,Io.disabled,go.unblended,Mo.disabled,ti,Qt.id,qt.viewportBuffer,qt.quadTriangleIndexBuffer,qt.viewportSegments)}}(A,Z,rt,kt)}(u,t,o,d),u.renderPass==="translucent"&&(function(A,k,Z,q,re){const fe=A.context,pe=fe.gl,Te=k.getSource().tileSize,et=5*(1-n.ac(n.bY,n.bY+1,A.transform.zoom))*Te+Z.paint.get("raster-particle-elevation"),We=!A.options.moving,rt=A.transform.projection.name==="globe";if(!q.length)return;const[it,kt]=A.stencilConfigForOverlap(q),qt=[];rt&&qt.push("PROJECTION_GLOBE_VIEW");const Qt=A.stencilModeFor3D();for(const vn of kt){const on=vn.toUnwrapped(),dn=k.getTile(vn);if(!dn.rasterParticleState)continue;const nn=dn.rasterParticleState,Rn=100;dn.registerFadeDuration(Rn);const $n=k.findLoadedParent(vn,0),Pr=_s(dn,$n,k,A.transform,Rn);let dr,Or;A.terrain&&A.terrain.prepareDrawTile(),fe.activeTexture.set(pe.TEXTURE0),nn.targetColorTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),fe.activeTexture.set(pe.TEXTURE1),$n&&$n.rasterParticleState?($n.rasterParticleState.targetColorTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),dr=Math.pow(2,$n.tileID.overscaledZ-dn.tileID.overscaledZ),Or=[dn.tileID.canonical.x*dr%1,dn.tileID.canonical.y*dr%1]):nn.targetColorTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const kr=rt?Float32Array.from(A.transform.expandedFarZProjMatrix):A.transform.calculateProjMatrix(on,We),Yn=A.transform,Mr=yh(Yn),ti=n.cE(vn.canonical),ir=n.cF(ti.getCenter().lat);let Fr,Cr,xi,ri,Kr;rt?(Fr=Float32Array.from(n.bb(n.cH(vn.canonical))),Cr=Float32Array.from(Yn.globeMatrix),xi=Float32Array.from(n.cD(Yn)),ri=[n.at(Yn.center.lng),n.aA(Yn.center.lat)],Kr=Float32Array.from(n.cG(vn.canonical,ti,ir,Yn.worldSize/Yn._pixelsPerMercatorPixel))):(Fr=new Float32Array(16),Cr=new Float32Array(9),xi=new Float32Array(16),ri=[0,0],Kr=new Float32Array(9));const mi=Ss(kr,Fr,Cr,xi,Kr,Or||[0,0],n.ae(A.transform.zoom),ri,Mr,dr||1,Pr,et),gi=A.isTileAffectedByFog(vn),Gi=A.getOrCreateProgram("rasterParticle",{defines:qt,overrideFog:gi});if(A.uploadCommonUniforms(fe,Gi,on),rt){const Li=new Ui(pe.LEQUAL,Ui.ReadOnly,A.depthRangeFor3D),bo=0,wo=A.globeSharedBuffers;if(wo){const[Ao,zo,Ga]=wo.getGridBuffers(ir,bo!==0);Gi.draw(A,pe.TRIANGLES,Li,Qt,go.alphaBlended,A.renderElevatedRasterBackface?Mo.frontCCW:Mo.backCCW,mi,Z.id,Ao,zo,Ga)}}else{const Li=A.depthModeForSublayer(0,Ui.ReadOnly),bo=it[vn.overscaledZ],{tileBoundsBuffer:wo,tileBoundsIndexBuffer:Ao,tileBoundsSegments:zo}=A.getTileBoundsBuffers(dn);Gi.draw(A,pe.TRIANGLES,Li,bo,go.alphaBlended,Mo.disabled,mi,Z.id,wo,Ao,zo)}}A.resetStencilClippingMasks()}(u,t,o,d),u.style.map.triggerRepaint())},background:function(u,t,o,d){const v=o.paint.get("background-color"),b=o.paint.get("background-color-use-theme").constantOr("default")==="none",A=o.paint.get("background-opacity"),k=o.paint.get("background-emissive-strength"),Z=o.paint.get("background-pitch-alignment")==="viewport";if(A===0)return;const q=u.context,re=q.gl,fe=u.transform,pe=fe.tileSize,Te=o.paint.get("background-pattern");let et;if(Te!==void 0&&(Te===null||(et=u.imageManager.getPattern(Te.toString(),o.scope,u.style.getLut(o.scope)),!et)))return;const We=!Te&&v.a===1&&A===1&&u.opaquePassEnabledForLayer()?"opaque":"translucent";if(u.renderPass!==We)return;const rt=Io.disabled,it=u.depthModeForSublayer(0,We==="opaque"?Ui.ReadWrite:Ui.ReadOnly),kt=u.colorModeForDrapableLayerRenderPass(k),qt=Te?"backgroundPattern":"background";let Qt,vn=d;if(vn||(Qt=u.getBackgroundTiles(),vn=Object.values(Qt).map(on=>on.tileID)),Te&&(q.activeTexture.set(re.TEXTURE0),u.imageManager.bind(u.context,o.scope)),Z){const on=u.getOrCreateProgram(qt,{overrideFog:!1,overrideRtt:!0}),dn=new Float32Array(n.ab.mat4.identity([])),nn=new n.aG(0,0,0,0,0),Rn=Te?sl(dn,k,A,u,0,o.scope,et,Z,{tileID:nn,tileSize:pe}):mu(dn,k,A,v.toRenderColor(b?null:o.lut));on.draw(u,re.TRIANGLES,it,rt,kt,Mo.disabled,Rn,o.id,u.viewportBuffer,u.quadTriangleIndexBuffer,u.viewportSegments)}else for(const on of vn){const dn=u.isTileAffectedByFog(on),nn=u.getOrCreateProgram(qt,{overrideFog:dn}),Rn=on.toUnwrapped(),$n=d?on.projMatrix:u.transform.calculateProjMatrix(Rn);u.prepareDrawTile();const Pr=t?t.getTile(on):Qt?Qt[on.key]:new ua(on,pe,fe.zoom,u),dr=Te?sl($n,k,A,u,0,o.scope,et,Z,{tileID:on,tileSize:pe}):mu($n,k,A,v.toRenderColor(b?null:o.lut));u.uploadCommonUniforms(q,nn,Rn);const{tileBoundsBuffer:Or,tileBoundsIndexBuffer:kr,tileBoundsSegments:Yn}=u.getTileBoundsBuffers(Pr);nn.draw(u,re.TRIANGLES,it,rt,kt,Mo.disabled,dr,o.id,Or,kr,Yn)}},sky:function(u,t,o){const d=u._atmosphere?n.ae(u.transform.zoom):1,v=o.paint.get("sky-opacity")*d;if(v===0)return;const b=u.context,A=o.paint.get("sky-type"),k=new Ui(b.gl.LEQUAL,Ui.ReadOnly,[0,1]),Z=u.frameCounter/1e3%1;A==="atmosphere"?u.renderPass==="offscreen"?o.needsSkyboxCapture(u)&&(function(q,re,fe,pe){const Te=q.context,et=Te.gl;let We=re.skyboxFbo;if(!We){We=re.skyboxFbo=Te.createFramebuffer(32,32,!0,null),re.skyboxGeometry=new Vd(Te),re.skyboxTexture=Te.gl.createTexture(),et.bindTexture(et.TEXTURE_CUBE_MAP,re.skyboxTexture),et.texParameteri(et.TEXTURE_CUBE_MAP,et.TEXTURE_WRAP_S,et.CLAMP_TO_EDGE),et.texParameteri(et.TEXTURE_CUBE_MAP,et.TEXTURE_WRAP_T,et.CLAMP_TO_EDGE),et.texParameteri(et.TEXTURE_CUBE_MAP,et.TEXTURE_MIN_FILTER,et.LINEAR),et.texParameteri(et.TEXTURE_CUBE_MAP,et.TEXTURE_MAG_FILTER,et.LINEAR);for(let qt=0;qt<6;++qt)et.texImage2D(et.TEXTURE_CUBE_MAP_POSITIVE_X+qt,0,et.RGBA,32,32,0,et.RGBA,et.UNSIGNED_BYTE,null)}Te.bindFramebuffer.set(We.framebuffer),Te.viewport.set([0,0,32,32]);const rt=re.getCenter(q,!0),it=q.getOrCreateProgram("skyboxCapture"),kt=new Float64Array(16);n.ab.mat4.identity(kt),n.ab.mat4.rotateY(kt,kt,.5*-Math.PI),Bl(q,re,it,kt,rt,0),n.ab.mat4.identity(kt),n.ab.mat4.rotateY(kt,kt,.5*Math.PI),Bl(q,re,it,kt,rt,1),n.ab.mat4.identity(kt),n.ab.mat4.rotateX(kt,kt,.5*-Math.PI),Bl(q,re,it,kt,rt,2),n.ab.mat4.identity(kt),n.ab.mat4.rotateX(kt,kt,.5*Math.PI),Bl(q,re,it,kt,rt,3),n.ab.mat4.identity(kt),Bl(q,re,it,kt,rt,4),n.ab.mat4.identity(kt),n.ab.mat4.rotateY(kt,kt,Math.PI),Bl(q,re,it,kt,rt,5),Te.viewport.set([0,0,q.width,q.height])}(u,o),o.markSkyboxValid(u)):u.renderPass==="sky"&&function(q,re,fe,pe,Te){const et=q.context,We=et.gl,rt=q.transform,it=q.getOrCreateProgram("skybox");et.activeTexture.set(We.TEXTURE0),We.bindTexture(We.TEXTURE_CUBE_MAP,re.skyboxTexture);const kt=((qt,Qt,vn,on,dn)=>({u_matrix:qt,u_sun_direction:Qt,u_cubemap:0,u_opacity:on,u_temporal_offset:dn}))(rt.skyboxMatrix,re.getCenter(q,!1),0,pe,Te);q.uploadCommonUniforms(et,it),it.draw(q,We.TRIANGLES,fe,Io.disabled,q.colorModeForRenderPass(),Mo.backCW,kt,"skybox",re.skyboxGeometry.vertexBuffer,re.skyboxGeometry.indexBuffer,re.skyboxGeometry.segment)}(u,o,k,v,Z):A==="gradient"&&u.renderPass==="sky"&&function(q,re,fe,pe,Te){const et=q.context,We=et.gl,rt=q.transform,it=q.getOrCreateProgram("skyboxGradient");re.skyboxGeometry||(re.skyboxGeometry=new Vd(et)),et.activeTexture.set(We.TEXTURE0);let kt=re.colorRampTexture;kt||(kt=re.colorRampTexture=new n.T(et,re.colorRamp,We.RGBA8)),kt.bind(We.LINEAR,We.CLAMP_TO_EDGE);const qt=((Qt,vn,on,dn,nn)=>({u_matrix:Qt,u_color_ramp:0,u_center_direction:vn,u_radius:n.ai(on),u_opacity:dn,u_temporal_offset:nn}))(rt.skyboxMatrix,re.getCenter(q,!1),re.paint.get("sky-gradient-radius"),pe,Te);q.uploadCommonUniforms(et,it),it.draw(q,We.TRIANGLES,fe,Io.disabled,q.colorModeForRenderPass(),Mo.backCW,qt,"skyboxGradient",re.skyboxGeometry.vertexBuffer,re.skyboxGeometry.indexBuffer,re.skyboxGeometry.segment)}(u,o,k,v,Z)},debug:function(u,t,o,d,v,b){for(let A=0;A<o.length;A++)if(v){const q=new n.aj(d.r*.8,d.g*.8,d.b*.8,1);bh(u,t,o[A],d,-1,-1,b),bh(u,t,o[A],d,-1,1,b),bh(u,t,o[A],d,1,1,b),bh(u,t,o[A],d,1,-1,b),bh(u,t,o[A],q,0,0,b)}else bh(u,t,o[A],d,0,0,b)},custom:function(u,t,o,d){const v=u.context,b=o.implementation;if(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes("custom")||u.terrain&&(u.terrain.renderingToTexture||u.renderPass==="offscreen")&&o.isDraped(t)){if(u.renderPass==="offscreen"){const A=b.prerender;if(A){if(u.setCustomLayerDefaults(),v.setColorMode(u.colorModeForRenderPass()),u.transform.projection.name==="globe"){const k=u.transform.pointMerc;A.call(b,v.gl,u.transform.customLayerMatrix(),u.transform.getProjection(),u.transform.globeToMercatorMatrix(),n.ae(u.transform.zoom),[k.x,k.y],u.transform.pixelsPerMeterRatio)}else A.call(b,v.gl,u.transform.customLayerMatrix());v.setDirty(),u.setBaseState()}}else if(u.renderPass==="translucent"){if(u.terrain&&u.terrain.renderingToTexture){const k=b.renderToTile;if(k){const Z=d[0].canonical,q=new n.aa(Z.x+d[0].wrap*(1<<Z.z),Z.y,Z.z);v.setDepthMode(Ui.disabled),v.setStencilMode(Io.disabled),v.setColorMode(u.colorModeForRenderPass()),u.setCustomLayerDefaults(),k.call(b,v.gl,q),v.setDirty(),u.setBaseState()}return}u.setCustomLayerDefaults(),v.setColorMode(u.colorModeForRenderPass()),v.setStencilMode(Io.disabled);const A=b.renderingMode==="3d"?new Ui(u.context.gl.LEQUAL,Ui.ReadWrite,u.depthRangeFor3D):u.depthModeForSublayer(0,Ui.ReadOnly);if(v.setDepthMode(A),u.transform.projection.name==="globe"){const k=u.transform.pointMerc;b.render(v.gl,u.transform.customLayerMatrix(),u.transform.getProjection(),u.transform.globeToMercatorMatrix(),n.ae(u.transform.zoom),[k.x,k.y],u.transform.pixelsPerMeterRatio)}else b.render(v.gl,u.transform.customLayerMatrix());v.setDirty(),u.setBaseState(),v.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(u,t,o,d){if(u.renderPass==="opaque")return;const v=o.paint.get("model-opacity").constantOr(1);if(v===0)return;const b=o.paint.get("model-cast-shadows");if(u.renderPass==="shadow"&&(!b||u.terrain&&v<.65&&o._transitionablePaint._values["model-opacity"].value.expression instanceof n.a9))return;const A=u.shadowRenderer,k=o.paint.get("model-receive-shadows");A&&(A.useNormalOffset=!0,k||(A.enabled=!1));const Z=()=>{A&&(A.useNormalOffset=!0,k||(A.enabled=!0))},q=t.getSource();if(u.renderPass==="light-beam"&&q.type!=="batched-model")return;if(q.type==="vector"||q.type==="geojson")return function(it,kt,qt,Qt,vn){const on=it.transform;if(on.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${on.projection.name} projection is not yet implemented`);const dn=on.getFreeCameraOptions().position;if(!it.modelManager)return;const nn=it.modelManager;qt.modelManager=nn;const Rn=it.shadowRenderer;if(!qt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const $n=qt._unevaluatedLayout._values["model-id"],Pr=Object.assign({},qt.layout.get("model-id").parameters),dr=it.style.order.indexOf(qt.fqid);for(const Or of Qt){const kr=kt.getTile(Or).getBucket(qt);if(!kr||kr.projection.name!==on.projection.name)continue;const Yn=kr.getModelUris();Yn&&!kr.modelsRequested&&(nn.addModelsFromBucket(Yn,vn),kr.modelsRequested=!0);const Mr=Gu(Or,on);Pr.zoom=Mr;const ti=$n.possiblyEvaluate(Pr);if(cl(it,kr,Or),Js.shadowUniformsInitialized=!1,Js.useSingleShadowCascade=!!Rn&&Rn.getMaxCascadeForTile(Or.toUnwrapped())===0,it.renderPass==="shadow"&&Rn){if(it.currentShadowCascade===1&&kr.isInsideFirstShadowMapFrustum)continue;const Cr=on.calculatePosMatrix(Or.toUnwrapped(),on.worldSize);if(Js.tileMatrix.set(Cr),Js.shadowTileMatrix=Float32Array.from(Rn.calculateShadowPassMatrixFromMatrix(Cr)),Js.aabb.min.fill(0),Js.aabb.max[0]=Js.aabb.max[1]=n.ag,Js.aabb.max[2]=0,af(kr,Js,it,qt.scope))continue}const ir=1<<Or.canonical.z,Fr=[((dn.x-Or.wrap)*ir-Or.canonical.x)*n.ag,(dn.y*ir-Or.canonical.y)*n.ag,dn.z*ir*n.ag];it.conflationActive&&Object.keys(kr.instancesPerModel).length>0&&it.style.isLayerClipped(qt,kt.getSource())&&kr.updateReplacement(Or,it.replacementSource,dr,vn)&&(kr.uploaded=!1,kr.upload(it.context));for(let Cr in kr.instancesPerModel){const xi=kr.instancesPerModel[Cr];xi.features.length>0&&(Cr=ti.evaluate(xi.features[0].feature,{}));const ri=nn.getModel(Cr,vn);if(ri&&ri.uploaded)for(const Kr of ri.nodes)Vh(it,qt,Kr,xi,Fr,Or,Js)}}}(u,t,o,d,q.type==="vector"?o.scope:""),void Z();if(!q.loaded())return;if(q.type==="batched-model")return function(it,kt,qt,Qt){qt.resetLayerRenderingStats(it);const vn=it.context,on=it.transform,dn=it.style.fog,nn=it.shadowRenderer;if(on.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${on.projection.name} projection is not yet implemented`);const Rn=it.transform.getFreeCameraOptions().position,$n=n.ab.vec3.scale([],[Rn.x,Rn.y,Rn.z],it.transform.worldSize),Pr=n.ab.vec3.negate([],$n),dr=n.ab.mat4.identity([]),Or=n.dj(on.center.lat,on.zoom),kr=n.ab.mat4.fromScaling([],[1,1,1/Or]);n.ab.mat4.translate(dr,dr,Pr);const Yn=qt.paint.get("model-opacity").constantOr(1),Mr=new Ui(vn.gl.LEQUAL,Ui.ReadWrite,it.depthRangeFor3D),ti=new Ui(vn.gl.LEQUAL,Ui.ReadOnly,it.depthRangeFor3D),ir=new n.cd([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Fr=it.renderPass==="shadow",Cr=Fr&&nn?nn.getCurrentCascadeFrustum():on.getFrustum(on.scaleZoom(on.worldSize)),xi=qt.paint.get("model-front-cutoff"),ri=xi[2]<1,Kr=Nr(it,qt.paint.get("model-cutoff-fade-range")),mi=qt.getLayerRenderingStats();(function(gi,Gi,Li,bo){const wo=gi.terrain?gi.terrain.exaggeration():0,Ao=gi.transform.zoom;for(const zo of bo){const Ga=Gi.getTile(zo).getBucket(Li);Ga&&(gi.conflationActive&&Ga.updateReplacement(zo,gi.replacementSource),Ga.evaluateScale(gi,Li),gi.terrain&&wo>0&&Ga.elevationUpdate(gi.terrain,wo,zo,Li.source),Ga.needsReEvaluation(gi,Ao,Li)&&Ga.evaluate(Li))}})(it,kt,qt,Qt),function(){let gi,Gi,Li;ri?(gi=Qt.length-1,Gi=-1,Li=-1):(gi=0,Gi=Qt.length,Li=1);const bo=new Float64Array(16),wo=n.ab.vec3.create(),Ao=new n.P(0,0);for(let zo=gi;zo!==Gi;zo+=Li){const Ga=Qt[zo],ba=kt.getTile(Ga).getBucket(qt);if(!ba||!ba.uploaded)continue;let wl=!1;nn&&(wl=nn.getMaxCascadeForTile(Ga.toUnwrapped())===0);const os=on.calculatePosMatrix(Ga.toUnwrapped(),on.worldSize),ia=ba.modelTraits;!Fr&&ri&&(n.ab.mat4.invert(bo,os),n.ab.vec3.transformMat4(wo,$n,bo),Ao.x=wo[0],Ao.y=wo[1]);const Pa=[];for(const uo of ba.getNodesInfo()){if(uo.hiddenByReplacement||!uo.node.meshes)continue;const na=uo.node;let Ya=0;it.terrain&&na.elevation&&(Ya=na.elevation*it.terrain.exaggeration());const Ia=(()=>{const Xa=uo.aabb;return ir.min=[...Xa.min],ir.max=[...Xa.max],ir.min[2]+=Ya,ir.max[2]+=Ya,n.ab.vec3.transformMat4(ir.min,ir.min,os),n.ab.vec3.transformMat4(ir.max,ir.max,os),ir})(),Ms=uo.evaluatedScale;if(Ms[0]<=1&&Ms[1]<=1&&Ms[2]<=1&&Ia.intersects(Cr)===0)continue;if(!Fr&&ri){const Xa=.16666666666666666;uo.cameraCollisionOpacity=$n[0]>Ia.min[0]&&$n[0]<Ia.max[0]&&$n[1]>Ia.min[1]&&$n[1]<Ia.max[1]&&$n[2]*Or<Ia.max[2]&&na.footprint&&n.bA(Ao,na.footprint)?Math.max(uo.cameraCollisionOpacity-Xa,0):Math.min(1,uo.cameraCollisionOpacity+Xa)}const $u=[...os],xl=na.anchor?na.anchor[0]:0,lu=na.anchor?na.anchor[1]:0;n.ab.mat4.translate($u,$u,[xl*(Ms[0]-1),lu*(Ms[1]-1),Ya]),n.ab.vec3.exactEquals(Ms,n.dm)||n.ab.mat4.scale($u,$u,Ms);const Zu=n.ab.mat4.multiply([],$u,na.matrix),Mu=n.ab.mat4.multiply([],on.expandedFarZProjMatrix,Zu),Ws=n.ab.mat4.multiply([],on.expandedFarZProjMatrix,$u),Us=n.ab.vec4.transformMat4([],[xl,lu,Ya,1],Mu)[2];na.hidden=!1;let gs=Yn;Fr||(ri&&(gs*=uo.cameraCollisionOpacity,gs*=cc($u,on,uo.aabb,xi)),gs*=dl(Kr,Us)),gs!==0?Pa.push({nodeInfo:uo,depth:Us,opacity:gs,wvpForNode:Mu,wvpForTile:Ws,nodeModelMatrix:Zu,tileModelMatrix:$u}):na.hidden=!0}Fr||Pa.sort((uo,na)=>!ri||uo.opacity===1&&na.opacity===1?uo.depth<na.depth?-1:1:uo.opacity===1?-1:na.opacity===1?1:uo.depth>na.depth?-1:1);for(const uo of Pa){const na=uo.nodeInfo,Ya=na.node;let Ia=n.ab.mat4.multiply([],kr,uo.tileModelMatrix);n.ab.mat4.multiply(Ia,dr,Ia);const Ms=n.ab.mat4.invert([],Ia);n.ab.mat4.transpose(Ms,Ms),n.ab.mat4.scale(Ms,Ms,Gd),Ia=n.ab.mat4.multiply(Ia,Ia,Ya.matrix);const $u=it.renderPass==="light-beam",xl=qt.paint.get("model-color-use-theme").constantOr("default")==="none",lu=ia&n.dp.HasMapboxMeshFeatures,Zu=lu?0:na.evaluatedRMEA[0][2];for(let Mu=0;Mu<Ya.meshes.length;++Mu){const Ws=Ya.meshes[Mu],Us=Mu===Ya.lightMeshIndex;let gs=uo.wvpForNode;if(Us){if(!$u&&!it.terrain&&it.shadowRenderer){it.currentLayer<it.firstLightBeamLayer&&(it.firstLightBeamLayer=it.currentLayer);continue}gs=uo.wvpForTile}else if($u)continue;const Xa={defines:[]},El=[];if(!Fr&&nn&&(nn.useNormalOffset=!!Ws.normalBuffer),Od(Xa.defines,El,Ws,it,xl?null:qt.lut),lu||Xa.defines.push("DIFFUSE_SHADED"),wl&&Xa.defines.push("SHADOWS_SINGLE_CASCADE"),mi&&(Fr?mi.numRenderedVerticesInShadowPass+=Ws.vertexArray.length:mi.numRenderedVerticesInTransparentPass+=Ws.vertexArray.length),Fr){Rd(Ws,uo.nodeModelMatrix,it,qt);continue}let Wu=null;if(dn){const Hd=Vu(uo.nodeModelMatrix,it.transform);if(Wu=new Float32Array(Hd),on.projection.name!=="globe"){const ud=Ws.aabb.min,ec=Ws.aabb.max,[Kh,tc]=dn.getOpacityForBounds(Hd,ud[0],ud[1],ec[0],ec[1]);Xa.overrideFog=Kh>=jt||tc>=jt}}const Vs=Ws.material;let hc;Vs.occlusionTexture&&Vs.occlusionTexture.offsetScale&&(hc=Vs.occlusionTexture.offsetScale,Xa.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const qc=it.getOrCreateProgram("model",Xa);!Fr&&nn&&nn.setupShadowsFromMatrix(uo.tileModelMatrix,qc,nn.useNormalOffset),it.uploadCommonUniforms(vn,qc,null,Wu);const ed=Vs.pbrMetallicRoughness;ed.metallicFactor=.9,ed.roughnessFactor=.5;const td=Wa(new Float32Array(gs),new Float32Array(Ia),new Float32Array(Ms),new Float32Array(Ya.matrix),it,uo.opacity,ed.baseColorFactor.toRenderColor(null),Vs.emissiveFactor,ed.metallicFactor,ed.roughnessFactor,Vs,Zu,qt,[0,0,0],hc);!Us&&(na.hasTranslucentParts||uo.opacity<1)&&qc.draw(it,vn.gl.TRIANGLES,Mr,Io.disabled,go.disabled,Mo.backCCW,td,qt.id,Ws.vertexBuffer,Ws.indexBuffer,Ws.segments,qt.paint,it.transform.zoom,void 0,El),qc.draw(it,vn.gl.TRIANGLES,Us?ti:Mr,Io.disabled,Us||uo.opacity<1||na.hasTranslucentParts?go.alphaBlended:go.unblended,Mo.backCCW,td,qt.id,Ws.vertexBuffer,Ws.indexBuffer,Ws.segments,qt.paint,it.transform.zoom,void 0,El)}}}}()}(u,t,o,d),void Z();if(q.type!=="model")return;const re=q.getModels(),fe=[],pe=u.transform.getFreeCameraOptions().position,Te=n.ab.vec3.scale([],[pe.x,pe.y,pe.z],u.transform.worldSize);n.ab.vec3.negate(Te,Te);const et=[],We=[];let rt=0;for(const it of re){const kt=o.paint.get("model-rotation").constantOr(null),qt=o.paint.get("model-scale").constantOr(null),Qt=o.paint.get("model-translation").constantOr(null);it.computeModelMatrix(u,kt,qt,Qt,!0,!0,!1);const vn=n.ab.mat4.identity([]),on=n.dj(it.position.lat,u.transform.zoom),dn=n.ab.mat4.fromScaling([],[1,1,1/on]);n.ab.mat4.translate(vn,vn,Te),fe.push({zScaleMatrix:dn,negCameraPosMatrix:vn});for(const nn of it.nodes)Rf(u.transform,nn,it.matrix,u.transform.expandedFarZProjMatrix,rt,et,We);rt++}if(et.sort((it,kt)=>kt.depth-it.depth),u.renderPass!=="shadow"){if(v===1)for(const it of We)Ha(it,u,o,fe[it.modelIndex],Io.disabled,u.colorModeForRenderPass());else{for(const it of We)Ha(it,u,o,fe[it.modelIndex],Io.disabled,go.disabled);for(const it of We)Ha(it,u,o,fe[it.modelIndex],u.stencilModeFor3D(),u.colorModeForRenderPass());u.resetStencilClippingMasks()}for(const it of et)Ha(it,u,o,fe[it.modelIndex],Io.disabled,u.colorModeForRenderPass());Z()}else{for(const it of We)Rd(it.mesh,it.nodeModelMatrix,u,o);for(const it of et)Rd(it.mesh,it.nodeModelMatrix,u,o);Z()}}},kf={line:function(u,t,o){if(u.hasElevatedBuckets=!1,u.hasNonElevatedBuckets=!1,u._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||u._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(t){const d=t.getVisibleCoordinates();for(const v of d){const b=t.getTile(v).getBucket(u);if(b&&(b.hasZOffset?u.hasElevatedBuckets=!0:u.hasNonElevatedBuckets=!0,u.hasElevatedBuckets&&u.hasNonElevatedBuckets))break}}}else u.hasNonElevatedBuckets=!0},model:function(u,t,o){const d=t.getSource();if(!d.loaded())return;if(d.type==="vector"||d.type==="geojson")return void(o.modelManager&&o.modelManager.upload(o,d.type==="vector"?u.scope:""));if(d.type==="batched-model"||d.type!=="model")return;const v=d.getModels();for(const b of v)b.upload(o.context)},raster:function(u,t,o){const d=t.getSource();if(!(d instanceof Xo&&d.loaded()))return;const v=u.sourceLayer||d.rasterLayerIds&&d.rasterLayerIds[0];if(!v)return;const b=u.paint.get("raster-array-band")||d.getInitialBand(v);if(b==null)return;const A=t.getIds().map(k=>t.getTileByID(k));for(const k of A)k.updateNeeded(v,b)&&d.prepareTile(k,v,b)},"raster-particle":function(u,t,o){const d=t.getSource();if(!(d instanceof Xo&&d.loaded()))return;const v=u.sourceLayer||d.rasterLayerIds&&d.rasterLayerIds[0];if(!v)return;const b=u.paint.get("raster-particle-array-band")||d.getInitialBand(v);if(b==null)return;const A=t.getIds().map(k=>t.getTileByID(k));for(const k of A)k.updateNeeded(v,b)&&d.prepareTile(k,v,b)}};class bd{constructor(t,o,d,v,b){this.context=new _d(t,o),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=b,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const A=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const Z of A)this._debugParams.enabledLayers[Z]=!0;b.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),b.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),b.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),b.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),b.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),b.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const Z of A)b.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],Z);this.occlusionParams=new Lf(b),this.setup(),this.numSublayers=No.maxUnderzooming+No.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dv,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Ii(this),this._wireframeDebugCache=new ip,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const k=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,k,t.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=v}updateTerrain(t,o){const d=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(d||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new al(this,t));const v=this._terrain;this.transform.elevation=d?v:null,v.update(t,this.transform,o),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(t){const o=t.fog;if(!o||this.transform.projection.name==="globe"||o.getOpacity(this.transform.pitch)<1||o.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[d,v]=o.getFovAdjustedRange(this.transform._fov);if(d>v)return void(this.transform.fogCullDistSq=null);const b=d+.78*(v-d);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(t){t&&!this._terrain&&(this._terrain=new al(this,this.style)),this._forceTerrainMode=t}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(t,o){if(this.width=t*n.q.devicePixelRatio,this.height=o*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style.order)this.style._mergedLayers[d].resize()}setup(){const t=this.context,o=new n.b4;o.emplaceBack(0,0),o.emplaceBack(n.ag,0),o.emplaceBack(0,n.ag),o.emplaceBack(n.ag,n.ag),this.tileExtentBuffer=t.createVertexBuffer(o,n.b6.members),this.tileExtentSegments=n.b7.simpleSegment(0,0,4,2);const d=new n.b4;d.emplaceBack(0,0),d.emplaceBack(n.ag,0),d.emplaceBack(0,n.ag),d.emplaceBack(n.ag,n.ag),this.debugBuffer=t.createVertexBuffer(d,n.b6.members),this.debugSegments=n.b7.simpleSegment(0,0,4,5);const v=new n.b4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(v,n.b6.members),this.viewportSegments=n.b7.simpleSegment(0,0,4,2);const b=new n.aT;b.emplaceBack(0,0,0,0),b.emplaceBack(n.ag,0,n.ag,0),b.emplaceBack(0,n.ag,0,n.ag),b.emplaceBack(n.ag,n.ag,n.ag,n.ag),this.mercatorBoundsBuffer=t.createVertexBuffer(b,n.b9.members),this.mercatorBoundsSegments=n.b7.simpleSegment(0,0,4,2);const A=new n.aU;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(A);const k=new n.b5;for(const q of[0,1,3,2,0])k.emplaceBack(q);this.debugIndexBuffer=t.createIndexBuffer(k),this.emptyTexture=new n.T(t,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA8),this.identityMat=n.ab.mat4.create();const Z=this.context.gl;this.stencilClearMode=new Io({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,t.TRIANGLES,Ui.disabled,this.stencilClearMode,go.disabled,Mo.disabled,zu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,o,d){if(!o||this.currentStencilSource===o.id||!t.isTileClipped()||!d||d.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const Z of d)if(this._tileClippingMaskIDs[Z.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=o.id;const v=this.context,b=v.gl;this.nextStencilID+d.length>256&&this.clearStencil(),v.setColorMode(go.disabled),v.setDepthMode(Ui.disabled);const A=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of d){const Z=o.getTile(k),q=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:re,tileBoundsIndexBuffer:fe,tileBoundsSegments:pe}=this.getTileBoundsBuffers(Z);A.draw(this,b.TRIANGLES,Ui.disabled,new Io({func:b.ALWAYS,mask:0},q,255,b.KEEP,b.KEEP,b.REPLACE),go.disabled,Mo.disabled,zu(k.projMatrix),"$clipping",re,fe,pe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new Io({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const o=this.context.gl;return new Io({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(t){const o=this.context.gl,d=t.sort((A,k)=>k.overscaledZ-A.overscaledZ),v=d[d.length-1].overscaledZ,b=d[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const A={};for(let k=0;k<b;k++)A[k+v]=new Io({func:o.GEQUAL,mask:255},k+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=b,[A,d]}return[{[v]:Io.disabled},d]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new go([t.CONSTANT_COLOR,t.ONE,t.CONSTANT_COLOR,t.ONE],new n.aj(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?go.unblended:go.alphaBlended}colorModeForDrapableLayerRenderPass(t){const o=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new go([o.ONE,o.ONE_MINUS_SRC_ALPHA,o.CONSTANT_ALPHA,o.ONE_MINUS_SRC_ALPHA],new n.aj(0,0,0,t===void 0?0:t),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(t,o,d,v=!1){if(this.depthOcclusion)return new Ui(this.context.gl.GREATER,Ui.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!v)return Ui.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ui(d||this.context.gl.LEQUAL,o,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const t=this.context.gl,o=Math.ceil(this.width),d=Math.ceil(this.height),v=this.context.bindFramebuffer.get(),b=t.getParameter(t.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===o&&this.depthFBO.height===d||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),o!==0&&d!==0&&(this.depthFBO=new Fl(this.context,o,d,!1,"texture"),this.depthTexture=new n.T(this.context,{width:o,height:d,data:null},t.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(v),t.bindTexture(t.TEXTURE_2D,b),this.depthFBO&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),t.blitFramebuffer(0,0,o,d,0,0,o,d,t.DEPTH_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(t.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((t,o)=>t+o/this._fpsHistory.length,0))}render(t,o){const d=n.q.now();this._dt=d-this._timeStamp,this._timeStamp=d,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=t.map.repaint,this.style=t,this.options=o;const v=this.style._mergedLayers,b=!(!this.terrain||!this.terrain.enabled),A=()=>this.style._getOrder(b).filter(Yn=>{const Mr=v[Yn];return!(Mr.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Mr.type]});let k=A(),Z=!1,q=!1;for(const Yn of k){const Mr=v[Yn];Mr.type==="circle"&&(Z=!0),Mr.type==="symbol"&&(Mr.hasInitialOcclusionOpacityProperties?q=!0:Z=!0)}let re=k.map(Yn=>v[Yn]);const fe=this.style._mergedSourceCaches;this.imageManager=t.imageManager,this.modelManager=t.modelManager,this.symbolFadeChange=t.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let pe=0,Te=!1;for(const Yn in fe){const Mr=fe[Yn];Mr.used&&(Mr.prepare(this.context),Mr.getSource().usedInConflation&&++pe)}let et=!1;for(const Yn of re)Yn.isHidden(this.transform.zoom)||(Yn.type==="clip"&&(et=!0),this.prepareLayer(Yn));const We={},rt={},it={},kt={},qt={};for(const Yn in fe){const Mr=fe[Yn];We[Yn]=Mr.getVisibleCoordinates(),rt[Yn]=We[Yn].slice().reverse(),it[Yn]=Mr.getVisibleCoordinates(!0).reverse(),kt[Yn]=Mr.getShadowCasterCoordinates(),qt[Yn]=Mr.sortCoordinatesByDistance(We[Yn])}const Qt=Yn=>{const Mr=this.style.getLayerSourceCache(Yn);return Mr&&Mr.used?Mr.getSource():null};if(pe||et||this._clippingActiveLastFrame){const Yn=[],Mr=[];let ti=0;for(const ir of re)this.isSourceForClippingOrConflation(ir,Qt(ir))&&(Yn.push(ir),Mr.push(ti)),ti++;if(Yn&&(et||Yn.length>1)||this._clippingActiveLastFrame){et=!1;const ir=[];for(let Fr=0;Fr<Yn.length;Fr++){const Cr=Yn[Fr],xi=Mr[Fr],ri=this.style.getLayerSourceCache(Cr);if(!ri||!ri.used||!ri.getSource().usedInConflation&&Cr.type!=="clip")continue;let Kr=n.dx,mi=n.by.None;const gi=[];let Gi=!0;if(Cr.type==="clip"){Kr=xi;for(const Li of Cr.layout.get("clip-layer-types"))mi|=Li==="model"?n.by.Model:Li==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const Li of Cr.layout.get("clip-layer-scope"))gi.push(Li);Cr.isHidden(this.transform.zoom)?Gi=!1:et=!0}Gi&&ir.push({layer:Cr.fqid,cache:ri,order:Kr,clipMask:mi,clipScope:gi})}this.replacementSource.setSources(ir),Te=!0}}this._clippingActiveLastFrame=et,Te||this.replacementSource.clear(),this.conflationActive=Te,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Yn=0;Yn<re.length;Yn++){const Mr=re[Yn],ti=Mr.cutoffRange();if(this.longestCutoffRange=Math.max(ti,this.longestCutoffRange),ti>0){const ir=Qt(Mr);ir&&(this.minCutoffZoom=Math.max(ir.minzoom,this.minCutoffZoom)),Mr.minzoom&&(this.minCutoffZoom=Math.max(Mr.minzoom,this.minCutoffZoom))}Mr.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Yn),this._lastOcclusionLayer=Yn)}const vn=this.style&&this.style.fog;vn?(this._fogVisible=vn.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=vn.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(it),this.opaquePassCutoff=0,k=A(),re=k.map(Yn=>v[Yn]));const on=this._shadowRenderer;if(on){on.updateShadowParameters(this.transform,this.style.directionalLight);for(const Yn in fe)for(const Mr of We[Yn]){let ti={min:0,max:0};this.terrain&&(ti=this.terrain.getMinMaxForTile(Mr)||ti),on.addShadowReceiver(Mr.toUnwrapped(),ti.min,ti.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dw(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Uh(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const dn=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),nn=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(dn&&!this._snow&&(this._snow=new df(this)),!dn&&this._snow&&(this._snow.destroy(),delete this._snow),nn&&!this._rain&&(this._rain=new $d(this)),!nn&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Je.has(this.context.gl))return;this.renderPass="offscreen";for(const Yn of re){const Mr=t.getLayerSourceCache(Yn);if(!Yn.hasOffscreenPass()||Yn.isHidden(this.transform.zoom))continue;const ti=Mr?rt[Mr.id]:void 0;(Yn.type==="custom"||Yn.type==="raster"||Yn.type==="raster-particle"||Yn.isSky()||ti&&ti.length)&&this.renderLayer(this,Mr,Yn,ti)}this.depthRangeFor3D=[0,1-(re.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,kt)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Rn=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),$n=(()=>{if(o.showOverdrawInspector)return n.aj.black;const Yn=this.style.fog;if(Yn&&this.transform.projection.supportsFog){const Mr=this.style.getLut(Yn.scope);if(!Rn){const ti=Yn.properties.get("color-use-theme")==="none",ir=Yn.properties.get("color").toRenderColor(ti?null:Mr).toArray01();return new n.aj(...ir)}if(Rn){const ti=Yn.properties.get("space-color-use-theme")==="none",ir=Yn.properties.get("space-color").toRenderColor(ti?null:Mr).toArray01();return new n.aj(...ir)}}return n.aj.transparent})();if(this.context.clear({color:$n,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Rn&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const Yn=re[this.currentLayer],Mr=t.getLayerSourceCache(Yn);if(Yn.isSky())continue;const ti=Mr?(Yn.is3D()?qt:rt)[Mr.id]:void 0;this._renderTileClippingMasks(Yn,Mr,ti),this.renderLayer(this,Mr,Yn,ti)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Rn&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ae(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const Yn=re[this.currentLayer],Mr=t.getLayerSourceCache(Yn);Yn.isSky()&&this.renderLayer(this,Mr,Yn,Mr?rt[Mr.id]:void 0)}function Pr(Yn,Mr){let ti;return Mr&&(ti=(Yn.type==="symbol"?it:Yn.is3D()?qt:rt)[Mr.id]),ti}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<k.length;){const Yn=re[this.currentLayer];if(Yn.type==="raster"||Yn.type==="raster-particle"){const Mr=t.getLayerSourceCache(Yn);this.renderLayer(this,Mr,Yn,Pr(Yn,Mr))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let dr=0;on&&(dr=on.getShadowCastingLayerCount());let Or=!1,kr=-1;for(let Yn=0;Yn<k.length;++Yn){const Mr=re[Yn];Mr.isHidden(this.transform.zoom)||Mr.is3D()&&(kr=Yn)}for(q&&kr===-1&&(Z=!0);this.currentLayer<k.length;){const Yn=re[this.currentLayer],Mr=t.getLayerSourceCache(Yn);if(Yn.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Yn)){if(Yn.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(Z&&!Or&&this.terrain&&!this.transform.isOrthographic&&(Or=!0,this.blitDepth()),q&&kr!==-1&&this.currentLayer===kr+1&&!this.transform.isOrthographic&&this.blitDepth(),Yn.is3D()||this.terrain||this._renderTileClippingMasks(Yn,Mr,Mr?We[Mr.id]:void 0),this.renderLayer(this,Mr,Yn,Pr(Yn,Mr)),!this.terrain&&on&&dr>0&&Yn.hasShadowPass()&&--dr==0&&(on.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const ti=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=ti;this.currentLayer++){const ir=re[this.currentLayer];if(!ir.hasLightBeamPass())continue;const Fr=t.getLayerSourceCache(ir);this.renderLayer(this,Fr,ir,Fr?rt[Fr.id]:void 0)}this.currentLayer=ti,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const ti=this.currentLayer;this.depthOcclusion=!0;for(const ir of this.layersWithOcclusionOpacity){this.currentLayer=ir;const Fr=re[this.currentLayer],Cr=t.getLayerSourceCache(Fr),xi=Cr?rt[Cr.id]:void 0;Fr.is3D()||this.terrain||this._renderTileClippingMasks(Fr,Cr,Cr?We[Cr.id]:void 0),this.renderLayer(this,Cr,Fr,xi)}this.depthOcclusion=!1,this.currentLayer=ti,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Yn=null;re.forEach(Mr=>{const ti=t.getLayerSourceCache(Mr);ti&&!Mr.isHidden(this.transform.zoom)&&ti.getVisibleCoordinates().length&&(!Yn||Yn.getSource().maxzoom<ti.getSource().maxzoom)&&(Yn=ti)}),Yn&&this.options.showTileBoundaries&&Ld.debug(this,Yn,Yn.getVisibleCoordinates(),n.aj.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Ld.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.aj(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Yn){const Mr=Yn.transform.padding;rp(Yn,Yn.transform.height-(Mr.top||0),3,nh),rp(Yn,Mr.bottom||0,3,km),Ip(Yn,Mr.left||0,3,xh),Ip(Yn,Yn.transform.width-(Mr.right||0),3,Ud);const ti=Yn.transform.centerPoint;(function(ir,Fr,Cr,xi){xd(ir,Fr-1,Cr-10,2,20,xi),xd(ir,Fr-10,Cr-1,20,2,xi)})(Yn,ti.x,Yn.transform.height-ti.y,of)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),Te||(this.conflationActive=!1)}prepareLayer(t){this.gpuTimingStart(t);const{unsupportedLayers:o}=this.transform.projection,d=!o||!o.includes(t.type);if(kf[t.type]&&(d||this.terrain&&t.type==="custom")){const v=this.style.getLayerSourceCache(t);kf[t.type](t,v,this)}this.gpuTimingEnd()}renderLayer(t,o,d,v){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="sky"||d.type==="custom"||d.type==="model"||d.type==="raster"||d.type==="raster-particle"||v&&v.length)&&(this.id=d.id,this.gpuTimingStart(d),t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes(d.type)&&(!t.terrain||d.type!=="custom")||d.type==="clip"||Ld[d.type](t,o,d,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery,d=this.context.gl;let v=this.gpuTimers[t.id];v||(v=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:d.createQuery()}),v.calls++,d.beginQuery(o.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,o=this.context.gl,d=o.createQuery();this.deferredRenderGpuTimeQueries.push(d),o.beginQuery(t.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const o={};for(const d in t){const v=t[d],b=this.context.extTimerQuery,A=b.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;b.deleteQueryEXT(v.query),o[d]=A}return o}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const o=this.context.gl;let d=0;for(const v of t)d+=o.getQueryParameter(v,o.QUERY_RESULT)/1e6,o.deleteQuery(v);return d}translatePosMatrix(t,o,d,v,b){if(!d[0]&&!d[1])return t;const A=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(A){const q=Math.sin(A),re=Math.cos(A);d=[d[0]*re-d[1]*q,d[0]*q+d[1]*re]}const k=[b?d[0]:n.ar(o,d[0],this.transform.zoom),b?d[1]:n.ar(o,d[1],this.transform.zoom),0],Z=new Float32Array(16);return n.ab.mat4.translate(Z,t,k),Z}saveTileTexture(t){const o=t.size[0],d=this._tileTextures[o];d?d.push(t):this._tileTextures[o]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(t,o,d){const v=d===void 0?this.terrain&&this.terrain.renderingToTexture:d,b=[];return this.style&&this.style.enable3dLights()&&(t==="globeRaster"||t==="terrainRaster"?(b.push("LIGHTING_3D_MODE"),b.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||b.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||b.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(b.push("TERRAIN"),this.linearFloatFilteringSupported()&&b.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&b.push("GLOBE"),!this._fogVisible||v||o!==void 0&&!o||b.push("FOG","FOG_DITHERING"),v&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}getOrCreateProgram(t,o){this.cache=this.cache||{};const d=o&&o.defines||[],v=o&&o.config,b=this.currentGlobalDefines(t,o&&o.overrideFog,o&&o.overrideRtt).concat(d),A=Hc.cacheKey(Wi[t],t,b,v);return this.cache[A]||(this.cache[A]=new Hc(this.context,t,Wi[t],v,is[t],b)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(t,o){if(this.style.enable3dLights()){const d=this.style.directionalLight,v=this.style.ambientLight;if(d&&v){const b=((A,k,Z)=>{const q=A.properties.get("direction"),re=A.properties.get("color-use-theme")==="none",fe=A.properties.get("color").toRenderColor(re?null:Z.getLut(A.scope)).toArray01(),pe=A.properties.get("intensity"),Te=k.properties.get("color-use-theme")==="none",et=k.properties.get("color").toRenderColor(Te?null:Z.getLut(k.scope)).toArray01(),We=k.properties.get("intensity"),rt=[q.x,q.y,q.z],it=n.cM(et,We),kt=n.cM(fe,pe);return{u_lighting_ambient_color:it,u_lighting_directional_dir:rt,u_lighting_directional_color:kt,u_ground_radiance:ml(rt,kt,it)}})(d,v,this.style);o.setLightsUniformValues(t,b)}}}uploadCommonUniforms(t,o,d,v,b){if(this.uploadCommonLightUniforms(t,o),this.terrain&&this.terrain.renderingToTexture)return;const A=this.style.fog;if(A){const k=A.getOpacity(this.transform.pitch),Z=((q,re,fe,pe,Te,et,We,rt,it,kt,qt,Qt)=>{const vn=q.transform,on=re.properties.get("color-use-theme")==="none",dn=re.properties.get("color").toRenderColor(on?null:q.style.getLut(re.scope)).toArray01();dn[3]=pe;const nn=q.frameCounter/1e3%1,[Rn,$n]=re.properties.get("vertical-range");return{u_fog_matrix:fe?vn.calculateFogTileMatrix(fe):Qt||q.identityMat,u_fog_range:re.getFovAdjustedRange(vn._fov),u_fog_color:dn,u_fog_horizon_blend:re.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Rn,$n),$n],u_fog_temporal_offset:nn,u_frustum_tl:Te,u_frustum_tr:et,u_frustum_br:We,u_frustum_bl:rt,u_globe_pos:it,u_globe_radius:kt,u_viewport:qt,u_globe_transition:n.ae(vn.zoom),u_is_globe:+(vn.projection.name==="globe")}})(this,A,d,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],v);o.setFogUniformValues(t,Z)}b&&o.setCutoffUniformValues(t,b.uniformValues)}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){const t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}canvasCopy(){const t=this.context.gl,o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),o}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&t.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const t=this._backgroundTiles,o=this._backgroundTiles={},d=this.transform.coveringTiles({tileSize:512});for(const v of d)o[v.key]=t[v.key]||new ua(v,512,this.transform.tileZoom,this);return o}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(t,o){return!(!t.is3D()||t.type!=="clip"&&(t.minzoom&&t.minzoom>this.transform.zoom||(this.style._clipLayerPresent||t.sourceLayer!=="building")&&(!o||o.type!=="batched-model")))}isTileAffectedByFog(t){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let o=this._cachedTileFogOpacities[t.key];return o||(this._cachedTileFogOpacities[t.key]=o=this.style.fog.getOpacityForTile(t)),o[0]>=jt||o[1]>=jt}setupDepthForOcclusion(t,o,d){const v=this.context,b=v.gl,A=!!d;var k;d||(d={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),v.activeTexture.set(b.TEXTURE3),t&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),d.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],d.u_depth_range_unpack=[2/((k=this.depthRangeFor3D)[1]-k[0]),-1-2*k[0]/(k[1]-k[0])],d.u_occluder_half_size=.5*this.occlusionParams.occluderSize,d.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),v.activeTexture.set(b.TEXTURE0),A||o.setTerrainUniformValues(v,d)}}function hf(u,t){let o=!1,d=null;const v=()=>{d=null,o&&(u(),d=setTimeout(v,t),o=!1)};return()=>(o=!0,d||v(),d)}class op{constructor(t){this._hashName=t&&encodeURIComponent(t),n.aP(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=hf(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const o=ih(t);if(this._hashName){const d=this._hashName;let v=!1;const b=location.hash.slice(1).split("&").map(A=>{const k=A.split("=")[0];return k===d?(v=!0,`${k}=${o}`):A}).filter(A=>A);return v||b.push(`${d}=${o}`),`#${b.join("&")}`}return`#${o}`}_getCurrentHash(){const t=location.hash.replace("#","");if(this._hashName){let o;return t.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(o=d)}),(o&&o[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const o=this._getCurrentHash();if(o.length>=3&&!o.some(d=>isNaN(d))){const d=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(o[3]||0):t.getBearing();return t.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:d,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function ih(u,t){const o=u.getCenter(),d=Math.round(100*u.getZoom())/100,v=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),A=Math.round(o.lng*b)/b,k=Math.round(o.lat*b)/b,Z=u.getBearing(),q=u.getPitch();let re=t?`/${A}/${k}/${d}`:`${d}/${k}/${A}`;return(Z||q)&&(re+="/"+Math.round(10*Z)/10),q&&(re+=`/${Math.round(q)}`),re}const ff={linearity:.3,easing:n.dy(0,0,.3,1)},Mp=n.l({deceleration:2500,maxSpeed:1400},ff),ap=n.l({deceleration:20,maxSpeed:1400},ff),wd=n.l({deceleration:1e3,maxSpeed:360},ff),pf=n.l({deceleration:1e3,maxSpeed:90},ff);class Nf{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=n.q.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const o={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)o.zoom+=b.zoomDelta||0,o.bearing+=b.bearingDelta||0,o.pitch+=b.pitchDelta||0,b.panDelta&&o.pan._add(b.panDelta),b.around&&(o.around=b.around),b.pinchAround&&(o.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(o.pan.mag()){const b=_f(o.pan.mag(),d,n.l({},Mp,t||{}));v.offset=o.pan.mult(b.amount/o.pan.mag()),v.center=this._map.transform.center,mf(v,b)}if(o.zoom){const b=_f(o.zoom,d,ap);v.zoom=this._map.transform.zoom+b.amount,mf(v,b)}if(o.bearing){const b=_f(o.bearing,d,wd);v.bearing=this._map.transform.bearing+n.aw(b.amount,-179,179),mf(v,b)}if(o.pitch){const b=_f(o.pitch,d,pf);v.pitch=this._map.transform.pitch+b.amount,mf(v,b)}if(v.zoom||v.bearing){const b=o.pinchAround===void 0?o.around:o.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function mf(u,t){(!u.duration||u.duration<t.duration)&&(u.duration=t.duration,u.easing=t.easing)}function _f(u,t,o){const{maxSpeed:d,linearity:v,deceleration:b}=o,A=n.aw(u*v/(t/1e3),-d,d),k=Math.abs(A)/(b*v);return{easing:o.easing,duration:1e3*k,amount:A*(k/2)}}class Jc extends n.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,d,v={}){const b=ye(o.getCanvasContainer(),d),A=o.unproject(b);super(t,n.l({point:b,lngLat:A,originalEvent:d},v)),this._defaultPrevented=!1,this.target=o}}class gf extends n.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,d){const v=t==="touchend"?d.changedTouches:d.touches,b=Se(o.getCanvasContainer(),v),A=b.map(Z=>o.unproject(Z)),k=b.reduce((Z,q,re,fe)=>Z.add(q.div(fe.length)),new n.P(0,0));super(t,{points:b,point:k,lngLats:A,lngLat:o.unproject(k),originalEvent:d}),this._defaultPrevented=!1}}class Nm extends n.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o){super("wheel",{originalEvent:o}),this._defaultPrevented=!1}}class lm{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new Nm(this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Jc(t.type,this._map,t))}mouseup(t){this._map.fire(new Jc(t.type,this._map,t))}preclick(t){const o=n.l({},t);o.type="preclick",this._map.fire(new Jc(o.type,this._map,o))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||(this.preclick(t),this._map.fire(new Jc(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new Jc(t.type,this._map,t))}mouseover(t){this._map.fire(new Jc(t.type,this._map,t))}mouseout(t){this._map.fire(new Jc(t.type,this._map,t))}touchstart(t){return this._firePreventable(new gf(t.type,this._map,t))}touchmove(t){this._map.fire(new gf(t.type,this._map,t))}touchend(t){this._map.fire(new gf(t.type,this._map,t))}touchcancel(t){this._map.fire(new gf(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cp{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new Jc(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Jc("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Jc(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class za{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(se(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const d=o,v=this._startPos,b=this._lastPos;if(!v||!b||b.equals(d)||!this._box&&d.dist(v)<this._clickTolerance)return;this._lastPos=d,this._box||(this._box=K("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const A=Math.min(v.x,d.x),k=Math.max(v.x,d.x),Z=Math.min(v.y,d.y),q=Math.max(v.y,d.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${A}px,${Z}px)`,this._box.style.width=k-A+"px",this._box.style.height=q-Z+"px")})}mouseupWindow(t,o){if(!this._active)return;const d=this._startPos,v=o;if(d&&t.button===0){if(this.reset(),ke(),d.x!==v.x||d.y!==v.y)return this._map.fire(new n.z("boxzoomend",{originalEvent:t})),{cameraAnimation:b=>b.fitScreenCoordinates(d,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Ee(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new n.z(t,{originalEvent:o}))}}function sp(u,t){const o={};for(let d=0;d<u.length;d++)o[u[d].identifier]=t[d];return o}class lp{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,o,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=t.timeStamp),d.length===this.numTouches&&(this.centroid=function(v){const b=new n.P(0,0);for(const A of v)b._add(A);return b.div(v.length)}(o),this.touches=sp(d,o)))}touchmove(t,o,d){if(this.aborted||!this.centroid)return;const v=sp(d,o);for(const b in this.touches){const A=v[b];(!A||A.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(t,o,d){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ap{constructor(t){this.singleTap=new lp(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,o,d){this.singleTap.touchstart(t,o,d)}touchmove(t,o,d){this.singleTap.touchmove(t,o,d)}touchend(t,o,d){const v=this.singleTap.touchend(t,o,d);if(v){const b=t.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(v)<30;if(b&&A||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class vl{constructor(){this._zoomIn=new Ap({numTouches:1,numTaps:2}),this._zoomOut=new Ap({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,d){this._zoomIn.touchstart(t,o,d),this._zoomOut.touchstart(t,o,d)}touchmove(t,o,d){this._zoomIn.touchmove(t,o,d),this._zoomOut.touchmove(t,o,d)}touchend(t,o,d){const v=this._zoomIn.touchend(t,o,d),b=this._zoomOut.touchend(t,o,d);return v?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()+1,around:A.unproject(v)},{originalEvent:t})}):b?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()-1,around:A.unproject(b)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const zm={0:1,2:2};class gu{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,o){return!1}_move(t,o){return{}}mousedown(t,o){if(this._lastPoint)return;const d=be(t);this._correctButton(t,d)&&(this._lastPoint=o,this._eventButton=d)}mousemoveWindow(t,o){const d=this._lastPoint;if(d){if(t.preventDefault(),this._eventButton!=null&&function(v,b){const A=zm[b];return v.buttons===void 0||(v.buttons&A)!==A}(t,this._eventButton))this.reset();else if(this._moved||!(o.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=o,this._move(d,o)}}mouseupWindow(t){this._lastPoint&&be(t)===this._eventButton&&(this._moved&&ke(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zf extends gu{mousedown(t,o){super.mousedown(t,o),this._lastPoint&&(this._active=!0)}_correctButton(t,o){return o===0&&!t.ctrlKey}_move(t,o){return{around:o,panDelta:o.sub(t)}}}class Ed extends gu{_correctButton(t,o){return o===0&&t.ctrlKey||o===2}_move(t,o){const d=.8*(o.x-t.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(t){t.preventDefault()}}class Eh extends gu{_correctButton(t,o){return o===0&&t.ctrlKey||o===2}_move(t,o){const d=-.5*(o.y-t.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(t){t.preventDefault()}}class Zs{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset(),n.aP(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(t,o,d){return this._calculateTransform(t,o,d)}touchmove(t,o,d){if(this._active&&!(d.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(d.length===1&&!n.dz())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,o,d)}}touchend(t,o,d){this._calculateTransform(t,o,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,d){d.length>0&&(this._active=!0);const v=sp(d,o),b=new n.P(0,0),A=new n.P(0,0);let k=0;for(const q in v){const re=v[q],fe=this._touches[q];fe&&(b._add(re),A._add(re.sub(fe)),k++,v[q]=re)}if(this._touches=v,k<this._minTouches||!A.mag())return;const Z=A.div(k);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:Z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=K("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Sd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,o,d){return{}}touchstart(t,o,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,d){const v=this._firstTwoTouches;if(!v)return;t.preventDefault();const[b,A]=v,k=xc(d,o,b),Z=xc(d,o,A);if(!k||!Z)return;const q=this._aroundCenter?null:k.add(Z).div(2);return this._move([k,Z],q,t)}touchend(t,o,d){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,A=xc(d,o,v),k=xc(d,o,b);A&&k||(this._active&&ke(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function xc(u,t,o){for(let d=0;d<u.length;d++)if(u[d].identifier===o)return t[d]}function oh(u,t){return Math.log(u/t)/Math.LN2}class up extends Sd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const d=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(oh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oh(this._distance,d),pinchAround:o}}}function Pp(u,t){return 180*u.angleWith(t)/Math.PI}class cp extends Sd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o){const d=this._vector;if(this._vector=t[0].sub(t[1]),d&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Pp(this._vector,d),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,d=this._startVector;if(!d)return!1;const v=Pp(t,d);return Math.abs(v)<o}}function Op(u){return Math.abs(u.y)>Math.abs(u.x)}class um extends Sd{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Op(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,d){const v=this._lastPoints;if(!v)return;const b=t[0].sub(v[0]),A=t[1].sub(v[1]);return this._map._cooperativeGestures&&!n.dz()&&d.touches.length<3||(this._valid=this.gestureBeginsVertically(b,A,d.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(b.y+A.y)/2*-.5})}gestureBeginsVertically(t,o,d){if(this._valid!==void 0)return this._valid;const v=t.mag()>=2,b=o.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove==null&&(this._firstMove=d),d-this._firstMove<100&&void 0;const A=t.y>0==o.y>0;return Op(t)&&Op(o)&&A}}const Rp={panStep:100,bearingStep:15,pitchStep:10};class ah{constructor(){const t=Rp;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,d=0,v=0,b=0,A=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?d=-1:(t.preventDefault(),b=-1);break;case 39:t.shiftKey?d=1:(t.preventDefault(),b=1);break;case 38:t.shiftKey?v=1:(t.preventDefault(),A=-1);break;case 40:t.shiftKey?v=-1:(t.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(d=0,v=0),{cameraAnimation:k=>{const Z=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:$h,zoom:o?Math.round(Z)+o*(t.shiftKey?2:1):Z,bearing:k.getBearing()+d*this._bearingStep,pitch:k.getPitch()+v*this._pitchStep,offset:[-b*this._panStep,-A*this._panStep],center:k.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $h(u){return u*(2-u)}const Zh=4.000244140625,Ru=1/450;class su{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._handler=o,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ru,n.aP(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||n.dz()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const d=n.q.now(),v=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,o!==0&&o%Zh==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=o,this._timeout=window.setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(v*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=ye(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:o,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform;this._type==="wheel"&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const o=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Zh?this._wheelZoomRate:this._defaultZoomRate;let re=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&re!==0&&(re=1/re);const fe=o(),pe=Math.pow(2,fe),Te=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):pe;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(Te*re))),this._type==="wheel"&&(this._startZoom=fe,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:o(),v=this._startZoom,b=this._easing;let A,k=!1;if(this._type==="wheel"&&v&&b){const q=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),re=b(q);A=n.af(v,d,re),q<1?this._frameId||(this._frameId=!0):k=!0}else A=d,k=!0;this._active=!0,k&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let Z=A-o();return Z*this._lastDelta<0&&(Z=0),{noInertia:!0,needsRenderFrame:!k,zoomDelta:Z,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=n.dA;if(this._prevEase){const d=this._prevEase,v=(n.q.now()-d.start)/d.duration,b=d.easing(v+.01)-d.easing(v),A=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-A*A);o=n.dy(A,k,.25,1)}return this._prevEase={start:n.q.now(),duration:t,easing:o},o}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=K("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Sh{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zd{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,o){return t.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(t.shiftKey?-1:1),around:d.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sh{constructor(){this._tap=new Ap({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,o,d){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=o[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(t,o,d))}touchmove(t,o,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const v=o[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,t.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(t,o,d)}touchend(t,o,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(t,o,d)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fm{constructor(t,o,d){this._el=t,this._mousePan=o,this._touchPan=d}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bm{constructor(t,o,d){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=o,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class cm{constructor(t,o,d,v){this._el=t,this._touchZoom=o,this._touchRotate=d,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const vf=u=>u.zoom||u.drag||u.pitch||u.rotate;class Wh extends n.z{}class bc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,o){const d=n.ab.vec3.sub([],o,t);this.radius=n.ab.vec3.length(d[2]<0?n.ab.vec3.div([],d,this.constants):[d[0],d[1],0])}projectRay(t){n.ab.vec3.div(t,t,this.constants),n.ab.vec3.normalize(t,t),n.ab.vec3.mul(t,t,this.constants);const o=n.ab.vec3.scale([],t,this.radius);if(o[2]>0){const d=n.ab.vec3.scale([],[0,0,1],n.ab.vec3.dot(o,[0,0,1])),v=n.ab.vec3.scale([],n.ab.vec3.normalize([],[o[0],o[1],0]),this.radius),b=n.ab.vec3.add([],o,n.ab.vec3.scale([],n.ab.vec3.sub([],n.ab.vec3.add([],v,d),o),2));o[0]=b[0],o[1]=b[1]}return o}}function lh(u){return u.panDelta&&u.panDelta.mag()||u.zoomDelta||u.bearingDelta||u.pitchDelta}class Lp{constructor(t,o){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nf(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new bc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(o),n.aP(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,A]of this._listeners){const k=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(b,k,A)}}destroy(){for(const[t,o,d]of this._listeners){const v=t===document?this.handleWindowEvent:this.handleEvent;t.removeEventListener(o,v,d)}}_addDefaultHandlers(t){const o=this._map,d=o.getCanvasContainer();this._add("mapEvent",new lm(o,t));const v=o.boxZoom=new za(o,t);this._add("boxZoom",v);const b=new vl,A=new Zd;o.doubleClickZoom=new Sh(A,b),this._add("tapZoom",b),this._add("clickZoom",A);const k=new sh;this._add("tapDragZoom",k);const Z=o.touchPitch=new um(o);this._add("touchPitch",Z);const q=new Ed(t),re=new Eh(t);o.dragRotate=new Bm(t,q,re),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",re,["mouseRotate"]);const fe=new zf(t),pe=new Zs(o,t);o.dragPan=new Fm(d,fe,pe),this._add("mousePan",fe),this._add("touchPan",pe,["touchZoom","touchRotate"]);const Te=new cp,et=new up;o.touchZoomRotate=new cm(d,et,Te,k),this._add("touchRotate",Te,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Cp(o));const We=o.scrollZoom=new su(o,this);this._add("scrollZoom",We,["mousePan"]);const rt=o.keyboard=new ah;this._add("keyboard",rt);for(const it of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[it]&&o[it].enable(t[it])}_add(t,o,d){this._handlers.push({handlerName:t,handler:o,allowed:d}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,o,d){for(const v in t)if(v!==d&&(!o||o.indexOf(v)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const o=[];for(const d of t)this._el.contains(d.target)&&o.push(d);return o}handleEvent(t,o){this._updatingCamera=!0;const d=t.type==="renderFrame",v=d?void 0:t,b={needsRenderFrame:!1},A={},k={},Z=t.touches?this._getMapTouches(t.touches):void 0,q=Z?Se(this._el,Z):d?void 0:ye(this._el,t);for(const{handlerName:pe,handler:Te,allowed:et}of this._handlers){if(!Te.isEnabled())continue;let We;this._blockedByActive(k,et,pe)?Te.reset():Te[o||t.type]&&(We=Te[o||t.type](t,q,Z),this.mergeHandlerResult(b,A,We,pe,v),We&&We.needsRenderFrame&&this._triggerRenderFrame()),(We||Te.isActive())&&(k[pe]=Te)}const re={};for(const pe in this._previousActiveHandlers)k[pe]||(re[pe]=v);this._previousActiveHandlers=k,(Object.keys(re).length||lh(b))&&(this._changes.push([b,A,re]),this._triggerRenderFrame()),(Object.keys(k).length||lh(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:fe}=b;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))}mergeHandlerResult(t,o,d,v,b){if(!d)return;n.l(t,d);const A={handlerName:v,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(o.zoom=A),d.panDelta!==void 0&&(o.drag=A),d.pitchDelta!==void 0&&(o.pitch=A),d.bearingDelta!==void 0&&(o.rotate=A)}_applyChanges(){const t={},o={},d={};for(const[v,b,A]of this._changes)v.panDelta&&(t.panDelta=(t.panDelta||new n.P(0,0))._add(v.panDelta)),v.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(t.around=v.around),v.aroundCoord!==void 0&&(t.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(t.pinchAround=v.pinchAround),v.noInertia&&(t.noInertia=v.noInertia),n.l(o,b),n.l(d,A);this._updateMapTransform(t,o,d),this._changes=[]}_updateMapTransform(t,o,d){const v=this._map,b=v.transform,A=kt=>[kt.x,kt.y,kt.z];if((kt=>{const qt=this._eventsInProgress.drag;return qt&&!this._handlersById[qt.handlerName].isActive()})()&&!lh(t)){const kt=b.zoom;b.cameraElevationReference="sea",this._originalZoom!=null&&b._orthographicProjectionAtLowPitch&&b.projection.name!=="globe"&&b.pitch===0?(b.cameraElevationReference="ground",b.zoom=this._originalZoom):(b.recenterOnTerrain(),b.cameraElevationReference="ground"),kt!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&v._stop(!0),!lh(t))return void this._fireEvents(o,d,!0);let{panDelta:k,zoomDelta:Z,bearingDelta:q,pitchDelta:re,around:fe,aroundCoord:pe,pinchAround:Te}=t;b._isCameraConstrained&&(Z>0&&(Z=0),b._isCameraConstrained=!1),Te!==void 0&&(fe=Te),(Z||(kt=>o[kt]&&!this._eventsInProgress[kt])("drag"))&&fe&&(this._dragOrigin=A(b.pointCoordinate3D(fe)),this._originalZoom=b.zoom,this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",v._stop(!0),fe=fe||v.transform.centerPoint,q&&(b.bearing+=q),re&&(b.pitch+=re),b._updateCameraState();const et=[0,0,0];if(k)if(b.projection.name==="mercator"){const kt=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(fe).dir),qt=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(fe.sub(k)).dir);et[0]=qt[0]-kt[0],et[1]=qt[1]-kt[1]}else{const kt=b.pointCoordinate(fe);if(b.projection.name==="globe"){k=k.rotate(-b.angle);const qt=b._pixelsPerMercatorPixel/b.worldSize;et[0]=-k.x*n.dB(n.aS(kt.y))*qt,et[1]=-k.y*n.dB(b.center.lat)*qt}else{const qt=b.pointCoordinate(fe.sub(k));kt&&qt&&(et[0]=qt.x-kt.x,et[1]=qt.y-kt.y)}}const We=b.zoom,rt=[0,0,0];if(Z){const kt=A(pe||b.pointCoordinate3D(fe)),qt={dir:n.ab.vec3.normalize([],n.ab.vec3.sub([],kt,b._camera.position))};if(qt.dir[2]<0){const Qt=b.zoomDeltaToMovement(kt,Z);n.ab.vec3.scale(rt,qt.dir,Qt)}}const it=n.ab.vec3.add(et,et,rt);b._translateCameraConstrained(it),Z&&Math.abs(b.zoom-We)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,d,!0)}_fireEvents(t,o,d){const v=vf(this._eventsInProgress),b=vf(t),A={};for(const re in t){const{originalEvent:fe}=t[re];this._eventsInProgress[re]||(A[`${re}start`]=fe),this._eventsInProgress[re]=t[re]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const re in A)this._fireEvent(re,A[re]);b&&this._fireEvent("move",b.originalEvent);for(const re in t){const{originalEvent:fe}=t[re];this._fireEvent(re,fe)}const k={};let Z;for(const re in this._eventsInProgress){const{handlerName:fe,originalEvent:pe}=this._eventsInProgress[re];this._handlersById[fe].isActive()||(delete this._eventsInProgress[re],Z=o[fe]||pe,k[`${re}end`]=Z)}for(const re in k)this._fireEvent(re,k[re]);const q=vf(this._eventsInProgress);if(d&&(v||b)&&!q){this._updatingCamera=!0;const re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fe=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;re?(fe(re.bearing||this._map.getBearing())&&(re.bearing=0),this._map.easeTo(re,{originalEvent:Z})):(this._map.fire(new n.z("moveend",{originalEvent:Z})),fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new n.z(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{this._frameId=void 0,this.handleEvent(new Wh("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Dp="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class yf extends n.E{constructor(t,o){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=o.bearingSnap,this._respectPrefersReducedMotion=o.respectPrefersReducedMotion!==!1,n.aP(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}panBy(t,o,d){return t=n.P.convert(t).mult(-1),this.panTo(this.transform.center,n.l({offset:t},o),d)}panTo(t,o,d){return this.easeTo(n.l({center:t},o),d)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,d){return this.easeTo(n.l({zoom:t},o),d)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,d){return this.easeTo(n.l({bearing:t},o),d)}resetNorth(t,o){return this.rotateTo(0,n.l({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}cameraForBounds(t,o){t=n.az.convert(t);const d=o&&o.bearing||0,v=o&&o.pitch||0,b=t.getNorthWest(),A=t.getSouthEast();return this._cameraForBounds(this.transform,b,A,d,v,o)}_extendPadding(t){const o={top:0,right:0,bottom:0,left:0};return t==null?n.l({},o,this.transform.padding):typeof t=="number"?{top:t,bottom:t,right:t,left:t}:n.l({},o,t)}_extendCameraOptions(t){return(t=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding=this._extendPadding(t.padding),t}_minimumAABBFrustumDistance(t,o){const d=o.max[0]-o.min[0],v=o.max[1]-o.min[1];return d/v>t.aspect?d/(2*Math.tan(.5*t.fovX)*t.aspect):v/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(t,o,d,v,b,A){const k=t.clone(),Z=this._extendCameraOptions(A);k.bearing=v,k.pitch=b;const q=n.bO.convert(o),re=n.bO.convert(d),fe=.5*(q.lat+re.lat),pe=.5*(q.lng+re.lng),Te=n.dC(fe,pe),et=n.ab.vec3.normalize([],Te),We=n.ab.vec3.normalize([],n.ab.vec3.cross([],et,[0,1,0])),rt=n.ab.vec3.cross([],We,et),it=[We[0],We[1],We[2],0,rt[0],rt[1],rt[2],0,et[0],et[1],et[2],0,0,0,0,1],kt=[Te,n.dC(q.lat,q.lng),n.dC(re.lat,q.lng),n.dC(re.lat,re.lng),n.dC(q.lat,re.lng),n.dC(fe,q.lng),n.dC(fe,re.lng),n.dC(q.lat,pe),n.dC(re.lat,pe)];let qt=n.cd.fromPoints(kt.map(Cr=>[n.ab.vec3.dot(We,Cr),n.ab.vec3.dot(rt,Cr),n.ab.vec3.dot(et,Cr)]));const Qt=n.ab.vec3.transformMat4([],qt.center,it);n.ab.vec3.squaredLength(Qt)===0&&n.ab.vec3.set(Qt,0,0,1),n.ab.vec3.normalize(Qt,Qt),n.ab.vec3.scale(Qt,Qt,n.ax),k.center=n.dD(Qt);const vn=k.getWorldToCameraMatrix(),on=n.ab.mat4.invert(new Float64Array(16),vn);qt=n.cd.applyTransform(qt,n.ab.mat4.multiply([],vn,it));const dn=this._extendAABB(qt,k,Z,v);if(!dn)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");qt=dn,n.ab.vec3.transformMat4(Qt,Qt,vn);const nn=.5*(qt.max[2]-qt.min[2]),Rn=this._minimumAABBFrustumDistance(k,qt),$n=n.ab.vec3.scale([],[0,0,1],nn),Pr=n.ab.vec3.add($n,Qt,$n),dr=Rn+(k.pitch===0?0:n.ab.vec3.distance(Qt,Pr)),Or=k.globeCenterInViewSpace,kr=n.ab.vec3.sub([],Qt,[Or[0],Or[1],Or[2]]);n.ab.vec3.normalize(kr,kr),n.ab.vec3.scale(kr,kr,dr);const Yn=n.ab.vec3.add([],Qt,kr);n.ab.vec3.transformMat4(Yn,Yn,on);const Mr=n.ds/n.ax,ti=n.ab.vec3.length(Yn),ir=n.bH(Math.max(ti*Mr-n.ds,Number.EPSILON),0),Fr=Math.min(k.zoomFromMercatorZAdjusted(ir),Z.maxZoom);return Fr>.5*(n.c6+n.bY)?(k.setProjection({name:"mercator"}),k.zoom=Fr,this._cameraForBounds(k,o,d,v,b,A)):{center:k.center,zoom:Fr,bearing:v,pitch:b}}_extendAABB(t,o,d,v){const b=.5*((d.padding.left||0)+(d.padding.right||0)),A=.5*((d.padding.top||0)+(d.padding.bottom||0)),k=A,Z=b,q=b,re=A,fe=o.width-(Z+q),pe=o.height-(k+re),Te=n.ab.vec3.sub([],t.max,t.min),et=Math.min(fe/Te[0],pe/Te[1]),We=Math.min(o.scaleZoom(o.scale*et),d.maxZoom);if(isNaN(We))return null;const rt=o.scale/o.zoomScale(We),it=new n.cd([t.min[0]-Z*rt,t.min[1]-re*rt,t.min[2]],[t.max[0]+q*rt,t.max[1]+k*rt,t.max[2]]),kt=(typeof d.offset.x=="number"&&typeof d.offset.y=="number"?new n.P(d.offset.x,d.offset.y):n.P.convert(d.offset)).rotate(-n.ai(v));return it.center[0]-=kt.x*rt,it.center[1]+=kt.y*rt,it}queryTerrainElevation(t,o){const d=this.transform.elevation;return d?(o=n.l({},{exaggerated:!0},o),d.getAtPoint(n.aa.fromLngLat(t),null,o.exaggerated)):null}_cameraForBounds(t,o,d,v,b,A){if(t.projection.name==="globe")return this._cameraForBoundsOnGlobe(t,o,d,v,b,A);const k=t.clone(),Z=this._extendCameraOptions(A);k.bearing=v,k.pitch=b;const q=n.bO.convert(o),re=n.bO.convert(d),fe=new n.bO(q.lng,re.lat),pe=new n.bO(re.lng,q.lat),Te=k.project(q),et=k.project(re),We=this.queryTerrainElevation(q),rt=this.queryTerrainElevation(re),it=this.queryTerrainElevation(fe),kt=this.queryTerrainElevation(pe),qt=[[Te.x,Te.y,Math.min(We||0,rt||0,it||0,kt||0)],[et.x,et.y,Math.max(We||0,rt||0,it||0,kt||0)]];let Qt=n.cd.fromPoints(qt);const vn=k.getWorldToCameraMatrix(),on=n.ab.mat4.invert(new Float64Array(16),vn);Qt=n.cd.applyTransform(Qt,vn);const dn=this._extendAABB(Qt,k,Z,v);if(!dn)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Qt=dn;const nn=.5*n.ab.vec3.sub([],Qt.max,Qt.min)[2],Rn=this._minimumAABBFrustumDistance(k,Qt),$n=[0,0,1,0];n.ab.vec4.transformMat4($n,$n,vn),n.ab.vec4.normalize($n,$n);const Pr=n.ab.vec3.scale([],$n,Rn+nn),dr=n.ab.vec3.add([],Qt.center,Pr);n.ab.vec3.transformMat4(Qt.center,Qt.center,on),n.ab.vec3.transformMat4(dr,dr,on);const Or=k.unproject(new n.P(Qt.center[0],Qt.center[1])),kr=n.dE(k.projection,Or),Yn=Math.pow(2,kr),Mr=Math.min(k._zoomFromMercatorZ(dr[2]*k.pixelsPerMeter*Yn/k.worldSize),Z.maxZoom);return k.mercatorFromTransition&&Mr<.5*(n.c6+n.bY)?(k.setProjection({name:"globe"}),k.zoom=Mr,this._cameraForBounds(k,o,d,v,b,A)):{center:Or,zoom:Mr,bearing:v,pitch:b}}fitBounds(t,o,d){const v=this.cameraForBounds(t,o);return this._fitInternal(v,o,d)}fitScreenCoordinates(t,o,d,v,b){const A=n.P.convert(t),k=n.P.convert(o),Z=new n.P(Math.min(A.x,k.x),Math.min(A.y,k.y)),q=new n.P(Math.max(A.x,k.x),Math.max(A.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(A,k))return this;const re=this.transform.pointLocation3D(Z),fe=this.transform.pointLocation3D(q),pe=this.transform.pointLocation3D(new n.P(Z.x,q.y)),Te=this.transform.pointLocation3D(new n.P(q.x,Z.y)),et=[Math.min(re.lng,fe.lng,pe.lng,Te.lng),Math.min(re.lat,fe.lat,pe.lat,Te.lat)],We=[Math.max(re.lng,fe.lng,pe.lng,Te.lng),Math.max(re.lat,fe.lat,pe.lat,Te.lat)],rt=v&&v.pitch?v.pitch:this.getPitch(),it=this._cameraForBounds(this.transform,et,We,d,rt,v);return this._fitInternal(it,v,b)}_fitInternal(t,o,d){return t?(o=n.l(t,o)).linear?this.easeTo(o,d):this.flyTo(o,d):this}jumpTo(t,o){this.stop();const d=t.preloadOnly?this.transform.clone():this.transform;let v=!1,b=!1,A=!1;"zoom"in t&&d.zoom!==+t.zoom&&(v=!0,d.zoom=+t.zoom),t.center!==void 0&&(d.center=n.bO.convert(t.center)),"bearing"in t&&d.bearing!==+t.bearing&&(b=!0,d.bearing=+t.bearing),"pitch"in t&&d.pitch!==+t.pitch&&(A=!0,d.pitch=+t.pitch);const k=typeof t.padding=="number"?this._extendPadding(t.padding):t.padding;if(t.padding!=null&&!d.isPaddingEqual(k))if(t.retainPadding===!1){const Z=d.clone();Z.padding=k,d.setLocationAtPoint(d.center,Z.centerPoint)}else d.padding=k;return t.preloadOnly?(this._preloadTiles(d),this):(this.fire(new n.z("movestart",o)).fire(new n.z("move",o)),v&&this.fire(new n.z("zoomstart",o)).fire(new n.z("zoom",o)).fire(new n.z("zoomend",o)),b&&this.fire(new n.z("rotatestart",o)).fire(new n.z("rotate",o)).fire(new n.z("rotateend",o)),A&&this.fire(new n.z("pitchstart",o)).fire(new n.z("pitch",o)).fire(new n.z("pitchend",o)),this.fire(new n.z("moveend",o)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(Dp),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,o){const d=this.transform;if(!d.projection.supportsFreeCamera)return n.w(Dp),this;this.stop();const v=d.zoom,b=d.pitch,A=d.bearing;d.setFreeCameraOptions(t);const k=v!==d.zoom,Z=b!==d.pitch,q=A!==d.bearing;return this.fire(new n.z("movestart",o)).fire(new n.z("move",o)),k&&this.fire(new n.z("zoomstart",o)).fire(new n.z("zoom",o)).fire(new n.z("zoomend",o)),q&&this.fire(new n.z("rotatestart",o)).fire(new n.z("rotate",o)).fire(new n.z("rotateend",o)),Z&&this.fire(new n.z("pitchstart",o)).fire(new n.z("pitch",o)).fire(new n.z("pitchend",o)),this.fire(new n.z("moveend",o)),this}easeTo(t,o){this._stop(!1,t.easeId),((t=n.l({offset:[0,0],duration:500,easing:n.dA},t)).animate===!1||this._prefersReducedMotion(t))&&(t.duration=0);const d=this.transform,v=this.getZoom(),b=this.getBearing(),A=this.getPitch(),k=this.getPadding(),Z="zoom"in t?+t.zoom:v,q="bearing"in t?this._normalizeBearing(t.bearing,b):b,re="pitch"in t?+t.pitch:A,fe=this._extendPadding(t.padding),pe=n.P.convert(t.offset);let Te,et,We;if(d.projection.name==="globe"){const $n=n.aa.fromLngLat(d.center),Pr=pe.rotate(-d.angle);$n.x+=Pr.x/d.worldSize,$n.y+=Pr.y/d.worldSize;const dr=$n.toLngLat(),Or=n.bO.convert(t.center||dr);this._normalizeCenter(Or),Te=d.centerPoint.add(Pr),et=new n.P($n.x,$n.y).mult(d.worldSize),We=new n.P(n.at(Or.lng),n.aA(Or.lat)).mult(d.worldSize).sub(et)}else{Te=d.centerPoint.add(pe);const $n=d.pointLocation(Te),Pr=n.bO.convert(t.center||$n);this._normalizeCenter(Pr),et=d.project($n),We=d.project(Pr).sub(et)}const rt=d.zoomScale(Z-v);let it,kt;t.around&&(it=n.bO.convert(t.around),kt=d.locationPoint(it));const qt=this._zooming||Z!==v,Qt=this._rotating||b!==q,vn=this._pitching||re!==A,on=!d.isPaddingEqual(fe),dn=t.retainPadding===!1?d.clone():d,nn=$n=>Pr=>{if(qt&&($n.zoom=n.af(v,Z,Pr)),Qt&&($n.bearing=n.af(b,q,Pr)),vn&&($n.pitch=n.af(A,re,Pr)),on&&(dn.interpolatePadding(k,fe,Pr),Te=dn.centerPoint.add(pe)),it)$n.setLocationAtPoint(it,kt);else{const dr=$n.zoomScale($n.zoom-v),Or=Z>v?Math.min(2,rt):Math.max(.5,rt),kr=Math.pow(Or,1-Pr),Yn=$n.unproject(et.add(We.mult(Pr*kr)).mult(dr));$n.setLocationAtPoint($n.renderWorldCopies?Yn.wrap():Yn,Te)}return t.preloadOnly||this._fireMoveEvents(o),$n};if(t.preloadOnly){const $n=this._emulate(nn,t.duration,d);return this._preloadTiles($n),this}const Rn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=qt,this._rotating=Qt,this._pitching=vn,this._padding=on,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,Rn),this._ease(nn(d),$n=>{d.cameraElevationReference==="sea"&&d.recenterOnTerrain(),this._afterEase(o,$n)},t),this}_prepareEase(t,o,d={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),o||d.moving||this.fire(new n.z("movestart",t)),this._zooming&&!d.zooming&&this.fire(new n.z("zoomstart",t)),this._rotating&&!d.rotating&&this.fire(new n.z("rotatestart",t)),this._pitching&&!d.pitching&&this.fire(new n.z("pitchstart",t))}_fireMoveEvents(t){this.fire(new n.z("move",t)),this._zooming&&this.fire(new n.z("zoom",t)),this._rotating&&this.fire(new n.z("rotate",t)),this._pitching&&this.fire(new n.z("pitch",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const d=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new n.z("zoomend",t)),v&&this.fire(new n.z("rotateend",t)),b&&this.fire(new n.z("pitchend",t)),this.fire(new n.z("moveend",t))}flyTo(t,o){if(this._prefersReducedMotion(t)){const Cr=n.ay(t,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Cr,o)}this.stop(),t=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dA},t);const d=this.transform,v=this.getZoom(),b=this.getBearing(),A=this.getPitch(),k=this.getPadding(),Z="zoom"in t?n.aw(+t.zoom,d.minZoom,d.maxZoom):v,q="bearing"in t?this._normalizeBearing(t.bearing,b):b,re="pitch"in t?+t.pitch:A,fe=this._extendPadding(t.padding),pe=d.zoomScale(Z-v),Te=n.P.convert(t.offset);let et=d.centerPoint.add(Te);const We=d.pointLocation(et),rt=n.bO.convert(t.center||We);this._normalizeCenter(rt);const it=d.project(We),kt=d.project(rt).sub(it);let qt=t.curve;const Qt=Math.max(d.width,d.height),vn=Qt/pe,on=kt.mag();if("minZoom"in t){const Cr=n.aw(Math.min(t.minZoom,v,Z),d.minZoom,d.maxZoom),xi=Qt/d.zoomScale(Cr-v);qt=Math.sqrt(xi/on*2)}const dn=qt*qt;function nn(Cr){const xi=(vn*vn-Qt*Qt+(Cr?-1:1)*dn*dn*on*on)/(2*(Cr?vn:Qt)*dn*on);return Math.log(Math.sqrt(xi*xi+1)-xi)}function Rn(Cr){return(Math.exp(Cr)-Math.exp(-Cr))/2}function $n(Cr){return(Math.exp(Cr)+Math.exp(-Cr))/2}const Pr=nn(0);let dr=function(Cr){return $n(Pr)/$n(Pr+qt*Cr)},Or=function(Cr){return Qt*(($n(Pr)*(Rn(xi=Pr+qt*Cr)/$n(xi))-Rn(Pr))/dn)/on;var xi},kr=(nn(1)-Pr)/qt;if(Math.abs(on)<1e-6||!isFinite(kr)){if(Math.abs(Qt-vn)<1e-6)return this.easeTo(t,o);const Cr=vn<Qt?-1:1;kr=Math.abs(Math.log(vn/Qt))/qt,Or=function(){return 0},dr=function(xi){return Math.exp(Cr*qt*xi)}}t.duration="duration"in t?+t.duration:1e3*kr/("screenSpeed"in t?+t.screenSpeed/qt:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const Yn=b!==q,Mr=re!==A,ti=!d.isPaddingEqual(fe),ir=t.retainPadding===!1?d.clone():d,Fr=Cr=>xi=>{const ri=xi*kr,Kr=1/dr(ri);Cr.zoom=xi===1?Z:v+Cr.scaleZoom(Kr),Yn&&(Cr.bearing=n.af(b,q,xi)),Mr&&(Cr.pitch=n.af(A,re,xi)),ti&&(ir.interpolatePadding(k,fe,xi),et=ir.centerPoint.add(Te));const mi=xi===1?rt:Cr.unproject(it.add(kt.mult(Or(ri))).mult(Kr));return Cr.setLocationAtPoint(Cr.renderWorldCopies?mi.wrap():mi,et),Cr._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(o),Cr};if(t.preloadOnly){const Cr=this._emulate(Fr,t.duration,d);return this._preloadTiles(Cr),this}return this._zooming=!0,this._rotating=Yn,this._pitching=Mr,this._padding=ti,this._prepareEase(o,!1),this._ease(Fr(d),()=>this._afterEase(o),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(t){}_cancelRenderFrame(t){}_stop(t,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const d=this._onEaseEnd;this._onEaseEnd=void 0,d.call(this,o)}if(!t){const d=this.handlers;d&&d.stop(!1)}return this}_ease(t,o,d){d.animate===!1||d.duration===0?(t(1),o()):(this._easeStart=n.q.now(),this._easeOptions=d,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),o=this._onEaseFrame;o&&o(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,o){t=n.bF(t,-180,180);const d=Math.abs(t-o);return Math.abs(t-360-o)<d&&(t-=360),Math.abs(t+360-o)<d&&(t+=360),t}_normalizeCenter(t){const o=this.transform;if(o.maxBounds||o.projection.name!=="globe"&&!o.renderWorldCopies)return;const d=t.lng-o.center.lng;t.lng+=d>180?-360:d<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(t&&t.essential)}_emulate(t,o,d){const v=Math.ceil(15*o/1e3),b=[],A=t(d.clone());for(let k=0;k<=v;k++){const Z=A(k/v);b.push(Z.clone())}return b}_preloadTiles(t,o){}}class Ff{constructor(t={}){this.options=t,n.aP(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const o=this.options&&this.options.compact,d=t._getUIString("AttributionControl.ToggleAttribution");this._map=t,this._container=K("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=K("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",d);const v=K("span","mapboxgl-ctrl-icon",this._compactButton);return v.setAttribute("aria-hidden","true"),v.setAttribute("title",d),this._innerContainer=K("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),o===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(t){const d=o.reduce((v,b,A)=>(b.value&&(v+=`${b.key}=${b.value}${A<o.length-1?"&":""}`),v),"?");t.href=`${n.e.FEEDBACK_URL}/${d}#${ih(this._map,!0)}`,t.rel="noopener nofollow"}}_updateData(t){!t||t.sourceDataType!=="metadata"&&t.sourceDataType!=="visibility"&&t.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const o=this._map.style._mergedSourceCaches;for(const v in o){const b=o[v];if(b.used){const A=b.getSource();A.attribution&&t.indexOf(A.attribution)<0&&t.push(A.attribution)}}t.sort((v,b)=>v.length-b.length),t=t.filter((v,b)=>{for(let A=b+1;A<t.length;A++)if(t[A].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const d=t.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,t.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Uc{constructor(){n.aP(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=K("div","mapboxgl-ctrl");const o=K("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&t.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(Object.entries(t).length===0)return!0;for(const o in t){const d=t[o].getSource();if(d.hasOwnProperty("mapbox_logo")&&!d.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const o=t[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}}}class Td{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,d=o?this._queue.concat(o):this._queue;for(const v of d)if(v.id===t)return void(v.cancelled=!0)}run(t=0){const o=this._currentlyRunning=this._queue;this._queue=[];for(const d of o)if(!d.cancelled&&(d.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class xf{constructor(t){this.jumpTo(t)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const o=n.cB((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-o)+this._end*o}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,o,d){this._start=this.getValue(o),this._end=t,this._startTime=o,this._endTime=o+d}}const uh={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class Hh extends n.z{constructor(t,o,d,v){const{point:b,lngLat:A,originalEvent:k,target:Z}=t;super(t.type,{point:b,lngLat:A,originalEvent:k,target:Z}),this.preventDefault=()=>{t.preventDefault()},this.id=o,this.interaction=d,this.feature=v}}class bf{constructor(t){this.map=t,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(t,o){if(this.typeById.has(t))throw new Error(`Interaction id "${t}" already exists.`);const d=o.filter;let v=o.type;d&&this.filters.set(t,n.aZ(d)),v==="mouseover"&&(v="mouseenter"),v==="mouseout"&&(v="mouseleave");const b=this.interactionsByType.get(v)||new Map;v==="mouseenter"||v==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(t,o)):b.size===0&&this.map.on(v,this.handleType),b.size===0&&this.interactionsByType.set(v,b),b.set(t,o),this.typeById.set(t,v)}get(t){const o=this.typeById.get(t);if(!o)return;const d=this.interactionsByType.get(o);return d?d.get(t):void 0}remove(t){const o=this.typeById.get(t);if(!o)return;this.typeById.delete(t),this.filters.delete(t);const d=this.interactionsByType.get(o);d&&(d.delete(t),o==="mouseenter"||o==="mouseleave"?(this.delegatedInteractions.delete(t),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):d.size===0&&this.map.off(o,this.handleType))}queryTargets(t,o){const d=[];for(const[v,b]of o)b.target&&d.push({targetId:v,target:b.target,filter:this.filters.get(v)});return this.map.style.queryRenderedTargets(t,d,this.map.transform)}handleMove(t){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const o=this.queryTargets(t.point,Array.from(this.delegatedInteractions).reverse());o.length&&(t.type="mouseenter",this.handleType(t,o));const d=new Map;for(const[v,{feature:b}]of this.prevHoveredFeatures)this.hoveredFeatures.has(v)||d.set(b.id,b);d.size&&(t.type="mouseleave",this.handleType(t,Array.from(d.values())))}handleOut(t){const o=Array.from(this.hoveredFeatures.values()).map(({feature:d})=>d);o.length&&(t.type="mouseleave",this.handleType(t,o)),this.hoveredFeatures.clear()}handleType(t,o){const d=Array.from(this.interactionsByType.get(t.type)).reverse(),v=!!o;o=o||this.queryTargets(t.point,d);const b=t.type==="mouseenter";let A=!1;const k=new Set;for(const Z of o){for(const[q,re]of d){if(!re.target)continue;const fe=Z.variants?Z.variants[q]:null;if(fe){for(const pe of fe){if(Oo(pe,Z,k,q))continue;const Te=new n.cw(Z,pe),et=qa(pe,Z,q);v&&(Te.state=this.map.getFeatureState(Te));const We=b?this.prevHoveredFeatures.get(et):null,rt=new Hh(t,q,re,Te),it=We?We.stop:re.handler(rt);if(b&&this.hoveredFeatures.set(et,{feature:Z,stop:it}),it!==!1){A=!0;break}}if(A)break}}if(A)break}if(!A)for(const[Z,q]of d){const{handler:re,target:fe}=q;if(!fe&&re(new Hh(t,Z,q,null))!==!1)break}}}function Da(u,t){if(Array.isArray(u)&&Array.isArray(t)){const o=new Set(u),d=new Set(t);return o.size===d.size&&u.every(v=>d.has(v))}return n.bn(u,t)}const ch={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},jm={showCompass:!0,showZoom:!0,visualizePitch:!1};class dm{constructor(t,o,d=!1){this._clickTolerance=10,this.element=o,this.mouseRotate=new Ed({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,d&&(this.mousePitch=new Eh({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),n.aP(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener("mousedown",this.mousedown),o.addEventListener("touchstart",this.touchstart,{passive:!1}),o.addEventListener("touchmove",this.touchmove),o.addEventListener("touchend",this.touchend),o.addEventListener("touchcancel",this.reset)}down(t,o){this.mouseRotate.mousedown(t,o),this.mousePitch&&this.mousePitch.mousedown(t,o),se()}move(t,o){const d=this.map,v=this.mouseRotate.mousemoveWindow(t,o),b=v&&v.bearingDelta;if(b&&d.setBearing(d.getBearing()+b),this.mousePitch){const A=this.mousePitch.mousemoveWindow(t,o),k=A&&A.pitchDelta;k&&d.setPitch(d.getPitch()+k)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Ee(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(n.l({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),ye(this.element,t)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,ye(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){t.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Se(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){t.targetTouches.length!==1?this.reset():(this._lastPos=Se(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function dp(u,t,o){if(u=new n.bO(u.lng,u.lat),t){const d=new n.bO(u.lng-360,u.lat),v=new n.bO(u.lng+360,u.lat),b=360*Math.ceil(Math.abs(u.lng-o.center.lng)/360),A=o.locationPoint(u).distSqr(t),k=t.x<0||t.y<0||t.x>o.width||t.y>o.height;o.locationPoint(d).distSqr(t)<A&&(k||Math.abs(d.lng-o.center.lng)<b)?u=d:o.locationPoint(v).distSqr(t)<A&&(k||Math.abs(v.lng-o.center.lng)<b)&&(u=v)}for(;Math.abs(u.lng-o.center.lng)>180;){const d=o.locationPoint(u);if(d.x>=0&&d.y>=0&&d.x<=o.width&&d.y<=o.height)break;u.lng>o.center.lng?u.lng-=360:u.lng+=360}return u}const Wd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Qc extends n.E{constructor(t,o){if(super(),(t instanceof HTMLElement||o)&&(t=n.l({element:t},o)),n.aP(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=n.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=K("div");const b=41,A=27,k=de("svg",{display:"block",height:b*this._scale+"px",width:A*this._scale+"px",viewBox:`0 0 ${A} ${b}`},this._element),Z=de("radialGradient",{id:"shadowGradient"},de("defs",{},k));de("stop",{offset:"10%","stop-opacity":.4},Z),de("stop",{offset:"100%","stop-opacity":.05},Z),de("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},k),de("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},k),de("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},k),de("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},k),this._offset=n.P.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const d=this._element.classList;for(const b in Wd)d.remove(`mapboxgl-marker-anchor-${b}`);d.add(`mapboxgl-marker-anchor-${this._anchor}`);const v=t&&t.className?t.className.trim().split(/\s+/):[];d.add(...v),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=n.bO.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const o=t.code,d=t.charCode||t.keyCode;o!=="Space"&&o!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(t){const o=t.originalEvent.target,d=this._element;this._popup&&(o===d||d.contains(o))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,o=this._pos;if(!t||!o)return!1;const d=t.unproject(o),v=t.getFreeCameraOptions();if(!v.position)return!1;const b=v.position.toLngLat();return b.distanceTo(d)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const o=this._pos;if(!o||o.x<0||o.x>t.transform.width||o.y<0||o.y>t.transform.height)return void this._clearFadeTimer();const d=t.unproject(o);let v;t._showingGlobe()&&n.dH(t.transform,this._lngLat)?v=0:(v=1-t._queryFogOpacity(d),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const o=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${t.x}px,${t.y}px)
            ${Wd[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${o.x}px,${o.y}px)
        `}_calculateXYTransform(){const t=this._pos,o=this._map,d=this.getPitchAlignment();if(!o||!t||d!=="map")return"";if(!o._showingGlobe()){const Z=o.getPitch();return Z?`rotateX(${Z}deg)`:""}const v=n.c4(n.dI(o.transform,this._lngLat)),b=t.sub(n.dJ(o.transform)),A=Math.abs(b.x)+Math.abs(b.y);if(A===0)return"";const k=v/A;return`rotateX(${-b.y*k}deg) rotateY(${b.x*k}deg)`}_calculateZTransform(){const t=this._pos,o=this._map;if(!o||!t)return"";let d=0;const v=this.getRotationAlignment();if(v==="map")if(o._showingGlobe()){const b=o.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001)),A=o.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);d=n.c4(Math.atan2(A.y,A.x))-90}else d=-o.getBearing();else if(v==="horizon"){const b=n.ac(4,6,o.getZoom()),A=n.dJ(o.transform);A.y+=b*o.transform.height;const k=t.sub(A),Z=n.c4(Math.atan2(k.y,k.x));d=(Z>90?Z-270:Z+90)*(1-b)}return d+=this._rotation,d?`rotateZ(${d}deg)`:""}_update(t){cancelAnimationFrame(this._updateFrameId);const o=this._map;o&&(o.transform.renderWorldCopies&&(this._lngLat=dp(this._lngLat,this._pos,o.transform)),this._pos=o.project(this._lngLat),t===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),o._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(o._showingGlobe()||o.getTerrain()||o.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(t){return this._offset=n.P.convert(t),this._update(),this}addClassName(t){return this._element.classList.add(t),this}removeClassName(t){return this._element.classList.remove(t),this}toggleClassName(t){return this._element.classList.toggle(t)}_onMove(t){const o=this._map;if(!o)return;const d=this._pointerdownPos,v=this._positionDelta;if(d&&v){if(!this._isDragging){const b=this._clickTolerance||o._clickTolerance;if(t.point.dist(d)<b)return;this._isDragging=!0}this._pos=t.point.sub(v),this._lngLat=o.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.z("dragstart"))),this.fire(new n.z("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.z("dragend")),this._state="inactive"}_addDragHandler(t){const o=this._map,d=this._pos;o&&d&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(d),this._pointerdownPos=t.point,this._state="pending",o.on("mousemove",this._onMove),o.on("touchmove",this._onMove),o.once("mouseup",this._onUp),o.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const o=this._map;return o&&(t?(o.on("mousedown",this._addDragHandler),o.on("touchstart",this._addDragHandler)):(o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const yl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ld={maxWidth:100,unit:"metric"},dc={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},hp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Is=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function hm(u=new n.P(0,0),t="bottom"){if(typeof u=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(u,2)));switch(t){case"top":return new n.P(0,u);case"top-left":return new n.P(o,o);case"top-right":return new n.P(-o,o);case"bottom":return new n.P(0,-u);case"bottom-left":return new n.P(o,-o);case"bottom-right":return new n.P(-o,-o);case"left":return new n.P(u,0);case"right":return new n.P(-u,0)}return new n.P(0,0)}return u instanceof n.P||Array.isArray(u)?n.P.convert(u):n.P.convert(u[t]||[0,0])}return{version:j,supported:B.supported,setRTLTextPlugin:n.dK,getRTLTextPluginStatus:n.dL,Map:class extends yf{constructor(u){U.mark($.create);const t=u;if((u=n.l({},ch,u)).minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(u.antialias&&n.dF(window)&&(u.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new cr(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies),u),this._repaint=!!u.repaint,this._interactive=u.interactive,this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=u.crossSourceCollisions,this._collectResourceTiming=u.collectResourceTiming,this._language=this._parseLanguage(u.language),this._worldview=u.worldview,this._renderTaskQueue=new Td,this._domRenderTaskQueue=new Td,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aV(),this._locale=n.l({},uh,u.locale),this._clickTolerance=u.clickTolerance,this._cooperativeGestures=u.cooperativeGestures,this._performanceMetricsCollection=u.performanceMetricsCollection,this._tessellationStep=u.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=u.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new xf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=u.scaleFactor,this._requestManager=new nt(u.transformRequest,u.accessToken,u.testMode),this._silenceAuthErrors=!!u.testMode,this._contextCreateOptions=u.contextCreateOptions?Object.assign({},u.contextCreateOptions):{},typeof u.container=="string"){const o=document.getElementById(u.container);if(!o)throw new Error(`Container '${u.container.toString()}' not found.`);this._container=o}else{if(!(u.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),u.maxBounds&&this.setMaxBounds(u.maxBounds),this._spriteFormat=u.spriteFormat,n.aP(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new yc),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Lp(this,u),this._localFontFamily=u.localFontFamily,this._localIdeographFontFamily=u.localIdeographFontFamily,(u.style||!u.testMode)&&this.setStyle(u.style||n.e.DEFAULT_STYLE,{config:u.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),u.projection&&this.setProjection(u.projection),this.indoor=new I(this),u.hash&&(this._hash=new op(typeof u.hash=="string"&&u.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){t.center==null&&t.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch});const o=u.bounds;o&&(this.resize(),this.fitBounds(o,n.l({},u.fitBoundsOptions,{duration:0})))}this.resize(),u.attributionControl&&this.addControl(new Ff({customAttribution:u.customAttribution})),this._logoControl=new Uc,this.addControl(this._logoControl,u.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new n.z(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new n.z(`${o.dataType}dataloading`,o))}),this._interactions=new bf(this)}_getMapId(){return this._mapId}addControl(u,t){if(t===void 0&&(t=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new n.y(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=u.onAdd(this);this._controls.push(u);const d=this._controlPositions[t];return t.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this}removeControl(u){if(!u||!u.onRemove)return this.fire(new n.y(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(u);return t>-1&&this._controls.splice(t,1),u.onRemove(this),this}hasControl(u){return this._controls.indexOf(u)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(u){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const t=!this._moving;return t&&this.fire(new n.z("movestart",u)).fire(new n.z("move",u)),this.fire(new n.z("resize",u)),t&&this.fire(new n.z("moveend",u)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(u){return this.transform.setMaxBounds(n.az.convert(u)),this._update()}setMinZoom(u){if((u=u!=null?u:-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u?this.setZoom(u):this.fire(new n.z("zoomstart")).fire(new n.z("zoom")).fire(new n.z("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(u){if((u=u!=null?u:22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u?this.setZoom(u):this.fire(new n.z("zoomstart")).fire(new n.z("zoom")).fire(new n.z("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(u){if((u=u!=null?u:0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u?this.setPitch(u):this.fire(new n.z("pitchstart")).fire(new n.z("pitch")).fire(new n.z("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(u){if((u=u!=null?u:85)>85)throw new Error("maxPitch must be less than or equal to 85");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u?this.setPitch(u):this.fire(new n.z("pitchstart")).fire(new n.z("pitch")).fire(new n.z("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(u){return this._scaleFactor=u,this.painter.scaleFactor=u,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(t=>t.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(u){return this.transform.renderWorldCopies=u,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(u){return u==="auto"?navigator.language:Array.isArray(u)?u.length===0?void 0:u.map(t=>t==="auto"?navigator.language:t):u}setLanguage(u){const t=this._parseLanguage(u);if(!this.style||t===this._language)return this;this._language=t,this.style.reloadSources();for(const o of this._controls)o._setLanguage&&o._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(u){return this.style&&u!==this._worldview?(this._worldview=u,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(u){return this._lazyInitEmptyStyle(),u?typeof u=="string"&&(u={name:u}):u=null,this._useExplicitProjection=!!u,this._prioritizeAndUpdateProjection(u,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const u=this.transform,t=u.projection.name;let o;t==="globe"&&u.zoom>=n.bY?(u.setMercatorFromTransition(),o=!0):t==="mercator"&&u.zoom<n.bY&&(u.setProjection({name:"globe"}),o=!0),o&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(u,t){return this._updateProjection(u||t||{name:"mercator"})}_updateProjection(u){let t;return t=u.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(u),this.style.applyProjectionUpdate(),t&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(u){return this.transform.locationPoint3D(n.bO.convert(u))}unproject(u){return this.transform.pointLocation3D(n.P.convert(u))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(u,t,o){const d=v=>{let b=[];if(Array.isArray(t)){const A=t.filter(k=>this.getLayer(k));b=A.length?this.queryRenderedFeatures(v,{layers:A}):[]}else b=this.queryRenderedFeatures(v,{target:t});return b};if(u==="mouseenter"||u==="mouseover"){let v=!1;return{listener:o,targets:t,delegates:{mousemove:A=>{const k=d(A.point);k.length?v||(v=!0,o.call(this,new Jc(u,this,A.originalEvent,{features:k}))):v=!1},mouseout:()=>{v=!1}}}}if(u==="mouseleave"||u==="mouseout"){let v=!1;return{listener:o,targets:t,delegates:{mousemove:k=>{d(k.point).length?v=!0:v&&(v=!1,o.call(this,new Jc(u,this,k.originalEvent)))},mouseout:k=>{v&&(v=!1,o.call(this,new Jc(u,this,k.originalEvent)))}}}}{const v=b=>{const A=d(b.point);A.length&&(b.features=A,o.call(this,b),delete b.features)};return{listener:o,targets:t,delegates:{[u]:v}}}}on(u,t,o){if(typeof t=="function"||o===void 0)return super.on(u,t);if(typeof t=="string"&&(t=[t]),!this._areTargetsValid(t))return this;const d=this._createDelegatedListener(u,t,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(d);for(const v in d.delegates)this.on(v,d.delegates[v]);return this}once(u,t,o){if(typeof t=="function"||o===void 0)return super.once(u,t);if(typeof t=="string"&&(t=[t]),!this._areTargetsValid(t))return this;const d=this._createDelegatedListener(u,t,o);for(const v in d.delegates)this.once(v,d.delegates[v]);return this}off(u,t,o){if(typeof t=="function"||o===void 0)return super.off(u,t);if(typeof t=="string"&&(t=[t]),!this._areTargetsValid(t))return this;const d=this._delegatedListeners?this._delegatedListeners[u]:void 0;return d&&(v=>{for(let b=0;b<v.length;b++){const A=v[b];if(A.listener===o&&Da(A.targets,t)){for(const k in A.delegates)this.off(k,A.delegates[k]);return v.splice(b,1),this}}})(d),this}queryRenderedFeatures(u,t){if(!this.style)return[];if(u===void 0||u instanceof n.P||Array.isArray(u)||t!==void 0||(t=u,u=void 0),u=u||[[0,0],[this.transform.width,this.transform.height]],!t){const b=this.style.queryRenderedFeatures(u,void 0,this.transform),A=this.style.queryRenderedFeatureset(u,void 0,this.transform);return b.concat(A)}let o=!0;if(t.target&&(o=this._isTargetValid(t.target),o&&!t.layers))return this.style.queryRenderedFeatureset(u,t,this.transform);let d=!0;if(t.layers&&Array.isArray(t.layers)){for(const b of t.layers)if(!this._isValidId(b)){d=!1;break}if(d&&!t.target)return this.style.queryRenderedFeatures(u,t,this.transform)}let v=[];return d&&(v=v.concat(this.style.queryRenderedFeatures(u,t,this.transform))),o&&(v=v.concat(this.style.queryRenderedFeatureset(u,t,this.transform))),v}querySourceFeatures(u,t){return!u||typeof u=="string"&&!this._isValidId(u)?[]:this.style.querySourceFeatures(u,t)}isPointOnSurface(u){const{name:t}=this.transform.projection;return t!=="globe"&&t!=="mercator"&&n.w(`${t} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(u))}addInteraction(u,t){return this._interactions.add(u,t),this}removeInteraction(u){return this._interactions.remove(u),this}setStyle(u,t){return t=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},t),this.style&&u&&t.diff!==!1&&t.localFontFamily===this._localFontFamily&&t.localIdeographFontFamily===this._localIdeographFontFamily&&!t.config?(this.style._diffStyle(u,(o,d)=>{o?(n.w(`Unable to perform style diff: ${String(o.message||o.error||o)}. Rebuilding the style from scratch.`),this._updateStyle(u,t)):d&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._localFontFamily=t.localFontFamily,this._updateStyle(u,t))}_getUIString(u){const t=this._locale[u];if(t==null)throw new Error(`Missing UI string '${u}'`);return t}_updateStyle(u,t){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),u){const o=n.l({},t);t&&t.config&&(o.initialConfig=t.config,delete o.config),this.style=new ne(this,o).load(u),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ne(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(u){return u==null?(this.fire(new n.y(new Error("IDs can't be empty."))),!1):!n.cr(u)||(this.fire(new n.y(new Error(`IDs can't contain special symbols: "${u}".`))),!1)}_isTargetValid(u){return"featuresetId"in u?this._isValidId("importId"in u?u.importId:u.featuresetId):"layerId"in u&&this._isValidId(u.layerId)}_areTargetsValid(u){if(Array.isArray(u)){for(const t of u)if(!this._isValidId(t))return!1;return!0}return this._isTargetValid(u)}addSource(u,t){return this._isValidId(u)?(this._lazyInitEmptyStyle(),this.style.addSource(u,t),this._update(!0)):this}isSourceLoaded(u){return!!this._isValidId(u)&&!!this.style&&this.style._isSourceCacheLoaded(u)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(u,t,o){this._lazyInitEmptyStyle(),this.style.addSourceType(u,t,o)}removeSource(u){return this._isValidId(u)?(this.style.removeSource(u),this._updateTerrain(),this._update(!0)):this}getSource(u){return this._isValidId(u)?this.style.getOwnSource(u):null}addImage(u,t,{pixelRatio:o=1,sdf:d=!1,stretchX:v,stretchY:b,content:A}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||ImageBitmap&&t instanceof ImageBitmap){const{width:k,height:Z,data:q}=n.q.getImageData(t);this.style.addImage(u,{data:new n.r({width:k,height:Z},q),pixelRatio:o,stretchX:v,stretchY:b,content:A,sdf:d,version:0,usvg:!1})}else if(t.width===void 0||t.height===void 0)this.fire(new n.y(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:Z}=t,q=t;this.style.addImage(u,{data:new n.r({width:k,height:Z},new Uint8Array(q.data)),pixelRatio:o,stretchX:v,stretchY:b,content:A,sdf:d,usvg:!1,version:0,userImage:q}),q.onAdd&&q.onAdd(this,u)}}updateImage(u,t){this._lazyInitEmptyStyle();const o=this.style.getImage(u);if(!o)return void this.fire(new n.y(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=t instanceof HTMLImageElement||ImageBitmap&&t instanceof ImageBitmap?n.q.getImageData(t):t,{width:v,height:b,data:A}=d;if(v===void 0||b===void 0)return void this.fire(new n.y(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==(o.usvg?o.icon.usvg_tree.width:o.data.width)||b!==(o.usvg?o.icon.usvg_tree.height:o.data.height))return void this.fire(new n.y(new Error(`The width and height of the updated image (${v}, ${b})
                must be that same as the previous version of the image
                (${o.data.width}, ${o.data.height})`)));const k=!(t instanceof HTMLImageElement||ImageBitmap&&t instanceof ImageBitmap);let Z=!1;o.usvg?(o.data=new n.r({width:v,height:b},new Uint8Array(A)),o.usvg=!1,o.icon=void 0,Z=!0):o.data.replace(A,k),this.style.updateImage(u,o,Z)}hasImage(u){return u?!!this.style&&!!this.style.getImage(u):(this.fire(new n.y(new Error("Missing required image id"))),!1)}removeImage(u){this.style.removeImage(u)}loadImage(u,t){n.o(this._requestManager.transformRequest(u,n.R.Image),(o,d)=>{t(o,d instanceof HTMLImageElement?n.q.getImageData(d):d)})}listImages(){return this.style.listImages()}addModel(u,t){this._lazyInitEmptyStyle(),this.style.addModel(u,t)}hasModel(u){return u?this.style.hasModel(u):(this.fire(new n.y(new Error("Missing required model id"))),!1)}removeModel(u){this.style.removeModel(u)}listModels(){return this.style.listModels()}addLayer(u,t){return this._isValidId(u.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(u,t),this._update(!0)):this}getSlot(u){const t=this.getLayer(u);return t&&t.slot||null}setSlot(u,t){return this.style.setSlot(u,t),this.style.mergeLayers(),this._update(!0)}addImport(u,t){return this.style.addImport(u,t),this}updateImport(u,t){return typeof t!="string"&&t.id!==u?(this.removeImport(u),this.addImport(t)):(this.style.updateImport(u,t),this._update(!0))}removeImport(u){return this.style.removeImport(u),this}moveImport(u,t){return this.style.moveImport(u,t),this._update(!0)}moveLayer(u,t){return this._isValidId(u)?(this.style.moveLayer(u,t),this._update(!0)):this}removeLayer(u){return this._isValidId(u)?(this.style.removeLayer(u),this._update(!0)):this}getLayer(u){if(!this._isValidId(u))return null;const t=this.style.getOwnLayer(u);return t?t.type==="custom"?t.implementation:t.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(u,t,o){return this._isValidId(u)?(this.style.setLayerZoomRange(u,t,o),this._update(!0)):this}setFilter(u,t,o={}){return this._isValidId(u)?(this.style.setFilter(u,t,o),this._update(!0)):this}getFilter(u){return this._isValidId(u)?this.style.getFilter(u):null}setPaintProperty(u,t,o,d={}){return this._isValidId(u)?(this.style.setPaintProperty(u,t,o,d),this._update(!0)):this}getPaintProperty(u,t){return this._isValidId(u)?this.style.getPaintProperty(u,t):null}setLayoutProperty(u,t,o,d={}){return this._isValidId(u)?(this.style.setLayoutProperty(u,t,o,d),this._update(!0)):this}getLayoutProperty(u,t){return this._isValidId(u)?this.style.getLayoutProperty(u,t):null}getSchema(u){return this.style.getSchema(u)}setSchema(u,t){return this.style.setSchema(u,t),this._update(!0)}getConfig(u){return this.style.getConfig(u)}setConfig(u,t){return this.style.setConfig(u,t),this._update(!0)}getConfigProperty(u,t){return this.style.getConfigProperty(u,t)}setConfigProperty(u,t,o){return this.style.setConfigProperty(u,t,o),this._update(!0)}getFeaturesetDescriptors(u){return this.style.getFeaturesetDescriptors(u)}setLights(u){if(this._lazyInitEmptyStyle(),u&&u.length===1&&u[0].type==="flat"){const t=u[0];t.properties?this.style.setFlatLight(t.properties,t.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(u),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const u=this.style.getLights()||[];return u.length===0&&u.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),u}setLight(u,t={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:u}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(u){return this._lazyInitEmptyStyle(),!u&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(u),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(u){return this._lazyInitEmptyStyle(),this.style.setFog(u),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(u){return this._lazyInitEmptyStyle(),this.style.setSnow(u),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(u){return this._lazyInitEmptyStyle(),this.style.setRain(u),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(u){return this._lazyInitEmptyStyle(),this.style.setColorTheme(u),this._update(!0)}setImportColorTheme(u,t){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(u,t),this._update(!0)}setCamera(u){return this.style.setCamera(u),this._triggerCameraUpdate(u)}_triggerCameraUpdate(u){return this._update(this.transform.setOrthographicProjectionAtLowPitch(u["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(u){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(u),this.transform):0}setFeatureState(u,t){return u.source&&!this._isValidId(u.source)?this:(this.style.setFeatureState(u,t),this._update())}removeFeatureState(u,t){return u.source&&!this._isValidId(u.source)?this:(this.style.removeFeatureState(u,t),this._update())}getFeatureState(u){return u.source&&!this._isValidId(u.source)?null:this.style.getFeatureState(u)}_updateContainerDimensions(){if(!this._container)return;const u=this._container.getBoundingClientRect().width||400,t=this._container.getBoundingClientRect().height||300;let o,d,v,b=this._container;for(;b&&(!d||!v);){const A=window.getComputedStyle(b).transform;A&&A!=="none"&&(o=A.match(/matrix.*\((.+)\)/)[1].split(", "),o[0]&&o[0]!=="0"&&o[0]!=="1"&&(d=o[0]),o[3]&&o[3]!=="0"&&o[3]!=="1"&&(v=o[3])),b=b.parentElement}this._containerWidth=d?Math.abs(u/d):u,this._containerHeight=v?Math.abs(t/v):t}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=K("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=K("div","mapboxgl-canvas-container",u);this._canvas=K("canvas","mapboxgl-canvas",t),this._interactive&&(t.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const o=this._controlContainer=K("div","mapboxgl-control-container",u),d=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(v=>{d[v]=K("div",`mapboxgl-ctrl-${v}`,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(u,t){const o=n.q.devicePixelRatio||1;this._canvas.width=o*Math.ceil(u),this._canvas.height=o*Math.ceil(t),this._canvas.style.width=`${u}px`,this._canvas.style.height=`${t}px`}_addMarker(u){this._markers.push(u)}_removeMarker(u){const t=this._markers.indexOf(u);t!==-1&&this._markers.splice(t,1)}_addPopup(u){this._popups.push(u)}_removePopup(u){const t=this._popups.indexOf(u);t!==-1&&this._popups.splice(t,1)}_setupPainter(){const u=n.l({},B.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl2",u);t?(we(t,!0),this.painter=new bd(t,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",o=>{o.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(t)):this.fire(new n.y(new Error("Failed to initialize WebGL")))}_contextLost(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.z("webglcontextlost",{originalEvent:u}))}_contextRestored(u){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.z("webglcontextrestored",{originalEvent:u}))}_onMapScroll(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(u){return this._update(),this._renderTaskQueue.add(u)}_cancelRenderFrame(u){this._renderTaskQueue.remove(u)}_requestDomTask(u){!this.loaded()||this.loaded()&&!this.isMoving()?u():this._domRenderTaskQueue.add(u)}_render(u){let t;this.fire(new n.z("renderstart")),++this._frameId;const o=this.painter.context.extTimerQuery,d=n.q.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(t=v.createQuery(),v.beginQuery(o.TIME_ELAPSED_EXT,t)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(u),this._domRenderTaskQueue.run(u),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const q=this.transform.zoom,re=this.transform.pitch,fe=n.q.now(),pe=new n.a8(q,{now:fe,fadeDuration:b,pitch:re,transition:this.style.transition});this.style.update(pe)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let A=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),A=this._updateAverageElevation(d),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):A=this._updateAverageElevation(d);const k=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),k&&(this._placementDirty=k.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.z("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,U.mark($.load),this.fire(new n.z("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),t){const q=n.q.now()-d;v.endQuery(o.TIME_ELAPSED_EXT),setTimeout(()=>{const re=v.getQueryParameter(t,v.QUERY_RESULT)/1e6;v.deleteQuery(t),this.fire(new n.z("gpu-timing-frame",{cpuTime:q,gpuTime:re}))},50)}if(this.listens("gpu-timing-layer")){const q=this.painter.collectGpuTimers();setTimeout(()=>{const re=this.painter.queryGpuTimers(q);this.fire(new n.z("gpu-timing-layer",{layerTimes:re}))},50)}if(this.listens("gpu-timing-deferred-render")){const q=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const re=this.painter.queryGpuTimeDeferredRender(q);this.fire(new n.z("gpu-timing-deferred-render",{gpuTime:re}))},50)}const Z=this._sourcesDirty||this._styleDirty||this._placementDirty||A;if(Z||this._repaint)this.triggerRepaint();else{const q=this.idle();if(q&&(A=this._updateAverageElevation(d,!0)),A)this.triggerRepaint();else if(this._triggerFrame(!1),q&&(this.fire(new n.z("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const re=this._calculateSpeedIndex();this.fire(new n.z("speedindexcompleted",{speedIndex:re})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Z||(this._fullyLoaded=!0,U.mark($.fullLoad),this._performanceMetricsCollection&&ue(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(u){for(const t of this._markers)u&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!u||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(u,t=!1){const o=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&o(0);const d=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(d||(t||u-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(u)){const v=this.transform.averageElevation;let b=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=u;const A=Math.abs(v-b);if(A>1){if(this._isInitialLoad||d)return this._averageElevation.jumpTo(b),o(b);this._averageElevation.easeTo(b,u,300)}else if(A>1e-4)return this._averageElevation.jumpTo(b),o(b)}return!!this._averageElevation.isEasing(u)&&o(this._averageElevation.getValue(u))}_authenticate(){le(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,u=>{if(u&&(u.message===je||u.status===401)){const t=this.painter.context.gl;we(t,!1),this._logoControl instanceof Uc&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.y(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Qe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Ht(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const u=this._isDragging();this.painter.updateTerrain(this.style,u)}_calculateSpeedIndex(){const u=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const o=this.painter.context.gl,d=o.createFramebuffer();function v(b){o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,b,0);const A=new Uint8Array(o.drawingBufferWidth*o.drawingBufferHeight*4);return o.readPixels(0,0,o.drawingBufferWidth,o.drawingBufferHeight,o.RGBA,o.UNSIGNED_BYTE,A),A}return o.bindFramebuffer(o.FRAMEBUFFER,d),this._canvasPixelComparison(v(u),t.canvasCopies.map(v),t.timeStamps)}_canvasPixelComparison(u,t,o){let d=o[1]-o[0];const v=u.length/4;for(let b=0;b<t.length;b++){const A=t[b];let k=0;for(let Z=0;Z<A.length;Z+=4)A[Z]===u[Z]&&A[Z+1]===u[Z+1]&&A[Z+2]===u[Z+2]&&A[Z+3]===u[Z+3]&&(k+=1);d+=(o[b+2]-o[b+1])*(1-k/v)}return d}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Je.delete(this.painter.context.gl),lt.remove(),st.remove(),this._removed=!0,this.fire(new n.z("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(u){this._renderNextFrame=this._renderNextFrame||u,this.style&&!this._frame&&(this._frame=n.q.frame(t=>{const o=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,o&&this._render(t)}))}_preloadTiles(u){const t=this.style?this.style.getSourceCaches():[];return n.bl(t,(o,d)=>o._preloadTiles(u,d),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(u){this._trackResize&&this.resize({originalEvent:u})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(u){this._showParseStatus!==u&&(this._showParseStatus=u,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(u){this._showTerrainWireframe!==u&&(this._showTerrainWireframe=u,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(u){this._showLayers2DWireframe!==u&&(this._showLayers2DWireframe=u,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(u){this._showLayers3DWireframe!==u&&(this._showLayers3DWireframe=u,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(u){this._speedIndexTiming!==u&&(this._speedIndexTiming=u,this._update())}get showPadding(){return!!this._showPadding}set showPadding(u){this._showPadding!==u&&(this._showPadding=u,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,this._tp.refreshUI(),u?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(u){this._repaint!==u&&(this._repaint=u,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(u){this._vertices=u,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(u){this._showTileAABBs!==u&&(this._showTileAABBs=u,this._tp.refreshUI(),u&&this._update())}_setCacheLimits(u,t){n.dG(u,t)}get version(){return j}},NavigationControl:class{constructor(u={}){this.options=n.l({},jm,u),this._container=K("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(n.aP(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",t=>{this._map&&this._map.zoomIn({},{originalEvent:t})}),K("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",t=>{this._map&&this._map.zoomOut({},{originalEvent:t})}),K("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aP(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",t=>{const o=this._map;o&&(this.options.visualizePitch?o.resetNorthPitch({},{originalEvent:t}):o.resetNorth({},{originalEvent:t}))}),this._compassIcon=K("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const u=this._map;if(!u)return;const t=u.getZoom(),o=t===u.getMaxZoom(),d=t===u.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const u=this._map;if(!u)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(u.transform.pitch*(Math.PI/180)),.5)}) rotateX(${u.transform.pitch}deg) rotateZ(${u.transform.angle*(180/Math.PI)}deg)`:`rotate(${u.transform.angle*(180/Math.PI)}deg)`;u._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(u){return this._map=u,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),u.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&u.on("pitch",this._rotateCompassArrow),u.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dm(u,this._compass,this.options.visualizePitch)),this._container}onRemove(){const u=this._map;u&&(this._container.remove(),this.options.showZoom&&u.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&u.off("pitch",this._rotateCompassArrow),u.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(u,t){const o=K("button",u,this._container);return o.type="button",o.addEventListener("click",t),o}_setButtonTitle(u,t){if(!this._map)return;const o=this._map._getUIString(`NavigationControl.${t}`);u.setAttribute("aria-label",o),u.firstElementChild&&u.firstElementChild.setAttribute("title",o)}},GeolocateControl:class extends n.E{constructor(u={}){super();const t=navigator.geolocation;this.options=n.l({geolocation:t},yl,u),n.aP(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=hf(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(u){return this._map=u,this._container=K("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(u){const t=(o=!!this.options.geolocation)=>{this._supportsGeolocation=o,u(o)};this._supportsGeolocation!==void 0?u(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(o=>t(o.state!=="denied")).catch(()=>t()):t()}_isOutOfMapMaxBounds(u){const t=this._map.getMaxBounds(),o=u.coords;return!!t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new n.z("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.z("geolocate",u)),this._finish()}}_updateCamera(u){const t=new n.bO(u.coords.longitude,u.coords.latitude),o=u.coords.accuracy,d=this._map.getBearing(),v=n.l({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(o),v,{geolocateSource:!0})}_updateMarker(u){if(u){const t=new n.bO(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const u=this._map.transform,t=n.bH(1,u._center.lat)*u.worldSize,o=Math.ceil(2*this._accuracy*t);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.z("error",u)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(u){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=K("button","mapboxgl-ctrl-geolocate",this._container),K("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=K("div","mapboxgl-user-location"),this._dotElement.appendChild(K("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(K("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Qc({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=K("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||this._watchState!=="ACTIVE_LOCK"||t.originalEvent&&t.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.z("trackuserlocationend")))})}}_onDeviceOrientation(u){this._userLocationDotMarker&&(u.webkitCompassHeading?this._heading=u.webkitCompassHeading:u.absolute===!0&&(this._heading=-1*u.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.z("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.z("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.z("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(u={maximumAge:6e5,timeout:0},this._noTimeout=!0):(u=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,u),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const u=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent!="undefined"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(t=>{t==="granted"&&u()}).catch(console.error):u()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ff,ScaleControl:class{constructor(u={}){this.options=n.l({},ld,u),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(t){return!1}}(),n.aP(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const u=this.options.maxWidth||100,t=this._map,o=t._containerHeight/2,d=t._containerWidth/2-u/2,v=t.unproject([d,o]),b=t.unproject([d+u,o]),A=v.distanceTo(b);if(this.options.unit==="imperial"){const k=3.2808*A;k>5280?this._setScale(u,k/5280,"mile"):this._setScale(u,k,"foot")}else this.options.unit==="nautical"?this._setScale(u,A/1852,"nautical-mile"):A>=1e3?this._setScale(u,A/1e3,"kilometer"):this._setScale(u,A,"meter")}_setScale(u,t,o){this._map._requestDomTask(()=>{const d=function(b){const A=Math.pow(10,`${Math.floor(b)}`.length-1);let k=b/A;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(Z){const q=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*q)/q}(k),A*k}(t),v=d/t;this._container.innerHTML=this._isNumberFormatSupported&&o!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:o}).format(d):`${d}&nbsp;${dc[o]}`,this._container.style.width=u*v+"px"})}onAdd(u){return this._map=u,this._language=u.getLanguage(),this._container=K("div","mapboxgl-ctrl mapboxgl-ctrl-scale",u.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(u){this._language=u,this._update()}setUnit(u){this.options.unit=u,this._update()}},FullscreenControl:class{constructor(u={}){this._fullscreen=!1,u&&u.container&&(u.container instanceof HTMLElement?this._container=u.container:n.w("Full screen control 'container' must be a DOM element.")),n.aP(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=K("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const u=this._fullscreenButton=K("button","mapboxgl-ctrl-fullscreen",this._controlContainer);K("span","mapboxgl-ctrl-icon",u).setAttribute("aria-hidden","true"),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",u)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(u){super(),this.options=n.l(Object.create(hp),u),n.aP(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(u&&u.className?u.className.trim().split(/\s+/):[])}addTo(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&u.on("preclick",this._onClose),this.options.closeOnMove&&u.on("move",this._onClose),u.on("remove",this.remove),this._update(),u._addPopup(this),this._focusFirstElement(),this._trackPointer?(u.on("mousemove",this._onMouseEvent),u.on("mouseup",this._onMouseEvent),u._canvasContainer.classList.add("mapboxgl-track-pointer")):u.on("move",this._update),this.fire(new n.z("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const u=this._map;return u&&(u.off("move",this._update),u.off("move",this._onClose),u.off("preclick",this._onClose),u.off("click",this._onClose),u.off("remove",this.remove),u.off("mousemove",this._onMouseEvent),u.off("mouseup",this._onMouseEvent),u.off("drag",this._onMouseEvent),u._canvasContainer&&u._canvasContainer.classList.remove("mapboxgl-track-pointer"),u._removePopup(this),this._map=void 0),this.fire(new n.z("close")),this}getLngLat(){return this._lngLat}setLngLat(u){this._lngLat=n.bO.convert(u),this._pos=null,this._trackPointer=!1,this._update();const t=this._map;return t&&(t.on("move",this._update),t.off("mousemove",this._onMouseEvent),t._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const u=this._map;return u&&(u.off("move",this._update),u.on("mousemove",this._onMouseEvent),u.on("drag",this._onMouseEvent),u._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(u){return this.setDOMContent(document.createTextNode(u))}setHTML(u){const t=document.createDocumentFragment(),o=document.createElement("body");let d;for(o.innerHTML=u;d=o.firstChild,d;)t.appendChild(d);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(u){return this.options.maxWidth=u,this._update(),this}setDOMContent(u){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=K("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(u),this.options.closeButton){const o=this._closeButton=K("button","mapboxgl-popup-close-button",t);o.type="button",o.setAttribute("aria-label","Close popup"),o.innerHTML='<span aria-hidden="true">&#215;</span>',o.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(u){return this._classList.add(u),this._updateClassList(),this}removeClassName(u){return this._classList.delete(u),this._updateClassList(),this}setOffset(u){return this.options.offset=u,this._update(),this}toggleClassName(u){let t;return this._classList.delete(u)?t=!1:(this._classList.add(u),t=!0),this._updateClassList(),t}_onMouseEvent(u){this._update(u.point)}_getAnchor(u){if(this.options.anchor)return this.options.anchor;const t=this._map,o=this._container,d=this._pos;if(!t||!o||!d)return"bottom";const v=o.offsetWidth,b=o.offsetHeight,A=d.x<v/2,k=d.x>t.transform.width-v/2;if(d.y+u<b)return A?"top-left":k?"top-right":"top";if(d.y>t.transform.height-b){if(A)return"bottom-left";if(k)return"bottom-right"}return A?"left":k?"right":"bottom"}_updateClassList(){const u=this._container;if(!u)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),u.className=t.join(" ")}_update(u){const t=this._map,o=this._content;if(!t||!this._lngLat&&!this._trackPointer||!o)return;let d=this._container;if(d||(d=this._container=K("div","mapboxgl-popup",t.getContainer()),this._tip=K("div","mapboxgl-popup-tip",d),d.appendChild(o)),this.options.maxWidth&&d.style.maxWidth!==this.options.maxWidth&&(d.style.maxWidth=this.options.maxWidth),t.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=dp(this._lngLat,this._pos,t.transform)),!this._trackPointer||u){const v=this._pos=this._trackPointer&&u instanceof n.P?u:t.project(this._lngLat),b=hm(this.options.offset),A=this._anchor=this._getAnchor(b.y),k=hm(this.options.offset,A),Z=v.add(k).round();t._requestDomTask(()=>{this._container&&A&&(this._container.style.transform=`${Wd[A]} translate(${Z.x}px,${Z.y}px)`)})}if(!this._marker&&t._showingGlobe()){const v=n.dH(t.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const u=this._container.querySelector(Is);u&&u.focus()}_onClose(){this.remove()}_setOpacity(u){this._container&&(this._container.style.opacity=`${u}`),this._content&&(this._content.style.pointerEvents=u?"auto":"none")}},Marker:Qc,Style:ne,LngLat:n.bO,LngLatBounds:n.az,Point:n.P,MercatorCoordinate:n.aa,FreeCameraOptions:Wc,Evented:n.E,config:n.e,prewarm:n.dM,clearPrewarmedResources:n.dN,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(u){n.e.ACCESS_TOKEN=u},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(u){n.e.API_URL=u},get workerCount(){return n.dO.workerCount},set workerCount(u){n.dO.workerCount=u},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(u){n.e.MAX_PARALLEL_IMAGE_REQUESTS=u},clearStorage(u){n.dP(u)},get workerUrl(){return n.dQ.workerUrl},set workerUrl(u){n.dQ.workerUrl=u},get workerClass(){return n.dQ.workerClass},set workerClass(u){n.dQ.workerClass=u},get workerParams(){return n.dQ.workerParams},set workerParams(u){n.dQ.workerParams=u},get dracoUrl(){return n.dR()},set dracoUrl(u){n.dS(u)},get meshoptUrl(){return n.dT()},set meshoptUrl(u){n.dU(u)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var C=E;return C})},29981:function(H,Q,i){var E,M;(function(C,n){E=n,M=typeof E=="function"?E.call(Q,i,Q,H):E,M!==void 0&&(H.exports=M)})(this,function(){var C={};C.version="0.2.0";var n=C.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};C.configure=function(J){var ae,se;for(ae in J)se=J[ae],se!==void 0&&J.hasOwnProperty(ae)&&(n[ae]=se);return this},C.status=null,C.set=function(J){var ae=C.isStarted();J=j(J,n.minimum,1),C.status=J===1?null:J;var se=C.render(!ae),Ee=se.querySelector(n.barSelector),Le=n.speed,ke=n.easing;return se.offsetWidth,Y(function(ye){n.positionUsing===""&&(n.positionUsing=C.getPositioningCSS()),te(Ee,U(J,Le,ke)),J===1?(te(se,{transition:"none",opacity:1}),se.offsetWidth,setTimeout(function(){te(se,{transition:"all "+Le+"ms linear",opacity:0}),setTimeout(function(){C.remove(),ye()},Le)},Le)):setTimeout(ye,Le)}),this},C.isStarted=function(){return typeof C.status=="number"},C.start=function(){C.status||C.set(0);var J=function(){setTimeout(function(){C.status&&(C.trickle(),J())},n.trickleSpeed)};return n.trickle&&J(),this},C.done=function(J){return!J&&!C.status?this:C.inc(.3+.5*Math.random()).set(1)},C.inc=function(J){var ae=C.status;return ae?(typeof J!="number"&&(J=(1-ae)*j(Math.random()*ae,.1,.95)),ae=j(ae+J,0,.994),C.set(ae)):C.start()},C.trickle=function(){return C.inc(Math.random()*n.trickleRate)},function(){var J=0,ae=0;C.promise=function(se){return!se||se.state()==="resolved"?this:(ae===0&&C.start(),J++,ae++,se.always(function(){ae--,ae===0?(J=0,C.done()):C.set((J-ae)/J)}),this)}}(),C.render=function(J){if(C.isRendered())return document.getElementById("nprogress");B(document.documentElement,"nprogress-busy");var ae=document.createElement("div");ae.id="nprogress",ae.innerHTML=n.template;var se=ae.querySelector(n.barSelector),Ee=J?"-100":$(C.status||0),Le=document.querySelector(n.parent),ke;return te(se,{transition:"all 0 linear",transform:"translate3d("+Ee+"%,0,0)"}),n.showSpinner||(ke=ae.querySelector(n.spinnerSelector),ke&&he(ke)),Le!=document.body&&B(Le,"nprogress-custom-parent"),Le.appendChild(ae),ae},C.remove=function(){K(document.documentElement,"nprogress-busy"),K(document.querySelector(n.parent),"nprogress-custom-parent");var J=document.getElementById("nprogress");J&&he(J)},C.isRendered=function(){return!!document.getElementById("nprogress")},C.getPositioningCSS=function(){var J=document.body.style,ae="WebkitTransform"in J?"Webkit":"MozTransform"in J?"Moz":"msTransform"in J?"ms":"OTransform"in J?"O":"";return ae+"Perspective"in J?"translate3d":ae+"Transform"in J?"translate":"margin"};function j(J,ae,se){return J<ae?ae:J>se?se:J}function $(J){return(-1+J)*100}function U(J,ae,se){var Ee;return n.positionUsing==="translate3d"?Ee={transform:"translate3d("+$(J)+"%,0,0)"}:n.positionUsing==="translate"?Ee={transform:"translate("+$(J)+"%,0)"}:Ee={"margin-left":$(J)+"%"},Ee.transition="all "+ae+"ms "+se,Ee}var Y=function(){var J=[];function ae(){var se=J.shift();se&&se(ae)}return function(se){J.push(se),J.length==1&&ae()}}(),te=function(){var J=["Webkit","O","Moz","ms"],ae={};function se(ye){return ye.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(Se,be){return be.toUpperCase()})}function Ee(ye){var Se=document.body.style;if(ye in Se)return ye;for(var be=J.length,Ue=ye.charAt(0).toUpperCase()+ye.slice(1),qe;be--;)if(qe=J[be]+Ue,qe in Se)return qe;return ye}function Le(ye){return ye=se(ye),ae[ye]||(ae[ye]=Ee(ye))}function ke(ye,Se,be){Se=Le(Se),ye.style[Se]=be}return function(ye,Se){var be=arguments,Ue,qe;if(be.length==2)for(Ue in Se)qe=Se[Ue],qe!==void 0&&Se.hasOwnProperty(Ue)&&ke(ye,Ue,qe);else ke(ye,be[1],be[2])}}();function X(J,ae){var se=typeof J=="string"?J:de(J);return se.indexOf(" "+ae+" ")>=0}function B(J,ae){var se=de(J),Ee=se+ae;X(se,ae)||(J.className=Ee.substring(1))}function K(J,ae){var se=de(J),Ee;X(J,ae)&&(Ee=se.replace(" "+ae+" "," "),J.className=Ee.substring(1,Ee.length-1))}function de(J){return(" "+(J.className||"")+" ").replace(/\s+/gi," ")}function he(J){J&&J.parentNode&&J.parentNode.removeChild(J)}return C})},74049:function(H,Q,i){"use strict";var E=i(36257);function M(){}function C(){}C.resetWarningCache=M,H.exports=function(){function n(U,Y,te,X,B,K){if(K!==E){var de=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw de.name="Invariant Violation",de}}n.isRequired=n;function j(){return n}var $={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:j,element:n,elementType:n,instanceOf:j,node:n,objectOf:j,oneOf:j,oneOfType:j,shape:j,exact:j,checkPropTypes:C,resetWarningCache:M};return $.PropTypes=$,$}},40507:function(H,Q,i){if(0)var E,M;else H.exports=i(74049)()},36257:function(H){"use strict";var Q="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";H.exports=Q},79204:function(H){(function(Q,i){H.exports=i()})(this,function(){"use strict";function Q(J,ae,se,Ee,Le){(function ke(ye,Se,be,Ue,qe){for(;Ue>be;){if(Ue-be>600){var je=Ue-be+1,nt=Se-be+1,Ct=Math.log(je),ft=.5*Math.exp(2*Ct/3),Et=.5*Math.sqrt(Ct*ft*(je-ft)/je)*(nt-je/2<0?-1:1),yt=Math.max(be,Math.floor(Se-nt*ft/je+Et)),_t=Math.min(Ue,Math.floor(Se+(je-nt)*ft/je+Et));ke(ye,Se,yt,_t,qe)}var He=ye[Se],bt=be,Tt=Ue;for(i(ye,be,Se),qe(ye[Ue],He)>0&&i(ye,be,Ue);bt<Tt;){for(i(ye,bt,Tt),bt++,Tt--;qe(ye[bt],He)<0;)bt++;for(;qe(ye[Tt],He)>0;)Tt--}qe(ye[be],He)===0?i(ye,be,Tt):i(ye,++Tt,Ue),Tt<=Se&&(be=Tt+1),Se<=Tt&&(Ue=Tt-1)}})(J,ae,se||0,Ee||J.length-1,Le||E)}function i(J,ae,se){var Ee=J[ae];J[ae]=J[se],J[se]=Ee}function E(J,ae){return J<ae?-1:J>ae?1:0}var M=function(J){J===void 0&&(J=9),this._maxEntries=Math.max(4,J),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function C(J,ae,se){if(!se)return ae.indexOf(J);for(var Ee=0;Ee<ae.length;Ee++)if(se(J,ae[Ee]))return Ee;return-1}function n(J,ae){j(J,0,J.children.length,ae,J)}function j(J,ae,se,Ee,Le){Le||(Le=de(null)),Le.minX=1/0,Le.minY=1/0,Le.maxX=-1/0,Le.maxY=-1/0;for(var ke=ae;ke<se;ke++){var ye=J.children[ke];$(Le,J.leaf?Ee(ye):ye)}return Le}function $(J,ae){return J.minX=Math.min(J.minX,ae.minX),J.minY=Math.min(J.minY,ae.minY),J.maxX=Math.max(J.maxX,ae.maxX),J.maxY=Math.max(J.maxY,ae.maxY),J}function U(J,ae){return J.minX-ae.minX}function Y(J,ae){return J.minY-ae.minY}function te(J){return(J.maxX-J.minX)*(J.maxY-J.minY)}function X(J){return J.maxX-J.minX+(J.maxY-J.minY)}function B(J,ae){return J.minX<=ae.minX&&J.minY<=ae.minY&&ae.maxX<=J.maxX&&ae.maxY<=J.maxY}function K(J,ae){return ae.minX<=J.maxX&&ae.minY<=J.maxY&&ae.maxX>=J.minX&&ae.maxY>=J.minY}function de(J){return{children:J,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function he(J,ae,se,Ee,Le){for(var ke=[ae,se];ke.length;)if(!((se=ke.pop())-(ae=ke.pop())<=Ee)){var ye=ae+Math.ceil((se-ae)/Ee/2)*Ee;Q(J,ye,ae,se,Le),ke.push(ae,ye,ye,se)}}return M.prototype.all=function(){return this._all(this.data,[])},M.prototype.search=function(J){var ae=this.data,se=[];if(!K(J,ae))return se;for(var Ee=this.toBBox,Le=[];ae;){for(var ke=0;ke<ae.children.length;ke++){var ye=ae.children[ke],Se=ae.leaf?Ee(ye):ye;K(J,Se)&&(ae.leaf?se.push(ye):B(J,Se)?this._all(ye,se):Le.push(ye))}ae=Le.pop()}return se},M.prototype.collides=function(J){var ae=this.data;if(!K(J,ae))return!1;for(var se=[];ae;){for(var Ee=0;Ee<ae.children.length;Ee++){var Le=ae.children[Ee],ke=ae.leaf?this.toBBox(Le):Le;if(K(J,ke)){if(ae.leaf||B(J,ke))return!0;se.push(Le)}}ae=se.pop()}return!1},M.prototype.load=function(J){if(!J||!J.length)return this;if(J.length<this._minEntries){for(var ae=0;ae<J.length;ae++)this.insert(J[ae]);return this}var se=this._build(J.slice(),0,J.length-1,0);if(this.data.children.length)if(this.data.height===se.height)this._splitRoot(this.data,se);else{if(this.data.height<se.height){var Ee=this.data;this.data=se,se=Ee}this._insert(se,this.data.height-se.height-1,!0)}else this.data=se;return this},M.prototype.insert=function(J){return J&&this._insert(J,this.data.height-1),this},M.prototype.clear=function(){return this.data=de([]),this},M.prototype.remove=function(J,ae){if(!J)return this;for(var se,Ee,Le,ke=this.data,ye=this.toBBox(J),Se=[],be=[];ke||Se.length;){if(ke||(ke=Se.pop(),Ee=Se[Se.length-1],se=be.pop(),Le=!0),ke.leaf){var Ue=C(J,ke.children,ae);if(Ue!==-1)return ke.children.splice(Ue,1),Se.push(ke),this._condense(Se),this}Le||ke.leaf||!B(ke,ye)?Ee?(se++,ke=Ee.children[se],Le=!1):ke=null:(Se.push(ke),be.push(se),se=0,Ee=ke,ke=ke.children[0])}return this},M.prototype.toBBox=function(J){return J},M.prototype.compareMinX=function(J,ae){return J.minX-ae.minX},M.prototype.compareMinY=function(J,ae){return J.minY-ae.minY},M.prototype.toJSON=function(){return this.data},M.prototype.fromJSON=function(J){return this.data=J,this},M.prototype._all=function(J,ae){for(var se=[];J;)J.leaf?ae.push.apply(ae,J.children):se.push.apply(se,J.children),J=se.pop();return ae},M.prototype._build=function(J,ae,se,Ee){var Le,ke=se-ae+1,ye=this._maxEntries;if(ke<=ye)return n(Le=de(J.slice(ae,se+1)),this.toBBox),Le;Ee||(Ee=Math.ceil(Math.log(ke)/Math.log(ye)),ye=Math.ceil(ke/Math.pow(ye,Ee-1))),(Le=de([])).leaf=!1,Le.height=Ee;var Se=Math.ceil(ke/ye),be=Se*Math.ceil(Math.sqrt(ye));he(J,ae,se,be,this.compareMinX);for(var Ue=ae;Ue<=se;Ue+=be){var qe=Math.min(Ue+be-1,se);he(J,Ue,qe,Se,this.compareMinY);for(var je=Ue;je<=qe;je+=Se){var nt=Math.min(je+Se-1,qe);Le.children.push(this._build(J,je,nt,Ee-1))}}return n(Le,this.toBBox),Le},M.prototype._chooseSubtree=function(J,ae,se,Ee){for(;Ee.push(ae),!ae.leaf&&Ee.length-1!==se;){for(var Le=1/0,ke=1/0,ye=void 0,Se=0;Se<ae.children.length;Se++){var be=ae.children[Se],Ue=te(be),qe=(je=J,nt=be,(Math.max(nt.maxX,je.maxX)-Math.min(nt.minX,je.minX))*(Math.max(nt.maxY,je.maxY)-Math.min(nt.minY,je.minY))-Ue);qe<ke?(ke=qe,Le=Ue<Le?Ue:Le,ye=be):qe===ke&&Ue<Le&&(Le=Ue,ye=be)}ae=ye||ae.children[0]}var je,nt;return ae},M.prototype._insert=function(J,ae,se){var Ee=se?J:this.toBBox(J),Le=[],ke=this._chooseSubtree(Ee,this.data,ae,Le);for(ke.children.push(J),$(ke,Ee);ae>=0&&Le[ae].children.length>this._maxEntries;)this._split(Le,ae),ae--;this._adjustParentBBoxes(Ee,Le,ae)},M.prototype._split=function(J,ae){var se=J[ae],Ee=se.children.length,Le=this._minEntries;this._chooseSplitAxis(se,Le,Ee);var ke=this._chooseSplitIndex(se,Le,Ee),ye=de(se.children.splice(ke,se.children.length-ke));ye.height=se.height,ye.leaf=se.leaf,n(se,this.toBBox),n(ye,this.toBBox),ae?J[ae-1].children.push(ye):this._splitRoot(se,ye)},M.prototype._splitRoot=function(J,ae){this.data=de([J,ae]),this.data.height=J.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},M.prototype._chooseSplitIndex=function(J,ae,se){for(var Ee,Le,ke,ye,Se,be,Ue,qe=1/0,je=1/0,nt=ae;nt<=se-ae;nt++){var Ct=j(J,0,nt,this.toBBox),ft=j(J,nt,se,this.toBBox),Et=(Le=Ct,ke=ft,ye=void 0,Se=void 0,be=void 0,Ue=void 0,ye=Math.max(Le.minX,ke.minX),Se=Math.max(Le.minY,ke.minY),be=Math.min(Le.maxX,ke.maxX),Ue=Math.min(Le.maxY,ke.maxY),Math.max(0,be-ye)*Math.max(0,Ue-Se)),yt=te(Ct)+te(ft);Et<qe?(qe=Et,Ee=nt,je=yt<je?yt:je):Et===qe&&yt<je&&(je=yt,Ee=nt)}return Ee||se-ae},M.prototype._chooseSplitAxis=function(J,ae,se){var Ee=J.leaf?this.compareMinX:U,Le=J.leaf?this.compareMinY:Y;this._allDistMargin(J,ae,se,Ee)<this._allDistMargin(J,ae,se,Le)&&J.children.sort(Ee)},M.prototype._allDistMargin=function(J,ae,se,Ee){J.children.sort(Ee);for(var Le=this.toBBox,ke=j(J,0,ae,Le),ye=j(J,se-ae,se,Le),Se=X(ke)+X(ye),be=ae;be<se-ae;be++){var Ue=J.children[be];$(ke,J.leaf?Le(Ue):Ue),Se+=X(ke)}for(var qe=se-ae-1;qe>=ae;qe--){var je=J.children[qe];$(ye,J.leaf?Le(je):je),Se+=X(ye)}return Se},M.prototype._adjustParentBBoxes=function(J,ae,se){for(var Ee=se;Ee>=0;Ee--)$(ae[Ee],J)},M.prototype._condense=function(J){for(var ae=J.length-1,se=void 0;ae>=0;ae--)J[ae].children.length===0?ae>0?(se=J[ae-1].children).splice(se.indexOf(J[ae]),1):this.clear():n(J[ae],this.toBBox)},M})},62803:function(H,Q,i){"use strict";i.d(Q,{V4:function(){return Jr},zt:function(){return de},ZP:function(){return Ie}});var E=i(38926),M=i(54153),C=i(89692),n=i(5147),j=i(82187),$=i.n(j),U=i(4525),Y=i(42684),te=i(75271),X=i(58190),B=["children"],K=te.createContext({});function de(Ot){var St=Ot.children,at=(0,X.Z)(Ot,B);return te.createElement(K.Provider,{value:at},St)}var he=i(59295),J=i(45985),ae=i(76525),se=i(56216),Ee=function(Ot){(0,ae.Z)(at,Ot);var St=(0,se.Z)(at);function at(){return(0,he.Z)(this,at),St.apply(this,arguments)}return(0,J.Z)(at,[{key:"render",value:function(){return this.props.children}}]),at}(te.Component),Le=Ee,ke=i(22217),ye=i(60784),Se=i(59373);function be(Ot){var St=te.useReducer(function(rr){return rr+1},0),at=(0,C.Z)(St,2),Xe=at[1],Nt=te.useRef(Ot),Nn=(0,Se.Z)(function(){return Nt.current}),Jn=(0,Se.Z)(function(rr){Nt.current=typeof rr=="function"?rr(Nt.current):rr,Xe()});return[Nn,Jn]}var Ue="none",qe="appear",je="enter",nt="leave",Ct="none",ft="prepare",Et="start",yt="active",_t="end",He="prepared",bt=i(18415);function Tt(Ot,St){var at={};return at[Ot.toLowerCase()]=St.toLowerCase(),at["Webkit".concat(Ot)]="webkit".concat(St),at["Moz".concat(Ot)]="moz".concat(St),at["ms".concat(Ot)]="MS".concat(St),at["O".concat(Ot)]="o".concat(St.toLowerCase()),at}function st(Ot,St){var at={animationend:Tt("Animation","AnimationEnd"),transitionend:Tt("Transition","TransitionEnd")};return Ot&&("AnimationEvent"in St||delete at.animationend.animation,"TransitionEvent"in St||delete at.transitionend.transition),at}var Qe=st((0,bt.Z)(),typeof window!="undefined"?window:{}),mt={};if((0,bt.Z)()){var Ht=document.createElement("div");mt=Ht.style}var vt={};function ue(Ot){if(vt[Ot])return vt[Ot];var St=Qe[Ot];if(St)for(var at=Object.keys(St),Xe=at.length,Nt=0;Nt<Xe;Nt+=1){var Nn=at[Nt];if(Object.prototype.hasOwnProperty.call(St,Nn)&&Nn in mt)return vt[Ot]=St[Nn],vt[Ot]}return""}var lt=ue("animationend"),le=ue("transitionend"),Je=!!(lt&&le),we=lt||"animationend",Pn=le||"transitionend";function Mt(Ot,St){if(!Ot)return null;if((0,n.Z)(Ot)==="object"){var at=St.replace(/-\w/g,function(Xe){return Xe[1].toUpperCase()});return Ot[at]}return"".concat(Ot,"-").concat(St)}var or=function(Ot){var St=(0,te.useRef)();function at(Nt){Nt&&(Nt.removeEventListener(Pn,Ot),Nt.removeEventListener(we,Ot))}function Xe(Nt){St.current&&St.current!==Nt&&at(St.current),Nt&&Nt!==St.current&&(Nt.addEventListener(Pn,Ot),Nt.addEventListener(we,Ot),St.current=Nt)}return te.useEffect(function(){return function(){at(St.current)}},[]),[Xe,at]},wr=(0,bt.Z)()?te.useLayoutEffect:te.useEffect,Dr=wr,lr=i(49975),Pe=function(){var Ot=te.useRef(null);function St(){lr.Z.cancel(Ot.current)}function at(Xe){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;St();var Nn=(0,lr.Z)(function(){Nt<=1?Xe({isCanceled:function(){return Nn!==Ot.current}}):at(Xe,Nt-1)});Ot.current=Nn}return te.useEffect(function(){return function(){St()}},[]),[at,St]},ut=[ft,Et,yt,_t],Ve=[ft,He],gt=!1,Gt=!0;function Me(Ot){return Ot===yt||Ot===_t}var At=function(Ot,St,at){var Xe=(0,ye.Z)(Ct),Nt=(0,C.Z)(Xe,2),Nn=Nt[0],Jn=Nt[1],rr=Pe(),Br=(0,C.Z)(rr,2),Hr=Br[0],zr=Br[1];function Tr(){Jn(ft,!0)}var fn=St?Ve:ut;return Dr(function(){if(Nn!==Ct&&Nn!==_t){var Ne=fn.indexOf(Nn),Ge=fn[Ne+1],ot=at(Nn);ot===gt?Jn(Ge,!0):Ge&&Hr(function(Dt){function jt(){Dt.isCanceled()||Jn(Ge,!0)}ot===!0?jt():Promise.resolve(ot).then(jt)})}},[Ot,Nn]),te.useEffect(function(){return function(){zr()}},[]),[Tr,Nn]};function Bt(Ot,St,at,Xe){var Nt=Xe.motionEnter,Nn=Nt===void 0?!0:Nt,Jn=Xe.motionAppear,rr=Jn===void 0?!0:Jn,Br=Xe.motionLeave,Hr=Br===void 0?!0:Br,zr=Xe.motionDeadline,Tr=Xe.motionLeaveImmediately,fn=Xe.onAppearPrepare,Ne=Xe.onEnterPrepare,Ge=Xe.onLeavePrepare,ot=Xe.onAppearStart,Dt=Xe.onEnterStart,jt=Xe.onLeaveStart,sn=Xe.onAppearActive,xn=Xe.onEnterActive,rn=Xe.onLeaveActive,Fn=Xe.onAppearEnd,Un=Xe.onEnterEnd,jn=Xe.onLeaveEnd,_n=Xe.onVisibleChanged,Xn=(0,ye.Z)(),er=(0,C.Z)(Xn,2),Yr=er[0],qr=er[1],Gr=be(Ue),ci=(0,C.Z)(Gr,2),Ci=ci[0],Ki=ci[1],Bi=(0,ye.Z)(null),Di=(0,C.Z)(Bi,2),yo=Di[0],po=Di[1],Vo=Ci(),Xo=(0,te.useRef)(!1),$o=(0,te.useRef)(null);function Aa(){return at()}var qa=(0,te.useRef)(!1);function Oo(){Ki(Ue),po(null,!0)}var Do=(0,ke.zX)(function(ao){var Ma=Ci();if(Ma!==Ue){var ko=Aa();if(!(ao&&!ao.deadline&&ao.target!==ko)){var No=qa.current,Uo;Ma===qe&&No?Uo=Fn==null?void 0:Fn(ko,ao):Ma===je&&No?Uo=Un==null?void 0:Un(ko,ao):Ma===nt&&No&&(Uo=jn==null?void 0:jn(ko,ao)),No&&Uo!==!1&&Oo()}}}),oa=or(Do),Fa=(0,C.Z)(oa,1),xs=Fa[0],tl=function(Ma){switch(Ma){case qe:return(0,E.Z)((0,E.Z)((0,E.Z)({},ft,fn),Et,ot),yt,sn);case je:return(0,E.Z)((0,E.Z)((0,E.Z)({},ft,Ne),Et,Dt),yt,xn);case nt:return(0,E.Z)((0,E.Z)((0,E.Z)({},ft,Ge),Et,jt),yt,rn);default:return{}}},Na=te.useMemo(function(){return tl(Vo)},[Vo]),ro=At(Vo,!Ot,function(ao){if(ao===ft){var Ma=Na[ft];return Ma?Ma(Aa()):gt}if(ma in Na){var ko;po(((ko=Na[ma])===null||ko===void 0?void 0:ko.call(Na,Aa(),null))||null)}return ma===yt&&Vo!==Ue&&(xs(Aa()),zr>0&&(clearTimeout($o.current),$o.current=setTimeout(function(){Do({deadline:!0})},zr))),ma===He&&Oo(),Gt}),xa=(0,C.Z)(ro,2),Ba=xa[0],ma=xa[1],ja=Me(ma);qa.current=ja;var Sa=(0,te.useRef)(null);Dr(function(){if(!(Xo.current&&Sa.current===St)){qr(St);var ao=Xo.current;Xo.current=!0;var Ma;!ao&&St&&rr&&(Ma=qe),ao&&St&&Nn&&(Ma=je),(ao&&!St&&Hr||!ao&&Tr&&!St&&Hr)&&(Ma=nt);var ko=tl(Ma);Ma&&(Ot||ko[ft])?(Ki(Ma),Ba()):Ki(Ue),Sa.current=St}},[St]),(0,te.useEffect)(function(){(Vo===qe&&!rr||Vo===je&&!Nn||Vo===nt&&!Hr)&&Ki(Ue)},[rr,Nn,Hr]),(0,te.useEffect)(function(){return function(){Xo.current=!1,clearTimeout($o.current)}},[]);var us=te.useRef(!1);(0,te.useEffect)(function(){Yr&&(us.current=!0),Yr!==void 0&&Vo===Ue&&((us.current||Yr)&&(_n==null||_n(Yr)),us.current=!0)},[Yr,Vo]);var ua=yo;return Na[ft]&&ma===Et&&(ua=(0,M.Z)({transition:"none"},ua)),[Vo,ma,ua,Yr!=null?Yr:St]}function Sn(Ot){var St=Ot;(0,n.Z)(Ot)==="object"&&(St=Ot.transitionSupport);function at(Nt,Nn){return!!(Nt.motionName&&St&&Nn!==!1)}var Xe=te.forwardRef(function(Nt,Nn){var Jn=Nt.visible,rr=Jn===void 0?!0:Jn,Br=Nt.removeOnLeave,Hr=Br===void 0?!0:Br,zr=Nt.forceRender,Tr=Nt.children,fn=Nt.motionName,Ne=Nt.leavedClassName,Ge=Nt.eventProps,ot=te.useContext(K),Dt=ot.motion,jt=at(Nt,Dt),sn=(0,te.useRef)(),xn=(0,te.useRef)();function rn(){try{return sn.current instanceof HTMLElement?sn.current:(0,U.ZP)(xn.current)}catch(Di){return null}}var Fn=Bt(jt,rr,rn,Nt),Un=(0,C.Z)(Fn,4),jn=Un[0],_n=Un[1],Xn=Un[2],er=Un[3],Yr=te.useRef(er);er&&(Yr.current=!0);var qr=te.useCallback(function(Di){sn.current=Di,(0,Y.mH)(Nn,Di)},[Nn]),Gr,ci=(0,M.Z)((0,M.Z)({},Ge),{},{visible:rr});if(!Tr)Gr=null;else if(jn===Ue)er?Gr=Tr((0,M.Z)({},ci),qr):!Hr&&Yr.current&&Ne?Gr=Tr((0,M.Z)((0,M.Z)({},ci),{},{className:Ne}),qr):zr||!Hr&&!Ne?Gr=Tr((0,M.Z)((0,M.Z)({},ci),{},{style:{display:"none"}}),qr):Gr=null;else{var Ci;_n===ft?Ci="prepare":Me(_n)?Ci="active":_n===Et&&(Ci="start");var Ki=Mt(fn,"".concat(jn,"-").concat(Ci));Gr=Tr((0,M.Z)((0,M.Z)({},ci),{},{className:$()(Mt(fn,jn),(0,E.Z)((0,E.Z)({},Ki,Ki&&Ci),fn,typeof fn=="string")),style:Xn}),qr)}if(te.isValidElement(Gr)&&(0,Y.Yr)(Gr)){var Bi=(0,Y.C4)(Gr);Bi||(Gr=te.cloneElement(Gr,{ref:qr}))}return te.createElement(Le,{ref:xn},Gr)});return Xe.displayName="CSSMotion",Xe}var Lt=Sn(Je),Bn=i(23022),en=i(63662),gn="add",ar="keep",Sr="remove",In="removed";function Gn(Ot){var St;return Ot&&(0,n.Z)(Ot)==="object"&&"key"in Ot?St=Ot:St={key:Ot},(0,M.Z)((0,M.Z)({},St),{},{key:String(St.key)})}function hn(){var Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ot.map(Gn)}function mn(){var Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],at=[],Xe=0,Nt=St.length,Nn=hn(Ot),Jn=hn(St);Nn.forEach(function(Hr){for(var zr=!1,Tr=Xe;Tr<Nt;Tr+=1){var fn=Jn[Tr];if(fn.key===Hr.key){Xe<Tr&&(at=at.concat(Jn.slice(Xe,Tr).map(function(Ne){return(0,M.Z)((0,M.Z)({},Ne),{},{status:gn})})),Xe=Tr),at.push((0,M.Z)((0,M.Z)({},fn),{},{status:ar})),Xe+=1,zr=!0;break}}zr||at.push((0,M.Z)((0,M.Z)({},Hr),{},{status:Sr}))}),Xe<Nt&&(at=at.concat(Jn.slice(Xe).map(function(Hr){return(0,M.Z)((0,M.Z)({},Hr),{},{status:gn})})));var rr={};at.forEach(function(Hr){var zr=Hr.key;rr[zr]=(rr[zr]||0)+1});var Br=Object.keys(rr).filter(function(Hr){return rr[Hr]>1});return Br.forEach(function(Hr){at=at.filter(function(zr){var Tr=zr.key,fn=zr.status;return Tr!==Hr||fn!==Sr}),at.forEach(function(zr){zr.key===Hr&&(zr.status=ar)})}),at}var cn=["component","children","onVisibleChanged","onAllRemoved"],Ln=["status"],Er=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function mr(Ot){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt,at=function(Xe){(0,ae.Z)(Nn,Xe);var Nt=(0,se.Z)(Nn);function Nn(){var Jn;(0,he.Z)(this,Nn);for(var rr=arguments.length,Br=new Array(rr),Hr=0;Hr<rr;Hr++)Br[Hr]=arguments[Hr];return Jn=Nt.call.apply(Nt,[this].concat(Br)),(0,E.Z)((0,en.Z)(Jn),"state",{keyEntities:[]}),(0,E.Z)((0,en.Z)(Jn),"removeKey",function(zr){Jn.setState(function(Tr){var fn=Tr.keyEntities.map(function(Ne){return Ne.key!==zr?Ne:(0,M.Z)((0,M.Z)({},Ne),{},{status:In})});return{keyEntities:fn}},function(){var Tr=Jn.state.keyEntities,fn=Tr.filter(function(Ne){var Ge=Ne.status;return Ge!==In}).length;fn===0&&Jn.props.onAllRemoved&&Jn.props.onAllRemoved()})}),Jn}return(0,J.Z)(Nn,[{key:"render",value:function(){var rr=this,Br=this.state.keyEntities,Hr=this.props,zr=Hr.component,Tr=Hr.children,fn=Hr.onVisibleChanged,Ne=Hr.onAllRemoved,Ge=(0,X.Z)(Hr,cn),ot=zr||te.Fragment,Dt={};return Er.forEach(function(jt){Dt[jt]=Ge[jt],delete Ge[jt]}),delete Ge.keys,te.createElement(ot,Ge,Br.map(function(jt,sn){var xn=jt.status,rn=(0,X.Z)(jt,Ln),Fn=xn===gn||xn===ar;return te.createElement(St,(0,Bn.Z)({},Dt,{key:rn.key,visible:Fn,eventProps:rn,onVisibleChanged:function(jn){fn==null||fn(jn,{key:rn.key}),jn||rr.removeKey(rn.key)}}),function(Un,jn){return Tr((0,M.Z)((0,M.Z)({},Un),{},{index:sn}),jn)})}))}}],[{key:"getDerivedStateFromProps",value:function(rr,Br){var Hr=rr.keys,zr=Br.keyEntities,Tr=hn(Hr),fn=mn(zr,Tr);return{keyEntities:fn.filter(function(Ne){var Ge=zr.find(function(ot){var Dt=ot.key;return Ne.key===Dt});return!(Ge&&Ge.status===In&&Ne.status===Sr)})}}}]),Nn}(te.Component);return(0,E.Z)(at,"defaultProps",{component:"div"}),at}var Jr=mr(Je),Ie=Lt},50009:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return Tt}});var E=i(23022),M=i(54153),C=i(89692),n=i(58190),j=i(75271),$=i(82187),U=i.n($),Y=i(40493),te=i(92076),X=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],B=void 0;function K(st,Qe){var mt=st.prefixCls,Ht=st.invalidate,vt=st.item,ue=st.renderItem,lt=st.responsive,le=st.responsiveDisabled,Je=st.registerSize,we=st.itemKey,Pn=st.className,Mt=st.style,or=st.children,wr=st.display,Dr=st.order,lr=st.component,Pe=lr===void 0?"div":lr,ut=(0,n.Z)(st,X),Ve=lt&&!wr;function gt(Sn){Je(we,Sn)}j.useEffect(function(){return function(){gt(null)}},[]);var Gt=ue&&vt!==B?ue(vt,{index:Dr}):or,Me;Ht||(Me={opacity:Ve?0:1,height:Ve?0:B,overflowY:Ve?"hidden":B,order:lt?Dr:B,pointerEvents:Ve?"none":B,position:Ve?"absolute":B});var At={};Ve&&(At["aria-hidden"]=!0);var Bt=j.createElement(Pe,(0,E.Z)({className:U()(!Ht&&mt,Pn),style:(0,M.Z)((0,M.Z)({},Me),Mt)},At,ut,{ref:Qe}),Gt);return lt&&(Bt=j.createElement(Y.Z,{onResize:function(Lt){var Bn=Lt.offsetWidth;gt(Bn)},disabled:le},Bt)),Bt}var de=j.forwardRef(K);de.displayName="Item";var he=de,J=i(59373),ae=i(30967),se=i(49975);function Ee(st){if(typeof MessageChannel=="undefined")(0,se.Z)(st);else{var Qe=new MessageChannel;Qe.port1.onmessage=function(){return st()},Qe.port2.postMessage(void 0)}}function Le(){var st=j.useRef(null),Qe=function(Ht){st.current||(st.current=[],Ee(function(){(0,ae.unstable_batchedUpdates)(function(){st.current.forEach(function(vt){vt()}),st.current=null})})),st.current.push(Ht)};return Qe}function ke(st,Qe){var mt=j.useState(Qe),Ht=(0,C.Z)(mt,2),vt=Ht[0],ue=Ht[1],lt=(0,J.Z)(function(le){st(function(){ue(le)})});return[vt,lt]}var ye=j.createContext(null),Se=["component"],be=["className"],Ue=["className"],qe=function(Qe,mt){var Ht=j.useContext(ye);if(!Ht){var vt=Qe.component,ue=vt===void 0?"div":vt,lt=(0,n.Z)(Qe,Se);return j.createElement(ue,(0,E.Z)({},lt,{ref:mt}))}var le=Ht.className,Je=(0,n.Z)(Ht,be),we=Qe.className,Pn=(0,n.Z)(Qe,Ue);return j.createElement(ye.Provider,{value:null},j.createElement(he,(0,E.Z)({ref:mt,className:U()(le,we)},Je,Pn)))},je=j.forwardRef(qe);je.displayName="RawItem";var nt=je,Ct=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],ft="responsive",Et="invalidate";function yt(st){return"+ ".concat(st.length," ...")}function _t(st,Qe){var mt=st.prefixCls,Ht=mt===void 0?"rc-overflow":mt,vt=st.data,ue=vt===void 0?[]:vt,lt=st.renderItem,le=st.renderRawItem,Je=st.itemKey,we=st.itemWidth,Pn=we===void 0?10:we,Mt=st.ssr,or=st.style,wr=st.className,Dr=st.maxCount,lr=st.renderRest,Pe=st.renderRawRest,ut=st.suffix,Ve=st.component,gt=Ve===void 0?"div":Ve,Gt=st.itemComponent,Me=st.onVisibleChange,At=(0,n.Z)(st,Ct),Bt=Mt==="full",Sn=Le(),Lt=ke(Sn,null),Bn=(0,C.Z)(Lt,2),en=Bn[0],gn=Bn[1],ar=en||0,Sr=ke(Sn,new Map),In=(0,C.Z)(Sr,2),Gn=In[0],hn=In[1],mn=ke(Sn,0),cn=(0,C.Z)(mn,2),Ln=cn[0],Er=cn[1],mr=ke(Sn,0),Jr=(0,C.Z)(mr,2),Ie=Jr[0],Ot=Jr[1],St=ke(Sn,0),at=(0,C.Z)(St,2),Xe=at[0],Nt=at[1],Nn=(0,j.useState)(null),Jn=(0,C.Z)(Nn,2),rr=Jn[0],Br=Jn[1],Hr=(0,j.useState)(null),zr=(0,C.Z)(Hr,2),Tr=zr[0],fn=zr[1],Ne=j.useMemo(function(){return Tr===null&&Bt?Number.MAX_SAFE_INTEGER:Tr||0},[Tr,en]),Ge=(0,j.useState)(!1),ot=(0,C.Z)(Ge,2),Dt=ot[0],jt=ot[1],sn="".concat(Ht,"-item"),xn=Math.max(Ln,Ie),rn=Dr===ft,Fn=ue.length&&rn,Un=Dr===Et,jn=Fn||typeof Dr=="number"&&ue.length>Dr,_n=(0,j.useMemo)(function(){var Oo=ue;return Fn?en===null&&Bt?Oo=ue:Oo=ue.slice(0,Math.min(ue.length,ar/Pn)):typeof Dr=="number"&&(Oo=ue.slice(0,Dr)),Oo},[ue,Pn,en,Dr,Fn]),Xn=(0,j.useMemo)(function(){return Fn?ue.slice(Ne+1):ue.slice(_n.length)},[ue,_n,Fn,Ne]),er=(0,j.useCallback)(function(Oo,Do){var oa;return typeof Je=="function"?Je(Oo):(oa=Je&&(Oo==null?void 0:Oo[Je]))!==null&&oa!==void 0?oa:Do},[Je]),Yr=(0,j.useCallback)(lt||function(Oo){return Oo},[lt]);function qr(Oo,Do,oa){Tr===Oo&&(Do===void 0||Do===rr)||(fn(Oo),oa||(jt(Oo<ue.length-1),Me==null||Me(Oo)),Do!==void 0&&Br(Do))}function Gr(Oo,Do){gn(Do.clientWidth)}function ci(Oo,Do){hn(function(oa){var Fa=new Map(oa);return Do===null?Fa.delete(Oo):Fa.set(Oo,Do),Fa})}function Ci(Oo,Do){Ot(Do),Er(Ie)}function Ki(Oo,Do){Nt(Do)}function Bi(Oo){return Gn.get(er(_n[Oo],Oo))}(0,te.Z)(function(){if(ar&&typeof xn=="number"&&_n){var Oo=Xe,Do=_n.length,oa=Do-1;if(!Do){qr(0,null);return}for(var Fa=0;Fa<Do;Fa+=1){var xs=Bi(Fa);if(Bt&&(xs=xs||0),xs===void 0){qr(Fa-1,void 0,!0);break}if(Oo+=xs,oa===0&&Oo<=ar||Fa===oa-1&&Oo+Bi(oa)<=ar){qr(oa,null);break}else if(Oo+xn>ar){qr(Fa-1,Oo-xs-Xe+Ie);break}}ut&&Bi(0)+Xe>ar&&Br(null)}},[ar,Gn,Ie,Xe,er,_n]);var Di=Dt&&!!Xn.length,yo={};rr!==null&&Fn&&(yo={position:"absolute",left:rr,top:0});var po={prefixCls:sn,responsive:Fn,component:Gt,invalidate:Un},Vo=le?function(Oo,Do){var oa=er(Oo,Do);return j.createElement(ye.Provider,{key:oa,value:(0,M.Z)((0,M.Z)({},po),{},{order:Do,item:Oo,itemKey:oa,registerSize:ci,display:Do<=Ne})},le(Oo,Do))}:function(Oo,Do){var oa=er(Oo,Do);return j.createElement(he,(0,E.Z)({},po,{order:Do,key:oa,item:Oo,renderItem:Yr,itemKey:oa,registerSize:ci,display:Do<=Ne}))},Xo={order:Di?Ne:Number.MAX_SAFE_INTEGER,className:"".concat(sn,"-rest"),registerSize:Ci,display:Di},$o=lr||yt,Aa=Pe?j.createElement(ye.Provider,{value:(0,M.Z)((0,M.Z)({},po),Xo)},Pe(Xn)):j.createElement(he,(0,E.Z)({},po,Xo),typeof $o=="function"?$o(Xn):$o),qa=j.createElement(gt,(0,E.Z)({className:U()(!Un&&Ht,wr),style:or,ref:Qe},At),_n.map(Vo),jn?Aa:null,ut&&j.createElement(he,(0,E.Z)({},po,{responsive:rn,responsiveDisabled:!Fn,order:Ne,className:"".concat(sn,"-suffix"),registerSize:Ki,display:!0,style:yo}),ut));return rn?j.createElement(Y.Z,{onResize:Gr,disabled:!Fn},qa):qa}var He=j.forwardRef(_t);He.displayName="Overflow",He.Item=nt,He.RESPONSIVE=ft,He.INVALIDATE=Et;var bt=He,Tt=bt},40493:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return Et}});var E=i(23022),M=i(75271),C=i(81626),n=i(4449),j=i(54153),$=i(5147),U=i(4525),Y=i(42684),te=M.createContext(null);function X(yt){var _t=yt.children,He=yt.onBatchResize,bt=M.useRef(0),Tt=M.useRef([]),st=M.useContext(te),Qe=M.useCallback(function(mt,Ht,vt){bt.current+=1;var ue=bt.current;Tt.current.push({size:mt,element:Ht,data:vt}),Promise.resolve().then(function(){ue===bt.current&&(He==null||He(Tt.current),Tt.current=[])}),st==null||st(mt,Ht,vt)},[He,st]);return M.createElement(te.Provider,{value:Qe},_t)}var B=i(73023),K=new Map;function de(yt){yt.forEach(function(_t){var He,bt=_t.target;(He=K.get(bt))===null||He===void 0||He.forEach(function(Tt){return Tt(bt)})})}var he=new B.Z(de),J=null,ae=null;function se(yt,_t){K.has(yt)||(K.set(yt,new Set),he.observe(yt)),K.get(yt).add(_t)}function Ee(yt,_t){K.has(yt)&&(K.get(yt).delete(_t),K.get(yt).size||(he.unobserve(yt),K.delete(yt)))}var Le=i(59295),ke=i(45985),ye=i(76525),Se=i(56216),be=function(yt){(0,ye.Z)(He,yt);var _t=(0,Se.Z)(He);function He(){return(0,Le.Z)(this,He),_t.apply(this,arguments)}return(0,ke.Z)(He,[{key:"render",value:function(){return this.props.children}}]),He}(M.Component);function Ue(yt,_t){var He=yt.children,bt=yt.disabled,Tt=M.useRef(null),st=M.useRef(null),Qe=M.useContext(te),mt=typeof He=="function",Ht=mt?He(Tt):He,vt=M.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),ue=!mt&&M.isValidElement(Ht)&&(0,Y.Yr)(Ht),lt=ue?(0,Y.C4)(Ht):null,le=(0,Y.x1)(lt,Tt),Je=function(){var or;return(0,U.ZP)(Tt.current)||(Tt.current&&(0,$.Z)(Tt.current)==="object"?(0,U.ZP)((or=Tt.current)===null||or===void 0?void 0:or.nativeElement):null)||(0,U.ZP)(st.current)};M.useImperativeHandle(_t,function(){return Je()});var we=M.useRef(yt);we.current=yt;var Pn=M.useCallback(function(Mt){var or=we.current,wr=or.onResize,Dr=or.data,lr=Mt.getBoundingClientRect(),Pe=lr.width,ut=lr.height,Ve=Mt.offsetWidth,gt=Mt.offsetHeight,Gt=Math.floor(Pe),Me=Math.floor(ut);if(vt.current.width!==Gt||vt.current.height!==Me||vt.current.offsetWidth!==Ve||vt.current.offsetHeight!==gt){var At={width:Gt,height:Me,offsetWidth:Ve,offsetHeight:gt};vt.current=At;var Bt=Ve===Math.round(Pe)?Pe:Ve,Sn=gt===Math.round(ut)?ut:gt,Lt=(0,j.Z)((0,j.Z)({},At),{},{offsetWidth:Bt,offsetHeight:Sn});Qe==null||Qe(Lt,Mt,Dr),wr&&Promise.resolve().then(function(){wr(Lt,Mt)})}},[]);return M.useEffect(function(){var Mt=Je();return Mt&&!bt&&se(Mt,Pn),function(){return Ee(Mt,Pn)}},[Tt.current,bt]),M.createElement(be,{ref:st},ue?M.cloneElement(Ht,{ref:le}):Ht)}var qe=M.forwardRef(Ue),je=qe,nt="rc-observer-key";function Ct(yt,_t){var He=yt.children,bt=typeof He=="function"?[He]:(0,C.Z)(He);return bt.map(function(Tt,st){var Qe=(Tt==null?void 0:Tt.key)||"".concat(nt,"-").concat(st);return M.createElement(je,(0,E.Z)({},yt,{key:Qe,ref:st===0?_t:void 0}),Tt)})}var ft=M.forwardRef(Ct);ft.Collection=X;var Et=ft},75219:function(H,Q,i){"use strict";i.d(Q,{G:function(){return n},Z:function(){return Ee}});var E=i(82187),M=i.n(E),C=i(75271);function n(Le){var ke=Le.children,ye=Le.prefixCls,Se=Le.id,be=Le.overlayInnerStyle,Ue=Le.bodyClassName,qe=Le.className,je=Le.style;return C.createElement("div",{className:M()("".concat(ye,"-content"),qe),style:je},C.createElement("div",{className:M()("".concat(ye,"-inner"),Ue),id:Se,role:"tooltip",style:be},typeof ke=="function"?ke():ke))}var j=i(23022),$=i(54153),U=i(58190),Y=i(83190),te={shiftX:64,adjustY:1},X={adjustX:1,shiftY:!0},B=[0,0],K={left:{points:["cr","cl"],overflow:X,offset:[-4,0],targetOffset:B},right:{points:["cl","cr"],overflow:X,offset:[4,0],targetOffset:B},top:{points:["bc","tc"],overflow:te,offset:[0,-4],targetOffset:B},bottom:{points:["tc","bc"],overflow:te,offset:[0,4],targetOffset:B},topLeft:{points:["bl","tl"],overflow:te,offset:[0,-4],targetOffset:B},leftTop:{points:["tr","tl"],overflow:X,offset:[-4,0],targetOffset:B},topRight:{points:["br","tr"],overflow:te,offset:[0,-4],targetOffset:B},rightTop:{points:["tl","tr"],overflow:X,offset:[4,0],targetOffset:B},bottomRight:{points:["tr","br"],overflow:te,offset:[0,4],targetOffset:B},rightBottom:{points:["bl","br"],overflow:X,offset:[4,0],targetOffset:B},bottomLeft:{points:["tl","bl"],overflow:te,offset:[0,4],targetOffset:B},leftBottom:{points:["br","bl"],overflow:X,offset:[-4,0],targetOffset:B}},de=null,he=i(73188),J=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],ae=function(ke,ye){var Se=ke.overlayClassName,be=ke.trigger,Ue=be===void 0?["hover"]:be,qe=ke.mouseEnterDelay,je=qe===void 0?0:qe,nt=ke.mouseLeaveDelay,Ct=nt===void 0?.1:nt,ft=ke.overlayStyle,Et=ke.prefixCls,yt=Et===void 0?"rc-tooltip":Et,_t=ke.children,He=ke.onVisibleChange,bt=ke.afterVisibleChange,Tt=ke.transitionName,st=ke.animation,Qe=ke.motion,mt=ke.placement,Ht=mt===void 0?"right":mt,vt=ke.align,ue=vt===void 0?{}:vt,lt=ke.destroyTooltipOnHide,le=lt===void 0?!1:lt,Je=ke.defaultVisible,we=ke.getTooltipContainer,Pn=ke.overlayInnerStyle,Mt=ke.arrowContent,or=ke.overlay,wr=ke.id,Dr=ke.showArrow,lr=Dr===void 0?!0:Dr,Pe=ke.classNames,ut=ke.styles,Ve=(0,U.Z)(ke,J),gt=(0,he.Z)(wr),Gt=(0,C.useRef)(null);(0,C.useImperativeHandle)(ye,function(){return Gt.current});var Me=(0,$.Z)({},Ve);"visible"in ke&&(Me.popupVisible=ke.visible);var At=function(){return C.createElement(n,{key:"content",prefixCls:yt,id:gt,bodyClassName:Pe==null?void 0:Pe.body,overlayInnerStyle:(0,$.Z)((0,$.Z)({},Pn),ut==null?void 0:ut.body)},or)},Bt=function(){var Lt=C.Children.only(_t),Bn=(Lt==null?void 0:Lt.props)||{},en=(0,$.Z)((0,$.Z)({},Bn),{},{"aria-describedby":or?gt:null});return C.cloneElement(_t,en)};return C.createElement(Y.Z,(0,j.Z)({popupClassName:M()(Se,Pe==null?void 0:Pe.root),prefixCls:yt,popup:At,action:Ue,builtinPlacements:K,popupPlacement:Ht,ref:Gt,popupAlign:ue,getPopupContainer:we,onPopupVisibleChange:He,afterPopupVisibleChange:bt,popupTransitionName:Tt,popupAnimation:st,popupMotion:Qe,defaultPopupVisible:Je,autoDestroy:le,mouseLeaveDelay:Ct,popupStyle:(0,$.Z)((0,$.Z)({},ft),ut==null?void 0:ut.root),mouseEnterDelay:je,arrow:lr},Me),Bt())},se=(0,C.forwardRef)(ae),Ee=se},12634:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return ke}});var E=i(23022),M=i(38926),C=i(54153),n=i(89692),j=i(58190),$=i(75271),U=i(82187),Y=i.n(U),te=i(71305),X=i(17425),B=function(Se){for(var be=Se.prefixCls,Ue=Se.level,qe=Se.isStart,je=Se.isEnd,nt="".concat(be,"-indent-unit"),Ct=[],ft=0;ft<Ue;ft+=1)Ct.push($.createElement("span",{key:ft,className:Y()(nt,(0,M.Z)((0,M.Z)({},"".concat(nt,"-start"),qe[ft]),"".concat(nt,"-end"),je[ft]))}));return $.createElement("span",{"aria-hidden":"true",className:"".concat(be,"-indent")},Ct)},K=$.memo(B),de=i(19183),he=i(37861),J=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],ae="open",se="close",Ee="---",Le=function(Se){var be,Ue,qe=Se.eventKey,je=Se.className,nt=Se.style,Ct=Se.dragOver,ft=Se.dragOverGapTop,Et=Se.dragOverGapBottom,yt=Se.isLeaf,_t=Se.isStart,He=Se.isEnd,bt=Se.expanded,Tt=Se.selected,st=Se.checked,Qe=Se.halfChecked,mt=Se.loading,Ht=Se.domRef,vt=Se.active,ue=Se.data,lt=Se.onMouseMove,le=Se.selectable,Je=(0,j.Z)(Se,J),we=$.useContext(X.k),Pn=$.useContext(X.y),Mt=$.useRef(null),or=$.useState(!1),wr=(0,n.Z)(or,2),Dr=wr[0],lr=wr[1],Pe=$.useMemo(function(){var zr;return!!(we.disabled||Se.disabled||(zr=Pn.nodeDisabled)!==null&&zr!==void 0&&zr.call(Pn,ue))},[we.disabled,Se.disabled,Pn.nodeDisabled,ue]),ut=$.useMemo(function(){return!we.checkable||Se.checkable===!1?!1:we.checkable},[we.checkable,Se.checkable]),Ve=function(Tr){Pe||we.onNodeSelect(Tr,(0,he.F)(Se))},gt=function(Tr){Pe||!ut||Se.disableCheckbox||we.onNodeCheck(Tr,(0,he.F)(Se),!st)},Gt=$.useMemo(function(){return typeof le=="boolean"?le:we.selectable},[le,we.selectable]),Me=function(Tr){we.onNodeClick(Tr,(0,he.F)(Se)),Gt?Ve(Tr):gt(Tr)},At=function(Tr){we.onNodeDoubleClick(Tr,(0,he.F)(Se))},Bt=function(Tr){we.onNodeMouseEnter(Tr,(0,he.F)(Se))},Sn=function(Tr){we.onNodeMouseLeave(Tr,(0,he.F)(Se))},Lt=function(Tr){we.onNodeContextMenu(Tr,(0,he.F)(Se))},Bn=$.useMemo(function(){return!!(we.draggable&&(!we.draggable.nodeDraggable||we.draggable.nodeDraggable(ue)))},[we.draggable,ue]),en=function(Tr){Tr.stopPropagation(),lr(!0),we.onNodeDragStart(Tr,Se);try{Tr.dataTransfer.setData("text/plain","")}catch(fn){}},gn=function(Tr){Tr.preventDefault(),Tr.stopPropagation(),we.onNodeDragEnter(Tr,Se)},ar=function(Tr){Tr.preventDefault(),Tr.stopPropagation(),we.onNodeDragOver(Tr,Se)},Sr=function(Tr){Tr.stopPropagation(),we.onNodeDragLeave(Tr,Se)},In=function(Tr){Tr.stopPropagation(),lr(!1),we.onNodeDragEnd(Tr,Se)},Gn=function(Tr){Tr.preventDefault(),Tr.stopPropagation(),lr(!1),we.onNodeDrop(Tr,Se)},hn=function(Tr){mt||we.onNodeExpand(Tr,(0,he.F)(Se))},mn=$.useMemo(function(){var zr=(0,de.Z)(we.keyEntities,qe)||{},Tr=zr.children;return!!(Tr||[]).length},[we.keyEntities,qe]),cn=$.useMemo(function(){return yt===!1?!1:yt||!we.loadData&&!mn||we.loadData&&Se.loaded&&!mn},[yt,we.loadData,mn,Se.loaded]);$.useEffect(function(){mt||typeof we.loadData=="function"&&bt&&!cn&&!Se.loaded&&we.onNodeLoad((0,he.F)(Se))},[mt,we.loadData,we.onNodeLoad,bt,cn,Se]);var Ln=$.useMemo(function(){var zr;return(zr=we.draggable)!==null&&zr!==void 0&&zr.icon?$.createElement("span",{className:"".concat(we.prefixCls,"-draggable-icon")},we.draggable.icon):null},[we.draggable]),Er=function(Tr){var fn=Se.switcherIcon||we.switcherIcon;return typeof fn=="function"?fn((0,C.Z)((0,C.Z)({},Se),{},{isLeaf:Tr})):fn},mr=function(){if(cn){var Tr=Er(!0);return Tr!==!1?$.createElement("span",{className:Y()("".concat(we.prefixCls,"-switcher"),"".concat(we.prefixCls,"-switcher-noop"))},Tr):null}var fn=Er(!1);return fn!==!1?$.createElement("span",{onClick:hn,className:Y()("".concat(we.prefixCls,"-switcher"),"".concat(we.prefixCls,"-switcher_").concat(bt?ae:se))},fn):null},Jr=$.useMemo(function(){if(!ut)return null;var zr=typeof ut!="boolean"?ut:null;return $.createElement("span",{className:Y()("".concat(we.prefixCls,"-checkbox"),(0,M.Z)((0,M.Z)((0,M.Z)({},"".concat(we.prefixCls,"-checkbox-checked"),st),"".concat(we.prefixCls,"-checkbox-indeterminate"),!st&&Qe),"".concat(we.prefixCls,"-checkbox-disabled"),Pe||Se.disableCheckbox)),onClick:gt,role:"checkbox","aria-checked":Qe?"mixed":st,"aria-disabled":Pe||Se.disableCheckbox,"aria-label":"Select ".concat(typeof Se.title=="string"?Se.title:"tree node")},zr)},[ut,st,Qe,Pe,Se.disableCheckbox,Se.title]),Ie=$.useMemo(function(){return cn?null:bt?ae:se},[cn,bt]),Ot=$.useMemo(function(){return $.createElement("span",{className:Y()("".concat(we.prefixCls,"-iconEle"),"".concat(we.prefixCls,"-icon__").concat(Ie||"docu"),(0,M.Z)({},"".concat(we.prefixCls,"-icon_loading"),mt))})},[we.prefixCls,Ie,mt]),St=$.useMemo(function(){var zr=!!we.draggable,Tr=!Se.disabled&&zr&&we.dragOverNodeKey===qe;return Tr?we.dropIndicatorRender({dropPosition:we.dropPosition,dropLevelOffset:we.dropLevelOffset,indent:we.indent,prefixCls:we.prefixCls,direction:we.direction}):null},[we.dropPosition,we.dropLevelOffset,we.indent,we.prefixCls,we.direction,we.draggable,we.dragOverNodeKey,we.dropIndicatorRender]),at=$.useMemo(function(){var zr=Se.title,Tr=zr===void 0?Ee:zr,fn="".concat(we.prefixCls,"-node-content-wrapper"),Ne;if(we.showIcon){var Ge=Se.icon||we.icon;Ne=Ge?$.createElement("span",{className:Y()("".concat(we.prefixCls,"-iconEle"),"".concat(we.prefixCls,"-icon__customize"))},typeof Ge=="function"?Ge(Se):Ge):Ot}else we.loadData&&mt&&(Ne=Ot);var ot;return typeof Tr=="function"?ot=Tr(ue):we.titleRender?ot=we.titleRender(ue):ot=Tr,$.createElement("span",{ref:Mt,title:typeof Tr=="string"?Tr:"",className:Y()(fn,"".concat(fn,"-").concat(Ie||"normal"),(0,M.Z)({},"".concat(we.prefixCls,"-node-selected"),!Pe&&(Tt||Dr))),onMouseEnter:Bt,onMouseLeave:Sn,onContextMenu:Lt,onClick:Me,onDoubleClick:At},Ne,$.createElement("span",{className:"".concat(we.prefixCls,"-title")},ot),St)},[we.prefixCls,we.showIcon,Se,we.icon,Ot,we.titleRender,ue,Ie,Bt,Sn,Lt,Me,At]),Xe=(0,te.Z)(Je,{aria:!0,data:!0}),Nt=(0,de.Z)(we.keyEntities,qe)||{},Nn=Nt.level,Jn=He[He.length-1],rr=!Pe&&Bn,Br=we.draggingNodeKey===qe,Hr=le!==void 0?{"aria-selected":!!le}:void 0;return $.createElement("div",(0,E.Z)({ref:Ht,role:"treeitem","aria-expanded":yt?void 0:bt,className:Y()(je,"".concat(we.prefixCls,"-treenode"),(Ue={},(0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)(Ue,"".concat(we.prefixCls,"-treenode-disabled"),Pe),"".concat(we.prefixCls,"-treenode-switcher-").concat(bt?"open":"close"),!yt),"".concat(we.prefixCls,"-treenode-checkbox-checked"),st),"".concat(we.prefixCls,"-treenode-checkbox-indeterminate"),Qe),"".concat(we.prefixCls,"-treenode-selected"),Tt),"".concat(we.prefixCls,"-treenode-loading"),mt),"".concat(we.prefixCls,"-treenode-active"),vt),"".concat(we.prefixCls,"-treenode-leaf-last"),Jn),"".concat(we.prefixCls,"-treenode-draggable"),Bn),"dragging",Br),(0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)(Ue,"drop-target",we.dropTargetKey===qe),"drop-container",we.dropContainerKey===qe),"drag-over",!Pe&&Ct),"drag-over-gap-top",!Pe&&ft),"drag-over-gap-bottom",!Pe&&Et),"filter-node",(be=we.filterTreeNode)===null||be===void 0?void 0:be.call(we,(0,he.F)(Se))),"".concat(we.prefixCls,"-treenode-leaf"),cn))),style:nt,draggable:rr,onDragStart:rr?en:void 0,onDragEnter:Bn?gn:void 0,onDragOver:Bn?ar:void 0,onDragLeave:Bn?Sr:void 0,onDrop:Bn?Gn:void 0,onDragEnd:Bn?In:void 0,onMouseMove:lt},Hr,Xe),$.createElement(K,{prefixCls:we.prefixCls,level:Nn,isStart:_t,isEnd:He}),Ln,mr(),Jr,at)};Le.isTreeNode=1;var ke=Le},17425:function(H,Q,i){"use strict";i.d(Q,{k:function(){return M},y:function(){return C}});var E=i(75271),M=E.createContext(null),C=E.createContext({})},91606:function(H,Q,i){"use strict";i.d(Q,{OF:function(){return je.Z},y6:function(){return se.y},ZP:function(){return ut}});var E=i(23022),M=i(5147),C=i(54153),n=i(46865),j=i(59295),$=i(45985),U=i(63662),Y=i(76525),te=i(56216),X=i(38926),B=i(82187),K=i.n(B),de=i(14583),he=i(71305),J=i(4449),ae=i(75271),se=i(17425),Ee=function(gt){var Gt=gt.dropPosition,Me=gt.dropLevelOffset,At=gt.indent,Bt={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(Gt){case-1:Bt.top=0,Bt.left=-Me*At;break;case 1:Bt.bottom=0,Bt.left=-Me*At;break;case 0:Bt.bottom=0,Bt.left=At;break}return ae.createElement("div",{style:Bt})},Le=Ee;function ke(Ve){if(Ve==null)throw new TypeError("Cannot destructure "+Ve)}var ye=i(89692),Se=i(58190),be=i(92076),Ue=i(98131),qe=i(62803),je=i(12634);function nt(Ve,gt){var Gt=ae.useState(!1),Me=(0,ye.Z)(Gt,2),At=Me[0],Bt=Me[1];(0,be.Z)(function(){if(At)return Ve(),function(){gt()}},[At]),(0,be.Z)(function(){return Bt(!0),function(){Bt(!1)}},[])}var Ct=nt,ft=i(37861),Et=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],yt=ae.forwardRef(function(Ve,gt){var Gt=Ve.className,Me=Ve.style,At=Ve.motion,Bt=Ve.motionNodes,Sn=Ve.motionType,Lt=Ve.onMotionStart,Bn=Ve.onMotionEnd,en=Ve.active,gn=Ve.treeNodeRequiredProps,ar=(0,Se.Z)(Ve,Et),Sr=ae.useState(!0),In=(0,ye.Z)(Sr,2),Gn=In[0],hn=In[1],mn=ae.useContext(se.k),cn=mn.prefixCls,Ln=Bt&&Sn!=="hide";(0,be.Z)(function(){Bt&&Ln!==Gn&&hn(Ln)},[Bt]);var Er=function(){Bt&&Lt()},mr=ae.useRef(!1),Jr=function(){Bt&&!mr.current&&(mr.current=!0,Bn())};Ct(Er,Jr);var Ie=function(St){Ln===St&&Jr()};return Bt?ae.createElement(qe.ZP,(0,E.Z)({ref:gt,visible:Gn},At,{motionAppear:Sn==="show",onVisibleChanged:Ie}),function(Ot,St){var at=Ot.className,Xe=Ot.style;return ae.createElement("div",{ref:St,className:K()("".concat(cn,"-treenode-motion"),at),style:Xe},Bt.map(function(Nt){var Nn=Object.assign({},(ke(Nt.data),Nt.data)),Jn=Nt.title,rr=Nt.key,Br=Nt.isStart,Hr=Nt.isEnd;delete Nn.children;var zr=(0,ft.H8)(rr,gn);return ae.createElement(je.Z,(0,E.Z)({},Nn,zr,{title:Jn,active:en,data:Nt.data,key:rr,isStart:Br,isEnd:Hr}))}))}):ae.createElement(je.Z,(0,E.Z)({domRef:gt,className:Gt,style:Me},ar,{active:en}))}),_t=yt;function He(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Gt=Ve.length,Me=gt.length;if(Math.abs(Gt-Me)!==1)return{add:!1,key:null};function At(Bt,Sn){var Lt=new Map;Bt.forEach(function(en){Lt.set(en,!0)});var Bn=Sn.filter(function(en){return!Lt.has(en)});return Bn.length===1?Bn[0]:null}return Gt<Me?{add:!0,key:At(Ve,gt)}:{add:!1,key:At(gt,Ve)}}function bt(Ve,gt,Gt){var Me=Ve.findIndex(function(Lt){return Lt.key===Gt}),At=Ve[Me+1],Bt=gt.findIndex(function(Lt){return Lt.key===Gt});if(At){var Sn=gt.findIndex(function(Lt){return Lt.key===At.key});return gt.slice(Bt+1,Sn)}return gt.slice(Bt+1)}var Tt=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],st={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Qe=function(){},mt="RC_TREE_MOTION_".concat(Math.random()),Ht={key:mt},vt={key:mt,level:0,index:0,pos:"0",node:Ht,nodes:[Ht]},ue={parent:null,children:[],pos:vt.pos,data:Ht,title:null,key:mt,isStart:[],isEnd:[]};function lt(Ve,gt,Gt,Me){return gt===!1||!Gt?Ve:Ve.slice(0,Math.ceil(Gt/Me)+1)}function le(Ve){var gt=Ve.key,Gt=Ve.pos;return(0,ft.km)(gt,Gt)}function Je(Ve){for(var gt=String(Ve.data.key),Gt=Ve;Gt.parent;)Gt=Gt.parent,gt="".concat(Gt.data.key," > ").concat(gt);return gt}var we=ae.forwardRef(function(Ve,gt){var Gt=Ve.prefixCls,Me=Ve.data,At=Ve.selectable,Bt=Ve.checkable,Sn=Ve.expandedKeys,Lt=Ve.selectedKeys,Bn=Ve.checkedKeys,en=Ve.loadedKeys,gn=Ve.loadingKeys,ar=Ve.halfCheckedKeys,Sr=Ve.keyEntities,In=Ve.disabled,Gn=Ve.dragging,hn=Ve.dragOverNodeKey,mn=Ve.dropPosition,cn=Ve.motion,Ln=Ve.height,Er=Ve.itemHeight,mr=Ve.virtual,Jr=Ve.scrollWidth,Ie=Ve.focusable,Ot=Ve.activeItem,St=Ve.focused,at=Ve.tabIndex,Xe=Ve.onKeyDown,Nt=Ve.onFocus,Nn=Ve.onBlur,Jn=Ve.onActiveChange,rr=Ve.onListChangeStart,Br=Ve.onListChangeEnd,Hr=(0,Se.Z)(Ve,Tt),zr=ae.useRef(null),Tr=ae.useRef(null);ae.useImperativeHandle(gt,function(){return{scrollTo:function(Vo){zr.current.scrollTo(Vo)},getIndentWidth:function(){return Tr.current.offsetWidth}}});var fn=ae.useState(Sn),Ne=(0,ye.Z)(fn,2),Ge=Ne[0],ot=Ne[1],Dt=ae.useState(Me),jt=(0,ye.Z)(Dt,2),sn=jt[0],xn=jt[1],rn=ae.useState(Me),Fn=(0,ye.Z)(rn,2),Un=Fn[0],jn=Fn[1],_n=ae.useState([]),Xn=(0,ye.Z)(_n,2),er=Xn[0],Yr=Xn[1],qr=ae.useState(null),Gr=(0,ye.Z)(qr,2),ci=Gr[0],Ci=Gr[1],Ki=ae.useRef(Me);Ki.current=Me;function Bi(){var po=Ki.current;xn(po),jn(po),Yr([]),Ci(null),Br()}(0,be.Z)(function(){ot(Sn);var po=He(Ge,Sn);if(po.key!==null)if(po.add){var Vo=sn.findIndex(function(Do){var oa=Do.key;return oa===po.key}),Xo=lt(bt(sn,Me,po.key),mr,Ln,Er),$o=sn.slice();$o.splice(Vo+1,0,ue),jn($o),Yr(Xo),Ci("show")}else{var Aa=Me.findIndex(function(Do){var oa=Do.key;return oa===po.key}),qa=lt(bt(Me,sn,po.key),mr,Ln,Er),Oo=Me.slice();Oo.splice(Aa+1,0,ue),jn(Oo),Yr(qa),Ci("hide")}else sn!==Me&&(xn(Me),jn(Me))},[Sn,Me]),ae.useEffect(function(){Gn||Bi()},[Gn]);var Di=cn?Un:Me,yo={expandedKeys:Sn,selectedKeys:Lt,loadedKeys:en,loadingKeys:gn,checkedKeys:Bn,halfCheckedKeys:ar,dragOverNodeKey:hn,dropPosition:mn,keyEntities:Sr};return ae.createElement(ae.Fragment,null,St&&Ot&&ae.createElement("span",{style:st,"aria-live":"assertive"},Je(Ot)),ae.createElement("div",null,ae.createElement("input",{style:st,disabled:Ie===!1||In,tabIndex:Ie!==!1?at:null,onKeyDown:Xe,onFocus:Nt,onBlur:Nn,value:"",onChange:Qe,"aria-label":"for screen reader"})),ae.createElement("div",{className:"".concat(Gt,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},ae.createElement("div",{className:"".concat(Gt,"-indent")},ae.createElement("div",{ref:Tr,className:"".concat(Gt,"-indent-unit")}))),ae.createElement(Ue.Z,(0,E.Z)({},Hr,{data:Di,itemKey:le,height:Ln,fullHeight:!1,virtual:mr,itemHeight:Er,scrollWidth:Jr,prefixCls:"".concat(Gt,"-list"),ref:zr,role:"tree",onVisibleChange:function(Vo){Vo.every(function(Xo){return le(Xo)!==mt})&&Bi()}}),function(po){var Vo=po.pos,Xo=Object.assign({},(ke(po.data),po.data)),$o=po.title,Aa=po.key,qa=po.isStart,Oo=po.isEnd,Do=(0,ft.km)(Aa,Vo);delete Xo.key,delete Xo.children;var oa=(0,ft.H8)(Do,yo);return ae.createElement(_t,(0,E.Z)({},Xo,oa,{title:$o,active:!!Ot&&Aa===Ot.key,pos:Vo,data:po.data,isStart:qa,isEnd:Oo,motion:cn,motionNodes:Aa===mt?er:null,motionType:ci,onMotionStart:rr,onMotionEnd:Bi,treeNodeRequiredProps:yo,onMouseMove:function(){Jn(null)}}))}))}),Pn=we,Mt=i(44443),or=i(59454),wr=i(19183),Dr=10,lr=function(Ve){(0,Y.Z)(Gt,Ve);var gt=(0,te.Z)(Gt);function Gt(){var Me;(0,j.Z)(this,Gt);for(var At=arguments.length,Bt=new Array(At),Sn=0;Sn<At;Sn++)Bt[Sn]=arguments[Sn];return Me=gt.call.apply(gt,[this].concat(Bt)),(0,X.Z)((0,U.Z)(Me),"destroyed",!1),(0,X.Z)((0,U.Z)(Me),"delayedDragEnterLogic",void 0),(0,X.Z)((0,U.Z)(Me),"loadingRetryTimes",{}),(0,X.Z)((0,U.Z)(Me),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,ft.w$)()}),(0,X.Z)((0,U.Z)(Me),"dragStartMousePosition",null),(0,X.Z)((0,U.Z)(Me),"dragNodeProps",null),(0,X.Z)((0,U.Z)(Me),"currentMouseOverDroppableNodeKey",null),(0,X.Z)((0,U.Z)(Me),"listRef",ae.createRef()),(0,X.Z)((0,U.Z)(Me),"onNodeDragStart",function(Lt,Bn){var en=Me.state,gn=en.expandedKeys,ar=en.keyEntities,Sr=Me.props.onDragStart,In=Bn.eventKey;Me.dragNodeProps=Bn,Me.dragStartMousePosition={x:Lt.clientX,y:Lt.clientY};var Gn=(0,Mt._5)(gn,In);Me.setState({draggingNodeKey:In,dragChildrenKeys:(0,Mt.wA)(In,ar),indent:Me.listRef.current.getIndentWidth()}),Me.setExpandedKeys(Gn),window.addEventListener("dragend",Me.onWindowDragEnd),Sr==null||Sr({event:Lt,node:(0,ft.F)(Bn)})}),(0,X.Z)((0,U.Z)(Me),"onNodeDragEnter",function(Lt,Bn){var en=Me.state,gn=en.expandedKeys,ar=en.keyEntities,Sr=en.dragChildrenKeys,In=en.flattenNodes,Gn=en.indent,hn=Me.props,mn=hn.onDragEnter,cn=hn.onExpand,Ln=hn.allowDrop,Er=hn.direction,mr=Bn.pos,Jr=Bn.eventKey;if(Me.currentMouseOverDroppableNodeKey!==Jr&&(Me.currentMouseOverDroppableNodeKey=Jr),!Me.dragNodeProps){Me.resetDragState();return}var Ie=(0,Mt.OM)(Lt,Me.dragNodeProps,Bn,Gn,Me.dragStartMousePosition,Ln,In,ar,gn,Er),Ot=Ie.dropPosition,St=Ie.dropLevelOffset,at=Ie.dropTargetKey,Xe=Ie.dropContainerKey,Nt=Ie.dropTargetPos,Nn=Ie.dropAllowed,Jn=Ie.dragOverNodeKey;if(Sr.includes(at)||!Nn){Me.resetDragState();return}if(Me.delayedDragEnterLogic||(Me.delayedDragEnterLogic={}),Object.keys(Me.delayedDragEnterLogic).forEach(function(rr){clearTimeout(Me.delayedDragEnterLogic[rr])}),Me.dragNodeProps.eventKey!==Bn.eventKey&&(Lt.persist(),Me.delayedDragEnterLogic[mr]=window.setTimeout(function(){if(Me.state.draggingNodeKey!==null){var rr=(0,n.Z)(gn),Br=(0,wr.Z)(ar,Bn.eventKey);Br&&(Br.children||[]).length&&(rr=(0,Mt.L0)(gn,Bn.eventKey)),Me.props.hasOwnProperty("expandedKeys")||Me.setExpandedKeys(rr),cn==null||cn(rr,{node:(0,ft.F)(Bn),expanded:!0,nativeEvent:Lt.nativeEvent})}},800)),Me.dragNodeProps.eventKey===at&&St===0){Me.resetDragState();return}Me.setState({dragOverNodeKey:Jn,dropPosition:Ot,dropLevelOffset:St,dropTargetKey:at,dropContainerKey:Xe,dropTargetPos:Nt,dropAllowed:Nn}),mn==null||mn({event:Lt,node:(0,ft.F)(Bn),expandedKeys:gn})}),(0,X.Z)((0,U.Z)(Me),"onNodeDragOver",function(Lt,Bn){var en=Me.state,gn=en.dragChildrenKeys,ar=en.flattenNodes,Sr=en.keyEntities,In=en.expandedKeys,Gn=en.indent,hn=Me.props,mn=hn.onDragOver,cn=hn.allowDrop,Ln=hn.direction;if(Me.dragNodeProps){var Er=(0,Mt.OM)(Lt,Me.dragNodeProps,Bn,Gn,Me.dragStartMousePosition,cn,ar,Sr,In,Ln),mr=Er.dropPosition,Jr=Er.dropLevelOffset,Ie=Er.dropTargetKey,Ot=Er.dropContainerKey,St=Er.dropTargetPos,at=Er.dropAllowed,Xe=Er.dragOverNodeKey;gn.includes(Ie)||!at||(Me.dragNodeProps.eventKey===Ie&&Jr===0?Me.state.dropPosition===null&&Me.state.dropLevelOffset===null&&Me.state.dropTargetKey===null&&Me.state.dropContainerKey===null&&Me.state.dropTargetPos===null&&Me.state.dropAllowed===!1&&Me.state.dragOverNodeKey===null||Me.resetDragState():mr===Me.state.dropPosition&&Jr===Me.state.dropLevelOffset&&Ie===Me.state.dropTargetKey&&Ot===Me.state.dropContainerKey&&St===Me.state.dropTargetPos&&at===Me.state.dropAllowed&&Xe===Me.state.dragOverNodeKey||Me.setState({dropPosition:mr,dropLevelOffset:Jr,dropTargetKey:Ie,dropContainerKey:Ot,dropTargetPos:St,dropAllowed:at,dragOverNodeKey:Xe}),mn==null||mn({event:Lt,node:(0,ft.F)(Bn)}))}}),(0,X.Z)((0,U.Z)(Me),"onNodeDragLeave",function(Lt,Bn){Me.currentMouseOverDroppableNodeKey===Bn.eventKey&&!Lt.currentTarget.contains(Lt.relatedTarget)&&(Me.resetDragState(),Me.currentMouseOverDroppableNodeKey=null);var en=Me.props.onDragLeave;en==null||en({event:Lt,node:(0,ft.F)(Bn)})}),(0,X.Z)((0,U.Z)(Me),"onWindowDragEnd",function(Lt){Me.onNodeDragEnd(Lt,null,!0),window.removeEventListener("dragend",Me.onWindowDragEnd)}),(0,X.Z)((0,U.Z)(Me),"onNodeDragEnd",function(Lt,Bn){var en=Me.props.onDragEnd;Me.setState({dragOverNodeKey:null}),Me.cleanDragState(),en==null||en({event:Lt,node:(0,ft.F)(Bn)}),Me.dragNodeProps=null,window.removeEventListener("dragend",Me.onWindowDragEnd)}),(0,X.Z)((0,U.Z)(Me),"onNodeDrop",function(Lt,Bn){var en,gn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ar=Me.state,Sr=ar.dragChildrenKeys,In=ar.dropPosition,Gn=ar.dropTargetKey,hn=ar.dropTargetPos,mn=ar.dropAllowed;if(mn){var cn=Me.props.onDrop;if(Me.setState({dragOverNodeKey:null}),Me.cleanDragState(),Gn!==null){var Ln=(0,C.Z)((0,C.Z)({},(0,ft.H8)(Gn,Me.getTreeNodeRequiredProps())),{},{active:((en=Me.getActiveItem())===null||en===void 0?void 0:en.key)===Gn,data:(0,wr.Z)(Me.state.keyEntities,Gn).node}),Er=Sr.includes(Gn);(0,J.ZP)(!Er,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var mr=(0,Mt.yx)(hn),Jr={event:Lt,node:(0,ft.F)(Ln),dragNode:Me.dragNodeProps?(0,ft.F)(Me.dragNodeProps):null,dragNodesKeys:[Me.dragNodeProps.eventKey].concat(Sr),dropToGap:In!==0,dropPosition:In+Number(mr[mr.length-1])};gn||cn==null||cn(Jr),Me.dragNodeProps=null}}}),(0,X.Z)((0,U.Z)(Me),"cleanDragState",function(){var Lt=Me.state.draggingNodeKey;Lt!==null&&Me.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),Me.dragStartMousePosition=null,Me.currentMouseOverDroppableNodeKey=null}),(0,X.Z)((0,U.Z)(Me),"triggerExpandActionExpand",function(Lt,Bn){var en=Me.state,gn=en.expandedKeys,ar=en.flattenNodes,Sr=Bn.expanded,In=Bn.key,Gn=Bn.isLeaf;if(!(Gn||Lt.shiftKey||Lt.metaKey||Lt.ctrlKey)){var hn=ar.filter(function(cn){return cn.key===In})[0],mn=(0,ft.F)((0,C.Z)((0,C.Z)({},(0,ft.H8)(In,Me.getTreeNodeRequiredProps())),{},{data:hn.data}));Me.setExpandedKeys(Sr?(0,Mt._5)(gn,In):(0,Mt.L0)(gn,In)),Me.onNodeExpand(Lt,mn)}}),(0,X.Z)((0,U.Z)(Me),"onNodeClick",function(Lt,Bn){var en=Me.props,gn=en.onClick,ar=en.expandAction;ar==="click"&&Me.triggerExpandActionExpand(Lt,Bn),gn==null||gn(Lt,Bn)}),(0,X.Z)((0,U.Z)(Me),"onNodeDoubleClick",function(Lt,Bn){var en=Me.props,gn=en.onDoubleClick,ar=en.expandAction;ar==="doubleClick"&&Me.triggerExpandActionExpand(Lt,Bn),gn==null||gn(Lt,Bn)}),(0,X.Z)((0,U.Z)(Me),"onNodeSelect",function(Lt,Bn){var en=Me.state.selectedKeys,gn=Me.state,ar=gn.keyEntities,Sr=gn.fieldNames,In=Me.props,Gn=In.onSelect,hn=In.multiple,mn=Bn.selected,cn=Bn[Sr.key],Ln=!mn;Ln?hn?en=(0,Mt.L0)(en,cn):en=[cn]:en=(0,Mt._5)(en,cn);var Er=en.map(function(mr){var Jr=(0,wr.Z)(ar,mr);return Jr?Jr.node:null}).filter(Boolean);Me.setUncontrolledState({selectedKeys:en}),Gn==null||Gn(en,{event:"select",selected:Ln,node:Bn,selectedNodes:Er,nativeEvent:Lt.nativeEvent})}),(0,X.Z)((0,U.Z)(Me),"onNodeCheck",function(Lt,Bn,en){var gn=Me.state,ar=gn.keyEntities,Sr=gn.checkedKeys,In=gn.halfCheckedKeys,Gn=Me.props,hn=Gn.checkStrictly,mn=Gn.onCheck,cn=Bn.key,Ln,Er={event:"check",node:Bn,checked:en,nativeEvent:Lt.nativeEvent};if(hn){var mr=en?(0,Mt.L0)(Sr,cn):(0,Mt._5)(Sr,cn),Jr=(0,Mt._5)(In,cn);Ln={checked:mr,halfChecked:Jr},Er.checkedNodes=mr.map(function(Nt){return(0,wr.Z)(ar,Nt)}).filter(Boolean).map(function(Nt){return Nt.node}),Me.setUncontrolledState({checkedKeys:mr})}else{var Ie=(0,or.S)([].concat((0,n.Z)(Sr),[cn]),!0,ar),Ot=Ie.checkedKeys,St=Ie.halfCheckedKeys;if(!en){var at=new Set(Ot);at.delete(cn);var Xe=(0,or.S)(Array.from(at),{checked:!1,halfCheckedKeys:St},ar);Ot=Xe.checkedKeys,St=Xe.halfCheckedKeys}Ln=Ot,Er.checkedNodes=[],Er.checkedNodesPositions=[],Er.halfCheckedKeys=St,Ot.forEach(function(Nt){var Nn=(0,wr.Z)(ar,Nt);if(Nn){var Jn=Nn.node,rr=Nn.pos;Er.checkedNodes.push(Jn),Er.checkedNodesPositions.push({node:Jn,pos:rr})}}),Me.setUncontrolledState({checkedKeys:Ot},!1,{halfCheckedKeys:St})}mn==null||mn(Ln,Er)}),(0,X.Z)((0,U.Z)(Me),"onNodeLoad",function(Lt){var Bn,en=Lt.key,gn=Me.state.keyEntities,ar=(0,wr.Z)(gn,en);if(!(ar!=null&&(Bn=ar.children)!==null&&Bn!==void 0&&Bn.length)){var Sr=new Promise(function(In,Gn){Me.setState(function(hn){var mn=hn.loadedKeys,cn=mn===void 0?[]:mn,Ln=hn.loadingKeys,Er=Ln===void 0?[]:Ln,mr=Me.props,Jr=mr.loadData,Ie=mr.onLoad;if(!Jr||cn.includes(en)||Er.includes(en))return null;var Ot=Jr(Lt);return Ot.then(function(){var St=Me.state.loadedKeys,at=(0,Mt.L0)(St,en);Ie==null||Ie(at,{event:"load",node:Lt}),Me.setUncontrolledState({loadedKeys:at}),Me.setState(function(Xe){return{loadingKeys:(0,Mt._5)(Xe.loadingKeys,en)}}),In()}).catch(function(St){if(Me.setState(function(Xe){return{loadingKeys:(0,Mt._5)(Xe.loadingKeys,en)}}),Me.loadingRetryTimes[en]=(Me.loadingRetryTimes[en]||0)+1,Me.loadingRetryTimes[en]>=Dr){var at=Me.state.loadedKeys;(0,J.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),Me.setUncontrolledState({loadedKeys:(0,Mt.L0)(at,en)}),In()}Gn(St)}),{loadingKeys:(0,Mt.L0)(Er,en)}})});return Sr.catch(function(){}),Sr}}),(0,X.Z)((0,U.Z)(Me),"onNodeMouseEnter",function(Lt,Bn){var en=Me.props.onMouseEnter;en==null||en({event:Lt,node:Bn})}),(0,X.Z)((0,U.Z)(Me),"onNodeMouseLeave",function(Lt,Bn){var en=Me.props.onMouseLeave;en==null||en({event:Lt,node:Bn})}),(0,X.Z)((0,U.Z)(Me),"onNodeContextMenu",function(Lt,Bn){var en=Me.props.onRightClick;en&&(Lt.preventDefault(),en({event:Lt,node:Bn}))}),(0,X.Z)((0,U.Z)(Me),"onFocus",function(){var Lt=Me.props.onFocus;Me.setState({focused:!0});for(var Bn=arguments.length,en=new Array(Bn),gn=0;gn<Bn;gn++)en[gn]=arguments[gn];Lt==null||Lt.apply(void 0,en)}),(0,X.Z)((0,U.Z)(Me),"onBlur",function(){var Lt=Me.props.onBlur;Me.setState({focused:!1}),Me.onActiveChange(null);for(var Bn=arguments.length,en=new Array(Bn),gn=0;gn<Bn;gn++)en[gn]=arguments[gn];Lt==null||Lt.apply(void 0,en)}),(0,X.Z)((0,U.Z)(Me),"getTreeNodeRequiredProps",function(){var Lt=Me.state,Bn=Lt.expandedKeys,en=Lt.selectedKeys,gn=Lt.loadedKeys,ar=Lt.loadingKeys,Sr=Lt.checkedKeys,In=Lt.halfCheckedKeys,Gn=Lt.dragOverNodeKey,hn=Lt.dropPosition,mn=Lt.keyEntities;return{expandedKeys:Bn||[],selectedKeys:en||[],loadedKeys:gn||[],loadingKeys:ar||[],checkedKeys:Sr||[],halfCheckedKeys:In||[],dragOverNodeKey:Gn,dropPosition:hn,keyEntities:mn}}),(0,X.Z)((0,U.Z)(Me),"setExpandedKeys",function(Lt){var Bn=Me.state,en=Bn.treeData,gn=Bn.fieldNames,ar=(0,ft.oH)(en,Lt,gn);Me.setUncontrolledState({expandedKeys:Lt,flattenNodes:ar},!0)}),(0,X.Z)((0,U.Z)(Me),"onNodeExpand",function(Lt,Bn){var en=Me.state.expandedKeys,gn=Me.state,ar=gn.listChanging,Sr=gn.fieldNames,In=Me.props,Gn=In.onExpand,hn=In.loadData,mn=Bn.expanded,cn=Bn[Sr.key];if(!ar){var Ln=en.includes(cn),Er=!mn;if((0,J.ZP)(mn&&Ln||!mn&&!Ln,"Expand state not sync with index check"),en=Er?(0,Mt.L0)(en,cn):(0,Mt._5)(en,cn),Me.setExpandedKeys(en),Gn==null||Gn(en,{node:Bn,expanded:Er,nativeEvent:Lt.nativeEvent}),Er&&hn){var mr=Me.onNodeLoad(Bn);mr&&mr.then(function(){var Jr=(0,ft.oH)(Me.state.treeData,en,Sr);Me.setUncontrolledState({flattenNodes:Jr})}).catch(function(){var Jr=Me.state.expandedKeys,Ie=(0,Mt._5)(Jr,cn);Me.setExpandedKeys(Ie)})}}}),(0,X.Z)((0,U.Z)(Me),"onListChangeStart",function(){Me.setUncontrolledState({listChanging:!0})}),(0,X.Z)((0,U.Z)(Me),"onListChangeEnd",function(){setTimeout(function(){Me.setUncontrolledState({listChanging:!1})})}),(0,X.Z)((0,U.Z)(Me),"onActiveChange",function(Lt){var Bn=Me.state.activeKey,en=Me.props,gn=en.onActiveChange,ar=en.itemScrollOffset,Sr=ar===void 0?0:ar;Bn!==Lt&&(Me.setState({activeKey:Lt}),Lt!==null&&Me.scrollTo({key:Lt,offset:Sr}),gn==null||gn(Lt))}),(0,X.Z)((0,U.Z)(Me),"getActiveItem",function(){var Lt=Me.state,Bn=Lt.activeKey,en=Lt.flattenNodes;return Bn===null?null:en.find(function(gn){var ar=gn.key;return ar===Bn})||null}),(0,X.Z)((0,U.Z)(Me),"offsetActiveKey",function(Lt){var Bn=Me.state,en=Bn.flattenNodes,gn=Bn.activeKey,ar=en.findIndex(function(Gn){var hn=Gn.key;return hn===gn});ar===-1&&Lt<0&&(ar=en.length),ar=(ar+Lt+en.length)%en.length;var Sr=en[ar];if(Sr){var In=Sr.key;Me.onActiveChange(In)}else Me.onActiveChange(null)}),(0,X.Z)((0,U.Z)(Me),"onKeyDown",function(Lt){var Bn=Me.state,en=Bn.activeKey,gn=Bn.expandedKeys,ar=Bn.checkedKeys,Sr=Bn.fieldNames,In=Me.props,Gn=In.onKeyDown,hn=In.checkable,mn=In.selectable;switch(Lt.which){case de.Z.UP:{Me.offsetActiveKey(-1),Lt.preventDefault();break}case de.Z.DOWN:{Me.offsetActiveKey(1),Lt.preventDefault();break}}var cn=Me.getActiveItem();if(cn&&cn.data){var Ln=Me.getTreeNodeRequiredProps(),Er=cn.data.isLeaf===!1||!!(cn.data[Sr.children]||[]).length,mr=(0,ft.F)((0,C.Z)((0,C.Z)({},(0,ft.H8)(en,Ln)),{},{data:cn.data,active:!0}));switch(Lt.which){case de.Z.LEFT:{Er&&gn.includes(en)?Me.onNodeExpand({},mr):cn.parent&&Me.onActiveChange(cn.parent.key),Lt.preventDefault();break}case de.Z.RIGHT:{Er&&!gn.includes(en)?Me.onNodeExpand({},mr):cn.children&&cn.children.length&&Me.onActiveChange(cn.children[0].key),Lt.preventDefault();break}case de.Z.ENTER:case de.Z.SPACE:{hn&&!mr.disabled&&mr.checkable!==!1&&!mr.disableCheckbox?Me.onNodeCheck({},mr,!ar.includes(en)):!hn&&mn&&!mr.disabled&&mr.selectable!==!1&&Me.onNodeSelect({},mr);break}}}Gn==null||Gn(Lt)}),(0,X.Z)((0,U.Z)(Me),"setUncontrolledState",function(Lt){var Bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,en=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Me.destroyed){var gn=!1,ar=!0,Sr={};Object.keys(Lt).forEach(function(In){if(Me.props.hasOwnProperty(In)){ar=!1;return}gn=!0,Sr[In]=Lt[In]}),gn&&(!Bn||ar)&&Me.setState((0,C.Z)((0,C.Z)({},Sr),en))}}),(0,X.Z)((0,U.Z)(Me),"scrollTo",function(Lt){Me.listRef.current.scrollTo(Lt)}),Me}return(0,$.Z)(Gt,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var At=this.props,Bt=At.activeKey,Sn=At.itemScrollOffset,Lt=Sn===void 0?0:Sn;Bt!==void 0&&Bt!==this.state.activeKey&&(this.setState({activeKey:Bt}),Bt!==null&&this.scrollTo({key:Bt,offset:Lt}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var At=this.state,Bt=At.focused,Sn=At.flattenNodes,Lt=At.keyEntities,Bn=At.draggingNodeKey,en=At.activeKey,gn=At.dropLevelOffset,ar=At.dropContainerKey,Sr=At.dropTargetKey,In=At.dropPosition,Gn=At.dragOverNodeKey,hn=At.indent,mn=this.props,cn=mn.prefixCls,Ln=mn.className,Er=mn.style,mr=mn.showLine,Jr=mn.focusable,Ie=mn.tabIndex,Ot=Ie===void 0?0:Ie,St=mn.selectable,at=mn.showIcon,Xe=mn.icon,Nt=mn.switcherIcon,Nn=mn.draggable,Jn=mn.checkable,rr=mn.checkStrictly,Br=mn.disabled,Hr=mn.motion,zr=mn.loadData,Tr=mn.filterTreeNode,fn=mn.height,Ne=mn.itemHeight,Ge=mn.scrollWidth,ot=mn.virtual,Dt=mn.titleRender,jt=mn.dropIndicatorRender,sn=mn.onContextMenu,xn=mn.onScroll,rn=mn.direction,Fn=mn.rootClassName,Un=mn.rootStyle,jn=(0,he.Z)(this.props,{aria:!0,data:!0}),_n;Nn&&((0,M.Z)(Nn)==="object"?_n=Nn:typeof Nn=="function"?_n={nodeDraggable:Nn}:_n={});var Xn={prefixCls:cn,selectable:St,showIcon:at,icon:Xe,switcherIcon:Nt,draggable:_n,draggingNodeKey:Bn,checkable:Jn,checkStrictly:rr,disabled:Br,keyEntities:Lt,dropLevelOffset:gn,dropContainerKey:ar,dropTargetKey:Sr,dropPosition:In,dragOverNodeKey:Gn,indent:hn,direction:rn,dropIndicatorRender:jt,loadData:zr,filterTreeNode:Tr,titleRender:Dt,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return ae.createElement(se.k.Provider,{value:Xn},ae.createElement("div",{className:K()(cn,Ln,Fn,(0,X.Z)((0,X.Z)((0,X.Z)({},"".concat(cn,"-show-line"),mr),"".concat(cn,"-focused"),Bt),"".concat(cn,"-active-focused"),en!==null)),style:Un},ae.createElement(Pn,(0,E.Z)({ref:this.listRef,prefixCls:cn,style:Er,data:Sn,disabled:Br,selectable:St,checkable:!!Jn,motion:Hr,dragging:Bn!==null,height:fn,itemHeight:Ne,virtual:ot,focusable:Jr,focused:Bt,tabIndex:Ot,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:sn,onScroll:xn,scrollWidth:Ge},this.getTreeNodeRequiredProps(),jn))))}}],[{key:"getDerivedStateFromProps",value:function(At,Bt){var Sn=Bt.prevProps,Lt={prevProps:At};function Bn(Ot){return!Sn&&At.hasOwnProperty(Ot)||Sn&&Sn[Ot]!==At[Ot]}var en,gn=Bt.fieldNames;if(Bn("fieldNames")&&(gn=(0,ft.w$)(At.fieldNames),Lt.fieldNames=gn),Bn("treeData")?en=At.treeData:Bn("children")&&((0,J.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),en=(0,ft.zn)(At.children)),en){Lt.treeData=en;var ar=(0,ft.I8)(en,{fieldNames:gn});Lt.keyEntities=(0,C.Z)((0,X.Z)({},mt,vt),ar.keyEntities)}var Sr=Lt.keyEntities||Bt.keyEntities;if(Bn("expandedKeys")||Sn&&Bn("autoExpandParent"))Lt.expandedKeys=At.autoExpandParent||!Sn&&At.defaultExpandParent?(0,Mt.r7)(At.expandedKeys,Sr):At.expandedKeys;else if(!Sn&&At.defaultExpandAll){var In=(0,C.Z)({},Sr);delete In[mt];var Gn=[];Object.keys(In).forEach(function(Ot){var St=In[Ot];St.children&&St.children.length&&Gn.push(St.key)}),Lt.expandedKeys=Gn}else!Sn&&At.defaultExpandedKeys&&(Lt.expandedKeys=At.autoExpandParent||At.defaultExpandParent?(0,Mt.r7)(At.defaultExpandedKeys,Sr):At.defaultExpandedKeys);if(Lt.expandedKeys||delete Lt.expandedKeys,en||Lt.expandedKeys){var hn=(0,ft.oH)(en||Bt.treeData,Lt.expandedKeys||Bt.expandedKeys,gn);Lt.flattenNodes=hn}if(At.selectable&&(Bn("selectedKeys")?Lt.selectedKeys=(0,Mt.BT)(At.selectedKeys,At):!Sn&&At.defaultSelectedKeys&&(Lt.selectedKeys=(0,Mt.BT)(At.defaultSelectedKeys,At))),At.checkable){var mn;if(Bn("checkedKeys")?mn=(0,Mt.E6)(At.checkedKeys)||{}:!Sn&&At.defaultCheckedKeys?mn=(0,Mt.E6)(At.defaultCheckedKeys)||{}:en&&(mn=(0,Mt.E6)(At.checkedKeys)||{checkedKeys:Bt.checkedKeys,halfCheckedKeys:Bt.halfCheckedKeys}),mn){var cn=mn,Ln=cn.checkedKeys,Er=Ln===void 0?[]:Ln,mr=cn.halfCheckedKeys,Jr=mr===void 0?[]:mr;if(!At.checkStrictly){var Ie=(0,or.S)(Er,!0,Sr);Er=Ie.checkedKeys,Jr=Ie.halfCheckedKeys}Lt.checkedKeys=Er,Lt.halfCheckedKeys=Jr}}return Bn("loadedKeys")&&(Lt.loadedKeys=At.loadedKeys),Lt}}]),Gt}(ae.Component);(0,X.Z)(lr,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Le,allowDrop:function(){return!0},expandAction:!1}),(0,X.Z)(lr,"TreeNode",je.Z);var Pe=lr,ut=Pe},44443:function(H,Q,i){"use strict";i.d(Q,{BT:function(){return ae},E6:function(){return Le},L0:function(){return X},OM:function(){return J},_5:function(){return te},r7:function(){return ke},wA:function(){return K},yx:function(){return B}});var E=i(46865),M=i(5147),C=i(4449),n=i(75271),j=i(12634),$=i(19183),U=i(37861),Y=null;function te(ye,Se){if(!ye)return[];var be=ye.slice(),Ue=be.indexOf(Se);return Ue>=0&&be.splice(Ue,1),be}function X(ye,Se){var be=(ye||[]).slice();return be.indexOf(Se)===-1&&be.push(Se),be}function B(ye){return ye.split("-")}function K(ye,Se){var be=[],Ue=(0,$.Z)(Se,ye);function qe(){var je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];je.forEach(function(nt){var Ct=nt.key,ft=nt.children;be.push(Ct),qe(ft)})}return qe(Ue.children),be}function de(ye){if(ye.parent){var Se=B(ye.pos);return Number(Se[Se.length-1])===ye.parent.children.length-1}return!1}function he(ye){var Se=B(ye.pos);return Number(Se[Se.length-1])===0}function J(ye,Se,be,Ue,qe,je,nt,Ct,ft,Et){var yt,_t=ye.clientX,He=ye.clientY,bt=ye.target.getBoundingClientRect(),Tt=bt.top,st=bt.height,Qe=(Et==="rtl"?-1:1)*(((qe==null?void 0:qe.x)||0)-_t),mt=(Qe-12)/Ue,Ht=ft.filter(function(ut){var Ve;return(Ve=Ct[ut])===null||Ve===void 0||(Ve=Ve.children)===null||Ve===void 0?void 0:Ve.length}),vt=(0,$.Z)(Ct,be.eventKey);if(He<Tt+st/2){var ue=nt.findIndex(function(ut){return ut.key===vt.key}),lt=ue<=0?0:ue-1,le=nt[lt].key;vt=(0,$.Z)(Ct,le)}var Je=vt.key,we=vt,Pn=vt.key,Mt=0,or=0;if(!Ht.includes(Je))for(var wr=0;wr<mt&&de(vt);wr+=1)vt=vt.parent,or+=1;var Dr=Se.data,lr=vt.node,Pe=!0;return he(vt)&&vt.level===0&&He<Tt+st/2&&je({dragNode:Dr,dropNode:lr,dropPosition:-1})&&vt.key===be.eventKey?Mt=-1:(we.children||[]).length&&Ht.includes(Pn)?je({dragNode:Dr,dropNode:lr,dropPosition:0})?Mt=0:Pe=!1:or===0?mt>-1.5?je({dragNode:Dr,dropNode:lr,dropPosition:1})?Mt=1:Pe=!1:je({dragNode:Dr,dropNode:lr,dropPosition:0})?Mt=0:je({dragNode:Dr,dropNode:lr,dropPosition:1})?Mt=1:Pe=!1:je({dragNode:Dr,dropNode:lr,dropPosition:1})?Mt=1:Pe=!1,{dropPosition:Mt,dropLevelOffset:or,dropTargetKey:vt.key,dropTargetPos:vt.pos,dragOverNodeKey:Pn,dropContainerKey:Mt===0?null:((yt=vt.parent)===null||yt===void 0?void 0:yt.key)||null,dropAllowed:Pe}}function ae(ye,Se){if(ye){var be=Se.multiple;return be?ye.slice():ye.length?[ye[0]]:ye}}var se=function(Se){return Se};function Ee(ye,Se){if(!ye)return[];var be=Se||{},Ue=be.processProps,qe=Ue===void 0?se:Ue,je=Array.isArray(ye)?ye:[ye];return je.map(function(nt){var Ct=nt.children,ft=_objectWithoutProperties(nt,Y),Et=Ee(Ct,Se);return React.createElement(TreeNode,_extends({key:ft.key},qe(ft)),Et)})}function Le(ye){if(!ye)return null;var Se;if(Array.isArray(ye))Se={checkedKeys:ye,halfCheckedKeys:void 0};else if((0,M.Z)(ye)==="object")Se={checkedKeys:ye.checked||void 0,halfCheckedKeys:ye.halfChecked||void 0};else return(0,C.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return Se}function ke(ye,Se){var be=new Set;function Ue(qe){if(!be.has(qe)){var je=(0,$.Z)(Se,qe);if(je){be.add(qe);var nt=je.parent,Ct=je.node;Ct.disabled||nt&&Ue(nt.key)}}}return(ye||[]).forEach(function(qe){Ue(qe)}),(0,E.Z)(be)}},59454:function(H,Q,i){"use strict";i.d(Q,{S:function(){return U}});var E=i(4449),M=i(19183);function C(Y,te){var X=new Set;return Y.forEach(function(B){te.has(B)||X.add(B)}),X}function n(Y){var te=Y||{},X=te.disabled,B=te.disableCheckbox,K=te.checkable;return!!(X||B)||K===!1}function j(Y,te,X,B){for(var K=new Set(Y),de=new Set,he=0;he<=X;he+=1){var J=te.get(he)||new Set;J.forEach(function(Le){var ke=Le.key,ye=Le.node,Se=Le.children,be=Se===void 0?[]:Se;K.has(ke)&&!B(ye)&&be.filter(function(Ue){return!B(Ue.node)}).forEach(function(Ue){K.add(Ue.key)})})}for(var ae=new Set,se=X;se>=0;se-=1){var Ee=te.get(se)||new Set;Ee.forEach(function(Le){var ke=Le.parent,ye=Le.node;if(!(B(ye)||!Le.parent||ae.has(Le.parent.key))){if(B(Le.parent.node)){ae.add(ke.key);return}var Se=!0,be=!1;(ke.children||[]).filter(function(Ue){return!B(Ue.node)}).forEach(function(Ue){var qe=Ue.key,je=K.has(qe);Se&&!je&&(Se=!1),!be&&(je||de.has(qe))&&(be=!0)}),Se&&K.add(ke.key),be&&de.add(ke.key),ae.add(ke.key)}})}return{checkedKeys:Array.from(K),halfCheckedKeys:Array.from(C(de,K))}}function $(Y,te,X,B,K){for(var de=new Set(Y),he=new Set(te),J=0;J<=B;J+=1){var ae=X.get(J)||new Set;ae.forEach(function(ke){var ye=ke.key,Se=ke.node,be=ke.children,Ue=be===void 0?[]:be;!de.has(ye)&&!he.has(ye)&&!K(Se)&&Ue.filter(function(qe){return!K(qe.node)}).forEach(function(qe){de.delete(qe.key)})})}he=new Set;for(var se=new Set,Ee=B;Ee>=0;Ee-=1){var Le=X.get(Ee)||new Set;Le.forEach(function(ke){var ye=ke.parent,Se=ke.node;if(!(K(Se)||!ke.parent||se.has(ke.parent.key))){if(K(ke.parent.node)){se.add(ye.key);return}var be=!0,Ue=!1;(ye.children||[]).filter(function(qe){return!K(qe.node)}).forEach(function(qe){var je=qe.key,nt=de.has(je);be&&!nt&&(be=!1),!Ue&&(nt||he.has(je))&&(Ue=!0)}),be||de.delete(ye.key),Ue&&he.add(ye.key),se.add(ye.key)}})}return{checkedKeys:Array.from(de),halfCheckedKeys:Array.from(C(he,de))}}function U(Y,te,X,B){var K=[],de;B?de=B:de=n;var he=new Set(Y.filter(function(Ee){var Le=!!(0,M.Z)(X,Ee);return Le||K.push(Ee),Le})),J=new Map,ae=0;Object.keys(X).forEach(function(Ee){var Le=X[Ee],ke=Le.level,ye=J.get(ke);ye||(ye=new Set,J.set(ke,ye)),ye.add(Le),ae=Math.max(ae,ke)}),(0,E.ZP)(!K.length,"Tree missing follow keys: ".concat(K.slice(0,100).map(function(Ee){return"'".concat(Ee,"'")}).join(", ")));var se;return te===!0?se=j(he,J,ae,de):se=$(he,te.halfCheckedKeys,J,ae,de),se}},19183:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){return M[C]}},37861:function(H,Q,i){"use strict";i.d(Q,{F:function(){return ke},H8:function(){return Le},I8:function(){return Ee},km:function(){return K},oH:function(){return ae},w$:function(){return de},zn:function(){return J}});var E=i(5147),M=i(46865),C=i(54153),n=i(58190),j=i(81626),$=i(18051),U=i(4449),Y=i(19183),te=["children"];function X(ye,Se){return"".concat(ye,"-").concat(Se)}function B(ye){return ye&&ye.type&&ye.type.isTreeNode}function K(ye,Se){return ye!=null?ye:Se}function de(ye){var Se=ye||{},be=Se.title,Ue=Se._title,qe=Se.key,je=Se.children,nt=be||"title";return{title:nt,_title:Ue||[nt],key:qe||"key",children:je||"children"}}function he(ye,Se){var be=new Map;function Ue(qe){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(qe||[]).forEach(function(nt){var Ct=nt[Se.key],ft=nt[Se.children];warning(Ct!=null,"Tree node must have a certain key: [".concat(je).concat(Ct,"]"));var Et=String(Ct);warning(!be.has(Et)||Ct===null||Ct===void 0,"Same 'key' exist in the Tree: ".concat(Et)),be.set(Et,!0),Ue(ft,"".concat(je).concat(Et," > "))})}Ue(ye)}function J(ye){function Se(be){var Ue=(0,j.Z)(be);return Ue.map(function(qe){if(!B(qe))return(0,U.ZP)(!qe,"Tree/TreeNode can only accept TreeNode as children."),null;var je=qe.key,nt=qe.props,Ct=nt.children,ft=(0,n.Z)(nt,te),Et=(0,C.Z)({key:je},ft),yt=Se(Ct);return yt.length&&(Et.children=yt),Et}).filter(function(qe){return qe})}return Se(ye)}function ae(ye,Se,be){var Ue=de(be),qe=Ue._title,je=Ue.key,nt=Ue.children,Ct=new Set(Se===!0?[]:Se),ft=[];function Et(yt){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return yt.map(function(He,bt){for(var Tt=X(_t?_t.pos:"0",bt),st=K(He[je],Tt),Qe,mt=0;mt<qe.length;mt+=1){var Ht=qe[mt];if(He[Ht]!==void 0){Qe=He[Ht];break}}var vt=Object.assign((0,$.Z)(He,[].concat((0,M.Z)(qe),[je,nt])),{title:Qe,key:st,parent:_t,pos:Tt,children:null,data:He,isStart:[].concat((0,M.Z)(_t?_t.isStart:[]),[bt===0]),isEnd:[].concat((0,M.Z)(_t?_t.isEnd:[]),[bt===yt.length-1])});return ft.push(vt),Se===!0||Ct.has(st)?vt.children=Et(He[nt]||[],vt):vt.children=[],vt})}return Et(ye),ft}function se(ye,Se,be){var Ue={};(0,E.Z)(be)==="object"?Ue=be:Ue={externalGetKey:be},Ue=Ue||{};var qe=Ue,je=qe.childrenPropName,nt=qe.externalGetKey,Ct=qe.fieldNames,ft=de(Ct),Et=ft.key,yt=ft.children,_t=je||yt,He;nt?typeof nt=="string"?He=function(st){return st[nt]}:typeof nt=="function"&&(He=function(st){return nt(st)}):He=function(st,Qe){return K(st[Et],Qe)};function bt(Tt,st,Qe,mt){var Ht=Tt?Tt[_t]:ye,vt=Tt?X(Qe.pos,st):"0",ue=Tt?[].concat((0,M.Z)(mt),[Tt]):[];if(Tt){var lt=He(Tt,vt),le={node:Tt,index:st,pos:vt,key:lt,parentPos:Qe.node?Qe.pos:null,level:Qe.level+1,nodes:ue};Se(le)}Ht&&Ht.forEach(function(Je,we){bt(Je,we,{node:Tt,pos:vt,level:Qe?Qe.level+1:-1},ue)})}bt(null)}function Ee(ye){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=Se.initWrapper,Ue=Se.processEntity,qe=Se.onProcessFinished,je=Se.externalGetKey,nt=Se.childrenPropName,Ct=Se.fieldNames,ft=arguments.length>2?arguments[2]:void 0,Et=je||ft,yt={},_t={},He={posEntities:yt,keyEntities:_t};return be&&(He=be(He)||He),se(ye,function(bt){var Tt=bt.node,st=bt.index,Qe=bt.pos,mt=bt.key,Ht=bt.parentPos,vt=bt.level,ue=bt.nodes,lt={node:Tt,nodes:ue,index:st,key:mt,pos:Qe,level:vt},le=K(mt,Qe);yt[Qe]=lt,_t[le]=lt,lt.parent=yt[Ht],lt.parent&&(lt.parent.children=lt.parent.children||[],lt.parent.children.push(lt)),Ue&&Ue(lt,He)},{externalGetKey:Et,childrenPropName:nt,fieldNames:Ct}),qe&&qe(He),He}function Le(ye,Se){var be=Se.expandedKeys,Ue=Se.selectedKeys,qe=Se.loadedKeys,je=Se.loadingKeys,nt=Se.checkedKeys,Ct=Se.halfCheckedKeys,ft=Se.dragOverNodeKey,Et=Se.dropPosition,yt=Se.keyEntities,_t=(0,Y.Z)(yt,ye),He={eventKey:ye,expanded:be.indexOf(ye)!==-1,selected:Ue.indexOf(ye)!==-1,loaded:qe.indexOf(ye)!==-1,loading:je.indexOf(ye)!==-1,checked:nt.indexOf(ye)!==-1,halfChecked:Ct.indexOf(ye)!==-1,pos:String(_t?_t.pos:""),dragOver:ft===ye&&Et===0,dragOverGapTop:ft===ye&&Et===-1,dragOverGapBottom:ft===ye&&Et===1};return He}function ke(ye){var Se=ye.data,be=ye.expanded,Ue=ye.selected,qe=ye.checked,je=ye.loaded,nt=ye.loading,Ct=ye.halfChecked,ft=ye.dragOver,Et=ye.dragOverGapTop,yt=ye.dragOverGapBottom,_t=ye.pos,He=ye.active,bt=ye.eventKey,Tt=(0,C.Z)((0,C.Z)({},Se),{},{expanded:be,selected:Ue,checked:qe,loaded:je,loading:nt,halfChecked:Ct,dragOver:ft,dragOverGapTop:Et,dragOverGapBottom:yt,pos:_t,active:He,key:bt});return"props"in Tt||Object.defineProperty(Tt,"props",{get:function(){return(0,U.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),ye}}),Tt}},81626:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(42232),M=i(75271);function C(n){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=[];return M.Children.forEach(n,function(U){U==null&&!j.keepEmpty||(Array.isArray(U)?$=$.concat(C(U)):(0,E.Z)(U)&&U.props?$=$.concat(C(U.props.children,j)):$.push(U))}),$}},18415:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}},89648:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){if(!M)return!1;if(M.contains)return M.contains(C);for(var n=C;n;){if(n===M)return!0;n=n.parentNode}return!1}},18263:function(H,Q,i){"use strict";i.d(Q,{hq:function(){return se},jL:function(){return he}});var E=i(54153),M=i(18415),C=i(89648),n="data-rc-order",j="data-rc-priority",$="rc-util-key",U=new Map;function Y(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=Ee.mark;return Le?Le.startsWith("data-")?Le:"data-".concat(Le):$}function te(Ee){if(Ee.attachTo)return Ee.attachTo;var Le=document.querySelector("head");return Le||document.body}function X(Ee){return Ee==="queue"?"prependQueue":Ee?"prepend":"append"}function B(Ee){return Array.from((U.get(Ee)||Ee).children).filter(function(Le){return Le.tagName==="STYLE"})}function K(Ee){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,M.Z)())return null;var ke=Le.csp,ye=Le.prepend,Se=Le.priority,be=Se===void 0?0:Se,Ue=X(ye),qe=Ue==="prependQueue",je=document.createElement("style");je.setAttribute(n,Ue),qe&&be&&je.setAttribute(j,"".concat(be)),ke!=null&&ke.nonce&&(je.nonce=ke==null?void 0:ke.nonce),je.innerHTML=Ee;var nt=te(Le),Ct=nt.firstChild;if(ye){if(qe){var ft=(Le.styles||B(nt)).filter(function(Et){if(!["prepend","prependQueue"].includes(Et.getAttribute(n)))return!1;var yt=Number(Et.getAttribute(j)||0);return be>=yt});if(ft.length)return nt.insertBefore(je,ft[ft.length-1].nextSibling),je}nt.insertBefore(je,Ct)}else nt.appendChild(je);return je}function de(Ee){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=te(Le);return(Le.styles||B(ke)).find(function(ye){return ye.getAttribute(Y(Le))===Ee})}function he(Ee){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=de(Ee,Le);if(ke){var ye=te(Le);ye.removeChild(ke)}}function J(Ee,Le){var ke=U.get(Ee);if(!ke||!(0,C.Z)(document,ke)){var ye=K("",Le),Se=ye.parentNode;U.set(Ee,Se),Ee.removeChild(ye)}}function ae(){U.clear()}function se(Ee,Le){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ye=te(ke),Se=B(ye),be=(0,E.Z)((0,E.Z)({},ke),{},{styles:Se});J(ye,be);var Ue=de(Le,be);if(Ue){var qe,je;if((qe=be.csp)!==null&&qe!==void 0&&qe.nonce&&Ue.nonce!==((je=be.csp)===null||je===void 0?void 0:je.nonce)){var nt;Ue.nonce=(nt=be.csp)===null||nt===void 0?void 0:nt.nonce}return Ue.innerHTML!==Ee&&(Ue.innerHTML=Ee),Ue}var Ct=K(Ee,be);return Ct.setAttribute(Y(be),Le),Ct}},4525:function(H,Q,i){"use strict";i.d(Q,{Sh:function(){return n},ZP:function(){return $},bn:function(){return j}});var E=i(5147),M=i(75271),C=i(30967);function n(U){return U instanceof HTMLElement||U instanceof SVGElement}function j(U){return U&&(0,E.Z)(U)==="object"&&n(U.nativeElement)?U.nativeElement:n(U)?U:null}function $(U){var Y=j(U);if(Y)return Y;if(U instanceof M.Component){var te;return(te=C.findDOMNode)===null||te===void 0?void 0:te.call(C,U)}return null}},59422:function(H,Q,i){"use strict";i.d(Q,{tS:function(){return n}});var E=i(46865),M=i(60900);function C(X){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if((0,M.Z)(X)){var K=X.nodeName.toLowerCase(),de=["input","select","textarea","button"].includes(K)||X.isContentEditable||K==="a"&&!!X.getAttribute("href"),he=X.getAttribute("tabindex"),J=Number(he),ae=null;return he&&!Number.isNaN(J)?ae=J:de&&ae===null&&(ae=0),de&&X.disabled&&(ae=null),ae!==null&&(ae>=0||B&&ae<0)}return!1}function n(X){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,K=(0,E.Z)(X.querySelectorAll("*")).filter(function(de){return C(de,B)});return C(X,B)&&K.unshift(X),K}var j=null;function $(){j=document.activeElement}function U(){j=null}function Y(){if(j)try{j.focus()}catch(X){}}function te(X,B){if(B.keyCode===9){var K=n(X),de=K[B.shiftKey?0:K.length-1],he=de===document.activeElement||X===document.activeElement;if(he){var J=K[B.shiftKey?K.length-1:0];J.focus(),B.preventDefault()}}}},60900:function(H,Q){"use strict";Q.Z=function(i){if(!i)return!1;if(i instanceof Element){if(i.offsetParent)return!0;if(i.getBBox){var E=i.getBBox(),M=E.width,C=E.height;if(M||C)return!0}if(i.getBoundingClientRect){var n=i.getBoundingClientRect(),j=n.width,$=n.height;if(j||$)return!0}}return!1}},16167:function(H,Q,i){"use strict";i.d(Q,{A:function(){return C}});function E(n){var j;return n==null||(j=n.getRootNode)===null||j===void 0?void 0:j.call(n)}function M(n){return E(n)instanceof ShadowRoot}function C(n){return M(n)?E(n):null}},14583:function(H,Q){"use strict";var i={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(M){var C=M.keyCode;if(M.altKey&&!M.ctrlKey||M.metaKey||C>=i.F1&&C<=i.F12)return!1;switch(C){case i.ALT:case i.CAPS_LOCK:case i.CONTEXT_MENU:case i.CTRL:case i.DOWN:case i.END:case i.ESC:case i.HOME:case i.INSERT:case i.LEFT:case i.MAC_FF_META:case i.META:case i.NUMLOCK:case i.NUM_CENTER:case i.PAGE_DOWN:case i.PAGE_UP:case i.PAUSE:case i.PRINT_SCREEN:case i.RIGHT:case i.SHIFT:case i.UP:case i.WIN_KEY:case i.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(M){if(M>=i.ZERO&&M<=i.NINE||M>=i.NUM_ZERO&&M<=i.NUM_MULTIPLY||M>=i.A&&M<=i.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&M===0)return!0;switch(M){case i.SPACE:case i.QUESTION_MARK:case i.NUM_PLUS:case i.NUM_MINUS:case i.NUM_PERIOD:case i.NUM_DIVISION:case i.SEMICOLON:case i.DASH:case i.EQUALS:case i.COMMA:case i.PERIOD:case i.SLASH:case i.APOSTROPHE:case i.SINGLE_QUOTE:case i.OPEN_SQUARE_BRACKET:case i.BACKSLASH:case i.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};Q.Z=i},42232:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return j}});var E=i(5147),M=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function j($){return $&&(0,E.Z)($)==="object"&&($.$$typeof===M||$.$$typeof===C)&&$.type===n}},90242:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return n},o:function(){return j}});var E=i(18263),M;function C($){var U="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),Y=document.createElement("div");Y.id=U;var te=Y.style;te.position="absolute",te.left="0",te.top="0",te.width="100px",te.height="100px",te.overflow="scroll";var X,B;if($){var K=getComputedStyle($);te.scrollbarColor=K.scrollbarColor,te.scrollbarWidth=K.scrollbarWidth;var de=getComputedStyle($,"::-webkit-scrollbar"),he=parseInt(de.width,10),J=parseInt(de.height,10);try{var ae=he?"width: ".concat(de.width,";"):"",se=J?"height: ".concat(de.height,";"):"";(0,E.hq)(`
#`.concat(U,`::-webkit-scrollbar {
`).concat(ae,`
`).concat(se,`
}`),U)}catch(ke){console.error(ke),X=he,B=J}}document.body.appendChild(Y);var Ee=$&&X&&!isNaN(X)?X:Y.offsetWidth-Y.clientWidth,Le=$&&B&&!isNaN(B)?B:Y.offsetHeight-Y.clientHeight;return document.body.removeChild(Y),(0,E.jL)(U),{width:Ee,height:Le}}function n($){return typeof document=="undefined"?0:(($||M===void 0)&&(M=C()),M.width)}function j($){return typeof document=="undefined"||!$||!($ instanceof Element)?{width:0,height:0}:C($)}},59373:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});var E=i(75271);function M(C){var n=E.useRef();n.current=C;var j=E.useCallback(function(){for(var $,U=arguments.length,Y=new Array(U),te=0;te<U;te++)Y[te]=arguments[te];return($=n.current)===null||$===void 0?void 0:$.call.apply($,[n].concat(Y))},[]);return j}},73188:function(H,Q,i){"use strict";var E,M=i(89692),C=i(54153),n=i(75271);function j(){var te=(0,C.Z)({},E||(E=i.t(n,2)));return te.useId}var $=0;function U(){}var Y=j();Q.Z=Y?function(X){var B=Y();return X||B}:function(X){var B=n.useState("ssr-id"),K=(0,M.Z)(B,2),de=K[0],he=K[1];return n.useEffect(function(){var J=$;$+=1,he("rc_unique_".concat(J))},[]),X||de}},92076:function(H,Q,i){"use strict";i.d(Q,{o:function(){return j}});var E=i(75271),M=i(18415),C=(0,M.Z)()?E.useLayoutEffect:E.useEffect,n=function(U,Y){var te=E.useRef(!0);C(function(){return U(te.current)},Y),C(function(){return te.current=!1,function(){te.current=!0}},[])},j=function(U,Y){n(function(te){if(!te)return U()},Y)};Q.Z=n},54596:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});var E=i(75271);function M(C,n,j){var $=E.useRef({});return(!("value"in $.current)||j($.current.condition,n))&&($.current.value=C(),$.current.condition=n),$.current.value}},93954:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return $}});var E=i(89692),M=i(59373),C=i(92076),n=i(60784);function j(U){return U!==void 0}function $(U,Y){var te=Y||{},X=te.defaultValue,B=te.value,K=te.onChange,de=te.postState,he=(0,n.Z)(function(){return j(B)?B:j(X)?typeof X=="function"?X():X:typeof U=="function"?U():U}),J=(0,E.Z)(he,2),ae=J[0],se=J[1],Ee=B!==void 0?B:ae,Le=de?de(Ee):Ee,ke=(0,M.Z)(K),ye=(0,n.Z)([Ee]),Se=(0,E.Z)(ye,2),be=Se[0],Ue=Se[1];(0,C.o)(function(){var je=be[0];ae!==je&&ke(ae,je)},[be]),(0,C.o)(function(){j(B)||se(B)},[B]);var qe=(0,M.Z)(function(je,nt){se(je,nt),Ue([Ee],nt)});return[Le,qe]}},60784:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(89692),M=i(75271);function C(n){var j=M.useRef(!1),$=M.useState(n),U=(0,E.Z)($,2),Y=U[0],te=U[1];M.useEffect(function(){return j.current=!1,function(){j.current=!0}},[]);function X(B,K){K&&j.current||te(B)}return[Y,X]}},22217:function(H,Q,i){"use strict";i.d(Q,{C8:function(){return M.Z},Kp:function(){return $.ZP},U2:function(){return n.Z},t8:function(){return j.Z},zX:function(){return E.Z}});var E=i(59373),M=i(93954),C=i(42684),n=i(36040),j=i(27636),$=i(4449)},47996:function(H,Q,i){"use strict";var E=i(5147),M=i(4449);function C(n,j){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,U=new Set;function Y(te,X){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,K=U.has(te);if((0,M.ZP)(!K,"Warning: There may be circular references"),K)return!1;if(te===X)return!0;if($&&B>1)return!1;U.add(te);var de=B+1;if(Array.isArray(te)){if(!Array.isArray(X)||te.length!==X.length)return!1;for(var he=0;he<te.length;he++)if(!Y(te[he],X[he],de))return!1;return!0}if(te&&X&&(0,E.Z)(te)==="object"&&(0,E.Z)(X)==="object"){var J=Object.keys(te);return J.length!==Object.keys(X).length?!1:J.every(function(ae){return Y(te[ae],X[ae],de)})}return!1}return Y(n,j)}Q.Z=C},21611:function(H,Q){"use strict";Q.Z=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(i==null?void 0:i.substr(0,4))}},18051:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){var n=Object.assign({},M);return Array.isArray(C)&&C.forEach(function(j){delete n[j]}),n}},71305:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return Y}});var E=i(54153),M=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,C=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,n="".concat(M," ").concat(C).split(/[\s\n]+/),j="aria-",$="data-";function U(te,X){return te.indexOf(X)===0}function Y(te){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,B;X===!1?B={aria:!0,data:!0,attr:!0}:X===!0?B={aria:!0}:B=(0,E.Z)({},X);var K={};return Object.keys(te).forEach(function(de){(B.aria&&(de==="role"||U(de,j))||B.data&&U(de,$)||B.attr&&n.includes(de))&&(K[de]=te[de])}),K}},49975:function(H,Q){"use strict";var i=function(U){return+setTimeout(U,16)},E=function(U){return clearTimeout(U)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(i=function(U){return window.requestAnimationFrame(U)},E=function(U){return window.cancelAnimationFrame(U)});var M=0,C=new Map;function n($){C.delete($)}var j=function(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;M+=1;var te=M;function X(B){if(B===0)n(te),U();else{var K=i(function(){X(B-1)});C.set(te,K)}}return X(Y),te};j.cancel=function($){var U=C.get($);return n($),E(U)},Q.Z=j},42684:function(H,Q,i){"use strict";i.d(Q,{C4:function(){return de},Yr:function(){return X},mH:function(){return U},sQ:function(){return Y},t4:function(){return K},x1:function(){return te}});var E=i(5147),M=i(75271),C=i(36479),n=i(54596),j=i(42232),$=Number(M.version.split(".")[0]),U=function(J,ae){typeof J=="function"?J(ae):(0,E.Z)(J)==="object"&&J&&"current"in J&&(J.current=ae)},Y=function(){for(var J=arguments.length,ae=new Array(J),se=0;se<J;se++)ae[se]=arguments[se];var Ee=ae.filter(Boolean);return Ee.length<=1?Ee[0]:function(Le){ae.forEach(function(ke){U(ke,Le)})}},te=function(){for(var J=arguments.length,ae=new Array(J),se=0;se<J;se++)ae[se]=arguments[se];return(0,n.Z)(function(){return Y.apply(void 0,ae)},ae,function(Ee,Le){return Ee.length!==Le.length||Ee.every(function(ke,ye){return ke!==Le[ye]})})},X=function(J){var ae,se;if(!J)return!1;if(B(J)&&$>=19)return!0;var Ee=(0,C.isMemo)(J)?J.type.type:J.type;return!(typeof Ee=="function"&&!((ae=Ee.prototype)!==null&&ae!==void 0&&ae.render)&&Ee.$$typeof!==C.ForwardRef||typeof J=="function"&&!((se=J.prototype)!==null&&se!==void 0&&se.render)&&J.$$typeof!==C.ForwardRef)};function B(he){return(0,M.isValidElement)(he)&&!(0,j.Z)(he)}var K=function(J){return B(J)&&X(J)},de=function(J){if(J&&B(J)){var ae=J;return ae.props.propertyIsEnumerable("ref")?ae.props.ref:ae.ref}return null}},36040:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){for(var n=M,j=0;j<C.length;j+=1){if(n==null)return;n=n[C[j]]}return n}},27636:function(H,Q,i){"use strict";i.d(Q,{T:function(){return B},Z:function(){return U}});var E=i(5147),M=i(54153),C=i(46865),n=i(70615),j=i(36040);function $(K,de,he,J){if(!de.length)return he;var ae=(0,n.Z)(de),se=ae[0],Ee=ae.slice(1),Le;return!K&&typeof se=="number"?Le=[]:Array.isArray(K)?Le=(0,C.Z)(K):Le=(0,M.Z)({},K),J&&he===void 0&&Ee.length===1?delete Le[se][Ee[0]]:Le[se]=$(Le[se],Ee,he,J),Le}function U(K,de,he){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return de.length&&J&&he===void 0&&!(0,j.Z)(K,de.slice(0,-1))?K:$(K,de,he,J)}function Y(K){return(0,E.Z)(K)==="object"&&K!==null&&Object.getPrototypeOf(K)===Object.prototype}function te(K){return Array.isArray(K)?[]:{}}var X=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function B(){for(var K=arguments.length,de=new Array(K),he=0;he<K;he++)de[he]=arguments[he];var J=te(de[0]);return de.forEach(function(ae){function se(Ee,Le){var ke=new Set(Le),ye=(0,j.Z)(ae,Ee),Se=Array.isArray(ye);if(Se||Y(ye)){if(!ke.has(ye)){ke.add(ye);var be=(0,j.Z)(J,Ee);Se?J=U(J,Ee,[]):(!be||(0,E.Z)(be)!=="object")&&(J=U(J,Ee,te(ye))),X(ye).forEach(function(Ue){se([].concat((0,C.Z)(Ee),[Ue]),ke)})}}else J=U(J,Ee,ye)}se([])}),J}},4449:function(H,Q,i){"use strict";i.d(Q,{Kp:function(){return n}});var E={},M=[],C=function(B){M.push(B)};function n(X,B){if(0)var K}function j(X,B){if(0)var K}function $(){E={}}function U(X,B,K){!B&&!E[K]&&(X(!1,K),E[K]=!0)}function Y(X,B){U(n,X,B)}function te(X,B){U(j,X,B)}Y.preMessage=C,Y.resetWarned=$,Y.noteOnce=te,Q.ZP=Y},14369:function(H,Q,i){"use strict";var E,M=i(46612).default;E={value:!0},E=j;var C=M(i(53437)),n=M(i(75271));function j($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=[];return n.default.Children.forEach($,function(te){te==null&&!U.keepEmpty||(Array.isArray(te)?Y=Y.concat(j(te)):(0,C.default)(te)&&te.props?Y=Y.concat(j(te.props.children,U)):Y.push(te))}),Y}},53437:function(H,Q,i){"use strict";var E=i(46612).default;Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=$;var M=E(i(57421)),C=Symbol.for("react.element"),n=Symbol.for("react.transitional.element"),j=Symbol.for("react.fragment");function $(U){return U&&(0,M.default)(U)==="object"&&(U.$$typeof===C||U.$$typeof===n)&&U.type===j}},98131:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return lr}});var E=i(23022),M=i(5147),C=i(54153),n=i(38926),j=i(89692),$=i(58190),U=i(82187),Y=i.n(U),te=i(40493),X=i(22217),B=i(92076),K=i(75271),de=i(30967),he=K.forwardRef(function(Pe,ut){var Ve=Pe.height,gt=Pe.offsetY,Gt=Pe.offsetX,Me=Pe.children,At=Pe.prefixCls,Bt=Pe.onInnerResize,Sn=Pe.innerProps,Lt=Pe.rtl,Bn=Pe.extra,en={},gn={display:"flex",flexDirection:"column"};return gt!==void 0&&(en={height:Ve,position:"relative",overflow:"hidden"},gn=(0,C.Z)((0,C.Z)({},gn),{},(0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({transform:"translateY(".concat(gt,"px)")},Lt?"marginRight":"marginLeft",-Gt),"position","absolute"),"left",0),"right",0),"top",0))),K.createElement("div",{style:en},K.createElement(te.Z,{onResize:function(Sr){var In=Sr.offsetHeight;In&&Bt&&Bt()}},K.createElement("div",(0,E.Z)({style:gn,className:Y()((0,n.Z)({},"".concat(At,"-holder-inner"),At)),ref:ut},Sn),Me,Bn)))});he.displayName="Filler";var J=he;function ae(Pe){var ut=Pe.children,Ve=Pe.setRef,gt=K.useCallback(function(Gt){Ve(Gt)},[]);return K.cloneElement(ut,{ref:gt})}function se(Pe,ut,Ve,gt,Gt,Me,At,Bt){var Sn=Bt.getKey;return Pe.slice(ut,Ve+1).map(function(Lt,Bn){var en=ut+Bn,gn=At(Lt,en,{style:{width:gt},offsetX:Gt}),ar=Sn(Lt);return K.createElement(ae,{key:ar,setRef:function(In){return Me(Lt,In)}},gn)})}function Ee(Pe,ut,Ve,gt){var Gt=Ve-Pe,Me=ut-Ve,At=Math.min(Gt,Me)*2;if(gt<=At){var Bt=Math.floor(gt/2);return gt%2?Ve+Bt+1:Ve-Bt}return Gt>Me?Ve-(gt-Me):Ve+(gt-Gt)}function Le(Pe,ut,Ve){var gt=Pe.length,Gt=ut.length,Me,At;if(gt===0&&Gt===0)return null;gt<Gt?(Me=Pe,At=ut):(Me=ut,At=Pe);var Bt={__EMPTY_ITEM__:!0};function Sn(Sr){return Sr!==void 0?Ve(Sr):Bt}for(var Lt=null,Bn=Math.abs(gt-Gt)!==1,en=0;en<At.length;en+=1){var gn=Sn(Me[en]),ar=Sn(At[en]);if(gn!==ar){Lt=en,Bn=Bn||gn!==Sn(At[en+1]);break}}return Lt===null?null:{index:Lt,multiple:Bn}}function ke(Pe,ut,Ve){var gt=K.useState(Pe),Gt=(0,j.Z)(gt,2),Me=Gt[0],At=Gt[1],Bt=K.useState(null),Sn=(0,j.Z)(Bt,2),Lt=Sn[0],Bn=Sn[1];return K.useEffect(function(){var en=Le(Me||[],Pe||[],ut);(en==null?void 0:en.index)!==void 0&&(Ve==null||Ve(en.index),Bn(Pe[en.index])),At(Pe)},[Pe]),[Lt]}var ye=i(49975),Se=(typeof navigator=="undefined"?"undefined":(0,M.Z)(navigator))==="object"&&/Firefox/i.test(navigator.userAgent),be=Se,Ue=function(Pe,ut,Ve,gt){var Gt=(0,K.useRef)(!1),Me=(0,K.useRef)(null);function At(){clearTimeout(Me.current),Gt.current=!0,Me.current=setTimeout(function(){Gt.current=!1},50)}var Bt=(0,K.useRef)({top:Pe,bottom:ut,left:Ve,right:gt});return Bt.current.top=Pe,Bt.current.bottom=ut,Bt.current.left=Ve,Bt.current.right=gt,function(Sn,Lt){var Bn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,en=Sn?Lt<0&&Bt.current.left||Lt>0&&Bt.current.right:Lt<0&&Bt.current.top||Lt>0&&Bt.current.bottom;return Bn&&en?(clearTimeout(Me.current),Gt.current=!1):(!en||Gt.current)&&At(),!Gt.current&&en}};function qe(Pe,ut,Ve,gt,Gt,Me,At){var Bt=(0,K.useRef)(0),Sn=(0,K.useRef)(null),Lt=(0,K.useRef)(null),Bn=(0,K.useRef)(!1),en=Ue(ut,Ve,gt,Gt);function gn(mn,cn){if(ye.Z.cancel(Sn.current),!en(!1,cn)){var Ln=mn;if(!Ln._virtualHandled)Ln._virtualHandled=!0;else return;Bt.current+=cn,Lt.current=cn,be||Ln.preventDefault(),Sn.current=(0,ye.Z)(function(){var Er=Bn.current?10:1;At(Bt.current*Er,!1),Bt.current=0})}}function ar(mn,cn){At(cn,!0),be||mn.preventDefault()}var Sr=(0,K.useRef)(null),In=(0,K.useRef)(null);function Gn(mn){if(Pe){ye.Z.cancel(In.current),In.current=(0,ye.Z)(function(){Sr.current=null},2);var cn=mn.deltaX,Ln=mn.deltaY,Er=mn.shiftKey,mr=cn,Jr=Ln;(Sr.current==="sx"||!Sr.current&&Er&&Ln&&!cn)&&(mr=Ln,Jr=0,Sr.current="sx");var Ie=Math.abs(mr),Ot=Math.abs(Jr);Sr.current===null&&(Sr.current=Me&&Ie>Ot?"x":"y"),Sr.current==="y"?gn(mn,Jr):ar(mn,mr)}}function hn(mn){Pe&&(Bn.current=mn.detail===Lt.current)}return[Gn,hn]}function je(Pe,ut,Ve,gt){var Gt=K.useMemo(function(){return[new Map,[]]},[Pe,Ve.id,gt]),Me=(0,j.Z)(Gt,2),At=Me[0],Bt=Me[1],Sn=function(Bn){var en=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bn,gn=At.get(Bn),ar=At.get(en);if(gn===void 0||ar===void 0)for(var Sr=Pe.length,In=Bt.length;In<Sr;In+=1){var Gn,hn=Pe[In],mn=ut(hn);At.set(mn,In);var cn=(Gn=Ve.get(mn))!==null&&Gn!==void 0?Gn:gt;if(Bt[In]=(Bt[In-1]||0)+cn,mn===Bn&&(gn=In),mn===en&&(ar=In),gn!==void 0&&ar!==void 0)break}return{top:Bt[gn-1]||0,bottom:Bt[ar]}};return Sn}var nt=i(4525),Ct=i(59295),ft=i(45985),Et=function(){function Pe(){(0,Ct.Z)(this,Pe),(0,n.Z)(this,"maps",void 0),(0,n.Z)(this,"id",0),(0,n.Z)(this,"diffKeys",new Set),this.maps=Object.create(null)}return(0,ft.Z)(Pe,[{key:"set",value:function(Ve,gt){this.maps[Ve]=gt,this.id+=1,this.diffKeys.add(Ve)}},{key:"get",value:function(Ve){return this.maps[Ve]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),Pe}(),yt=Et;function _t(Pe){var ut=parseFloat(Pe);return isNaN(ut)?0:ut}function He(Pe,ut,Ve){var gt=K.useState(0),Gt=(0,j.Z)(gt,2),Me=Gt[0],At=Gt[1],Bt=(0,K.useRef)(new Map),Sn=(0,K.useRef)(new yt),Lt=(0,K.useRef)(0);function Bn(){Lt.current+=1}function en(){var ar=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Bn();var Sr=function(){var hn=!1;Bt.current.forEach(function(mn,cn){if(mn&&mn.offsetParent){var Ln=(0,nt.ZP)(mn),Er=Ln.offsetHeight,mr=getComputedStyle(Ln),Jr=mr.marginTop,Ie=mr.marginBottom,Ot=_t(Jr),St=_t(Ie),at=Er+Ot+St;Sn.current.get(cn)!==at&&(Sn.current.set(cn,at),hn=!0)}}),hn&&At(function(mn){return mn+1})};if(ar)Sr();else{Lt.current+=1;var In=Lt.current;Promise.resolve().then(function(){In===Lt.current&&Sr()})}}function gn(ar,Sr){var In=Pe(ar),Gn=Bt.current.get(In);Sr?(Bt.current.set(In,Sr),en()):Bt.current.delete(In),!Gn!=!Sr&&(Sr?ut==null||ut(ar):Ve==null||Ve(ar))}return(0,K.useEffect)(function(){return Bn},[]),[gn,en,Sn.current,Me]}var bt=14/15;function Tt(Pe,ut,Ve){var gt=(0,K.useRef)(!1),Gt=(0,K.useRef)(0),Me=(0,K.useRef)(0),At=(0,K.useRef)(null),Bt=(0,K.useRef)(null),Sn,Lt=function(ar){if(gt.current){var Sr=Math.ceil(ar.touches[0].pageX),In=Math.ceil(ar.touches[0].pageY),Gn=Gt.current-Sr,hn=Me.current-In,mn=Math.abs(Gn)>Math.abs(hn);mn?Gt.current=Sr:Me.current=In;var cn=Ve(mn,mn?Gn:hn,!1,ar);cn&&ar.preventDefault(),clearInterval(Bt.current),cn&&(Bt.current=setInterval(function(){mn?Gn*=bt:hn*=bt;var Ln=Math.floor(mn?Gn:hn);(!Ve(mn,Ln,!0)||Math.abs(Ln)<=.1)&&clearInterval(Bt.current)},16))}},Bn=function(){gt.current=!1,Sn()},en=function(ar){Sn(),ar.touches.length===1&&!gt.current&&(gt.current=!0,Gt.current=Math.ceil(ar.touches[0].pageX),Me.current=Math.ceil(ar.touches[0].pageY),At.current=ar.target,At.current.addEventListener("touchmove",Lt,{passive:!1}),At.current.addEventListener("touchend",Bn,{passive:!0}))};Sn=function(){At.current&&(At.current.removeEventListener("touchmove",Lt),At.current.removeEventListener("touchend",Bn))},(0,B.Z)(function(){return Pe&&ut.current.addEventListener("touchstart",en,{passive:!0}),function(){var gn;(gn=ut.current)===null||gn===void 0||gn.removeEventListener("touchstart",en),Sn(),clearInterval(Bt.current)}},[Pe])}function st(Pe){return Math.floor(Math.pow(Pe,.5))}function Qe(Pe,ut){var Ve="touches"in Pe?Pe.touches[0]:Pe;return Ve[ut?"pageX":"pageY"]-window[ut?"scrollX":"scrollY"]}function mt(Pe,ut,Ve){K.useEffect(function(){var gt=ut.current;if(Pe&&gt){var Gt=!1,Me,At,Bt=function(){ye.Z.cancel(Me)},Sn=function gn(){Bt(),Me=(0,ye.Z)(function(){Ve(At),gn()})},Lt=function(ar){var Sr=ar;Sr._virtualHandled||(Sr._virtualHandled=!0,Gt=!0)},Bn=function(){Gt=!1,Bt()},en=function(ar){if(Gt){var Sr=Qe(ar,!1),In=gt.getBoundingClientRect(),Gn=In.top,hn=In.bottom;if(Sr<=Gn){var mn=Gn-Sr;At=-st(mn),Sn()}else if(Sr>=hn){var cn=Sr-hn;At=st(cn),Sn()}else Bt()}};return gt.addEventListener("mousedown",Lt),gt.ownerDocument.addEventListener("mouseup",Bn),gt.ownerDocument.addEventListener("mousemove",en),function(){gt.removeEventListener("mousedown",Lt),gt.ownerDocument.removeEventListener("mouseup",Bn),gt.ownerDocument.removeEventListener("mousemove",en),Bt()}}},[Pe])}var Ht=10;function vt(Pe,ut,Ve,gt,Gt,Me,At,Bt){var Sn=K.useRef(),Lt=K.useState(null),Bn=(0,j.Z)(Lt,2),en=Bn[0],gn=Bn[1];return(0,B.Z)(function(){if(en&&en.times<Ht){if(!Pe.current){gn(function(zr){return(0,C.Z)({},zr)});return}Me();var ar=en.targetAlign,Sr=en.originAlign,In=en.index,Gn=en.offset,hn=Pe.current.clientHeight,mn=!1,cn=ar,Ln=null;if(hn){for(var Er=ar||Sr,mr=0,Jr=0,Ie=0,Ot=Math.min(ut.length-1,In),St=0;St<=Ot;St+=1){var at=Gt(ut[St]);Jr=mr;var Xe=Ve.get(at);Ie=Jr+(Xe===void 0?gt:Xe),mr=Ie}for(var Nt=Er==="top"?Gn:hn-Gn,Nn=Ot;Nn>=0;Nn-=1){var Jn=Gt(ut[Nn]),rr=Ve.get(Jn);if(rr===void 0){mn=!0;break}if(Nt-=rr,Nt<=0)break}switch(Er){case"top":Ln=Jr-Gn;break;case"bottom":Ln=Ie-hn+Gn;break;default:{var Br=Pe.current.scrollTop,Hr=Br+hn;Jr<Br?cn="top":Ie>Hr&&(cn="bottom")}}Ln!==null&&At(Ln),Ln!==en.lastTop&&(mn=!0)}mn&&gn((0,C.Z)((0,C.Z)({},en),{},{times:en.times+1,targetAlign:cn,lastTop:Ln}))}},[en,Pe.current]),function(ar){if(ar==null){Bt();return}if(ye.Z.cancel(Sn.current),typeof ar=="number")At(ar);else if(ar&&(0,M.Z)(ar)==="object"){var Sr,In=ar.align;"index"in ar?Sr=ar.index:Sr=ut.findIndex(function(mn){return Gt(mn)===ar.key});var Gn=ar.offset,hn=Gn===void 0?0:Gn;gn({times:0,index:Sr,offset:hn,originAlign:In})}}}var ue=K.forwardRef(function(Pe,ut){var Ve=Pe.prefixCls,gt=Pe.rtl,Gt=Pe.scrollOffset,Me=Pe.scrollRange,At=Pe.onStartMove,Bt=Pe.onStopMove,Sn=Pe.onScroll,Lt=Pe.horizontal,Bn=Pe.spinSize,en=Pe.containerSize,gn=Pe.style,ar=Pe.thumbStyle,Sr=Pe.showScrollBar,In=K.useState(!1),Gn=(0,j.Z)(In,2),hn=Gn[0],mn=Gn[1],cn=K.useState(null),Ln=(0,j.Z)(cn,2),Er=Ln[0],mr=Ln[1],Jr=K.useState(null),Ie=(0,j.Z)(Jr,2),Ot=Ie[0],St=Ie[1],at=!gt,Xe=K.useRef(),Nt=K.useRef(),Nn=K.useState(Sr),Jn=(0,j.Z)(Nn,2),rr=Jn[0],Br=Jn[1],Hr=K.useRef(),zr=function(){Sr===!0||Sr===!1||(clearTimeout(Hr.current),Br(!0),Hr.current=setTimeout(function(){Br(!1)},3e3))},Tr=Me-en||0,fn=en-Bn||0,Ne=K.useMemo(function(){if(Gt===0||Tr===0)return 0;var Un=Gt/Tr;return Un*fn},[Gt,Tr,fn]),Ge=function(jn){jn.stopPropagation(),jn.preventDefault()},ot=K.useRef({top:Ne,dragging:hn,pageY:Er,startTop:Ot});ot.current={top:Ne,dragging:hn,pageY:Er,startTop:Ot};var Dt=function(jn){mn(!0),mr(Qe(jn,Lt)),St(ot.current.top),At(),jn.stopPropagation(),jn.preventDefault()};K.useEffect(function(){var Un=function(er){er.preventDefault()},jn=Xe.current,_n=Nt.current;return jn.addEventListener("touchstart",Un,{passive:!1}),_n.addEventListener("touchstart",Dt,{passive:!1}),function(){jn.removeEventListener("touchstart",Un),_n.removeEventListener("touchstart",Dt)}},[]);var jt=K.useRef();jt.current=Tr;var sn=K.useRef();sn.current=fn,K.useEffect(function(){if(hn){var Un,jn=function(er){var Yr=ot.current,qr=Yr.dragging,Gr=Yr.pageY,ci=Yr.startTop;ye.Z.cancel(Un);var Ci=Xe.current.getBoundingClientRect(),Ki=en/(Lt?Ci.width:Ci.height);if(qr){var Bi=(Qe(er,Lt)-Gr)*Ki,Di=ci;!at&&Lt?Di-=Bi:Di+=Bi;var yo=jt.current,po=sn.current,Vo=po?Di/po:0,Xo=Math.ceil(Vo*yo);Xo=Math.max(Xo,0),Xo=Math.min(Xo,yo),Un=(0,ye.Z)(function(){Sn(Xo,Lt)})}},_n=function(){mn(!1),Bt()};return window.addEventListener("mousemove",jn,{passive:!0}),window.addEventListener("touchmove",jn,{passive:!0}),window.addEventListener("mouseup",_n,{passive:!0}),window.addEventListener("touchend",_n,{passive:!0}),function(){window.removeEventListener("mousemove",jn),window.removeEventListener("touchmove",jn),window.removeEventListener("mouseup",_n),window.removeEventListener("touchend",_n),ye.Z.cancel(Un)}}},[hn]),K.useEffect(function(){return zr(),function(){clearTimeout(Hr.current)}},[Gt]),K.useImperativeHandle(ut,function(){return{delayHidden:zr}});var xn="".concat(Ve,"-scrollbar"),rn={position:"absolute",visibility:rr?null:"hidden"},Fn={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return Lt?(rn.height=8,rn.left=0,rn.right=0,rn.bottom=0,Fn.height="100%",Fn.width=Bn,at?Fn.left=Ne:Fn.right=Ne):(rn.width=8,rn.top=0,rn.bottom=0,at?rn.right=0:rn.left=0,Fn.width="100%",Fn.height=Bn,Fn.top=Ne),K.createElement("div",{ref:Xe,className:Y()(xn,(0,n.Z)((0,n.Z)((0,n.Z)({},"".concat(xn,"-horizontal"),Lt),"".concat(xn,"-vertical"),!Lt),"".concat(xn,"-visible"),rr)),style:(0,C.Z)((0,C.Z)({},rn),gn),onMouseDown:Ge,onMouseMove:zr},K.createElement("div",{ref:Nt,className:Y()("".concat(xn,"-thumb"),(0,n.Z)({},"".concat(xn,"-thumb-moving"),hn)),style:(0,C.Z)((0,C.Z)({},Fn),ar),onMouseDown:Dt}))}),lt=ue,le=20;function Je(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ve=Pe/ut*Pe;return isNaN(Ve)&&(Ve=0),Ve=Math.max(Ve,le),Math.floor(Ve)}var we=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],Pn=[],Mt={overflowY:"auto",overflowAnchor:"none"};function or(Pe,ut){var Ve=Pe.prefixCls,gt=Ve===void 0?"rc-virtual-list":Ve,Gt=Pe.className,Me=Pe.height,At=Pe.itemHeight,Bt=Pe.fullHeight,Sn=Bt===void 0?!0:Bt,Lt=Pe.style,Bn=Pe.data,en=Pe.children,gn=Pe.itemKey,ar=Pe.virtual,Sr=Pe.direction,In=Pe.scrollWidth,Gn=Pe.component,hn=Gn===void 0?"div":Gn,mn=Pe.onScroll,cn=Pe.onVirtualScroll,Ln=Pe.onVisibleChange,Er=Pe.innerProps,mr=Pe.extraRender,Jr=Pe.styles,Ie=Pe.showScrollBar,Ot=Ie===void 0?"optional":Ie,St=(0,$.Z)(Pe,we),at=K.useCallback(function(oo){return typeof gn=="function"?gn(oo):oo==null?void 0:oo[gn]},[gn]),Xe=He(at,null,null),Nt=(0,j.Z)(Xe,4),Nn=Nt[0],Jn=Nt[1],rr=Nt[2],Br=Nt[3],Hr=!!(ar!==!1&&Me&&At),zr=K.useMemo(function(){return Object.values(rr.maps).reduce(function(oo,qi){return oo+qi},0)},[rr.id,rr.maps]),Tr=Hr&&Bn&&(Math.max(At*Bn.length,zr)>Me||!!In),fn=Sr==="rtl",Ne=Y()(gt,(0,n.Z)({},"".concat(gt,"-rtl"),fn),Gt),Ge=Bn||Pn,ot=(0,K.useRef)(),Dt=(0,K.useRef)(),jt=(0,K.useRef)(),sn=(0,K.useState)(0),xn=(0,j.Z)(sn,2),rn=xn[0],Fn=xn[1],Un=(0,K.useState)(0),jn=(0,j.Z)(Un,2),_n=jn[0],Xn=jn[1],er=(0,K.useState)(!1),Yr=(0,j.Z)(er,2),qr=Yr[0],Gr=Yr[1],ci=function(){Gr(!0)},Ci=function(){Gr(!1)},Ki={getKey:at};function Bi(oo){Fn(function(qi){var Ta;typeof oo=="function"?Ta=oo(qi):Ta=oo;var la=us(Ta);return ot.current.scrollTop=la,la})}var Di=(0,K.useRef)({start:0,end:Ge.length}),yo=(0,K.useRef)(),po=ke(Ge,at),Vo=(0,j.Z)(po,1),Xo=Vo[0];yo.current=Xo;var $o=K.useMemo(function(){if(!Hr)return{scrollHeight:void 0,start:0,end:Ge.length-1,offset:void 0};if(!Tr){var oo;return{scrollHeight:((oo=Dt.current)===null||oo===void 0?void 0:oo.offsetHeight)||0,start:0,end:Ge.length-1,offset:void 0}}for(var qi=0,Ta,la,Os,Vl=Ge.length,ns=0;ns<Vl;ns+=1){var yu=Ge[ns],Fs=at(yu),bs=rr.get(Fs),cs=qi+(bs===void 0?At:bs);cs>=rn&&Ta===void 0&&(Ta=ns,la=qi),cs>rn+Me&&Os===void 0&&(Os=ns),qi=cs}return Ta===void 0&&(Ta=0,la=0,Os=Math.ceil(Me/At)),Os===void 0&&(Os=Ge.length-1),Os=Math.min(Os+1,Ge.length-1),{scrollHeight:qi,start:Ta,end:Os,offset:la}},[Tr,Hr,rn,Ge,Br,Me]),Aa=$o.scrollHeight,qa=$o.start,Oo=$o.end,Do=$o.offset;Di.current.start=qa,Di.current.end=Oo,K.useLayoutEffect(function(){var oo=rr.getRecord();if(oo.size===1){var qi=Array.from(oo)[0],Ta=at(Ge[qa]);if(Ta===qi){var la=rr.get(qi),Os=la-At;Bi(function(Vl){return Vl+Os})}}rr.resetRecord()},[Aa]);var oa=K.useState({width:0,height:Me}),Fa=(0,j.Z)(oa,2),xs=Fa[0],tl=Fa[1],Na=function(qi){tl({width:qi.offsetWidth,height:qi.offsetHeight})},ro=(0,K.useRef)(),xa=(0,K.useRef)(),Ba=K.useMemo(function(){return Je(xs.width,In)},[xs.width,In]),ma=K.useMemo(function(){return Je(xs.height,Aa)},[xs.height,Aa]),ja=Aa-Me,Sa=(0,K.useRef)(ja);Sa.current=ja;function us(oo){var qi=oo;return Number.isNaN(Sa.current)||(qi=Math.min(qi,Sa.current)),qi=Math.max(qi,0),qi}var ua=rn<=0,ao=rn>=ja,Ma=_n<=0,ko=_n>=In,No=Ue(ua,ao,Ma,ko),Uo=function(){return{x:fn?-_n:_n,y:rn}},Hs=(0,K.useRef)(Uo()),$i=(0,X.zX)(function(oo){if(cn){var qi=(0,C.Z)((0,C.Z)({},Uo()),oo);(Hs.current.x!==qi.x||Hs.current.y!==qi.y)&&(cn(qi),Hs.current=qi)}});function es(oo,qi){var Ta=oo;qi?((0,de.flushSync)(function(){Xn(Ta)}),$i()):Bi(Ta)}function Ll(oo){var qi=oo.currentTarget.scrollTop;qi!==rn&&Bi(qi),mn==null||mn(oo),$i()}var hl=function(qi){var Ta=qi,la=In?In-xs.width:0;return Ta=Math.max(Ta,0),Ta=Math.min(Ta,la),Ta},ho=(0,X.zX)(function(oo,qi){qi?((0,de.flushSync)(function(){Xn(function(Ta){var la=Ta+(fn?-oo:oo);return hl(la)})}),$i()):Bi(function(Ta){var la=Ta+oo;return la})}),Ul=qe(Hr,ua,ao,Ma,ko,!!In,ho),Ml=(0,j.Z)(Ul,2),Ri=Ml[0],Wo=Ml[1];Tt(Hr,ot,function(oo,qi,Ta,la){var Os=la;return No(oo,qi,Ta)?!1:!Os||!Os._virtualHandled?(Os&&(Os._virtualHandled=!0),Ri({preventDefault:function(){},deltaX:oo?qi:0,deltaY:oo?0:qi}),!0):!1}),mt(Tr,ot,function(oo){Bi(function(qi){return qi+oo})}),(0,B.Z)(function(){function oo(Ta){var la=ua&&Ta.detail<0,Os=ao&&Ta.detail>0;Hr&&!la&&!Os&&Ta.preventDefault()}var qi=ot.current;return qi.addEventListener("wheel",Ri,{passive:!1}),qi.addEventListener("DOMMouseScroll",Wo,{passive:!0}),qi.addEventListener("MozMousePixelScroll",oo,{passive:!1}),function(){qi.removeEventListener("wheel",Ri),qi.removeEventListener("DOMMouseScroll",Wo),qi.removeEventListener("MozMousePixelScroll",oo)}},[Hr,ua,ao]),(0,B.Z)(function(){if(In){var oo=hl(_n);Xn(oo),$i({x:oo})}},[xs.width,In]);var fo=function(){var qi,Ta;(qi=ro.current)===null||qi===void 0||qi.delayHidden(),(Ta=xa.current)===null||Ta===void 0||Ta.delayHidden()},ts=vt(ot,Ge,rr,At,at,function(){return Jn(!0)},Bi,fo);K.useImperativeHandle(ut,function(){return{nativeElement:jt.current,getScrollInfo:Uo,scrollTo:function(qi){function Ta(la){return la&&(0,M.Z)(la)==="object"&&("left"in la||"top"in la)}Ta(qi)?(qi.left!==void 0&&Xn(hl(qi.left)),ts(qi.top)):ts(qi)}}}),(0,B.Z)(function(){if(Ln){var oo=Ge.slice(qa,Oo+1);Ln(oo,Ge)}},[qa,Oo,Ge]);var il=je(Ge,at,rr,At),Jo=mr==null?void 0:mr({start:qa,end:Oo,virtual:Tr,offsetX:_n,offsetY:Do,rtl:fn,getSize:il}),Jl=se(Ge,qa,Oo,In,_n,Nn,en,Ki),zs=null;Me&&(zs=(0,C.Z)((0,n.Z)({},Sn?"height":"maxHeight",Me),Mt),Hr&&(zs.overflowY="hidden",In&&(zs.overflowX="hidden"),qr&&(zs.pointerEvents="none")));var Cs={};return fn&&(Cs.dir="rtl"),K.createElement("div",(0,E.Z)({ref:jt,style:(0,C.Z)((0,C.Z)({},Lt),{},{position:"relative"}),className:Ne},Cs,St),K.createElement(te.Z,{onResize:Na},K.createElement(hn,{className:"".concat(gt,"-holder"),style:zs,ref:ot,onScroll:Ll,onMouseEnter:fo},K.createElement(J,{prefixCls:gt,height:Aa,offsetX:_n,offsetY:Do,scrollWidth:In,onInnerResize:Jn,ref:Dt,innerProps:Er,rtl:fn,extra:Jo},Jl))),Tr&&Aa>Me&&K.createElement(lt,{ref:ro,prefixCls:gt,scrollOffset:rn,scrollRange:Aa,rtl:fn,onScroll:es,onStartMove:ci,onStopMove:Ci,spinSize:ma,containerSize:xs.height,style:Jr==null?void 0:Jr.verticalScrollBar,thumbStyle:Jr==null?void 0:Jr.verticalScrollBarThumb,showScrollBar:Ot}),Tr&&In>xs.width&&K.createElement(lt,{ref:xa,prefixCls:gt,scrollOffset:_n,scrollRange:In,rtl:fn,onScroll:es,onStartMove:ci,onStopMove:Ci,spinSize:Ba,containerSize:xs.width,horizontal:!0,style:Jr==null?void 0:Jr.horizontalScrollBar,thumbStyle:Jr==null?void 0:Jr.horizontalScrollBarThumb,showScrollBar:Ot}))}var wr=K.forwardRef(or);wr.displayName="List";var Dr=wr,lr=Dr},17243:function(H,Q,i){"use strict";function E(Se){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},E(Se)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.CopyToClipboard=void 0;var M=j(i(75271)),C=j(i(874)),n=["text","onCopy","options","children"];function j(Se){return Se&&Se.__esModule?Se:{default:Se}}function $(Se,be){var Ue=Object.keys(Se);if(Object.getOwnPropertySymbols){var qe=Object.getOwnPropertySymbols(Se);be&&(qe=qe.filter(function(je){return Object.getOwnPropertyDescriptor(Se,je).enumerable})),Ue.push.apply(Ue,qe)}return Ue}function U(Se){for(var be=1;be<arguments.length;be++){var Ue=arguments[be]!=null?arguments[be]:{};be%2?$(Object(Ue),!0).forEach(function(qe){ke(Se,qe,Ue[qe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(Ue)):$(Object(Ue)).forEach(function(qe){Object.defineProperty(Se,qe,Object.getOwnPropertyDescriptor(Ue,qe))})}return Se}function Y(Se,be){if(Se==null)return{};var Ue=te(Se,be),qe,je;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(Se);for(je=0;je<nt.length;je++)qe=nt[je],!(be.indexOf(qe)>=0)&&Object.prototype.propertyIsEnumerable.call(Se,qe)&&(Ue[qe]=Se[qe])}return Ue}function te(Se,be){if(Se==null)return{};var Ue={},qe=Object.keys(Se),je,nt;for(nt=0;nt<qe.length;nt++)je=qe[nt],!(be.indexOf(je)>=0)&&(Ue[je]=Se[je]);return Ue}function X(Se,be){if(!(Se instanceof be))throw new TypeError("Cannot call a class as a function")}function B(Se,be){for(var Ue=0;Ue<be.length;Ue++){var qe=be[Ue];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(Se,qe.key,qe)}}function K(Se,be,Ue){return be&&B(Se.prototype,be),Ue&&B(Se,Ue),Object.defineProperty(Se,"prototype",{writable:!1}),Se}function de(Se,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function");Se.prototype=Object.create(be&&be.prototype,{constructor:{value:Se,writable:!0,configurable:!0}}),Object.defineProperty(Se,"prototype",{writable:!1}),be&&he(Se,be)}function he(Se,be){return he=Object.setPrototypeOf||function(qe,je){return qe.__proto__=je,qe},he(Se,be)}function J(Se){var be=Ee();return function(){var qe=Le(Se),je;if(be){var nt=Le(this).constructor;je=Reflect.construct(qe,arguments,nt)}else je=qe.apply(this,arguments);return ae(this,je)}}function ae(Se,be){if(be&&(E(be)==="object"||typeof be=="function"))return be;if(be!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return se(Se)}function se(Se){if(Se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se}function Ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Se){return!1}}function Le(Se){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(Ue){return Ue.__proto__||Object.getPrototypeOf(Ue)},Le(Se)}function ke(Se,be,Ue){return be in Se?Object.defineProperty(Se,be,{value:Ue,enumerable:!0,configurable:!0,writable:!0}):Se[be]=Ue,Se}var ye=function(Se){de(Ue,Se);var be=J(Ue);function Ue(){var qe;X(this,Ue);for(var je=arguments.length,nt=new Array(je),Ct=0;Ct<je;Ct++)nt[Ct]=arguments[Ct];return qe=be.call.apply(be,[this].concat(nt)),ke(se(qe),"onClick",function(ft){var Et=qe.props,yt=Et.text,_t=Et.onCopy,He=Et.children,bt=Et.options,Tt=M.default.Children.only(He),st=(0,C.default)(yt,bt);_t&&_t(yt,st),Tt&&Tt.props&&typeof Tt.props.onClick=="function"&&Tt.props.onClick(ft)}),qe}return K(Ue,[{key:"render",value:function(){var je=this.props,nt=je.text,Ct=je.onCopy,ft=je.options,Et=je.children,yt=Y(je,n),_t=M.default.Children.only(Et);return M.default.cloneElement(_t,U(U({},yt),{},{onClick:this.onClick}))}}]),Ue}(M.default.PureComponent);Q.CopyToClipboard=ye,ke(ye,"defaultProps",{onCopy:void 0,options:void 0})},58226:function(H,Q,i){"use strict";var E=i(17243),M=E.CopyToClipboard;M.CopyToClipboard=M,H.exports=M},86521:function(H,Q,i){"use strict";var E=i(75271),M=i(97537);function C(_){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+_,F=1;F<arguments.length;F++)y+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,j={};function $(_,y){U(_,y),U(_+"Capture",y)}function U(_,y){for(j[_]=y,_=0;_<y.length;_++)n.add(y[_])}var Y=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),te=Object.prototype.hasOwnProperty,X=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B={},K={};function de(_){return te.call(K,_)?!0:te.call(B,_)?!1:X.test(_)?K[_]=!0:(B[_]=!0,!1)}function he(_,y,F,ie){if(F!==null&&F.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return ie?!1:F!==null?!F.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function J(_,y,F,ie){if(y===null||typeof y=="undefined"||he(_,y,F,ie))return!0;if(ie)return!1;if(F!==null)switch(F.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function ae(_,y,F,ie,Re,Ze,Xt){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=ie,this.attributeNamespace=Re,this.mustUseProperty=F,this.propertyName=_,this.type=y,this.sanitizeURL=Ze,this.removeEmptyString=Xt}var se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){se[_]=new ae(_,0,!1,_,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var y=_[0];se[y]=new ae(y,1,!1,_[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(_){se[_]=new ae(_,2,!1,_.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){se[_]=new ae(_,2,!1,_,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){se[_]=new ae(_,3,!1,_.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(_){se[_]=new ae(_,3,!0,_,null,!1,!1)}),["capture","download"].forEach(function(_){se[_]=new ae(_,4,!1,_,null,!1,!1)}),["cols","rows","size","span"].forEach(function(_){se[_]=new ae(_,6,!1,_,null,!1,!1)}),["rowSpan","start"].forEach(function(_){se[_]=new ae(_,5,!1,_.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function Le(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var y=_.replace(Ee,Le);se[y]=new ae(y,1,!1,_,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var y=_.replace(Ee,Le);se[y]=new ae(y,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(_){var y=_.replace(Ee,Le);se[y]=new ae(y,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(_){se[_]=new ae(_,1,!1,_.toLowerCase(),null,!1,!1)}),se.xlinkHref=new ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(_){se[_]=new ae(_,1,!1,_.toLowerCase(),null,!0,!0)});function ke(_,y,F,ie){var Re=se.hasOwnProperty(y)?se[y]:null;(Re!==null?Re.type!==0:ie||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(J(y,F,Re,ie)&&(F=null),ie||Re===null?de(y)&&(F===null?_.removeAttribute(y):_.setAttribute(y,""+F)):Re.mustUseProperty?_[Re.propertyName]=F===null?Re.type===3?!1:"":F:(y=Re.attributeName,ie=Re.attributeNamespace,F===null?_.removeAttribute(y):(Re=Re.type,F=Re===3||Re===4&&F===!0?"":""+F,ie?_.setAttributeNS(ie,y,F):_.setAttribute(y,F))))}var ye=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),be=Symbol.for("react.portal"),Ue=Symbol.for("react.fragment"),qe=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),Ct=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),He=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var bt=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Tt=Symbol.iterator;function st(_){return _===null||typeof _!="object"?null:(_=Tt&&_[Tt]||_["@@iterator"],typeof _=="function"?_:null)}var Qe=Object.assign,mt;function Ht(_){if(mt===void 0)try{throw Error()}catch(F){var y=F.stack.trim().match(/\n( *(at )?)/);mt=y&&y[1]||""}return`
`+mt+_}var vt=!1;function ue(_,y){if(!_||vt)return"";vt=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(hi){var ie=hi}Reflect.construct(_,[],y)}else{try{y.call()}catch(hi){ie=hi}_.call(y.prototype)}else{try{throw Error()}catch(hi){ie=hi}_()}}catch(hi){if(hi&&ie&&typeof hi.stack=="string"){for(var Re=hi.stack.split(`
`),Ze=ie.stack.split(`
`),Xt=Re.length-1,Wn=Ze.length-1;1<=Xt&&0<=Wn&&Re[Xt]!==Ze[Wn];)Wn--;for(;1<=Xt&&0<=Wn;Xt--,Wn--)if(Re[Xt]!==Ze[Wn]){if(Xt!==1||Wn!==1)do if(Xt--,Wn--,0>Wn||Re[Xt]!==Ze[Wn]){var yr=`
`+Re[Xt].replace(" at new "," at ");return _.displayName&&yr.includes("<anonymous>")&&(yr=yr.replace("<anonymous>",_.displayName)),yr}while(1<=Xt&&0<=Wn);break}}}finally{vt=!1,Error.prepareStackTrace=F}return(_=_?_.displayName||_.name:"")?Ht(_):""}function lt(_){switch(_.tag){case 5:return Ht(_.type);case 16:return Ht("Lazy");case 13:return Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 2:case 15:return _=ue(_.type,!1),_;case 11:return _=ue(_.type.render,!1),_;case 1:return _=ue(_.type,!0),_;default:return""}}function le(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case Ue:return"Fragment";case be:return"Portal";case je:return"Profiler";case qe:return"StrictMode";case Et:return"Suspense";case yt:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case Ct:return(_.displayName||"Context")+".Consumer";case nt:return(_._context.displayName||"Context")+".Provider";case ft:var y=_.render;return _=_.displayName,_||(_=y.displayName||y.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case _t:return y=_.displayName||null,y!==null?y:le(_.type)||"Memo";case He:y=_._payload,_=_._init;try{return le(_(y))}catch(F){}}return null}function Je(_){var y=_.type;switch(_.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=y.render,_=_.displayName||_.name||"",y.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(y);case 8:return y===qe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function we(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function Pn(_){var y=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Mt(_){var y=Pn(_)?"checked":"value",F=Object.getOwnPropertyDescriptor(_.constructor.prototype,y),ie=""+_[y];if(!_.hasOwnProperty(y)&&typeof F!="undefined"&&typeof F.get=="function"&&typeof F.set=="function"){var Re=F.get,Ze=F.set;return Object.defineProperty(_,y,{configurable:!0,get:function(){return Re.call(this)},set:function(Xt){ie=""+Xt,Ze.call(this,Xt)}}),Object.defineProperty(_,y,{enumerable:F.enumerable}),{getValue:function(){return ie},setValue:function(Xt){ie=""+Xt},stopTracking:function(){_._valueTracker=null,delete _[y]}}}}function or(_){_._valueTracker||(_._valueTracker=Mt(_))}function wr(_){if(!_)return!1;var y=_._valueTracker;if(!y)return!0;var F=y.getValue(),ie="";return _&&(ie=Pn(_)?_.checked?"true":"false":_.value),_=ie,_!==F?(y.setValue(_),!0):!1}function Dr(_){if(_=_||(typeof document!="undefined"?document:void 0),typeof _=="undefined")return null;try{return _.activeElement||_.body}catch(y){return _.body}}function lr(_,y){var F=y.checked;return Qe({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:F!=null?F:_._wrapperState.initialChecked})}function Pe(_,y){var F=y.defaultValue==null?"":y.defaultValue,ie=y.checked!=null?y.checked:y.defaultChecked;F=we(y.value!=null?y.value:F),_._wrapperState={initialChecked:ie,initialValue:F,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function ut(_,y){y=y.checked,y!=null&&ke(_,"checked",y,!1)}function Ve(_,y){ut(_,y);var F=we(y.value),ie=y.type;if(F!=null)ie==="number"?(F===0&&_.value===""||_.value!=F)&&(_.value=""+F):_.value!==""+F&&(_.value=""+F);else if(ie==="submit"||ie==="reset"){_.removeAttribute("value");return}y.hasOwnProperty("value")?Gt(_,y.type,F):y.hasOwnProperty("defaultValue")&&Gt(_,y.type,we(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(_.defaultChecked=!!y.defaultChecked)}function gt(_,y,F){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var ie=y.type;if(!(ie!=="submit"&&ie!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+_._wrapperState.initialValue,F||y===_.value||(_.value=y),_.defaultValue=y}F=_.name,F!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,F!==""&&(_.name=F)}function Gt(_,y,F){(y!=="number"||Dr(_.ownerDocument)!==_)&&(F==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+F&&(_.defaultValue=""+F))}var Me=Array.isArray;function At(_,y,F,ie){if(_=_.options,y){y={};for(var Re=0;Re<F.length;Re++)y["$"+F[Re]]=!0;for(F=0;F<_.length;F++)Re=y.hasOwnProperty("$"+_[F].value),_[F].selected!==Re&&(_[F].selected=Re),Re&&ie&&(_[F].defaultSelected=!0)}else{for(F=""+we(F),y=null,Re=0;Re<_.length;Re++){if(_[Re].value===F){_[Re].selected=!0,ie&&(_[Re].defaultSelected=!0);return}y!==null||_[Re].disabled||(y=_[Re])}y!==null&&(y.selected=!0)}}function Bt(_,y){if(y.dangerouslySetInnerHTML!=null)throw Error(C(91));return Qe({},y,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function Sn(_,y){var F=y.value;if(F==null){if(F=y.children,y=y.defaultValue,F!=null){if(y!=null)throw Error(C(92));if(Me(F)){if(1<F.length)throw Error(C(93));F=F[0]}y=F}y==null&&(y=""),F=y}_._wrapperState={initialValue:we(F)}}function Lt(_,y){var F=we(y.value),ie=we(y.defaultValue);F!=null&&(F=""+F,F!==_.value&&(_.value=F),y.defaultValue==null&&_.defaultValue!==F&&(_.defaultValue=F)),ie!=null&&(_.defaultValue=""+ie)}function Bn(_){var y=_.textContent;y===_._wrapperState.initialValue&&y!==""&&y!==null&&(_.value=y)}function en(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gn(_,y){return _==null||_==="http://www.w3.org/1999/xhtml"?en(y):_==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var ar,Sr=function(_){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(y,F,ie,Re){MSApp.execUnsafeLocalFunction(function(){return _(y,F,ie,Re)})}:_}(function(_,y){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=y;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=ar.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;y.firstChild;)_.appendChild(y.firstChild)}});function In(_,y){if(y){var F=_.firstChild;if(F&&F===_.lastChild&&F.nodeType===3){F.nodeValue=y;return}}_.textContent=y}var Gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hn=["Webkit","ms","Moz","O"];Object.keys(Gn).forEach(function(_){hn.forEach(function(y){y=y+_.charAt(0).toUpperCase()+_.substring(1),Gn[y]=Gn[_]})});function mn(_,y,F){return y==null||typeof y=="boolean"||y===""?"":F||typeof y!="number"||y===0||Gn.hasOwnProperty(_)&&Gn[_]?(""+y).trim():y+"px"}function cn(_,y){_=_.style;for(var F in y)if(y.hasOwnProperty(F)){var ie=F.indexOf("--")===0,Re=mn(F,y[F],ie);F==="float"&&(F="cssFloat"),ie?_.setProperty(F,Re):_[F]=Re}}var Ln=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Er(_,y){if(y){if(Ln[_]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(C(137,_));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(C(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(C(61))}if(y.style!=null&&typeof y.style!="object")throw Error(C(62))}}function mr(_,y){if(_.indexOf("-")===-1)return typeof y.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jr=null;function Ie(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var Ot=null,St=null,at=null;function Xe(_){if(_=lc(_)){if(typeof Ot!="function")throw Error(C(280));var y=_.stateNode;y&&(y=tu(y),Ot(_.stateNode,_.type,y))}}function Nt(_){St?at?at.push(_):at=[_]:St=_}function Nn(){if(St){var _=St,y=at;if(at=St=null,Xe(_),y)for(_=0;_<y.length;_++)Xe(y[_])}}function Jn(_,y){return _(y)}function rr(){}var Br=!1;function Hr(_,y,F){if(Br)return _(y,F);Br=!0;try{return Jn(_,y,F)}finally{Br=!1,(St!==null||at!==null)&&(rr(),Nn())}}function zr(_,y){var F=_.stateNode;if(F===null)return null;var ie=tu(F);if(ie===null)return null;F=ie[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ie=!ie.disabled)||(_=_.type,ie=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!ie;break e;default:_=!1}if(_)return null;if(F&&typeof F!="function")throw Error(C(231,y,typeof F));return F}var Tr=!1;if(Y)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch(_){Tr=!1}function Ne(_,y,F,ie,Re,Ze,Xt,Wn,yr){var hi=Array.prototype.slice.call(arguments,3);try{y.apply(F,hi)}catch(Hi){this.onError(Hi)}}var Ge=!1,ot=null,Dt=!1,jt=null,sn={onError:function(_){Ge=!0,ot=_}};function xn(_,y,F,ie,Re,Ze,Xt,Wn,yr){Ge=!1,ot=null,Ne.apply(sn,arguments)}function rn(_,y,F,ie,Re,Ze,Xt,Wn,yr){if(xn.apply(this,arguments),Ge){if(Ge){var hi=ot;Ge=!1,ot=null}else throw Error(C(198));Dt||(Dt=!0,jt=hi)}}function Fn(_){var y=_,F=_;if(_.alternate)for(;y.return;)y=y.return;else{_=y;do y=_,y.flags&4098&&(F=y.return),_=y.return;while(_)}return y.tag===3?F:null}function Un(_){if(_.tag===13){var y=_.memoizedState;if(y===null&&(_=_.alternate,_!==null&&(y=_.memoizedState)),y!==null)return y.dehydrated}return null}function jn(_){if(Fn(_)!==_)throw Error(C(188))}function _n(_){var y=_.alternate;if(!y){if(y=Fn(_),y===null)throw Error(C(188));return y!==_?null:_}for(var F=_,ie=y;;){var Re=F.return;if(Re===null)break;var Ze=Re.alternate;if(Ze===null){if(ie=Re.return,ie!==null){F=ie;continue}break}if(Re.child===Ze.child){for(Ze=Re.child;Ze;){if(Ze===F)return jn(Re),_;if(Ze===ie)return jn(Re),y;Ze=Ze.sibling}throw Error(C(188))}if(F.return!==ie.return)F=Re,ie=Ze;else{for(var Xt=!1,Wn=Re.child;Wn;){if(Wn===F){Xt=!0,F=Re,ie=Ze;break}if(Wn===ie){Xt=!0,ie=Re,F=Ze;break}Wn=Wn.sibling}if(!Xt){for(Wn=Ze.child;Wn;){if(Wn===F){Xt=!0,F=Ze,ie=Re;break}if(Wn===ie){Xt=!0,ie=Ze,F=Re;break}Wn=Wn.sibling}if(!Xt)throw Error(C(189))}}if(F.alternate!==ie)throw Error(C(190))}if(F.tag!==3)throw Error(C(188));return F.stateNode.current===F?_:y}function Xn(_){return _=_n(_),_!==null?er(_):null}function er(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var y=er(_);if(y!==null)return y;_=_.sibling}return null}var Yr=M.unstable_scheduleCallback,qr=M.unstable_cancelCallback,Gr=M.unstable_shouldYield,ci=M.unstable_requestPaint,Ci=M.unstable_now,Ki=M.unstable_getCurrentPriorityLevel,Bi=M.unstable_ImmediatePriority,Di=M.unstable_UserBlockingPriority,yo=M.unstable_NormalPriority,po=M.unstable_LowPriority,Vo=M.unstable_IdlePriority,Xo=null,$o=null;function Aa(_){if($o&&typeof $o.onCommitFiberRoot=="function")try{$o.onCommitFiberRoot(Xo,_,void 0,(_.current.flags&128)===128)}catch(y){}}var qa=Math.clz32?Math.clz32:oa,Oo=Math.log,Do=Math.LN2;function oa(_){return _>>>=0,_===0?32:31-(Oo(_)/Do|0)|0}var Fa=64,xs=4194304;function tl(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function Na(_,y){var F=_.pendingLanes;if(F===0)return 0;var ie=0,Re=_.suspendedLanes,Ze=_.pingedLanes,Xt=F&268435455;if(Xt!==0){var Wn=Xt&~Re;Wn!==0?ie=tl(Wn):(Ze&=Xt,Ze!==0&&(ie=tl(Ze)))}else Xt=F&~Re,Xt!==0?ie=tl(Xt):Ze!==0&&(ie=tl(Ze));if(ie===0)return 0;if(y!==0&&y!==ie&&!(y&Re)&&(Re=ie&-ie,Ze=y&-y,Re>=Ze||Re===16&&(Ze&4194240)!==0))return y;if(ie&4&&(ie|=F&16),y=_.entangledLanes,y!==0)for(_=_.entanglements,y&=ie;0<y;)F=31-qa(y),Re=1<<F,ie|=_[F],y&=~Re;return ie}function ro(_,y){switch(_){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xa(_,y){for(var F=_.suspendedLanes,ie=_.pingedLanes,Re=_.expirationTimes,Ze=_.pendingLanes;0<Ze;){var Xt=31-qa(Ze),Wn=1<<Xt,yr=Re[Xt];yr===-1?(!(Wn&F)||Wn&ie)&&(Re[Xt]=ro(Wn,y)):yr<=y&&(_.expiredLanes|=Wn),Ze&=~Wn}}function Ba(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function ma(){var _=Fa;return Fa<<=1,!(Fa&4194240)&&(Fa=64),_}function ja(_){for(var y=[],F=0;31>F;F++)y.push(_);return y}function Sa(_,y,F){_.pendingLanes|=y,y!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,y=31-qa(y),_[y]=F}function us(_,y){var F=_.pendingLanes&~y;_.pendingLanes=y,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=y,_.mutableReadLanes&=y,_.entangledLanes&=y,y=_.entanglements;var ie=_.eventTimes;for(_=_.expirationTimes;0<F;){var Re=31-qa(F),Ze=1<<Re;y[Re]=0,ie[Re]=-1,_[Re]=-1,F&=~Ze}}function ua(_,y){var F=_.entangledLanes|=y;for(_=_.entanglements;F;){var ie=31-qa(F),Re=1<<ie;Re&y|_[ie]&y&&(_[ie]|=y),F&=~Re}}var ao=0;function Ma(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var ko,No,Uo,Hs,$i,es=!1,Ll=[],hl=null,ho=null,Ul=null,Ml=new Map,Ri=new Map,Wo=[],fo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ts(_,y){switch(_){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":Ml.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(y.pointerId)}}function il(_,y,F,ie,Re,Ze){return _===null||_.nativeEvent!==Ze?(_={blockedOn:y,domEventName:F,eventSystemFlags:ie,nativeEvent:Ze,targetContainers:[Re]},y!==null&&(y=lc(y),y!==null&&No(y)),_):(_.eventSystemFlags|=ie,y=_.targetContainers,Re!==null&&y.indexOf(Re)===-1&&y.push(Re),_)}function Jo(_,y,F,ie,Re){switch(y){case"focusin":return hl=il(hl,_,y,F,ie,Re),!0;case"dragenter":return ho=il(ho,_,y,F,ie,Re),!0;case"mouseover":return Ul=il(Ul,_,y,F,ie,Re),!0;case"pointerover":var Ze=Re.pointerId;return Ml.set(Ze,il(Ml.get(Ze)||null,_,y,F,ie,Re)),!0;case"gotpointercapture":return Ze=Re.pointerId,Ri.set(Ze,il(Ri.get(Ze)||null,_,y,F,ie,Re)),!0}return!1}function Jl(_){var y=js(_.target);if(y!==null){var F=Fn(y);if(F!==null){if(y=F.tag,y===13){if(y=Un(F),y!==null){_.blockedOn=y,$i(_.priority,function(){Uo(F)});return}}else if(y===3&&F.stateNode.current.memoizedState.isDehydrated){_.blockedOn=F.tag===3?F.stateNode.containerInfo:null;return}}}_.blockedOn=null}function zs(_){if(_.blockedOn!==null)return!1;for(var y=_.targetContainers;0<y.length;){var F=bs(_.domEventName,_.eventSystemFlags,y[0],_.nativeEvent);if(F===null){F=_.nativeEvent;var ie=new F.constructor(F.type,F);Jr=ie,F.target.dispatchEvent(ie),Jr=null}else return y=lc(F),y!==null&&No(y),_.blockedOn=F,!1;y.shift()}return!0}function Cs(_,y,F){zs(_)&&F.delete(y)}function oo(){es=!1,hl!==null&&zs(hl)&&(hl=null),ho!==null&&zs(ho)&&(ho=null),Ul!==null&&zs(Ul)&&(Ul=null),Ml.forEach(Cs),Ri.forEach(Cs)}function qi(_,y){_.blockedOn===y&&(_.blockedOn=null,es||(es=!0,M.unstable_scheduleCallback(M.unstable_NormalPriority,oo)))}function Ta(_){function y(Re){return qi(Re,_)}if(0<Ll.length){qi(Ll[0],_);for(var F=1;F<Ll.length;F++){var ie=Ll[F];ie.blockedOn===_&&(ie.blockedOn=null)}}for(hl!==null&&qi(hl,_),ho!==null&&qi(ho,_),Ul!==null&&qi(Ul,_),Ml.forEach(y),Ri.forEach(y),F=0;F<Wo.length;F++)ie=Wo[F],ie.blockedOn===_&&(ie.blockedOn=null);for(;0<Wo.length&&(F=Wo[0],F.blockedOn===null);)Jl(F),F.blockedOn===null&&Wo.shift()}var la=ye.ReactCurrentBatchConfig,Os=!0;function Vl(_,y,F,ie){var Re=ao,Ze=la.transition;la.transition=null;try{ao=1,yu(_,y,F,ie)}finally{ao=Re,la.transition=Ze}}function ns(_,y,F,ie){var Re=ao,Ze=la.transition;la.transition=null;try{ao=4,yu(_,y,F,ie)}finally{ao=Re,la.transition=Ze}}function yu(_,y,F,ie){if(Os){var Re=bs(_,y,F,ie);if(Re===null)_a(_,y,ie,Fs,F),ts(_,ie);else if(Jo(Re,_,y,F,ie))ie.stopPropagation();else if(ts(_,ie),y&4&&-1<fo.indexOf(_)){for(;Re!==null;){var Ze=lc(Re);if(Ze!==null&&ko(Ze),Ze=bs(_,y,F,ie),Ze===null&&_a(_,y,ie,Fs,F),Ze===Re)break;Re=Ze}Re!==null&&ie.stopPropagation()}else _a(_,y,ie,null,F)}}var Fs=null;function bs(_,y,F,ie){if(Fs=null,_=Ie(ie),_=js(_),_!==null)if(y=Fn(_),y===null)_=null;else if(F=y.tag,F===13){if(_=Un(y),_!==null)return _;_=null}else if(F===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;_=null}else y!==_&&(_=null);return Fs=_,null}function cs(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ki()){case Bi:return 1;case Di:return 4;case yo:case po:return 16;case Vo:return 536870912;default:return 16}default:return 16}}var Gl=null,Dl=null,fs=null;function ws(){if(fs)return fs;var _,y=Dl,F=y.length,ie,Re="value"in Gl?Gl.value:Gl.textContent,Ze=Re.length;for(_=0;_<F&&y[_]===Re[_];_++);var Xt=F-_;for(ie=1;ie<=Xt&&y[F-ie]===Re[Ze-ie];ie++);return fs=Re.slice(_,1<ie?1-ie:void 0)}function ps(_){var y=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&y===13&&(_=13)):_=y,_===10&&(_=13),32<=_||_===13?_:0}function Za(){return!0}function ru(){return!1}function Es(_){function y(F,ie,Re,Ze,Xt){this._reactName=F,this._targetInst=Re,this.type=ie,this.nativeEvent=Ze,this.target=Xt,this.currentTarget=null;for(var Wn in _)_.hasOwnProperty(Wn)&&(F=_[Wn],this[Wn]=F?F(Ze):Ze[Wn]);return this.isDefaultPrevented=(Ze.defaultPrevented!=null?Ze.defaultPrevented:Ze.returnValue===!1)?Za:ru,this.isPropagationStopped=ru,this}return Qe(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var F=this.nativeEvent;F&&(F.preventDefault?F.preventDefault():typeof F.returnValue!="unknown"&&(F.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var F=this.nativeEvent;F&&(F.stopPropagation?F.stopPropagation():typeof F.cancelBubble!="unknown"&&(F.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),y}var xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=Es(xu),ol=Qe({},xu,{view:0,detail:0}),Sc=Es(ol),Pu,Lc,Ql,ms=Qe({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==Ql&&(Ql&&_.type==="mousemove"?(Pu=_.screenX-Ql.screenX,Lc=_.screenY-Ql.screenY):Lc=Pu=0,Ql=_),Pu)},movementY:function(_){return"movementY"in _?_.movementY:Lc}}),cu=Es(ms),Tc=Qe({},ms,{dataTransfer:0}),Ic=Es(Tc),bu=Qe({},ol,{relatedTarget:0}),Dc=Es(bu),kc=Qe({},xu,{animationName:0,elapsedTime:0,pseudoElement:0}),du=Es(kc),ql=Qe({},xu,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),wu=Es(ql),Qs=Qe({},xu,{data:0}),Cl=Es(Qs),Al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(_){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(_):(_=Eu[_])?!!y[_]:!1}function Mc(){return Nc}var fd=Qe({},ol,{key:function(_){if(_.key){var y=Al[_.key]||_.key;if(y!=="Unidentified")return y}return _.type==="keypress"?(_=ps(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?eu[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(_){return _.type==="keypress"?ps(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?ps(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),Ad=Es(fd),jo=Qe({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=Es(jo),go=Qe({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),Ui=Es(go),qs=Qe({},xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Io=Es(qs),Nu=Qe({},ms,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Cc=Es(Nu),Mo=[9,13,27,32],Zc=Y&&"CompositionEvent"in window,gc=null;Y&&"documentMode"in document&&(gc=document.documentMode);var Pd=Y&&"TextEvent"in window&&!gc,Wc=Y&&(!Zc||gc&&8<gc&&11>=gc),kl=" ",zt=!1;function Ft(_,y){switch(_){case"keyup":return Mo.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var vr=!1;function cr(_,y){switch(_){case"compositionend":return Tn(y);case"keypress":return y.which!==32?null:(zt=!0,kl);case"textInput":return _=y.data,_===kl&&zt?null:_;default:return null}}function Nr(_,y){if(vr)return _==="compositionend"||!Zc&&Ft(_,y)?(_=ws(),fs=Dl=Gl=null,vr=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return Wc&&y.locale!=="ko"?null:y.data;default:return null}}var Lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qr(_){var y=_&&_.nodeName&&_.nodeName.toLowerCase();return y==="input"?!!Lr[_.type]:y==="textarea"}function ui(_,y,F,ie){Nt(ie),y=ta(y,"onChange"),0<y.length&&(F=new Yu("onChange","change",null,F,ie),_.push({event:F,listeners:y}))}var Ii=null,Ur=null;function Ai(_){ei(_,0)}function Zi(_){var y=$l(_);if(wr(y))return _}function Ji(_,y){if(_==="change")return y}var no=!1;if(Y){var Lo;if(Y){var mo="oninput"in document;if(!mo){var Po=document.createElement("div");Po.setAttribute("oninput","return;"),mo=typeof Po.oninput=="function"}Lo=mo}else Lo=!1;no=Lo&&(!document.documentMode||9<document.documentMode)}function I(){Ii&&(Ii.detachEvent("onpropertychange",c),Ur=Ii=null)}function c(_){if(_.propertyName==="value"&&Zi(Ur)){var y=[];ui(y,Ur,_,Ie(_)),Hr(Ai,y)}}function f(_,y,F){_==="focusin"?(I(),Ii=y,Ur=F,Ii.attachEvent("onpropertychange",c)):_==="focusout"&&I()}function T(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return Zi(Ur)}function W(_,y){if(_==="click")return Zi(y)}function me(_,y){if(_==="input"||_==="change")return Zi(y)}function ze(_,y){return _===y&&(_!==0||1/_===1/y)||_!==_&&y!==y}var tt=typeof Object.is=="function"?Object.is:ze;function It(_,y){if(tt(_,y))return!0;if(typeof _!="object"||_===null||typeof y!="object"||y===null)return!1;var F=Object.keys(_),ie=Object.keys(y);if(F.length!==ie.length)return!1;for(ie=0;ie<F.length;ie++){var Re=F[ie];if(!te.call(y,Re)||!tt(_[Re],y[Re]))return!1}return!0}function ne(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function ge(_,y){var F=ne(_);_=0;for(var ie;F;){if(F.nodeType===3){if(ie=_+F.textContent.length,_<=y&&ie>=y)return{node:F,offset:y-_};_=ie}e:{for(;F;){if(F.nextSibling){F=F.nextSibling;break e}F=F.parentNode}F=void 0}F=ne(F)}}function xe(_,y){return _&&y?_===y?!0:_&&_.nodeType===3?!1:y&&y.nodeType===3?xe(_,y.parentNode):"contains"in _?_.contains(y):_.compareDocumentPosition?!!(_.compareDocumentPosition(y)&16):!1:!1}function xt(){for(var _=window,y=Dr();y instanceof _.HTMLIFrameElement;){try{var F=typeof y.contentWindow.location.href=="string"}catch(ie){F=!1}if(F)_=y.contentWindow;else break;y=Dr(_.document)}return y}function pn(_){var y=_&&_.nodeName&&_.nodeName.toLowerCase();return y&&(y==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||y==="textarea"||_.contentEditable==="true")}function Mn(_){var y=xt(),F=_.focusedElem,ie=_.selectionRange;if(y!==F&&F&&F.ownerDocument&&xe(F.ownerDocument.documentElement,F)){if(ie!==null&&pn(F)){if(y=ie.start,_=ie.end,_===void 0&&(_=y),"selectionStart"in F)F.selectionStart=y,F.selectionEnd=Math.min(_,F.value.length);else if(_=(y=F.ownerDocument||document)&&y.defaultView||window,_.getSelection){_=_.getSelection();var Re=F.textContent.length,Ze=Math.min(ie.start,Re);ie=ie.end===void 0?Ze:Math.min(ie.end,Re),!_.extend&&Ze>ie&&(Re=ie,ie=Ze,Ze=Re),Re=ge(F,Ze);var Xt=ge(F,ie);Re&&Xt&&(_.rangeCount!==1||_.anchorNode!==Re.node||_.anchorOffset!==Re.offset||_.focusNode!==Xt.node||_.focusOffset!==Xt.offset)&&(y=y.createRange(),y.setStart(Re.node,Re.offset),_.removeAllRanges(),Ze>ie?(_.addRange(y),_.extend(Xt.node,Xt.offset)):(y.setEnd(Xt.node,Xt.offset),_.addRange(y)))}}for(y=[],_=F;_=_.parentNode;)_.nodeType===1&&y.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<y.length;F++)_=y[F],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Hn=Y&&"documentMode"in document&&11>=document.documentMode,Qn=null,tr=null,Ir=null,oi=!1;function ni(_,y,F){var ie=F.window===F?F.document:F.nodeType===9?F:F.ownerDocument;oi||Qn==null||Qn!==Dr(ie)||(ie=Qn,"selectionStart"in ie&&pn(ie)?ie={start:ie.selectionStart,end:ie.selectionEnd}:(ie=(ie.ownerDocument&&ie.ownerDocument.defaultView||window).getSelection(),ie={anchorNode:ie.anchorNode,anchorOffset:ie.anchorOffset,focusNode:ie.focusNode,focusOffset:ie.focusOffset}),Ir&&It(Ir,ie)||(Ir=ie,ie=ta(tr,"onSelect"),0<ie.length&&(y=new Yu("onSelect","select",null,y,F),_.push({event:y,listeners:ie}),y.target=Qn)))}function _i(_,y){var F={};return F[_.toLowerCase()]=y.toLowerCase(),F["Webkit"+_]="webkit"+y,F["Moz"+_]="moz"+y,F}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Si={},So={};Y&&(So=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function io(_){if(Si[_])return Si[_];if(!wi[_])return _;var y=wi[_],F;for(F in y)if(y.hasOwnProperty(F)&&F in So)return Si[_]=y[F];return _}var Wi=io("animationend"),xo=io("animationiteration"),Qi=io("animationstart"),Ho=io("transitionend"),La=new Map,as="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(_,y){La.set(_,y),$(y,[_])}for(var Rs=0;Rs<as.length;Rs++){var Go=as[Rs],Ti=Go.toLowerCase(),Ei=Go[0].toUpperCase()+Go.slice(1);Ja(Ti,"on"+Ei)}Ja(Wi,"onAnimationEnd"),Ja(xo,"onAnimationIteration"),Ja(Qi,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(Ho,"onTransitionEnd"),U("onMouseEnter",["mouseout","mouseover"]),U("onMouseLeave",["mouseout","mouseover"]),U("onPointerEnter",["pointerout","pointerover"]),U("onPointerLeave",["pointerout","pointerover"]),$("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$("onBeforeInput",["compositionend","keypress","textInput","paste"]),$("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(fr));function _r(_,y,F){var ie=_.type||"unknown-event";_.currentTarget=F,rn(ie,y,void 0,_),_.currentTarget=null}function ei(_,y){y=(y&4)!==0;for(var F=0;F<_.length;F++){var ie=_[F],Re=ie.event;ie=ie.listeners;e:{var Ze=void 0;if(y)for(var Xt=ie.length-1;0<=Xt;Xt--){var Wn=ie[Xt],yr=Wn.instance,hi=Wn.currentTarget;if(Wn=Wn.listener,yr!==Ze&&Re.isPropagationStopped())break e;_r(Re,Wn,hi),Ze=yr}else for(Xt=0;Xt<ie.length;Xt++){if(Wn=ie[Xt],yr=Wn.instance,hi=Wn.currentTarget,Wn=Wn.listener,yr!==Ze&&Re.isPropagationStopped())break e;_r(Re,Wn,hi),Ze=yr}}}if(Dt)throw _=jt,Dt=!1,jt=null,_}function Xr(_,y){var F=y[sc];F===void 0&&(F=y[sc]=new Set);var ie=_+"__bubble";F.has(ie)||(Ro(y,_,2,!1),F.add(ie))}function fi(_,y,F){var ie=0;y&&(ie|=4),Ro(F,_,ie,y)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function vo(_){if(!_[Vi]){_[Vi]=!0,n.forEach(function(F){F!=="selectionchange"&&(nr.has(F)||fi(F,!1,_),fi(F,!0,_))});var y=_.nodeType===9?_:_.ownerDocument;y===null||y[Vi]||(y[Vi]=!0,fi("selectionchange",!1,y))}}function Ro(_,y,F,ie){switch(cs(y)){case 1:var Re=Vl;break;case 4:Re=ns;break;default:Re=yu}F=Re.bind(null,y,F,_),Re=void 0,!Tr||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(Re=!0),ie?Re!==void 0?_.addEventListener(y,F,{capture:!0,passive:Re}):_.addEventListener(y,F,!0):Re!==void 0?_.addEventListener(y,F,{passive:Re}):_.addEventListener(y,F,!1)}function _a(_,y,F,ie,Re){var Ze=ie;if(!(y&1)&&!(y&2)&&ie!==null)e:for(;;){if(ie===null)return;var Xt=ie.tag;if(Xt===3||Xt===4){var Wn=ie.stateNode.containerInfo;if(Wn===Re||Wn.nodeType===8&&Wn.parentNode===Re)break;if(Xt===4)for(Xt=ie.return;Xt!==null;){var yr=Xt.tag;if((yr===3||yr===4)&&(yr=Xt.stateNode.containerInfo,yr===Re||yr.nodeType===8&&yr.parentNode===Re))return;Xt=Xt.return}for(;Wn!==null;){if(Xt=js(Wn),Xt===null)return;if(yr=Xt.tag,yr===5||yr===6){ie=Ze=Xt;continue e}Wn=Wn.parentNode}}ie=ie.return}Hr(function(){var hi=Ze,Hi=Ie(F),bi=[];e:{var to=La.get(_);if(to!==void 0){var Ko=Yu,da=_;switch(_){case"keypress":if(ps(F)===0)break e;case"keydown":case"keyup":Ko=Ad;break;case"focusin":da="focus",Ko=Dc;break;case"focusout":da="blur",Ko=Dc;break;case"beforeblur":case"afterblur":Ko=Dc;break;case"click":if(F.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ko=cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ko=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ko=Ui;break;case Wi:case xo:case Qi:Ko=du;break;case Ho:Ko=Io;break;case"scroll":Ko=Sc;break;case"wheel":Ko=Cc;break;case"copy":case"cut":case"paste":Ko=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ko=aa}var ha=(y&4)!==0,nc=!ha&&_==="scroll",Rr=ha?to!==null?to+"Capture":null:to;ha=[];for(var $r=hi,ii;$r!==null;){ii=$r;var Eo=ii.stateNode;if(ii.tag===5&&Eo!==null&&(ii=Eo,Rr!==null&&(Eo=zr($r,Rr),Eo!=null&&ha.push(ca($r,Eo,ii)))),nc)break;$r=$r.return}0<ha.length&&(to=new Ko(to,da,null,F,Hi),bi.push({event:to,listeners:ha}))}}if(!(y&7)){e:{if(to=_==="mouseover"||_==="pointerover",Ko=_==="mouseout"||_==="pointerout",to&&F!==Jr&&(da=F.relatedTarget||F.fromElement)&&(js(da)||da[Ys]))break e;if((Ko||to)&&(to=Hi.window===Hi?Hi:(to=Hi.ownerDocument)?to.defaultView||to.parentWindow:window,Ko?(da=F.relatedTarget||F.toElement,Ko=hi,da=da?js(da):null,da!==null&&(nc=Fn(da),da!==nc||da.tag!==5&&da.tag!==6)&&(da=null)):(Ko=null,da=hi),Ko!==da)){if(ha=cu,Eo="onMouseLeave",Rr="onMouseEnter",$r="mouse",(_==="pointerout"||_==="pointerover")&&(ha=aa,Eo="onPointerLeave",Rr="onPointerEnter",$r="pointer"),nc=Ko==null?to:$l(Ko),ii=da==null?to:$l(da),to=new ha(Eo,$r+"leave",Ko,F,Hi),to.target=nc,to.relatedTarget=ii,Eo=null,js(Hi)===hi&&(ha=new ha(Rr,$r+"enter",da,F,Hi),ha.target=ii,ha.relatedTarget=nc,Eo=ha),nc=Eo,Ko&&da)t:{for(ha=Ko,Rr=da,$r=0,ii=ha;ii;ii=ds(ii))$r++;for(ii=0,Eo=Rr;Eo;Eo=ds(Eo))ii++;for(;0<$r-ii;)ha=ds(ha),$r--;for(;0<ii-$r;)Rr=ds(Rr),ii--;for(;$r--;){if(ha===Rr||Rr!==null&&ha===Rr.alternate)break t;ha=ds(ha),Rr=ds(Rr)}ha=null}else ha=null;Ko!==null&&iu(bi,to,Ko,ha,!1),da!==null&&nc!==null&&iu(bi,nc,da,ha,!0)}}e:{if(to=hi?$l(hi):window,Ko=to.nodeName&&to.nodeName.toLowerCase(),Ko==="select"||Ko==="input"&&to.type==="file")var ya=Ji;else if(Qr(to))if(no)ya=me;else{ya=T;var wa=f}else(Ko=to.nodeName)&&Ko.toLowerCase()==="input"&&(to.type==="checkbox"||to.type==="radio")&&(ya=W);if(ya&&(ya=ya(_,hi))){ui(bi,ya,F,Hi);break e}wa&&wa(_,to,hi),_==="focusout"&&(wa=to._wrapperState)&&wa.controlled&&to.type==="number"&&Gt(to,"number",to.value)}switch(wa=hi?$l(hi):window,_){case"focusin":(Qr(wa)||wa.contentEditable==="true")&&(Qn=wa,tr=hi,Ir=null);break;case"focusout":Ir=tr=Qn=null;break;case"mousedown":oi=!0;break;case"contextmenu":case"mouseup":case"dragend":oi=!1,ni(bi,F,Hi);break;case"selectionchange":if(Hn)break;case"keydown":case"keyup":ni(bi,F,Hi)}var Qa;if(Zc)e:{switch(_){case"compositionstart":var ea="onCompositionStart";break e;case"compositionend":ea="onCompositionEnd";break e;case"compositionupdate":ea="onCompositionUpdate";break e}ea=void 0}else vr?Ft(_,F)&&(ea="onCompositionEnd"):_==="keydown"&&F.keyCode===229&&(ea="onCompositionStart");ea&&(Wc&&F.locale!=="ko"&&(vr||ea!=="onCompositionStart"?ea==="onCompositionEnd"&&vr&&(Qa=ws()):(Gl=Hi,Dl="value"in Gl?Gl.value:Gl.textContent,vr=!0)),wa=ta(hi,ea),0<wa.length&&(ea=new Cl(ea,_,null,F,Hi),bi.push({event:ea,listeners:wa}),Qa?ea.data=Qa:(Qa=Tn(F),Qa!==null&&(ea.data=Qa)))),(Qa=Pd?cr(_,F):Nr(_,F))&&(hi=ta(hi,"onBeforeInput"),0<hi.length&&(Hi=new Cl("onBeforeInput","beforeinput",null,F,Hi),bi.push({event:Hi,listeners:hi}),Hi.data=Qa))}ei(bi,y)})}function ca(_,y,F){return{instance:_,listener:y,currentTarget:F}}function ta(_,y){for(var F=y+"Capture",ie=[];_!==null;){var Re=_,Ze=Re.stateNode;Re.tag===5&&Ze!==null&&(Re=Ze,Ze=zr(_,F),Ze!=null&&ie.unshift(ca(_,Ze,Re)),Ze=zr(_,y),Ze!=null&&ie.push(ca(_,Ze,Re))),_=_.return}return ie}function ds(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function iu(_,y,F,ie,Re){for(var Ze=y._reactName,Xt=[];F!==null&&F!==ie;){var Wn=F,yr=Wn.alternate,hi=Wn.stateNode;if(yr!==null&&yr===ie)break;Wn.tag===5&&hi!==null&&(Wn=hi,Re?(yr=zr(F,Ze),yr!=null&&Xt.unshift(ca(F,yr,Wn))):Re||(yr=zr(F,Ze),yr!=null&&Xt.push(ca(F,yr,Wn)))),F=F.return}Xt.length!==0&&_.push({event:y,listeners:Xt})}var Ks=/\r\n?/g,Ou=/\u0000|\uFFFD/g;function bl(_){return(typeof _=="string"?_:""+_).replace(Ks,`
`).replace(Ou,"")}function vs(_,y,F){if(y=bl(y),bl(_)!==y&&F)throw Error(C(425))}function Co(){}var Pl=null,As=null;function nl(_,y){return _==="textarea"||_==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Ol=typeof setTimeout=="function"?setTimeout:void 0,Ac=typeof clearTimeout=="function"?clearTimeout:void 0,Su=typeof Promise=="function"?Promise:void 0,Bs=typeof queueMicrotask=="function"?queueMicrotask:typeof Su!="undefined"?function(_){return Su.resolve(null).then(_).catch(hs)}:Ol;function hs(_){setTimeout(function(){throw _})}function ou(_,y){var F=y,ie=0;do{var Re=F.nextSibling;if(_.removeChild(F),Re&&Re.nodeType===8)if(F=Re.data,F==="/$"){if(ie===0){_.removeChild(Re),Ta(y);return}ie--}else F!=="$"&&F!=="$?"&&F!=="$!"||ie++;F=Re}while(F);Ta(y)}function fl(_){for(;_!=null;_=_.nextSibling){var y=_.nodeType;if(y===1||y===3)break;if(y===8){if(y=_.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return _}function pl(_){_=_.previousSibling;for(var y=0;_;){if(_.nodeType===8){var F=_.data;if(F==="$"||F==="$!"||F==="$?"){if(y===0)return _;y--}else F==="/$"&&y++}_=_.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),au="__reactFiber$"+Rl,Xu="__reactProps$"+Rl,Ys="__reactContainer$"+Rl,sc="__reactEvents$"+Rl,hu="__reactListeners$"+Rl,vc="__reactHandles$"+Rl;function js(_){var y=_[au];if(y)return y;for(var F=_.parentNode;F;){if(y=F[Ys]||F[au]){if(F=y.alternate,y.child!==null||F!==null&&F.child!==null)for(_=pl(_);_!==null;){if(F=_[au])return F;_=pl(_)}return y}_=F,F=_.parentNode}return null}function lc(_){return _=_[au]||_[Ys],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function $l(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(C(33))}function tu(_){return _[Xu]||null}var zu=[],_s=-1;function Xi(_){return{current:_}}function Qo(_){0>_s||(_.current=zu[_s],zu[_s]=null,_s--)}function Ua(_,y){_s++,zu[_s]=_.current,_.current=y}var al={},ml=Xi(al),Ls=Xi(!1),Tu=al;function Hc(_,y){var F=_.type.contextTypes;if(!F)return al;var ie=_.stateNode;if(ie&&ie.__reactInternalMemoizedUnmaskedChildContext===y)return ie.__reactInternalMemoizedMaskedChildContext;var Re={},Ze;for(Ze in F)Re[Ze]=y[Ze];return ie&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=y,_.__reactInternalMemoizedMaskedChildContext=Re),Re}function $s(_){return _=_.childContextTypes,_!=null}function Iu(){Qo(Ls),Qo(ml)}function Fu(_,y,F){if(ml.current!==al)throw Error(C(168));Ua(ml,y),Ua(Ls,F)}function rd(_,y,F){var ie=_.stateNode;if(y=y.childContextTypes,typeof ie.getChildContext!="function")return F;ie=ie.getChildContext();for(var Re in ie)if(!(Re in y))throw Error(C(108,Je(_)||"Unknown",Re));return Qe({},F,ie)}function zc(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||al,Tu=ml.current,Ua(ml,_),Ua(Ls,Ls.current),!0}function pd(_,y,F){var ie=_.stateNode;if(!ie)throw Error(C(169));F?(_=rd(_,y,Tu),ie.__reactInternalMemoizedMergedChildContext=_,Qo(Ls),Qo(ml),Ua(ml,_)):Qo(Ls),Ua(Ls,F)}var Bu=null,Ju=!1,Pc=!1;function md(_){Bu===null?Bu=[_]:Bu.push(_)}function eh(_){Ju=!0,md(_)}function fu(){if(!Pc&&Bu!==null){Pc=!0;var _=0,y=ao;try{var F=Bu;for(ao=1;_<F.length;_++){var ie=F[_];do ie=ie(!0);while(ie!==null)}Bu=null,Ju=!1}catch(Re){throw Bu!==null&&(Bu=Bu.slice(_+1)),Yr(Bi,fu),Re}finally{ao=y,Pc=!1}}return null}var ju=[],Fi=0,Fc=null,Oc=0,nu=[],ss=0,Pi=null,Ss=1,Nl="";function pu(_,y){ju[Fi++]=Oc,ju[Fi++]=Fc,Fc=_,Oc=y}function Bc(_,y,F){nu[ss++]=Ss,nu[ss++]=Nl,nu[ss++]=Pi,Pi=_;var ie=Ss;_=Nl;var Re=32-qa(ie)-1;ie&=~(1<<Re),F+=1;var Ze=32-qa(y)+Re;if(30<Ze){var Xt=Re-Re%5;Ze=(ie&(1<<Xt)-1).toString(32),ie>>=Xt,Re-=Xt,Ss=1<<32-qa(y)+Re|F<<Re|ie,Nl=Ze+_}else Ss=1<<Ze|F<<Re|ie,Nl=_}function id(_){_.return!==null&&(pu(_,1),Bc(_,1,0))}function mu(_){for(;_===Fc;)Fc=ju[--Fi],ju[Fi]=null,Oc=ju[--Fi],ju[Fi]=null;for(;_===Pi;)Pi=nu[--ss],nu[ss]=null,Nl=nu[--ss],nu[ss]=null,Ss=nu[--ss],nu[ss]=null}var sl=null,rs=null,Wa=!1,To=null;function is(_,y){var F=Kd(5,null,null,0);F.elementType="DELETED",F.stateNode=y,F.return=_,y=_.deletions,y===null?(_.deletions=[F],_.flags|=16):y.push(F)}function Xs(_,y){switch(_.tag){case 5:var F=_.type;return y=y.nodeType!==1||F.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(_.stateNode=y,sl=_,rs=fl(y.firstChild),!0):!1;case 6:return y=_.pendingProps===""||y.nodeType!==3?null:y,y!==null?(_.stateNode=y,sl=_,rs=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(F=Pi!==null?{id:Ss,overflow:Nl}:null,_.memoizedState={dehydrated:y,treeContext:F,retryLane:1073741824},F=Kd(18,null,null,0),F.stateNode=y,F.return=_,_.child=F,sl=_,rs=null,!0):!1;default:return!1}}function zl(_){return(_.mode&1)!==0&&(_.flags&128)===0}function ll(_){if(Wa){var y=rs;if(y){var F=y;if(!Xs(_,y)){if(zl(_))throw Error(C(418));y=fl(F.nextSibling);var ie=sl;y&&Xs(_,y)?is(ie,F):(_.flags=_.flags&-4097|2,Wa=!1,sl=_)}}else{if(zl(_))throw Error(C(418));_.flags=_.flags&-4097|2,Wa=!1,sl=_}}}function Fl(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;sl=_}function _d(_){if(_!==sl)return!1;if(!Wa)return Fl(_),Wa=!0,!1;var y;if((y=_.tag!==3)&&!(y=_.tag!==5)&&(y=_.type,y=y!=="head"&&y!=="body"&&!nl(_.type,_.memoizedProps)),y&&(y=rs)){if(zl(_))throw gd(),Error(C(418));for(;y;)is(_,y),y=fl(y.nextSibling)}if(Fl(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(C(317));e:{for(_=_.nextSibling,y=0;_;){if(_.nodeType===8){var F=_.data;if(F==="/$"){if(y===0){rs=fl(_.nextSibling);break e}y--}else F!=="$"&&F!=="$!"&&F!=="$?"||y++}_=_.nextSibling}rs=null}}else rs=sl?fl(_.stateNode.nextSibling):null;return!0}function gd(){for(var _=rs;_;)_=fl(_.nextSibling)}function jc(){rs=sl=null,Wa=!1}function Bd(_){To===null?To=[_]:To.push(_)}var uc=ye.ReactCurrentBatchConfig;function Ts(_,y,F){if(_=F.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(C(309));var ie=F.stateNode}if(!ie)throw Error(C(147,_));var Re=ie,Ze=""+_;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===Ze?y.ref:(y=function(Xt){var Wn=Re.refs;Xt===null?delete Wn[Ze]:Wn[Ze]=Xt},y._stringRef=Ze,y)}if(typeof _!="string")throw Error(C(284));if(!F._owner)throw Error(C(290,_))}return _}function jd(_,y){throw _=Object.prototype.toString.call(y),Error(C(31,_==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":_))}function qo(_){var y=_._init;return y(_._payload)}function Va(_){function y(Rr,$r){if(_){var ii=Rr.deletions;ii===null?(Rr.deletions=[$r],Rr.flags|=16):ii.push($r)}}function F(Rr,$r){if(!_)return null;for(;$r!==null;)y(Rr,$r),$r=$r.sibling;return null}function ie(Rr,$r){for(Rr=new Map;$r!==null;)$r.key!==null?Rr.set($r.key,$r):Rr.set($r.index,$r),$r=$r.sibling;return Rr}function Re(Rr,$r){return Rr=wf(Rr,$r),Rr.index=0,Rr.sibling=null,Rr}function Ze(Rr,$r,ii){return Rr.index=ii,_?(ii=Rr.alternate,ii!==null?(ii=ii.index,ii<$r?(Rr.flags|=2,$r):ii):(Rr.flags|=2,$r)):(Rr.flags|=1048576,$r)}function Xt(Rr){return _&&Rr.alternate===null&&(Rr.flags|=2),Rr}function Wn(Rr,$r,ii,Eo){return $r===null||$r.tag!==6?($r=fc(ii,Rr.mode,Eo),$r.return=Rr,$r):($r=Re($r,ii),$r.return=Rr,$r)}function yr(Rr,$r,ii,Eo){var ya=ii.type;return ya===Ue?Hi(Rr,$r,ii.props.children,Eo,ii.key):$r!==null&&($r.elementType===ya||typeof ya=="object"&&ya!==null&&ya.$$typeof===He&&qo(ya)===$r.type)?(Eo=Re($r,ii.props),Eo.ref=Ts(Rr,$r,ii),Eo.return=Rr,Eo):(Eo=kp(ii.type,ii.key,ii.props,null,Rr.mode,Eo),Eo.ref=Ts(Rr,$r,ii),Eo.return=Rr,Eo)}function hi(Rr,$r,ii,Eo){return $r===null||$r.tag!==4||$r.stateNode.containerInfo!==ii.containerInfo||$r.stateNode.implementation!==ii.implementation?($r=Gm(ii,Rr.mode,Eo),$r.return=Rr,$r):($r=Re($r,ii.children||[]),$r.return=Rr,$r)}function Hi(Rr,$r,ii,Eo,ya){return $r===null||$r.tag!==7?($r=Bf(ii,Rr.mode,Eo,ya),$r.return=Rr,$r):($r=Re($r,ii),$r.return=Rr,$r)}function bi(Rr,$r,ii){if(typeof $r=="string"&&$r!==""||typeof $r=="number")return $r=fc(""+$r,Rr.mode,ii),$r.return=Rr,$r;if(typeof $r=="object"&&$r!==null){switch($r.$$typeof){case Se:return ii=kp($r.type,$r.key,$r.props,null,Rr.mode,ii),ii.ref=Ts(Rr,null,$r),ii.return=Rr,ii;case be:return $r=Gm($r,Rr.mode,ii),$r.return=Rr,$r;case He:var Eo=$r._init;return bi(Rr,Eo($r._payload),ii)}if(Me($r)||st($r))return $r=Bf($r,Rr.mode,ii,null),$r.return=Rr,$r;jd(Rr,$r)}return null}function to(Rr,$r,ii,Eo){var ya=$r!==null?$r.key:null;if(typeof ii=="string"&&ii!==""||typeof ii=="number")return ya!==null?null:Wn(Rr,$r,""+ii,Eo);if(typeof ii=="object"&&ii!==null){switch(ii.$$typeof){case Se:return ii.key===ya?yr(Rr,$r,ii,Eo):null;case be:return ii.key===ya?hi(Rr,$r,ii,Eo):null;case He:return ya=ii._init,to(Rr,$r,ya(ii._payload),Eo)}if(Me(ii)||st(ii))return ya!==null?null:Hi(Rr,$r,ii,Eo,null);jd(Rr,ii)}return null}function Ko(Rr,$r,ii,Eo,ya){if(typeof Eo=="string"&&Eo!==""||typeof Eo=="number")return Rr=Rr.get(ii)||null,Wn($r,Rr,""+Eo,ya);if(typeof Eo=="object"&&Eo!==null){switch(Eo.$$typeof){case Se:return Rr=Rr.get(Eo.key===null?ii:Eo.key)||null,yr($r,Rr,Eo,ya);case be:return Rr=Rr.get(Eo.key===null?ii:Eo.key)||null,hi($r,Rr,Eo,ya);case He:var wa=Eo._init;return Ko(Rr,$r,ii,wa(Eo._payload),ya)}if(Me(Eo)||st(Eo))return Rr=Rr.get(ii)||null,Hi($r,Rr,Eo,ya,null);jd($r,Eo)}return null}function da(Rr,$r,ii,Eo){for(var ya=null,wa=null,Qa=$r,ea=$r=0,pc=null;Qa!==null&&ea<ii.length;ea++){Qa.index>ea?(pc=Qa,Qa=null):pc=Qa.sibling;var rl=to(Rr,Qa,ii[ea],Eo);if(rl===null){Qa===null&&(Qa=pc);break}_&&Qa&&rl.alternate===null&&y(Rr,Qa),$r=Ze(rl,$r,ea),wa===null?ya=rl:wa.sibling=rl,wa=rl,Qa=pc}if(ea===ii.length)return F(Rr,Qa),Wa&&pu(Rr,ea),ya;if(Qa===null){for(;ea<ii.length;ea++)Qa=bi(Rr,ii[ea],Eo),Qa!==null&&($r=Ze(Qa,$r,ea),wa===null?ya=Qa:wa.sibling=Qa,wa=Qa);return Wa&&pu(Rr,ea),ya}for(Qa=ie(Rr,Qa);ea<ii.length;ea++)pc=Ko(Qa,Rr,ea,ii[ea],Eo),pc!==null&&(_&&pc.alternate!==null&&Qa.delete(pc.key===null?ea:pc.key),$r=Ze(pc,$r,ea),wa===null?ya=pc:wa.sibling=pc,wa=pc);return _&&Qa.forEach(function(Xh){return y(Rr,Xh)}),Wa&&pu(Rr,ea),ya}function ha(Rr,$r,ii,Eo){var ya=st(ii);if(typeof ya!="function")throw Error(C(150));if(ii=ya.call(ii),ii==null)throw Error(C(151));for(var wa=ya=null,Qa=$r,ea=$r=0,pc=null,rl=ii.next();Qa!==null&&!rl.done;ea++,rl=ii.next()){Qa.index>ea?(pc=Qa,Qa=null):pc=Qa.sibling;var Xh=to(Rr,Qa,rl.value,Eo);if(Xh===null){Qa===null&&(Qa=pc);break}_&&Qa&&Xh.alternate===null&&y(Rr,Qa),$r=Ze(Xh,$r,ea),wa===null?ya=Xh:wa.sibling=Xh,wa=Xh,Qa=pc}if(rl.done)return F(Rr,Qa),Wa&&pu(Rr,ea),ya;if(Qa===null){for(;!rl.done;ea++,rl=ii.next())rl=bi(Rr,rl.value,Eo),rl!==null&&($r=Ze(rl,$r,ea),wa===null?ya=rl:wa.sibling=rl,wa=rl);return Wa&&pu(Rr,ea),ya}for(Qa=ie(Rr,Qa);!rl.done;ea++,rl=ii.next())rl=Ko(Qa,Rr,ea,rl.value,Eo),rl!==null&&(_&&rl.alternate!==null&&Qa.delete(rl.key===null?ea:rl.key),$r=Ze(rl,$r,ea),wa===null?ya=rl:wa.sibling=rl,wa=rl);return _&&Qa.forEach(function(gm){return y(Rr,gm)}),Wa&&pu(Rr,ea),ya}function nc(Rr,$r,ii,Eo){if(typeof ii=="object"&&ii!==null&&ii.type===Ue&&ii.key===null&&(ii=ii.props.children),typeof ii=="object"&&ii!==null){switch(ii.$$typeof){case Se:e:{for(var ya=ii.key,wa=$r;wa!==null;){if(wa.key===ya){if(ya=ii.type,ya===Ue){if(wa.tag===7){F(Rr,wa.sibling),$r=Re(wa,ii.props.children),$r.return=Rr,Rr=$r;break e}}else if(wa.elementType===ya||typeof ya=="object"&&ya!==null&&ya.$$typeof===He&&qo(ya)===wa.type){F(Rr,wa.sibling),$r=Re(wa,ii.props),$r.ref=Ts(Rr,wa,ii),$r.return=Rr,Rr=$r;break e}F(Rr,wa);break}else y(Rr,wa);wa=wa.sibling}ii.type===Ue?($r=Bf(ii.props.children,Rr.mode,Eo,ii.key),$r.return=Rr,Rr=$r):(Eo=kp(ii.type,ii.key,ii.props,null,Rr.mode,Eo),Eo.ref=Ts(Rr,$r,ii),Eo.return=Rr,Rr=Eo)}return Xt(Rr);case be:e:{for(wa=ii.key;$r!==null;){if($r.key===wa)if($r.tag===4&&$r.stateNode.containerInfo===ii.containerInfo&&$r.stateNode.implementation===ii.implementation){F(Rr,$r.sibling),$r=Re($r,ii.children||[]),$r.return=Rr,Rr=$r;break e}else{F(Rr,$r);break}else y(Rr,$r);$r=$r.sibling}$r=Gm(ii,Rr.mode,Eo),$r.return=Rr,Rr=$r}return Xt(Rr);case He:return wa=ii._init,nc(Rr,$r,wa(ii._payload),Eo)}if(Me(ii))return da(Rr,$r,ii,Eo);if(st(ii))return ha(Rr,$r,ii,Eo);jd(Rr,ii)}return typeof ii=="string"&&ii!==""||typeof ii=="number"?(ii=""+ii,$r!==null&&$r.tag===6?(F(Rr,$r.sibling),$r=Re($r,ii),$r.return=Rr,Rr=$r):(F(Rr,$r),$r=fc(ii,Rr.mode,Eo),$r.return=Rr,Rr=$r),Xt(Rr)):F(Rr,$r)}return nc}var _l=Va(!0),Zl=Va(!1),ul=Xi(null),Kc=null,Qu=null,di=null;function Ni(){di=Qu=Kc=null}function vd(_){var y=ul.current;Qo(ul),_._currentValue=y}function gl(_,y,F){for(;_!==null;){var ie=_.alternate;if((_.childLanes&y)!==y?(_.childLanes|=y,ie!==null&&(ie.childLanes|=y)):ie!==null&&(ie.childLanes&y)!==y&&(ie.childLanes|=y),_===F)break;_=_.return}}function gr(_,y){Kc=_,di=Qu=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&y&&(Ru=!0),_.firstContext=null)}function od(_){var y=_._currentValue;if(di!==_)if(_={context:_,memoizedValue:y,next:null},Qu===null){if(Kc===null)throw Error(C(308));Qu=_,Kc.dependencies={lanes:0,firstContext:_}}else Qu=Qu.next=_;return y}var yd=null;function rf(_){yd===null?yd=[_]:yd.push(_)}function sm(_,y,F,ie){var Re=y.interleaved;return Re===null?(F.next=F,rf(y)):(F.next=Re.next,Re.next=F),y.interleaved=F,th(_,ie)}function th(_,y){_.lanes|=y;var F=_.alternate;for(F!==null&&(F.lanes|=y),F=_,_=_.return;_!==null;)_.childLanes|=y,F=_.alternate,F!==null&&(F.childLanes|=y),F=_,_=_.return;return F.tag===3?F.stateNode:null}var yh=!1;function nh(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function km(_,y){_=_.updateQueue,y.updateQueue===_&&(y.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function xh(_,y){return{eventTime:_,lane:y,tag:0,payload:null,callback:null,next:null}}function Ud(_,y,F){var ie=_.updateQueue;if(ie===null)return null;if(ie=ie.shared,Or&2){var Re=ie.pending;return Re===null?y.next=y:(y.next=Re.next,Re.next=y),ie.pending=y,th(_,F)}return Re=ie.interleaved,Re===null?(y.next=y,rf(ie)):(y.next=Re.next,Re.next=y),ie.interleaved=y,th(_,F)}function of(_,y,F){if(y=y.updateQueue,y!==null&&(y=y.shared,(F&4194240)!==0)){var ie=y.lanes;ie&=_.pendingLanes,F|=ie,y.lanes=F,ua(_,F)}}function bh(_,y){var F=_.updateQueue,ie=_.alternate;if(ie!==null&&(ie=ie.updateQueue,F===ie)){var Re=null,Ze=null;if(F=F.firstBaseUpdate,F!==null){do{var Xt={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};Ze===null?Re=Ze=Xt:Ze=Ze.next=Xt,F=F.next}while(F!==null);Ze===null?Re=Ze=y:Ze=Ze.next=y}else Re=Ze=y;F={baseState:ie.baseState,firstBaseUpdate:Re,lastBaseUpdate:Ze,shared:ie.shared,effects:ie.effects},_.updateQueue=F;return}_=F.lastBaseUpdate,_===null?F.firstBaseUpdate=y:_.next=y,F.lastBaseUpdate=y}function rp(_,y,F,ie){var Re=_.updateQueue;yh=!1;var Ze=Re.firstBaseUpdate,Xt=Re.lastBaseUpdate,Wn=Re.shared.pending;if(Wn!==null){Re.shared.pending=null;var yr=Wn,hi=yr.next;yr.next=null,Xt===null?Ze=hi:Xt.next=hi,Xt=yr;var Hi=_.alternate;Hi!==null&&(Hi=Hi.updateQueue,Wn=Hi.lastBaseUpdate,Wn!==Xt&&(Wn===null?Hi.firstBaseUpdate=hi:Wn.next=hi,Hi.lastBaseUpdate=yr))}if(Ze!==null){var bi=Re.baseState;Xt=0,Hi=hi=yr=null,Wn=Ze;do{var to=Wn.lane,Ko=Wn.eventTime;if((ie&to)===to){Hi!==null&&(Hi=Hi.next={eventTime:Ko,lane:0,tag:Wn.tag,payload:Wn.payload,callback:Wn.callback,next:null});e:{var da=_,ha=Wn;switch(to=y,Ko=F,ha.tag){case 1:if(da=ha.payload,typeof da=="function"){bi=da.call(Ko,bi,to);break e}bi=da;break e;case 3:da.flags=da.flags&-65537|128;case 0:if(da=ha.payload,to=typeof da=="function"?da.call(Ko,bi,to):da,to==null)break e;bi=Qe({},bi,to);break e;case 2:yh=!0}}Wn.callback!==null&&Wn.lane!==0&&(_.flags|=64,to=Re.effects,to===null?Re.effects=[Wn]:to.push(Wn))}else Ko={eventTime:Ko,lane:to,tag:Wn.tag,payload:Wn.payload,callback:Wn.callback,next:null},Hi===null?(hi=Hi=Ko,yr=bi):Hi=Hi.next=Ko,Xt|=to;if(Wn=Wn.next,Wn===null){if(Wn=Re.shared.pending,Wn===null)break;to=Wn,Wn=to.next,to.next=null,Re.lastBaseUpdate=to,Re.shared.pending=null}}while(!0);if(Hi===null&&(yr=bi),Re.baseState=yr,Re.firstBaseUpdate=hi,Re.lastBaseUpdate=Hi,y=Re.shared.interleaved,y!==null){Re=y;do Xt|=Re.lane,Re=Re.next;while(Re!==y)}else Ze===null&&(Re.shared.lanes=0);xi|=Xt,_.lanes=Xt,_.memoizedState=bi}}function Ip(_,y,F){if(_=y.effects,y.effects=null,_!==null)for(y=0;y<_.length;y++){var ie=_[y],Re=ie.callback;if(Re!==null){if(ie.callback=null,ie=F,typeof Re!="function")throw Error(C(191,Re));Re.call(ie)}}}var xd={},qu=Xi(xd),Uu=Xi(xd),Rc=Xi(xd);function Vd(_){if(_===xd)throw Error(C(174));return _}function Bl(_,y){switch(Ua(Rc,y),Ua(Uu,_),Ua(qu,xd),_=y.nodeType,_){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:gn(null,"");break;default:_=_===8?y.parentNode:y,y=_.namespaceURI||null,_=_.tagName,y=gn(y,_)}Qo(qu),Ua(qu,y)}function wh(){Qo(qu),Qo(Uu),Qo(Rc)}function Yc(_){Vd(Rc.current);var y=Vd(qu.current),F=gn(y,_.type);y!==F&&(Ua(Uu,_),Ua(qu,F))}function ks(_){Uu.current===_&&(Qo(qu),Qo(Uu))}var ra=Xi(0);function Uh(_){for(var y=_;y!==null;){if(y.tag===13){var F=y.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||F.data==="$?"||F.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===_)break;for(;y.sibling===null;){if(y.return===null||y.return===_)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Vu=[];function Od(){for(var _=0;_<Vu.length;_++)Vu[_]._workInProgressVersionPrimary=null;Vu.length=0}var Ha=ye.ReactCurrentDispatcher,Rf=ye.ReactCurrentBatchConfig,Rd=0,cl=null,Js=null,Gu=null,Vh=!1,Gd=!1,af=0,dl=0;function cc(){throw Error(C(321))}function rh(_,y){if(y===null)return!1;for(var F=0;F<y.length&&F<_.length;F++)if(!tt(_[F],y[F]))return!1;return!0}function ip(_,y,F,ie,Re,Ze){if(Rd=Ze,cl=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Ha.current=_===null||_.memoizedState===null?Ap:vl,_=F(ie,Re),Gd){Ze=0;do{if(Gd=!1,af=0,25<=Ze)throw Error(C(301));Ze+=1,Gu=Js=null,y.updateQueue=null,Ha.current=zm,_=F(ie,Re)}while(Gd)}if(Ha.current=lp,y=Js!==null&&Js.next!==null,Rd=0,Gu=Js=cl=null,Vh=!1,y)throw Error(C(300));return _}function Lf(){var _=af!==0;return af=0,_}function ad(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gu===null?cl.memoizedState=Gu=_:Gu=Gu.next=_,Gu}function yc(){if(Js===null){var _=cl.alternate;_=_!==null?_.memoizedState:null}else _=Js.next;var y=Gu===null?cl.memoizedState:Gu.next;if(y!==null)Gu=y,Js=_;else{if(_===null)throw Error(C(310));Js=_,_={memoizedState:Js.memoizedState,baseState:Js.baseState,baseQueue:Js.baseQueue,queue:Js.queue,next:null},Gu===null?cl.memoizedState=Gu=_:Gu=Gu.next=_}return Gu}function _u(_,y){return typeof y=="function"?y(_):y}function Df(_){var y=yc(),F=y.queue;if(F===null)throw Error(C(311));F.lastRenderedReducer=_;var ie=Js,Re=ie.baseQueue,Ze=F.pending;if(Ze!==null){if(Re!==null){var Xt=Re.next;Re.next=Ze.next,Ze.next=Xt}ie.baseQueue=Re=Ze,F.pending=null}if(Re!==null){Ze=Re.next,ie=ie.baseState;var Wn=Xt=null,yr=null,hi=Ze;do{var Hi=hi.lane;if((Rd&Hi)===Hi)yr!==null&&(yr=yr.next={lane:0,action:hi.action,hasEagerState:hi.hasEagerState,eagerState:hi.eagerState,next:null}),ie=hi.hasEagerState?hi.eagerState:_(ie,hi.action);else{var bi={lane:Hi,action:hi.action,hasEagerState:hi.hasEagerState,eagerState:hi.eagerState,next:null};yr===null?(Wn=yr=bi,Xt=ie):yr=yr.next=bi,cl.lanes|=Hi,xi|=Hi}hi=hi.next}while(hi!==null&&hi!==Ze);yr===null?Xt=ie:yr.next=Wn,tt(ie,y.memoizedState)||(Ru=!0),y.memoizedState=ie,y.baseState=Xt,y.baseQueue=yr,F.lastRenderedState=ie}if(_=F.interleaved,_!==null){Re=_;do Ze=Re.lane,cl.lanes|=Ze,xi|=Ze,Re=Re.next;while(Re!==_)}else Re===null&&(F.lanes=0);return[y.memoizedState,F.dispatch]}function Gh(_){var y=yc(),F=y.queue;if(F===null)throw Error(C(311));F.lastRenderedReducer=_;var ie=F.dispatch,Re=F.pending,Ze=y.memoizedState;if(Re!==null){F.pending=null;var Xt=Re=Re.next;do Ze=_(Ze,Xt.action),Xt=Xt.next;while(Xt!==Re);tt(Ze,y.memoizedState)||(Ru=!0),y.memoizedState=Ze,y.baseQueue===null&&(y.baseState=Ze),F.lastRenderedState=Ze}return[Ze,ie]}function sf(){}function Xc(_,y){var F=cl,ie=yc(),Re=y(),Ze=!tt(ie.memoizedState,Re);if(Ze&&(ie.memoizedState=Re,Ru=!0),ie=ie.queue,ih(uf.bind(null,F,ie,_),[_]),ie.getSnapshot!==y||Ze||Gu!==null&&Gu.memoizedState.tag&1){if(F.flags|=2048,Ld(9,sd.bind(null,F,ie,Re,y),void 0,null),kr===null)throw Error(C(349));Rd&30||lf(F,y,Re)}return Re}function lf(_,y,F){_.flags|=16384,_={getSnapshot:y,value:F},y=cl.updateQueue,y===null?(y={lastEffect:null,stores:null},cl.updateQueue=y,y.stores=[_]):(F=y.stores,F===null?y.stores=[_]:F.push(_))}function sd(_,y,F,ie){y.value=F,y.getSnapshot=ie,$d(y)&&cf(_)}function uf(_,y,F){return F(function(){$d(y)&&cf(_)})}function $d(_){var y=_.getSnapshot;_=_.value;try{var F=y();return!tt(_,F)}catch(ie){return!0}}function cf(_){var y=th(_,1);y!==null&&Ia(y,_,1,-1)}function df(_){var y=ad();return typeof _=="function"&&(_=_()),y.memoizedState=y.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:_},y.queue=_,_=_.dispatch=lm.bind(null,cl,_),[y.memoizedState,_]}function Ld(_,y,F,ie){return _={tag:_,create:y,destroy:F,deps:ie,next:null},y=cl.updateQueue,y===null?(y={lastEffect:null,stores:null},cl.updateQueue=y,y.lastEffect=_.next=_):(F=y.lastEffect,F===null?y.lastEffect=_.next=_:(ie=F.next,F.next=_,_.next=ie,y.lastEffect=_)),_}function kf(){return yc().memoizedState}function bd(_,y,F,ie){var Re=ad();cl.flags|=_,Re.memoizedState=Ld(1|y,F,void 0,ie===void 0?null:ie)}function hf(_,y,F,ie){var Re=yc();ie=ie===void 0?null:ie;var Ze=void 0;if(Js!==null){var Xt=Js.memoizedState;if(Ze=Xt.destroy,ie!==null&&rh(ie,Xt.deps)){Re.memoizedState=Ld(y,F,Ze,ie);return}}cl.flags|=_,Re.memoizedState=Ld(1|y,F,Ze,ie)}function op(_,y){return bd(8390656,8,_,y)}function ih(_,y){return hf(2048,8,_,y)}function ff(_,y){return hf(4,2,_,y)}function Mp(_,y){return hf(4,4,_,y)}function ap(_,y){if(typeof y=="function")return _=_(),y(_),function(){y(null)};if(y!=null)return _=_(),y.current=_,function(){y.current=null}}function wd(_,y,F){return F=F!=null?F.concat([_]):null,hf(4,4,ap.bind(null,y,_),F)}function pf(){}function Nf(_,y){var F=yc();y=y===void 0?null:y;var ie=F.memoizedState;return ie!==null&&y!==null&&rh(y,ie[1])?ie[0]:(F.memoizedState=[_,y],_)}function mf(_,y){var F=yc();y=y===void 0?null:y;var ie=F.memoizedState;return ie!==null&&y!==null&&rh(y,ie[1])?ie[0]:(_=_(),F.memoizedState=[_,y],_)}function _f(_,y,F){return Rd&21?(tt(F,y)||(F=ma(),cl.lanes|=F,xi|=F,_.baseState=!0),y):(_.baseState&&(_.baseState=!1,Ru=!0),_.memoizedState=F)}function Jc(_,y){var F=ao;ao=F!==0&&4>F?F:4,_(!0);var ie=Rf.transition;Rf.transition={};try{_(!1),y()}finally{ao=F,Rf.transition=ie}}function gf(){return yc().memoizedState}function Nm(_,y,F){var ie=Ya(_);if(F={lane:ie,action:F,hasEagerState:!1,eagerState:null,next:null},Cp(_))za(y,F);else if(F=sm(_,y,F,ie),F!==null){var Re=na();Ia(F,_,ie,Re),sp(F,y,ie)}}function lm(_,y,F){var ie=Ya(_),Re={lane:ie,action:F,hasEagerState:!1,eagerState:null,next:null};if(Cp(_))za(y,Re);else{var Ze=_.alternate;if(_.lanes===0&&(Ze===null||Ze.lanes===0)&&(Ze=y.lastRenderedReducer,Ze!==null))try{var Xt=y.lastRenderedState,Wn=Ze(Xt,F);if(Re.hasEagerState=!0,Re.eagerState=Wn,tt(Wn,Xt)){var yr=y.interleaved;yr===null?(Re.next=Re,rf(y)):(Re.next=yr.next,yr.next=Re),y.interleaved=Re;return}}catch(hi){}finally{}F=sm(_,y,Re,ie),F!==null&&(Re=na(),Ia(F,_,ie,Re),sp(F,y,ie))}}function Cp(_){var y=_.alternate;return _===cl||y!==null&&y===cl}function za(_,y){Gd=Vh=!0;var F=_.pending;F===null?y.next=y:(y.next=F.next,F.next=y),_.pending=y}function sp(_,y,F){if(F&4194240){var ie=y.lanes;ie&=_.pendingLanes,F|=ie,y.lanes=F,ua(_,F)}}var lp={readContext:od,useCallback:cc,useContext:cc,useEffect:cc,useImperativeHandle:cc,useInsertionEffect:cc,useLayoutEffect:cc,useMemo:cc,useReducer:cc,useRef:cc,useState:cc,useDebugValue:cc,useDeferredValue:cc,useTransition:cc,useMutableSource:cc,useSyncExternalStore:cc,useId:cc,unstable_isNewReconciler:!1},Ap={readContext:od,useCallback:function(_,y){return ad().memoizedState=[_,y===void 0?null:y],_},useContext:od,useEffect:op,useImperativeHandle:function(_,y,F){return F=F!=null?F.concat([_]):null,bd(4194308,4,ap.bind(null,y,_),F)},useLayoutEffect:function(_,y){return bd(4194308,4,_,y)},useInsertionEffect:function(_,y){return bd(4,2,_,y)},useMemo:function(_,y){var F=ad();return y=y===void 0?null:y,_=_(),F.memoizedState=[_,y],_},useReducer:function(_,y,F){var ie=ad();return y=F!==void 0?F(y):y,ie.memoizedState=ie.baseState=y,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:y},ie.queue=_,_=_.dispatch=Nm.bind(null,cl,_),[ie.memoizedState,_]},useRef:function(_){var y=ad();return _={current:_},y.memoizedState=_},useState:df,useDebugValue:pf,useDeferredValue:function(_){return ad().memoizedState=_},useTransition:function(){var _=df(!1),y=_[0];return _=Jc.bind(null,_[1]),ad().memoizedState=_,[y,_]},useMutableSource:function(){},useSyncExternalStore:function(_,y,F){var ie=cl,Re=ad();if(Wa){if(F===void 0)throw Error(C(407));F=F()}else{if(F=y(),kr===null)throw Error(C(349));Rd&30||lf(ie,y,F)}Re.memoizedState=F;var Ze={value:F,getSnapshot:y};return Re.queue=Ze,op(uf.bind(null,ie,Ze,_),[_]),ie.flags|=2048,Ld(9,sd.bind(null,ie,Ze,F,y),void 0,null),F},useId:function(){var _=ad(),y=kr.identifierPrefix;if(Wa){var F=Nl,ie=Ss;F=(ie&~(1<<32-qa(ie)-1)).toString(32)+F,y=":"+y+"R"+F,F=af++,0<F&&(y+="H"+F.toString(32)),y+=":"}else F=dl++,y=":"+y+"r"+F.toString(32)+":";return _.memoizedState=y},unstable_isNewReconciler:!1},vl={readContext:od,useCallback:Nf,useContext:od,useEffect:ih,useImperativeHandle:wd,useInsertionEffect:ff,useLayoutEffect:Mp,useMemo:mf,useReducer:Df,useRef:kf,useState:function(){return Df(_u)},useDebugValue:pf,useDeferredValue:function(_){var y=yc();return _f(y,Js.memoizedState,_)},useTransition:function(){var _=Df(_u)[0],y=yc().memoizedState;return[_,y]},useMutableSource:sf,useSyncExternalStore:Xc,useId:gf,unstable_isNewReconciler:!1},zm={readContext:od,useCallback:Nf,useContext:od,useEffect:ih,useImperativeHandle:wd,useInsertionEffect:ff,useLayoutEffect:Mp,useMemo:mf,useReducer:Gh,useRef:kf,useState:function(){return Gh(_u)},useDebugValue:pf,useDeferredValue:function(_){var y=yc();return Js===null?y.memoizedState=_:_f(y,Js.memoizedState,_)},useTransition:function(){var _=Gh(_u)[0],y=yc().memoizedState;return[_,y]},useMutableSource:sf,useSyncExternalStore:Xc,useId:gf,unstable_isNewReconciler:!1};function gu(_,y){if(_&&_.defaultProps){y=Qe({},y),_=_.defaultProps;for(var F in _)y[F]===void 0&&(y[F]=_[F]);return y}return y}function zf(_,y,F,ie){y=_.memoizedState,F=F(ie,y),F=F==null?y:Qe({},y,F),_.memoizedState=F,_.lanes===0&&(_.updateQueue.baseState=F)}var Ed={isMounted:function(_){return(_=_._reactInternals)?Fn(_)===_:!1},enqueueSetState:function(_,y,F){_=_._reactInternals;var ie=na(),Re=Ya(_),Ze=xh(ie,Re);Ze.payload=y,F!=null&&(Ze.callback=F),y=Ud(_,Ze,Re),y!==null&&(Ia(y,_,Re,ie),of(y,_,Re))},enqueueReplaceState:function(_,y,F){_=_._reactInternals;var ie=na(),Re=Ya(_),Ze=xh(ie,Re);Ze.tag=1,Ze.payload=y,F!=null&&(Ze.callback=F),y=Ud(_,Ze,Re),y!==null&&(Ia(y,_,Re,ie),of(y,_,Re))},enqueueForceUpdate:function(_,y){_=_._reactInternals;var F=na(),ie=Ya(_),Re=xh(F,ie);Re.tag=2,y!=null&&(Re.callback=y),y=Ud(_,Re,ie),y!==null&&(Ia(y,_,ie,F),of(y,_,ie))}};function Eh(_,y,F,ie,Re,Ze,Xt){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(ie,Ze,Xt):y.prototype&&y.prototype.isPureReactComponent?!It(F,ie)||!It(Re,Ze):!0}function Zs(_,y,F){var ie=!1,Re=al,Ze=y.contextType;return typeof Ze=="object"&&Ze!==null?Ze=od(Ze):(Re=$s(y)?Tu:ml.current,ie=y.contextTypes,Ze=(ie=ie!=null)?Hc(_,Re):al),y=new y(F,Ze),_.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ed,_.stateNode=y,y._reactInternals=_,ie&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=Re,_.__reactInternalMemoizedMaskedChildContext=Ze),y}function Sd(_,y,F,ie){_=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(F,ie),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(F,ie),y.state!==_&&Ed.enqueueReplaceState(y,y.state,null)}function xc(_,y,F,ie){var Re=_.stateNode;Re.props=F,Re.state=_.memoizedState,Re.refs={},nh(_);var Ze=y.contextType;typeof Ze=="object"&&Ze!==null?Re.context=od(Ze):(Ze=$s(y)?Tu:ml.current,Re.context=Hc(_,Ze)),Re.state=_.memoizedState,Ze=y.getDerivedStateFromProps,typeof Ze=="function"&&(zf(_,y,Ze,F),Re.state=_.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof Re.getSnapshotBeforeUpdate=="function"||typeof Re.UNSAFE_componentWillMount!="function"&&typeof Re.componentWillMount!="function"||(y=Re.state,typeof Re.componentWillMount=="function"&&Re.componentWillMount(),typeof Re.UNSAFE_componentWillMount=="function"&&Re.UNSAFE_componentWillMount(),y!==Re.state&&Ed.enqueueReplaceState(Re,Re.state,null),rp(_,F,Re,ie),Re.state=_.memoizedState),typeof Re.componentDidMount=="function"&&(_.flags|=4194308)}function oh(_,y){try{var F="",ie=y;do F+=lt(ie),ie=ie.return;while(ie);var Re=F}catch(Ze){Re=`
Error generating stack: `+Ze.message+`
`+Ze.stack}return{value:_,source:y,stack:Re,digest:null}}function up(_,y,F){return{value:_,source:null,stack:F!=null?F:null,digest:y!=null?y:null}}function Pp(_,y){try{console.error(y.value)}catch(F){setTimeout(function(){throw F})}}var cp=typeof WeakMap=="function"?WeakMap:Map;function Op(_,y,F){F=xh(-1,F),F.tag=3,F.payload={element:null};var ie=y.value;return F.callback=function(){wo||(wo=!0,Ao=ie),Pp(_,y)},F}function um(_,y,F){F=xh(-1,F),F.tag=3;var ie=_.type.getDerivedStateFromError;if(typeof ie=="function"){var Re=y.value;F.payload=function(){return ie(Re)},F.callback=function(){Pp(_,y)}}var Ze=_.stateNode;return Ze!==null&&typeof Ze.componentDidCatch=="function"&&(F.callback=function(){Pp(_,y),typeof ie!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var Xt=y.stack;this.componentDidCatch(y.value,{componentStack:Xt!==null?Xt:""})}),F}function Rp(_,y,F){var ie=_.pingCache;if(ie===null){ie=_.pingCache=new cp;var Re=new Set;ie.set(y,Re)}else Re=ie.get(y),Re===void 0&&(Re=new Set,ie.set(y,Re));Re.has(F)||(Re.add(F),_=fp.bind(null,_,y,F),y.then(_,_))}function ah(_){do{var y;if((y=_.tag===13)&&(y=_.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return _;_=_.return}while(_!==null);return null}function $h(_,y,F,ie,Re){return _.mode&1?(_.flags|=65536,_.lanes=Re,_):(_===y?_.flags|=65536:(_.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(y=xh(-1,1),y.tag=2,Ud(F,y,1))),F.lanes|=1),_)}var Zh=ye.ReactCurrentOwner,Ru=!1;function su(_,y,F,ie){y.child=_===null?Zl(y,null,F,ie):_l(y,_.child,F,ie)}function Sh(_,y,F,ie,Re){F=F.render;var Ze=y.ref;return gr(y,Re),ie=ip(_,y,F,ie,Ze,Re),F=Lf(),_!==null&&!Ru?(y.updateQueue=_.updateQueue,y.flags&=-2053,_.lanes&=~Re,Da(_,y,Re)):(Wa&&F&&id(y),y.flags|=1,su(_,y,ie,Re),y.child)}function Zd(_,y,F,ie,Re){if(_===null){var Ze=F.type;return typeof Ze=="function"&&!S_(Ze)&&Ze.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(y.tag=15,y.type=Ze,sh(_,y,Ze,ie,Re)):(_=kp(F.type,null,ie,y,y.mode,Re),_.ref=y.ref,_.return=y,y.child=_)}if(Ze=_.child,!(_.lanes&Re)){var Xt=Ze.memoizedProps;if(F=F.compare,F=F!==null?F:It,F(Xt,ie)&&_.ref===y.ref)return Da(_,y,Re)}return y.flags|=1,_=wf(Ze,ie),_.ref=y.ref,_.return=y,y.child=_}function sh(_,y,F,ie,Re){if(_!==null){var Ze=_.memoizedProps;if(It(Ze,ie)&&_.ref===y.ref)if(Ru=!1,y.pendingProps=ie=Ze,(_.lanes&Re)!==0)_.flags&131072&&(Ru=!0);else return y.lanes=_.lanes,Da(_,y,Re)}return cm(_,y,F,ie,Re)}function Fm(_,y,F){var ie=y.pendingProps,Re=ie.children,Ze=_!==null?_.memoizedState:null;if(ie.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ua(ir,ti),ti|=F;else{if(!(F&1073741824))return _=Ze!==null?Ze.baseLanes|F:F,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:_,cachePool:null,transitions:null},y.updateQueue=null,Ua(ir,ti),ti|=_,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie=Ze!==null?Ze.baseLanes:F,Ua(ir,ti),ti|=ie}else Ze!==null?(ie=Ze.baseLanes|F,y.memoizedState=null):ie=F,Ua(ir,ti),ti|=ie;return su(_,y,Re,F),y.child}function Bm(_,y){var F=y.ref;(_===null&&F!==null||_!==null&&_.ref!==F)&&(y.flags|=512,y.flags|=2097152)}function cm(_,y,F,ie,Re){var Ze=$s(F)?Tu:ml.current;return Ze=Hc(y,Ze),gr(y,Re),F=ip(_,y,F,ie,Ze,Re),ie=Lf(),_!==null&&!Ru?(y.updateQueue=_.updateQueue,y.flags&=-2053,_.lanes&=~Re,Da(_,y,Re)):(Wa&&ie&&id(y),y.flags|=1,su(_,y,F,Re),y.child)}function vf(_,y,F,ie,Re){if($s(F)){var Ze=!0;zc(y)}else Ze=!1;if(gr(y,Re),y.stateNode===null)bf(_,y),Zs(y,F,ie),xc(y,F,ie,Re),ie=!0;else if(_===null){var Xt=y.stateNode,Wn=y.memoizedProps;Xt.props=Wn;var yr=Xt.context,hi=F.contextType;typeof hi=="object"&&hi!==null?hi=od(hi):(hi=$s(F)?Tu:ml.current,hi=Hc(y,hi));var Hi=F.getDerivedStateFromProps,bi=typeof Hi=="function"||typeof Xt.getSnapshotBeforeUpdate=="function";bi||typeof Xt.UNSAFE_componentWillReceiveProps!="function"&&typeof Xt.componentWillReceiveProps!="function"||(Wn!==ie||yr!==hi)&&Sd(y,Xt,ie,hi),yh=!1;var to=y.memoizedState;Xt.state=to,rp(y,ie,Xt,Re),yr=y.memoizedState,Wn!==ie||to!==yr||Ls.current||yh?(typeof Hi=="function"&&(zf(y,F,Hi,ie),yr=y.memoizedState),(Wn=yh||Eh(y,F,Wn,ie,to,yr,hi))?(bi||typeof Xt.UNSAFE_componentWillMount!="function"&&typeof Xt.componentWillMount!="function"||(typeof Xt.componentWillMount=="function"&&Xt.componentWillMount(),typeof Xt.UNSAFE_componentWillMount=="function"&&Xt.UNSAFE_componentWillMount()),typeof Xt.componentDidMount=="function"&&(y.flags|=4194308)):(typeof Xt.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=ie,y.memoizedState=yr),Xt.props=ie,Xt.state=yr,Xt.context=hi,ie=Wn):(typeof Xt.componentDidMount=="function"&&(y.flags|=4194308),ie=!1)}else{Xt=y.stateNode,km(_,y),Wn=y.memoizedProps,hi=y.type===y.elementType?Wn:gu(y.type,Wn),Xt.props=hi,bi=y.pendingProps,to=Xt.context,yr=F.contextType,typeof yr=="object"&&yr!==null?yr=od(yr):(yr=$s(F)?Tu:ml.current,yr=Hc(y,yr));var Ko=F.getDerivedStateFromProps;(Hi=typeof Ko=="function"||typeof Xt.getSnapshotBeforeUpdate=="function")||typeof Xt.UNSAFE_componentWillReceiveProps!="function"&&typeof Xt.componentWillReceiveProps!="function"||(Wn!==bi||to!==yr)&&Sd(y,Xt,ie,yr),yh=!1,to=y.memoizedState,Xt.state=to,rp(y,ie,Xt,Re);var da=y.memoizedState;Wn!==bi||to!==da||Ls.current||yh?(typeof Ko=="function"&&(zf(y,F,Ko,ie),da=y.memoizedState),(hi=yh||Eh(y,F,hi,ie,to,da,yr)||!1)?(Hi||typeof Xt.UNSAFE_componentWillUpdate!="function"&&typeof Xt.componentWillUpdate!="function"||(typeof Xt.componentWillUpdate=="function"&&Xt.componentWillUpdate(ie,da,yr),typeof Xt.UNSAFE_componentWillUpdate=="function"&&Xt.UNSAFE_componentWillUpdate(ie,da,yr)),typeof Xt.componentDidUpdate=="function"&&(y.flags|=4),typeof Xt.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof Xt.componentDidUpdate!="function"||Wn===_.memoizedProps&&to===_.memoizedState||(y.flags|=4),typeof Xt.getSnapshotBeforeUpdate!="function"||Wn===_.memoizedProps&&to===_.memoizedState||(y.flags|=1024),y.memoizedProps=ie,y.memoizedState=da),Xt.props=ie,Xt.state=da,Xt.context=yr,ie=hi):(typeof Xt.componentDidUpdate!="function"||Wn===_.memoizedProps&&to===_.memoizedState||(y.flags|=4),typeof Xt.getSnapshotBeforeUpdate!="function"||Wn===_.memoizedProps&&to===_.memoizedState||(y.flags|=1024),ie=!1)}return Wh(_,y,F,ie,Ze,Re)}function Wh(_,y,F,ie,Re,Ze){Bm(_,y);var Xt=(y.flags&128)!==0;if(!ie&&!Xt)return Re&&pd(y,F,!1),Da(_,y,Ze);ie=y.stateNode,Zh.current=y;var Wn=Xt&&typeof F.getDerivedStateFromError!="function"?null:ie.render();return y.flags|=1,_!==null&&Xt?(y.child=_l(y,_.child,null,Ze),y.child=_l(y,null,Wn,Ze)):su(_,y,Wn,Ze),y.memoizedState=ie.state,Re&&pd(y,F,!0),y.child}function bc(_){var y=_.stateNode;y.pendingContext?Fu(_,y.pendingContext,y.pendingContext!==y.context):y.context&&Fu(_,y.context,!1),Bl(_,y.containerInfo)}function lh(_,y,F,ie,Re){return jc(),Bd(Re),y.flags|=256,su(_,y,F,ie),y.child}var Lp={dehydrated:null,treeContext:null,retryLane:0};function Dp(_){return{baseLanes:_,cachePool:null,transitions:null}}function yf(_,y,F){var ie=y.pendingProps,Re=ra.current,Ze=!1,Xt=(y.flags&128)!==0,Wn;if((Wn=Xt)||(Wn=_!==null&&_.memoizedState===null?!1:(Re&2)!==0),Wn?(Ze=!0,y.flags&=-129):(_===null||_.memoizedState!==null)&&(Re|=1),Ua(ra,Re&1),_===null)return ll(y),_=y.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(y.mode&1?_.data==="$!"?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(Xt=ie.children,_=ie.fallback,Ze?(ie=y.mode,Ze=y.child,Xt={mode:"hidden",children:Xt},!(ie&1)&&Ze!==null?(Ze.childLanes=0,Ze.pendingProps=Xt):Ze=Th(Xt,ie,0,null),_=Bf(_,ie,F,null),Ze.return=y,_.return=y,Ze.sibling=_,y.child=Ze,y.child.memoizedState=Dp(F),y.memoizedState=Lp,_):Ff(y,Xt));if(Re=_.memoizedState,Re!==null&&(Wn=Re.dehydrated,Wn!==null))return Td(_,y,Xt,ie,Wn,Re,F);if(Ze){Ze=ie.fallback,Xt=y.mode,Re=_.child,Wn=Re.sibling;var yr={mode:"hidden",children:ie.children};return!(Xt&1)&&y.child!==Re?(ie=y.child,ie.childLanes=0,ie.pendingProps=yr,y.deletions=null):(ie=wf(Re,yr),ie.subtreeFlags=Re.subtreeFlags&14680064),Wn!==null?Ze=wf(Wn,Ze):(Ze=Bf(Ze,Xt,F,null),Ze.flags|=2),Ze.return=y,ie.return=y,ie.sibling=Ze,y.child=ie,ie=Ze,Ze=y.child,Xt=_.child.memoizedState,Xt=Xt===null?Dp(F):{baseLanes:Xt.baseLanes|F,cachePool:null,transitions:Xt.transitions},Ze.memoizedState=Xt,Ze.childLanes=_.childLanes&~F,y.memoizedState=Lp,ie}return Ze=_.child,_=Ze.sibling,ie=wf(Ze,{mode:"visible",children:ie.children}),!(y.mode&1)&&(ie.lanes=F),ie.return=y,ie.sibling=null,_!==null&&(F=y.deletions,F===null?(y.deletions=[_],y.flags|=16):F.push(_)),y.child=ie,y.memoizedState=null,ie}function Ff(_,y){return y=Th({mode:"visible",children:y},_.mode,0,null),y.return=_,_.child=y}function Uc(_,y,F,ie){return ie!==null&&Bd(ie),_l(y,_.child,null,F),_=Ff(y,y.pendingProps.children),_.flags|=2,y.memoizedState=null,_}function Td(_,y,F,ie,Re,Ze,Xt){if(F)return y.flags&256?(y.flags&=-257,ie=up(Error(C(422))),Uc(_,y,Xt,ie)):y.memoizedState!==null?(y.child=_.child,y.flags|=128,null):(Ze=ie.fallback,Re=y.mode,ie=Th({mode:"visible",children:ie.children},Re,0,null),Ze=Bf(Ze,Re,Xt,null),Ze.flags|=2,ie.return=y,Ze.return=y,ie.sibling=Ze,y.child=ie,y.mode&1&&_l(y,_.child,null,Xt),y.child.memoizedState=Dp(Xt),y.memoizedState=Lp,Ze);if(!(y.mode&1))return Uc(_,y,Xt,null);if(Re.data==="$!"){if(ie=Re.nextSibling&&Re.nextSibling.dataset,ie)var Wn=ie.dgst;return ie=Wn,Ze=Error(C(419)),ie=up(Ze,ie,void 0),Uc(_,y,Xt,ie)}if(Wn=(Xt&_.childLanes)!==0,Ru||Wn){if(ie=kr,ie!==null){switch(Xt&-Xt){case 4:Re=2;break;case 16:Re=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Re=32;break;case 536870912:Re=268435456;break;default:Re=0}Re=Re&(ie.suspendedLanes|Xt)?0:Re,Re!==0&&Re!==Ze.retryLane&&(Ze.retryLane=Re,th(_,Re),Ia(ie,_,Re,-1))}return hc(),ie=up(Error(C(421))),Uc(_,y,Xt,ie)}return Re.data==="$?"?(y.flags|=128,y.child=_.child,y=Um.bind(null,_),Re._reactRetry=y,null):(_=Ze.treeContext,rs=fl(Re.nextSibling),sl=y,Wa=!0,To=null,_!==null&&(nu[ss++]=Ss,nu[ss++]=Nl,nu[ss++]=Pi,Ss=_.id,Nl=_.overflow,Pi=y),y=Ff(y,ie.children),y.flags|=4096,y)}function xf(_,y,F){_.lanes|=y;var ie=_.alternate;ie!==null&&(ie.lanes|=y),gl(_.return,y,F)}function uh(_,y,F,ie,Re){var Ze=_.memoizedState;Ze===null?_.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:ie,tail:F,tailMode:Re}:(Ze.isBackwards=y,Ze.rendering=null,Ze.renderingStartTime=0,Ze.last=ie,Ze.tail=F,Ze.tailMode=Re)}function Hh(_,y,F){var ie=y.pendingProps,Re=ie.revealOrder,Ze=ie.tail;if(su(_,y,ie.children,F),ie=ra.current,ie&2)ie=ie&1|2,y.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=y.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&xf(_,F,y);else if(_.tag===19)xf(_,F,y);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break e;for(;_.sibling===null;){if(_.return===null||_.return===y)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}ie&=1}if(Ua(ra,ie),!(y.mode&1))y.memoizedState=null;else switch(Re){case"forwards":for(F=y.child,Re=null;F!==null;)_=F.alternate,_!==null&&Uh(_)===null&&(Re=F),F=F.sibling;F=Re,F===null?(Re=y.child,y.child=null):(Re=F.sibling,F.sibling=null),uh(y,!1,Re,F,Ze);break;case"backwards":for(F=null,Re=y.child,y.child=null;Re!==null;){if(_=Re.alternate,_!==null&&Uh(_)===null){y.child=Re;break}_=Re.sibling,Re.sibling=F,F=Re,Re=_}uh(y,!0,F,null,Ze);break;case"together":uh(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function bf(_,y){!(y.mode&1)&&_!==null&&(_.alternate=null,y.alternate=null,y.flags|=2)}function Da(_,y,F){if(_!==null&&(y.dependencies=_.dependencies),xi|=y.lanes,!(F&y.childLanes))return null;if(_!==null&&y.child!==_.child)throw Error(C(153));if(y.child!==null){for(_=y.child,F=wf(_,_.pendingProps),y.child=F,F.return=y;_.sibling!==null;)_=_.sibling,F=F.sibling=wf(_,_.pendingProps),F.return=y;F.sibling=null}return y.child}function ch(_,y,F){switch(y.tag){case 3:bc(y),jc();break;case 5:Yc(y);break;case 1:$s(y.type)&&zc(y);break;case 4:Bl(y,y.stateNode.containerInfo);break;case 10:var ie=y.type._context,Re=y.memoizedProps.value;Ua(ul,ie._currentValue),ie._currentValue=Re;break;case 13:if(ie=y.memoizedState,ie!==null)return ie.dehydrated!==null?(Ua(ra,ra.current&1),y.flags|=128,null):F&y.child.childLanes?yf(_,y,F):(Ua(ra,ra.current&1),_=Da(_,y,F),_!==null?_.sibling:null);Ua(ra,ra.current&1);break;case 19:if(ie=(F&y.childLanes)!==0,_.flags&128){if(ie)return Hh(_,y,F);y.flags|=128}if(Re=y.memoizedState,Re!==null&&(Re.rendering=null,Re.tail=null,Re.lastEffect=null),Ua(ra,ra.current),ie)break;return null;case 22:case 23:return y.lanes=0,Fm(_,y,F)}return Da(_,y,F)}var jm,dm,dp,Wd;jm=function(_,y){for(var F=y.child;F!==null;){if(F.tag===5||F.tag===6)_.appendChild(F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===y)break;for(;F.sibling===null;){if(F.return===null||F.return===y)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},dm=function(){},dp=function(_,y,F,ie){var Re=_.memoizedProps;if(Re!==ie){_=y.stateNode,Vd(qu.current);var Ze=null;switch(F){case"input":Re=lr(_,Re),ie=lr(_,ie),Ze=[];break;case"select":Re=Qe({},Re,{value:void 0}),ie=Qe({},ie,{value:void 0}),Ze=[];break;case"textarea":Re=Bt(_,Re),ie=Bt(_,ie),Ze=[];break;default:typeof Re.onClick!="function"&&typeof ie.onClick=="function"&&(_.onclick=Co)}Er(F,ie);var Xt;F=null;for(hi in Re)if(!ie.hasOwnProperty(hi)&&Re.hasOwnProperty(hi)&&Re[hi]!=null)if(hi==="style"){var Wn=Re[hi];for(Xt in Wn)Wn.hasOwnProperty(Xt)&&(F||(F={}),F[Xt]="")}else hi!=="dangerouslySetInnerHTML"&&hi!=="children"&&hi!=="suppressContentEditableWarning"&&hi!=="suppressHydrationWarning"&&hi!=="autoFocus"&&(j.hasOwnProperty(hi)?Ze||(Ze=[]):(Ze=Ze||[]).push(hi,null));for(hi in ie){var yr=ie[hi];if(Wn=Re!=null?Re[hi]:void 0,ie.hasOwnProperty(hi)&&yr!==Wn&&(yr!=null||Wn!=null))if(hi==="style")if(Wn){for(Xt in Wn)!Wn.hasOwnProperty(Xt)||yr&&yr.hasOwnProperty(Xt)||(F||(F={}),F[Xt]="");for(Xt in yr)yr.hasOwnProperty(Xt)&&Wn[Xt]!==yr[Xt]&&(F||(F={}),F[Xt]=yr[Xt])}else F||(Ze||(Ze=[]),Ze.push(hi,F)),F=yr;else hi==="dangerouslySetInnerHTML"?(yr=yr?yr.__html:void 0,Wn=Wn?Wn.__html:void 0,yr!=null&&Wn!==yr&&(Ze=Ze||[]).push(hi,yr)):hi==="children"?typeof yr!="string"&&typeof yr!="number"||(Ze=Ze||[]).push(hi,""+yr):hi!=="suppressContentEditableWarning"&&hi!=="suppressHydrationWarning"&&(j.hasOwnProperty(hi)?(yr!=null&&hi==="onScroll"&&Xr("scroll",_),Ze||Wn===yr||(Ze=[])):(Ze=Ze||[]).push(hi,yr))}F&&(Ze=Ze||[]).push("style",F);var hi=Ze;(y.updateQueue=hi)&&(y.flags|=4)}},Wd=function(_,y,F,ie){F!==ie&&(y.flags|=4)};function Qc(_,y){if(!Wa)switch(_.tailMode){case"hidden":y=_.tail;for(var F=null;y!==null;)y.alternate!==null&&(F=y),y=y.sibling;F===null?_.tail=null:F.sibling=null;break;case"collapsed":F=_.tail;for(var ie=null;F!==null;)F.alternate!==null&&(ie=F),F=F.sibling;ie===null?y||_.tail===null?_.tail=null:_.tail.sibling=null:ie.sibling=null}}function yl(_){var y=_.alternate!==null&&_.alternate.child===_.child,F=0,ie=0;if(y)for(var Re=_.child;Re!==null;)F|=Re.lanes|Re.childLanes,ie|=Re.subtreeFlags&14680064,ie|=Re.flags&14680064,Re.return=_,Re=Re.sibling;else for(Re=_.child;Re!==null;)F|=Re.lanes|Re.childLanes,ie|=Re.subtreeFlags,ie|=Re.flags,Re.return=_,Re=Re.sibling;return _.subtreeFlags|=ie,_.childLanes=F,y}function ld(_,y,F){var ie=y.pendingProps;switch(mu(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yl(y),null;case 1:return $s(y.type)&&Iu(),yl(y),null;case 3:return ie=y.stateNode,wh(),Qo(Ls),Qo(ml),Od(),ie.pendingContext&&(ie.context=ie.pendingContext,ie.pendingContext=null),(_===null||_.child===null)&&(_d(y)?y.flags|=4:_===null||_.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,To!==null&&(lu(To),To=null))),dm(_,y),yl(y),null;case 5:ks(y);var Re=Vd(Rc.current);if(F=y.type,_!==null&&y.stateNode!=null)dp(_,y,F,ie,Re),_.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!ie){if(y.stateNode===null)throw Error(C(166));return yl(y),null}if(_=Vd(qu.current),_d(y)){ie=y.stateNode,F=y.type;var Ze=y.memoizedProps;switch(ie[au]=y,ie[Xu]=Ze,_=(y.mode&1)!==0,F){case"dialog":Xr("cancel",ie),Xr("close",ie);break;case"iframe":case"object":case"embed":Xr("load",ie);break;case"video":case"audio":for(Re=0;Re<fr.length;Re++)Xr(fr[Re],ie);break;case"source":Xr("error",ie);break;case"img":case"image":case"link":Xr("error",ie),Xr("load",ie);break;case"details":Xr("toggle",ie);break;case"input":Pe(ie,Ze),Xr("invalid",ie);break;case"select":ie._wrapperState={wasMultiple:!!Ze.multiple},Xr("invalid",ie);break;case"textarea":Sn(ie,Ze),Xr("invalid",ie)}Er(F,Ze),Re=null;for(var Xt in Ze)if(Ze.hasOwnProperty(Xt)){var Wn=Ze[Xt];Xt==="children"?typeof Wn=="string"?ie.textContent!==Wn&&(Ze.suppressHydrationWarning!==!0&&vs(ie.textContent,Wn,_),Re=["children",Wn]):typeof Wn=="number"&&ie.textContent!==""+Wn&&(Ze.suppressHydrationWarning!==!0&&vs(ie.textContent,Wn,_),Re=["children",""+Wn]):j.hasOwnProperty(Xt)&&Wn!=null&&Xt==="onScroll"&&Xr("scroll",ie)}switch(F){case"input":or(ie),gt(ie,Ze,!0);break;case"textarea":or(ie),Bn(ie);break;case"select":case"option":break;default:typeof Ze.onClick=="function"&&(ie.onclick=Co)}ie=Re,y.updateQueue=ie,ie!==null&&(y.flags|=4)}else{Xt=Re.nodeType===9?Re:Re.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=en(F)),_==="http://www.w3.org/1999/xhtml"?F==="script"?(_=Xt.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof ie.is=="string"?_=Xt.createElement(F,{is:ie.is}):(_=Xt.createElement(F),F==="select"&&(Xt=_,ie.multiple?Xt.multiple=!0:ie.size&&(Xt.size=ie.size))):_=Xt.createElementNS(_,F),_[au]=y,_[Xu]=ie,jm(_,y,!1,!1),y.stateNode=_;e:{switch(Xt=mr(F,ie),F){case"dialog":Xr("cancel",_),Xr("close",_),Re=ie;break;case"iframe":case"object":case"embed":Xr("load",_),Re=ie;break;case"video":case"audio":for(Re=0;Re<fr.length;Re++)Xr(fr[Re],_);Re=ie;break;case"source":Xr("error",_),Re=ie;break;case"img":case"image":case"link":Xr("error",_),Xr("load",_),Re=ie;break;case"details":Xr("toggle",_),Re=ie;break;case"input":Pe(_,ie),Re=lr(_,ie),Xr("invalid",_);break;case"option":Re=ie;break;case"select":_._wrapperState={wasMultiple:!!ie.multiple},Re=Qe({},ie,{value:void 0}),Xr("invalid",_);break;case"textarea":Sn(_,ie),Re=Bt(_,ie),Xr("invalid",_);break;default:Re=ie}Er(F,Re),Wn=Re;for(Ze in Wn)if(Wn.hasOwnProperty(Ze)){var yr=Wn[Ze];Ze==="style"?cn(_,yr):Ze==="dangerouslySetInnerHTML"?(yr=yr?yr.__html:void 0,yr!=null&&Sr(_,yr)):Ze==="children"?typeof yr=="string"?(F!=="textarea"||yr!=="")&&In(_,yr):typeof yr=="number"&&In(_,""+yr):Ze!=="suppressContentEditableWarning"&&Ze!=="suppressHydrationWarning"&&Ze!=="autoFocus"&&(j.hasOwnProperty(Ze)?yr!=null&&Ze==="onScroll"&&Xr("scroll",_):yr!=null&&ke(_,Ze,yr,Xt))}switch(F){case"input":or(_),gt(_,ie,!1);break;case"textarea":or(_),Bn(_);break;case"option":ie.value!=null&&_.setAttribute("value",""+we(ie.value));break;case"select":_.multiple=!!ie.multiple,Ze=ie.value,Ze!=null?At(_,!!ie.multiple,Ze,!1):ie.defaultValue!=null&&At(_,!!ie.multiple,ie.defaultValue,!0);break;default:typeof Re.onClick=="function"&&(_.onclick=Co)}switch(F){case"button":case"input":case"select":case"textarea":ie=!!ie.autoFocus;break e;case"img":ie=!0;break e;default:ie=!1}}ie&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return yl(y),null;case 6:if(_&&y.stateNode!=null)Wd(_,y,_.memoizedProps,ie);else{if(typeof ie!="string"&&y.stateNode===null)throw Error(C(166));if(F=Vd(Rc.current),Vd(qu.current),_d(y)){if(ie=y.stateNode,F=y.memoizedProps,ie[au]=y,(Ze=ie.nodeValue!==F)&&(_=sl,_!==null))switch(_.tag){case 3:vs(ie.nodeValue,F,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&vs(ie.nodeValue,F,(_.mode&1)!==0)}Ze&&(y.flags|=4)}else ie=(F.nodeType===9?F:F.ownerDocument).createTextNode(ie),ie[au]=y,y.stateNode=ie}return yl(y),null;case 13:if(Qo(ra),ie=y.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(Wa&&rs!==null&&y.mode&1&&!(y.flags&128))gd(),jc(),y.flags|=98560,Ze=!1;else if(Ze=_d(y),ie!==null&&ie.dehydrated!==null){if(_===null){if(!Ze)throw Error(C(318));if(Ze=y.memoizedState,Ze=Ze!==null?Ze.dehydrated:null,!Ze)throw Error(C(317));Ze[au]=y}else jc(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;yl(y),Ze=!1}else To!==null&&(lu(To),To=null),Ze=!0;if(!Ze)return y.flags&65536?y:null}return y.flags&128?(y.lanes=F,y):(ie=ie!==null,ie!==(_!==null&&_.memoizedState!==null)&&ie&&(y.child.flags|=8192,y.mode&1&&(_===null||ra.current&1?Fr===0&&(Fr=3):hc())),y.updateQueue!==null&&(y.flags|=4),yl(y),null);case 4:return wh(),dm(_,y),_===null&&vo(y.stateNode.containerInfo),yl(y),null;case 10:return vd(y.type._context),yl(y),null;case 17:return $s(y.type)&&Iu(),yl(y),null;case 19:if(Qo(ra),Ze=y.memoizedState,Ze===null)return yl(y),null;if(ie=(y.flags&128)!==0,Xt=Ze.rendering,Xt===null)if(ie)Qc(Ze,!1);else{if(Fr!==0||_!==null&&_.flags&128)for(_=y.child;_!==null;){if(Xt=Uh(_),Xt!==null){for(y.flags|=128,Qc(Ze,!1),ie=Xt.updateQueue,ie!==null&&(y.updateQueue=ie,y.flags|=4),y.subtreeFlags=0,ie=F,F=y.child;F!==null;)Ze=F,_=ie,Ze.flags&=14680066,Xt=Ze.alternate,Xt===null?(Ze.childLanes=0,Ze.lanes=_,Ze.child=null,Ze.subtreeFlags=0,Ze.memoizedProps=null,Ze.memoizedState=null,Ze.updateQueue=null,Ze.dependencies=null,Ze.stateNode=null):(Ze.childLanes=Xt.childLanes,Ze.lanes=Xt.lanes,Ze.child=Xt.child,Ze.subtreeFlags=0,Ze.deletions=null,Ze.memoizedProps=Xt.memoizedProps,Ze.memoizedState=Xt.memoizedState,Ze.updateQueue=Xt.updateQueue,Ze.type=Xt.type,_=Xt.dependencies,Ze.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),F=F.sibling;return Ua(ra,ra.current&1|2),y.child}_=_.sibling}Ze.tail!==null&&Ci()>Li&&(y.flags|=128,ie=!0,Qc(Ze,!1),y.lanes=4194304)}else{if(!ie)if(_=Uh(Xt),_!==null){if(y.flags|=128,ie=!0,F=_.updateQueue,F!==null&&(y.updateQueue=F,y.flags|=4),Qc(Ze,!0),Ze.tail===null&&Ze.tailMode==="hidden"&&!Xt.alternate&&!Wa)return yl(y),null}else 2*Ci()-Ze.renderingStartTime>Li&&F!==1073741824&&(y.flags|=128,ie=!0,Qc(Ze,!1),y.lanes=4194304);Ze.isBackwards?(Xt.sibling=y.child,y.child=Xt):(F=Ze.last,F!==null?F.sibling=Xt:y.child=Xt,Ze.last=Xt)}return Ze.tail!==null?(y=Ze.tail,Ze.rendering=y,Ze.tail=y.sibling,Ze.renderingStartTime=Ci(),y.sibling=null,F=ra.current,Ua(ra,ie?F&1|2:F&1),y):(yl(y),null);case 22:case 23:return Xa(),ie=y.memoizedState!==null,_!==null&&_.memoizedState!==null!==ie&&(y.flags|=8192),ie&&y.mode&1?ti&1073741824&&(yl(y),y.subtreeFlags&6&&(y.flags|=8192)):yl(y),null;case 24:return null;case 25:return null}throw Error(C(156,y.tag))}function dc(_,y){switch(mu(y),y.tag){case 1:return $s(y.type)&&Iu(),_=y.flags,_&65536?(y.flags=_&-65537|128,y):null;case 3:return wh(),Qo(Ls),Qo(ml),Od(),_=y.flags,_&65536&&!(_&128)?(y.flags=_&-65537|128,y):null;case 5:return ks(y),null;case 13:if(Qo(ra),_=y.memoizedState,_!==null&&_.dehydrated!==null){if(y.alternate===null)throw Error(C(340));jc()}return _=y.flags,_&65536?(y.flags=_&-65537|128,y):null;case 19:return Qo(ra),null;case 4:return wh(),null;case 10:return vd(y.type._context),null;case 22:case 23:return Xa(),null;case 24:return null;default:return null}}var hp=!1,Is=!1,hm=typeof WeakSet=="function"?WeakSet:Set,Zo=null;function u(_,y){var F=_.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(ie){Wl(_,y,ie)}else F.current=null}function t(_,y,F){try{F()}catch(ie){Wl(_,y,ie)}}var o=!1;function d(_,y){if(Pl=Os,_=xt(),pn(_)){if("selectionStart"in _)var F={start:_.selectionStart,end:_.selectionEnd};else e:{F=(F=_.ownerDocument)&&F.defaultView||window;var ie=F.getSelection&&F.getSelection();if(ie&&ie.rangeCount!==0){F=ie.anchorNode;var Re=ie.anchorOffset,Ze=ie.focusNode;ie=ie.focusOffset;try{F.nodeType,Ze.nodeType}catch(Eo){F=null;break e}var Xt=0,Wn=-1,yr=-1,hi=0,Hi=0,bi=_,to=null;t:for(;;){for(var Ko;bi!==F||Re!==0&&bi.nodeType!==3||(Wn=Xt+Re),bi!==Ze||ie!==0&&bi.nodeType!==3||(yr=Xt+ie),bi.nodeType===3&&(Xt+=bi.nodeValue.length),(Ko=bi.firstChild)!==null;)to=bi,bi=Ko;for(;;){if(bi===_)break t;if(to===F&&++hi===Re&&(Wn=Xt),to===Ze&&++Hi===ie&&(yr=Xt),(Ko=bi.nextSibling)!==null)break;bi=to,to=bi.parentNode}bi=Ko}F=Wn===-1||yr===-1?null:{start:Wn,end:yr}}else F=null}F=F||{start:0,end:0}}else F=null;for(As={focusedElem:_,selectionRange:F},Os=!1,Zo=y;Zo!==null;)if(y=Zo,_=y.child,(y.subtreeFlags&1028)!==0&&_!==null)_.return=y,Zo=_;else for(;Zo!==null;){y=Zo;try{var da=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(da!==null){var ha=da.memoizedProps,nc=da.memoizedState,Rr=y.stateNode,$r=Rr.getSnapshotBeforeUpdate(y.elementType===y.type?ha:gu(y.type,ha),nc);Rr.__reactInternalSnapshotBeforeUpdate=$r}break;case 3:var ii=y.stateNode.containerInfo;ii.nodeType===1?ii.textContent="":ii.nodeType===9&&ii.documentElement&&ii.removeChild(ii.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(Eo){Wl(y,y.return,Eo)}if(_=y.sibling,_!==null){_.return=y.return,Zo=_;break}Zo=y.return}return da=o,o=!1,da}function v(_,y,F){var ie=y.updateQueue;if(ie=ie!==null?ie.lastEffect:null,ie!==null){var Re=ie=ie.next;do{if((Re.tag&_)===_){var Ze=Re.destroy;Re.destroy=void 0,Ze!==void 0&&t(y,F,Ze)}Re=Re.next}while(Re!==ie)}}function b(_,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var F=y=y.next;do{if((F.tag&_)===_){var ie=F.create;F.destroy=ie()}F=F.next}while(F!==y)}}function A(_){var y=_.ref;if(y!==null){var F=_.stateNode;switch(_.tag){case 5:_=F;break;default:_=F}typeof y=="function"?y(_):y.current=_}}function k(_){var y=_.alternate;y!==null&&(_.alternate=null,k(y)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(y=_.stateNode,y!==null&&(delete y[au],delete y[Xu],delete y[sc],delete y[hu],delete y[vc])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function Z(_){return _.tag===5||_.tag===3||_.tag===4}function q(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||Z(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function re(_,y,F){var ie=_.tag;if(ie===5||ie===6)_=_.stateNode,y?F.nodeType===8?F.parentNode.insertBefore(_,y):F.insertBefore(_,y):(F.nodeType===8?(y=F.parentNode,y.insertBefore(_,F)):(y=F,y.appendChild(_)),F=F._reactRootContainer,F!=null||y.onclick!==null||(y.onclick=Co));else if(ie!==4&&(_=_.child,_!==null))for(re(_,y,F),_=_.sibling;_!==null;)re(_,y,F),_=_.sibling}function fe(_,y,F){var ie=_.tag;if(ie===5||ie===6)_=_.stateNode,y?F.insertBefore(_,y):F.appendChild(_);else if(ie!==4&&(_=_.child,_!==null))for(fe(_,y,F),_=_.sibling;_!==null;)fe(_,y,F),_=_.sibling}var pe=null,Te=!1;function et(_,y,F){for(F=F.child;F!==null;)We(_,y,F),F=F.sibling}function We(_,y,F){if($o&&typeof $o.onCommitFiberUnmount=="function")try{$o.onCommitFiberUnmount(Xo,F)}catch(Wn){}switch(F.tag){case 5:Is||u(F,y);case 6:var ie=pe,Re=Te;pe=null,et(_,y,F),pe=ie,Te=Re,pe!==null&&(Te?(_=pe,F=F.stateNode,_.nodeType===8?_.parentNode.removeChild(F):_.removeChild(F)):pe.removeChild(F.stateNode));break;case 18:pe!==null&&(Te?(_=pe,F=F.stateNode,_.nodeType===8?ou(_.parentNode,F):_.nodeType===1&&ou(_,F),Ta(_)):ou(pe,F.stateNode));break;case 4:ie=pe,Re=Te,pe=F.stateNode.containerInfo,Te=!0,et(_,y,F),pe=ie,Te=Re;break;case 0:case 11:case 14:case 15:if(!Is&&(ie=F.updateQueue,ie!==null&&(ie=ie.lastEffect,ie!==null))){Re=ie=ie.next;do{var Ze=Re,Xt=Ze.destroy;Ze=Ze.tag,Xt!==void 0&&(Ze&2||Ze&4)&&t(F,y,Xt),Re=Re.next}while(Re!==ie)}et(_,y,F);break;case 1:if(!Is&&(u(F,y),ie=F.stateNode,typeof ie.componentWillUnmount=="function"))try{ie.props=F.memoizedProps,ie.state=F.memoizedState,ie.componentWillUnmount()}catch(Wn){Wl(F,y,Wn)}et(_,y,F);break;case 21:et(_,y,F);break;case 22:F.mode&1?(Is=(ie=Is)||F.memoizedState!==null,et(_,y,F),Is=ie):et(_,y,F);break;default:et(_,y,F)}}function rt(_){var y=_.updateQueue;if(y!==null){_.updateQueue=null;var F=_.stateNode;F===null&&(F=_.stateNode=new hm),y.forEach(function(ie){var Re=pp.bind(null,_,ie);F.has(ie)||(F.add(ie),ie.then(Re,Re))})}}function it(_,y){var F=y.deletions;if(F!==null)for(var ie=0;ie<F.length;ie++){var Re=F[ie];try{var Ze=_,Xt=y,Wn=Xt;e:for(;Wn!==null;){switch(Wn.tag){case 5:pe=Wn.stateNode,Te=!1;break e;case 3:pe=Wn.stateNode.containerInfo,Te=!0;break e;case 4:pe=Wn.stateNode.containerInfo,Te=!0;break e}Wn=Wn.return}if(pe===null)throw Error(C(160));We(Ze,Xt,Re),pe=null,Te=!1;var yr=Re.alternate;yr!==null&&(yr.return=null),Re.return=null}catch(hi){Wl(Re,y,hi)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)kt(y,_),y=y.sibling}function kt(_,y){var F=_.alternate,ie=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(it(y,_),qt(_),ie&4){try{v(3,_,_.return),b(3,_)}catch(ha){Wl(_,_.return,ha)}try{v(5,_,_.return)}catch(ha){Wl(_,_.return,ha)}}break;case 1:it(y,_),qt(_),ie&512&&F!==null&&u(F,F.return);break;case 5:if(it(y,_),qt(_),ie&512&&F!==null&&u(F,F.return),_.flags&32){var Re=_.stateNode;try{In(Re,"")}catch(ha){Wl(_,_.return,ha)}}if(ie&4&&(Re=_.stateNode,Re!=null)){var Ze=_.memoizedProps,Xt=F!==null?F.memoizedProps:Ze,Wn=_.type,yr=_.updateQueue;if(_.updateQueue=null,yr!==null)try{Wn==="input"&&Ze.type==="radio"&&Ze.name!=null&&ut(Re,Ze),mr(Wn,Xt);var hi=mr(Wn,Ze);for(Xt=0;Xt<yr.length;Xt+=2){var Hi=yr[Xt],bi=yr[Xt+1];Hi==="style"?cn(Re,bi):Hi==="dangerouslySetInnerHTML"?Sr(Re,bi):Hi==="children"?In(Re,bi):ke(Re,Hi,bi,hi)}switch(Wn){case"input":Ve(Re,Ze);break;case"textarea":Lt(Re,Ze);break;case"select":var to=Re._wrapperState.wasMultiple;Re._wrapperState.wasMultiple=!!Ze.multiple;var Ko=Ze.value;Ko!=null?At(Re,!!Ze.multiple,Ko,!1):to!==!!Ze.multiple&&(Ze.defaultValue!=null?At(Re,!!Ze.multiple,Ze.defaultValue,!0):At(Re,!!Ze.multiple,Ze.multiple?[]:"",!1))}Re[Xu]=Ze}catch(ha){Wl(_,_.return,ha)}}break;case 6:if(it(y,_),qt(_),ie&4){if(_.stateNode===null)throw Error(C(162));Re=_.stateNode,Ze=_.memoizedProps;try{Re.nodeValue=Ze}catch(ha){Wl(_,_.return,ha)}}break;case 3:if(it(y,_),qt(_),ie&4&&F!==null&&F.memoizedState.isDehydrated)try{Ta(y.containerInfo)}catch(ha){Wl(_,_.return,ha)}break;case 4:it(y,_),qt(_);break;case 13:it(y,_),qt(_),Re=_.child,Re.flags&8192&&(Ze=Re.memoizedState!==null,Re.stateNode.isHidden=Ze,!Ze||Re.alternate!==null&&Re.alternate.memoizedState!==null||(Gi=Ci())),ie&4&&rt(_);break;case 22:if(Hi=F!==null&&F.memoizedState!==null,_.mode&1?(Is=(hi=Is)||Hi,it(y,_),Is=hi):it(y,_),qt(_),ie&8192){if(hi=_.memoizedState!==null,(_.stateNode.isHidden=hi)&&!Hi&&_.mode&1)for(Zo=_,Hi=_.child;Hi!==null;){for(bi=Zo=Hi;Zo!==null;){switch(to=Zo,Ko=to.child,to.tag){case 0:case 11:case 14:case 15:v(4,to,to.return);break;case 1:u(to,to.return);var da=to.stateNode;if(typeof da.componentWillUnmount=="function"){ie=to,F=to.return;try{y=ie,da.props=y.memoizedProps,da.state=y.memoizedState,da.componentWillUnmount()}catch(ha){Wl(ie,F,ha)}}break;case 5:u(to,to.return);break;case 22:if(to.memoizedState!==null){dn(bi);continue}}Ko!==null?(Ko.return=to,Zo=Ko):dn(bi)}Hi=Hi.sibling}e:for(Hi=null,bi=_;;){if(bi.tag===5){if(Hi===null){Hi=bi;try{Re=bi.stateNode,hi?(Ze=Re.style,typeof Ze.setProperty=="function"?Ze.setProperty("display","none","important"):Ze.display="none"):(Wn=bi.stateNode,yr=bi.memoizedProps.style,Xt=yr!=null&&yr.hasOwnProperty("display")?yr.display:null,Wn.style.display=mn("display",Xt))}catch(ha){Wl(_,_.return,ha)}}}else if(bi.tag===6){if(Hi===null)try{bi.stateNode.nodeValue=hi?"":bi.memoizedProps}catch(ha){Wl(_,_.return,ha)}}else if((bi.tag!==22&&bi.tag!==23||bi.memoizedState===null||bi===_)&&bi.child!==null){bi.child.return=bi,bi=bi.child;continue}if(bi===_)break e;for(;bi.sibling===null;){if(bi.return===null||bi.return===_)break e;Hi===bi&&(Hi=null),bi=bi.return}Hi===bi&&(Hi=null),bi.sibling.return=bi.return,bi=bi.sibling}}break;case 19:it(y,_),qt(_),ie&4&&rt(_);break;case 21:break;default:it(y,_),qt(_)}}function qt(_){var y=_.flags;if(y&2){try{e:{for(var F=_.return;F!==null;){if(Z(F)){var ie=F;break e}F=F.return}throw Error(C(160))}switch(ie.tag){case 5:var Re=ie.stateNode;ie.flags&32&&(In(Re,""),ie.flags&=-33);var Ze=q(_);fe(_,Ze,Re);break;case 3:case 4:var Xt=ie.stateNode.containerInfo,Wn=q(_);re(_,Wn,Xt);break;default:throw Error(C(161))}}catch(yr){Wl(_,_.return,yr)}_.flags&=-3}y&4096&&(_.flags&=-4097)}function Qt(_,y,F){Zo=_,vn(_,y,F)}function vn(_,y,F){for(var ie=(_.mode&1)!==0;Zo!==null;){var Re=Zo,Ze=Re.child;if(Re.tag===22&&ie){var Xt=Re.memoizedState!==null||hp;if(!Xt){var Wn=Re.alternate,yr=Wn!==null&&Wn.memoizedState!==null||Is;Wn=hp;var hi=Is;if(hp=Xt,(Is=yr)&&!hi)for(Zo=Re;Zo!==null;)Xt=Zo,yr=Xt.child,Xt.tag===22&&Xt.memoizedState!==null?nn(Re):yr!==null?(yr.return=Xt,Zo=yr):nn(Re);for(;Ze!==null;)Zo=Ze,vn(Ze,y,F),Ze=Ze.sibling;Zo=Re,hp=Wn,Is=hi}on(_,y,F)}else Re.subtreeFlags&8772&&Ze!==null?(Ze.return=Re,Zo=Ze):on(_,y,F)}}function on(_){for(;Zo!==null;){var y=Zo;if(y.flags&8772){var F=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:Is||b(5,y);break;case 1:var ie=y.stateNode;if(y.flags&4&&!Is)if(F===null)ie.componentDidMount();else{var Re=y.elementType===y.type?F.memoizedProps:gu(y.type,F.memoizedProps);ie.componentDidUpdate(Re,F.memoizedState,ie.__reactInternalSnapshotBeforeUpdate)}var Ze=y.updateQueue;Ze!==null&&Ip(y,Ze,ie);break;case 3:var Xt=y.updateQueue;if(Xt!==null){if(F=null,y.child!==null)switch(y.child.tag){case 5:F=y.child.stateNode;break;case 1:F=y.child.stateNode}Ip(y,Xt,F)}break;case 5:var Wn=y.stateNode;if(F===null&&y.flags&4){F=Wn;var yr=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":yr.autoFocus&&F.focus();break;case"img":yr.src&&(F.src=yr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var hi=y.alternate;if(hi!==null){var Hi=hi.memoizedState;if(Hi!==null){var bi=Hi.dehydrated;bi!==null&&Ta(bi)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Is||y.flags&512&&A(y)}catch(to){Wl(y,y.return,to)}}if(y===_){Zo=null;break}if(F=y.sibling,F!==null){F.return=y.return,Zo=F;break}Zo=y.return}}function dn(_){for(;Zo!==null;){var y=Zo;if(y===_){Zo=null;break}var F=y.sibling;if(F!==null){F.return=y.return,Zo=F;break}Zo=y.return}}function nn(_){for(;Zo!==null;){var y=Zo;try{switch(y.tag){case 0:case 11:case 15:var F=y.return;try{b(4,y)}catch(yr){Wl(y,F,yr)}break;case 1:var ie=y.stateNode;if(typeof ie.componentDidMount=="function"){var Re=y.return;try{ie.componentDidMount()}catch(yr){Wl(y,Re,yr)}}var Ze=y.return;try{A(y)}catch(yr){Wl(y,Ze,yr)}break;case 5:var Xt=y.return;try{A(y)}catch(yr){Wl(y,Xt,yr)}}}catch(yr){Wl(y,y.return,yr)}if(y===_){Zo=null;break}var Wn=y.sibling;if(Wn!==null){Wn.return=y.return,Zo=Wn;break}Zo=y.return}}var Rn=Math.ceil,$n=ye.ReactCurrentDispatcher,Pr=ye.ReactCurrentOwner,dr=ye.ReactCurrentBatchConfig,Or=0,kr=null,Yn=null,Mr=0,ti=0,ir=Xi(0),Fr=0,Cr=null,xi=0,ri=0,Kr=0,mi=null,gi=null,Gi=0,Li=1/0,bo=null,wo=!1,Ao=null,zo=null,Ga=!1,ba=null,wl=0,os=0,ia=null,Pa=-1,uo=0;function na(){return Or&6?Ci():Pa!==-1?Pa:Pa=Ci()}function Ya(_){return _.mode&1?Or&2&&Mr!==0?Mr&-Mr:uc.transition!==null?(uo===0&&(uo=ma()),uo):(_=ao,_!==0||(_=window.event,_=_===void 0?16:cs(_.type)),_):1}function Ia(_,y,F,ie){if(50<os)throw os=0,ia=null,Error(C(185));Sa(_,F,ie),(!(Or&2)||_!==kr)&&(_===kr&&(!(Or&2)&&(ri|=F),Fr===4&&Mu(_,Mr)),Ms(_,ie),F===1&&Or===0&&!(y.mode&1)&&(Li=Ci()+500,Ju&&fu()))}function Ms(_,y){var F=_.callbackNode;xa(_,y);var ie=Na(_,_===kr?Mr:0);if(ie===0)F!==null&&qr(F),_.callbackNode=null,_.callbackPriority=0;else if(y=ie&-ie,_.callbackPriority!==y){if(F!=null&&qr(F),y===1)_.tag===0?eh(Ws.bind(null,_)):md(Ws.bind(null,_)),Bs(function(){!(Or&6)&&fu()}),F=null;else{switch(Ma(ie)){case 1:F=Bi;break;case 4:F=Di;break;case 16:F=yo;break;case 536870912:F=Vo;break;default:F=yo}F=Mg(F,$u.bind(null,_))}_.callbackPriority=y,_.callbackNode=F}}function $u(_,y){if(Pa=-1,uo=0,Or&6)throw Error(C(327));var F=_.callbackNode;if(tc()&&_.callbackNode!==F)return null;var ie=Na(_,_===kr?Mr:0);if(ie===0)return null;if(ie&30||ie&_.expiredLanes||y)y=qc(_,ie);else{y=ie;var Re=Or;Or|=2;var Ze=Vs();(kr!==_||Mr!==y)&&(bo=null,Li=Ci()+500,El(_,y));do try{td();break}catch(Wn){Wu(_,Wn)}while(!0);Ni(),$n.current=Ze,Or=Re,Yn!==null?y=0:(kr=null,Mr=0,y=Fr)}if(y!==0){if(y===2&&(Re=Ba(_),Re!==0&&(ie=Re,y=xl(_,Re))),y===1)throw F=Cr,El(_,0),Mu(_,ie),Ms(_,Ci()),F;if(y===6)Mu(_,ie);else{if(Re=_.current.alternate,!(ie&30)&&!Zu(Re)&&(y=qc(_,ie),y===2&&(Ze=Ba(_),Ze!==0&&(ie=Ze,y=xl(_,Ze))),y===1))throw F=Cr,El(_,0),Mu(_,ie),Ms(_,Ci()),F;switch(_.finishedWork=Re,_.finishedLanes=ie,y){case 0:case 1:throw Error(C(345));case 2:ec(_,gi,bo);break;case 3:if(Mu(_,ie),(ie&130023424)===ie&&(y=Gi+500-Ci(),10<y)){if(Na(_,0)!==0)break;if(Re=_.suspendedLanes,(Re&ie)!==ie){na(),_.pingedLanes|=_.suspendedLanes&Re;break}_.timeoutHandle=Ol(ec.bind(null,_,gi,bo),y);break}ec(_,gi,bo);break;case 4:if(Mu(_,ie),(ie&4194240)===ie)break;for(y=_.eventTimes,Re=-1;0<ie;){var Xt=31-qa(ie);Ze=1<<Xt,Xt=y[Xt],Xt>Re&&(Re=Xt),ie&=~Ze}if(ie=Re,ie=Ci()-ie,ie=(120>ie?120:480>ie?480:1080>ie?1080:1920>ie?1920:3e3>ie?3e3:4320>ie?4320:1960*Rn(ie/1960))-ie,10<ie){_.timeoutHandle=Ol(ec.bind(null,_,gi,bo),ie);break}ec(_,gi,bo);break;case 5:ec(_,gi,bo);break;default:throw Error(C(329))}}}return Ms(_,Ci()),_.callbackNode===F?$u.bind(null,_):null}function xl(_,y){var F=mi;return _.current.memoizedState.isDehydrated&&(El(_,y).flags|=256),_=qc(_,y),_!==2&&(y=gi,gi=F,y!==null&&lu(y)),_}function lu(_){gi===null?gi=_:gi.push.apply(gi,_)}function Zu(_){for(var y=_;;){if(y.flags&16384){var F=y.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var ie=0;ie<F.length;ie++){var Re=F[ie],Ze=Re.getSnapshot;Re=Re.value;try{if(!tt(Ze(),Re))return!1}catch(Xt){return!1}}}if(F=y.child,y.subtreeFlags&16384&&F!==null)F.return=y,y=F;else{if(y===_)break;for(;y.sibling===null;){if(y.return===null||y.return===_)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Mu(_,y){for(y&=~Kr,y&=~ri,_.suspendedLanes|=y,_.pingedLanes&=~y,_=_.expirationTimes;0<y;){var F=31-qa(y),ie=1<<F;_[F]=-1,y&=~ie}}function Ws(_){if(Or&6)throw Error(C(327));tc();var y=Na(_,0);if(!(y&1))return Ms(_,Ci()),null;var F=qc(_,y);if(_.tag!==0&&F===2){var ie=Ba(_);ie!==0&&(y=ie,F=xl(_,ie))}if(F===1)throw F=Cr,El(_,0),Mu(_,y),Ms(_,Ci()),F;if(F===6)throw Error(C(345));return _.finishedWork=_.current.alternate,_.finishedLanes=y,ec(_,gi,bo),Ms(_,Ci()),null}function Us(_,y){var F=Or;Or|=1;try{return _(y)}finally{Or=F,Or===0&&(Li=Ci()+500,Ju&&fu())}}function gs(_){ba!==null&&ba.tag===0&&!(Or&6)&&tc();var y=Or;Or|=1;var F=dr.transition,ie=ao;try{if(dr.transition=null,ao=1,_)return _()}finally{ao=ie,dr.transition=F,Or=y,!(Or&6)&&fu()}}function Xa(){ti=ir.current,Qo(ir)}function El(_,y){_.finishedWork=null,_.finishedLanes=0;var F=_.timeoutHandle;if(F!==-1&&(_.timeoutHandle=-1,Ac(F)),Yn!==null)for(F=Yn.return;F!==null;){var ie=F;switch(mu(ie),ie.tag){case 1:ie=ie.type.childContextTypes,ie!=null&&Iu();break;case 3:wh(),Qo(Ls),Qo(ml),Od();break;case 5:ks(ie);break;case 4:wh();break;case 13:Qo(ra);break;case 19:Qo(ra);break;case 10:vd(ie.type._context);break;case 22:case 23:Xa()}F=F.return}if(kr=_,Yn=_=wf(_.current,null),Mr=ti=y,Fr=0,Cr=null,Kr=ri=xi=0,gi=mi=null,yd!==null){for(y=0;y<yd.length;y++)if(F=yd[y],ie=F.interleaved,ie!==null){F.interleaved=null;var Re=ie.next,Ze=F.pending;if(Ze!==null){var Xt=Ze.next;Ze.next=Re,ie.next=Xt}F.pending=ie}yd=null}return _}function Wu(_,y){do{var F=Yn;try{if(Ni(),Ha.current=lp,Vh){for(var ie=cl.memoizedState;ie!==null;){var Re=ie.queue;Re!==null&&(Re.pending=null),ie=ie.next}Vh=!1}if(Rd=0,Gu=Js=cl=null,Gd=!1,af=0,Pr.current=null,F===null||F.return===null){Fr=1,Cr=y,Yn=null;break}e:{var Ze=_,Xt=F.return,Wn=F,yr=y;if(y=Mr,Wn.flags|=32768,yr!==null&&typeof yr=="object"&&typeof yr.then=="function"){var hi=yr,Hi=Wn,bi=Hi.tag;if(!(Hi.mode&1)&&(bi===0||bi===11||bi===15)){var to=Hi.alternate;to?(Hi.updateQueue=to.updateQueue,Hi.memoizedState=to.memoizedState,Hi.lanes=to.lanes):(Hi.updateQueue=null,Hi.memoizedState=null)}var Ko=ah(Xt);if(Ko!==null){Ko.flags&=-257,$h(Ko,Xt,Wn,Ze,y),Ko.mode&1&&Rp(Ze,hi,y),y=Ko,yr=hi;var da=y.updateQueue;if(da===null){var ha=new Set;ha.add(yr),y.updateQueue=ha}else da.add(yr);break e}else{if(!(y&1)){Rp(Ze,hi,y),hc();break e}yr=Error(C(426))}}else if(Wa&&Wn.mode&1){var nc=ah(Xt);if(nc!==null){!(nc.flags&65536)&&(nc.flags|=256),$h(nc,Xt,Wn,Ze,y),Bd(oh(yr,Wn));break e}}Ze=yr=oh(yr,Wn),Fr!==4&&(Fr=2),mi===null?mi=[Ze]:mi.push(Ze),Ze=Xt;do{switch(Ze.tag){case 3:Ze.flags|=65536,y&=-y,Ze.lanes|=y;var Rr=Op(Ze,yr,y);bh(Ze,Rr);break e;case 1:Wn=yr;var $r=Ze.type,ii=Ze.stateNode;if(!(Ze.flags&128)&&(typeof $r.getDerivedStateFromError=="function"||ii!==null&&typeof ii.componentDidCatch=="function"&&(zo===null||!zo.has(ii)))){Ze.flags|=65536,y&=-y,Ze.lanes|=y;var Eo=um(Ze,Wn,y);bh(Ze,Eo);break e}}Ze=Ze.return}while(Ze!==null)}ud(F)}catch(ya){y=ya,Yn===F&&F!==null&&(Yn=F=F.return);continue}break}while(!0)}function Vs(){var _=$n.current;return $n.current=lp,_===null?lp:_}function hc(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),kr===null||!(xi&268435455)&&!(ri&268435455)||Mu(kr,Mr)}function qc(_,y){var F=Or;Or|=2;var ie=Vs();(kr!==_||Mr!==y)&&(bo=null,El(_,y));do try{ed();break}catch(Re){Wu(_,Re)}while(!0);if(Ni(),Or=F,$n.current=ie,Yn!==null)throw Error(C(261));return kr=null,Mr=0,Fr}function ed(){for(;Yn!==null;)Hd(Yn)}function td(){for(;Yn!==null&&!Gr();)Hd(Yn)}function Hd(_){var y=Ig(_.alternate,_,ti);_.memoizedProps=_.pendingProps,y===null?ud(_):Yn=y,Pr.current=null}function ud(_){var y=_;do{var F=y.alternate;if(_=y.return,y.flags&32768){if(F=dc(F,y),F!==null){F.flags&=32767,Yn=F;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Fr=6,Yn=null;return}}else if(F=ld(F,y,ti),F!==null){Yn=F;return}if(y=y.sibling,y!==null){Yn=y;return}Yn=y=_}while(y!==null);Fr===0&&(Fr=5)}function ec(_,y,F){var ie=ao,Re=dr.transition;try{dr.transition=null,ao=1,Kh(_,y,F,ie)}finally{dr.transition=Re,ao=ie}return null}function Kh(_,y,F,ie){do tc();while(ba!==null);if(Or&6)throw Error(C(327));F=_.finishedWork;var Re=_.finishedLanes;if(F===null)return null;if(_.finishedWork=null,_.finishedLanes=0,F===_.current)throw Error(C(177));_.callbackNode=null,_.callbackPriority=0;var Ze=F.lanes|F.childLanes;if(us(_,Ze),_===kr&&(Yn=kr=null,Mr=0),!(F.subtreeFlags&2064)&&!(F.flags&2064)||Ga||(Ga=!0,Mg(yo,function(){return tc(),null})),Ze=(F.flags&15990)!==0,F.subtreeFlags&15990||Ze){Ze=dr.transition,dr.transition=null;var Xt=ao;ao=1;var Wn=Or;Or|=4,Pr.current=null,d(_,F),kt(F,_),Mn(As),Os=!!Pl,As=Pl=null,_.current=F,Qt(F,_,Re),ci(),Or=Wn,ao=Xt,dr.transition=Ze}else _.current=F;if(Ga&&(Ga=!1,ba=_,wl=Re),Ze=_.pendingLanes,Ze===0&&(zo=null),Aa(F.stateNode,ie),Ms(_,Ci()),y!==null)for(ie=_.onRecoverableError,F=0;F<y.length;F++)Re=y[F],ie(Re.value,{componentStack:Re.stack,digest:Re.digest});if(wo)throw wo=!1,_=Ao,Ao=null,_;return wl&1&&_.tag!==0&&tc(),Ze=_.pendingLanes,Ze&1?_===ia?os++:(os=0,ia=_):os=0,fu(),null}function tc(){if(ba!==null){var _=Ma(wl),y=dr.transition,F=ao;try{if(dr.transition=null,ao=16>_?16:_,ba===null)var ie=!1;else{if(_=ba,ba=null,wl=0,Or&6)throw Error(C(331));var Re=Or;for(Or|=4,Zo=_.current;Zo!==null;){var Ze=Zo,Xt=Ze.child;if(Zo.flags&16){var Wn=Ze.deletions;if(Wn!==null){for(var yr=0;yr<Wn.length;yr++){var hi=Wn[yr];for(Zo=hi;Zo!==null;){var Hi=Zo;switch(Hi.tag){case 0:case 11:case 15:v(8,Hi,Ze)}var bi=Hi.child;if(bi!==null)bi.return=Hi,Zo=bi;else for(;Zo!==null;){Hi=Zo;var to=Hi.sibling,Ko=Hi.return;if(k(Hi),Hi===hi){Zo=null;break}if(to!==null){to.return=Ko,Zo=to;break}Zo=Ko}}}var da=Ze.alternate;if(da!==null){var ha=da.child;if(ha!==null){da.child=null;do{var nc=ha.sibling;ha.sibling=null,ha=nc}while(ha!==null)}}Zo=Ze}}if(Ze.subtreeFlags&2064&&Xt!==null)Xt.return=Ze,Zo=Xt;else e:for(;Zo!==null;){if(Ze=Zo,Ze.flags&2048)switch(Ze.tag){case 0:case 11:case 15:v(9,Ze,Ze.return)}var Rr=Ze.sibling;if(Rr!==null){Rr.return=Ze.return,Zo=Rr;break e}Zo=Ze.return}}var $r=_.current;for(Zo=$r;Zo!==null;){Xt=Zo;var ii=Xt.child;if(Xt.subtreeFlags&2064&&ii!==null)ii.return=Xt,Zo=ii;else e:for(Xt=$r;Zo!==null;){if(Wn=Zo,Wn.flags&2048)try{switch(Wn.tag){case 0:case 11:case 15:b(9,Wn)}}catch(ya){Wl(Wn,Wn.return,ya)}if(Wn===Xt){Zo=null;break e}var Eo=Wn.sibling;if(Eo!==null){Eo.return=Wn.return,Zo=Eo;break e}Zo=Wn.return}}if(Or=Re,fu(),$o&&typeof $o.onPostCommitFiberRoot=="function")try{$o.onPostCommitFiberRoot(Xo,_)}catch(ya){}ie=!0}return ie}finally{ao=F,dr.transition=y}}return!1}function Yh(_,y,F){y=oh(F,y),y=Op(_,y,1),_=Ud(_,y,1),y=na(),_!==null&&(Sa(_,1,y),Ms(_,y))}function Wl(_,y,F){if(_.tag===3)Yh(_,_,F);else for(;y!==null;){if(y.tag===3){Yh(y,_,F);break}else if(y.tag===1){var ie=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof ie.componentDidCatch=="function"&&(zo===null||!zo.has(ie))){_=oh(F,_),_=um(y,_,1),y=Ud(y,_,1),_=na(),y!==null&&(Sa(y,1,_),Ms(y,_));break}}y=y.return}}function fp(_,y,F){var ie=_.pingCache;ie!==null&&ie.delete(y),y=na(),_.pingedLanes|=_.suspendedLanes&F,kr===_&&(Mr&F)===F&&(Fr===4||Fr===3&&(Mr&130023424)===Mr&&500>Ci()-Gi?El(_,0):Kr|=F),Ms(_,y)}function dh(_,y){y===0&&(_.mode&1?(y=xs,xs<<=1,!(xs&130023424)&&(xs=4194304)):y=1);var F=na();_=th(_,y),_!==null&&(Sa(_,y,F),Ms(_,F))}function Um(_){var y=_.memoizedState,F=0;y!==null&&(F=y.retryLane),dh(_,F)}function pp(_,y){var F=0;switch(_.tag){case 13:var ie=_.stateNode,Re=_.memoizedState;Re!==null&&(F=Re.retryLane);break;case 19:ie=_.stateNode;break;default:throw Error(C(314))}ie!==null&&ie.delete(y),dh(_,F)}var Ig;Ig=function(_,y,F){if(_!==null)if(_.memoizedProps!==y.pendingProps||Ls.current)Ru=!0;else{if(!(_.lanes&F)&&!(y.flags&128))return Ru=!1,ch(_,y,F);Ru=!!(_.flags&131072)}else Ru=!1,Wa&&y.flags&1048576&&Bc(y,Oc,y.index);switch(y.lanes=0,y.tag){case 2:var ie=y.type;bf(_,y),_=y.pendingProps;var Re=Hc(y,ml.current);gr(y,F),Re=ip(null,y,ie,_,Re,F);var Ze=Lf();return y.flags|=1,typeof Re=="object"&&Re!==null&&typeof Re.render=="function"&&Re.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,$s(ie)?(Ze=!0,zc(y)):Ze=!1,y.memoizedState=Re.state!==null&&Re.state!==void 0?Re.state:null,nh(y),Re.updater=Ed,y.stateNode=Re,Re._reactInternals=y,xc(y,ie,_,F),y=Wh(null,y,ie,!0,Ze,F)):(y.tag=0,Wa&&Ze&&id(y),su(null,y,Re,F),y=y.child),y;case 16:ie=y.elementType;e:{switch(bf(_,y),_=y.pendingProps,Re=ie._init,ie=Re(ie._payload),y.type=ie,Re=y.tag=Cg(ie),_=gu(ie,_),Re){case 0:y=cm(null,y,ie,_,F);break e;case 1:y=vf(null,y,ie,_,F);break e;case 11:y=Sh(null,y,ie,_,F);break e;case 14:y=Zd(null,y,ie,gu(ie.type,_),F);break e}throw Error(C(306,ie,""))}return y;case 0:return ie=y.type,Re=y.pendingProps,Re=y.elementType===ie?Re:gu(ie,Re),cm(_,y,ie,Re,F);case 1:return ie=y.type,Re=y.pendingProps,Re=y.elementType===ie?Re:gu(ie,Re),vf(_,y,ie,Re,F);case 3:e:{if(bc(y),_===null)throw Error(C(387));ie=y.pendingProps,Ze=y.memoizedState,Re=Ze.element,km(_,y),rp(y,ie,null,F);var Xt=y.memoizedState;if(ie=Xt.element,Ze.isDehydrated)if(Ze={element:ie,isDehydrated:!1,cache:Xt.cache,pendingSuspenseBoundaries:Xt.pendingSuspenseBoundaries,transitions:Xt.transitions},y.updateQueue.baseState=Ze,y.memoizedState=Ze,y.flags&256){Re=oh(Error(C(423)),y),y=lh(_,y,ie,F,Re);break e}else if(ie!==Re){Re=oh(Error(C(424)),y),y=lh(_,y,ie,F,Re);break e}else for(rs=fl(y.stateNode.containerInfo.firstChild),sl=y,Wa=!0,To=null,F=Zl(y,null,ie,F),y.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(jc(),ie===Re){y=Da(_,y,F);break e}su(_,y,ie,F)}y=y.child}return y;case 5:return Yc(y),_===null&&ll(y),ie=y.type,Re=y.pendingProps,Ze=_!==null?_.memoizedProps:null,Xt=Re.children,nl(ie,Re)?Xt=null:Ze!==null&&nl(ie,Ze)&&(y.flags|=32),Bm(_,y),su(_,y,Xt,F),y.child;case 6:return _===null&&ll(y),null;case 13:return yf(_,y,F);case 4:return Bl(y,y.stateNode.containerInfo),ie=y.pendingProps,_===null?y.child=_l(y,null,ie,F):su(_,y,ie,F),y.child;case 11:return ie=y.type,Re=y.pendingProps,Re=y.elementType===ie?Re:gu(ie,Re),Sh(_,y,ie,Re,F);case 7:return su(_,y,y.pendingProps,F),y.child;case 8:return su(_,y,y.pendingProps.children,F),y.child;case 12:return su(_,y,y.pendingProps.children,F),y.child;case 10:e:{if(ie=y.type._context,Re=y.pendingProps,Ze=y.memoizedProps,Xt=Re.value,Ua(ul,ie._currentValue),ie._currentValue=Xt,Ze!==null)if(tt(Ze.value,Xt)){if(Ze.children===Re.children&&!Ls.current){y=Da(_,y,F);break e}}else for(Ze=y.child,Ze!==null&&(Ze.return=y);Ze!==null;){var Wn=Ze.dependencies;if(Wn!==null){Xt=Ze.child;for(var yr=Wn.firstContext;yr!==null;){if(yr.context===ie){if(Ze.tag===1){yr=xh(-1,F&-F),yr.tag=2;var hi=Ze.updateQueue;if(hi!==null){hi=hi.shared;var Hi=hi.pending;Hi===null?yr.next=yr:(yr.next=Hi.next,Hi.next=yr),hi.pending=yr}}Ze.lanes|=F,yr=Ze.alternate,yr!==null&&(yr.lanes|=F),gl(Ze.return,F,y),Wn.lanes|=F;break}yr=yr.next}}else if(Ze.tag===10)Xt=Ze.type===y.type?null:Ze.child;else if(Ze.tag===18){if(Xt=Ze.return,Xt===null)throw Error(C(341));Xt.lanes|=F,Wn=Xt.alternate,Wn!==null&&(Wn.lanes|=F),gl(Xt,F,y),Xt=Ze.sibling}else Xt=Ze.child;if(Xt!==null)Xt.return=Ze;else for(Xt=Ze;Xt!==null;){if(Xt===y){Xt=null;break}if(Ze=Xt.sibling,Ze!==null){Ze.return=Xt.return,Xt=Ze;break}Xt=Xt.return}Ze=Xt}su(_,y,Re.children,F),y=y.child}return y;case 9:return Re=y.type,ie=y.pendingProps.children,gr(y,F),Re=od(Re),ie=ie(Re),y.flags|=1,su(_,y,ie,F),y.child;case 14:return ie=y.type,Re=gu(ie,y.pendingProps),Re=gu(ie.type,Re),Zd(_,y,ie,Re,F);case 15:return sh(_,y,y.type,y.pendingProps,F);case 17:return ie=y.type,Re=y.pendingProps,Re=y.elementType===ie?Re:gu(ie,Re),bf(_,y),y.tag=1,$s(ie)?(_=!0,zc(y)):_=!1,gr(y,F),Zs(y,ie,Re),xc(y,ie,Re,F),Wh(null,y,ie,!0,_,F);case 19:return Hh(_,y,F);case 22:return Fm(_,y,F)}throw Error(C(156,y.tag))};function Mg(_,y){return Yr(_,y)}function Vm(_,y,F,ie){this.tag=_,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ie,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kd(_,y,F,ie){return new Vm(_,y,F,ie)}function S_(_){return _=_.prototype,!(!_||!_.isReactComponent)}function Cg(_){if(typeof _=="function")return S_(_)?1:0;if(_!=null){if(_=_.$$typeof,_===ft)return 11;if(_===_t)return 14}return 2}function wf(_,y){var F=_.alternate;return F===null?(F=Kd(_.tag,y,_.key,_.mode),F.elementType=_.elementType,F.type=_.type,F.stateNode=_.stateNode,F.alternate=_,_.alternate=F):(F.pendingProps=y,F.type=_.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=_.flags&14680064,F.childLanes=_.childLanes,F.lanes=_.lanes,F.child=_.child,F.memoizedProps=_.memoizedProps,F.memoizedState=_.memoizedState,F.updateQueue=_.updateQueue,y=_.dependencies,F.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},F.sibling=_.sibling,F.index=_.index,F.ref=_.ref,F}function kp(_,y,F,ie,Re,Ze){var Xt=2;if(ie=_,typeof _=="function")S_(_)&&(Xt=1);else if(typeof _=="string")Xt=5;else e:switch(_){case Ue:return Bf(F.children,Re,Ze,y);case qe:Xt=8,Re|=8;break;case je:return _=Kd(12,F,y,Re|2),_.elementType=je,_.lanes=Ze,_;case Et:return _=Kd(13,F,y,Re),_.elementType=Et,_.lanes=Ze,_;case yt:return _=Kd(19,F,y,Re),_.elementType=yt,_.lanes=Ze,_;case bt:return Th(F,Re,Ze,y);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case nt:Xt=10;break e;case Ct:Xt=9;break e;case ft:Xt=11;break e;case _t:Xt=14;break e;case He:Xt=16,ie=null;break e}throw Error(C(130,_==null?_:typeof _,""))}return y=Kd(Xt,F,y,Re),y.elementType=_,y.type=ie,y.lanes=Ze,y}function Bf(_,y,F,ie){return _=Kd(7,_,ie,y),_.lanes=F,_}function Th(_,y,F,ie){return _=Kd(22,_,ie,y),_.elementType=bt,_.lanes=F,_.stateNode={isHidden:!1},_}function fc(_,y,F){return _=Kd(6,_,null,y),_.lanes=F,_}function Gm(_,y,F){return y=Kd(4,_.children!==null?_.children:[],_.key,y),y.lanes=F,y.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},y}function fm(_,y,F,ie,Re){this.tag=y,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=ie,this.onRecoverableError=Re,this.mutableSourceEagerHydrationData=null}function $m(_,y,F,ie,Re,Ze,Xt,Wn,yr){return _=new fm(_,y,F,Wn,yr),y===1?(y=1,Ze===!0&&(y|=8)):y=0,Ze=Kd(3,null,null,y),_.current=Ze,Ze.stateNode=_,Ze.memoizedState={element:ie,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},nh(Ze),_}function Pv(_,y,F){var ie=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:be,key:ie==null?null:""+ie,children:_,containerInfo:y,implementation:F}}function jf(_){if(!_)return al;_=_._reactInternals;e:{if(Fn(_)!==_||_.tag!==1)throw Error(C(170));var y=_;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if($s(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(C(171))}if(_.tag===1){var F=_.type;if($s(F))return rd(_,F,y)}return y}function Zm(_,y,F,ie,Re,Ze,Xt,Wn,yr){return _=$m(F,ie,!0,_,Re,Ze,Xt,Wn,yr),_.context=jf(null),F=_.current,ie=na(),Re=Ya(F),Ze=xh(ie,Re),Ze.callback=y!=null?y:null,Ud(F,Ze,Re),_.current.lanes=Re,Sa(_,Re,ie),Ms(_,ie),_}function Ef(_,y,F,ie){var Re=y.current,Ze=na(),Xt=Ya(Re);return F=jf(F),y.context===null?y.context=F:y.pendingContext=F,y=xh(Ze,Xt),y.payload={element:_},ie=ie===void 0?null:ie,ie!==null&&(y.callback=ie),_=Ud(Re,y,Xt),_!==null&&(Ia(_,Re,Xt,Ze),of(_,Re,Xt)),Xt}function Sf(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function Ag(_,y){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var F=_.retryLane;_.retryLane=F!==0&&F<y?F:y}}function Pg(_,y){Ag(_,y),(_=_.alternate)&&Ag(_,y)}function Ov(){return null}var Rv=typeof reportError=="function"?reportError:function(_){console.error(_)};function T_(_){this._internalRoot=_}I_.prototype.render=T_.prototype.render=function(_){var y=this._internalRoot;if(y===null)throw Error(C(409));Ef(_,y,null,null)},I_.prototype.unmount=T_.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var y=_.containerInfo;gs(function(){Ef(null,_,null,null)}),y[Ys]=null}};function I_(_){this._internalRoot=_}I_.prototype.unstable_scheduleHydration=function(_){if(_){var y=Hs();_={blockedOn:null,target:_,priority:y};for(var F=0;F<Wo.length&&y!==0&&y<Wo[F].priority;F++);Wo.splice(F,0,_),F===0&&Jl(_)}};function Vc(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function pm(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function M_(){}function mm(_,y,F,ie,Re){if(Re){if(typeof ie=="function"){var Ze=ie;ie=function(){var hi=Sf(Xt);Ze.call(hi)}}var Xt=Zm(y,ie,_,0,null,!1,!1,"",M_);return _._reactRootContainer=Xt,_[Ys]=Xt.current,vo(_.nodeType===8?_.parentNode:_),gs(),Xt}for(;Re=_.lastChild;)_.removeChild(Re);if(typeof ie=="function"){var Wn=ie;ie=function(){var hi=Sf(yr);Wn.call(hi)}}var yr=$m(_,0,!1,null,null,!1,!1,"",M_);return _._reactRootContainer=yr,_[Ys]=yr.current,vo(_.nodeType===8?_.parentNode:_),gs(function(){Ef(y,yr,F,ie)}),yr}function Wm(_,y,F,ie,Re){var Ze=F._reactRootContainer;if(Ze){var Xt=Ze;if(typeof Re=="function"){var Wn=Re;Re=function(){var yr=Sf(Xt);Wn.call(yr)}}Ef(y,Xt,_,Re)}else Xt=mm(F,y,_,Re,ie);return Sf(Xt)}ko=function(_){switch(_.tag){case 3:var y=_.stateNode;if(y.current.memoizedState.isDehydrated){var F=tl(y.pendingLanes);F!==0&&(ua(y,F|1),Ms(y,Ci()),!(Or&6)&&(Li=Ci()+500,fu()))}break;case 13:gs(function(){var ie=th(_,1);if(ie!==null){var Re=na();Ia(ie,_,1,Re)}}),Pg(_,1)}},No=function(_){if(_.tag===13){var y=th(_,134217728);if(y!==null){var F=na();Ia(y,_,134217728,F)}Pg(_,134217728)}},Uo=function(_){if(_.tag===13){var y=Ya(_),F=th(_,y);if(F!==null){var ie=na();Ia(F,_,y,ie)}Pg(_,y)}},Hs=function(){return ao},$i=function(_,y){var F=ao;try{return ao=_,y()}finally{ao=F}},Ot=function(_,y,F){switch(y){case"input":if(Ve(_,F),y=F.name,F.type==="radio"&&y!=null){for(F=_;F.parentNode;)F=F.parentNode;for(F=F.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<F.length;y++){var ie=F[y];if(ie!==_&&ie.form===_.form){var Re=tu(ie);if(!Re)throw Error(C(90));wr(ie),Ve(ie,Re)}}}break;case"textarea":Lt(_,F);break;case"select":y=F.value,y!=null&&At(_,!!F.multiple,y,!1)}},Jn=Us,rr=gs;var jl={usingClientEntryPoint:!1,Events:[lc,$l,tu,Nt,Nn,Us]},Ih={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_m={bundleType:Ih.bundleType,version:Ih.version,rendererPackageName:Ih.rendererPackageName,rendererConfig:Ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ye.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=Xn(_),_===null?null:_.stateNode},findFiberByHostInstance:Ih.findFiberByHostInstance||Ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{Xo=Uf.inject(_m),$o=Uf}catch(_){}}Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jl,Q.createPortal=function(_,y){var F=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vc(y))throw Error(C(200));return Pv(_,y,null,F)},Q.createRoot=function(_,y){if(!Vc(_))throw Error(C(299));var F=!1,ie="",Re=Rv;return y!=null&&(y.unstable_strictMode===!0&&(F=!0),y.identifierPrefix!==void 0&&(ie=y.identifierPrefix),y.onRecoverableError!==void 0&&(Re=y.onRecoverableError)),y=$m(_,1,!1,null,null,F,!1,ie,Re),_[Ys]=y.current,vo(_.nodeType===8?_.parentNode:_),new T_(y)},Q.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var y=_._reactInternals;if(y===void 0)throw typeof _.render=="function"?Error(C(188)):(_=Object.keys(_).join(","),Error(C(268,_)));return _=Xn(y),_=_===null?null:_.stateNode,_},Q.flushSync=function(_){return gs(_)},Q.hydrate=function(_,y,F){if(!pm(y))throw Error(C(200));return Wm(null,_,y,!0,F)},Q.hydrateRoot=function(_,y,F){if(!Vc(_))throw Error(C(405));var ie=F!=null&&F.hydratedSources||null,Re=!1,Ze="",Xt=Rv;if(F!=null&&(F.unstable_strictMode===!0&&(Re=!0),F.identifierPrefix!==void 0&&(Ze=F.identifierPrefix),F.onRecoverableError!==void 0&&(Xt=F.onRecoverableError)),y=Zm(y,null,_,1,F!=null?F:null,Re,!1,Ze,Xt),_[Ys]=y.current,vo(_),ie)for(_=0;_<ie.length;_++)F=ie[_],Re=F._getVersion,Re=Re(F._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[F,Re]:y.mutableSourceEagerHydrationData.push(F,Re);return new I_(y)},Q.render=function(_,y,F){if(!pm(y))throw Error(C(200));return Wm(null,_,y,!1,F)},Q.unmountComponentAtNode=function(_){if(!pm(_))throw Error(C(40));return _._reactRootContainer?(gs(function(){Wm(null,null,_,!1,function(){_._reactRootContainer=null,_[Ys]=null})}),!0):!1},Q.unstable_batchedUpdates=Us,Q.unstable_renderSubtreeIntoContainer=function(_,y,F,ie){if(!pm(F))throw Error(C(200));if(_==null||_._reactInternals===void 0)throw Error(C(38));return Wm(_,y,F,!1,ie)},Q.version="18.3.1-next-f1338f8080-20240426"},38751:function(H,Q,i){"use strict";var E=i(30967);if(1)Q.createRoot=E.createRoot,Q.hydrateRoot=E.hydrateRoot;else var M},30967:function(H,Q,i){"use strict";function E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E)}catch(M){console.error(M)}}E(),H.exports=i(86521)},15154:function(H){var Q=typeof Element!="undefined",i=typeof Map=="function",E=typeof Set=="function",M=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function C(n,j){if(n===j)return!0;if(n&&j&&typeof n=="object"&&typeof j=="object"){if(n.constructor!==j.constructor)return!1;var $,U,Y;if(Array.isArray(n)){if($=n.length,$!=j.length)return!1;for(U=$;U--!==0;)if(!C(n[U],j[U]))return!1;return!0}var te;if(i&&n instanceof Map&&j instanceof Map){if(n.size!==j.size)return!1;for(te=n.entries();!(U=te.next()).done;)if(!j.has(U.value[0]))return!1;for(te=n.entries();!(U=te.next()).done;)if(!C(U.value[1],j.get(U.value[0])))return!1;return!0}if(E&&n instanceof Set&&j instanceof Set){if(n.size!==j.size)return!1;for(te=n.entries();!(U=te.next()).done;)if(!j.has(U.value[0]))return!1;return!0}if(M&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(j)){if($=n.length,$!=j.length)return!1;for(U=$;U--!==0;)if(n[U]!==j[U])return!1;return!0}if(n.constructor===RegExp)return n.source===j.source&&n.flags===j.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof j.valueOf=="function")return n.valueOf()===j.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof j.toString=="function")return n.toString()===j.toString();if(Y=Object.keys(n),$=Y.length,$!==Object.keys(j).length)return!1;for(U=$;U--!==0;)if(!Object.prototype.hasOwnProperty.call(j,Y[U]))return!1;if(Q&&n instanceof Element)return!1;for(U=$;U--!==0;)if(!((Y[U]==="_owner"||Y[U]==="__v"||Y[U]==="__o")&&n.$$typeof)&&!C(n[Y[U]],j[Y[U]]))return!1;return!0}return n!==n&&j!==j}H.exports=function(j,$){try{return C(j,$)}catch(U){if((U.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw U}}},33810:function(H,Q,i){"use strict";i.d(Q,{B6:function(){return le},ql:function(){return lr}});var E=i(75271),M=i(40507),C=i.n(M),n=i(15154),j=i.n(n),$=i(53670),U=i.n($),Y=i(50631),te=i.n(Y);function X(){return X=Object.assign||function(Pe){for(var ut=1;ut<arguments.length;ut++){var Ve=arguments[ut];for(var gt in Ve)Object.prototype.hasOwnProperty.call(Ve,gt)&&(Pe[gt]=Ve[gt])}return Pe},X.apply(this,arguments)}function B(Pe,ut){Pe.prototype=Object.create(ut.prototype),Pe.prototype.constructor=Pe,K(Pe,ut)}function K(Pe,ut){return K=Object.setPrototypeOf||function(Ve,gt){return Ve.__proto__=gt,Ve},K(Pe,ut)}function de(Pe,ut){if(Pe==null)return{};var Ve,gt,Gt={},Me=Object.keys(Pe);for(gt=0;gt<Me.length;gt++)ut.indexOf(Ve=Me[gt])>=0||(Gt[Ve]=Pe[Ve]);return Gt}var he={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},J={rel:["amphtml","canonical","alternate"]},ae={type:["application/ld+json"]},se={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Ee=Object.keys(he).map(function(Pe){return he[Pe]}),Le={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ke=Object.keys(Le).reduce(function(Pe,ut){return Pe[Le[ut]]=ut,Pe},{}),ye=function(Pe,ut){for(var Ve=Pe.length-1;Ve>=0;Ve-=1){var gt=Pe[Ve];if(Object.prototype.hasOwnProperty.call(gt,ut))return gt[ut]}return null},Se=function(Pe){var ut=ye(Pe,he.TITLE),Ve=ye(Pe,"titleTemplate");if(Array.isArray(ut)&&(ut=ut.join("")),Ve&&ut)return Ve.replace(/%s/g,function(){return ut});var gt=ye(Pe,"defaultTitle");return ut||gt||void 0},be=function(Pe){return ye(Pe,"onChangeClientState")||function(){}},Ue=function(Pe,ut){return ut.filter(function(Ve){return Ve[Pe]!==void 0}).map(function(Ve){return Ve[Pe]}).reduce(function(Ve,gt){return X({},Ve,gt)},{})},qe=function(Pe,ut){return ut.filter(function(Ve){return Ve[he.BASE]!==void 0}).map(function(Ve){return Ve[he.BASE]}).reverse().reduce(function(Ve,gt){if(!Ve.length)for(var Gt=Object.keys(gt),Me=0;Me<Gt.length;Me+=1){var At=Gt[Me].toLowerCase();if(Pe.indexOf(At)!==-1&&gt[At])return Ve.concat(gt)}return Ve},[])},je=function(Pe,ut,Ve){var gt={};return Ve.filter(function(Gt){return!!Array.isArray(Gt[Pe])||(Gt[Pe]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+Pe+' should be of type "Array". Instead found type "'+typeof Gt[Pe]+'"'),!1)}).map(function(Gt){return Gt[Pe]}).reverse().reduce(function(Gt,Me){var At={};Me.filter(function(en){for(var gn,ar=Object.keys(en),Sr=0;Sr<ar.length;Sr+=1){var In=ar[Sr],Gn=In.toLowerCase();ut.indexOf(Gn)===-1||gn==="rel"&&en[gn].toLowerCase()==="canonical"||Gn==="rel"&&en[Gn].toLowerCase()==="stylesheet"||(gn=Gn),ut.indexOf(In)===-1||In!=="innerHTML"&&In!=="cssText"&&In!=="itemprop"||(gn=In)}if(!gn||!en[gn])return!1;var hn=en[gn].toLowerCase();return gt[gn]||(gt[gn]={}),At[gn]||(At[gn]={}),!gt[gn][hn]&&(At[gn][hn]=!0,!0)}).reverse().forEach(function(en){return Gt.push(en)});for(var Bt=Object.keys(At),Sn=0;Sn<Bt.length;Sn+=1){var Lt=Bt[Sn],Bn=X({},gt[Lt],At[Lt]);gt[Lt]=Bn}return Gt},[]).reverse()},nt=function(Pe,ut){if(Array.isArray(Pe)&&Pe.length){for(var Ve=0;Ve<Pe.length;Ve+=1)if(Pe[Ve][ut])return!0}return!1},Ct=function(Pe){return Array.isArray(Pe)?Pe.join(""):Pe},ft=function(Pe,ut){return Array.isArray(Pe)?Pe.reduce(function(Ve,gt){return function(Gt,Me){for(var At=Object.keys(Gt),Bt=0;Bt<At.length;Bt+=1)if(Me[At[Bt]]&&Me[At[Bt]].includes(Gt[At[Bt]]))return!0;return!1}(gt,ut)?Ve.priority.push(gt):Ve.default.push(gt),Ve},{priority:[],default:[]}):{default:Pe}},Et=function(Pe,ut){var Ve;return X({},Pe,((Ve={})[ut]=void 0,Ve))},yt=[he.NOSCRIPT,he.SCRIPT,he.STYLE],_t=function(Pe,ut){return ut===void 0&&(ut=!0),ut===!1?String(Pe):String(Pe).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},He=function(Pe){return Object.keys(Pe).reduce(function(ut,Ve){var gt=Pe[Ve]!==void 0?Ve+'="'+Pe[Ve]+'"':""+Ve;return ut?ut+" "+gt:gt},"")},bt=function(Pe,ut){return ut===void 0&&(ut={}),Object.keys(Pe).reduce(function(Ve,gt){return Ve[Le[gt]||gt]=Pe[gt],Ve},ut)},Tt=function(Pe,ut){return ut.map(function(Ve,gt){var Gt,Me=((Gt={key:gt})["data-rh"]=!0,Gt);return Object.keys(Ve).forEach(function(At){var Bt=Le[At]||At;Bt==="innerHTML"||Bt==="cssText"?Me.dangerouslySetInnerHTML={__html:Ve.innerHTML||Ve.cssText}:Me[Bt]=Ve[At]}),E.createElement(Pe,Me)})},st=function(Pe,ut,Ve){switch(Pe){case he.TITLE:return{toComponent:function(){return Gt=ut.titleAttributes,(Me={key:gt=ut.title})["data-rh"]=!0,At=bt(Gt,Me),[E.createElement(he.TITLE,At,gt)];var gt,Gt,Me,At},toString:function(){return function(gt,Gt,Me,At){var Bt=He(Me),Sn=Ct(Gt);return Bt?"<"+gt+' data-rh="true" '+Bt+">"+_t(Sn,At)+"</"+gt+">":"<"+gt+' data-rh="true">'+_t(Sn,At)+"</"+gt+">"}(Pe,ut.title,ut.titleAttributes,Ve)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return bt(ut)},toString:function(){return He(ut)}};default:return{toComponent:function(){return Tt(Pe,ut)},toString:function(){return function(gt,Gt,Me){return Gt.reduce(function(At,Bt){var Sn=Object.keys(Bt).filter(function(en){return!(en==="innerHTML"||en==="cssText")}).reduce(function(en,gn){var ar=Bt[gn]===void 0?gn:gn+'="'+_t(Bt[gn],Me)+'"';return en?en+" "+ar:ar},""),Lt=Bt.innerHTML||Bt.cssText||"",Bn=yt.indexOf(gt)===-1;return At+"<"+gt+' data-rh="true" '+Sn+(Bn?"/>":">"+Lt+"</"+gt+">")},"")}(Pe,ut,Ve)}}}},Qe=function(Pe){var ut=Pe.baseTag,Ve=Pe.bodyAttributes,gt=Pe.encode,Gt=Pe.htmlAttributes,Me=Pe.noscriptTags,At=Pe.styleTags,Bt=Pe.title,Sn=Bt===void 0?"":Bt,Lt=Pe.titleAttributes,Bn=Pe.linkTags,en=Pe.metaTags,gn=Pe.scriptTags,ar={toComponent:function(){},toString:function(){return""}};if(Pe.prioritizeSeoTags){var Sr=function(In){var Gn=In.linkTags,hn=In.scriptTags,mn=In.encode,cn=ft(In.metaTags,se),Ln=ft(Gn,J),Er=ft(hn,ae);return{priorityMethods:{toComponent:function(){return[].concat(Tt(he.META,cn.priority),Tt(he.LINK,Ln.priority),Tt(he.SCRIPT,Er.priority))},toString:function(){return st(he.META,cn.priority,mn)+" "+st(he.LINK,Ln.priority,mn)+" "+st(he.SCRIPT,Er.priority,mn)}},metaTags:cn.default,linkTags:Ln.default,scriptTags:Er.default}}(Pe);ar=Sr.priorityMethods,Bn=Sr.linkTags,en=Sr.metaTags,gn=Sr.scriptTags}return{priority:ar,base:st(he.BASE,ut,gt),bodyAttributes:st("bodyAttributes",Ve,gt),htmlAttributes:st("htmlAttributes",Gt,gt),link:st(he.LINK,Bn,gt),meta:st(he.META,en,gt),noscript:st(he.NOSCRIPT,Me,gt),script:st(he.SCRIPT,gn,gt),style:st(he.STYLE,At,gt),title:st(he.TITLE,{title:Sn,titleAttributes:Lt},gt)}},mt=[],Ht=function(Pe,ut){var Ve=this;ut===void 0&&(ut=typeof document!="undefined"),this.instances=[],this.value={setHelmet:function(gt){Ve.context.helmet=gt},helmetInstances:{get:function(){return Ve.canUseDOM?mt:Ve.instances},add:function(gt){(Ve.canUseDOM?mt:Ve.instances).push(gt)},remove:function(gt){var Gt=(Ve.canUseDOM?mt:Ve.instances).indexOf(gt);(Ve.canUseDOM?mt:Ve.instances).splice(Gt,1)}}},this.context=Pe,this.canUseDOM=ut,ut||(Pe.helmet=Qe({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},vt=E.createContext({}),ue=C().shape({setHelmet:C().func,helmetInstances:C().shape({get:C().func,add:C().func,remove:C().func})}),lt=typeof document!="undefined",le=function(Pe){function ut(Ve){var gt;return(gt=Pe.call(this,Ve)||this).helmetData=new Ht(gt.props.context,ut.canUseDOM),gt}return B(ut,Pe),ut.prototype.render=function(){return E.createElement(vt.Provider,{value:this.helmetData.value},this.props.children)},ut}(E.Component);le.canUseDOM=lt,le.propTypes={context:C().shape({helmet:C().shape()}),children:C().node.isRequired},le.defaultProps={context:{}},le.displayName="HelmetProvider";var Je=function(Pe,ut){var Ve,gt=document.head||document.querySelector(he.HEAD),Gt=gt.querySelectorAll(Pe+"[data-rh]"),Me=[].slice.call(Gt),At=[];return ut&&ut.length&&ut.forEach(function(Bt){var Sn=document.createElement(Pe);for(var Lt in Bt)Object.prototype.hasOwnProperty.call(Bt,Lt)&&(Lt==="innerHTML"?Sn.innerHTML=Bt.innerHTML:Lt==="cssText"?Sn.styleSheet?Sn.styleSheet.cssText=Bt.cssText:Sn.appendChild(document.createTextNode(Bt.cssText)):Sn.setAttribute(Lt,Bt[Lt]===void 0?"":Bt[Lt]));Sn.setAttribute("data-rh","true"),Me.some(function(Bn,en){return Ve=en,Sn.isEqualNode(Bn)})?Me.splice(Ve,1):At.push(Sn)}),Me.forEach(function(Bt){return Bt.parentNode.removeChild(Bt)}),At.forEach(function(Bt){return gt.appendChild(Bt)}),{oldTags:Me,newTags:At}},we=function(Pe,ut){var Ve=document.getElementsByTagName(Pe)[0];if(Ve){for(var gt=Ve.getAttribute("data-rh"),Gt=gt?gt.split(","):[],Me=[].concat(Gt),At=Object.keys(ut),Bt=0;Bt<At.length;Bt+=1){var Sn=At[Bt],Lt=ut[Sn]||"";Ve.getAttribute(Sn)!==Lt&&Ve.setAttribute(Sn,Lt),Gt.indexOf(Sn)===-1&&Gt.push(Sn);var Bn=Me.indexOf(Sn);Bn!==-1&&Me.splice(Bn,1)}for(var en=Me.length-1;en>=0;en-=1)Ve.removeAttribute(Me[en]);Gt.length===Me.length?Ve.removeAttribute("data-rh"):Ve.getAttribute("data-rh")!==At.join(",")&&Ve.setAttribute("data-rh",At.join(","))}},Pn=function(Pe,ut){var Ve=Pe.baseTag,gt=Pe.htmlAttributes,Gt=Pe.linkTags,Me=Pe.metaTags,At=Pe.noscriptTags,Bt=Pe.onChangeClientState,Sn=Pe.scriptTags,Lt=Pe.styleTags,Bn=Pe.title,en=Pe.titleAttributes;we(he.BODY,Pe.bodyAttributes),we(he.HTML,gt),function(In,Gn){In!==void 0&&document.title!==In&&(document.title=Ct(In)),we(he.TITLE,Gn)}(Bn,en);var gn={baseTag:Je(he.BASE,Ve),linkTags:Je(he.LINK,Gt),metaTags:Je(he.META,Me),noscriptTags:Je(he.NOSCRIPT,At),scriptTags:Je(he.SCRIPT,Sn),styleTags:Je(he.STYLE,Lt)},ar={},Sr={};Object.keys(gn).forEach(function(In){var Gn=gn[In],hn=Gn.newTags,mn=Gn.oldTags;hn.length&&(ar[In]=hn),mn.length&&(Sr[In]=gn[In].oldTags)}),ut&&ut(),Bt(Pe,ar,Sr)},Mt=null,or=function(Pe){function ut(){for(var gt,Gt=arguments.length,Me=new Array(Gt),At=0;At<Gt;At++)Me[At]=arguments[At];return(gt=Pe.call.apply(Pe,[this].concat(Me))||this).rendered=!1,gt}B(ut,Pe);var Ve=ut.prototype;return Ve.shouldComponentUpdate=function(gt){return!te()(gt,this.props)},Ve.componentDidUpdate=function(){this.emitChange()},Ve.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},Ve.emitChange=function(){var gt,Gt,Me=this.props.context,At=Me.setHelmet,Bt=null,Sn=(gt=Me.helmetInstances.get().map(function(Lt){var Bn=X({},Lt.props);return delete Bn.context,Bn}),{baseTag:qe(["href"],gt),bodyAttributes:Ue("bodyAttributes",gt),defer:ye(gt,"defer"),encode:ye(gt,"encodeSpecialCharacters"),htmlAttributes:Ue("htmlAttributes",gt),linkTags:je(he.LINK,["rel","href"],gt),metaTags:je(he.META,["name","charset","http-equiv","property","itemprop"],gt),noscriptTags:je(he.NOSCRIPT,["innerHTML"],gt),onChangeClientState:be(gt),scriptTags:je(he.SCRIPT,["src","innerHTML"],gt),styleTags:je(he.STYLE,["cssText"],gt),title:Se(gt),titleAttributes:Ue("titleAttributes",gt),prioritizeSeoTags:nt(gt,"prioritizeSeoTags")});le.canUseDOM?(Gt=Sn,Mt&&cancelAnimationFrame(Mt),Gt.defer?Mt=requestAnimationFrame(function(){Pn(Gt,function(){Mt=null})}):(Pn(Gt),Mt=null)):Qe&&(Bt=Qe(Sn)),At(Bt)},Ve.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},Ve.render=function(){return this.init(),null},ut}(E.Component);or.propTypes={context:ue.isRequired},or.displayName="HelmetDispatcher";var wr=["children"],Dr=["children"],lr=function(Pe){function ut(){return Pe.apply(this,arguments)||this}B(ut,Pe);var Ve=ut.prototype;return Ve.shouldComponentUpdate=function(gt){return!j()(Et(this.props,"helmetData"),Et(gt,"helmetData"))},Ve.mapNestedChildrenToProps=function(gt,Gt){if(!Gt)return null;switch(gt.type){case he.SCRIPT:case he.NOSCRIPT:return{innerHTML:Gt};case he.STYLE:return{cssText:Gt};default:throw new Error("<"+gt.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},Ve.flattenArrayTypeChildren=function(gt){var Gt,Me=gt.child,At=gt.arrayTypeChildren;return X({},At,((Gt={})[Me.type]=[].concat(At[Me.type]||[],[X({},gt.newChildProps,this.mapNestedChildrenToProps(Me,gt.nestedChildren))]),Gt))},Ve.mapObjectTypeChildren=function(gt){var Gt,Me,At=gt.child,Bt=gt.newProps,Sn=gt.newChildProps,Lt=gt.nestedChildren;switch(At.type){case he.TITLE:return X({},Bt,((Gt={})[At.type]=Lt,Gt.titleAttributes=X({},Sn),Gt));case he.BODY:return X({},Bt,{bodyAttributes:X({},Sn)});case he.HTML:return X({},Bt,{htmlAttributes:X({},Sn)});default:return X({},Bt,((Me={})[At.type]=X({},Sn),Me))}},Ve.mapArrayTypeChildrenToProps=function(gt,Gt){var Me=X({},Gt);return Object.keys(gt).forEach(function(At){var Bt;Me=X({},Me,((Bt={})[At]=gt[At],Bt))}),Me},Ve.warnOnInvalidChildren=function(gt,Gt){return U()(Ee.some(function(Me){return gt.type===Me}),typeof gt.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+Ee.join(", ")+" are allowed. Helmet does not support rendering <"+gt.type+"> elements. Refer to our API for more information."),U()(!Gt||typeof Gt=="string"||Array.isArray(Gt)&&!Gt.some(function(Me){return typeof Me!="string"}),"Helmet expects a string as a child of <"+gt.type+">. Did you forget to wrap your children in braces? ( <"+gt.type+">{``}</"+gt.type+"> ) Refer to our API for more information."),!0},Ve.mapChildrenToProps=function(gt,Gt){var Me=this,At={};return E.Children.forEach(gt,function(Bt){if(Bt&&Bt.props){var Sn=Bt.props,Lt=Sn.children,Bn=de(Sn,wr),en=Object.keys(Bn).reduce(function(ar,Sr){return ar[ke[Sr]||Sr]=Bn[Sr],ar},{}),gn=Bt.type;switch(typeof gn=="symbol"?gn=gn.toString():Me.warnOnInvalidChildren(Bt,Lt),gn){case he.FRAGMENT:Gt=Me.mapChildrenToProps(Lt,Gt);break;case he.LINK:case he.META:case he.NOSCRIPT:case he.SCRIPT:case he.STYLE:At=Me.flattenArrayTypeChildren({child:Bt,arrayTypeChildren:At,newChildProps:en,nestedChildren:Lt});break;default:Gt=Me.mapObjectTypeChildren({child:Bt,newProps:Gt,newChildProps:en,nestedChildren:Lt})}}}),this.mapArrayTypeChildrenToProps(At,Gt)},Ve.render=function(){var gt=this.props,Gt=gt.children,Me=de(gt,Dr),At=X({},Me),Bt=Me.helmetData;return Gt&&(At=this.mapChildrenToProps(Gt,At)),!Bt||Bt instanceof Ht||(Bt=new Ht(Bt.context,Bt.instances)),Bt?E.createElement(or,X({},At,{context:Bt.value,helmetData:void 0})):E.createElement(vt.Consumer,null,function(Sn){return E.createElement(or,X({},At,{context:Sn}))})},ut}(E.Component);lr.propTypes={base:C().object,bodyAttributes:C().object,children:C().oneOfType([C().arrayOf(C().node),C().node]),defaultTitle:C().string,defer:C().bool,encodeSpecialCharacters:C().bool,htmlAttributes:C().object,link:C().arrayOf(C().object),meta:C().arrayOf(C().object),noscript:C().arrayOf(C().object),onChangeClientState:C().func,script:C().arrayOf(C().object),style:C().arrayOf(C().object),title:C().string,titleAttributes:C().object,titleTemplate:C().string,prioritizeSeoTags:C().bool,helmetData:C().object},lr.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},lr.displayName="Helmet"},68565:function(H,Q,i){"use strict";i.d(Q,{_y:function(){return te},zt:function(){return Y}});var E=i(72535),M=i.n(E),C=i(75271);function n(B){return B.displayName||B.name||"Component"}var j=typeof window!="undefined"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=C.createContext(null)):C.createContext(null),$=j.Consumer,U=j.Provider,Y=U,te=j;function X(B,K){var de=K||{},he=de.intlPropName,J=he===void 0?"intl":he,ae=de.forwardRef,se=ae===void 0?!1:ae,Ee=de.enforceContext,Le=Ee===void 0?!0:Ee,ke=function(ye){return React.createElement($,null,function(Se){var be;Le&&invariantIntlContext(Se);var Ue=(be={},be[J]=Se,be);return React.createElement(B,__assign({},ye,Ue,{ref:se?ye.forwardedRef:null}))})};return ke.displayName="injectIntl(".concat(n(B),")"),ke.WrappedComponent=B,se?hoistNonReactStatics(React.forwardRef(function(ye,Se){return React.createElement(ke,__assign({},ye,{forwardedRef:Se}))}),B):hoistNonReactStatics(ke,B)}},22078:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return n}});var E=i(75271),M=i(93725),C=i(68565);function n(){var j=E.useContext(C._y);return(0,M.lq)(j),j}},93725:function(H,Q,i){"use strict";i.d(Q,{Z0:function(){return $},dt:function(){return U},lq:function(){return j},wU:function(){return Y}});var E=i(15767),M=i(75271),C=i(38757);function n(te,X,B){if(B===void 0&&(B=Error),!te)throw new B(X)}function j(te){n(te,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var $=(0,E.pi)((0,E.pi)({},C.Z0),{textComponent:M.Fragment});function U(te){return function(X){return te(M.Children.toArray(X))}}function Y(te,X){if(te===X)return!0;if(!te||!X)return!1;var B=Object.keys(te),K=Object.keys(X),de=B.length;if(K.length!==de)return!1;for(var he=0;he<de;he++){var J=B[he];if(te[J]!==X[J]||!Object.prototype.hasOwnProperty.call(X,J))return!1}return!0}},60198:function(H,Q){"use strict";var i=typeof Symbol=="function"&&Symbol.for,E=i?Symbol.for("react.element"):60103,M=i?Symbol.for("react.portal"):60106,C=i?Symbol.for("react.fragment"):60107,n=i?Symbol.for("react.strict_mode"):60108,j=i?Symbol.for("react.profiler"):60114,$=i?Symbol.for("react.provider"):60109,U=i?Symbol.for("react.context"):60110,Y=i?Symbol.for("react.async_mode"):60111,te=i?Symbol.for("react.concurrent_mode"):60111,X=i?Symbol.for("react.forward_ref"):60112,B=i?Symbol.for("react.suspense"):60113,K=i?Symbol.for("react.suspense_list"):60120,de=i?Symbol.for("react.memo"):60115,he=i?Symbol.for("react.lazy"):60116,J=i?Symbol.for("react.block"):60121,ae=i?Symbol.for("react.fundamental"):60117,se=i?Symbol.for("react.responder"):60118,Ee=i?Symbol.for("react.scope"):60119;function Le(ye){if(typeof ye=="object"&&ye!==null){var Se=ye.$$typeof;switch(Se){case E:switch(ye=ye.type,ye){case Y:case te:case C:case j:case n:case B:return ye;default:switch(ye=ye&&ye.$$typeof,ye){case U:case X:case he:case de:case $:return ye;default:return Se}}case M:return Se}}}function ke(ye){return Le(ye)===te}Q.AsyncMode=Y,Q.ConcurrentMode=te,Q.ContextConsumer=U,Q.ContextProvider=$,Q.Element=E,Q.ForwardRef=X,Q.Fragment=C,Q.Lazy=he,Q.Memo=de,Q.Portal=M,Q.Profiler=j,Q.StrictMode=n,Q.Suspense=B,Q.isAsyncMode=function(ye){return ke(ye)||Le(ye)===Y},Q.isConcurrentMode=ke,Q.isContextConsumer=function(ye){return Le(ye)===U},Q.isContextProvider=function(ye){return Le(ye)===$},Q.isElement=function(ye){return typeof ye=="object"&&ye!==null&&ye.$$typeof===E},Q.isForwardRef=function(ye){return Le(ye)===X},Q.isFragment=function(ye){return Le(ye)===C},Q.isLazy=function(ye){return Le(ye)===he},Q.isMemo=function(ye){return Le(ye)===de},Q.isPortal=function(ye){return Le(ye)===M},Q.isProfiler=function(ye){return Le(ye)===j},Q.isStrictMode=function(ye){return Le(ye)===n},Q.isSuspense=function(ye){return Le(ye)===B},Q.isValidElementType=function(ye){return typeof ye=="string"||typeof ye=="function"||ye===C||ye===te||ye===j||ye===n||ye===B||ye===K||typeof ye=="object"&&ye!==null&&(ye.$$typeof===he||ye.$$typeof===de||ye.$$typeof===$||ye.$$typeof===U||ye.$$typeof===X||ye.$$typeof===ae||ye.$$typeof===se||ye.$$typeof===Ee||ye.$$typeof===J)},Q.typeOf=Le},56237:function(H,Q,i){"use strict";H.exports=i(60198)},98621:function(H,Q){"use strict";var i;var E=Symbol.for("react.element"),M=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),U=Symbol.for("react.context"),Y=Symbol.for("react.server_context"),te=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),J;J=Symbol.for("react.module.reference");function ae(se){if(typeof se=="object"&&se!==null){var Ee=se.$$typeof;switch(Ee){case E:switch(se=se.type,se){case C:case j:case n:case X:case B:return se;default:switch(se=se&&se.$$typeof,se){case Y:case U:case te:case de:case K:case $:return se;default:return Ee}}case M:return Ee}}}i=U,i=$,i=E,Q.ForwardRef=te,i=C,i=de,i=K,i=M,i=j,i=n,i=X,i=B,i=function(){return!1},i=function(){return!1},i=function(se){return ae(se)===U},i=function(se){return ae(se)===$},i=function(se){return typeof se=="object"&&se!==null&&se.$$typeof===E},i=function(se){return ae(se)===te},i=function(se){return ae(se)===C},i=function(se){return ae(se)===de},Q.isMemo=function(se){return ae(se)===K},i=function(se){return ae(se)===M},i=function(se){return ae(se)===j},i=function(se){return ae(se)===n},i=function(se){return ae(se)===X},i=function(se){return ae(se)===B},i=function(se){return typeof se=="string"||typeof se=="function"||se===C||se===j||se===n||se===X||se===B||se===he||typeof se=="object"&&se!==null&&(se.$$typeof===de||se.$$typeof===K||se.$$typeof===$||se.$$typeof===U||se.$$typeof===te||se.$$typeof===J||se.getModuleId!==void 0)},i=ae},36479:function(H,Q,i){"use strict";H.exports=i(98621)},5791:function(H,Q,i){"use strict";i.d(Q,{F0:function(){return ut},Fg:function(){return Dr},Gn:function(){return X},TH:function(){return mt},UO:function(){return we},V$:function(){return Mt},WU:function(){return Pn},fp:function(){return B},j3:function(){return lr},oQ:function(){return st},pC:function(){return Je},s0:function(){return ue}});var E=i(18280),M=i(75271);const C=(0,M.createContext)(null),n=(0,M.createContext)(null),j=(0,M.createContext)({outlet:null,matches:[]});function $(Me,At){if(!Me)throw new Error(At)}function U(Me,At){if(!Me){typeof console!="undefined"&&console.warn(At);try{throw new Error(At)}catch(Bt){}}}const Y={};function te(Me,At,Bt){!At&&!Y[Me]&&(Y[Me]=!0)}function X(Me,At){return At===void 0&&(At={}),Me.replace(/:(\w+)/g,(Bt,Sn)=>(At[Sn]==null&&$(!1),At[Sn])).replace(/\/*\*$/,Bt=>At["*"]==null?"":At["*"].replace(/^\/*/,"/"))}function B(Me,At,Bt){Bt===void 0&&(Bt="/");let Sn=typeof At=="string"?(0,E.cP)(At):At,Lt=yt(Sn.pathname||"/",Bt);if(Lt==null)return null;let Bn=K(Me);de(Bn);let en=null;for(let gn=0;en==null&&gn<Bn.length;++gn)en=be(Bn[gn],Lt);return en}function K(Me,At,Bt,Sn){return At===void 0&&(At=[]),Bt===void 0&&(Bt=[]),Sn===void 0&&(Sn=""),Me.forEach((Lt,Bn)=>{let en={relativePath:Lt.path||"",caseSensitive:Lt.caseSensitive===!0,childrenIndex:Bn,route:Lt};en.relativePath.startsWith("/")&&(en.relativePath.startsWith(Sn)||$(!1),en.relativePath=en.relativePath.slice(Sn.length));let gn=_t([Sn,en.relativePath]),ar=Bt.concat(en);Lt.children&&Lt.children.length>0&&(Lt.index===!0&&$(!1),K(Lt.children,At,ar,gn)),!(Lt.path==null&&!Lt.index)&&At.push({path:gn,score:ye(gn,Lt.index),routesMeta:ar})}),At}function de(Me){Me.sort((At,Bt)=>At.score!==Bt.score?Bt.score-At.score:Se(At.routesMeta.map(Sn=>Sn.childrenIndex),Bt.routesMeta.map(Sn=>Sn.childrenIndex)))}const he=/^:\w+$/,J=3,ae=2,se=1,Ee=10,Le=-2,ke=Me=>Me==="*";function ye(Me,At){let Bt=Me.split("/"),Sn=Bt.length;return Bt.some(ke)&&(Sn+=Le),At&&(Sn+=ae),Bt.filter(Lt=>!ke(Lt)).reduce((Lt,Bn)=>Lt+(he.test(Bn)?J:Bn===""?se:Ee),Sn)}function Se(Me,At){return Me.length===At.length&&Me.slice(0,-1).every((Sn,Lt)=>Sn===At[Lt])?Me[Me.length-1]-At[At.length-1]:0}function be(Me,At){let{routesMeta:Bt}=Me,Sn={},Lt="/",Bn=[];for(let en=0;en<Bt.length;++en){let gn=Bt[en],ar=en===Bt.length-1,Sr=Lt==="/"?At:At.slice(Lt.length)||"/",In=Ue({path:gn.relativePath,caseSensitive:gn.caseSensitive,end:ar},Sr);if(!In)return null;Object.assign(Sn,In.params);let Gn=gn.route;Bn.push({params:Sn,pathname:_t([Lt,In.pathname]),pathnameBase:He(_t([Lt,In.pathnameBase])),route:Gn}),In.pathnameBase!=="/"&&(Lt=_t([Lt,In.pathnameBase]))}return Bn}function Ue(Me,At){typeof Me=="string"&&(Me={path:Me,caseSensitive:!1,end:!0});let[Bt,Sn]=qe(Me.path,Me.caseSensitive,Me.end),Lt=At.match(Bt);if(!Lt)return null;let Bn=Lt[0],en=Bn.replace(/(.)\/+$/,"$1"),gn=Lt.slice(1);return{params:Sn.reduce((Sr,In,Gn)=>{if(In==="*"){let hn=gn[Gn]||"";en=Bn.slice(0,Bn.length-hn.length).replace(/(.)\/+$/,"$1")}return Sr[In]=je(gn[Gn]||"",In),Sr},{}),pathname:Bn,pathnameBase:en,pattern:Me}}function qe(Me,At,Bt){At===void 0&&(At=!1),Bt===void 0&&(Bt=!0);let Sn=[],Lt="^"+Me.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(en,gn)=>(Sn.push(gn),"([^\\/]+)"));return Me.endsWith("*")?(Sn.push("*"),Lt+=Me==="*"||Me==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Lt+=Bt?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(Lt,At?void 0:"i"),Sn]}function je(Me,At){try{return decodeURIComponent(Me)}catch(Bt){return Me}}function nt(Me,At){At===void 0&&(At="/");let{pathname:Bt,search:Sn="",hash:Lt=""}=typeof Me=="string"?(0,E.cP)(Me):Me;return{pathname:Bt?Bt.startsWith("/")?Bt:Ct(Bt,At):At,search:bt(Sn),hash:Tt(Lt)}}function Ct(Me,At){let Bt=At.replace(/\/+$/,"").split("/");return Me.split("/").forEach(Lt=>{Lt===".."?Bt.length>1&&Bt.pop():Lt!=="."&&Bt.push(Lt)}),Bt.length>1?Bt.join("/"):"/"}function ft(Me,At,Bt){let Sn=typeof Me=="string"?(0,E.cP)(Me):Me,Lt=Me===""||Sn.pathname===""?"/":Sn.pathname,Bn;if(Lt==null)Bn=Bt;else{let gn=At.length-1;if(Lt.startsWith("..")){let ar=Lt.split("/");for(;ar[0]==="..";)ar.shift(),gn-=1;Sn.pathname=ar.join("/")}Bn=gn>=0?At[gn]:"/"}let en=nt(Sn,Bn);return Lt&&Lt!=="/"&&Lt.endsWith("/")&&!en.pathname.endsWith("/")&&(en.pathname+="/"),en}function Et(Me){return Me===""||Me.pathname===""?"/":typeof Me=="string"?(0,E.cP)(Me).pathname:Me.pathname}function yt(Me,At){if(At==="/")return Me;if(!Me.toLowerCase().startsWith(At.toLowerCase()))return null;let Bt=Me.charAt(At.length);return Bt&&Bt!=="/"?null:Me.slice(At.length)||"/"}const _t=Me=>Me.join("/").replace(/\/\/+/g,"/"),He=Me=>Me.replace(/\/+$/,"").replace(/^\/*/,"/"),bt=Me=>!Me||Me==="?"?"":Me.startsWith("?")?Me:"?"+Me,Tt=Me=>!Me||Me==="#"?"":Me.startsWith("#")?Me:"#"+Me;function st(Me){Qe()||$(!1);let{basename:At,navigator:Bt}=(0,M.useContext)(C),{hash:Sn,pathname:Lt,search:Bn}=Pn(Me),en=Lt;if(At!=="/"){let gn=Et(Me),ar=gn!=null&&gn.endsWith("/");en=Lt==="/"?At+(ar?"/":""):_t([At,Lt])}return Bt.createHref({pathname:en,search:Bn,hash:Sn})}function Qe(){return(0,M.useContext)(n)!=null}function mt(){return Qe()||$(!1),(0,M.useContext)(n).location}function Ht(){return useContext(n).navigationType}function vt(Me){Qe()||$(!1);let{pathname:At}=mt();return useMemo(()=>Ue(Me,At),[At,Me])}function ue(){Qe()||$(!1);let{basename:Me,navigator:At}=(0,M.useContext)(C),{matches:Bt}=(0,M.useContext)(j),{pathname:Sn}=mt(),Lt=JSON.stringify(Bt.map(gn=>gn.pathnameBase)),Bn=(0,M.useRef)(!1);return(0,M.useEffect)(()=>{Bn.current=!0}),(0,M.useCallback)(function(gn,ar){if(ar===void 0&&(ar={}),!Bn.current)return;if(typeof gn=="number"){At.go(gn);return}let Sr=ft(gn,JSON.parse(Lt),Sn);Me!=="/"&&(Sr.pathname=_t([Me,Sr.pathname])),(ar.replace?At.replace:At.push)(Sr,ar.state)},[Me,At,Lt,Sn])}const lt=(0,M.createContext)(null);function le(){return useContext(lt)}function Je(Me){let At=(0,M.useContext)(j).outlet;return At&&(0,M.createElement)(lt.Provider,{value:Me},At)}function we(){let{matches:Me}=(0,M.useContext)(j),At=Me[Me.length-1];return At?At.params:{}}function Pn(Me){let{matches:At}=(0,M.useContext)(j),{pathname:Bt}=mt(),Sn=JSON.stringify(At.map(Lt=>Lt.pathnameBase));return(0,M.useMemo)(()=>ft(Me,JSON.parse(Sn),Bt),[Me,Sn,Bt])}function Mt(Me,At){Qe()||$(!1);let{matches:Bt}=(0,M.useContext)(j),Sn=Bt[Bt.length-1],Lt=Sn?Sn.params:{},Bn=Sn?Sn.pathname:"/",en=Sn?Sn.pathnameBase:"/",gn=Sn&&Sn.route,ar=mt(),Sr;if(At){var In;let cn=typeof At=="string"?(0,E.cP)(At):At;en==="/"||(In=cn.pathname)!=null&&In.startsWith(en)||$(!1),Sr=cn}else Sr=ar;let Gn=Sr.pathname||"/",hn=en==="/"?Gn:Gn.slice(en.length)||"/",mn=B(Me,{pathname:hn});return or(mn&&mn.map(cn=>Object.assign({},cn,{params:Object.assign({},Lt,cn.params),pathname:_t([en,cn.pathname]),pathnameBase:cn.pathnameBase==="/"?en:_t([en,cn.pathnameBase])})),Bt)}function or(Me,At){return At===void 0&&(At=[]),Me==null?null:Me.reduceRight((Bt,Sn,Lt)=>(0,M.createElement)(j.Provider,{children:Sn.route.element!==void 0?Sn.route.element:Bt,value:{outlet:Bt,matches:At.concat(Me.slice(0,Lt+1))}}),null)}function wr(Me){let{basename:At,children:Bt,initialEntries:Sn,initialIndex:Lt}=Me,Bn=useRef();Bn.current==null&&(Bn.current=createMemoryHistory({initialEntries:Sn,initialIndex:Lt}));let en=Bn.current,[gn,ar]=useState({action:en.action,location:en.location});return useLayoutEffect(()=>en.listen(ar),[en]),createElement(ut,{basename:At,children:Bt,location:gn.location,navigationType:gn.action,navigator:en})}function Dr(Me){let{to:At,replace:Bt,state:Sn}=Me;Qe()||$(!1);let Lt=ue();return(0,M.useEffect)(()=>{Lt(At,{replace:Bt,state:Sn})}),null}function lr(Me){return Je(Me.context)}function Pe(Me){$(!1)}function ut(Me){let{basename:At="/",children:Bt=null,location:Sn,navigationType:Lt=E.aU.Pop,navigator:Bn,static:en=!1}=Me;Qe()&&$(!1);let gn=He(At),ar=(0,M.useMemo)(()=>({basename:gn,navigator:Bn,static:en}),[gn,Bn,en]);typeof Sn=="string"&&(Sn=(0,E.cP)(Sn));let{pathname:Sr="/",search:In="",hash:Gn="",state:hn=null,key:mn="default"}=Sn,cn=(0,M.useMemo)(()=>{let Ln=yt(Sr,gn);return Ln==null?null:{pathname:Ln,search:In,hash:Gn,state:hn,key:mn}},[gn,Sr,In,Gn,hn,mn]);return cn==null?null:(0,M.createElement)(C.Provider,{value:ar},(0,M.createElement)(n.Provider,{children:Bt,value:{location:cn,navigationType:Lt}}))}function Ve(Me){let{children:At,location:Bt}=Me;return Mt(gt(At),Bt)}function gt(Me){let At=[];return Children.forEach(Me,Bt=>{if(!isValidElement(Bt))return;if(Bt.type===Fragment){At.push.apply(At,gt(Bt.props.children));return}Bt.type!==Pe&&$(!1);let Sn={caseSensitive:Bt.props.caseSensitive,element:Bt.props.element,index:Bt.props.index,path:Bt.props.path};Bt.props.children&&(Sn.children=gt(Bt.props.children)),At.push(Sn)}),At}function Gt(Me){return or(Me)}},38193:function(H,Q,i){"use strict";var E=i(75271),M=Symbol.for("react.element"),C=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,j=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function U(Y,te,X){var B,K={},de=null,he=null;X!==void 0&&(de=""+X),te.key!==void 0&&(de=""+te.key),te.ref!==void 0&&(he=te.ref);for(B in te)n.call(te,B)&&!$.hasOwnProperty(B)&&(K[B]=te[B]);if(Y&&Y.defaultProps)for(B in te=Y.defaultProps,te)K[B]===void 0&&(K[B]=te[B]);return{$$typeof:M,type:Y,key:de,ref:he,props:K,_owner:j.current}}Q.Fragment=C,Q.jsx=U,Q.jsxs=U},47596:function(H,Q){"use strict";var i=Symbol.for("react.element"),E=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),$=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),te=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),B=Symbol.iterator;function K(Qe){return Qe===null||typeof Qe!="object"?null:(Qe=B&&Qe[B]||Qe["@@iterator"],typeof Qe=="function"?Qe:null)}var de={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},he=Object.assign,J={};function ae(Qe,mt,Ht){this.props=Qe,this.context=mt,this.refs=J,this.updater=Ht||de}ae.prototype.isReactComponent={},ae.prototype.setState=function(Qe,mt){if(typeof Qe!="object"&&typeof Qe!="function"&&Qe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Qe,mt,"setState")},ae.prototype.forceUpdate=function(Qe){this.updater.enqueueForceUpdate(this,Qe,"forceUpdate")};function se(){}se.prototype=ae.prototype;function Ee(Qe,mt,Ht){this.props=Qe,this.context=mt,this.refs=J,this.updater=Ht||de}var Le=Ee.prototype=new se;Le.constructor=Ee,he(Le,ae.prototype),Le.isPureReactComponent=!0;var ke=Array.isArray,ye=Object.prototype.hasOwnProperty,Se={current:null},be={key:!0,ref:!0,__self:!0,__source:!0};function Ue(Qe,mt,Ht){var vt,ue={},lt=null,le=null;if(mt!=null)for(vt in mt.ref!==void 0&&(le=mt.ref),mt.key!==void 0&&(lt=""+mt.key),mt)ye.call(mt,vt)&&!be.hasOwnProperty(vt)&&(ue[vt]=mt[vt]);var Je=arguments.length-2;if(Je===1)ue.children=Ht;else if(1<Je){for(var we=Array(Je),Pn=0;Pn<Je;Pn++)we[Pn]=arguments[Pn+2];ue.children=we}if(Qe&&Qe.defaultProps)for(vt in Je=Qe.defaultProps,Je)ue[vt]===void 0&&(ue[vt]=Je[vt]);return{$$typeof:i,type:Qe,key:lt,ref:le,props:ue,_owner:Se.current}}function qe(Qe,mt){return{$$typeof:i,type:Qe.type,key:mt,ref:Qe.ref,props:Qe.props,_owner:Qe._owner}}function je(Qe){return typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===i}function nt(Qe){var mt={"=":"=0",":":"=2"};return"$"+Qe.replace(/[=:]/g,function(Ht){return mt[Ht]})}var Ct=/\/+/g;function ft(Qe,mt){return typeof Qe=="object"&&Qe!==null&&Qe.key!=null?nt(""+Qe.key):mt.toString(36)}function Et(Qe,mt,Ht,vt,ue){var lt=typeof Qe;(lt==="undefined"||lt==="boolean")&&(Qe=null);var le=!1;if(Qe===null)le=!0;else switch(lt){case"string":case"number":le=!0;break;case"object":switch(Qe.$$typeof){case i:case E:le=!0}}if(le)return le=Qe,ue=ue(le),Qe=vt===""?"."+ft(le,0):vt,ke(ue)?(Ht="",Qe!=null&&(Ht=Qe.replace(Ct,"$&/")+"/"),Et(ue,mt,Ht,"",function(Pn){return Pn})):ue!=null&&(je(ue)&&(ue=qe(ue,Ht+(!ue.key||le&&le.key===ue.key?"":(""+ue.key).replace(Ct,"$&/")+"/")+Qe)),mt.push(ue)),1;if(le=0,vt=vt===""?".":vt+":",ke(Qe))for(var Je=0;Je<Qe.length;Je++){lt=Qe[Je];var we=vt+ft(lt,Je);le+=Et(lt,mt,Ht,we,ue)}else if(we=K(Qe),typeof we=="function")for(Qe=we.call(Qe),Je=0;!(lt=Qe.next()).done;)lt=lt.value,we=vt+ft(lt,Je++),le+=Et(lt,mt,Ht,we,ue);else if(lt==="object")throw mt=String(Qe),Error("Objects are not valid as a React child (found: "+(mt==="[object Object]"?"object with keys {"+Object.keys(Qe).join(", ")+"}":mt)+"). If you meant to render a collection of children, use an array instead.");return le}function yt(Qe,mt,Ht){if(Qe==null)return Qe;var vt=[],ue=0;return Et(Qe,vt,"","",function(lt){return mt.call(Ht,lt,ue++)}),vt}function _t(Qe){if(Qe._status===-1){var mt=Qe._result;mt=mt(),mt.then(function(Ht){(Qe._status===0||Qe._status===-1)&&(Qe._status=1,Qe._result=Ht)},function(Ht){(Qe._status===0||Qe._status===-1)&&(Qe._status=2,Qe._result=Ht)}),Qe._status===-1&&(Qe._status=0,Qe._result=mt)}if(Qe._status===1)return Qe._result.default;throw Qe._result}var He={current:null},bt={transition:null},Tt={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:bt,ReactCurrentOwner:Se};function st(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:yt,forEach:function(Qe,mt,Ht){yt(Qe,function(){mt.apply(this,arguments)},Ht)},count:function(Qe){var mt=0;return yt(Qe,function(){mt++}),mt},toArray:function(Qe){return yt(Qe,function(mt){return mt})||[]},only:function(Qe){if(!je(Qe))throw Error("React.Children.only expected to receive a single React element child.");return Qe}},Q.Component=ae,Q.Fragment=M,Q.Profiler=n,Q.PureComponent=Ee,Q.StrictMode=C,Q.Suspense=Y,Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tt,Q.act=st,Q.cloneElement=function(Qe,mt,Ht){if(Qe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Qe+".");var vt=he({},Qe.props),ue=Qe.key,lt=Qe.ref,le=Qe._owner;if(mt!=null){if(mt.ref!==void 0&&(lt=mt.ref,le=Se.current),mt.key!==void 0&&(ue=""+mt.key),Qe.type&&Qe.type.defaultProps)var Je=Qe.type.defaultProps;for(we in mt)ye.call(mt,we)&&!be.hasOwnProperty(we)&&(vt[we]=mt[we]===void 0&&Je!==void 0?Je[we]:mt[we])}var we=arguments.length-2;if(we===1)vt.children=Ht;else if(1<we){Je=Array(we);for(var Pn=0;Pn<we;Pn++)Je[Pn]=arguments[Pn+2];vt.children=Je}return{$$typeof:i,type:Qe.type,key:ue,ref:lt,props:vt,_owner:le}},Q.createContext=function(Qe){return Qe={$$typeof:$,_currentValue:Qe,_currentValue2:Qe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Qe.Provider={$$typeof:j,_context:Qe},Qe.Consumer=Qe},Q.createElement=Ue,Q.createFactory=function(Qe){var mt=Ue.bind(null,Qe);return mt.type=Qe,mt},Q.createRef=function(){return{current:null}},Q.forwardRef=function(Qe){return{$$typeof:U,render:Qe}},Q.isValidElement=je,Q.lazy=function(Qe){return{$$typeof:X,_payload:{_status:-1,_result:Qe},_init:_t}},Q.memo=function(Qe,mt){return{$$typeof:te,type:Qe,compare:mt===void 0?null:mt}},Q.startTransition=function(Qe){var mt=bt.transition;bt.transition={};try{Qe()}finally{bt.transition=mt}},Q.unstable_act=st,Q.useCallback=function(Qe,mt){return He.current.useCallback(Qe,mt)},Q.useContext=function(Qe){return He.current.useContext(Qe)},Q.useDebugValue=function(){},Q.useDeferredValue=function(Qe){return He.current.useDeferredValue(Qe)},Q.useEffect=function(Qe,mt){return He.current.useEffect(Qe,mt)},Q.useId=function(){return He.current.useId()},Q.useImperativeHandle=function(Qe,mt,Ht){return He.current.useImperativeHandle(Qe,mt,Ht)},Q.useInsertionEffect=function(Qe,mt){return He.current.useInsertionEffect(Qe,mt)},Q.useLayoutEffect=function(Qe,mt){return He.current.useLayoutEffect(Qe,mt)},Q.useMemo=function(Qe,mt){return He.current.useMemo(Qe,mt)},Q.useReducer=function(Qe,mt,Ht){return He.current.useReducer(Qe,mt,Ht)},Q.useRef=function(Qe){return He.current.useRef(Qe)},Q.useState=function(Qe){return He.current.useState(Qe)},Q.useSyncExternalStore=function(Qe,mt,Ht){return He.current.useSyncExternalStore(Qe,mt,Ht)},Q.useTransition=function(){return He.current.useTransition()},Q.version="18.3.1"},75271:function(H,Q,i){"use strict";H.exports=i(47596)},52676:function(H,Q,i){"use strict";H.exports=i(38193)},90250:function(H){var Q=function(i){"use strict";var E=Object.prototype,M=E.hasOwnProperty,C=Object.defineProperty||function(He,bt,Tt){He[bt]=Tt.value},n,j=typeof Symbol=="function"?Symbol:{},$=j.iterator||"@@iterator",U=j.asyncIterator||"@@asyncIterator",Y=j.toStringTag||"@@toStringTag";function te(He,bt,Tt){return Object.defineProperty(He,bt,{value:Tt,enumerable:!0,configurable:!0,writable:!0}),He[bt]}try{te({},"")}catch(He){te=function(bt,Tt,st){return bt[Tt]=st}}function X(He,bt,Tt,st){var Qe=bt&&bt.prototype instanceof se?bt:se,mt=Object.create(Qe.prototype),Ht=new Et(st||[]);return C(mt,"_invoke",{value:je(He,Tt,Ht)}),mt}i.wrap=X;function B(He,bt,Tt){try{return{type:"normal",arg:He.call(bt,Tt)}}catch(st){return{type:"throw",arg:st}}}var K="suspendedStart",de="suspendedYield",he="executing",J="completed",ae={};function se(){}function Ee(){}function Le(){}var ke={};te(ke,$,function(){return this});var ye=Object.getPrototypeOf,Se=ye&&ye(ye(yt([])));Se&&Se!==E&&M.call(Se,$)&&(ke=Se);var be=Le.prototype=se.prototype=Object.create(ke);Ee.prototype=Le,C(be,"constructor",{value:Le,configurable:!0}),C(Le,"constructor",{value:Ee,configurable:!0}),Ee.displayName=te(Le,Y,"GeneratorFunction");function Ue(He){["next","throw","return"].forEach(function(bt){te(He,bt,function(Tt){return this._invoke(bt,Tt)})})}i.isGeneratorFunction=function(He){var bt=typeof He=="function"&&He.constructor;return bt?bt===Ee||(bt.displayName||bt.name)==="GeneratorFunction":!1},i.mark=function(He){return Object.setPrototypeOf?Object.setPrototypeOf(He,Le):(He.__proto__=Le,te(He,Y,"GeneratorFunction")),He.prototype=Object.create(be),He},i.awrap=function(He){return{__await:He}};function qe(He,bt){function Tt(mt,Ht,vt,ue){var lt=B(He[mt],He,Ht);if(lt.type==="throw")ue(lt.arg);else{var le=lt.arg,Je=le.value;return Je&&typeof Je=="object"&&M.call(Je,"__await")?bt.resolve(Je.__await).then(function(we){Tt("next",we,vt,ue)},function(we){Tt("throw",we,vt,ue)}):bt.resolve(Je).then(function(we){le.value=we,vt(le)},function(we){return Tt("throw",we,vt,ue)})}}var st;function Qe(mt,Ht){function vt(){return new bt(function(ue,lt){Tt(mt,Ht,ue,lt)})}return st=st?st.then(vt,vt):vt()}C(this,"_invoke",{value:Qe})}Ue(qe.prototype),te(qe.prototype,U,function(){return this}),i.AsyncIterator=qe,i.async=function(He,bt,Tt,st,Qe){Qe===void 0&&(Qe=Promise);var mt=new qe(X(He,bt,Tt,st),Qe);return i.isGeneratorFunction(bt)?mt:mt.next().then(function(Ht){return Ht.done?Ht.value:mt.next()})};function je(He,bt,Tt){var st=K;return function(mt,Ht){if(st===he)throw new Error("Generator is already running");if(st===J){if(mt==="throw")throw Ht;return _t()}for(Tt.method=mt,Tt.arg=Ht;;){var vt=Tt.delegate;if(vt){var ue=nt(vt,Tt);if(ue){if(ue===ae)continue;return ue}}if(Tt.method==="next")Tt.sent=Tt._sent=Tt.arg;else if(Tt.method==="throw"){if(st===K)throw st=J,Tt.arg;Tt.dispatchException(Tt.arg)}else Tt.method==="return"&&Tt.abrupt("return",Tt.arg);st=he;var lt=B(He,bt,Tt);if(lt.type==="normal"){if(st=Tt.done?J:de,lt.arg===ae)continue;return{value:lt.arg,done:Tt.done}}else lt.type==="throw"&&(st=J,Tt.method="throw",Tt.arg=lt.arg)}}}function nt(He,bt){var Tt=bt.method,st=He.iterator[Tt];if(st===n)return bt.delegate=null,Tt==="throw"&&He.iterator.return&&(bt.method="return",bt.arg=n,nt(He,bt),bt.method==="throw")||Tt!=="return"&&(bt.method="throw",bt.arg=new TypeError("The iterator does not provide a '"+Tt+"' method")),ae;var Qe=B(st,He.iterator,bt.arg);if(Qe.type==="throw")return bt.method="throw",bt.arg=Qe.arg,bt.delegate=null,ae;var mt=Qe.arg;if(!mt)return bt.method="throw",bt.arg=new TypeError("iterator result is not an object"),bt.delegate=null,ae;if(mt.done)bt[He.resultName]=mt.value,bt.next=He.nextLoc,bt.method!=="return"&&(bt.method="next",bt.arg=n);else return mt;return bt.delegate=null,ae}Ue(be),te(be,Y,"Generator"),te(be,$,function(){return this}),te(be,"toString",function(){return"[object Generator]"});function Ct(He){var bt={tryLoc:He[0]};1 in He&&(bt.catchLoc=He[1]),2 in He&&(bt.finallyLoc=He[2],bt.afterLoc=He[3]),this.tryEntries.push(bt)}function ft(He){var bt=He.completion||{};bt.type="normal",delete bt.arg,He.completion=bt}function Et(He){this.tryEntries=[{tryLoc:"root"}],He.forEach(Ct,this),this.reset(!0)}i.keys=function(He){var bt=Object(He),Tt=[];for(var st in bt)Tt.push(st);return Tt.reverse(),function Qe(){for(;Tt.length;){var mt=Tt.pop();if(mt in bt)return Qe.value=mt,Qe.done=!1,Qe}return Qe.done=!0,Qe}};function yt(He){if(He){var bt=He[$];if(bt)return bt.call(He);if(typeof He.next=="function")return He;if(!isNaN(He.length)){var Tt=-1,st=function Qe(){for(;++Tt<He.length;)if(M.call(He,Tt))return Qe.value=He[Tt],Qe.done=!1,Qe;return Qe.value=n,Qe.done=!0,Qe};return st.next=st}}return{next:_t}}i.values=yt;function _t(){return{value:n,done:!0}}return Et.prototype={constructor:Et,reset:function(He){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(ft),!He)for(var bt in this)bt.charAt(0)==="t"&&M.call(this,bt)&&!isNaN(+bt.slice(1))&&(this[bt]=n)},stop:function(){this.done=!0;var He=this.tryEntries[0],bt=He.completion;if(bt.type==="throw")throw bt.arg;return this.rval},dispatchException:function(He){if(this.done)throw He;var bt=this;function Tt(ue,lt){return mt.type="throw",mt.arg=He,bt.next=ue,lt&&(bt.method="next",bt.arg=n),!!lt}for(var st=this.tryEntries.length-1;st>=0;--st){var Qe=this.tryEntries[st],mt=Qe.completion;if(Qe.tryLoc==="root")return Tt("end");if(Qe.tryLoc<=this.prev){var Ht=M.call(Qe,"catchLoc"),vt=M.call(Qe,"finallyLoc");if(Ht&&vt){if(this.prev<Qe.catchLoc)return Tt(Qe.catchLoc,!0);if(this.prev<Qe.finallyLoc)return Tt(Qe.finallyLoc)}else if(Ht){if(this.prev<Qe.catchLoc)return Tt(Qe.catchLoc,!0)}else if(vt){if(this.prev<Qe.finallyLoc)return Tt(Qe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(He,bt){for(var Tt=this.tryEntries.length-1;Tt>=0;--Tt){var st=this.tryEntries[Tt];if(st.tryLoc<=this.prev&&M.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var Qe=st;break}}Qe&&(He==="break"||He==="continue")&&Qe.tryLoc<=bt&&bt<=Qe.finallyLoc&&(Qe=null);var mt=Qe?Qe.completion:{};return mt.type=He,mt.arg=bt,Qe?(this.method="next",this.next=Qe.finallyLoc,ae):this.complete(mt)},complete:function(He,bt){if(He.type==="throw")throw He.arg;return He.type==="break"||He.type==="continue"?this.next=He.arg:He.type==="return"?(this.rval=this.arg=He.arg,this.method="return",this.next="end"):He.type==="normal"&&bt&&(this.next=bt),ae},finish:function(He){for(var bt=this.tryEntries.length-1;bt>=0;--bt){var Tt=this.tryEntries[bt];if(Tt.finallyLoc===He)return this.complete(Tt.completion,Tt.afterLoc),ft(Tt),ae}},catch:function(He){for(var bt=this.tryEntries.length-1;bt>=0;--bt){var Tt=this.tryEntries[bt];if(Tt.tryLoc===He){var st=Tt.completion;if(st.type==="throw"){var Qe=st.arg;ft(Tt)}return Qe}}throw new Error("illegal catch attempt")},delegateYield:function(He,bt,Tt){return this.delegate={iterator:yt(He),resultName:bt,nextLoc:Tt},this.method==="next"&&(this.arg=n),ae}},i}(H.exports);try{regeneratorRuntime=Q}catch(i){typeof globalThis=="object"?globalThis.regeneratorRuntime=Q:Function("r","regeneratorRuntime = r")(Q)}},73023:function(H,Q,i){"use strict";var E=function(){if(typeof Map!="undefined")return Map;function Et(yt,_t){var He=-1;return yt.some(function(bt,Tt){return bt[0]===_t?(He=Tt,!0):!1}),He}return function(){function yt(){this.__entries__=[]}return Object.defineProperty(yt.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),yt.prototype.get=function(_t){var He=Et(this.__entries__,_t),bt=this.__entries__[He];return bt&&bt[1]},yt.prototype.set=function(_t,He){var bt=Et(this.__entries__,_t);~bt?this.__entries__[bt][1]=He:this.__entries__.push([_t,He])},yt.prototype.delete=function(_t){var He=this.__entries__,bt=Et(He,_t);~bt&&He.splice(bt,1)},yt.prototype.has=function(_t){return!!~Et(this.__entries__,_t)},yt.prototype.clear=function(){this.__entries__.splice(0)},yt.prototype.forEach=function(_t,He){He===void 0&&(He=null);for(var bt=0,Tt=this.__entries__;bt<Tt.length;bt++){var st=Tt[bt];_t.call(He,st[1],st[0])}},yt}()}(),M=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,C=function(){return typeof i.g!="undefined"&&i.g.Math===Math?i.g:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),n=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(C):function(Et){return setTimeout(function(){return Et(Date.now())},1e3/60)}}(),j=2;function $(Et,yt){var _t=!1,He=!1,bt=0;function Tt(){_t&&(_t=!1,Et()),He&&Qe()}function st(){n(Tt)}function Qe(){var mt=Date.now();if(_t){if(mt-bt<j)return;He=!0}else _t=!0,He=!1,setTimeout(st,yt);bt=mt}return Qe}var U=20,Y=["top","right","bottom","left","width","height","size","weight"],te=typeof MutationObserver!="undefined",X=function(){function Et(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=$(this.refresh.bind(this),U)}return Et.prototype.addObserver=function(yt){~this.observers_.indexOf(yt)||this.observers_.push(yt),this.connected_||this.connect_()},Et.prototype.removeObserver=function(yt){var _t=this.observers_,He=_t.indexOf(yt);~He&&_t.splice(He,1),!_t.length&&this.connected_&&this.disconnect_()},Et.prototype.refresh=function(){var yt=this.updateObservers_();yt&&this.refresh()},Et.prototype.updateObservers_=function(){var yt=this.observers_.filter(function(_t){return _t.gatherActive(),_t.hasActive()});return yt.forEach(function(_t){return _t.broadcastActive()}),yt.length>0},Et.prototype.connect_=function(){!M||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),te?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Et.prototype.disconnect_=function(){!M||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Et.prototype.onTransitionEnd_=function(yt){var _t=yt.propertyName,He=_t===void 0?"":_t,bt=Y.some(function(Tt){return!!~He.indexOf(Tt)});bt&&this.refresh()},Et.getInstance=function(){return this.instance_||(this.instance_=new Et),this.instance_},Et.instance_=null,Et}(),B=function(Et,yt){for(var _t=0,He=Object.keys(yt);_t<He.length;_t++){var bt=He[_t];Object.defineProperty(Et,bt,{value:yt[bt],enumerable:!1,writable:!1,configurable:!0})}return Et},K=function(Et){var yt=Et&&Et.ownerDocument&&Et.ownerDocument.defaultView;return yt||C},de=be(0,0,0,0);function he(Et){return parseFloat(Et)||0}function J(Et){for(var yt=[],_t=1;_t<arguments.length;_t++)yt[_t-1]=arguments[_t];return yt.reduce(function(He,bt){var Tt=Et["border-"+bt+"-width"];return He+he(Tt)},0)}function ae(Et){for(var yt=["top","right","bottom","left"],_t={},He=0,bt=yt;He<bt.length;He++){var Tt=bt[He],st=Et["padding-"+Tt];_t[Tt]=he(st)}return _t}function se(Et){var yt=Et.getBBox();return be(0,0,yt.width,yt.height)}function Ee(Et){var yt=Et.clientWidth,_t=Et.clientHeight;if(!yt&&!_t)return de;var He=K(Et).getComputedStyle(Et),bt=ae(He),Tt=bt.left+bt.right,st=bt.top+bt.bottom,Qe=he(He.width),mt=he(He.height);if(He.boxSizing==="border-box"&&(Math.round(Qe+Tt)!==yt&&(Qe-=J(He,"left","right")+Tt),Math.round(mt+st)!==_t&&(mt-=J(He,"top","bottom")+st)),!ke(Et)){var Ht=Math.round(Qe+Tt)-yt,vt=Math.round(mt+st)-_t;Math.abs(Ht)!==1&&(Qe-=Ht),Math.abs(vt)!==1&&(mt-=vt)}return be(bt.left,bt.top,Qe,mt)}var Le=function(){return typeof SVGGraphicsElement!="undefined"?function(Et){return Et instanceof K(Et).SVGGraphicsElement}:function(Et){return Et instanceof K(Et).SVGElement&&typeof Et.getBBox=="function"}}();function ke(Et){return Et===K(Et).document.documentElement}function ye(Et){return M?Le(Et)?se(Et):Ee(Et):de}function Se(Et){var yt=Et.x,_t=Et.y,He=Et.width,bt=Et.height,Tt=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,st=Object.create(Tt.prototype);return B(st,{x:yt,y:_t,width:He,height:bt,top:_t,right:yt+He,bottom:bt+_t,left:yt}),st}function be(Et,yt,_t,He){return{x:Et,y:yt,width:_t,height:He}}var Ue=function(){function Et(yt){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=be(0,0,0,0),this.target=yt}return Et.prototype.isActive=function(){var yt=ye(this.target);return this.contentRect_=yt,yt.width!==this.broadcastWidth||yt.height!==this.broadcastHeight},Et.prototype.broadcastRect=function(){var yt=this.contentRect_;return this.broadcastWidth=yt.width,this.broadcastHeight=yt.height,yt},Et}(),qe=function(){function Et(yt,_t){var He=Se(_t);B(this,{target:yt,contentRect:He})}return Et}(),je=function(){function Et(yt,_t,He){if(this.activeObservations_=[],this.observations_=new E,typeof yt!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=yt,this.controller_=_t,this.callbackCtx_=He}return Et.prototype.observe=function(yt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(yt instanceof K(yt).Element))throw new TypeError('parameter 1 is not of type "Element".');var _t=this.observations_;_t.has(yt)||(_t.set(yt,new Ue(yt)),this.controller_.addObserver(this),this.controller_.refresh())}},Et.prototype.unobserve=function(yt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(yt instanceof K(yt).Element))throw new TypeError('parameter 1 is not of type "Element".');var _t=this.observations_;_t.has(yt)&&(_t.delete(yt),_t.size||this.controller_.removeObserver(this))}},Et.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Et.prototype.gatherActive=function(){var yt=this;this.clearActive(),this.observations_.forEach(function(_t){_t.isActive()&&yt.activeObservations_.push(_t)})},Et.prototype.broadcastActive=function(){if(this.hasActive()){var yt=this.callbackCtx_,_t=this.activeObservations_.map(function(He){return new qe(He.target,He.broadcastRect())});this.callback_.call(yt,_t,yt),this.clearActive()}},Et.prototype.clearActive=function(){this.activeObservations_.splice(0)},Et.prototype.hasActive=function(){return this.activeObservations_.length>0},Et}(),nt=typeof WeakMap!="undefined"?new WeakMap:new E,Ct=function(){function Et(yt){if(!(this instanceof Et))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var _t=X.getInstance(),He=new je(yt,_t,this);nt.set(this,He)}return Et}();["observe","unobserve","disconnect"].forEach(function(Et){Ct.prototype[Et]=function(){var yt;return(yt=nt.get(this))[Et].apply(yt,arguments)}});var ft=function(){return typeof C.ResizeObserver!="undefined"?C.ResizeObserver:Ct}();Q.Z=ft},78088:function(H,Q){"use strict";function i(He,bt){var Tt=He.length;He.push(bt);e:for(;0<Tt;){var st=Tt-1>>>1,Qe=He[st];if(0<C(Qe,bt))He[st]=bt,He[Tt]=Qe,Tt=st;else break e}}function E(He){return He.length===0?null:He[0]}function M(He){if(He.length===0)return null;var bt=He[0],Tt=He.pop();if(Tt!==bt){He[0]=Tt;e:for(var st=0,Qe=He.length,mt=Qe>>>1;st<mt;){var Ht=2*(st+1)-1,vt=He[Ht],ue=Ht+1,lt=He[ue];if(0>C(vt,Tt))ue<Qe&&0>C(lt,vt)?(He[st]=lt,He[ue]=Tt,st=ue):(He[st]=vt,He[Ht]=Tt,st=Ht);else if(ue<Qe&&0>C(lt,Tt))He[st]=lt,He[ue]=Tt,st=ue;else break e}}return bt}function C(He,bt){var Tt=He.sortIndex-bt.sortIndex;return Tt!==0?Tt:He.id-bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;Q.unstable_now=function(){return n.now()}}else{var j=Date,$=j.now();Q.unstable_now=function(){return j.now()-$}}var U=[],Y=[],te=1,X=null,B=3,K=!1,de=!1,he=!1,J=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ee(He){for(var bt=E(Y);bt!==null;){if(bt.callback===null)M(Y);else if(bt.startTime<=He)M(Y),bt.sortIndex=bt.expirationTime,i(U,bt);else break;bt=E(Y)}}function Le(He){if(he=!1,Ee(He),!de)if(E(U)!==null)de=!0,yt(ke);else{var bt=E(Y);bt!==null&&_t(Le,bt.startTime-He)}}function ke(He,bt){de=!1,he&&(he=!1,ae(be),be=-1),K=!0;var Tt=B;try{for(Ee(bt),X=E(U);X!==null&&(!(X.expirationTime>bt)||He&&!je());){var st=X.callback;if(typeof st=="function"){X.callback=null,B=X.priorityLevel;var Qe=st(X.expirationTime<=bt);bt=Q.unstable_now(),typeof Qe=="function"?X.callback=Qe:X===E(U)&&M(U),Ee(bt)}else M(U);X=E(U)}if(X!==null)var mt=!0;else{var Ht=E(Y);Ht!==null&&_t(Le,Ht.startTime-bt),mt=!1}return mt}finally{X=null,B=Tt,K=!1}}var ye=!1,Se=null,be=-1,Ue=5,qe=-1;function je(){return!(Q.unstable_now()-qe<Ue)}function nt(){if(Se!==null){var He=Q.unstable_now();qe=He;var bt=!0;try{bt=Se(!0,He)}finally{bt?Ct():(ye=!1,Se=null)}}else ye=!1}var Ct;if(typeof se=="function")Ct=function(){se(nt)};else if(typeof MessageChannel!="undefined"){var ft=new MessageChannel,Et=ft.port2;ft.port1.onmessage=nt,Ct=function(){Et.postMessage(null)}}else Ct=function(){J(nt,0)};function yt(He){Se=He,ye||(ye=!0,Ct())}function _t(He,bt){be=J(function(){He(Q.unstable_now())},bt)}Q.unstable_IdlePriority=5,Q.unstable_ImmediatePriority=1,Q.unstable_LowPriority=4,Q.unstable_NormalPriority=3,Q.unstable_Profiling=null,Q.unstable_UserBlockingPriority=2,Q.unstable_cancelCallback=function(He){He.callback=null},Q.unstable_continueExecution=function(){de||K||(de=!0,yt(ke))},Q.unstable_forceFrameRate=function(He){0>He||125<He?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<He?Math.floor(1e3/He):5},Q.unstable_getCurrentPriorityLevel=function(){return B},Q.unstable_getFirstCallbackNode=function(){return E(U)},Q.unstable_next=function(He){switch(B){case 1:case 2:case 3:var bt=3;break;default:bt=B}var Tt=B;B=bt;try{return He()}finally{B=Tt}},Q.unstable_pauseExecution=function(){},Q.unstable_requestPaint=function(){},Q.unstable_runWithPriority=function(He,bt){switch(He){case 1:case 2:case 3:case 4:case 5:break;default:He=3}var Tt=B;B=He;try{return bt()}finally{B=Tt}},Q.unstable_scheduleCallback=function(He,bt,Tt){var st=Q.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?st+Tt:st):Tt=st,He){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Tt+Qe,He={id:te++,callback:bt,priorityLevel:He,startTime:Tt,expirationTime:Qe,sortIndex:-1},Tt>st?(He.sortIndex=Tt,i(Y,He),E(U)===null&&He===E(Y)&&(he?(ae(be),be=-1):he=!0,_t(Le,Tt-st))):(He.sortIndex=Qe,i(U,He),de||K||(de=!0,yt(ke))),He},Q.unstable_shouldYield=je,Q.unstable_wrapCallback=function(He){var bt=B;return function(){var Tt=B;B=bt;try{return He.apply(this,arguments)}finally{B=Tt}}}},97537:function(H,Q,i){"use strict";H.exports=i(78088)},50631:function(H){H.exports=function(i,E,M,C){var n=M?M.call(C,i,E):void 0;if(n!==void 0)return!!n;if(i===E)return!0;if(typeof i!="object"||!i||typeof E!="object"||!E)return!1;var j=Object.keys(i),$=Object.keys(E);if(j.length!==$.length)return!1;for(var U=Object.prototype.hasOwnProperty.bind(E),Y=0;Y<j.length;Y++){var te=j[Y];if(!U(te))return!1;var X=i[te],B=E[te];if(n=M?M.call(C,X,B,te):void 0,n===!1||n===void 0&&X!==B)return!1}return!0}},16935:function(H){H.exports=function(){var Q=document.getSelection();if(!Q.rangeCount)return function(){};for(var i=document.activeElement,E=[],M=0;M<Q.rangeCount;M++)E.push(Q.getRangeAt(M));switch(i.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":i.blur();break;default:i=null;break}return Q.removeAllRanges(),function(){Q.type==="Caret"&&Q.removeAllRanges(),Q.rangeCount||E.forEach(function(C){Q.addRange(C)}),i&&i.focus()}}},1129:function(H){H.exports.RADIUS=6378137,H.exports.FLATTENING=.0033528106647474805,H.exports.POLAR_RADIUS=63567523142e-4},78770:function(H){function Q(i,E){(E==null||E>i.length)&&(E=i.length);for(var M=0,C=new Array(E);M<E;M++)C[M]=i[M];return C}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},50040:function(H){function Q(i){if(Array.isArray(i))return i}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},38498:function(H,Q,i){var E=i(78770);function M(C){if(Array.isArray(C))return E(C)}H.exports=M,H.exports.__esModule=!0,H.exports.default=H.exports},87999:function(H){function Q(E,M,C,n,j,$,U){try{var Y=E[$](U),te=Y.value}catch(X){C(X);return}Y.done?M(te):Promise.resolve(te).then(n,j)}function i(E){return function(){var M=this,C=arguments;return new Promise(function(n,j){var $=E.apply(M,C);function U(te){Q($,n,j,U,Y,"next",te)}function Y(te){Q($,n,j,U,Y,"throw",te)}U(void 0)})}}H.exports=i,H.exports.__esModule=!0,H.exports.default=H.exports},25298:function(H){function Q(i,E){if(!(i instanceof E))throw new TypeError("Cannot call a class as a function")}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},17069:function(H,Q,i){var E=i(53795);function M(n,j){for(var $=0;$<j.length;$++){var U=j[$];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(n,E(U.key),U)}}function C(n,j,$){return j&&M(n.prototype,j),$&&M(n,$),Object.defineProperty(n,"prototype",{writable:!1}),n}H.exports=C,H.exports.__esModule=!0,H.exports.default=H.exports},82092:function(H,Q,i){var E=i(53795);function M(C,n,j){return n=E(n),n in C?Object.defineProperty(C,n,{value:j,enumerable:!0,configurable:!0,writable:!0}):C[n]=j,C}H.exports=M,H.exports.__esModule=!0,H.exports.default=H.exports},20698:function(H){function Q(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},44222:function(H){function Q(i,E){var M=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(M!=null){var C,n,j,$,U=[],Y=!0,te=!1;try{if(j=(M=M.call(i)).next,E===0){if(Object(M)!==M)return;Y=!1}else for(;!(Y=(C=j.call(M)).done)&&(U.push(C.value),U.length!==E);Y=!0);}catch(X){te=!0,n=X}finally{try{if(!Y&&M.return!=null&&($=M.return(),Object($)!==$))return}finally{if(te)throw n}}return U}}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},44804:function(H){function Q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},91162:function(H){function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},26068:function(H,Q,i){var E=i(82092);function M(n,j){var $=Object.keys(n);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(n);j&&(U=U.filter(function(Y){return Object.getOwnPropertyDescriptor(n,Y).enumerable})),$.push.apply($,U)}return $}function C(n){for(var j=1;j<arguments.length;j++){var $=arguments[j]!=null?arguments[j]:{};j%2?M(Object($),!0).forEach(function(U){E(n,U,$[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors($)):M(Object($)).forEach(function(U){Object.defineProperty(n,U,Object.getOwnPropertyDescriptor($,U))})}return n}H.exports=C,H.exports.__esModule=!0,H.exports.default=H.exports},67825:function(H,Q,i){var E=i(64382);function M(C,n){if(C==null)return{};var j=E(C,n),$,U;if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(C);for(U=0;U<Y.length;U++)$=Y[U],!(n.indexOf($)>=0)&&Object.prototype.propertyIsEnumerable.call(C,$)&&(j[$]=C[$])}return j}H.exports=M,H.exports.__esModule=!0,H.exports.default=H.exports},64382:function(H){function Q(i,E){if(i==null)return{};var M={},C=Object.keys(i),n,j;for(j=0;j<C.length;j++)n=C[j],!(E.indexOf(n)>=0)&&(M[n]=i[n]);return M}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},90228:function(H,Q,i){var E=i(31759).default;function M(){"use strict";H.exports=M=function(){return n},H.exports.__esModule=!0,H.exports.default=H.exports;var C,n={},j=Object.prototype,$=j.hasOwnProperty,U=Object.defineProperty||function(Tt,st,Qe){Tt[st]=Qe.value},Y=typeof Symbol=="function"?Symbol:{},te=Y.iterator||"@@iterator",X=Y.asyncIterator||"@@asyncIterator",B=Y.toStringTag||"@@toStringTag";function K(Tt,st,Qe){return Object.defineProperty(Tt,st,{value:Qe,enumerable:!0,configurable:!0,writable:!0}),Tt[st]}try{K({},"")}catch(Tt){K=function(Qe,mt,Ht){return Qe[mt]=Ht}}function de(Tt,st,Qe,mt){var Ht=st&&st.prototype instanceof ke?st:ke,vt=Object.create(Ht.prototype),ue=new He(mt||[]);return U(vt,"_invoke",{value:ft(Tt,Qe,ue)}),vt}function he(Tt,st,Qe){try{return{type:"normal",arg:Tt.call(st,Qe)}}catch(mt){return{type:"throw",arg:mt}}}n.wrap=de;var J="suspendedStart",ae="suspendedYield",se="executing",Ee="completed",Le={};function ke(){}function ye(){}function Se(){}var be={};K(be,te,function(){return this});var Ue=Object.getPrototypeOf,qe=Ue&&Ue(Ue(bt([])));qe&&qe!==j&&$.call(qe,te)&&(be=qe);var je=Se.prototype=ke.prototype=Object.create(be);function nt(Tt){["next","throw","return"].forEach(function(st){K(Tt,st,function(Qe){return this._invoke(st,Qe)})})}function Ct(Tt,st){function Qe(Ht,vt,ue,lt){var le=he(Tt[Ht],Tt,vt);if(le.type!=="throw"){var Je=le.arg,we=Je.value;return we&&E(we)=="object"&&$.call(we,"__await")?st.resolve(we.__await).then(function(Pn){Qe("next",Pn,ue,lt)},function(Pn){Qe("throw",Pn,ue,lt)}):st.resolve(we).then(function(Pn){Je.value=Pn,ue(Je)},function(Pn){return Qe("throw",Pn,ue,lt)})}lt(le.arg)}var mt;U(this,"_invoke",{value:function(vt,ue){function lt(){return new st(function(le,Je){Qe(vt,ue,le,Je)})}return mt=mt?mt.then(lt,lt):lt()}})}function ft(Tt,st,Qe){var mt=J;return function(Ht,vt){if(mt===se)throw new Error("Generator is already running");if(mt===Ee){if(Ht==="throw")throw vt;return{value:C,done:!0}}for(Qe.method=Ht,Qe.arg=vt;;){var ue=Qe.delegate;if(ue){var lt=Et(ue,Qe);if(lt){if(lt===Le)continue;return lt}}if(Qe.method==="next")Qe.sent=Qe._sent=Qe.arg;else if(Qe.method==="throw"){if(mt===J)throw mt=Ee,Qe.arg;Qe.dispatchException(Qe.arg)}else Qe.method==="return"&&Qe.abrupt("return",Qe.arg);mt=se;var le=he(Tt,st,Qe);if(le.type==="normal"){if(mt=Qe.done?Ee:ae,le.arg===Le)continue;return{value:le.arg,done:Qe.done}}le.type==="throw"&&(mt=Ee,Qe.method="throw",Qe.arg=le.arg)}}}function Et(Tt,st){var Qe=st.method,mt=Tt.iterator[Qe];if(mt===C)return st.delegate=null,Qe==="throw"&&Tt.iterator.return&&(st.method="return",st.arg=C,Et(Tt,st),st.method==="throw")||Qe!=="return"&&(st.method="throw",st.arg=new TypeError("The iterator does not provide a '"+Qe+"' method")),Le;var Ht=he(mt,Tt.iterator,st.arg);if(Ht.type==="throw")return st.method="throw",st.arg=Ht.arg,st.delegate=null,Le;var vt=Ht.arg;return vt?vt.done?(st[Tt.resultName]=vt.value,st.next=Tt.nextLoc,st.method!=="return"&&(st.method="next",st.arg=C),st.delegate=null,Le):vt:(st.method="throw",st.arg=new TypeError("iterator result is not an object"),st.delegate=null,Le)}function yt(Tt){var st={tryLoc:Tt[0]};1 in Tt&&(st.catchLoc=Tt[1]),2 in Tt&&(st.finallyLoc=Tt[2],st.afterLoc=Tt[3]),this.tryEntries.push(st)}function _t(Tt){var st=Tt.completion||{};st.type="normal",delete st.arg,Tt.completion=st}function He(Tt){this.tryEntries=[{tryLoc:"root"}],Tt.forEach(yt,this),this.reset(!0)}function bt(Tt){if(Tt||Tt===""){var st=Tt[te];if(st)return st.call(Tt);if(typeof Tt.next=="function")return Tt;if(!isNaN(Tt.length)){var Qe=-1,mt=function Ht(){for(;++Qe<Tt.length;)if($.call(Tt,Qe))return Ht.value=Tt[Qe],Ht.done=!1,Ht;return Ht.value=C,Ht.done=!0,Ht};return mt.next=mt}}throw new TypeError(E(Tt)+" is not iterable")}return ye.prototype=Se,U(je,"constructor",{value:Se,configurable:!0}),U(Se,"constructor",{value:ye,configurable:!0}),ye.displayName=K(Se,B,"GeneratorFunction"),n.isGeneratorFunction=function(Tt){var st=typeof Tt=="function"&&Tt.constructor;return!!st&&(st===ye||(st.displayName||st.name)==="GeneratorFunction")},n.mark=function(Tt){return Object.setPrototypeOf?Object.setPrototypeOf(Tt,Se):(Tt.__proto__=Se,K(Tt,B,"GeneratorFunction")),Tt.prototype=Object.create(je),Tt},n.awrap=function(Tt){return{__await:Tt}},nt(Ct.prototype),K(Ct.prototype,X,function(){return this}),n.AsyncIterator=Ct,n.async=function(Tt,st,Qe,mt,Ht){Ht===void 0&&(Ht=Promise);var vt=new Ct(de(Tt,st,Qe,mt),Ht);return n.isGeneratorFunction(st)?vt:vt.next().then(function(ue){return ue.done?ue.value:vt.next()})},nt(je),K(je,B,"Generator"),K(je,te,function(){return this}),K(je,"toString",function(){return"[object Generator]"}),n.keys=function(Tt){var st=Object(Tt),Qe=[];for(var mt in st)Qe.push(mt);return Qe.reverse(),function Ht(){for(;Qe.length;){var vt=Qe.pop();if(vt in st)return Ht.value=vt,Ht.done=!1,Ht}return Ht.done=!0,Ht}},n.values=bt,He.prototype={constructor:He,reset:function(st){if(this.prev=0,this.next=0,this.sent=this._sent=C,this.done=!1,this.delegate=null,this.method="next",this.arg=C,this.tryEntries.forEach(_t),!st)for(var Qe in this)Qe.charAt(0)==="t"&&$.call(this,Qe)&&!isNaN(+Qe.slice(1))&&(this[Qe]=C)},stop:function(){this.done=!0;var st=this.tryEntries[0].completion;if(st.type==="throw")throw st.arg;return this.rval},dispatchException:function(st){if(this.done)throw st;var Qe=this;function mt(Je,we){return ue.type="throw",ue.arg=st,Qe.next=Je,we&&(Qe.method="next",Qe.arg=C),!!we}for(var Ht=this.tryEntries.length-1;Ht>=0;--Ht){var vt=this.tryEntries[Ht],ue=vt.completion;if(vt.tryLoc==="root")return mt("end");if(vt.tryLoc<=this.prev){var lt=$.call(vt,"catchLoc"),le=$.call(vt,"finallyLoc");if(lt&&le){if(this.prev<vt.catchLoc)return mt(vt.catchLoc,!0);if(this.prev<vt.finallyLoc)return mt(vt.finallyLoc)}else if(lt){if(this.prev<vt.catchLoc)return mt(vt.catchLoc,!0)}else{if(!le)throw new Error("try statement without catch or finally");if(this.prev<vt.finallyLoc)return mt(vt.finallyLoc)}}}},abrupt:function(st,Qe){for(var mt=this.tryEntries.length-1;mt>=0;--mt){var Ht=this.tryEntries[mt];if(Ht.tryLoc<=this.prev&&$.call(Ht,"finallyLoc")&&this.prev<Ht.finallyLoc){var vt=Ht;break}}vt&&(st==="break"||st==="continue")&&vt.tryLoc<=Qe&&Qe<=vt.finallyLoc&&(vt=null);var ue=vt?vt.completion:{};return ue.type=st,ue.arg=Qe,vt?(this.method="next",this.next=vt.finallyLoc,Le):this.complete(ue)},complete:function(st,Qe){if(st.type==="throw")throw st.arg;return st.type==="break"||st.type==="continue"?this.next=st.arg:st.type==="return"?(this.rval=this.arg=st.arg,this.method="return",this.next="end"):st.type==="normal"&&Qe&&(this.next=Qe),Le},finish:function(st){for(var Qe=this.tryEntries.length-1;Qe>=0;--Qe){var mt=this.tryEntries[Qe];if(mt.finallyLoc===st)return this.complete(mt.completion,mt.afterLoc),_t(mt),Le}},catch:function(st){for(var Qe=this.tryEntries.length-1;Qe>=0;--Qe){var mt=this.tryEntries[Qe];if(mt.tryLoc===st){var Ht=mt.completion;if(Ht.type==="throw"){var vt=Ht.arg;_t(mt)}return vt}}throw new Error("illegal catch attempt")},delegateYield:function(st,Qe,mt){return this.delegate={iterator:bt(st),resultName:Qe,nextLoc:mt},this.method==="next"&&(this.arg=C),Le}},n}H.exports=M,H.exports.__esModule=!0,H.exports.default=H.exports},48305:function(H,Q,i){var E=i(50040),M=i(44222),C=i(31479),n=i(44804);function j($,U){return E($)||M($,U)||C($,U)||n()}H.exports=j,H.exports.__esModule=!0,H.exports.default=H.exports},15558:function(H,Q,i){var E=i(38498),M=i(20698),C=i(31479),n=i(91162);function j($){return E($)||M($)||C($)||n()}H.exports=j,H.exports.__esModule=!0,H.exports.default=H.exports},62823:function(H,Q,i){var E=i(31759).default;function M(C,n){if(E(C)!="object"||!C)return C;var j=C[Symbol.toPrimitive];if(j!==void 0){var $=j.call(C,n||"default");if(E($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(C)}H.exports=M,H.exports.__esModule=!0,H.exports.default=H.exports},53795:function(H,Q,i){var E=i(31759).default,M=i(62823);function C(n){var j=M(n,"string");return E(j)=="symbol"?j:String(j)}H.exports=C,H.exports.__esModule=!0,H.exports.default=H.exports},31759:function(H){function Q(i){"@babel/helpers - typeof";return H.exports=Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},H.exports.__esModule=!0,H.exports.default=H.exports,Q(i)}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},31479:function(H,Q,i){var E=i(78770);function M(C,n){if(C){if(typeof C=="string")return E(C,n);var j=Object.prototype.toString.call(C).slice(8,-1);if(j==="Object"&&C.constructor&&(j=C.constructor.name),j==="Map"||j==="Set")return Array.from(C);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return E(C,n)}}H.exports=M,H.exports.__esModule=!0,H.exports.default=H.exports},46612:function(H){function Q(i){return i&&i.__esModule?i:{default:i}}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},57421:function(H){function Q(i){"@babel/helpers - typeof";return H.exports=Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},H.exports.__esModule=!0,H.exports.default=H.exports,Q(i)}H.exports=Q,H.exports.__esModule=!0,H.exports.default=H.exports},82187:function(H,Q){var i,E;(function(){"use strict";var M={}.hasOwnProperty;function C(){for(var $="",U=0;U<arguments.length;U++){var Y=arguments[U];Y&&($=j($,n(Y)))}return $}function n($){if(typeof $=="string"||typeof $=="number")return $;if(typeof $!="object")return"";if(Array.isArray($))return C.apply(null,$);if($.toString!==Object.prototype.toString&&!$.toString.toString().includes("[native code]"))return $.toString();var U="";for(var Y in $)M.call($,Y)&&$[Y]&&(U=j(U,Y));return U}function j($,U){return U?$?$+" "+U:$+U:$}H.exports?(C.default=C,H.exports=C):(i=[],E=function(){return C}.apply(Q,i),E!==void 0&&(H.exports=E))})()},91216:function(H,Q,i){"use strict";var E=i(21051),M=i(67674),C=TypeError;H.exports=function(n){if(E(n))return n;throw new C(M(n)+" is not a function")}},82915:function(H,Q,i){"use strict";var E=i(83808),M=i(67674),C=TypeError;H.exports=function(n){if(E(n))return n;throw new C(M(n)+" is not a constructor")}},782:function(H,Q,i){"use strict";var E=i(92192).has;H.exports=function(M){return E(M),M}},993:function(H,Q,i){"use strict";var E=i(21051),M=String,C=TypeError;H.exports=function(n){if(typeof n=="object"||E(n))return n;throw new C("Can't set "+M(n)+" as a prototype")}},19397:function(H,Q,i){"use strict";var E=i(81343).has;H.exports=function(M){return E(M),M}},23325:function(H){"use strict";var Q=TypeError;H.exports=function(i){if(typeof i=="string")return i;throw new Q("Argument is not a string")}},19150:function(H,Q,i){"use strict";var E=i(44098).has;H.exports=function(M){return E(M),M}},73099:function(H,Q,i){"use strict";var E=i(76028).has;H.exports=function(M){return E(M),M}},58529:function(H,Q,i){"use strict";var E=i(98789),M=i(43930),C=i(9873),n=i(47033),j=i(91216),$=i(95582),U=i(98285),Y=i(44525),te=Y("asyncDispose"),X=Y("dispose"),B=M([].push),K=function(he,J){if(J==="async-dispose"){var ae=U(he,te);return ae!==void 0?ae:(ae=U(he,X),function(){E(ae,this)})}return U(he,X)},de=function(he,J,ae){return arguments.length<3&&!$(he)&&(ae=j(K(n(he),J))),ae===void 0?function(){}:C(ae,he)};H.exports=function(he,J,ae,se){var Ee;if(arguments.length<4){if($(J)&&ae==="sync-dispose")return;Ee=de(J,ae)}else Ee=de(void 0,ae,se);B(he.stack,Ee)}},55278:function(H,Q,i){"use strict";var E=i(44525),M=i(74123),C=i(17567).f,n=E("unscopables"),j=Array.prototype;j[n]===void 0&&C(j,n,{configurable:!0,value:M(null)}),H.exports=function($){j[n][$]=!0}},86036:function(H,Q,i){"use strict";var E=i(59479),M=TypeError;H.exports=function(C,n){if(E(n,C))return C;throw new M("Incorrect invocation")}},5710:function(H,Q,i){"use strict";var E=i(11203),M=String,C=TypeError;H.exports=function(n){if(n===void 0||E(n))return n;throw new C(M(n)+" is not an object or undefined")}},47033:function(H,Q,i){"use strict";var E=i(11203),M=String,C=TypeError;H.exports=function(n){if(E(n))return n;throw new C(M(n)+" is not an object")}},80090:function(H,Q,i){"use strict";var E=i(33242),M=TypeError;H.exports=function(C){if(E(C)==="Uint8Array")return C;throw new M("Argument is not an Uint8Array")}},56762:function(H){"use strict";H.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},6244:function(H,Q,i){"use strict";var E=i(54447),M=i(57850),C=TypeError;H.exports=E(ArrayBuffer.prototype,"byteLength","get")||function(n){if(M(n)!=="ArrayBuffer")throw new C("ArrayBuffer expected");return n.byteLength}},11678:function(H,Q,i){"use strict";var E=i(43930),M=i(6244),C=E(ArrayBuffer.prototype.slice);H.exports=function(n){if(M(n)!==0)return!1;try{return C(n,0,0),!1}catch(j){return!0}}},29972:function(H,Q,i){"use strict";var E=i(56261);H.exports=E(function(){if(typeof ArrayBuffer=="function"){var M=new ArrayBuffer(8);Object.isExtensible(M)&&Object.defineProperty(M,"a",{value:8})}})},85211:function(H,Q,i){"use strict";var E=i(38386),M=i(43930),C=i(54447),n=i(78749),j=i(11678),$=i(6244),U=i(88033),Y=i(47534),te=E.structuredClone,X=E.ArrayBuffer,B=E.DataView,K=E.TypeError,de=Math.min,he=X.prototype,J=B.prototype,ae=M(he.slice),se=C(he,"resizable","get"),Ee=C(he,"maxByteLength","get"),Le=M(J.getInt8),ke=M(J.setInt8);H.exports=(Y||U)&&function(ye,Se,be){var Ue=$(ye),qe=Se===void 0?Ue:n(Se),je=!se||!se(ye),nt;if(j(ye))throw new K("ArrayBuffer is detached");if(Y&&(ye=te(ye,{transfer:[ye]}),Ue===qe&&(be||je)))return ye;if(Ue>=qe&&(!be||je))nt=ae(ye,0,qe);else{var Ct=be&&!je&&Ee?{maxByteLength:Ee(ye)}:void 0;nt=new X(qe,Ct);for(var ft=new B(ye),Et=new B(nt),yt=de(qe,Ue),_t=0;_t<yt;_t++)ke(Et,_t,Le(ft,_t))}return Y||U(ye),nt}},66221:function(H,Q,i){"use strict";var E=i(56762),M=i(27233),C=i(38386),n=i(21051),j=i(11203),$=i(14592),U=i(33242),Y=i(67674),te=i(37917),X=i(66511),B=i(42917),K=i(59479),de=i(43587),he=i(34205),J=i(44525),ae=i(86482),se=i(92657),Ee=se.enforce,Le=se.get,ke=C.Int8Array,ye=ke&&ke.prototype,Se=C.Uint8ClampedArray,be=Se&&Se.prototype,Ue=ke&&de(ke),qe=ye&&de(ye),je=Object.prototype,nt=C.TypeError,Ct=J("toStringTag"),ft=ae("TYPED_ARRAY_TAG"),Et="TypedArrayConstructor",yt=E&&!!he&&U(C.opera)!=="Opera",_t=!1,He,bt,Tt,st={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Qe={BigInt64Array:8,BigUint64Array:8},mt=function(Pn){if(!j(Pn))return!1;var Mt=U(Pn);return Mt==="DataView"||$(st,Mt)||$(Qe,Mt)},Ht=function(we){var Pn=de(we);if(j(Pn)){var Mt=Le(Pn);return Mt&&$(Mt,Et)?Mt[Et]:Ht(Pn)}},vt=function(we){if(!j(we))return!1;var Pn=U(we);return $(st,Pn)||$(Qe,Pn)},ue=function(we){if(vt(we))return we;throw new nt("Target is not a typed array")},lt=function(we){if(n(we)&&(!he||K(Ue,we)))return we;throw new nt(Y(we)+" is not a typed array constructor")},le=function(we,Pn,Mt,or){if(M){if(Mt)for(var wr in st){var Dr=C[wr];if(Dr&&$(Dr.prototype,we))try{delete Dr.prototype[we]}catch(lr){try{Dr.prototype[we]=Pn}catch(Pe){}}}(!qe[we]||Mt)&&X(qe,we,Mt?Pn:yt&&ye[we]||Pn,or)}},Je=function(we,Pn,Mt){var or,wr;if(M){if(he){if(Mt){for(or in st)if(wr=C[or],wr&&$(wr,we))try{delete wr[we]}catch(Dr){}}if(!Ue[we]||Mt)try{return X(Ue,we,Mt?Pn:yt&&Ue[we]||Pn)}catch(Dr){}else return}for(or in st)wr=C[or],wr&&(!wr[we]||Mt)&&X(wr,we,Pn)}};for(He in st)bt=C[He],Tt=bt&&bt.prototype,Tt?Ee(Tt)[Et]=bt:yt=!1;for(He in Qe)bt=C[He],Tt=bt&&bt.prototype,Tt&&(Ee(Tt)[Et]=bt);if((!yt||!n(Ue)||Ue===Function.prototype)&&(Ue=function(){throw new nt("Incorrect invocation")},yt))for(He in st)C[He]&&he(C[He],Ue);if((!yt||!qe||qe===je)&&(qe=Ue.prototype,yt))for(He in st)C[He]&&he(C[He].prototype,qe);if(yt&&de(be)!==qe&&he(be,qe),M&&!$(qe,Ct)){_t=!0,B(qe,Ct,{configurable:!0,get:function(){return j(this)?this[ft]:void 0}});for(He in st)C[He]&&te(C[He],ft,He)}H.exports={NATIVE_ARRAY_BUFFER_VIEWS:yt,TYPED_ARRAY_TAG:_t&&ft,aTypedArray:ue,aTypedArrayConstructor:lt,exportTypedArrayMethod:le,exportTypedArrayStaticMethod:Je,getTypedArrayConstructor:Ht,isView:mt,isTypedArray:vt,TypedArray:Ue,TypedArrayPrototype:qe}},98200:function(H,Q,i){"use strict";var E=i(9873),M=i(43930),C=i(71953),n=i(83808),j=i(57428),$=i(39151),U=i(81770),Y=i(45532),te=i(98285),X=i(70521),B=i(39833),K=i(44525),de=i(86219),he=i(96062).toArray,J=K("asyncIterator"),ae=M(B("Array","values")),se=M(ae([]).next),Ee=function(){return new Le(this)},Le=function(ke){this.iterator=ae(ke)};Le.prototype.next=function(){return se(this.iterator)},H.exports=function(ye){var Se=this,be=arguments.length,Ue=be>1?arguments[1]:void 0,qe=be>2?arguments[2]:void 0;return new(X("Promise"))(function(je){var nt=C(ye);Ue!==void 0&&(Ue=E(Ue,qe));var Ct=te(nt,J),ft=Ct?void 0:Y(nt)||Ee,Et=n(Se)?new Se:[],yt=Ct?j(nt,Ct):new de(U($(nt,ft)));je(he(yt,Ue,Et))})}},93320:function(H,Q,i){"use strict";var E=i(48109);H.exports=function(M,C,n){for(var j=0,$=arguments.length>2?n:E(C),U=new M($);$>j;)U[j]=C[j++];return U}},8202:function(H,Q,i){"use strict";var E=i(9873),M=i(43930),C=i(9984),n=i(71953),j=i(48109),$=i(92192),U=$.Map,Y=$.get,te=$.has,X=$.set,B=M([].push);H.exports=function(de){for(var he=n(this),J=C(he),ae=E(de,arguments.length>1?arguments[1]:void 0),se=new U,Ee=j(J),Le=0,ke,ye;Ee>Le;Le++)ye=J[Le],ke=ae(ye,Le,he),te(se,ke)?B(Y(se,ke),ye):X(se,ke,[ye]);return se}},20508:function(H,Q,i){"use strict";var E=i(9873),M=i(43930),C=i(9984),n=i(71953),j=i(95612),$=i(48109),U=i(74123),Y=i(93320),te=Array,X=M([].push);H.exports=function(B,K,de,he){for(var J=n(B),ae=C(J),se=E(K,de),Ee=U(null),Le=$(ae),ke=0,ye,Se,be;Le>ke;ke++)be=ae[ke],Se=j(se(be,ke,J)),Se in Ee?X(Ee[Se],be):Ee[Se]=[be];if(he&&(ye=he(J),ye!==te))for(Se in Ee)Ee[Se]=Y(ye,Ee[Se]);return Ee}},87156:function(H,Q,i){"use strict";var E=i(42235),M=i(50655),C=i(48109),n=function(j){return function($,U,Y){var te=E($),X=C(te),B=M(Y,X),K;if(j&&U!==U){for(;X>B;)if(K=te[B++],K!==K)return!0}else for(;X>B;B++)if((j||B in te)&&te[B]===U)return j||B||0;return!j&&-1}};H.exports={includes:n(!0),indexOf:n(!1)}},41983:function(H,Q,i){"use strict";var E=i(9873),M=i(9984),C=i(71953),n=i(48109),j=function($){var U=$===1;return function(Y,te,X){for(var B=C(Y),K=M(B),de=n(K),he=E(te,X),J,ae;de-- >0;)if(J=K[de],ae=he(J,de,B),ae)switch($){case 0:return J;case 1:return de}return U?-1:void 0}};H.exports={findLast:j(0),findLastIndex:j(1)}},57311:function(H,Q,i){"use strict";var E=i(9873),M=i(43930),C=i(9984),n=i(71953),j=i(48109),$=i(21268),U=M([].push),Y=function(te){var X=te===1,B=te===2,K=te===3,de=te===4,he=te===6,J=te===7,ae=te===5||he;return function(se,Ee,Le,ke){for(var ye=n(se),Se=C(ye),be=j(Se),Ue=E(Ee,Le),qe=0,je=ke||$,nt=X?je(se,be):B||J?je(se,0):void 0,Ct,ft;be>qe;qe++)if((ae||qe in Se)&&(Ct=Se[qe],ft=Ue(Ct,qe,ye),te))if(X)nt[qe]=ft;else if(ft)switch(te){case 3:return!0;case 5:return Ct;case 6:return qe;case 2:U(nt,Ct)}else switch(te){case 4:return!1;case 7:U(nt,Ct)}return he?-1:K||de?de:nt}};H.exports={forEach:Y(0),map:Y(1),filter:Y(2),some:Y(3),every:Y(4),find:Y(5),findIndex:Y(6),filterReject:Y(7)}},84620:function(H,Q,i){"use strict";var E=i(56261);H.exports=function(M,C){var n=[][M];return!!n&&E(function(){n.call(null,C||function(){return 1},1)})}},15051:function(H,Q,i){"use strict";var E=i(91216),M=i(71953),C=i(9984),n=i(48109),j=TypeError,$=function(U){return function(Y,te,X,B){var K=M(Y),de=C(K),he=n(K);E(te);var J=U?he-1:0,ae=U?-1:1;if(X<2)for(;;){if(J in de){B=de[J],J+=ae;break}if(J+=ae,U?J<0:he<=J)throw new j("Reduce of empty array with no initial value")}for(;U?J>=0:he>J;J+=ae)J in de&&(B=te(B,de[J],J,K));return B}};H.exports={left:$(!1),right:$(!0)}},97674:function(H,Q,i){"use strict";var E=i(27233),M=i(87487),C=TypeError,n=Object.getOwnPropertyDescriptor,j=E&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch($){return $ instanceof TypeError}}();H.exports=j?function($,U){if(M($)&&!n($,"length").writable)throw new C("Cannot set read only .length");return $.length=U}:function($,U){return $.length=U}},43420:function(H,Q,i){"use strict";var E=i(50655),M=i(48109),C=i(56853),n=Array,j=Math.max;H.exports=function($,U,Y){for(var te=M($),X=E(U,te),B=E(Y===void 0?te:Y,te),K=n(j(B-X,0)),de=0;X<B;X++,de++)C(K,de,$[X]);return K.length=de,K}},49554:function(H,Q,i){"use strict";var E=i(43930);H.exports=E([].slice)},59372:function(H,Q,i){"use strict";var E=i(87487),M=i(83808),C=i(11203),n=i(44525),j=n("species"),$=Array;H.exports=function(U){var Y;return E(U)&&(Y=U.constructor,M(Y)&&(Y===$||E(Y.prototype))?Y=void 0:C(Y)&&(Y=Y[j],Y===null&&(Y=void 0))),Y===void 0?$:Y}},21268:function(H,Q,i){"use strict";var E=i(59372);H.exports=function(M,C){return new(E(M))(C===0?0:C)}},72740:function(H,Q,i){"use strict";var E=i(48109);H.exports=function(M,C){for(var n=E(M),j=new C(n),$=0;$<n;$++)j[$]=M[n-$-1];return j}},70822:function(H,Q,i){"use strict";var E=i(43930),M=i(91216),C=i(95582),n=i(48109),j=i(71953),$=i(92192),U=i(73536),Y=$.Map,te=$.has,X=$.set,B=E([].push);H.exports=function(de){var he=j(this),J=n(he),ae=[],se=new Y,Ee=C(de)?function(Se){return Se}:M(de),Le,ke,ye;for(Le=0;Le<J;Le++)ke=he[Le],ye=Ee(ke),te(se,ye)||X(se,ye,ke);return U(se,function(Se){B(ae,Se)}),ae}},86210:function(H,Q,i){"use strict";var E=i(48109),M=i(65342),C=RangeError;H.exports=function(n,j,$,U){var Y=E(n),te=M($),X=te<0?Y+te:te;if(X>=Y||X<0)throw new C("Incorrect index");for(var B=new j(Y),K=0;K<Y;K++)B[K]=K===X?U:n[K];return B}},86219:function(H,Q,i){"use strict";var E=i(98789),M=i(47033),C=i(74123),n=i(98285),j=i(25785),$=i(92657),U=i(70521),Y=i(24998),te=i(13988),X=U("Promise"),B="AsyncFromSyncIterator",K=$.set,de=$.getterFor(B),he=function(ae,se,Ee){var Le=ae.done;X.resolve(ae.value).then(function(ke){se(te(ke,Le))},Ee)},J=function(se){se.type=B,K(this,se)};J.prototype=j(C(Y),{next:function(){var se=de(this);return new X(function(Ee,Le){var ke=M(E(se.next,se.iterator));he(ke,Ee,Le)})},return:function(){var ae=de(this).iterator;return new X(function(se,Ee){var Le=n(ae,"return");if(Le===void 0)return se(te(void 0,!0));var ke=M(E(Le,ae));he(ke,se,Ee)})}}),H.exports=J},3997:function(H,Q,i){"use strict";var E=i(98789),M=i(70521),C=i(98285);H.exports=function(n,j,$,U){try{var Y=C(n,"return");if(Y)return M("Promise").resolve(E(Y,n)).then(function(){j($)},function(te){U(te)})}catch(te){return U(te)}j($)}},62026:function(H,Q,i){"use strict";var E=i(98789),M=i(59683),C=i(47033),n=i(74123),j=i(37917),$=i(25785),U=i(44525),Y=i(92657),te=i(70521),X=i(98285),B=i(24998),K=i(13988),de=i(90431),he=te("Promise"),J=U("toStringTag"),ae="AsyncIteratorHelper",se="WrapForValidAsyncIterator",Ee=Y.set,Le=function(Se){var be=!Se,Ue=Y.getterFor(Se?se:ae),qe=function(je){var nt=M(function(){return Ue(je)}),Ct=nt.error,ft=nt.value;return Ct||be&&ft.done?{exit:!0,value:Ct?he.reject(ft):he.resolve(K(void 0,!0))}:{exit:!1,value:ft}};return $(n(B),{next:function(){var nt=qe(this),Ct=nt.value;if(nt.exit)return Ct;var ft=M(function(){return C(Ct.nextHandler(he))}),Et=ft.error,yt=ft.value;return Et&&(Ct.done=!0),Et?he.reject(yt):he.resolve(yt)},return:function(){var je=qe(this),nt=je.value;if(je.exit)return nt;nt.done=!0;var Ct=nt.iterator,ft,Et,yt=M(function(){if(nt.inner)try{de(nt.inner.iterator,"normal")}catch(_t){return de(Ct,"throw",_t)}return X(Ct,"return")});return ft=Et=yt.value,yt.error?he.reject(Et):ft===void 0?he.resolve(K(void 0,!0)):(yt=M(function(){return E(ft,Ct)}),Et=yt.value,yt.error?he.reject(Et):Se?he.resolve(Et):he.resolve(Et).then(function(_t){return C(_t),K(void 0,!0)}))}})},ke=Le(!0),ye=Le(!1);j(ye,J,"Async Iterator Helper"),H.exports=function(Se,be){var Ue=function(je,nt){nt?(nt.iterator=je.iterator,nt.next=je.next):nt=je,nt.type=be?se:ae,nt.nextHandler=Se,nt.counter=0,nt.done=!1,Ee(this,nt)};return Ue.prototype=be?ke:ye,Ue}},70397:function(H,Q,i){"use strict";var E=i(98789),M=i(14132),C=function(n,j){return[j,n]};H.exports=function(){return E(M,this,C)}},96062:function(H,Q,i){"use strict";var E=i(98789),M=i(91216),C=i(47033),n=i(11203),j=i(19920),$=i(70521),U=i(81770),Y=i(3997),te=function(X){var B=X===0,K=X===1,de=X===2,he=X===3;return function(J,ae,se){C(J);var Ee=ae!==void 0;(Ee||!B)&&M(ae);var Le=U(J),ke=$("Promise"),ye=Le.iterator,Se=Le.next,be=0;return new ke(function(Ue,qe){var je=function(Ct){Y(ye,qe,Ct,qe)},nt=function(){try{if(Ee)try{j(be)}catch(Ct){je(Ct)}ke.resolve(C(E(Se,ye))).then(function(Ct){try{if(C(Ct).done)B?(se.length=be,Ue(se)):Ue(he?!1:de||void 0);else{var ft=Ct.value;try{if(Ee){var Et=ae(ft,be),yt=function(_t){if(K)nt();else if(de)_t?nt():Y(ye,Ue,!1,qe);else if(B)try{se[be++]=_t,nt()}catch(He){je(He)}else _t?Y(ye,Ue,he||ft,qe):nt()};n(Et)?ke.resolve(Et).then(yt,je):yt(Et)}else se[be++]=ft,nt()}catch(_t){je(_t)}}}catch(_t){qe(_t)}},qe)}catch(Ct){qe(Ct)}};nt()})}};H.exports={toArray:te(0),forEach:te(1),every:te(2),some:te(3),find:te(4)}},14132:function(H,Q,i){"use strict";var E=i(98789),M=i(91216),C=i(47033),n=i(11203),j=i(81770),$=i(62026),U=i(13988),Y=i(3997),te=$(function(X){var B=this,K=B.iterator,de=B.mapper;return new X(function(he,J){var ae=function(Ee){B.done=!0,J(Ee)},se=function(Ee){Y(K,ae,Ee,ae)};X.resolve(C(E(B.next,K))).then(function(Ee){try{if(C(Ee).done)B.done=!0,he(U(void 0,!0));else{var Le=Ee.value;try{var ke=de(Le,B.counter++),ye=function(Se){he(U(Se,!1))};n(ke)?X.resolve(ke).then(ye,se):ye(ke)}catch(Se){se(Se)}}}catch(Se){ae(Se)}},ae)})});H.exports=function(B){return C(this),M(B),new te(j(this),{mapper:B})}},24998:function(H,Q,i){"use strict";var E=i(38386),M=i(49304),C=i(21051),n=i(74123),j=i(43587),$=i(66511),U=i(44525),Y=i(41876),te="USE_FUNCTION_CONSTRUCTOR",X=U("asyncIterator"),B=E.AsyncIterator,K=M.AsyncIteratorPrototype,de,he;if(K)de=K;else if(C(B))de=B.prototype;else if(M[te]||E[te])try{he=j(j(j(Function("return async function*(){}()")()))),j(he)===Object.prototype&&(de=he)}catch(J){}de?Y&&(de=n(de)):de={},C(de[X])||$(de,X,function(){return this}),H.exports=de},54646:function(H,Q,i){"use strict";var E=i(98789),M=i(62026);H.exports=M(function(){return E(this.next,this.iterator)},!0)},28818:function(H){"use strict";var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Q+"+/",E=Q+"-_",M=function(C){for(var n={},j=0;j<64;j++)n[C.charAt(j)]=j;return n};H.exports={i2c:i,c2i:M(i),i2cUrl:E,c2iUrl:M(E)}},47967:function(H,Q,i){"use strict";var E=i(47033),M=i(90431);H.exports=function(C,n,j,$){try{return $?n(E(j)[0],j[1]):n(j)}catch(U){M(C,"throw",U)}}},8896:function(H,Q,i){"use strict";var E=i(44525),M=E("iterator"),C=!1;try{var n=0,j={next:function(){return{done:!!n++}},return:function(){C=!0}};j[M]=function(){return this},Array.from(j,function(){throw 2})}catch($){}H.exports=function($,U){try{if(!U&&!C)return!1}catch(X){return!1}var Y=!1;try{var te={};te[M]=function(){return{next:function(){return{done:Y=!0}}}},$(te)}catch(X){}return Y}},57850:function(H,Q,i){"use strict";var E=i(43930),M=E({}.toString),C=E("".slice);H.exports=function(n){return C(M(n),8,-1)}},33242:function(H,Q,i){"use strict";var E=i(78049),M=i(21051),C=i(57850),n=i(44525),j=n("toStringTag"),$=Object,U=C(function(){return arguments}())==="Arguments",Y=function(te,X){try{return te[X]}catch(B){}};H.exports=E?C:function(te){var X,B,K;return te===void 0?"Undefined":te===null?"Null":typeof(B=Y(X=$(te),j))=="string"?B:U?C(X):(K=C(X))==="Object"&&M(X.callee)?"Arguments":K}},13271:function(H,Q,i){"use strict";var E=i(9873),M=i(98789),C=i(91216),n=i(82915),j=i(95582),$=i(70147),U=[].push;H.exports=function(te){var X=arguments.length,B=X>1?arguments[1]:void 0,K,de,he,J;return n(this),K=B!==void 0,K&&C(B),j(te)?new this:(de=[],K?(he=0,J=E(B,X>2?arguments[2]:void 0),$(te,function(ae){M(U,de,J(ae,he++))})):$(te,U,{that:de}),new this(de))}},94449:function(H,Q,i){"use strict";var E=i(49554);H.exports=function(){return new this(E(arguments))}},42266:function(H,Q,i){"use strict";var E=i(74123),M=i(42917),C=i(25785),n=i(9873),j=i(86036),$=i(95582),U=i(70147),Y=i(2482),te=i(13988),X=i(39693),B=i(27233),K=i(78995).fastKey,de=i(92657),he=de.set,J=de.getterFor;H.exports={getConstructor:function(ae,se,Ee,Le){var ke=ae(function(qe,je){j(qe,ye),he(qe,{type:se,index:E(null),first:void 0,last:void 0,size:0}),B||(qe.size=0),$(je)||U(je,qe[Le],{that:qe,AS_ENTRIES:Ee})}),ye=ke.prototype,Se=J(se),be=function(qe,je,nt){var Ct=Se(qe),ft=Ue(qe,je),Et,yt;return ft?ft.value=nt:(Ct.last=ft={index:yt=K(je,!0),key:je,value:nt,previous:Et=Ct.last,next:void 0,removed:!1},Ct.first||(Ct.first=ft),Et&&(Et.next=ft),B?Ct.size++:qe.size++,yt!=="F"&&(Ct.index[yt]=ft)),qe},Ue=function(qe,je){var nt=Se(qe),Ct=K(je),ft;if(Ct!=="F")return nt.index[Ct];for(ft=nt.first;ft;ft=ft.next)if(ft.key===je)return ft};return C(ye,{clear:function(){for(var je=this,nt=Se(je),Ct=nt.index,ft=nt.first;ft;)ft.removed=!0,ft.previous&&(ft.previous=ft.previous.next=void 0),delete Ct[ft.index],ft=ft.next;nt.first=nt.last=void 0,B?nt.size=0:je.size=0},delete:function(qe){var je=this,nt=Se(je),Ct=Ue(je,qe);if(Ct){var ft=Ct.next,Et=Ct.previous;delete nt.index[Ct.index],Ct.removed=!0,Et&&(Et.next=ft),ft&&(ft.previous=Et),nt.first===Ct&&(nt.first=ft),nt.last===Ct&&(nt.last=Et),B?nt.size--:je.size--}return!!Ct},forEach:function(je){for(var nt=Se(this),Ct=n(je,arguments.length>1?arguments[1]:void 0),ft;ft=ft?ft.next:nt.first;)for(Ct(ft.value,ft.key,this);ft&&ft.removed;)ft=ft.previous},has:function(je){return!!Ue(this,je)}}),C(ye,Ee?{get:function(je){var nt=Ue(this,je);return nt&&nt.value},set:function(je,nt){return be(this,je===0?0:je,nt)}}:{add:function(je){return be(this,je=je===0?0:je,je)}}),B&&M(ye,"size",{configurable:!0,get:function(){return Se(this).size}}),ke},setStrong:function(ae,se,Ee){var Le=se+" Iterator",ke=J(se),ye=J(Le);Y(ae,se,function(Se,be){he(this,{type:Le,target:Se,state:ke(Se),kind:be,last:void 0})},function(){for(var Se=ye(this),be=Se.kind,Ue=Se.last;Ue&&Ue.removed;)Ue=Ue.previous;return!Se.target||!(Se.last=Ue=Ue?Ue.next:Se.state.first)?(Se.target=void 0,te(void 0,!0)):te(be==="keys"?Ue.key:be==="values"?Ue.value:[Ue.key,Ue.value],!1)},Ee?"entries":"values",!Ee,!0),X(se)}}},48950:function(H,Q,i){"use strict";var E=i(43930),M=i(25785),C=i(78995).getWeakData,n=i(86036),j=i(47033),$=i(95582),U=i(11203),Y=i(70147),te=i(57311),X=i(14592),B=i(92657),K=B.set,de=B.getterFor,he=te.find,J=te.findIndex,ae=E([].splice),se=0,Ee=function(ye){return ye.frozen||(ye.frozen=new Le)},Le=function(){this.entries=[]},ke=function(ye,Se){return he(ye.entries,function(be){return be[0]===Se})};Le.prototype={get:function(ye){var Se=ke(this,ye);if(Se)return Se[1]},has:function(ye){return!!ke(this,ye)},set:function(ye,Se){var be=ke(this,ye);be?be[1]=Se:this.entries.push([ye,Se])},delete:function(ye){var Se=J(this.entries,function(be){return be[0]===ye});return~Se&&ae(this.entries,Se,1),!!~Se}},H.exports={getConstructor:function(ye,Se,be,Ue){var qe=ye(function(ft,Et){n(ft,je),K(ft,{type:Se,id:se++,frozen:void 0}),$(Et)||Y(Et,ft[Ue],{that:ft,AS_ENTRIES:be})}),je=qe.prototype,nt=de(Se),Ct=function(ft,Et,yt){var _t=nt(ft),He=C(j(Et),!0);return He===!0?Ee(_t).set(Et,yt):He[_t.id]=yt,ft};return M(je,{delete:function(ft){var Et=nt(this);if(!U(ft))return!1;var yt=C(ft);return yt===!0?Ee(Et).delete(ft):yt&&X(yt,Et.id)&&delete yt[Et.id]},has:function(Et){var yt=nt(this);if(!U(Et))return!1;var _t=C(Et);return _t===!0?Ee(yt).has(Et):_t&&X(_t,yt.id)}}),M(je,be?{get:function(Et){var yt=nt(this);if(U(Et)){var _t=C(Et);return _t===!0?Ee(yt).get(Et):_t?_t[yt.id]:void 0}},set:function(Et,yt){return Ct(this,Et,yt)}}:{add:function(Et){return Ct(this,Et,!0)}}),qe}}},1353:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(43930),n=i(6463),j=i(66511),$=i(78995),U=i(70147),Y=i(86036),te=i(21051),X=i(95582),B=i(11203),K=i(56261),de=i(8896),he=i(24807),J=i(69976);H.exports=function(ae,se,Ee){var Le=ae.indexOf("Map")!==-1,ke=ae.indexOf("Weak")!==-1,ye=Le?"set":"add",Se=M[ae],be=Se&&Se.prototype,Ue=Se,qe={},je=function(He){var bt=C(be[He]);j(be,He,He==="add"?function(st){return bt(this,st===0?0:st),this}:He==="delete"?function(Tt){return ke&&!B(Tt)?!1:bt(this,Tt===0?0:Tt)}:He==="get"?function(st){return ke&&!B(st)?void 0:bt(this,st===0?0:st)}:He==="has"?function(st){return ke&&!B(st)?!1:bt(this,st===0?0:st)}:function(st,Qe){return bt(this,st===0?0:st,Qe),this})},nt=n(ae,!te(Se)||!(ke||be.forEach&&!K(function(){new Se().entries().next()})));if(nt)Ue=Ee.getConstructor(se,ae,Le,ye),$.enable();else if(n(ae,!0)){var Ct=new Ue,ft=Ct[ye](ke?{}:-0,1)!==Ct,Et=K(function(){Ct.has(1)}),yt=de(function(He){new Se(He)}),_t=!ke&&K(function(){for(var He=new Se,bt=5;bt--;)He[ye](bt,bt);return!He.has(-0)});yt||(Ue=se(function(He,bt){Y(He,be);var Tt=J(new Se,He,Ue);return X(bt)||U(bt,Tt[ye],{that:Tt,AS_ENTRIES:Le}),Tt}),Ue.prototype=be,be.constructor=Ue),(Et||_t)&&(je("delete"),je("has"),Le&&je("get")),(_t||ft)&&je(ye),ke&&be.clear&&delete be.clear}return qe[ae]=Ue,E({global:!0,constructor:!0,forced:Ue!==Se},qe),he(Ue,ae),ke||Ee.setStrong(Ue,ae,Le),Ue}},43021:function(H,Q,i){"use strict";i(86705),i(44174);var E=i(70521),M=i(74123),C=i(11203),n=Object,j=TypeError,$=E("Map"),U=E("WeakMap"),Y=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=M(null)};Y.prototype.get=function(X,B){return this[X]||(this[X]=B())},Y.prototype.next=function(X,B,K){var de=K?this.objectsByIndex[X]||(this.objectsByIndex[X]=new U):this.primitives||(this.primitives=new $),he=de.get(B);return he||de.set(B,he=new Y),he};var te=new Y;H.exports=function(){var X=te,B=arguments.length,K,de;for(K=0;K<B;K++)C(de=arguments[K])&&(X=X.next(K,de,!0));if(this===n&&X===te)throw new j("Composite keys must contain a non-primitive component");for(K=0;K<B;K++)C(de=arguments[K])||(X=X.next(K,de,!1));return X}},64838:function(H,Q,i){"use strict";var E=i(14592),M=i(53753),C=i(72888),n=i(17567);H.exports=function(j,$,U){for(var Y=M($),te=n.f,X=C.f,B=0;B<Y.length;B++){var K=Y[B];!E(j,K)&&!(U&&E(U,K))&&te(j,K,X($,K))}}},6366:function(H,Q,i){"use strict";var E=i(56261);H.exports=!E(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},13988:function(H){"use strict";H.exports=function(Q,i){return{value:Q,done:i}}},37917:function(H,Q,i){"use strict";var E=i(27233),M=i(17567),C=i(85711);H.exports=E?function(n,j,$){return M.f(n,j,C(1,$))}:function(n,j,$){return n[j]=$,n}},85711:function(H){"use strict";H.exports=function(Q,i){return{enumerable:!(Q&1),configurable:!(Q&2),writable:!(Q&4),value:i}}},56853:function(H,Q,i){"use strict";var E=i(95612),M=i(17567),C=i(85711);H.exports=function(n,j,$){var U=E(j);U in n?M.f(n,U,C(0,$)):n[U]=$}},42917:function(H,Q,i){"use strict";var E=i(9107),M=i(17567);H.exports=function(C,n,j){return j.get&&E(j.get,n,{getter:!0}),j.set&&E(j.set,n,{setter:!0}),M.f(C,n,j)}},66511:function(H,Q,i){"use strict";var E=i(21051),M=i(17567),C=i(9107),n=i(59883);H.exports=function(j,$,U,Y){Y||(Y={});var te=Y.enumerable,X=Y.name!==void 0?Y.name:$;if(E(U)&&C(U,X,Y),Y.global)te?j[$]=U:n($,U);else{try{Y.unsafe?j[$]&&(te=!0):delete j[$]}catch(B){}te?j[$]=U:M.f(j,$,{value:U,enumerable:!1,configurable:!Y.nonConfigurable,writable:!Y.nonWritable})}return j}},25785:function(H,Q,i){"use strict";var E=i(66511);H.exports=function(M,C,n){for(var j in C)E(M,j,C[j],n);return M}},59883:function(H,Q,i){"use strict";var E=i(38386),M=Object.defineProperty;H.exports=function(C,n){try{M(E,C,{value:n,configurable:!0,writable:!0})}catch(j){E[C]=n}return n}},27233:function(H,Q,i){"use strict";var E=i(56261);H.exports=!E(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},88033:function(H,Q,i){"use strict";var E=i(38386),M=i(65570),C=i(47534),n=E.structuredClone,j=E.ArrayBuffer,$=E.MessageChannel,U=!1,Y,te,X,B;if(C)U=function(K){n(K,{transfer:[K]})};else if(j)try{$||(Y=M("worker_threads"),Y&&($=Y.MessageChannel)),$&&(te=new $,X=new j(2),B=function(K){te.port1.postMessage(null,[K])},X.byteLength===2&&(B(X),X.byteLength===0&&(U=B)))}catch(K){}H.exports=U},35955:function(H){"use strict";var Q=typeof document=="object"&&document.all,i=typeof Q=="undefined"&&Q!==void 0;H.exports={all:Q,IS_HTMLDDA:i}},94995:function(H,Q,i){"use strict";var E=i(38386),M=i(11203),C=E.document,n=M(C)&&M(C.createElement);H.exports=function(j){return n?C.createElement(j):{}}},19920:function(H){"use strict";var Q=TypeError,i=9007199254740991;H.exports=function(E){if(E>i)throw Q("Maximum allowed index exceeded");return E}},56066:function(H){"use strict";H.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},85611:function(H,Q,i){"use strict";var E=i(56105),M=i(77695);H.exports=!E&&!M&&typeof window=="object"&&typeof document=="object"},118:function(H){"use strict";H.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"},56105:function(H){"use strict";H.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},98415:function(H,Q,i){"use strict";var E=i(96715);H.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(E)},77695:function(H,Q,i){"use strict";var E=i(38386),M=i(57850);H.exports=M(E.process)==="process"},96715:function(H){"use strict";H.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""},50293:function(H,Q,i){"use strict";var E=i(38386),M=i(96715),C=E.process,n=E.Deno,j=C&&C.versions||n&&n.version,$=j&&j.v8,U,Y;$&&(U=$.split("."),Y=U[0]>0&&U[0]<4?1:+(U[0]+U[1])),!Y&&M&&(U=M.match(/Edge\/(\d+)/),(!U||U[1]>=74)&&(U=M.match(/Chrome\/(\d+)/),U&&(Y=+U[1]))),H.exports=Y},10288:function(H){"use strict";H.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},26389:function(H,Q,i){"use strict";var E=i(43930),M=Error,C=E("".replace),n=function(U){return String(new M(U).stack)}("zxcasd"),j=/\n\s*at [^:]*:[^\n]*/,$=j.test(n);H.exports=function(U,Y){if($&&typeof U=="string"&&!M.prepareStackTrace)for(;Y--;)U=C(U,j,"");return U}},14947:function(H,Q,i){"use strict";var E=i(37917),M=i(26389),C=i(52618),n=Error.captureStackTrace;H.exports=function(j,$,U,Y){C&&(n?n(j,$):E(j,"stack",M(U,Y)))}},52618:function(H,Q,i){"use strict";var E=i(56261),M=i(85711);H.exports=!E(function(){var C=new Error("a");return"stack"in C?(Object.defineProperty(C,"stack",M(1,7)),C.stack!==7):!0})},26589:function(H,Q,i){"use strict";var E=i(38386),M=i(72888).f,C=i(37917),n=i(66511),j=i(59883),$=i(64838),U=i(6463);H.exports=function(Y,te){var X=Y.target,B=Y.global,K=Y.stat,de,he,J,ae,se,Ee;if(B?he=E:K?he=E[X]||j(X,{}):he=(E[X]||{}).prototype,he)for(J in te){if(se=te[J],Y.dontCallGetSet?(Ee=M(he,J),ae=Ee&&Ee.value):ae=he[J],de=U(B?J:X+(K?".":"#")+J,Y.forced),!de&&ae!==void 0){if(typeof se==typeof ae)continue;$(se,ae)}(Y.sham||ae&&ae.sham)&&C(se,"sham",!0),n(he,J,se,Y)}}},56261:function(H){"use strict";H.exports=function(Q){try{return!!Q()}catch(i){return!0}}},10356:function(H,Q,i){"use strict";var E=i(56261);H.exports=!E(function(){return Object.isExtensible(Object.preventExtensions({}))})},97987:function(H,Q,i){"use strict";var E=i(50366),M=Function.prototype,C=M.apply,n=M.call;H.exports=typeof Reflect=="object"&&Reflect.apply||(E?n.bind(C):function(){return n.apply(C,arguments)})},9873:function(H,Q,i){"use strict";var E=i(30641),M=i(91216),C=i(50366),n=E(E.bind);H.exports=function(j,$){return M(j),$===void 0?j:C?n(j,$):function(){return j.apply($,arguments)}}},50366:function(H,Q,i){"use strict";var E=i(56261);H.exports=!E(function(){var M=function(){}.bind();return typeof M!="function"||M.hasOwnProperty("prototype")})},98789:function(H,Q,i){"use strict";var E=i(50366),M=Function.prototype.call;H.exports=E?M.bind(M):function(){return M.apply(M,arguments)}},84603:function(H,Q,i){"use strict";var E=i(43930),M=i(91216);H.exports=function(){return E(M(this))}},55832:function(H,Q,i){"use strict";var E=i(27233),M=i(14592),C=Function.prototype,n=E&&Object.getOwnPropertyDescriptor,j=M(C,"name"),$=j&&function(){}.name==="something",U=j&&(!E||E&&n(C,"name").configurable);H.exports={EXISTS:j,PROPER:$,CONFIGURABLE:U}},54447:function(H,Q,i){"use strict";var E=i(43930),M=i(91216);H.exports=function(C,n,j){try{return E(M(Object.getOwnPropertyDescriptor(C,n)[j]))}catch($){}}},30641:function(H,Q,i){"use strict";var E=i(57850),M=i(43930);H.exports=function(C){if(E(C)==="Function")return M(C)}},43930:function(H,Q,i){"use strict";var E=i(50366),M=Function.prototype,C=M.call,n=E&&M.bind.bind(C,C);H.exports=E?n:function(j){return function(){return C.apply(j,arguments)}}},54248:function(H){"use strict";var Q=TypeError;H.exports=function(i){var E=i&&i.alphabet;if(E===void 0||E==="base64"||E==="base64url")return E||"base64";throw new Q("Incorrect `alphabet` option")}},75350:function(H,Q,i){"use strict";var E=i(98789),M=i(21051),C=i(47033),n=i(81770),j=i(45532),$=i(98285),U=i(44525),Y=i(86219),te=U("asyncIterator");H.exports=function(X){var B=C(X),K=!0,de=$(B,te),he;return M(de)||(de=j(B),K=!1),de!==void 0?he=E(de,B):(he=B,K=!0),C(he),n(K?he:new Y(n(he)))}},57428:function(H,Q,i){"use strict";var E=i(98789),M=i(86219),C=i(47033),n=i(39151),j=i(81770),$=i(98285),U=i(44525),Y=U("asyncIterator");H.exports=function(te,X){var B=arguments.length<2?$(te,Y):X;return B?C(E(B,te)):new M(j(n(te)))}},39833:function(H,Q,i){"use strict";var E=i(38386);H.exports=function(M,C){var n=E[M],j=n&&n.prototype;return j&&j[C]}},70521:function(H,Q,i){"use strict";var E=i(38386),M=i(21051),C=function(n){return M(n)?n:void 0};H.exports=function(n,j){return arguments.length<2?C(E[n]):E[n]&&E[n][j]}},81770:function(H){"use strict";H.exports=function(Q){return{iterator:Q,next:Q.next,done:!1}}},7734:function(H,Q,i){"use strict";var E=i(98789),M=i(47033),C=i(81770),n=i(45532);H.exports=function(j,$){(!$||typeof j!="string")&&M(j);var U=n(j);return C(M(U!==void 0?E(U,j):j))}},45532:function(H,Q,i){"use strict";var E=i(33242),M=i(98285),C=i(95582),n=i(64782),j=i(44525),$=j("iterator");H.exports=function(U){if(!C(U))return M(U,$)||M(U,"@@iterator")||n[E(U)]}},39151:function(H,Q,i){"use strict";var E=i(98789),M=i(91216),C=i(47033),n=i(67674),j=i(45532),$=TypeError;H.exports=function(U,Y){var te=arguments.length<2?j(U):Y;if(M(te))return C(E(te,U));throw new $(n(U)+" is not iterable")}},21899:function(H,Q,i){"use strict";var E=i(43930),M=i(87487),C=i(21051),n=i(57850),j=i(66516),$=E([].push);H.exports=function(U){if(C(U))return U;if(M(U)){for(var Y=U.length,te=[],X=0;X<Y;X++){var B=U[X];typeof B=="string"?$(te,B):(typeof B=="number"||n(B)==="Number"||n(B)==="String")&&$(te,j(B))}var K=te.length,de=!0;return function(he,J){if(de)return de=!1,J;if(M(this))return J;for(var ae=0;ae<K;ae++)if(te[ae]===he)return J}}}},98285:function(H,Q,i){"use strict";var E=i(91216),M=i(95582);H.exports=function(C,n){var j=C[n];return M(j)?void 0:E(j)}},76210:function(H,Q,i){"use strict";var E=i(91216),M=i(47033),C=i(98789),n=i(65342),j=i(81770),$="Invalid size",U=RangeError,Y=TypeError,te=Math.max,X=function(B,K,de,he){this.set=B,this.size=K,this.has=de,this.keys=he};X.prototype={getIterator:function(){return j(M(C(this.keys,this.set)))},includes:function(B){return C(this.has,this.set,B)}},H.exports=function(B){M(B);var K=+B.size;if(K!==K)throw new Y($);var de=n(K);if(de<0)throw new U($);return new X(B,te(de,0),E(B.has),E(B.keys))}},79267:function(H,Q,i){"use strict";var E=i(43930),M=i(71953),C=Math.floor,n=E("".charAt),j=E("".replace),$=E("".slice),U=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Y=/\$([$&'`]|\d{1,2})/g;H.exports=function(te,X,B,K,de,he){var J=B+te.length,ae=K.length,se=Y;return de!==void 0&&(de=M(de),se=U),j(he,se,function(Ee,Le){var ke;switch(n(Le,0)){case"$":return"$";case"&":return te;case"`":return $(X,0,B);case"'":return $(X,J);case"<":ke=de[$(Le,1,-1)];break;default:var ye=+Le;if(ye===0)return Ee;if(ye>ae){var Se=C(ye/10);return Se===0?Ee:Se<=ae?K[Se-1]===void 0?n(Le,1):K[Se-1]+n(Le,1):Ee}ke=K[ye-1]}return ke===void 0?"":ke})}},38386:function(H,Q,i){"use strict";var E=function(M){return M&&M.Math===Math&&M};H.exports=E(typeof globalThis=="object"&&globalThis)||E(typeof window=="object"&&window)||E(typeof self=="object"&&self)||E(typeof i.g=="object"&&i.g)||E(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},14592:function(H,Q,i){"use strict";var E=i(43930),M=i(71953),C=E({}.hasOwnProperty);H.exports=Object.hasOwn||function(j,$){return C(M(j),$)}},82164:function(H){"use strict";H.exports={}},31981:function(H){"use strict";H.exports=function(Q,i){try{arguments.length===1?console.error(Q):console.error(Q,i)}catch(E){}}},86592:function(H,Q,i){"use strict";var E=i(70521);H.exports=E("document","documentElement")},55304:function(H,Q,i){"use strict";var E=i(27233),M=i(56261),C=i(94995);H.exports=!E&&!M(function(){return Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a!==7})},67778:function(H){"use strict";var Q=Array,i=Math.abs,E=Math.pow,M=Math.floor,C=Math.log,n=Math.LN2,j=function(U,Y,te){var X=Q(te),B=te*8-Y-1,K=(1<<B)-1,de=K>>1,he=Y===23?E(2,-24)-E(2,-77):0,J=U<0||U===0&&1/U<0?1:0,ae=0,se,Ee,Le;for(U=i(U),U!==U||U===1/0?(Ee=U!==U?1:0,se=K):(se=M(C(U)/n),Le=E(2,-se),U*Le<1&&(se--,Le*=2),se+de>=1?U+=he/Le:U+=he*E(2,1-de),U*Le>=2&&(se++,Le/=2),se+de>=K?(Ee=0,se=K):se+de>=1?(Ee=(U*Le-1)*E(2,Y),se+=de):(Ee=U*E(2,de-1)*E(2,Y),se=0));Y>=8;)X[ae++]=Ee&255,Ee/=256,Y-=8;for(se=se<<Y|Ee,B+=Y;B>0;)X[ae++]=se&255,se/=256,B-=8;return X[--ae]|=J*128,X},$=function(U,Y){var te=U.length,X=te*8-Y-1,B=(1<<X)-1,K=B>>1,de=X-7,he=te-1,J=U[he--],ae=J&127,se;for(J>>=7;de>0;)ae=ae*256+U[he--],de-=8;for(se=ae&(1<<-de)-1,ae>>=-de,de+=Y;de>0;)se=se*256+U[he--],de-=8;if(ae===0)ae=1-K;else{if(ae===B)return se?NaN:J?-1/0:1/0;se+=E(2,Y),ae-=K}return(J?-1:1)*se*E(2,ae-Y)};H.exports={pack:j,unpack:$}},9984:function(H,Q,i){"use strict";var E=i(43930),M=i(56261),C=i(57850),n=Object,j=E("".split);H.exports=M(function(){return!n("z").propertyIsEnumerable(0)})?function($){return C($)==="String"?j($,""):n($)}:n},69976:function(H,Q,i){"use strict";var E=i(21051),M=i(11203),C=i(34205);H.exports=function(n,j,$){var U,Y;return C&&E(U=j.constructor)&&U!==$&&M(Y=U.prototype)&&Y!==$.prototype&&C(n,Y),n}},48840:function(H,Q,i){"use strict";var E=i(43930),M=i(21051),C=i(49304),n=E(Function.toString);M(C.inspectSource)||(C.inspectSource=function(j){return n(j)}),H.exports=C.inspectSource},67029:function(H,Q,i){"use strict";var E=i(11203),M=i(37917);H.exports=function(C,n){E(n)&&"cause"in n&&M(C,"cause",n.cause)}},78995:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(82164),n=i(11203),j=i(14592),$=i(17567).f,U=i(16153),Y=i(3025),te=i(21368),X=i(86482),B=i(10356),K=!1,de=X("meta"),he=0,J=function(ye){$(ye,de,{value:{objectID:"O"+he++,weakData:{}}})},ae=function(ye,Se){if(!n(ye))return typeof ye=="symbol"?ye:(typeof ye=="string"?"S":"P")+ye;if(!j(ye,de)){if(!te(ye))return"F";if(!Se)return"E";J(ye)}return ye[de].objectID},se=function(ye,Se){if(!j(ye,de)){if(!te(ye))return!0;if(!Se)return!1;J(ye)}return ye[de].weakData},Ee=function(ye){return B&&K&&te(ye)&&!j(ye,de)&&J(ye),ye},Le=function(){ke.enable=function(){},K=!0;var ye=U.f,Se=M([].splice),be={};be[de]=1,ye(be).length&&(U.f=function(Ue){for(var qe=ye(Ue),je=0,nt=qe.length;je<nt;je++)if(qe[je]===de){Se(qe,je,1);break}return qe},E({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Y.f}))},ke=H.exports={enable:Le,fastKey:ae,getWeakData:se,onFreeze:Ee};C[de]=!0},92657:function(H,Q,i){"use strict";var E=i(26084),M=i(38386),C=i(11203),n=i(37917),j=i(14592),$=i(49304),U=i(81004),Y=i(82164),te="Object already initialized",X=M.TypeError,B=M.WeakMap,K,de,he,J=function(Le){return he(Le)?de(Le):K(Le,{})},ae=function(Le){return function(ke){var ye;if(!C(ke)||(ye=de(ke)).type!==Le)throw new X("Incompatible receiver, "+Le+" required");return ye}};if(E||$.state){var se=$.state||($.state=new B);se.get=se.get,se.has=se.has,se.set=se.set,K=function(Le,ke){if(se.has(Le))throw new X(te);return ke.facade=Le,se.set(Le,ke),ke},de=function(Le){return se.get(Le)||{}},he=function(Le){return se.has(Le)}}else{var Ee=U("state");Y[Ee]=!0,K=function(Le,ke){if(j(Le,Ee))throw new X(te);return ke.facade=Le,n(Le,Ee,ke),ke},de=function(Le){return j(Le,Ee)?Le[Ee]:{}},he=function(Le){return j(Le,Ee)}}H.exports={set:K,get:de,has:he,enforce:J,getterFor:ae}},43931:function(H,Q,i){"use strict";var E=i(44525),M=i(64782),C=E("iterator"),n=Array.prototype;H.exports=function(j){return j!==void 0&&(M.Array===j||n[C]===j)}},87487:function(H,Q,i){"use strict";var E=i(57850);H.exports=Array.isArray||function(C){return E(C)==="Array"}},63113:function(H,Q,i){"use strict";var E=i(33242);H.exports=function(M){var C=E(M);return C==="BigInt64Array"||C==="BigUint64Array"}},21051:function(H,Q,i){"use strict";var E=i(35955),M=E.all;H.exports=E.IS_HTMLDDA?function(C){return typeof C=="function"||C===M}:function(C){return typeof C=="function"}},83808:function(H,Q,i){"use strict";var E=i(43930),M=i(56261),C=i(21051),n=i(33242),j=i(70521),$=i(48840),U=function(){},Y=[],te=j("Reflect","construct"),X=/^\s*(?:class|function)\b/,B=E(X.exec),K=!X.test(U),de=function(ae){if(!C(ae))return!1;try{return te(U,Y,ae),!0}catch(se){return!1}},he=function(ae){if(!C(ae))return!1;switch(n(ae)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return K||!!B(X,$(ae))}catch(se){return!0}};he.sham=!0,H.exports=!te||M(function(){var J;return de(de.call)||!de(Object)||!de(function(){J=!0})||J})?he:de},6463:function(H,Q,i){"use strict";var E=i(56261),M=i(21051),C=/#|\.prototype\./,n=function(te,X){var B=$[j(te)];return B===Y?!0:B===U?!1:M(X)?E(X):!!X},j=n.normalize=function(te){return String(te).replace(C,".").toLowerCase()},$=n.data={},U=n.NATIVE="N",Y=n.POLYFILL="P";H.exports=n},25979:function(H,Q,i){"use strict";var E=i(33242),M=i(14592),C=i(95582),n=i(44525),j=i(64782),$=n("iterator"),U=Object;H.exports=function(Y){if(C(Y))return!1;var te=U(Y);return te[$]!==void 0||"@@iterator"in te||M(j,E(te))}},95582:function(H){"use strict";H.exports=function(Q){return Q==null}},11203:function(H,Q,i){"use strict";var E=i(21051),M=i(35955),C=M.all;H.exports=M.IS_HTMLDDA?function(n){return typeof n=="object"?n!==null:E(n)||n===C}:function(n){return typeof n=="object"?n!==null:E(n)}},41876:function(H){"use strict";H.exports=!1},54931:function(H,Q,i){"use strict";var E=i(11203),M=i(92657).get;H.exports=function(n){if(!E(n))return!1;var j=M(n);return!!j&&j.type==="RawJSON"}},82552:function(H,Q,i){"use strict";var E=i(11203),M=i(57850),C=i(44525),n=C("match");H.exports=function(j){var $;return E(j)&&(($=j[n])!==void 0?!!$:M(j)==="RegExp")}},89934:function(H,Q,i){"use strict";var E=i(70521),M=i(21051),C=i(59479),n=i(12806),j=Object;H.exports=n?function($){return typeof $=="symbol"}:function($){var U=E("Symbol");return M(U)&&C(U.prototype,j($))}},12655:function(H,Q,i){"use strict";var E=i(98789);H.exports=function(M,C,n){for(var j=n?M:M.iterator,$=M.next,U,Y;!(U=E($,j)).done;)if(Y=C(U.value),Y!==void 0)return Y}},70147:function(H,Q,i){"use strict";var E=i(9873),M=i(98789),C=i(47033),n=i(67674),j=i(43931),$=i(48109),U=i(59479),Y=i(39151),te=i(45532),X=i(90431),B=TypeError,K=function(he,J){this.stopped=he,this.result=J},de=K.prototype;H.exports=function(he,J,ae){var se=ae&&ae.that,Ee=!!(ae&&ae.AS_ENTRIES),Le=!!(ae&&ae.IS_RECORD),ke=!!(ae&&ae.IS_ITERATOR),ye=!!(ae&&ae.INTERRUPTED),Se=E(J,se),be,Ue,qe,je,nt,Ct,ft,Et=function(_t){return be&&X(be,"normal",_t),new K(!0,_t)},yt=function(_t){return Ee?(C(_t),ye?Se(_t[0],_t[1],Et):Se(_t[0],_t[1])):ye?Se(_t,Et):Se(_t)};if(Le)be=he.iterator;else if(ke)be=he;else{if(Ue=te(he),!Ue)throw new B(n(he)+" is not iterable");if(j(Ue)){for(qe=0,je=$(he);je>qe;qe++)if(nt=yt(he[qe]),nt&&U(de,nt))return nt;return new K(!1)}be=Y(he,Ue)}for(Ct=Le?he.next:be.next;!(ft=M(Ct,be)).done;){try{nt=yt(ft.value)}catch(_t){X(be,"throw",_t)}if(typeof nt=="object"&&nt&&U(de,nt))return nt}return new K(!1)}},90431:function(H,Q,i){"use strict";var E=i(98789),M=i(47033),C=i(98285);H.exports=function(n,j,$){var U,Y;M(n);try{if(U=C(n,"return"),!U){if(j==="throw")throw $;return $}U=E(U,n)}catch(te){Y=!0,U=te}if(j==="throw")throw $;if(Y)throw U;return M(U),$}},92388:function(H,Q,i){"use strict";var E=i(71558).IteratorPrototype,M=i(74123),C=i(85711),n=i(24807),j=i(64782),$=function(){return this};H.exports=function(U,Y,te,X){var B=Y+" Iterator";return U.prototype=M(E,{next:C(+!X,te)}),n(U,B,!1,!0),j[B]=$,U}},96813:function(H,Q,i){"use strict";var E=i(98789),M=i(74123),C=i(37917),n=i(25785),j=i(44525),$=i(92657),U=i(98285),Y=i(71558).IteratorPrototype,te=i(13988),X=i(90431),B=j("toStringTag"),K="IteratorHelper",de="WrapForValidIterator",he=$.set,J=function(Ee){var Le=$.getterFor(Ee?de:K);return n(M(Y),{next:function(){var ye=Le(this);if(Ee)return ye.nextHandler();try{var Se=ye.done?void 0:ye.nextHandler();return te(Se,ye.done)}catch(be){throw ye.done=!0,be}},return:function(){var ke=Le(this),ye=ke.iterator;if(ke.done=!0,Ee){var Se=U(ye,"return");return Se?E(Se,ye):te(void 0,!0)}if(ke.inner)try{X(ke.inner.iterator,"normal")}catch(be){return X(ye,"throw",be)}return X(ye,"normal"),te(void 0,!0)}})},ae=J(!0),se=J(!1);C(se,B,"Iterator Helper"),H.exports=function(Ee,Le){var ke=function(Se,be){be?(be.iterator=Se.iterator,be.next=Se.next):be=Se,be.type=Le?de:K,be.nextHandler=Ee,be.counter=0,be.done=!1,he(this,be)};return ke.prototype=Le?ae:se,ke}},2482:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(41876),n=i(55832),j=i(21051),$=i(92388),U=i(43587),Y=i(34205),te=i(24807),X=i(37917),B=i(66511),K=i(44525),de=i(64782),he=i(71558),J=n.PROPER,ae=n.CONFIGURABLE,se=he.IteratorPrototype,Ee=he.BUGGY_SAFARI_ITERATORS,Le=K("iterator"),ke="keys",ye="values",Se="entries",be=function(){return this};H.exports=function(Ue,qe,je,nt,Ct,ft,Et){$(je,qe,nt);var yt=function(ue){if(ue===Ct&&st)return st;if(!Ee&&ue&&ue in bt)return bt[ue];switch(ue){case ke:return function(){return new je(this,ue)};case ye:return function(){return new je(this,ue)};case Se:return function(){return new je(this,ue)}}return function(){return new je(this)}},_t=qe+" Iterator",He=!1,bt=Ue.prototype,Tt=bt[Le]||bt["@@iterator"]||Ct&&bt[Ct],st=!Ee&&Tt||yt(Ct),Qe=qe==="Array"&&bt.entries||Tt,mt,Ht,vt;if(Qe&&(mt=U(Qe.call(new Ue)),mt!==Object.prototype&&mt.next&&(!C&&U(mt)!==se&&(Y?Y(mt,se):j(mt[Le])||B(mt,Le,be)),te(mt,_t,!0,!0),C&&(de[_t]=be))),J&&Ct===ye&&Tt&&Tt.name!==ye&&(!C&&ae?X(bt,"name",ye):(He=!0,st=function(){return M(Tt,this)})),Ct)if(Ht={values:yt(ye),keys:ft?st:yt(ke),entries:yt(Se)},Et)for(vt in Ht)(Ee||He||!(vt in bt))&&B(bt,vt,Ht[vt]);else E({target:qe,proto:!0,forced:Ee||He},Ht);return(!C||Et)&&bt[Le]!==st&&B(bt,Le,st,{name:Ct}),de[qe]=st,Ht}},38144:function(H,Q,i){"use strict";var E=i(98789),M=i(24736),C=function(n,j){return[j,n]};H.exports=function(){return E(M,this,C)}},24736:function(H,Q,i){"use strict";var E=i(98789),M=i(91216),C=i(47033),n=i(81770),j=i(96813),$=i(47967),U=j(function(){var Y=this.iterator,te=C(E(this.next,Y)),X=this.done=!!te.done;if(!X)return $(Y,this.mapper,[te.value,this.counter++],!0)});H.exports=function(te){return C(this),M(te),new U(n(this),{mapper:te})}},71558:function(H,Q,i){"use strict";var E=i(56261),M=i(21051),C=i(11203),n=i(74123),j=i(43587),$=i(66511),U=i(44525),Y=i(41876),te=U("iterator"),X=!1,B,K,de;[].keys&&(de=[].keys(),"next"in de?(K=j(j(de)),K!==Object.prototype&&(B=K)):X=!0);var he=!C(B)||E(function(){var J={};return B[te].call(J)!==J});he?B={}:Y&&(B=n(B)),M(B[te])||$(B,te,function(){return this}),H.exports={IteratorPrototype:B,BUGGY_SAFARI_ITERATORS:X}},64782:function(H){"use strict";H.exports={}},48109:function(H,Q,i){"use strict";var E=i(96177);H.exports=function(M){return E(M.length)}},9107:function(H,Q,i){"use strict";var E=i(43930),M=i(56261),C=i(21051),n=i(14592),j=i(27233),$=i(55832).CONFIGURABLE,U=i(48840),Y=i(92657),te=Y.enforce,X=Y.get,B=String,K=Object.defineProperty,de=E("".slice),he=E("".replace),J=E([].join),ae=j&&!M(function(){return K(function(){},"length",{value:8}).length!==8}),se=String(String).split("String"),Ee=H.exports=function(Le,ke,ye){de(B(ke),0,7)==="Symbol("&&(ke="["+he(B(ke),/^Symbol\(([^)]*)\)/,"$1")+"]"),ye&&ye.getter&&(ke="get "+ke),ye&&ye.setter&&(ke="set "+ke),(!n(Le,"name")||$&&Le.name!==ke)&&(j?K(Le,"name",{value:ke,configurable:!0}):Le.name=ke),ae&&ye&&n(ye,"arity")&&Le.length!==ye.arity&&K(Le,"length",{value:ye.arity});try{ye&&n(ye,"constructor")&&ye.constructor?j&&K(Le,"prototype",{writable:!1}):Le.prototype&&(Le.prototype=void 0)}catch(be){}var Se=te(Le);return n(Se,"source")||(Se.source=J(se,typeof ke=="string"?ke:"")),Le};Function.prototype.toString=Ee(function(){return C(this)&&X(this).source||U(this)},"toString")},92192:function(H,Q,i){"use strict";var E=i(43930),M=Map.prototype;H.exports={Map,set:E(M.set),get:E(M.get),has:E(M.has),remove:E(M.delete),proto:M}},73536:function(H,Q,i){"use strict";var E=i(43930),M=i(12655),C=i(92192),n=C.Map,j=C.proto,$=E(j.forEach),U=E(j.entries),Y=U(new n).next;H.exports=function(te,X,B){return B?M({iterator:U(te),next:Y},function(K){return X(K[1],K[0])}):$(te,X)}},23766:function(H,Q,i){"use strict";var E=i(98789),M=i(91216),C=i(21051),n=i(47033),j=TypeError;H.exports=function(U,Y){var te=n(this),X=M(te.get),B=M(te.has),K=M(te.set),de=arguments.length>2?arguments[2]:void 0,he;if(!C(Y)&&!C(de))throw new j("At least one callback required");return E(B,te,U)?(he=E(X,te,U),C(Y)&&(he=Y(he),E(K,te,U,he))):C(de)&&(he=de(),E(K,te,U,he)),he}},99953:function(H,Q,i){"use strict";var E=i(80053),M=.0009765625,C=65504,n=6103515625e-14;H.exports=Math.f16round||function($){return E($,M,C,n)}},80053:function(H,Q,i){"use strict";var E=i(68128),M=Math.abs,C=2220446049250313e-31,n=1/C,j=function($){return $+n-n};H.exports=function($,U,Y,te){var X=+$,B=M(X),K=E(X);if(B<te)return K*j(B/te/U)*te*U;var de=(1+U/C)*B,he=de-(de-B);return he>Y||he!==he?K*(1/0):K*he}},18208:function(H,Q,i){"use strict";var E=i(80053),M=11920928955078125e-23,C=34028234663852886e22,n=11754943508222875e-54;H.exports=Math.fround||function($){return E($,M,C,n)}},60114:function(H){"use strict";H.exports=Math.scale||function(i,E,M,C,n){var j=+i,$=+E,U=+M,Y=+C,te=+n;return j!==j||$!==$||U!==U||Y!==Y||te!==te?NaN:j===1/0||j===-1/0?j:(j-$)*(te-Y)/(U-$)+Y}},68128:function(H){"use strict";H.exports=Math.sign||function(i){var E=+i;return E===0||E!==E?E:E<0?-1:1}},51108:function(H){"use strict";var Q=Math.ceil,i=Math.floor;H.exports=Math.trunc||function(M){var C=+M;return(C>0?i:Q)(C)}},97343:function(H,Q,i){"use strict";var E=i(56261);H.exports=!E(function(){var M="9007199254740993",C=JSON.rawJSON(M);return!JSON.isRawJSON(C)||JSON.stringify(C)!==M})},33701:function(H,Q,i){"use strict";var E=i(91216),M=TypeError,C=function(n){var j,$;this.promise=new n(function(U,Y){if(j!==void 0||$!==void 0)throw new M("Bad Promise constructor");j=U,$=Y}),this.resolve=E(j),this.reject=E($)};H.exports.f=function(n){return new C(n)}},58955:function(H,Q,i){"use strict";var E=i(66516);H.exports=function(M,C){return M===void 0?arguments.length<2?"":C:E(M)}},49551:function(H){"use strict";var Q=RangeError;H.exports=function(i){if(i===i)return i;throw new Q("NaN is not allowed")}},19447:function(H,Q,i){"use strict";var E=i(38386),M=E.isFinite;H.exports=Number.isFinite||function(n){return typeof n=="number"&&M(n)}},4048:function(H,Q,i){"use strict";var E=i(92657),M=i(92388),C=i(13988),n=i(95582),j=i(11203),$=i(42917),U=i(27233),Y="Incorrect Iterator.range arguments",te="NumericRangeIterator",X=E.set,B=E.getterFor(te),K=RangeError,de=TypeError,he=M(function(se,Ee,Le,ke,ye,Se){if(typeof se!=ke||Ee!==1/0&&Ee!==-1/0&&typeof Ee!=ke)throw new de(Y);if(se===1/0||se===-1/0)throw new K(Y);var be=Ee>se,Ue=!1,qe;if(Le===void 0)qe=void 0;else if(j(Le))qe=Le.step,Ue=!!Le.inclusive;else if(typeof Le==ke)qe=Le;else throw new de(Y);if(n(qe)&&(qe=be?Se:-Se),typeof qe!=ke)throw new de(Y);if(qe===1/0||qe===-1/0||qe===ye&&se!==Ee)throw new K(Y);var je=se!==se||Ee!==Ee||qe!==qe||Ee>se!=qe>ye;X(this,{type:te,start:se,end:Ee,step:qe,inclusive:Ue,hitsEnd:je,currentCount:ye,zero:ye}),U||(this.start=se,this.end=Ee,this.step=qe,this.inclusive=Ue)},te,function(){var se=B(this);if(se.hitsEnd)return C(void 0,!0);var Ee=se.start,Le=se.end,ke=se.step,ye=Ee+ke*se.currentCount++;ye===Le&&(se.hitsEnd=!0);var Se=se.inclusive,be;return Le>Ee?be=Se?ye>Le:ye>=Le:be=Se?Le>ye:Le>=ye,be?(se.hitsEnd=!0,C(void 0,!0)):C(ye,!1)}),J=function(ae){$(he.prototype,ae,{get:function(){return B(this)[ae]},set:function(){},configurable:!0,enumerable:!1})};U&&(J("start"),J("end"),J("inclusive"),J("step")),H.exports=he},74123:function(H,Q,i){"use strict";var E=i(47033),M=i(18610),C=i(10288),n=i(82164),j=i(86592),$=i(94995),U=i(81004),Y=">",te="<",X="prototype",B="script",K=U("IE_PROTO"),de=function(){},he=function(Le){return te+B+Y+Le+te+"/"+B+Y},J=function(Le){Le.write(he("")),Le.close();var ke=Le.parentWindow.Object;return Le=null,ke},ae=function(){var Le=$("iframe"),ke="java"+B+":",ye;return Le.style.display="none",j.appendChild(Le),Le.src=String(ke),ye=Le.contentWindow.document,ye.open(),ye.write(he("document.F=Object")),ye.close(),ye.F},se,Ee=function(){try{se=new ActiveXObject("htmlfile")}catch(ke){}Ee=typeof document!="undefined"?document.domain&&se?J(se):ae():J(se);for(var Le=C.length;Le--;)delete Ee[X][C[Le]];return Ee()};n[K]=!0,H.exports=Object.create||function(ke,ye){var Se;return ke!==null?(de[X]=E(ke),Se=new de,de[X]=null,Se[K]=ke):Se=Ee(),ye===void 0?Se:M.f(Se,ye)}},18610:function(H,Q,i){"use strict";var E=i(27233),M=i(19850),C=i(17567),n=i(47033),j=i(42235),$=i(1725);Q.f=E&&!M?Object.defineProperties:function(Y,te){n(Y);for(var X=j(te),B=$(te),K=B.length,de=0,he;K>de;)C.f(Y,he=B[de++],X[he]);return Y}},17567:function(H,Q,i){"use strict";var E=i(27233),M=i(55304),C=i(19850),n=i(47033),j=i(95612),$=TypeError,U=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,te="enumerable",X="configurable",B="writable";Q.f=E?C?function(de,he,J){if(n(de),he=j(he),n(J),typeof de=="function"&&he==="prototype"&&"value"in J&&B in J&&!J[B]){var ae=Y(de,he);ae&&ae[B]&&(de[he]=J.value,J={configurable:X in J?J[X]:ae[X],enumerable:te in J?J[te]:ae[te],writable:!1})}return U(de,he,J)}:U:function(de,he,J){if(n(de),he=j(he),n(J),M)try{return U(de,he,J)}catch(ae){}if("get"in J||"set"in J)throw new $("Accessors not supported");return"value"in J&&(de[he]=J.value),de}},72888:function(H,Q,i){"use strict";var E=i(27233),M=i(98789),C=i(96737),n=i(85711),j=i(42235),$=i(95612),U=i(14592),Y=i(55304),te=Object.getOwnPropertyDescriptor;Q.f=E?te:function(B,K){if(B=j(B),K=$(K),Y)try{return te(B,K)}catch(de){}if(U(B,K))return n(!M(C.f,B,K),B[K])}},3025:function(H,Q,i){"use strict";var E=i(57850),M=i(42235),C=i(16153).f,n=i(43420),j=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$=function(U){try{return C(U)}catch(Y){return n(j)}};H.exports.f=function(Y){return j&&E(Y)==="Window"?$(Y):C(M(Y))}},16153:function(H,Q,i){"use strict";var E=i(6474),M=i(10288),C=M.concat("length","prototype");Q.f=Object.getOwnPropertyNames||function(j){return E(j,C)}},23998:function(H,Q){"use strict";Q.f=Object.getOwnPropertySymbols},43587:function(H,Q,i){"use strict";var E=i(14592),M=i(21051),C=i(71953),n=i(81004),j=i(6366),$=n("IE_PROTO"),U=Object,Y=U.prototype;H.exports=j?U.getPrototypeOf:function(te){var X=C(te);if(E(X,$))return X[$];var B=X.constructor;return M(B)&&X instanceof B?B.prototype:X instanceof U?Y:null}},21368:function(H,Q,i){"use strict";var E=i(56261),M=i(11203),C=i(57850),n=i(29972),j=Object.isExtensible,$=E(function(){j(1)});H.exports=$||n?function(Y){return!M(Y)||n&&C(Y)==="ArrayBuffer"?!1:j?j(Y):!0}:j},59479:function(H,Q,i){"use strict";var E=i(43930);H.exports=E({}.isPrototypeOf)},75902:function(H,Q,i){"use strict";var E=i(92657),M=i(92388),C=i(13988),n=i(14592),j=i(1725),$=i(71953),U="Object Iterator",Y=E.set,te=E.getterFor(U);H.exports=M(function(B,K){var de=$(B);Y(this,{type:U,mode:K,object:de,keys:j(de),index:0})},"Object",function(){for(var B=te(this),K=B.keys;;){if(K===null||B.index>=K.length)return B.object=B.keys=null,C(void 0,!0);var de=K[B.index++],he=B.object;if(n(he,de)){switch(B.mode){case"keys":return C(de,!1);case"values":return C(he[de],!1)}return C([de,he[de]],!1)}}})},6474:function(H,Q,i){"use strict";var E=i(43930),M=i(14592),C=i(42235),n=i(87156).indexOf,j=i(82164),$=E([].push);H.exports=function(U,Y){var te=C(U),X=0,B=[],K;for(K in te)!M(j,K)&&M(te,K)&&$(B,K);for(;Y.length>X;)M(te,K=Y[X++])&&(~n(B,K)||$(B,K));return B}},1725:function(H,Q,i){"use strict";var E=i(6474),M=i(10288);H.exports=Object.keys||function(n){return E(n,M)}},96737:function(H,Q){"use strict";var i={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,M=E&&!i.call({1:2},1);Q.f=M?function(n){var j=E(this,n);return!!j&&j.enumerable}:i},34205:function(H,Q,i){"use strict";var E=i(54447),M=i(47033),C=i(993);H.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,j={},$;try{$=E(Object.prototype,"__proto__","set"),$(j,[]),n=j instanceof Array}catch(U){}return function(Y,te){return M(Y),C(te),n?$(Y,te):Y.__proto__=te,Y}}():void 0)},73402:function(H,Q,i){"use strict";var E=i(98789),M=i(21051),C=i(11203),n=TypeError;H.exports=function(j,$){var U,Y;if($==="string"&&M(U=j.toString)&&!C(Y=E(U,j))||M(U=j.valueOf)&&!C(Y=E(U,j))||$!=="string"&&M(U=j.toString)&&!C(Y=E(U,j)))return Y;throw new n("Can't convert object to primitive value")}},53753:function(H,Q,i){"use strict";var E=i(70521),M=i(43930),C=i(16153),n=i(23998),j=i(47033),$=M([].concat);H.exports=E("Reflect","ownKeys")||function(Y){var te=C.f(j(Y)),X=n.f;return X?$(te,X(Y)):te}},98224:function(H,Q,i){"use strict";var E=i(43930),M=i(14592),C=SyntaxError,n=parseInt,j=String.fromCharCode,$=E("".charAt),U=E("".slice),Y=E(/./.exec),te={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},X=/^[\da-f]{4}$/i,B=/^[\u0000-\u001F]$/;H.exports=function(K,de){for(var he=!0,J="";de<K.length;){var ae=$(K,de);if(ae==="\\"){var se=U(K,de,de+2);if(M(te,se))J+=te[se],de+=2;else if(se==="\\u"){de+=2;var Ee=U(K,de,de+4);if(!Y(X,Ee))throw new C("Bad Unicode escape at: "+de);J+=j(n(Ee,16)),de+=4}else throw new C('Unknown escape sequence: "'+se+'"')}else if(ae==='"'){he=!1,de++;break}else{if(Y(B,ae))throw new C("Bad control character in string literal at: "+de);J+=ae,de++}}if(he)throw new C("Unterminated string at: "+de);return{value:J,end:de}}},56895:function(H,Q,i){"use strict";var E=i(38386);H.exports=E},59683:function(H){"use strict";H.exports=function(Q){try{return{error:!1,value:Q()}}catch(i){return{error:!0,value:i}}}},31703:function(H,Q,i){"use strict";var E=i(38386),M=i(29800),C=i(21051),n=i(6463),j=i(48840),$=i(44525),U=i(85611),Y=i(56105),te=i(41876),X=i(50293),B=M&&M.prototype,K=$("species"),de=!1,he=C(E.PromiseRejectionEvent),J=n("Promise",function(){var ae=j(M),se=ae!==String(M);if(!se&&X===66||te&&!(B.catch&&B.finally))return!0;if(!X||X<51||!/native code/.test(ae)){var Ee=new M(function(ye){ye(1)}),Le=function(ye){ye(function(){},function(){})},ke=Ee.constructor={};if(ke[K]=Le,de=Ee.then(function(){})instanceof Le,!de)return!0}return!se&&(U||Y)&&!he});H.exports={CONSTRUCTOR:J,REJECTION_EVENT:he,SUBCLASSING:de}},29800:function(H,Q,i){"use strict";var E=i(38386);H.exports=E.Promise},46805:function(H,Q,i){"use strict";var E=i(29800),M=i(8896),C=i(31703).CONSTRUCTOR;H.exports=C||!M(function(n){E.all(n).then(void 0,function(){})})},81744:function(H,Q,i){"use strict";var E=i(17567).f;H.exports=function(M,C,n){n in M||E(M,n,{configurable:!0,get:function(){return C[n]},set:function(j){C[n]=j}})}},73327:function(H,Q,i){"use strict";i(86705),i(44174);var E=i(70521),M=i(43930),C=i(8688),n=E("Map"),j=E("WeakMap"),$=M([].push),U=C("metadata"),Y=U.store||(U.store=new j),te=function(J,ae,se){var Ee=Y.get(J);if(!Ee){if(!se)return;Y.set(J,Ee=new n)}var Le=Ee.get(ae);if(!Le){if(!se)return;Ee.set(ae,Le=new n)}return Le},X=function(J,ae,se){var Ee=te(ae,se,!1);return Ee===void 0?!1:Ee.has(J)},B=function(J,ae,se){var Ee=te(ae,se,!1);return Ee===void 0?void 0:Ee.get(J)},K=function(J,ae,se,Ee){te(se,Ee,!0).set(J,ae)},de=function(J,ae){var se=te(J,ae,!1),Ee=[];return se&&se.forEach(function(Le,ke){$(Ee,ke)}),Ee},he=function(J){return J===void 0||typeof J=="symbol"?J:String(J)};H.exports={store:Y,getMap:te,has:X,get:B,set:K,keys:de,toKey:he}},19780:function(H,Q,i){"use strict";var E=i(47033);H.exports=function(){var M=E(this),C="";return M.hasIndices&&(C+="d"),M.global&&(C+="g"),M.ignoreCase&&(C+="i"),M.multiline&&(C+="m"),M.dotAll&&(C+="s"),M.unicode&&(C+="u"),M.unicodeSets&&(C+="v"),M.sticky&&(C+="y"),C}},45448:function(H,Q,i){"use strict";var E=i(98789),M=i(14592),C=i(59479),n=i(19780),j=RegExp.prototype;H.exports=function($){var U=$.flags;return U===void 0&&!("flags"in j)&&!M($,"flags")&&C(j,$)?E(n,$):U}},31628:function(H,Q,i){"use strict";var E=i(95582),M=TypeError;H.exports=function(C){if(E(C))throw new M("Can't call method on "+C);return C}},56472:function(H){"use strict";H.exports=function(Q,i){return Q===i||Q!==Q&&i!==i}},13745:function(H,Q,i){"use strict";var E=i(38386),M=i(97987),C=i(21051),n=i(118),j=i(96715),$=i(49554),U=i(93107),Y=E.Function,te=/MSIE .\./.test(j)||n&&function(){var X=E.Bun.version.split(".");return X.length<3||X[0]==="0"&&(X[1]<3||X[1]==="3"&&X[2]==="0")}();H.exports=function(X,B){var K=B?2:1;return te?function(de,he){var J=U(arguments.length,1)>K,ae=C(de)?de:Y(de),se=J?$(arguments,K):[],Ee=J?function(){M(ae,this,se)}:ae;return B?X(Ee,he):X(Ee)}:X}},79453:function(H,Q,i){"use strict";var E=i(81343),M=i(12834),C=E.Set,n=E.add;H.exports=function(j){var $=new C;return M(j,function(U){n($,U)}),$}},58367:function(H,Q,i){"use strict";var E=i(19397),M=i(81343),C=i(79453),n=i(49743),j=i(76210),$=i(12834),U=i(12655),Y=M.has,te=M.remove;H.exports=function(B){var K=E(this),de=j(B),he=C(K);return n(K)<=de.size?$(K,function(J){de.includes(J)&&te(he,J)}):U(de.getIterator(),function(J){Y(K,J)&&te(he,J)}),he}},81343:function(H,Q,i){"use strict";var E=i(43930),M=Set.prototype;H.exports={Set,add:E(M.add),has:E(M.has),remove:E(M.delete),proto:M}},91054:function(H,Q,i){"use strict";var E=i(19397),M=i(81343),C=i(49743),n=i(76210),j=i(12834),$=i(12655),U=M.Set,Y=M.add,te=M.has;H.exports=function(B){var K=E(this),de=n(B),he=new U;return C(K)>de.size?$(de.getIterator(),function(J){te(K,J)&&Y(he,J)}):j(K,function(J){de.includes(J)&&Y(he,J)}),he}},94892:function(H,Q,i){"use strict";var E=i(19397),M=i(81343).has,C=i(49743),n=i(76210),j=i(12834),$=i(12655),U=i(90431);H.exports=function(te){var X=E(this),B=n(te);if(C(X)<=B.size)return j(X,function(de){if(B.includes(de))return!1},!0)!==!1;var K=B.getIterator();return $(K,function(de){if(M(X,de))return U(K,"normal",!1)})!==!1}},70351:function(H,Q,i){"use strict";var E=i(19397),M=i(49743),C=i(12834),n=i(76210);H.exports=function($){var U=E(this),Y=n($);return M(U)>Y.size?!1:C(U,function(te){if(!Y.includes(te))return!1},!0)!==!1}},48766:function(H,Q,i){"use strict";var E=i(19397),M=i(81343).has,C=i(49743),n=i(76210),j=i(12655),$=i(90431);H.exports=function(Y){var te=E(this),X=n(Y);if(C(te)<X.size)return!1;var B=X.getIterator();return j(B,function(K){if(!M(te,K))return $(B,"normal",!1)})!==!1}},12834:function(H,Q,i){"use strict";var E=i(43930),M=i(12655),C=i(81343),n=C.Set,j=C.proto,$=E(j.forEach),U=E(j.keys),Y=U(new n).next;H.exports=function(te,X,B){return B?M({iterator:U(te),next:Y},X):$(te,X)}},47607:function(H,Q,i){"use strict";var E=i(70521),M=function(C){return{size:C,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};H.exports=function(C){var n=E("Set");try{new n()[C](M(0));try{return new n()[C](M(-1)),!1}catch(j){return!0}}catch(j){return!1}}},49743:function(H,Q,i){"use strict";var E=i(54447),M=i(81343);H.exports=E(M.proto,"size","get")||function(C){return C.size}},39693:function(H,Q,i){"use strict";var E=i(70521),M=i(42917),C=i(44525),n=i(27233),j=C("species");H.exports=function($){var U=E($);n&&U&&!U[j]&&M(U,j,{configurable:!0,get:function(){return this}})}},1605:function(H,Q,i){"use strict";var E=i(19397),M=i(81343),C=i(79453),n=i(76210),j=i(12655),$=M.add,U=M.has,Y=M.remove;H.exports=function(X){var B=E(this),K=n(X).getIterator(),de=C(B);return j(K,function(he){U(B,he)?Y(de,he):$(de,he)}),de}},24807:function(H,Q,i){"use strict";var E=i(17567).f,M=i(14592),C=i(44525),n=C("toStringTag");H.exports=function(j,$,U){j&&!U&&(j=j.prototype),j&&!M(j,n)&&E(j,n,{configurable:!0,value:$})}},31130:function(H,Q,i){"use strict";var E=i(19397),M=i(81343).add,C=i(79453),n=i(76210),j=i(12655);H.exports=function(U){var Y=E(this),te=n(U).getIterator(),X=C(Y);return j(te,function(B){M(X,B)}),X}},81004:function(H,Q,i){"use strict";var E=i(8688),M=i(86482),C=E("keys");H.exports=function(n){return C[n]||(C[n]=M(n))}},49304:function(H,Q,i){"use strict";var E=i(38386),M=i(59883),C="__core-js_shared__",n=E[C]||M(C,{});H.exports=n},8688:function(H,Q,i){"use strict";var E=i(41876),M=i(49304);(H.exports=function(C,n){return M[C]||(M[C]=n!==void 0?n:{})})("versions",[]).push({version:"3.34.0",mode:E?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"})},21252:function(H,Q,i){"use strict";var E=i(47033),M=i(82915),C=i(95582),n=i(44525),j=n("species");H.exports=function($,U){var Y=E($).constructor,te;return Y===void 0||C(te=E(Y)[j])?U:M(te)}},40975:function(H,Q,i){"use strict";var E=i(43930),M=i(42235),C=i(66516),n=i(48109),j=TypeError,$=E([].push),U=E([].join);H.exports=function(te){var X=M(te),B=n(X);if(!B)return"";for(var K=arguments.length,de=[],he=0;;){var J=X[he++];if(J===void 0)throw new j("Incorrect template");if($(de,C(J)),he===B)return U(de,"");he<K&&$(de,C(arguments[he]))}}},41409:function(H,Q,i){"use strict";var E=i(43930),M=i(65342),C=i(66516),n=i(31628),j=E("".charAt),$=E("".charCodeAt),U=E("".slice),Y=function(te){return function(X,B){var K=C(n(X)),de=M(B),he=K.length,J,ae;return de<0||de>=he?te?"":void 0:(J=$(K,de),J<55296||J>56319||de+1===he||(ae=$(K,de+1))<56320||ae>57343?te?j(K,de):J:te?U(K,de,de+2):(J-55296<<10)+(ae-56320)+65536)}};H.exports={codeAt:Y(!1),charAt:Y(!0)}},7184:function(H,Q,i){"use strict";var E=i(70521),M=i(43930),C=String.fromCharCode,n=E("String","fromCodePoint"),j=M("".charAt),$=M("".charCodeAt),U=M("".indexOf),Y=M("".slice),te=48,X=57,B=97,K=102,de=65,he=70,J=function(Ee,Le){var ke=$(Ee,Le);return ke>=te&&ke<=X},ae=function(Ee,Le,ke){if(ke>=Ee.length)return-1;for(var ye=0;Le<ke;Le++){var Se=se($(Ee,Le));if(Se===-1)return-1;ye=ye*16+Se}return ye},se=function(Ee){return Ee>=te&&Ee<=X?Ee-te:Ee>=B&&Ee<=K?Ee-B+10:Ee>=de&&Ee<=he?Ee-de+10:-1};H.exports=function(Ee){for(var Le="",ke=0,ye=0,Se;(ye=U(Ee,"\\",ye))>-1;){if(Le+=Y(Ee,ke,ye),++ye===Ee.length)return;var be=j(Ee,ye++);switch(be){case"b":Le+="\b";break;case"t":Le+="	";break;case"n":Le+=`
`;break;case"v":Le+="\v";break;case"f":Le+="\f";break;case"r":Le+="\r";break;case"\r":ye<Ee.length&&j(Ee,ye)===`
`&&++ye;case`
`:case"\u2028":case"\u2029":break;case"0":if(J(Ee,ye))return;Le+="\0";break;case"x":if(Se=ae(Ee,ye,ye+2),Se===-1)return;ye+=2,Le+=C(Se);break;case"u":if(ye<Ee.length&&j(Ee,ye)==="{"){var Ue=U(Ee,"}",++ye);if(Ue===-1)return;Se=ae(Ee,ye,Ue),ye=Ue+1}else Se=ae(Ee,ye,ye+4),ye+=4;if(Se===-1||Se>1114111)return;Le+=n(Se);break;default:if(J(be,0))return;Le+=be}ke=ye}return Le+Y(Ee,ke)}},47534:function(H,Q,i){"use strict";var E=i(38386),M=i(56261),C=i(50293),n=i(85611),j=i(56105),$=i(77695),U=E.structuredClone;H.exports=!!U&&!M(function(){if(j&&C>92||$&&C>94||n&&C>97)return!1;var Y=new ArrayBuffer(8),te=U(Y,{transfer:[Y]});return Y.byteLength!==0||te.byteLength!==8})},13293:function(H,Q,i){"use strict";var E=i(50293),M=i(56261),C=i(38386),n=C.String;H.exports=!!Object.getOwnPropertySymbols&&!M(function(){var j=Symbol("symbol detection");return!n(j)||!(Object(j)instanceof Symbol)||!Symbol.sham&&E&&E<41})},52251:function(H,Q,i){"use strict";var E=i(70521),M=i(43930),C=E("Symbol"),n=C.keyFor,j=M(C.prototype.valueOf);H.exports=C.isRegisteredSymbol||function(U){try{return n(j(U))!==void 0}catch(Y){return!1}}},22876:function(H,Q,i){"use strict";for(var E=i(8688),M=i(70521),C=i(43930),n=i(89934),j=i(44525),$=M("Symbol"),U=$.isWellKnownSymbol,Y=M("Object","getOwnPropertyNames"),te=C($.prototype.valueOf),X=E("wks"),B=0,K=Y($),de=K.length;B<de;B++)try{var he=K[B];n($[he])&&j(he)}catch(J){}H.exports=function(ae){if(U&&U(ae))return!0;try{for(var se=te(ae),Ee=0,Le=Y(X),ke=Le.length;Ee<ke;Ee++)if(X[Le[Ee]]==se)return!0}catch(ye){}return!1}},47982:function(H,Q,i){"use strict";var E=i(38386),M=i(97987),C=i(9873),n=i(21051),j=i(14592),$=i(56261),U=i(86592),Y=i(49554),te=i(94995),X=i(93107),B=i(98415),K=i(77695),de=E.setImmediate,he=E.clearImmediate,J=E.process,ae=E.Dispatch,se=E.Function,Ee=E.MessageChannel,Le=E.String,ke=0,ye={},Se="onreadystatechange",be,Ue,qe,je;$(function(){be=E.location});var nt=function(yt){if(j(ye,yt)){var _t=ye[yt];delete ye[yt],_t()}},Ct=function(yt){return function(){nt(yt)}},ft=function(yt){nt(yt.data)},Et=function(yt){E.postMessage(Le(yt),be.protocol+"//"+be.host)};(!de||!he)&&(de=function(_t){X(arguments.length,1);var He=n(_t)?_t:se(_t),bt=Y(arguments,1);return ye[++ke]=function(){M(He,void 0,bt)},Ue(ke),ke},he=function(_t){delete ye[_t]},K?Ue=function(yt){J.nextTick(Ct(yt))}:ae&&ae.now?Ue=function(yt){ae.now(Ct(yt))}:Ee&&!B?(qe=new Ee,je=qe.port2,qe.port1.onmessage=ft,Ue=C(je.postMessage,je)):E.addEventListener&&n(E.postMessage)&&!E.importScripts&&be&&be.protocol!=="file:"&&!$(Et)?(Ue=Et,E.addEventListener("message",ft,!1)):Se in te("script")?Ue=function(yt){U.appendChild(te("script"))[Se]=function(){U.removeChild(this),nt(yt)}}:Ue=function(yt){setTimeout(Ct(yt),0)}),H.exports={set:de,clear:he}},50655:function(H,Q,i){"use strict";var E=i(65342),M=Math.max,C=Math.min;H.exports=function(n,j){var $=E(n);return $<0?M($+j,0):C($,j)}},42355:function(H,Q,i){"use strict";var E=i(39022),M=TypeError;H.exports=function(C){var n=E(C,"number");if(typeof n=="number")throw new M("Can't convert number to bigint");return BigInt(n)}},78749:function(H,Q,i){"use strict";var E=i(65342),M=i(96177),C=RangeError;H.exports=function(n){if(n===void 0)return 0;var j=E(n),$=M(j);if(j!==$)throw new C("Wrong length or index");return $}},42235:function(H,Q,i){"use strict";var E=i(9984),M=i(31628);H.exports=function(C){return E(M(C))}},65342:function(H,Q,i){"use strict";var E=i(51108);H.exports=function(M){var C=+M;return C!==C||C===0?0:E(C)}},96177:function(H,Q,i){"use strict";var E=i(65342),M=Math.min;H.exports=function(C){return C>0?M(E(C),9007199254740991):0}},71953:function(H,Q,i){"use strict";var E=i(31628),M=Object;H.exports=function(C){return M(E(C))}},7270:function(H,Q,i){"use strict";var E=i(18709),M=RangeError;H.exports=function(C,n){var j=E(C);if(j%n)throw new M("Wrong offset");return j}},18709:function(H,Q,i){"use strict";var E=i(65342),M=RangeError;H.exports=function(C){var n=E(C);if(n<0)throw new M("The argument can't be less than 0");return n}},39022:function(H,Q,i){"use strict";var E=i(98789),M=i(11203),C=i(89934),n=i(98285),j=i(73402),$=i(44525),U=TypeError,Y=$("toPrimitive");H.exports=function(te,X){if(!M(te)||C(te))return te;var B=n(te,Y),K;if(B){if(X===void 0&&(X="default"),K=E(B,te,X),!M(K)||C(K))return K;throw new U("Can't convert object to primitive value")}return X===void 0&&(X="number"),j(te,X)}},95612:function(H,Q,i){"use strict";var E=i(39022),M=i(89934);H.exports=function(C){var n=E(C,"string");return M(n)?n:n+""}},68255:function(H,Q,i){"use strict";var E=i(70521),M=i(21051),C=i(25979),n=i(11203),j=E("Set"),$=function(U){return n(U)&&typeof U.size=="number"&&M(U.has)&&M(U.keys)};H.exports=function(U){return $(U)?U:C(U)?new j(U):U}},78049:function(H,Q,i){"use strict";var E=i(44525),M=E("toStringTag"),C={};C[M]="z",H.exports=String(C)==="[object z]"},66516:function(H,Q,i){"use strict";var E=i(33242),M=String;H.exports=function(C){if(E(C)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return M(C)}},76905:function(H){"use strict";var Q=Math.round;H.exports=function(i){var E=Q(i);return E<0?0:E>255?255:E&255}},65570:function(H,Q,i){"use strict";var E=i(77695);H.exports=function(M){try{if(E)return Function('return require("'+M+'")')()}catch(C){}}},67674:function(H){"use strict";var Q=String;H.exports=function(i){try{return Q(i)}catch(E){return"Object"}}},82693:function(H,Q,i){"use strict";var E=i(93320),M=i(79936);H.exports=function(C,n){return E(M(C),n)}},79936:function(H,Q,i){"use strict";var E=i(66221),M=i(21252),C=E.aTypedArrayConstructor,n=E.getTypedArrayConstructor;H.exports=function(j){return C(M(j,n(j)))}},86482:function(H,Q,i){"use strict";var E=i(43930),M=0,C=Math.random(),n=E(1 .toString);H.exports=function(j){return"Symbol("+(j===void 0?"":j)+")_"+n(++M+C,36)}},77507:function(H,Q,i){"use strict";var E=i(56261),M=i(44525),C=i(27233),n=i(41876),j=M("iterator");H.exports=!E(function(){var $=new URL("b?a=1&b=2&c=3","http://a"),U=$.searchParams,Y=new URLSearchParams("a=1&a=2&b=3"),te="";return $.pathname="c%20d",U.forEach(function(X,B){U.delete("b"),te+=B+X}),Y.delete("a",2),Y.delete("b",void 0),n&&(!$.toJSON||!Y.has("a",1)||Y.has("a",2)||!Y.has("a",void 0)||Y.has("b"))||!U.size&&(n||!C)||!U.sort||$.href!=="http://a/c%20d?a=1&c=3"||U.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!U[j]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||te!=="a1c3"||new URL("http://x",void 0).host!=="x"})},12806:function(H,Q,i){"use strict";var E=i(13293);H.exports=E&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},19850:function(H,Q,i){"use strict";var E=i(27233),M=i(56261);H.exports=E&&M(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},93107:function(H){"use strict";var Q=TypeError;H.exports=function(i,E){if(i<E)throw new Q("Not enough arguments");return i}},26084:function(H,Q,i){"use strict";var E=i(38386),M=i(21051),C=E.WeakMap;H.exports=M(C)&&/native code/.test(String(C))},44098:function(H,Q,i){"use strict";var E=i(43930),M=WeakMap.prototype;H.exports={WeakMap,set:E(M.set),get:E(M.get),has:E(M.has),remove:E(M.delete)}},76028:function(H,Q,i){"use strict";var E=i(43930),M=WeakSet.prototype;H.exports={WeakSet,add:E(M.add),has:E(M.has),remove:E(M.delete)}},40208:function(H,Q,i){"use strict";var E=i(56895),M=i(14592),C=i(81621),n=i(17567).f;H.exports=function(j){var $=E.Symbol||(E.Symbol={});M($,j)||n($,j,{value:C.f(j)})}},81621:function(H,Q,i){"use strict";var E=i(44525);Q.f=E},44525:function(H,Q,i){"use strict";var E=i(38386),M=i(8688),C=i(14592),n=i(86482),j=i(13293),$=i(12806),U=E.Symbol,Y=M("wks"),te=$?U.for||U:U&&U.withoutSetter||n;H.exports=function(X){return C(Y,X)||(Y[X]=j&&C(U,X)?U[X]:te("Symbol."+X)),Y[X]}},88287:function(H){"use strict";H.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},3295:function(H,Q,i){"use strict";var E=i(70521),M=i(14592),C=i(37917),n=i(59479),j=i(34205),$=i(64838),U=i(81744),Y=i(69976),te=i(58955),X=i(67029),B=i(14947),K=i(27233),de=i(41876);H.exports=function(he,J,ae,se){var Ee="stackTraceLimit",Le=se?2:1,ke=he.split("."),ye=ke[ke.length-1],Se=E.apply(null,ke);if(Se){var be=Se.prototype;if(!de&&M(be,"cause")&&delete be.cause,!ae)return Se;var Ue=E("Error"),qe=J(function(je,nt){var Ct=te(se?nt:je,void 0),ft=se?new Se(je):new Se;return Ct!==void 0&&C(ft,"message",Ct),B(ft,qe,ft.stack,2),this&&n(be,this)&&Y(ft,this,qe),arguments.length>Le&&X(ft,arguments[Le]),ft});if(qe.prototype=be,ye!=="Error"?j?j(qe,Ue):$(qe,Ue,{name:!0}):K&&Ee in Se&&(U(qe,Se,Ee),U(qe,Se,"prepareStackTrace")),$(qe,Se),!de)try{be.name!==ye&&C(be,"name",ye),be.constructor=qe}catch(je){}return qe}}},16753:function(H,Q,i){"use strict";var E=i(26589),M=i(70521),C=i(97987),n=i(56261),j=i(3295),$="AggregateError",U=M($),Y=!n(function(){return U([1]).errors[0]!==1})&&n(function(){return U([1],$,{cause:7}).cause!==7});E({global:!0,constructor:!0,arity:2,forced:Y},{AggregateError:j($,function(te){return function(B,K){return C(te,this,arguments)}},Y,!0)})},3491:function(H,Q,i){"use strict";var E=i(26589),M=i(59479),C=i(43587),n=i(34205),j=i(64838),$=i(74123),U=i(37917),Y=i(85711),te=i(67029),X=i(14947),B=i(70147),K=i(58955),de=i(44525),he=de("toStringTag"),J=Error,ae=[].push,se=function(ke,ye){var Se=M(Ee,this),be;n?be=n(new J,Se?C(this):Ee):(be=Se?this:$(Ee),U(be,he,"Error")),ye!==void 0&&U(be,"message",K(ye)),X(be,se,be.stack,1),arguments.length>2&&te(be,arguments[2]);var Ue=[];return B(ke,ae,{that:Ue}),U(be,"errors",Ue),be};n?n(se,J):j(se,J,{name:!0});var Ee=se.prototype=$(J.prototype,{constructor:Y(1,se),message:Y(1,""),name:Y(1,"AggregateError")});E({global:!0,constructor:!0,arity:2},{AggregateError:se})},96921:function(H,Q,i){"use strict";i(3491)},24298:function(H,Q,i){"use strict";var E=i(26589),M=i(71953),C=i(48109),n=i(65342),j=i(55278);E({target:"Array",proto:!0},{at:function(U){var Y=M(this),te=C(Y),X=n(U),B=X>=0?X:te+X;return B<0||B>=te?void 0:Y[B]}}),j("at")},51036:function(H,Q,i){"use strict";var E=i(26589),M=i(41983).findLastIndex,C=i(55278);E({target:"Array",proto:!0},{findLastIndex:function(j){return M(this,j,arguments.length>1?arguments[1]:void 0)}}),C("findLastIndex")},83821:function(H,Q,i){"use strict";var E=i(26589),M=i(41983).findLast,C=i(55278);E({target:"Array",proto:!0},{findLast:function(j){return M(this,j,arguments.length>1?arguments[1]:void 0)}}),C("findLast")},22106:function(H,Q,i){"use strict";var E=i(26589),M=i(71953),C=i(48109),n=i(97674),j=i(19920),$=i(56261),U=$(function(){return[].push.call({length:4294967296},1)!==4294967297}),Y=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(X){return X instanceof TypeError}},te=U||!Y();E({target:"Array",proto:!0,arity:1,forced:te},{push:function(B){var K=M(this),de=C(K),he=arguments.length;j(de+he);for(var J=0;J<he;J++)K[de]=arguments[J],de++;return n(K,de),de}})},37207:function(H,Q,i){"use strict";var E=i(26589),M=i(15051).right,C=i(84620),n=i(50293),j=i(77695),$=!j&&n>79&&n<83,U=$||!C("reduceRight");E({target:"Array",proto:!0,forced:U},{reduceRight:function(te){return M(this,te,arguments.length,arguments.length>1?arguments[1]:void 0)}})},60123:function(H,Q,i){"use strict";var E=i(26589),M=i(15051).left,C=i(84620),n=i(50293),j=i(77695),$=!j&&n>79&&n<83,U=$||!C("reduce");E({target:"Array",proto:!0,forced:U},{reduce:function(te){var X=arguments.length;return M(this,te,X,X>1?arguments[1]:void 0)}})},84570:function(H,Q,i){"use strict";var E=i(26589),M=i(72740),C=i(42235),n=i(55278),j=Array;E({target:"Array",proto:!0},{toReversed:function(){return M(C(this),j)}}),n("toReversed")},68266:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(91216),n=i(42235),j=i(93320),$=i(39833),U=i(55278),Y=Array,te=M($("Array","sort"));E({target:"Array",proto:!0},{toSorted:function(B){B!==void 0&&C(B);var K=n(this),de=j(Y,K);return te(de,B)}}),U("toSorted")},82597:function(H,Q,i){"use strict";var E=i(26589),M=i(55278),C=i(19920),n=i(48109),j=i(50655),$=i(42235),U=i(65342),Y=Array,te=Math.max,X=Math.min;E({target:"Array",proto:!0},{toSpliced:function(K,de){var he=$(this),J=n(he),ae=j(K,J),se=arguments.length,Ee=0,Le,ke,ye,Se;for(se===0?Le=ke=0:se===1?(Le=0,ke=J-ae):(Le=se-2,ke=X(te(U(de),0),J-ae)),ye=C(J+Le-ke),Se=Y(ye);Ee<ae;Ee++)Se[Ee]=he[Ee];for(;Ee<ae+Le;Ee++)Se[Ee]=arguments[Ee-ae+2];for(;Ee<ye;Ee++)Se[Ee]=he[Ee+ke-Le];return Se}}),M("toSpliced")},12856:function(H,Q,i){"use strict";var E=i(26589),M=i(86210),C=i(42235),n=Array;E({target:"Array",proto:!0},{with:function(j,$){return M(C(this),n,j,$)}})},72984:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(97987),n=i(3295),j="WebAssembly",$=M[j],U=new Error("e",{cause:7}).cause!==7,Y=function(X,B){var K={};K[X]=n(X,B,U),E({global:!0,constructor:!0,arity:1,forced:U},K)},te=function(X,B){if($&&$[X]){var K={};K[X]=n(j+"."+X,B,U),E({target:j,stat:!0,constructor:!0,arity:1,forced:U},K)}};Y("Error",function(X){return function(K){return C(X,this,arguments)}}),Y("EvalError",function(X){return function(K){return C(X,this,arguments)}}),Y("RangeError",function(X){return function(K){return C(X,this,arguments)}}),Y("ReferenceError",function(X){return function(K){return C(X,this,arguments)}}),Y("SyntaxError",function(X){return function(K){return C(X,this,arguments)}}),Y("TypeError",function(X){return function(K){return C(X,this,arguments)}}),Y("URIError",function(X){return function(K){return C(X,this,arguments)}}),te("CompileError",function(X){return function(K){return C(X,this,arguments)}}),te("LinkError",function(X){return function(K){return C(X,this,arguments)}}),te("RuntimeError",function(X){return function(K){return C(X,this,arguments)}})},86601:function(H,Q,i){"use strict";var E=i(1353),M=i(42266);E("Map",function(C){return function(){return C(this,arguments.length?arguments[0]:void 0)}},M)},76171:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(91216),n=i(31628),j=i(70147),$=i(92192),U=i(41876),Y=$.Map,te=$.has,X=$.get,B=$.set,K=M([].push);E({target:"Map",stat:!0,forced:U},{groupBy:function(he,J){n(he),C(J);var ae=new Y,se=0;return j(he,function(Ee){var Le=J(Ee,se++);te(ae,Le)?K(X(ae,Le),Ee):B(ae,Le,[Ee])}),ae}})},86705:function(H,Q,i){"use strict";i(86601)},58599:function(H,Q,i){"use strict";var E=i(26589),M=i(70521),C=i(43930),n=i(91216),j=i(31628),$=i(95612),U=i(70147),Y=M("Object","create"),te=C([].push);E({target:"Object",stat:!0},{groupBy:function(B,K){j(B),n(K);var de=Y(null),he=0;return U(B,function(J){var ae=$(K(J,he++));ae in de?te(de[ae],J):de[ae]=[J]}),de}})},31638:function(H,Q,i){"use strict";var E=i(26589),M=i(14592);E({target:"Object",stat:!0},{hasOwn:M})},88388:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(91216),n=i(70521),j=i(33701),$=i(59683),U=i(70147),Y=i(46805),te="No one promise resolved";E({target:"Promise",stat:!0,forced:Y},{any:function(B){var K=this,de=n("AggregateError"),he=j.f(K),J=he.resolve,ae=he.reject,se=$(function(){var Ee=C(K.resolve),Le=[],ke=0,ye=1,Se=!1;U(B,function(be){var Ue=ke++,qe=!1;ye++,M(Ee,K,be).then(function(je){qe||Se||(Se=!0,J(je))},function(je){qe||Se||(qe=!0,Le[Ue]=je,--ye||ae(new de(Le,te)))})}),--ye||ae(new de(Le,te))});return se.error&&ae(se.value),he.promise}})},21640:function(H,Q,i){"use strict";var E=i(26589),M=i(33701);E({target:"Promise",stat:!0},{withResolvers:function(){var n=M.f(this);return{promise:n.promise,resolve:n.resolve,reject:n.reject}}})},65531:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(24807);E({global:!0},{Reflect:{}}),C(M.Reflect,"Reflect",!0)},27074:function(H,Q,i){"use strict";var E=i(38386),M=i(27233),C=i(42917),n=i(19780),j=i(56261),$=E.RegExp,U=$.prototype,Y=M&&j(function(){var te=!0;try{$(".","d")}catch(se){te=!1}var X={},B="",K=te?"dgimsy":"gimsy",de=function(se,Ee){Object.defineProperty(X,se,{get:function(){return B+=Ee,!0}})},he={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};te&&(he.hasIndices="d");for(var J in he)de(J,he[J]);var ae=Object.getOwnPropertyDescriptor(U,"flags").get.call(X);return ae!==K||B!==K});Y&&C(U,"flags",{configurable:!0,get:n})},15193:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(31628),n=i(65342),j=i(66516),$=i(56261),U=M("".charAt),Y=$(function(){return"\u{20BB7}".at(-2)!=="\uD842"});E({target:"String",proto:!0,forced:Y},{at:function(X){var B=j(C(this)),K=B.length,de=n(X),he=de>=0?de:K+de;return he<0||he>=K?void 0:U(B,he)}})},99507:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(31628),n=i(66516),j=M("".charCodeAt);E({target:"String",proto:!0},{isWellFormed:function(){for(var U=n(C(this)),Y=U.length,te=0;te<Y;te++){var X=j(U,te);if((X&63488)===55296&&(X>=56320||++te>=Y||(j(U,te)&64512)!==56320))return!1}return!0}})},34999:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(43930),n=i(31628),j=i(21051),$=i(95582),U=i(82552),Y=i(66516),te=i(98285),X=i(45448),B=i(79267),K=i(44525),de=i(41876),he=K("replace"),J=TypeError,ae=C("".indexOf),se=C("".replace),Ee=C("".slice),Le=Math.max,ke=function(ye,Se,be){return be>ye.length?-1:Se===""?be:ae(ye,Se,be)};E({target:"String",proto:!0},{replaceAll:function(Se,be){var Ue=n(this),qe,je,nt,Ct,ft,Et,yt,_t,He,bt=0,Tt=0,st="";if(!$(Se)){if(qe=U(Se),qe&&(je=Y(n(X(Se))),!~ae(je,"g")))throw new J("`.replaceAll` does not allow non-global regexes");if(nt=te(Se,he),nt)return M(nt,Se,Ue,be);if(de&&qe)return se(Y(Ue),Se,be)}for(Ct=Y(Ue),ft=Y(Se),Et=j(be),Et||(be=Y(be)),yt=ft.length,_t=Le(1,yt),bt=ke(Ct,ft,0);bt!==-1;)He=Et?Y(be(ft,bt,Ct)):B(ft,Ct,bt,[],void 0,be),st+=Ee(Ct,Tt,bt)+He,Tt=bt+yt,bt=ke(Ct,ft,bt+_t);return Tt<Ct.length&&(st+=Ee(Ct,Tt)),st}})},58209:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(43930),n=i(31628),j=i(66516),$=i(56261),U=Array,Y=C("".charAt),te=C("".charCodeAt),X=C([].join),B="".toWellFormed,K="\uFFFD",de=B&&$(function(){return M(B,1)!=="1"});E({target:"String",proto:!0,forced:de},{toWellFormed:function(){var J=j(n(this));if(de)return M(B,J);for(var ae=J.length,se=U(ae),Ee=0;Ee<ae;Ee++){var Le=te(J,Ee);(Le&63488)!==55296?se[Ee]=Y(J,Ee):Le>=56320||Ee+1>=ae||(te(J,Ee+1)&64512)!==56320?se[Ee]=K:(se[Ee]=Y(J,Ee),se[++Ee]=Y(J,Ee))}return X(se,"")}})},53006:function(H,Q,i){"use strict";var E=i(66221),M=i(48109),C=i(65342),n=E.aTypedArray,j=E.exportTypedArrayMethod;j("at",function(U){var Y=n(this),te=M(Y),X=C(U),B=X>=0?X:te+X;return B<0||B>=te?void 0:Y[B]})},91531:function(H,Q,i){"use strict";var E=i(66221),M=i(41983).findLastIndex,C=E.aTypedArray,n=E.exportTypedArrayMethod;n("findLastIndex",function($){return M(C(this),$,arguments.length>1?arguments[1]:void 0)})},21838:function(H,Q,i){"use strict";var E=i(66221),M=i(41983).findLast,C=E.aTypedArray,n=E.exportTypedArrayMethod;n("findLast",function($){return M(C(this),$,arguments.length>1?arguments[1]:void 0)})},28975:function(H,Q,i){"use strict";var E=i(38386),M=i(98789),C=i(66221),n=i(48109),j=i(7270),$=i(71953),U=i(56261),Y=E.RangeError,te=E.Int8Array,X=te&&te.prototype,B=X&&X.set,K=C.aTypedArray,de=C.exportTypedArrayMethod,he=!U(function(){var ae=new Uint8ClampedArray(2);return M(B,ae,{length:1,0:3},1),ae[1]!==3}),J=he&&C.NATIVE_ARRAY_BUFFER_VIEWS&&U(function(){var ae=new te(2);return ae.set(1),ae.set("2",1),ae[0]!==0||ae[1]!==2});de("set",function(se){K(this);var Ee=j(arguments.length>1?arguments[1]:void 0,1),Le=$(se);if(he)return M(B,this,Le,Ee);var ke=this.length,ye=n(Le),Se=0;if(ye+Ee>ke)throw new Y("Wrong length");for(;Se<ye;)this[Ee+Se]=Le[Se++]},!he||J)},78453:function(H,Q,i){"use strict";var E=i(72740),M=i(66221),C=M.aTypedArray,n=M.exportTypedArrayMethod,j=M.getTypedArrayConstructor;n("toReversed",function(){return E(C(this),j(this))})},66895:function(H,Q,i){"use strict";var E=i(66221),M=i(43930),C=i(91216),n=i(93320),j=E.aTypedArray,$=E.getTypedArrayConstructor,U=E.exportTypedArrayMethod,Y=M(E.TypedArrayPrototype.sort);U("toSorted",function(X){X!==void 0&&C(X);var B=j(this),K=n($(B),B);return Y(K,X)})},32530:function(H,Q,i){"use strict";var E=i(86210),M=i(66221),C=i(63113),n=i(65342),j=i(42355),$=M.aTypedArray,U=M.getTypedArrayConstructor,Y=M.exportTypedArrayMethod,te=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(X){return X===8}}();Y("with",function(X,B){var K=$(this),de=n(X),he=C(K)?j(B):+B;return E(K,U(K),de,he)},!te)},80010:function(H,Q,i){"use strict";var E=i(10356),M=i(38386),C=i(43930),n=i(25785),j=i(78995),$=i(1353),U=i(48950),Y=i(11203),te=i(92657).enforce,X=i(56261),B=i(26084),K=Object,de=Array.isArray,he=K.isExtensible,J=K.isFrozen,ae=K.isSealed,se=K.freeze,Ee=K.seal,Le={},ke={},ye=!M.ActiveXObject&&"ActiveXObject"in M,Se,be=function(yt){return function(){return yt(this,arguments.length?arguments[0]:void 0)}},Ue=$("WeakMap",be,U),qe=Ue.prototype,je=C(qe.set),nt=function(){return E&&X(function(){var yt=se([]);return je(new Ue,yt,1),!J(yt)})};if(B)if(ye){Se=U.getConstructor(be,"WeakMap",!0),j.enable();var Ct=C(qe.delete),ft=C(qe.has),Et=C(qe.get);n(qe,{delete:function(yt){if(Y(yt)&&!he(yt)){var _t=te(this);return _t.frozen||(_t.frozen=new Se),Ct(this,yt)||_t.frozen.delete(yt)}return Ct(this,yt)},has:function(_t){if(Y(_t)&&!he(_t)){var He=te(this);return He.frozen||(He.frozen=new Se),ft(this,_t)||He.frozen.has(_t)}return ft(this,_t)},get:function(_t){if(Y(_t)&&!he(_t)){var He=te(this);return He.frozen||(He.frozen=new Se),ft(this,_t)?Et(this,_t):He.frozen.get(_t)}return Et(this,_t)},set:function(_t,He){if(Y(_t)&&!he(_t)){var bt=te(this);bt.frozen||(bt.frozen=new Se),ft(this,_t)?je(this,_t,He):bt.frozen.set(_t,He)}else je(this,_t,He);return this}})}else nt()&&n(qe,{set:function(_t,He){var bt;return de(_t)&&(J(_t)?bt=Le:ae(_t)&&(bt=ke)),je(this,_t,He),bt===Le&&se(_t),bt===ke&&Ee(_t),this}})},44174:function(H,Q,i){"use strict";i(80010)},15766:function(H,Q,i){"use strict";var E=i(27233),M=i(42917),C=i(11678),n=ArrayBuffer.prototype;E&&!("detached"in n)&&M(n,"detached",{configurable:!0,get:function(){return C(this)}})},4222:function(H,Q,i){"use strict";var E=i(26589),M=i(85211);M&&E({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return M(this,arguments.length?arguments[0]:void 0,!1)}})},73040:function(H,Q,i){"use strict";var E=i(26589),M=i(85211);M&&E({target:"ArrayBuffer",proto:!0},{transfer:function(){return M(this,arguments.length?arguments[0]:void 0,!0)}})},58005:function(H,Q,i){"use strict";var E=i(26589),M=i(57311).filterReject,C=i(55278);E({target:"Array",proto:!0,forced:!0},{filterOut:function(j){return M(this,j,arguments.length>1?arguments[1]:void 0)}}),C("filterOut")},52873:function(H,Q,i){"use strict";var E=i(26589),M=i(57311).filterReject,C=i(55278);E({target:"Array",proto:!0,forced:!0},{filterReject:function(j){return M(this,j,arguments.length>1?arguments[1]:void 0)}}),C("filterReject")},89255:function(H,Q,i){"use strict";var E=i(26589),M=i(98200);E({target:"Array",stat:!0},{fromAsync:M})},66578:function(H,Q,i){"use strict";var E=i(26589),M=i(84620),C=i(55278),n=i(8202),j=i(41876);E({target:"Array",proto:!0,name:"groupToMap",forced:j||!M("groupByToMap")},{groupByToMap:n}),C("groupByToMap")},22938:function(H,Q,i){"use strict";var E=i(26589),M=i(20508),C=i(84620),n=i(55278);E({target:"Array",proto:!0,forced:!C("groupBy")},{groupBy:function($){var U=arguments.length>1?arguments[1]:void 0;return M(this,$,U)}}),n("groupBy")},83:function(H,Q,i){"use strict";var E=i(26589),M=i(55278),C=i(8202),n=i(41876);E({target:"Array",proto:!0,forced:n},{groupToMap:C}),M("groupToMap")},78569:function(H,Q,i){"use strict";var E=i(26589),M=i(20508),C=i(55278);E({target:"Array",proto:!0},{group:function(j){var $=arguments.length>1?arguments[1]:void 0;return M(this,j,$)}}),C("group")},81357:function(H,Q,i){"use strict";var E=i(26589),M=i(87487),C=Object.isFrozen,n=function(j,$){if(!C||!M(j)||!C(j))return!1;for(var U=0,Y=j.length,te;U<Y;)if(te=j[U++],!(typeof te=="string"||$&&te===void 0))return!1;return Y!==0};E({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function($){if(!n($,!0))return!1;var U=$.raw;return U.length===$.length&&n(U,!1)}})},69715:function(H,Q,i){"use strict";var E=i(27233),M=i(55278),C=i(71953),n=i(48109),j=i(42917);E&&(j(Array.prototype,"lastIndex",{configurable:!0,get:function(){var U=C(this),Y=n(U);return Y===0?0:Y-1}}),M("lastIndex"))},64821:function(H,Q,i){"use strict";var E=i(27233),M=i(55278),C=i(71953),n=i(48109),j=i(42917);E&&(j(Array.prototype,"lastItem",{configurable:!0,get:function(){var U=C(this),Y=n(U);return Y===0?void 0:U[Y-1]},set:function(U){var Y=C(this),te=n(Y);return Y[te===0?0:te-1]=U}}),M("lastItem"))},37664:function(H,Q,i){"use strict";var E=i(26589),M=i(55278),C=i(70822);E({target:"Array",proto:!0,forced:!0},{uniqueBy:C}),M("uniqueBy")},13505:function(H,Q,i){"use strict";var E=i(26589),M=i(27233),C=i(70521),n=i(91216),j=i(86036),$=i(66511),U=i(25785),Y=i(42917),te=i(44525),X=i(92657),B=i(58529),K=C("Promise"),de=C("SuppressedError"),he=ReferenceError,J=te("asyncDispose"),ae=te("toStringTag"),se="AsyncDisposableStack",Ee=X.set,Le=X.getterFor(se),ke="async-dispose",ye="disposed",Se="pending",be=function(je){var nt=Le(je);if(nt.state===ye)throw new he(se+" already disposed");return nt},Ue=function(){Ee(j(this,qe),{type:se,state:Se,stack:[]}),M||(this.disposed=!1)},qe=Ue.prototype;U(qe,{disposeAsync:function(){var nt=this;return new K(function(Ct,ft){var Et=Le(nt);if(Et.state===ye)return Ct(void 0);Et.state=ye,M||(nt.disposed=!0);var yt=Et.stack,_t=yt.length,He=!1,bt,Tt=function(Qe){He?bt=new de(Qe,bt):(He=!0,bt=Qe),st()},st=function(){if(_t){var Qe=yt[--_t];yt[_t]=null;try{K.resolve(Qe()).then(st,Tt)}catch(mt){Tt(mt)}}else Et.stack=null,He?ft(bt):Ct(void 0)};st()})},use:function(nt){return B(be(this),nt,ke),nt},adopt:function(nt,Ct){var ft=be(this);return n(Ct),B(ft,void 0,ke,function(){return Ct(nt)}),nt},defer:function(nt){var Ct=be(this);n(nt),B(Ct,void 0,ke,nt)},move:function(){var nt=be(this),Ct=new Ue;return Le(Ct).stack=nt.stack,nt.stack=[],nt.state=ye,M||(this.disposed=!0),Ct}}),M&&Y(qe,"disposed",{configurable:!0,get:function(){return Le(this).state===ye}}),$(qe,J,qe.disposeAsync,{name:"disposeAsync"}),$(qe,ae,se,{nonWritable:!0}),E({global:!0,constructor:!0},{AsyncDisposableStack:Ue})},16272:function(H,Q,i){"use strict";var E=i(26589),M=i(70397);E({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:M})},54221:function(H,Q,i){"use strict";var E=i(98789),M=i(66511),C=i(70521),n=i(98285),j=i(14592),$=i(44525),U=i(24998),Y=$("asyncDispose"),te=C("Promise");j(U,Y)||M(U,Y,function(){var X=this;return new te(function(B,K){var de=n(X,"return");de?te.resolve(E(de,X)).then(function(){B(void 0)},K):B(void 0)})})},59134:function(H,Q,i){"use strict";var E=i(26589),M=i(86036),C=i(43587),n=i(37917),j=i(14592),$=i(44525),U=i(24998),Y=i(41876),te=$("toStringTag"),X=TypeError,B=function(){if(M(this,U),C(this)===U)throw new X("Abstract class AsyncIterator not directly constructable")};B.prototype=U,j(U,te)||n(U,te,"AsyncIterator"),(Y||!j(U,"constructor")||U.constructor===Object)&&n(U,"constructor",B),E({global:!0,constructor:!0,forced:Y},{AsyncIterator:B})},88705:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(47033),n=i(81770),j=i(49551),$=i(18709),U=i(62026),Y=i(13988),te=i(41876),X=U(function(B){var K=this;return new B(function(de,he){var J=function(se){K.done=!0,he(se)},ae=function(){try{B.resolve(C(M(K.next,K.iterator))).then(function(se){try{C(se).done?(K.done=!0,de(Y(void 0,!0))):K.remaining?(K.remaining--,ae()):de(Y(se.value,!1))}catch(Ee){J(Ee)}},J)}catch(se){J(se)}};ae()})});E({target:"AsyncIterator",proto:!0,real:!0,forced:te},{drop:function(K){C(this);var de=$(j(+K));return new X(n(this),{remaining:de})}})},72639:function(H,Q,i){"use strict";var E=i(26589),M=i(96062).every;E({target:"AsyncIterator",proto:!0,real:!0},{every:function(n){return M(this,n)}})},89581:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(91216),n=i(47033),j=i(11203),$=i(81770),U=i(62026),Y=i(13988),te=i(3997),X=i(41876),B=U(function(K){var de=this,he=de.iterator,J=de.predicate;return new K(function(ae,se){var Ee=function(ye){de.done=!0,se(ye)},Le=function(ye){te(he,Ee,ye,Ee)},ke=function(){try{K.resolve(n(M(de.next,he))).then(function(ye){try{if(n(ye).done)de.done=!0,ae(Y(void 0,!0));else{var Se=ye.value;try{var be=J(Se,de.counter++),Ue=function(qe){qe?ae(Y(Se,!1)):ke()};j(be)?K.resolve(be).then(Ue,Le):Ue(be)}catch(qe){Le(qe)}}}catch(qe){Ee(qe)}},Ee)}catch(ye){Ee(ye)}};ke()})});E({target:"AsyncIterator",proto:!0,real:!0,forced:X},{filter:function(de){return n(this),C(de),new B($(this),{predicate:de})}})},90494:function(H,Q,i){"use strict";var E=i(26589),M=i(96062).find;E({target:"AsyncIterator",proto:!0,real:!0},{find:function(n){return M(this,n)}})},57130:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(91216),n=i(47033),j=i(11203),$=i(81770),U=i(62026),Y=i(13988),te=i(75350),X=i(3997),B=i(41876),K=U(function(de){var he=this,J=he.iterator,ae=he.mapper;return new de(function(se,Ee){var Le=function(be){he.done=!0,Ee(be)},ke=function(be){X(J,Le,be,Le)},ye=function(){try{de.resolve(n(M(he.next,J))).then(function(be){try{if(n(be).done)he.done=!0,se(Y(void 0,!0));else{var Ue=be.value;try{var qe=ae(Ue,he.counter++),je=function(nt){try{he.inner=te(nt),Se()}catch(Ct){ke(Ct)}};j(qe)?de.resolve(qe).then(je,ke):je(qe)}catch(nt){ke(nt)}}}catch(nt){Le(nt)}},Le)}catch(be){Le(be)}},Se=function(){var be=he.inner;if(be)try{de.resolve(n(M(be.next,be.iterator))).then(function(Ue){try{n(Ue).done?(he.inner=null,ye()):se(Y(Ue.value,!1))}catch(qe){ke(qe)}},ke)}catch(Ue){ke(Ue)}else ye()};Se()})});E({target:"AsyncIterator",proto:!0,real:!0,forced:B},{flatMap:function(he){return n(this),C(he),new K($(this),{mapper:he,inner:null})}})},99686:function(H,Q,i){"use strict";var E=i(26589),M=i(96062).forEach;E({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(n){return M(this,n)}})},29224:function(H,Q,i){"use strict";var E=i(26589),M=i(71953),C=i(59479),n=i(75350),j=i(24998),$=i(54646),U=i(41876);E({target:"AsyncIterator",stat:!0,forced:U},{from:function(te){var X=n(typeof te=="string"?M(te):te);return C(j,X.iterator)?X.iterator:new $(X)}})},77080:function(H,Q,i){"use strict";var E=i(26589),M=i(70397);E({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:M})},40132:function(H,Q,i){"use strict";var E=i(26589),M=i(14132),C=i(41876);E({target:"AsyncIterator",proto:!0,real:!0,forced:C},{map:M})},82383:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(91216),n=i(47033),j=i(11203),$=i(70521),U=i(81770),Y=i(3997),te=$("Promise"),X=TypeError;E({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(K){n(this),C(K);var de=U(this),he=de.iterator,J=de.next,ae=arguments.length<2,se=ae?void 0:arguments[1],Ee=0;return new te(function(Le,ke){var ye=function(be){Y(he,ke,be,ke)},Se=function(){try{te.resolve(n(M(J,he))).then(function(be){try{if(n(be).done)ae?ke(new X("Reduce of empty iterator with no initial value")):Le(se);else{var Ue=be.value;if(ae)ae=!1,se=Ue,Se();else try{var qe=K(se,Ue,Ee),je=function(nt){se=nt,Se()};j(qe)?te.resolve(qe).then(je,ye):je(qe)}catch(nt){ye(nt)}}Ee++}catch(nt){ke(nt)}},ke)}catch(be){ke(be)}};Se()})}})},24952:function(H,Q,i){"use strict";var E=i(26589),M=i(96062).some;E({target:"AsyncIterator",proto:!0,real:!0},{some:function(n){return M(this,n)}})},73824:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(47033),n=i(81770),j=i(49551),$=i(18709),U=i(62026),Y=i(13988),te=i(41876),X=U(function(B){var K=this,de=K.iterator,he;if(!K.remaining--){var J=Y(void 0,!0);return K.done=!0,he=de.return,he!==void 0?B.resolve(M(he,de,void 0)).then(function(){return J}):J}return B.resolve(M(K.next,de)).then(function(ae){return C(ae).done?(K.done=!0,Y(void 0,!0)):Y(ae.value,!1)}).then(null,function(ae){throw K.done=!0,ae})});E({target:"AsyncIterator",proto:!0,real:!0,forced:te},{take:function(K){C(this);var de=$(j(+K));return new X(n(this),{remaining:de})}})},35619:function(H,Q,i){"use strict";var E=i(26589),M=i(96062).toArray;E({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return M(this,void 0,[])}})},70598:function(H,Q,i){"use strict";var E=i(26589),M=i(4048);typeof BigInt=="function"&&E({target:"BigInt",stat:!0,forced:!0},{range:function(n,j,$){return new M(n,j,$,"bigint",BigInt(0),BigInt(1))}})},53207:function(H,Q,i){"use strict";var E=i(26589),M=i(97987),C=i(43021),n=i(70521),j=i(74123),$=Object,U=function(){var Y=n("Object","freeze");return Y?Y(j(null)):j(null)};E({global:!0,forced:!0},{compositeKey:function(){return M(C,$,arguments).get("object",U)}})},62647:function(H,Q,i){"use strict";var E=i(26589),M=i(43021),C=i(70521),n=i(97987);E({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?C("Symbol").for(arguments[0]):n(M,null,arguments).get("symbol",C("Symbol"))}})},44121:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(67778).unpack,n=M(DataView.prototype.getUint16);E({target:"DataView",proto:!0},{getFloat16:function($){var U=n(this,$,arguments.length>1?arguments[1]:!1);return C([U&255,U>>8&255],10)}})},15515:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=M(DataView.prototype.getUint8);E({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(j){return C(this,j)}})},14979:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(33242),n=i(78749),j=i(67778).pack,$=i(99953),U=TypeError,Y=M(DataView.prototype.setUint16);E({target:"DataView",proto:!0},{setFloat16:function(X,B){if(C(this)!=="DataView")throw new U("Incorrect receiver");var K=n(X),de=j($(B),10,2);return Y(this,K,de[1]<<8|de[0],arguments.length>2?arguments[2]:!1)}})},26357:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(33242),n=i(78749),j=i(76905),$=TypeError,U=M(DataView.prototype.setUint8);E({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(te,X){if(C(this)!=="DataView")throw new $("Incorrect receiver");var B=n(te);return U(this,B,j(X))}})},68291:function(H,Q,i){"use strict";var E=i(26589),M=i(27233),C=i(70521),n=i(91216),j=i(86036),$=i(66511),U=i(25785),Y=i(42917),te=i(44525),X=i(92657),B=i(58529),K=C("SuppressedError"),de=ReferenceError,he=te("dispose"),J=te("toStringTag"),ae="DisposableStack",se=X.set,Ee=X.getterFor(ae),Le="sync-dispose",ke="disposed",ye="pending",Se=function(qe){var je=Ee(qe);if(je.state===ke)throw new de(ae+" already disposed");return je},be=function(){se(j(this,Ue),{type:ae,state:ye,stack:[]}),M||(this.disposed=!1)},Ue=be.prototype;U(Ue,{dispose:function(){var je=Ee(this);if(je.state!==ke){je.state=ke,M||(this.disposed=!0);for(var nt=je.stack,Ct=nt.length,ft=!1,Et;Ct;){var yt=nt[--Ct];nt[Ct]=null;try{yt()}catch(_t){ft?Et=new K(_t,Et):(ft=!0,Et=_t)}}if(je.stack=null,ft)throw Et}},use:function(je){return B(Se(this),je,Le),je},adopt:function(je,nt){var Ct=Se(this);return n(nt),B(Ct,void 0,Le,function(){nt(je)}),je},defer:function(je){var nt=Se(this);n(je),B(nt,void 0,Le,je)},move:function(){var je=Se(this),nt=new be;return Ee(nt).stack=je.stack,je.stack=[],je.state=ke,M||(this.disposed=!0),nt}}),M&&Y(Ue,"disposed",{configurable:!0,get:function(){return Ee(this).state===ke}}),$(Ue,he,Ue.dispose,{name:"dispose"}),$(Ue,J,ae,{nonWritable:!0}),E({global:!0,constructor:!0},{DisposableStack:be})},66810:function(H,Q,i){"use strict";var E=i(26589),M=i(84603);E({target:"Function",proto:!0,forced:!0},{demethodize:M})},7170:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(21051),n=i(48840),j=i(14592),$=i(27233),U=Object.getOwnPropertyDescriptor,Y=/^\s*class\b/,te=M(Y.exec),X=function(B){try{if(!$||!te(Y,n(B)))return!1}catch(de){}var K=U(B,"prototype");return!!K&&j(K,"writable")&&!K.writable};E({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(K){return C(K)&&!X(K)}})},40319:function(H,Q,i){"use strict";var E=i(26589),M=i(83808);E({target:"Function",stat:!0,forced:!0},{isConstructor:M})},84670:function(H,Q,i){"use strict";var E=i(44525),M=i(17567).f,C=E("metadata"),n=Function.prototype;n[C]===void 0&&M(n,C,{value:null})},64699:function(H,Q,i){"use strict";var E=i(26589),M=i(84603);E({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:M})},73834:function(H,Q,i){"use strict";var E=i(26589),M=i(38144);E({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:M})},14534:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(86036),n=i(47033),j=i(21051),$=i(43587),U=i(42917),Y=i(56853),te=i(56261),X=i(14592),B=i(44525),K=i(71558).IteratorPrototype,de=i(27233),he=i(41876),J="constructor",ae="Iterator",se=B("toStringTag"),Ee=TypeError,Le=M[ae],ke=he||!j(Le)||Le.prototype!==K||!te(function(){Le({})}),ye=function(){if(C(this,K),$(this)===K)throw new Ee("Abstract class Iterator not directly constructable")},Se=function(be,Ue){de?U(K,be,{configurable:!0,get:function(){return Ue},set:function(qe){if(n(this),this===K)throw new Ee("You can't redefine this property");X(this,be)?this[be]=qe:Y(this,be,qe)}}):K[be]=Ue};X(K,se)||Se(se,ae),(ke||!X(K,J)||K[J]===Object)&&Se(J,ye),ye.prototype=K,E({global:!0,constructor:!0,forced:ke},{Iterator:ye})},87658:function(H,Q,i){"use strict";var E=i(98789),M=i(66511),C=i(98285),n=i(14592),j=i(44525),$=i(71558).IteratorPrototype,U=j("dispose");n($,U)||M($,U,function(){var Y=C(this,"return");Y&&E(Y,this)})},94049:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(47033),n=i(81770),j=i(49551),$=i(18709),U=i(96813),Y=i(41876),te=U(function(){for(var X=this.iterator,B=this.next,K,de;this.remaining;)if(this.remaining--,K=C(M(B,X)),de=this.done=!!K.done,de)return;if(K=C(M(B,X)),de=this.done=!!K.done,!de)return K.value});E({target:"Iterator",proto:!0,real:!0,forced:Y},{drop:function(B){C(this);var K=$(j(+B));return new te(n(this),{remaining:K})}})},56321:function(H,Q,i){"use strict";var E=i(26589),M=i(70147),C=i(91216),n=i(47033),j=i(81770);E({target:"Iterator",proto:!0,real:!0},{every:function(U){n(this),C(U);var Y=j(this),te=0;return!M(Y,function(X,B){if(!U(X,te++))return B()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},99801:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(91216),n=i(47033),j=i(81770),$=i(96813),U=i(47967),Y=i(41876),te=$(function(){for(var X=this.iterator,B=this.predicate,K=this.next,de,he,J;;){if(de=n(M(K,X)),he=this.done=!!de.done,he)return;if(J=de.value,U(X,B,[J,this.counter++],!0))return J}});E({target:"Iterator",proto:!0,real:!0,forced:Y},{filter:function(B){return n(this),C(B),new te(j(this),{predicate:B})}})},53261:function(H,Q,i){"use strict";var E=i(26589),M=i(70147),C=i(91216),n=i(47033),j=i(81770);E({target:"Iterator",proto:!0,real:!0},{find:function(U){n(this),C(U);var Y=j(this),te=0;return M(Y,function(X,B){if(U(X,te++))return B(X)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},24208:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(91216),n=i(47033),j=i(81770),$=i(7734),U=i(96813),Y=i(90431),te=i(41876),X=U(function(){for(var B=this.iterator,K=this.mapper,de,he;;){if(he=this.inner)try{if(de=n(M(he.next,he.iterator)),!de.done)return de.value;this.inner=null}catch(J){Y(B,"throw",J)}if(de=n(M(this.next,B)),this.done=!!de.done)return;try{this.inner=$(K(de.value,this.counter++),!1)}catch(J){Y(B,"throw",J)}}});E({target:"Iterator",proto:!0,real:!0,forced:te},{flatMap:function(K){return n(this),C(K),new X(j(this),{mapper:K,inner:null})}})},82119:function(H,Q,i){"use strict";var E=i(26589),M=i(70147),C=i(91216),n=i(47033),j=i(81770);E({target:"Iterator",proto:!0,real:!0},{forEach:function(U){n(this),C(U);var Y=j(this),te=0;M(Y,function(X){U(X,te++)},{IS_RECORD:!0})}})},85836:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(71953),n=i(59479),j=i(71558).IteratorPrototype,$=i(96813),U=i(7734),Y=i(41876),te=$(function(){return M(this.next,this.iterator)},!0);E({target:"Iterator",stat:!0,forced:Y},{from:function(B){var K=U(typeof B=="string"?C(B):B,!0);return n(j,K.iterator)?K.iterator:new te(K)}})},4482:function(H,Q,i){"use strict";var E=i(26589),M=i(38144);E({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:M})},55330:function(H,Q,i){"use strict";var E=i(26589),M=i(24736),C=i(41876);E({target:"Iterator",proto:!0,real:!0,forced:C},{map:M})},18594:function(H,Q,i){"use strict";var E=i(26589),M=i(4048),C=TypeError;E({target:"Iterator",stat:!0,forced:!0},{range:function(j,$,U){if(typeof j=="number")return new M(j,$,U,"number",0,1);if(typeof j=="bigint")return new M(j,$,U,"bigint",BigInt(0),BigInt(1));throw new C("Incorrect Iterator.range arguments")}})},82063:function(H,Q,i){"use strict";var E=i(26589),M=i(70147),C=i(91216),n=i(47033),j=i(81770),$=TypeError;E({target:"Iterator",proto:!0,real:!0},{reduce:function(Y){n(this),C(Y);var te=j(this),X=arguments.length<2,B=X?void 0:arguments[1],K=0;if(M(te,function(de){X?(X=!1,B=de):B=Y(B,de,K),K++},{IS_RECORD:!0}),X)throw new $("Reduce of empty iterator with no initial value");return B}})},69776:function(H,Q,i){"use strict";var E=i(26589),M=i(70147),C=i(91216),n=i(47033),j=i(81770);E({target:"Iterator",proto:!0,real:!0},{some:function(U){n(this),C(U);var Y=j(this),te=0;return M(Y,function(X,B){if(U(X,te++))return B()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},44140:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(47033),n=i(81770),j=i(49551),$=i(18709),U=i(96813),Y=i(90431),te=i(41876),X=U(function(){var B=this.iterator;if(!this.remaining--)return this.done=!0,Y(B,"normal",void 0);var K=C(M(this.next,B)),de=this.done=!!K.done;if(!de)return K.value});E({target:"Iterator",proto:!0,real:!0,forced:te},{take:function(K){C(this);var de=$(j(+K));return new X(n(this),{remaining:de})}})},99906:function(H,Q,i){"use strict";var E=i(26589),M=i(47033),C=i(70147),n=i(81770),j=[].push;E({target:"Iterator",proto:!0,real:!0},{toArray:function(){var U=[];return C(n(M(this)),j,{that:U,IS_RECORD:!0}),U}})},89711:function(H,Q,i){"use strict";var E=i(26589),M=i(47033),C=i(86219),n=i(54646),j=i(81770),$=i(41876);E({target:"Iterator",proto:!0,real:!0,forced:$},{toAsync:function(){return new n(j(new C(j(M(this)))))}})},11876:function(H,Q,i){"use strict";var E=i(26589),M=i(97343),C=i(54931);E({target:"JSON",stat:!0,forced:!M},{isRawJSON:C})},74335:function(H,Q,i){"use strict";var E=i(26589),M=i(27233),C=i(38386),n=i(70521),j=i(43930),$=i(98789),U=i(21051),Y=i(11203),te=i(87487),X=i(14592),B=i(66516),K=i(48109),de=i(56853),he=i(56261),J=i(98224),ae=i(13293),se=C.JSON,Ee=C.Number,Le=C.SyntaxError,ke=se&&se.parse,ye=n("Object","keys"),Se=Object.getOwnPropertyDescriptor,be=j("".charAt),Ue=j("".slice),qe=j(/./.exec),je=j([].push),nt=/^\d$/,Ct=/^[1-9]$/,ft=/^(?:-|\d)$/,Et=/^[\t\n\r ]$/,yt=0,_t=1,He=function(vt,ue){vt=B(vt);var lt=new Qe(vt,0,""),le=lt.parse(),Je=le.value,we=lt.skip(Et,le.end);if(we<vt.length)throw new Le('Unexpected extra character: "'+be(vt,we)+'" after the parsed data at: '+we);return U(ue)?bt({"":Je},"",ue,le):Je},bt=function(vt,ue,lt,le){var Je=vt[ue],we=le&&Je===le.value,Pn=we&&typeof le.source=="string"?{source:le.source}:{},Mt,or,wr,Dr,lr;if(Y(Je)){var Pe=te(Je),ut=we?le.nodes:Pe?[]:{};if(Pe)for(Mt=ut.length,wr=K(Je),Dr=0;Dr<wr;Dr++)Tt(Je,Dr,bt(Je,""+Dr,lt,Dr<Mt?ut[Dr]:void 0));else for(or=ye(Je),wr=K(or),Dr=0;Dr<wr;Dr++)lr=or[Dr],Tt(Je,lr,bt(Je,lr,lt,X(ut,lr)?ut[lr]:void 0))}return $(lt,vt,ue,Je,Pn)},Tt=function(vt,ue,lt){if(M){var le=Se(vt,ue);if(le&&!le.configurable)return}lt===void 0?delete vt[ue]:de(vt,ue,lt)},st=function(vt,ue,lt,le){this.value=vt,this.end=ue,this.source=lt,this.nodes=le},Qe=function(vt,ue){this.source=vt,this.index=ue};Qe.prototype={fork:function(vt){return new Qe(this.source,vt)},parse:function(){var vt=this.source,ue=this.skip(Et,this.index),lt=this.fork(ue),le=be(vt,ue);if(qe(ft,le))return lt.number();switch(le){case"{":return lt.object();case"[":return lt.array();case'"':return lt.string();case"t":return lt.keyword(!0);case"f":return lt.keyword(!1);case"n":return lt.keyword(null)}throw new Le('Unexpected character: "'+le+'" at: '+ue)},node:function(vt,ue,lt,le,Je){return new st(ue,le,vt?null:Ue(this.source,lt,le),Je)},object:function(){for(var vt=this.source,ue=this.index+1,lt=!1,le={},Je={};ue<vt.length;){if(ue=this.until(['"',"}"],ue),be(vt,ue)==="}"&&!lt){ue++;break}var we=this.fork(ue).string(),Pn=we.value;ue=we.end,ue=this.until([":"],ue)+1,ue=this.skip(Et,ue),we=this.fork(ue).parse(),de(Je,Pn,we),de(le,Pn,we.value),ue=this.until([",","}"],we.end);var Mt=be(vt,ue);if(Mt===",")lt=!0,ue++;else if(Mt==="}"){ue++;break}}return this.node(_t,le,this.index,ue,Je)},array:function(){for(var vt=this.source,ue=this.index+1,lt=!1,le=[],Je=[];ue<vt.length;){if(ue=this.skip(Et,ue),be(vt,ue)==="]"&&!lt){ue++;break}var we=this.fork(ue).parse();if(je(Je,we),je(le,we.value),ue=this.until([",","]"],we.end),be(vt,ue)===",")lt=!0,ue++;else if(be(vt,ue)==="]"){ue++;break}}return this.node(_t,le,this.index,ue,Je)},string:function(){var vt=this.index,ue=J(this.source,this.index+1);return this.node(yt,ue.value,vt,ue.end)},number:function(){var vt=this.source,ue=this.index,lt=ue;if(be(vt,lt)==="-"&&lt++,be(vt,lt)==="0")lt++;else if(qe(Ct,be(vt,lt)))lt=this.skip(nt,++lt);else throw new Le("Failed to parse number at: "+lt);if(be(vt,lt)==="."&&(lt=this.skip(nt,++lt)),be(vt,lt)==="e"||be(vt,lt)==="E"){lt++,(be(vt,lt)==="+"||be(vt,lt)==="-")&&lt++;var le=lt;if(lt=this.skip(nt,lt),le===lt)throw new Le("Failed to parse number's exponent value at: "+lt)}return this.node(yt,Ee(Ue(vt,ue,lt)),ue,lt)},keyword:function(vt){var ue=""+vt,lt=this.index,le=lt+ue.length;if(Ue(this.source,lt,le)!==ue)throw new Le("Failed to parse value at: "+lt);return this.node(yt,vt,lt,le)},skip:function(vt,ue){for(var lt=this.source;ue<lt.length&&qe(vt,be(lt,ue));ue++);return ue},until:function(vt,ue){ue=this.skip(Et,ue);for(var lt=be(this.source,ue),le=0;le<vt.length;le++)if(vt[le]===lt)return ue;throw new Le('Unexpected character: "'+lt+'" at: '+ue)}};var mt=he(function(){var vt="9007199254740993",ue;return ke(vt,function(lt,le,Je){ue=Je.source}),ue!==vt}),Ht=ae&&!he(function(){return 1/ke("-0 	")!==-1/0});E({target:"JSON",stat:!0,forced:mt},{parse:function(ue,lt){return Ht&&!U(lt)?ke(ue):He(ue,lt)}})},70561:function(H,Q,i){"use strict";var E=i(26589),M=i(10356),C=i(97343),n=i(70521),j=i(98789),$=i(43930),U=i(21051),Y=i(54931),te=i(66516),X=i(56853),B=i(98224),K=i(21899),de=i(86482),he=i(92657).set,J=String,ae=SyntaxError,se=n("JSON","parse"),Ee=n("JSON","stringify"),Le=n("Object","create"),ke=n("Object","freeze"),ye=$("".charAt),Se=$("".slice),be=$(/./.exec),Ue=$([].push),qe=de(),je=qe.length,nt="Unacceptable as raw JSON",Ct=/^[\t\n\r ]$/;E({target:"JSON",stat:!0,forced:!C},{rawJSON:function(Et){var yt=te(Et);if(yt===""||be(Ct,ye(yt,0))||be(Ct,ye(yt,yt.length-1)))throw new ae(nt);var _t=se(yt);if(typeof _t=="object"&&_t!==null)throw new ae(nt);var He=Le(null);return he(He,{type:"RawJSON"}),X(He,"rawJSON",yt),M?ke(He):He}}),Ee&&E({target:"JSON",stat:!0,arity:3,forced:!C},{stringify:function(Et,yt,_t){var He=K(yt),bt=[],Tt=Ee(Et,function(lt,le){var Je=U(He)?j(He,this,J(lt),le):le;return Y(Je)?qe+(Ue(bt,Je.rawJSON)-1):Je},_t);if(typeof Tt!="string")return Tt;for(var st="",Qe=Tt.length,mt=0;mt<Qe;mt++){var Ht=ye(Tt,mt);if(Ht==='"'){var vt=B(Tt,++mt).end-1,ue=Se(Tt,mt,vt);st+=Se(ue,0,je)===qe?bt[Se(ue,je)]:'"'+ue+'"',mt=vt}else st+=Ht}return st}})},85936:function(H,Q,i){"use strict";var E=i(26589),M=i(782),C=i(92192).remove;E({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var j=M(this),$=!0,U,Y=0,te=arguments.length;Y<te;Y++)U=C(j,arguments[Y]),$=$&&U;return!!$}})},46699:function(H,Q,i){"use strict";var E=i(26589),M=i(782),C=i(92192),n=C.get,j=C.has,$=C.set;E({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(Y,te){var X=M(this),B,K;return j(X,Y)?(B=n(X,Y),"update"in te&&(B=te.update(B,Y,X),$(X,Y,B)),B):(K=te.insert(Y,X),$(X,Y,K),K)}})},26961:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(73536);E({target:"Map",proto:!0,real:!0,forced:!0},{every:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0);return n(U,function(te,X){if(!Y(te,X,U))return!1},!0)!==!1}})},77877:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(92192),j=i(73536),$=n.Map,U=n.set;E({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(te){var X=C(this),B=M(te,arguments.length>1?arguments[1]:void 0),K=new $;return j(X,function(de,he){B(de,he,X)&&U(K,he,de)}),K}})},82401:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(73536);E({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0),te=n(U,function(X,B){if(Y(X,B,U))return{key:B}},!0);return te&&te.key}})},34499:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(73536);E({target:"Map",proto:!0,real:!0,forced:!0},{find:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0),te=n(U,function(X,B){if(Y(X,B,U))return{value:X}},!0);return te&&te.value}})},52933:function(H,Q,i){"use strict";var E=i(26589),M=i(13271);E({target:"Map",stat:!0,forced:!0},{from:M})},63018:function(H,Q,i){"use strict";var E=i(26589),M=i(56472),C=i(782),n=i(73536);E({target:"Map",proto:!0,real:!0,forced:!0},{includes:function($){return n(C(this),function(U){if(M(U,$))return!0},!0)===!0}})},39888:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(70147),n=i(21051),j=i(91216),$=i(92192).Map;E({target:"Map",stat:!0,forced:!0},{keyBy:function(Y,te){var X=n(this)?this:$,B=new X;j(te);var K=j(B.set);return C(Y,function(de){M(K,B,te(de),de)}),B}})},6415:function(H,Q,i){"use strict";var E=i(26589),M=i(782),C=i(73536);E({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(j){var $=C(M(this),function(U,Y){if(U===j)return{key:Y}},!0);return $&&$.key}})},48137:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(92192),j=i(73536),$=n.Map,U=n.set;E({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(te){var X=C(this),B=M(te,arguments.length>1?arguments[1]:void 0),K=new $;return j(X,function(de,he){U(K,B(de,he,X),de)}),K}})},49233:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(92192),j=i(73536),$=n.Map,U=n.set;E({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(te){var X=C(this),B=M(te,arguments.length>1?arguments[1]:void 0),K=new $;return j(X,function(de,he){U(K,he,B(de,he,X))}),K}})},61656:function(H,Q,i){"use strict";var E=i(26589),M=i(782),C=i(70147),n=i(92192).set;E({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function($){for(var U=M(this),Y=arguments.length,te=0;te<Y;)C(arguments[te++],function(X,B){n(U,X,B)},{AS_ENTRIES:!0});return U}})},4924:function(H,Q,i){"use strict";var E=i(26589),M=i(94449);E({target:"Map",stat:!0,forced:!0},{of:M})},56420:function(H,Q,i){"use strict";var E=i(26589),M=i(91216),C=i(782),n=i(73536),j=TypeError;E({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(U){var Y=C(this),te=arguments.length<2,X=te?void 0:arguments[1];if(M(U),n(Y,function(B,K){te?(te=!1,X=B):X=U(X,B,K,Y)}),te)throw new j("Reduce of empty map with no initial value");return X}})},15886:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(782),n=i(73536);E({target:"Map",proto:!0,real:!0,forced:!0},{some:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0);return n(U,function(te,X){if(Y(te,X,U))return!0},!0)===!0}})},34033:function(H,Q,i){"use strict";var E=i(26589),M=i(23766);E({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:M})},73363:function(H,Q,i){"use strict";var E=i(26589),M=i(91216),C=i(782),n=i(92192),j=TypeError,$=n.get,U=n.has,Y=n.set;E({target:"Map",proto:!0,real:!0,forced:!0},{update:function(X,B){var K=C(this),de=arguments.length;M(B);var he=U(K,X);if(!he&&de<3)throw new j("Updating absent value");var J=he?$(K,X):M(de>2?arguments[2]:void 0)(X,K);return Y(K,X,B(J,X,K)),K}})},10397:function(H,Q,i){"use strict";var E=i(26589),M=i(23766);E({target:"Map",proto:!0,real:!0,forced:!0},{upsert:M})},58527:function(H,Q,i){"use strict";var E=i(26589),M=Math.min,C=Math.max;E({target:"Math",stat:!0,forced:!0},{clamp:function(j,$,U){return M(U,C($,j))}})},43446:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})},10986:function(H,Q,i){"use strict";var E=i(26589),M=180/Math.PI;E({target:"Math",stat:!0,forced:!0},{degrees:function(n){return n*M}})},53408:function(H,Q,i){"use strict";var E=i(26589),M=i(99953);E({target:"Math",stat:!0},{f16round:M})},14316:function(H,Q,i){"use strict";var E=i(26589),M=i(60114),C=i(18208);E({target:"Math",stat:!0,forced:!0},{fscale:function(j,$,U,Y,te){return C(M(j,$,U,Y,te))}})},55693:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,forced:!0},{iaddh:function(C,n,j,$){var U=C>>>0,Y=n>>>0,te=j>>>0;return Y+($>>>0)+((U&te|(U|te)&~(U+te>>>0))>>>31)|0}})},91067:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,forced:!0},{imulh:function(C,n){var j=65535,$=+C,U=+n,Y=$&j,te=U&j,X=$>>16,B=U>>16,K=(X*te>>>0)+(Y*te>>>16);return X*B+(K>>16)+((Y*B>>>0)+(K&j)>>16)}})},6927:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,forced:!0},{isubh:function(C,n,j,$){var U=C>>>0,Y=n>>>0,te=j>>>0;return Y-($>>>0)-((~U&te|~(U^te)&U-te>>>0)>>>31)|0}})},21459:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})},51986:function(H,Q,i){"use strict";var E=i(26589),M=Math.PI/180;E({target:"Math",stat:!0,forced:!0},{radians:function(n){return n*M}})},68828:function(H,Q,i){"use strict";var E=i(26589),M=i(60114);E({target:"Math",stat:!0,forced:!0},{scale:M})},9011:function(H,Q,i){"use strict";var E=i(26589),M=i(47033),C=i(19447),n=i(92388),j=i(13988),$=i(92657),U="Seeded Random",Y=U+" Generator",te='Math.seededPRNG() argument should have a "seed" field with a finite value.',X=$.set,B=$.getterFor(Y),K=TypeError,de=n(function(J){X(this,{type:Y,seed:J%2147483647})},U,function(){var J=B(this),ae=J.seed=(J.seed*1103515245+12345)%2147483647;return j((ae&1073741823)/1073741823,!1)});E({target:"Math",stat:!0,forced:!0},{seededPRNG:function(J){var ae=M(J).seed;if(!C(ae))throw new K(te);return new de(ae)}})},94887:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,forced:!0},{signbit:function(C){var n=+C;return n===n&&n===0?1/n===-1/0:n<0}})},67007:function(H,Q,i){"use strict";var E=i(26589);E({target:"Math",stat:!0,forced:!0},{umulh:function(C,n){var j=65535,$=+C,U=+n,Y=$&j,te=U&j,X=$>>>16,B=U>>>16,K=(X*te>>>0)+(Y*te>>>16);return X*B+(K>>>16)+((Y*B>>>0)+(K&j)>>>16)}})},34482:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(65342),n="Invalid number representation",j="Invalid radix",$=RangeError,U=SyntaxError,Y=TypeError,te=parseInt,X=Math.pow,B=/^[\d.a-z]+$/,K=M("".charAt),de=M(B.exec),he=M(1 .toString),J=M("".slice),ae=M("".split);E({target:"Number",stat:!0,forced:!0},{fromString:function(Ee,Le){var ke=1;if(typeof Ee!="string")throw new Y(n);if(!Ee.length)throw new U(n);if(K(Ee,0)==="-"&&(ke=-1,Ee=J(Ee,1),!Ee.length))throw new U(n);var ye=Le===void 0?10:C(Le);if(ye<2||ye>36)throw new $(j);if(!de(B,Ee))throw new U(n);var Se=ae(Ee,"."),be=te(Se[0],ye);if(Se.length>1&&(be+=te(Se[1],ye)/X(ye,Se[1].length)),ye===10&&he(be,ye)!==Ee)throw new U(n);return ke*be}})},1945:function(H,Q,i){"use strict";var E=i(26589),M=i(4048);E({target:"Number",stat:!0,forced:!0},{range:function(n,j,$){return new M(n,j,$,"number",0,1)}})},51976:function(H,Q,i){"use strict";var E=i(26589),M=i(75902);E({target:"Object",stat:!0,forced:!0},{iterateEntries:function(n){return new M(n,"entries")}})},766:function(H,Q,i){"use strict";var E=i(26589),M=i(75902);E({target:"Object",stat:!0,forced:!0},{iterateKeys:function(n){return new M(n,"keys")}})},87799:function(H,Q,i){"use strict";var E=i(26589),M=i(75902);E({target:"Object",stat:!0,forced:!0},{iterateValues:function(n){return new M(n,"values")}})},84059:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(27233),n=i(39693),j=i(91216),$=i(47033),U=i(86036),Y=i(21051),te=i(95582),X=i(11203),B=i(98285),K=i(66511),de=i(25785),he=i(42917),J=i(31981),ae=i(44525),se=i(92657),Ee=ae("observable"),Le="Observable",ke="Subscription",ye="SubscriptionObserver",Se=se.getterFor,be=se.set,Ue=Se(Le),qe=Se(ke),je=Se(ye),nt=function(_t){this.observer=$(_t),this.cleanup=void 0,this.subscriptionObserver=void 0};nt.prototype={type:ke,clean:function(){var _t=this.cleanup;if(_t){this.cleanup=void 0;try{_t()}catch(He){J(He)}}},close:function(){if(!C){var _t=this.facade,He=this.subscriptionObserver;_t.closed=!0,He&&(He.closed=!0)}this.observer=void 0},isClosed:function(){return this.observer===void 0}};var Ct=function(_t,He){var bt=be(this,new nt(_t)),Tt;C||(this.closed=!1);try{(Tt=B(_t,"start"))&&M(Tt,_t,this)}catch(Ht){J(Ht)}if(!bt.isClosed()){var st=bt.subscriptionObserver=new ft(bt);try{var Qe=He(st),mt=Qe;te(Qe)||(bt.cleanup=Y(Qe.unsubscribe)?function(){mt.unsubscribe()}:j(Qe))}catch(Ht){st.error(Ht);return}bt.isClosed()&&bt.clean()}};Ct.prototype=de({},{unsubscribe:function(){var He=qe(this);He.isClosed()||(He.close(),He.clean())}}),C&&he(Ct.prototype,"closed",{configurable:!0,get:function(){return qe(this).isClosed()}});var ft=function(_t){be(this,{type:ye,subscriptionState:_t}),C||(this.closed=!1)};ft.prototype=de({},{next:function(He){var bt=je(this).subscriptionState;if(!bt.isClosed()){var Tt=bt.observer;try{var st=B(Tt,"next");st&&M(st,Tt,He)}catch(Qe){J(Qe)}}},error:function(He){var bt=je(this).subscriptionState;if(!bt.isClosed()){var Tt=bt.observer;bt.close();try{var st=B(Tt,"error");st?M(st,Tt,He):J(He)}catch(Qe){J(Qe)}bt.clean()}},complete:function(){var He=je(this).subscriptionState;if(!He.isClosed()){var bt=He.observer;He.close();try{var Tt=B(bt,"complete");Tt&&M(Tt,bt)}catch(st){J(st)}He.clean()}}}),C&&he(ft.prototype,"closed",{configurable:!0,get:function(){return je(this).subscriptionState.isClosed()}});var Et=function(He){U(this,yt),be(this,{type:Le,subscriber:j(He)})},yt=Et.prototype;de(yt,{subscribe:function(He){var bt=arguments.length;return new Ct(Y(He)?{next:He,error:bt>1?arguments[1]:void 0,complete:bt>2?arguments[2]:void 0}:X(He)?He:{},Ue(this).subscriber)}}),K(yt,Ee,function(){return this}),E({global:!0,constructor:!0,forced:!0},{Observable:Et}),n(Le)},82629:function(H,Q,i){"use strict";var E=i(26589),M=i(70521),C=i(98789),n=i(47033),j=i(83808),$=i(39151),U=i(98285),Y=i(70147),te=i(44525),X=te("observable");E({target:"Observable",stat:!0,forced:!0},{from:function(K){var de=j(this)?this:M("Observable"),he=U(n(K),X);if(he){var J=n(C(he,K));return J.constructor===de?J:new de(function(se){return J.subscribe(se)})}var ae=$(K);return new de(function(se){Y(ae,function(Ee,Le){if(se.next(Ee),se.closed)return Le()},{IS_ITERATOR:!0,INTERRUPTED:!0}),se.complete()})}})},79395:function(H,Q,i){"use strict";i(84059),i(82629),i(73184)},73184:function(H,Q,i){"use strict";var E=i(26589),M=i(70521),C=i(83808),n=M("Array");E({target:"Observable",stat:!0,forced:!0},{of:function(){for(var $=C(this)?this:M("Observable"),U=arguments.length,Y=n(U),te=0;te<U;)Y[te]=arguments[te++];return new $(function(X){for(var B=0;B<U;B++)if(X.next(Y[B]),X.closed)return;X.complete()})}})},26771:function(H,Q,i){"use strict";var E=i(26589),M=i(33701),C=i(59683);E({target:"Promise",stat:!0,forced:!0},{try:function(n){var j=M.f(this),$=C(n);return($.error?j.reject:j.resolve)($.value),j.promise}})},52035:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=M.toKey,j=M.set;E({target:"Reflect",stat:!0},{defineMetadata:function(U,Y,te){var X=arguments.length<4?void 0:n(arguments[3]);j(U,Y,C(te),X)}})},50268:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=M.toKey,j=M.getMap,$=M.store;E({target:"Reflect",stat:!0},{deleteMetadata:function(Y,te){var X=arguments.length<3?void 0:n(arguments[2]),B=j(C(te),X,!1);if(B===void 0||!B.delete(Y))return!1;if(B.size)return!0;var K=$.get(te);return K.delete(X),!!K.size||$.delete(te)}})},82493:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(73327),n=i(47033),j=i(43587),$=i(70822),U=M($),Y=M([].concat),te=C.keys,X=C.toKey,B=function(K,de){var he=te(K,de),J=j(K);if(J===null)return he;var ae=B(J,de);return ae.length?he.length?U(Y(he,ae)):ae:he};E({target:"Reflect",stat:!0},{getMetadataKeys:function(de){var he=arguments.length<2?void 0:X(arguments[1]);return B(n(de),he)}})},88089:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=i(43587),j=M.has,$=M.get,U=M.toKey,Y=function(te,X,B){var K=j(te,X,B);if(K)return $(te,X,B);var de=n(X);return de!==null?Y(te,de,B):void 0};E({target:"Reflect",stat:!0},{getMetadata:function(X,B){var K=arguments.length<3?void 0:U(arguments[2]);return Y(X,C(B),K)}})},18767:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=M.keys,j=M.toKey;E({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(U){var Y=arguments.length<2?void 0:j(arguments[1]);return n(C(U),Y)}})},78398:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=M.get,j=M.toKey;E({target:"Reflect",stat:!0},{getOwnMetadata:function(U,Y){var te=arguments.length<3?void 0:j(arguments[2]);return n(U,C(Y),te)}})},50110:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=i(43587),j=M.has,$=M.toKey,U=function(Y,te,X){var B=j(Y,te,X);if(B)return!0;var K=n(te);return K!==null?U(Y,K,X):!1};E({target:"Reflect",stat:!0},{hasMetadata:function(te,X){var B=arguments.length<3?void 0:$(arguments[2]);return U(te,C(X),B)}})},7314:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=M.has,j=M.toKey;E({target:"Reflect",stat:!0},{hasOwnMetadata:function(U,Y){var te=arguments.length<3?void 0:j(arguments[2]);return n(U,C(Y),te)}})},4062:function(H,Q,i){"use strict";var E=i(26589),M=i(73327),C=i(47033),n=M.toKey,j=M.set;E({target:"Reflect",stat:!0},{metadata:function(U,Y){return function(X,B){j(U,Y,C(X),n(B))}}})},29911:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(66516),n=i(88287),j=M("".charCodeAt),$=M("".replace),U=RegExp("[!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^`{|}~"+n+"]","g");E({target:"RegExp",stat:!0,forced:!0},{escape:function(te){var X=C(te),B=j(X,0);return(B>47&&B<58?"\\x3":"")+$(X,U,"\\$&")}})},10682:function(H,Q,i){"use strict";var E=i(26589),M=i(19397),C=i(81343).add;E({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var j=M(this),$=0,U=arguments.length;$<U;$++)C(j,arguments[$]);return j}})},44518:function(H,Q,i){"use strict";var E=i(26589),M=i(19397),C=i(81343).remove;E({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var j=M(this),$=!0,U,Y=0,te=arguments.length;Y<te;Y++)U=C(j,arguments[Y]),$=$&&U;return!!$}})},18291:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(58367);E({target:"Set",proto:!0,real:!0,forced:!0},{difference:function($){return M(n,this,C($))}})},44267:function(H,Q,i){"use strict";var E=i(26589),M=i(58367),C=i(47607);E({target:"Set",proto:!0,real:!0,forced:!C("difference")},{difference:M})},50772:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(19397),n=i(12834);E({target:"Set",proto:!0,real:!0,forced:!0},{every:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0);return n(U,function(te){if(!Y(te,te,U))return!1},!0)!==!1}})},79253:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(19397),n=i(81343),j=i(12834),$=n.Set,U=n.add;E({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(te){var X=C(this),B=M(te,arguments.length>1?arguments[1]:void 0),K=new $;return j(X,function(de){B(de,de,X)&&U(K,de)}),K}})},30417:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(19397),n=i(12834);E({target:"Set",proto:!0,real:!0,forced:!0},{find:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0),te=n(U,function(X){if(Y(X,X,U))return{value:X}},!0);return te&&te.value}})},78410:function(H,Q,i){"use strict";var E=i(26589),M=i(13271);E({target:"Set",stat:!0,forced:!0},{from:M})},85922:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(91054);E({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function($){return M(n,this,C($))}})},29746:function(H,Q,i){"use strict";var E=i(26589),M=i(56261),C=i(91054),n=i(47607),j=!n("intersection")||M(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});E({target:"Set",proto:!0,real:!0,forced:j},{intersection:C})},48383:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(94892);E({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function($){return M(n,this,C($))}})},29593:function(H,Q,i){"use strict";var E=i(26589),M=i(94892),C=i(47607);E({target:"Set",proto:!0,real:!0,forced:!C("isDisjointFrom")},{isDisjointFrom:M})},67295:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(70351);E({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function($){return M(n,this,C($))}})},18974:function(H,Q,i){"use strict";var E=i(26589),M=i(70351),C=i(47607);E({target:"Set",proto:!0,real:!0,forced:!C("isSubsetOf")},{isSubsetOf:M})},72563:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(48766);E({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function($){return M(n,this,C($))}})},7340:function(H,Q,i){"use strict";var E=i(26589),M=i(48766),C=i(47607);E({target:"Set",proto:!0,real:!0,forced:!C("isSupersetOf")},{isSupersetOf:M})},22499:function(H,Q,i){"use strict";var E=i(26589),M=i(43930),C=i(19397),n=i(12834),j=i(66516),$=M([].join),U=M([].push);E({target:"Set",proto:!0,real:!0,forced:!0},{join:function(te){var X=C(this),B=te===void 0?",":j(te),K=[];return n(X,function(de){U(K,de)}),$(K,B)}})},72260:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(19397),n=i(81343),j=i(12834),$=n.Set,U=n.add;E({target:"Set",proto:!0,real:!0,forced:!0},{map:function(te){var X=C(this),B=M(te,arguments.length>1?arguments[1]:void 0),K=new $;return j(X,function(de){U(K,B(de,de,X))}),K}})},82077:function(H,Q,i){"use strict";var E=i(26589),M=i(94449);E({target:"Set",stat:!0,forced:!0},{of:M})},33288:function(H,Q,i){"use strict";var E=i(26589),M=i(91216),C=i(19397),n=i(12834),j=TypeError;E({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(U){var Y=C(this),te=arguments.length<2,X=te?void 0:arguments[1];if(M(U),n(Y,function(B){te?(te=!1,X=B):X=U(X,B,B,Y)}),te)throw new j("Reduce of empty set with no initial value");return X}})},5257:function(H,Q,i){"use strict";var E=i(26589),M=i(9873),C=i(19397),n=i(12834);E({target:"Set",proto:!0,real:!0,forced:!0},{some:function($){var U=C(this),Y=M($,arguments.length>1?arguments[1]:void 0);return n(U,function(te){if(Y(te,te,U))return!0},!0)===!0}})},20108:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(1605);E({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function($){return M(n,this,C($))}})},28220:function(H,Q,i){"use strict";var E=i(26589),M=i(1605),C=i(47607);E({target:"Set",proto:!0,real:!0,forced:!C("symmetricDifference")},{symmetricDifference:M})},51340:function(H,Q,i){"use strict";var E=i(26589),M=i(98789),C=i(68255),n=i(31130);E({target:"Set",proto:!0,real:!0,forced:!0},{union:function($){return M(n,this,C($))}})},80628:function(H,Q,i){"use strict";var E=i(26589),M=i(31130),C=i(47607);E({target:"Set",proto:!0,real:!0,forced:!C("union")},{union:M})},347:function(H,Q,i){"use strict";var E=i(26589),M=i(41409).charAt,C=i(31628),n=i(65342),j=i(66516);E({target:"String",proto:!0,forced:!0},{at:function(U){var Y=j(C(this)),te=Y.length,X=n(U),B=X>=0?X:te+X;return B<0||B>=te?void 0:M(Y,B)}})},2803:function(H,Q,i){"use strict";var E=i(26589),M=i(92388),C=i(13988),n=i(31628),j=i(66516),$=i(92657),U=i(41409),Y=U.codeAt,te=U.charAt,X="String Iterator",B=$.set,K=$.getterFor(X),de=M(function(J){B(this,{type:X,string:J,index:0})},"String",function(){var J=K(this),ae=J.string,se=J.index,Ee;return se>=ae.length?C(void 0,!0):(Ee=te(ae,se),J.index+=Ee.length,C({codePoint:Y(Ee,0),position:se},!1))});E({target:"String",proto:!0,forced:!0},{codePoints:function(){return new de(j(n(this)))}})},11489:function(H,Q,i){"use strict";var E=i(26589),M=i(40975);E({target:"String",stat:!0,forced:!0},{cooked:M})},74055:function(H,Q,i){"use strict";var E=i(10356),M=i(26589),C=i(9107),n=i(43930),j=i(97987),$=i(47033),U=i(71953),Y=i(21051),te=i(48109),X=i(17567).f,B=i(43420),K=i(44098),de=i(40975),he=i(7184),J=i(88287),ae=new K.WeakMap,se=K.get,Ee=K.has,Le=K.set,ke=Array,ye=TypeError,Se=Object.freeze||Object,be=Object.isFrozen,Ue=Math.min,qe=n("".charAt),je=n("".slice),nt=n("".split),Ct=n(/./.exec),ft=/([\n\u2028\u2029]|\r\n?)/g,Et=RegExp("^["+J+"]*"),yt=RegExp("[^"+J+"]"),_t="Invalid tag",He="Invalid opening line",bt="Invalid closing line",Tt=function(ue){var lt=ue.raw;if(E&&!be(lt))throw new ye("Raw template should be frozen");if(Ee(ae,lt))return se(ae,lt);var le=st(lt),Je=mt(le);return X(Je,"raw",{value:Se(le)}),Se(Je),Le(ae,lt,Je),Je},st=function(ue){var lt=U(ue),le=te(lt),Je=ke(le),we=ke(le),Pn=0,Mt,or,wr,Dr;if(!le)throw new ye(_t);for(;Pn<le;Pn++){var lr=lt[Pn];if(typeof lr=="string")Je[Pn]=nt(lr,ft);else throw new ye(_t)}for(Pn=0;Pn<le;Pn++){var Pe=Pn+1===le;if(Mt=Je[Pn],Pn===0){if(Mt.length===1||Mt[0].length>0)throw new ye(He);Mt[1]=""}if(Pe){if(Mt.length===1||Ct(yt,Mt[Mt.length-1]))throw new ye(bt);Mt[Mt.length-2]="",Mt[Mt.length-1]=""}for(var ut=2;ut<Mt.length;ut+=2){var Ve=Mt[ut],gt=ut+1===Mt.length&&!Pe,Gt=Ct(Et,Ve)[0];if(!gt&&Gt.length===Ve.length){Mt[ut]="";continue}or=Qe(Gt,or)}}var Me=or?or.length:0;for(Pn=0;Pn<le;Pn++){for(Mt=Je[Pn],wr=Mt[0],Dr=1;Dr<Mt.length;Dr+=2)wr+=Mt[Dr]+je(Mt[Dr+1],Me);we[Pn]=wr}return we},Qe=function(ue,lt){if(lt===void 0||ue===lt)return ue;for(var le=0,Je=Ue(ue.length,lt.length);le<Je&&qe(ue,le)===qe(lt,le);le++);return je(ue,0,le)},mt=function(ue){for(var lt=0,le=ue.length,Je=ke(le);lt<le;lt++)Je[lt]=he(ue[lt]);return Je},Ht=function(ue){return C(function(lt){var le=B(arguments);return le[0]=Tt($(lt)),j(ue,this,le)},"")},vt=Ht(de);M({target:"String",stat:!0,forced:!0},{dedent:function(lt){return $(lt),Y(lt)?Ht(lt):j(vt,this,arguments)}})},30025:function(H,Q,i){"use strict";var E=i(26589),M=i(59479),C=i(43587),n=i(34205),j=i(64838),$=i(74123),U=i(37917),Y=i(85711),te=i(14947),X=i(58955),B=i(44525),K=B("toStringTag"),de=Error,he=function(se,Ee,Le){var ke=M(J,this),ye;return n?ye=n(new de,ke?C(this):J):(ye=ke?this:$(J),U(ye,K,"Error")),Le!==void 0&&U(ye,"message",X(Le)),te(ye,he,ye.stack,1),U(ye,"error",se),U(ye,"suppressed",Ee),ye};n?n(he,de):j(he,de,{name:!0});var J=he.prototype=$(de.prototype,{constructor:Y(1,he),message:Y(1,""),name:Y(1,"SuppressedError")});E({global:!0,constructor:!0,arity:3},{SuppressedError:he})},85924:function(H,Q,i){"use strict";var E=i(38386),M=i(40208),C=i(17567).f,n=i(72888).f,j=E.Symbol;if(M("asyncDispose"),j){var $=n(j,"asyncDispose");$.enumerable&&$.configurable&&$.writable&&C(j,"asyncDispose",{value:$.value,enumerable:!1,configurable:!1,writable:!1})}},14557:function(H,Q,i){"use strict";var E=i(38386),M=i(40208),C=i(17567).f,n=i(72888).f,j=E.Symbol;if(M("dispose"),j){var $=n(j,"dispose");$.enumerable&&$.configurable&&$.writable&&C(j,"dispose",{value:$.value,enumerable:!1,configurable:!1,writable:!1})}},3376:function(H,Q,i){"use strict";var E=i(26589),M=i(52251);E({target:"Symbol",stat:!0},{isRegisteredSymbol:M})},646:function(H,Q,i){"use strict";var E=i(26589),M=i(52251);E({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:M})},18295:function(H,Q,i){"use strict";var E=i(26589),M=i(22876);E({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:M})},62619:function(H,Q,i){"use strict";var E=i(26589),M=i(22876);E({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:M})},13080:function(H,Q,i){"use strict";var E=i(40208);E("matcher")},36985:function(H,Q,i){"use strict";var E=i(40208);E("metadataKey")},60598:function(H,Q,i){"use strict";var E=i(40208);E("metadata")},51213:function(H,Q,i){"use strict";var E=i(40208);E("observable")},34142:function(H,Q,i){"use strict";var E=i(40208);E("patternMatch")},11115:function(H,Q,i){"use strict";var E=i(40208);E("replaceAll")},43656:function(H,Q,i){"use strict";var E=i(66221),M=i(57311).filterReject,C=i(82693),n=E.aTypedArray,j=E.exportTypedArrayMethod;j("filterOut",function(U){var Y=M(n(this),U,arguments.length>1?arguments[1]:void 0);return C(this,Y)},!0)},4489:function(H,Q,i){"use strict";var E=i(66221),M=i(57311).filterReject,C=i(82693),n=E.aTypedArray,j=E.exportTypedArrayMethod;j("filterReject",function(U){var Y=M(n(this),U,arguments.length>1?arguments[1]:void 0);return C(this,Y)},!0)},56457:function(H,Q,i){"use strict";var E=i(70521),M=i(82915),C=i(98200),n=i(66221),j=i(93320),$=n.aTypedArrayConstructor,U=n.exportTypedArrayStaticMethod;U("fromAsync",function(te){var X=this,B=arguments.length,K=B>1?arguments[1]:void 0,de=B>2?arguments[2]:void 0;return new(E("Promise"))(function(he){M(X),he(C(te,K,de))}).then(function(he){return j($(X),he)})},!0)},69320:function(H,Q,i){"use strict";var E=i(66221),M=i(20508),C=i(79936),n=E.aTypedArray,j=E.exportTypedArrayMethod;j("groupBy",function(U){var Y=arguments.length>1?arguments[1]:void 0;return M(n(this),U,Y,C)},!0)},54781:function(H,Q,i){"use strict";var E=i(66221),M=i(48109),C=i(63113),n=i(50655),j=i(42355),$=i(65342),U=i(56261),Y=E.aTypedArray,te=E.getTypedArrayConstructor,X=E.exportTypedArrayMethod,B=Math.max,K=Math.min,de=!U(function(){var he=new Int8Array([1]),J=he.toSpliced(1,0,{valueOf:function(){return he[0]=2,3}});return J[0]!==2||J[1]!==3});X("toSpliced",function(J,ae){var se=Y(this),Ee=te(se),Le=M(se),ke=n(J,Le),ye=arguments.length,Se=0,be,Ue,qe,je,nt,Ct,ft;if(ye===0)be=Ue=0;else if(ye===1)be=0,Ue=Le-ke;else if(Ue=K(B($(ae),0),Le-ke),be=ye-2,be){je=new Ee(be),qe=C(je);for(var Et=2;Et<ye;Et++)nt=arguments[Et],je[Et-2]=qe?j(nt):+nt}for(Ct=Le+be-Ue,ft=new Ee(Ct);Se<ke;Se++)ft[Se]=se[Se];for(;Se<ke+be;Se++)ft[Se]=je[Se-ke];for(;Se<Ct;Se++)ft[Se]=se[Se+Ue-be];return ft},!de)},94332:function(H,Q,i){"use strict";var E=i(43930),M=i(66221),C=i(93320),n=i(70822),j=M.aTypedArray,$=M.getTypedArrayConstructor,U=M.exportTypedArrayMethod,Y=E(n);U("uniqueBy",function(X){return j(this),C($(this),Y(this,X))},!0)},51223:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(43930),n=i(5710),j=i(23325),$=i(14592),U=i(93320),Y=i(28818),te=i(54248),X=Y.c2i,B=Y.c2iUrl,K=M.Uint8Array,de=M.SyntaxError,he=C("".charAt),J=C("".replace),ae=C("".slice),se=C([].push),Ee=/[\t\n\f\r ]/g,Le="Extra bits";K&&E({target:"Uint8Array",stat:!0,forced:!0},{fromBase64:function(ye){j(ye);var Se=arguments.length>1?n(arguments[1]):void 0,be=te(Se)==="base64"?X:B,Ue=Se?!!Se.strict:!1,qe=Ue?ye:J(ye,Ee,"");if(qe.length%4===0)ae(qe,-2)==="=="?qe=ae(qe,0,-2):ae(qe,-1)==="="&&(qe=ae(qe,0,-1));else if(Ue)throw new de("Input is not correctly padded");var je=qe.length%4;switch(je){case 1:throw new de("Bad input length");case 2:qe+="AA";break;case 3:qe+="A"}for(var nt=[],Ct=0,ft=qe.length,Et=function(He){var bt=he(qe,Ct+He);if(!$(be,bt))throw new de('Bad char in input: "'+bt+'"');return be[bt]<<18-6*He};Ct<ft;Ct+=4){var yt=Et(0)+Et(1)+Et(2)+Et(3);se(nt,yt>>16&255,yt>>8&255,yt&255)}var _t=nt.length;if(je===2){if(Ue&&nt[_t-2]!==0)throw new de(Le);_t-=2}else if(je===3){if(Ue&&nt[_t-1]!==0)throw new de(Le);_t--}return U(K,nt,_t)}})},91442:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(43930),n=i(23325),j=M.Uint8Array,$=M.SyntaxError,U=M.parseInt,Y=/[^\da-f]/i,te=C(Y.exec),X=C("".slice);j&&E({target:"Uint8Array",stat:!0,forced:!0},{fromHex:function(K){n(K);var de=K.length;if(de%2)throw new $("String should have an even number of characters");if(te(Y,K))throw new $("String should only contain hex characters");for(var he=new j(de/2),J=0;J<de;J+=2)he[J/2]=U(X(K,J,J+2),16);return he}})},88047:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(43930),n=i(5710),j=i(80090),$=i(28818),U=i(54248),Y=$.i2c,te=$.i2cUrl,X=M.Uint8Array,B=C("".charAt);X&&E({target:"Uint8Array",proto:!0,forced:!0},{toBase64:function(){for(var de=j(this),he=arguments.length?n(arguments[0]):void 0,J=U(he)==="base64"?Y:te,ae="",se=0,Ee=de.length,Le,ke=function(ye){return B(J,Le>>6*ye&63)};se+2<Ee;se+=3)Le=(de[se]<<16)+(de[se+1]<<8)+de[se+2],ae+=ke(3)+ke(2)+ke(1)+ke(0);return se+2===Ee?(Le=(de[se]<<16)+(de[se+1]<<8),ae+=ke(3)+ke(2)+ke(1)+"="):se+1===Ee&&(Le=de[se]<<16,ae+=ke(3)+ke(2)+"=="),ae}})},12886:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(43930),n=i(80090),j=M.Uint8Array,$=C(1 .toString);j&&E({target:"Uint8Array",proto:!0,forced:!0},{toHex:function(){n(this);for(var Y="",te=0,X=this.length;te<X;te++){var B=$(this[te],16);Y+=B.length===1?"0"+B:B}return Y}})},97195:function(H,Q,i){"use strict";var E=i(26589),M=i(19150),C=i(44098).remove;E({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var j=M(this),$=!0,U,Y=0,te=arguments.length;Y<te;Y++)U=C(j,arguments[Y]),$=$&&U;return!!$}})},79693:function(H,Q,i){"use strict";var E=i(26589),M=i(19150),C=i(44098),n=C.get,j=C.has,$=C.set;E({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(Y,te){var X=M(this),B,K;return j(X,Y)?(B=n(X,Y),"update"in te&&(B=te.update(B,Y,X),$(X,Y,B)),B):(K=te.insert(Y,X),$(X,Y,K),K)}})},28954:function(H,Q,i){"use strict";var E=i(26589),M=i(13271);E({target:"WeakMap",stat:!0,forced:!0},{from:M})},62712:function(H,Q,i){"use strict";var E=i(26589),M=i(94449);E({target:"WeakMap",stat:!0,forced:!0},{of:M})},41102:function(H,Q,i){"use strict";var E=i(26589),M=i(23766);E({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:M})},80745:function(H,Q,i){"use strict";var E=i(26589),M=i(73099),C=i(76028).add;E({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var j=M(this),$=0,U=arguments.length;$<U;$++)C(j,arguments[$]);return j}})},14320:function(H,Q,i){"use strict";var E=i(26589),M=i(73099),C=i(76028).remove;E({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var j=M(this),$=!0,U,Y=0,te=arguments.length;Y<te;Y++)U=C(j,arguments[Y]),$=$&&U;return!!$}})},57215:function(H,Q,i){"use strict";var E=i(26589),M=i(13271);E({target:"WeakSet",stat:!0,forced:!0},{from:M})},8339:function(H,Q,i){"use strict";var E=i(26589),M=i(94449);E({target:"WeakSet",stat:!0,forced:!0},{of:M})},77098:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(47982).clear;E({global:!0,bind:!0,enumerable:!0,forced:M.clearImmediate!==C},{clearImmediate:C})},7763:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(70521),n=i(85711),j=i(17567).f,$=i(14592),U=i(86036),Y=i(69976),te=i(58955),X=i(56066),B=i(26389),K=i(27233),de=i(41876),he="DOMException",J=C("Error"),ae=C(he),se=function(){U(this,Ee);var Et=arguments.length,yt=te(Et<1?void 0:arguments[0]),_t=te(Et<2?void 0:arguments[1],"Error"),He=new ae(yt,_t),bt=new J(yt);return bt.name=he,j(He,"stack",n(1,B(bt.stack,1))),Y(He,this,se),He},Ee=se.prototype=ae.prototype,Le="stack"in new J(he),ke="stack"in new ae(1,2),ye=ae&&K&&Object.getOwnPropertyDescriptor(M,he),Se=!!ye&&!(ye.writable&&ye.configurable),be=Le&&!Se&&!ke;E({global:!0,constructor:!0,forced:de||be},{DOMException:be?se:ae});var Ue=C(he),qe=Ue.prototype;if(qe.constructor!==Ue){de||j(qe,"constructor",n(1,Ue));for(var je in X)if($(X,je)){var nt=X[je],Ct=nt.s;$(Ue,Ct)||j(Ue,Ct,n(6,nt.c))}}},76828:function(H,Q,i){"use strict";i(77098),i(21124)},26810:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(42917),n=i(27233),j=TypeError,$=Object.defineProperty,U=M.self!==M;try{if(n){var Y=Object.getOwnPropertyDescriptor(M,"self");(U||!Y||!Y.get||!Y.enumerable)&&C(M,"self",{get:function(){return M},set:function(X){if(this!==M)throw new j("Illegal invocation");$(M,"self",{value:X,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else E({global:!0,simple:!0,forced:U},{self:M})}catch(te){}},21124:function(H,Q,i){"use strict";var E=i(26589),M=i(38386),C=i(47982).set,n=i(13745),j=M.setImmediate?n(C,!1):C;E({global:!0,bind:!0,enumerable:!0,forced:M.setImmediate!==j},{setImmediate:j})},80385:function(H,Q,i){"use strict";var E=i(41876),M=i(26589),C=i(38386),n=i(70521),j=i(43930),$=i(56261),U=i(86482),Y=i(21051),te=i(83808),X=i(95582),B=i(11203),K=i(89934),de=i(70147),he=i(47033),J=i(33242),ae=i(14592),se=i(56853),Ee=i(37917),Le=i(48109),ke=i(93107),ye=i(45448),Se=i(92192),be=i(81343),Ue=i(12834),qe=i(88033),je=i(52618),nt=i(47534),Ct=C.Object,ft=C.Array,Et=C.Date,yt=C.Error,_t=C.TypeError,He=C.PerformanceMark,bt=n("DOMException"),Tt=Se.Map,st=Se.has,Qe=Se.get,mt=Se.set,Ht=be.Set,vt=be.add,ue=be.has,lt=n("Object","keys"),le=j([].push),Je=j((!0).valueOf),we=j(1 .valueOf),Pn=j("".valueOf),Mt=j(Et.prototype.getTime),or=U("structuredClone"),wr="DataCloneError",Dr="Transferring",lr=function(In){return!$(function(){var Gn=new C.Set([7]),hn=In(Gn),mn=In(Ct(7));return hn===Gn||!hn.has(7)||!B(mn)||+mn!=7})&&In},Pe=function(In,Gn){return!$(function(){var hn=new Gn,mn=In({a:hn,b:hn});return!(mn&&mn.a===mn.b&&mn.a instanceof Gn&&mn.a.stack===hn.stack)})},ut=function(In){return!$(function(){var Gn=In(new C.AggregateError([1],or,{cause:3}));return Gn.name!=="AggregateError"||Gn.errors[0]!==1||Gn.message!==or||Gn.cause!==3})},Ve=C.structuredClone,gt=E||!Pe(Ve,yt)||!Pe(Ve,bt)||!ut(Ve),Gt=!Ve&&lr(function(In){return new He(or,{detail:In}).detail}),Me=lr(Ve)||Gt,At=function(In){throw new bt("Uncloneable type: "+In,wr)},Bt=function(In,Gn){throw new bt((Gn||"Cloning")+" of "+In+" cannot be properly polyfilled in this engine",wr)},Sn=function(In,Gn){return Me||Bt(Gn),Me(In)},Lt=function(){var In;try{In=new C.DataTransfer}catch(Gn){try{In=new C.ClipboardEvent("").clipboardData}catch(hn){}}return In&&In.items&&In.files?In:null},Bn=function(In,Gn,hn){if(st(Gn,In))return Qe(Gn,In);var mn=hn||J(In),cn,Ln,Er,mr,Jr,Ie;if(mn==="SharedArrayBuffer")Me?cn=Me(In):cn=In;else{var Ot=C.DataView;!Ot&&!Y(In.slice)&&Bt("ArrayBuffer");try{if(Y(In.slice)&&!In.resizable)cn=In.slice(0);else for(Ln=In.byteLength,Er=("maxByteLength"in In)?{maxByteLength:In.maxByteLength}:void 0,cn=new ArrayBuffer(Ln,Er),mr=new Ot(In),Jr=new Ot(cn),Ie=0;Ie<Ln;Ie++)Jr.setUint8(Ie,mr.getUint8(Ie))}catch(St){throw new bt("ArrayBuffer is detached",wr)}}return mt(Gn,In,cn),cn},en=function(In,Gn,hn,mn,cn){var Ln=C[Gn];return B(Ln)||Bt(Gn),new Ln(Bn(In.buffer,cn),hn,mn)},gn=function(In,Gn){if(K(In)&&At("Symbol"),!B(In))return In;if(Gn){if(st(Gn,In))return Qe(Gn,In)}else Gn=new Tt;var hn=J(In),mn,cn,Ln,Er,mr,Jr,Ie,Ot;switch(hn){case"Array":Ln=ft(Le(In));break;case"Object":Ln={};break;case"Map":Ln=new Tt;break;case"Set":Ln=new Ht;break;case"RegExp":Ln=new RegExp(In.source,ye(In));break;case"Error":switch(cn=In.name,cn){case"AggregateError":Ln=new(n(cn))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":Ln=new(n(cn));break;case"CompileError":case"LinkError":case"RuntimeError":Ln=new(n("WebAssembly",cn));break;default:Ln=new yt}break;case"DOMException":Ln=new bt(In.message,In.name);break;case"ArrayBuffer":case"SharedArrayBuffer":Ln=Bn(In,Gn,hn);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Jr=hn==="DataView"?In.byteLength:In.length,Ln=en(In,hn,In.byteOffset,Jr,Gn);break;case"DOMQuad":try{Ln=new DOMQuad(gn(In.p1,Gn),gn(In.p2,Gn),gn(In.p3,Gn),gn(In.p4,Gn))}catch(St){Ln=Sn(In,hn)}break;case"File":if(Me)try{Ln=Me(In),J(Ln)!==hn&&(Ln=void 0)}catch(St){}if(!Ln)try{Ln=new File([In],In.name,In)}catch(St){}Ln||Bt(hn);break;case"FileList":if(Er=Lt(),Er){for(mr=0,Jr=Le(In);mr<Jr;mr++)Er.items.add(gn(In[mr],Gn));Ln=Er.files}else Ln=Sn(In,hn);break;case"ImageData":try{Ln=new ImageData(gn(In.data,Gn),In.width,In.height,{colorSpace:In.colorSpace})}catch(St){Ln=Sn(In,hn)}break;default:if(Me)Ln=Me(In);else switch(hn){case"BigInt":Ln=Ct(In.valueOf());break;case"Boolean":Ln=Ct(Je(In));break;case"Number":Ln=Ct(we(In));break;case"String":Ln=Ct(Pn(In));break;case"Date":Ln=new Et(Mt(In));break;case"Blob":try{Ln=In.slice(0,In.size,In.type)}catch(St){Bt(hn)}break;case"DOMPoint":case"DOMPointReadOnly":mn=C[hn];try{Ln=mn.fromPoint?mn.fromPoint(In):new mn(In.x,In.y,In.z,In.w)}catch(St){Bt(hn)}break;case"DOMRect":case"DOMRectReadOnly":mn=C[hn];try{Ln=mn.fromRect?mn.fromRect(In):new mn(In.x,In.y,In.width,In.height)}catch(St){Bt(hn)}break;case"DOMMatrix":case"DOMMatrixReadOnly":mn=C[hn];try{Ln=mn.fromMatrix?mn.fromMatrix(In):new mn(In)}catch(St){Bt(hn)}break;case"AudioData":case"VideoFrame":Y(In.clone)||Bt(hn);try{Ln=In.clone()}catch(St){At(hn)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Bt(hn);default:At(hn)}}switch(mt(Gn,In,Ln),hn){case"Array":case"Object":for(Ie=lt(In),mr=0,Jr=Le(Ie);mr<Jr;mr++)Ot=Ie[mr],se(Ln,Ot,gn(In[Ot],Gn));break;case"Map":In.forEach(function(St,at){mt(Ln,gn(at,Gn),gn(St,Gn))});break;case"Set":In.forEach(function(St){vt(Ln,gn(St,Gn))});break;case"Error":Ee(Ln,"message",gn(In.message,Gn)),ae(In,"cause")&&Ee(Ln,"cause",gn(In.cause,Gn)),cn==="AggregateError"?Ln.errors=gn(In.errors,Gn):cn==="SuppressedError"&&(Ln.error=gn(In.error,Gn),Ln.suppressed=gn(In.suppressed,Gn));case"DOMException":je&&Ee(Ln,"stack",gn(In.stack,Gn))}return Ln},ar=function(In,Gn){if(!B(In))throw new _t("Transfer option cannot be converted to a sequence");var hn=[];de(In,function(at){le(hn,he(at))});for(var mn=0,cn=Le(hn),Ln=new Ht,Er,mr,Jr,Ie,Ot,St;mn<cn;){if(Er=hn[mn++],mr=J(Er),mr==="ArrayBuffer"?ue(Ln,Er):st(Gn,Er))throw new bt("Duplicate transferable",wr);if(mr==="ArrayBuffer"){vt(Ln,Er);continue}if(nt)Ie=Ve(Er,{transfer:[Er]});else switch(mr){case"ImageBitmap":Jr=C.OffscreenCanvas,te(Jr)||Bt(mr,Dr);try{Ot=new Jr(Er.width,Er.height),St=Ot.getContext("bitmaprenderer"),St.transferFromImageBitmap(Er),Ie=Ot.transferToImageBitmap()}catch(at){}break;case"AudioData":case"VideoFrame":(!Y(Er.clone)||!Y(Er.close))&&Bt(mr,Dr);try{Ie=Er.clone(),Er.close()}catch(at){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":Bt(mr,Dr)}if(Ie===void 0)throw new bt("This object cannot be transferred: "+mr,wr);mt(Gn,Er,Ie)}return Ln},Sr=function(In){Ue(In,function(Gn){nt?Me(Gn,{transfer:[Gn]}):Y(Gn.transfer)?Gn.transfer():qe?qe(Gn):Bt("ArrayBuffer",Dr)})};M({global:!0,enumerable:!0,sham:!nt,forced:gt},{structuredClone:function(Gn){var hn=ke(arguments.length,1)>1&&!X(arguments[1])?he(arguments[1]):void 0,mn=hn?hn.transfer:void 0,cn,Ln;mn!==void 0&&(cn=new Tt,Ln=ar(mn,cn));var Er=gn(Gn,cn);return Ln&&Sr(Ln),Er}})},84289:function(H,Q,i){"use strict";var E=i(66511),M=i(43930),C=i(66516),n=i(93107),j=URLSearchParams,$=j.prototype,U=M($.append),Y=M($.delete),te=M($.forEach),X=M([].push),B=new j("a=1&a=2&b=3");B.delete("a",1),B.delete("b",void 0),B+""!="a=2"&&E($,"delete",function(K){var de=arguments.length,he=de<2?void 0:arguments[1];if(de&&he===void 0)return Y(this,K);var J=[];te(this,function(be,Ue){X(J,{key:Ue,value:be})}),n(de,1);for(var ae=C(K),se=C(he),Ee=0,Le=0,ke=!1,ye=J.length,Se;Ee<ye;)Se=J[Ee++],ke||Se.key===ae?(ke=!0,Y(this,Se.key)):Le++;for(;Le<ye;)Se=J[Le++],Se.key===ae&&Se.value===se||U(this,Se.key,Se.value)},{enumerable:!0,unsafe:!0})},67226:function(H,Q,i){"use strict";var E=i(66511),M=i(43930),C=i(66516),n=i(93107),j=URLSearchParams,$=j.prototype,U=M($.getAll),Y=M($.has),te=new j("a=1");(te.has("a",2)||!te.has("a",void 0))&&E($,"has",function(B){var K=arguments.length,de=K<2?void 0:arguments[1];if(K&&de===void 0)return Y(this,B);var he=U(this,B);n(K,1);for(var J=C(de),ae=0;ae<he.length;)if(he[ae++]===J)return!0;return!1},{enumerable:!0,unsafe:!0})},22509:function(H,Q,i){"use strict";var E=i(27233),M=i(43930),C=i(42917),n=URLSearchParams.prototype,j=M(n.forEach);E&&!("size"in n)&&C(n,"size",{get:function(){var U=0;return j(this,function(){U++}),U},configurable:!0,enumerable:!0})},52687:function(H,Q,i){"use strict";var E=i(26589),M=i(70521),C=i(56261),n=i(93107),j=i(66516),$=i(77507),U=M("URL"),Y=$&&C(function(){U.canParse()});E({target:"URL",stat:!0,forced:!Y},{canParse:function(X){var B=n(arguments.length,1),K=j(X),de=B<2||arguments[1]===void 0?void 0:j(arguments[1]);try{return!!new U(K,de)}catch(he){return!1}}})},82385:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){if(Array.isArray(M))return M}},25940:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});var E=i(40394);function M(C,n,j){return n=(0,E.Z)(n),n in C?Object.defineProperty(C,n,{value:j,enumerable:!0,configurable:!0,writable:!0}):C[n]=j,C}},56920:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(){return E=Object.assign?Object.assign.bind():function(M){for(var C=1;C<arguments.length;C++){var n=arguments[C];for(var j in n)Object.prototype.hasOwnProperty.call(n,j)&&(M[j]=n[j])}return M},E.apply(this,arguments)}},67213:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},93914:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(25940);function M(n,j){var $=Object.keys(n);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(n);j&&(U=U.filter(function(Y){return Object.getOwnPropertyDescriptor(n,Y).enumerable})),$.push.apply($,U)}return $}function C(n){for(var j=1;j<arguments.length;j++){var $=arguments[j]!=null?arguments[j]:{};j%2?M(Object($),!0).forEach(function(U){(0,E.Z)(n,U,$[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors($)):M(Object($)).forEach(function(U){Object.defineProperty(n,U,Object.getOwnPropertyDescriptor($,U))})}return n}},48385:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});function E(C,n){if(C==null)return{};var j={},$=Object.keys(C),U,Y;for(Y=0;Y<$.length;Y++)U=$[Y],!(n.indexOf(U)>=0)&&(j[U]=C[U]);return j}function M(C,n){if(C==null)return{};var j=E(C,n),$,U;if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(C);for(U=0;U<Y.length;U++)$=Y[U],!(n.indexOf($)>=0)&&Object.prototype.propertyIsEnumerable.call(C,$)&&(j[$]=C[$])}return j}},90885:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return j}});var E=i(82385);function M($,U){var Y=$==null?null:typeof Symbol!="undefined"&&$[Symbol.iterator]||$["@@iterator"];if(Y!=null){var te,X,B,K,de=[],he=!0,J=!1;try{if(B=(Y=Y.call($)).next,U===0){if(Object(Y)!==Y)return;he=!1}else for(;!(he=(te=B.call(Y)).done)&&(de.push(te.value),de.length!==U);he=!0);}catch(ae){J=!0,X=ae}finally{try{if(!he&&Y.return!=null&&(K=Y.return(),Object(K)!==K))return}finally{if(J)throw X}}return de}}var C=i(76059),n=i(67213);function j($,U){return(0,E.Z)($)||M($,U)||(0,C.Z)($,U)||(0,n.Z)()}},40394:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(91744);function M(n,j){if((0,E.Z)(n)!="object"||!n)return n;var $=n[Symbol.toPrimitive];if($!==void 0){var U=$.call(n,j||"default");if((0,E.Z)(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(n)}function C(n){var j=M(n,"string");return(0,E.Z)(j)=="symbol"?j:String(j)}},91744:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},E(M)}},76059:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});function E(C,n){(n==null||n>C.length)&&(n=C.length);for(var j=0,$=new Array(n);j<n;j++)$[j]=C[j];return $}function M(C,n){if(C){if(typeof C=="string")return E(C,n);var j=Object.prototype.toString.call(C).slice(8,-1);if(j==="Object"&&C.constructor&&(j=C.constructor.name),j==="Map"||j==="Set")return Array.from(C);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return E(C,n)}}},68776:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){(C==null||C>M.length)&&(C=M.length);for(var n=0,j=Array(C);n<C;n++)j[n]=M[n];return j}},76909:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){if(Array.isArray(M))return M}},63662:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}},59295:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){if(!(M instanceof C))throw new TypeError("Cannot call a class as a function")}},45985:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(12170);function M(n,j){for(var $=0;$<j.length;$++){var U=j[$];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(n,(0,E.Z)(U.key),U)}}function C(n,j,$){return j&&M(n.prototype,j),$&&M(n,$),Object.defineProperty(n,"prototype",{writable:!1}),n}},56216:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return n}});var E=i(51123),M=i(57649),C=i(78512);function n(j){var $=(0,M.Z)();return function(){var U,Y=(0,E.Z)(j);if($){var te=(0,E.Z)(this).constructor;U=Reflect.construct(Y,arguments,te)}else U=Y.apply(this,arguments);return(0,C.Z)(this,U)}}},38926:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});var E=i(12170);function M(C,n,j){return(n=(0,E.Z)(n))in C?Object.defineProperty(C,n,{value:j,enumerable:!0,configurable:!0,writable:!0}):C[n]=j,C}},23022:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(){return E=Object.assign?Object.assign.bind():function(M){for(var C=1;C<arguments.length;C++){var n=arguments[C];for(var j in n)({}).hasOwnProperty.call(n,j)&&(M[j]=n[j])}return M},E.apply(null,arguments)}},51123:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},E(M)}},76525:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});var E=i(84255);function M(C,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(n&&n.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),n&&(0,E.Z)(C,n)}},57649:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(C){}return(E=function(){return!!M})()}},56670:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){if(typeof Symbol!="undefined"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}},56339:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},54153:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(38926);function M(n,j){var $=Object.keys(n);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(n);j&&(U=U.filter(function(Y){return Object.getOwnPropertyDescriptor(n,Y).enumerable})),$.push.apply($,U)}return $}function C(n){for(var j=1;j<arguments.length;j++){var $=arguments[j]!=null?arguments[j]:{};j%2?M(Object($),!0).forEach(function(U){(0,E.Z)(n,U,$[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors($)):M(Object($)).forEach(function(U){Object.defineProperty(n,U,Object.getOwnPropertyDescriptor($,U))})}return n}},58190:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});function E(C,n){if(C==null)return{};var j={};for(var $ in C)if({}.hasOwnProperty.call(C,$)){if(n.indexOf($)!==-1)continue;j[$]=C[$]}return j}function M(C,n){if(C==null)return{};var j,$,U=E(C,n);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(C);for($=0;$<Y.length;$++)j=Y[$],n.indexOf(j)===-1&&{}.propertyIsEnumerable.call(C,j)&&(U[j]=C[j])}return U}},78512:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(5147),M=i(63662);function C(n,j){if(j&&((0,E.Z)(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,M.Z)(n)}},84255:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M,C){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,j){return n.__proto__=j,n},E(M,C)}},89692:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return j}});var E=i(76909);function M($,U){var Y=$==null?null:typeof Symbol!="undefined"&&$[Symbol.iterator]||$["@@iterator"];if(Y!=null){var te,X,B,K,de=[],he=!0,J=!1;try{if(B=(Y=Y.call($)).next,U===0){if(Object(Y)!==Y)return;he=!1}else for(;!(he=(te=B.call(Y)).done)&&(de.push(te.value),de.length!==U);he=!0);}catch(ae){J=!0,X=ae}finally{try{if(!he&&Y.return!=null&&(K=Y.return(),Object(K)!==K))return}finally{if(J)throw X}}return de}}var C=i(62851),n=i(56339);function j($,U){return(0,E.Z)($)||M($,U)||(0,C.Z)($,U)||(0,n.Z)()}},70615:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return j}});var E=i(76909),M=i(56670),C=i(62851),n=i(56339);function j($){return(0,E.Z)($)||(0,M.Z)($)||(0,C.Z)($)||(0,n.Z)()}},46865:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return $}});var E=i(68776);function M(U){if(Array.isArray(U))return(0,E.Z)(U)}var C=i(56670),n=i(62851);function j(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(U){return M(U)||(0,C.Z)(U)||(0,n.Z)(U)||j()}},12170:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return C}});var E=i(5147);function M(n,j){if((0,E.Z)(n)!="object"||!n)return n;var $=n[Symbol.toPrimitive];if($!==void 0){var U=$.call(n,j||"default");if((0,E.Z)(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(n)}function C(n){var j=M(n,"string");return(0,E.Z)(j)=="symbol"?j:j+""}},5147:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return E}});function E(M){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},E(M)}},62851:function(H,Q,i){"use strict";i.d(Q,{Z:function(){return M}});var E=i(68776);function M(C,n){if(C){if(typeof C=="string")return(0,E.Z)(C,n);var j={}.toString.call(C).slice(8,-1);return j==="Object"&&C.constructor&&(j=C.constructor.name),j==="Map"||j==="Set"?Array.from(C):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?(0,E.Z)(C,n):void 0}}},15767:function(H,Q,i){"use strict";i.d(Q,{ZT:function(){return M},_T:function(){return n},ev:function(){return ke},pi:function(){return C}});var E=function(mt,Ht){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(vt,ue){vt.__proto__=ue}||function(vt,ue){for(var lt in ue)Object.prototype.hasOwnProperty.call(ue,lt)&&(vt[lt]=ue[lt])},E(mt,Ht)};function M(mt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Class extends value "+String(Ht)+" is not a constructor or null");E(mt,Ht);function vt(){this.constructor=mt}mt.prototype=Ht===null?Object.create(Ht):(vt.prototype=Ht.prototype,new vt)}var C=function(){return C=Object.assign||function(Ht){for(var vt,ue=1,lt=arguments.length;ue<lt;ue++){vt=arguments[ue];for(var le in vt)Object.prototype.hasOwnProperty.call(vt,le)&&(Ht[le]=vt[le])}return Ht},C.apply(this,arguments)};function n(mt,Ht){var vt={};for(var ue in mt)Object.prototype.hasOwnProperty.call(mt,ue)&&Ht.indexOf(ue)<0&&(vt[ue]=mt[ue]);if(mt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,ue=Object.getOwnPropertySymbols(mt);lt<ue.length;lt++)Ht.indexOf(ue[lt])<0&&Object.prototype.propertyIsEnumerable.call(mt,ue[lt])&&(vt[ue[lt]]=mt[ue[lt]]);return vt}function j(mt,Ht,vt,ue){var lt=arguments.length,le=lt<3?Ht:ue===null?ue=Object.getOwnPropertyDescriptor(Ht,vt):ue,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")le=Reflect.decorate(mt,Ht,vt,ue);else for(var we=mt.length-1;we>=0;we--)(Je=mt[we])&&(le=(lt<3?Je(le):lt>3?Je(Ht,vt,le):Je(Ht,vt))||le);return lt>3&&le&&Object.defineProperty(Ht,vt,le),le}function $(mt,Ht){return function(vt,ue){Ht(vt,ue,mt)}}function U(mt,Ht,vt,ue,lt,le){function Je(gt){if(gt!==void 0&&typeof gt!="function")throw new TypeError("Function expected");return gt}for(var we=ue.kind,Pn=we==="getter"?"get":we==="setter"?"set":"value",Mt=!Ht&&mt?ue.static?mt:mt.prototype:null,or=Ht||(Mt?Object.getOwnPropertyDescriptor(Mt,ue.name):{}),wr,Dr=!1,lr=vt.length-1;lr>=0;lr--){var Pe={};for(var ut in ue)Pe[ut]=ut==="access"?{}:ue[ut];for(var ut in ue.access)Pe.access[ut]=ue.access[ut];Pe.addInitializer=function(gt){if(Dr)throw new TypeError("Cannot add initializers after decoration has completed");le.push(Je(gt||null))};var Ve=(0,vt[lr])(we==="accessor"?{get:or.get,set:or.set}:or[Pn],Pe);if(we==="accessor"){if(Ve===void 0)continue;if(Ve===null||typeof Ve!="object")throw new TypeError("Object expected");(wr=Je(Ve.get))&&(or.get=wr),(wr=Je(Ve.set))&&(or.set=wr),(wr=Je(Ve.init))&&lt.unshift(wr)}else(wr=Je(Ve))&&(we==="field"?lt.unshift(wr):or[Pn]=wr)}Mt&&Object.defineProperty(Mt,ue.name,or),Dr=!0}function Y(mt,Ht,vt){for(var ue=arguments.length>2,lt=0;lt<Ht.length;lt++)vt=ue?Ht[lt].call(mt,vt):Ht[lt].call(mt);return ue?vt:void 0}function te(mt){return typeof mt=="symbol"?mt:"".concat(mt)}function X(mt,Ht,vt){return typeof Ht=="symbol"&&(Ht=Ht.description?"[".concat(Ht.description,"]"):""),Object.defineProperty(mt,"name",{configurable:!0,value:vt?"".concat(vt," ",Ht):Ht})}function B(mt,Ht){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(mt,Ht)}function K(mt,Ht,vt,ue){function lt(le){return le instanceof vt?le:new vt(function(Je){Je(le)})}return new(vt||(vt=Promise))(function(le,Je){function we(or){try{Mt(ue.next(or))}catch(wr){Je(wr)}}function Pn(or){try{Mt(ue.throw(or))}catch(wr){Je(wr)}}function Mt(or){or.done?le(or.value):lt(or.value).then(we,Pn)}Mt((ue=ue.apply(mt,Ht||[])).next())})}function de(mt,Ht){var vt={label:0,sent:function(){if(le[0]&1)throw le[1];return le[1]},trys:[],ops:[]},ue,lt,le,Je=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Je.next=we(0),Je.throw=we(1),Je.return=we(2),typeof Symbol=="function"&&(Je[Symbol.iterator]=function(){return this}),Je;function we(Mt){return function(or){return Pn([Mt,or])}}function Pn(Mt){if(ue)throw new TypeError("Generator is already executing.");for(;Je&&(Je=0,Mt[0]&&(vt=0)),vt;)try{if(ue=1,lt&&(le=Mt[0]&2?lt.return:Mt[0]?lt.throw||((le=lt.return)&&le.call(lt),0):lt.next)&&!(le=le.call(lt,Mt[1])).done)return le;switch(lt=0,le&&(Mt=[Mt[0]&2,le.value]),Mt[0]){case 0:case 1:le=Mt;break;case 4:return vt.label++,{value:Mt[1],done:!1};case 5:vt.label++,lt=Mt[1],Mt=[0];continue;case 7:Mt=vt.ops.pop(),vt.trys.pop();continue;default:if(le=vt.trys,!(le=le.length>0&&le[le.length-1])&&(Mt[0]===6||Mt[0]===2)){vt=0;continue}if(Mt[0]===3&&(!le||Mt[1]>le[0]&&Mt[1]<le[3])){vt.label=Mt[1];break}if(Mt[0]===6&&vt.label<le[1]){vt.label=le[1],le=Mt;break}if(le&&vt.label<le[2]){vt.label=le[2],vt.ops.push(Mt);break}le[2]&&vt.ops.pop(),vt.trys.pop();continue}Mt=Ht.call(mt,vt)}catch(or){Mt=[6,or],lt=0}finally{ue=le=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}}var he=Object.create?function(mt,Ht,vt,ue){ue===void 0&&(ue=vt);var lt=Object.getOwnPropertyDescriptor(Ht,vt);(!lt||("get"in lt?!Ht.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return Ht[vt]}}),Object.defineProperty(mt,ue,lt)}:function(mt,Ht,vt,ue){ue===void 0&&(ue=vt),mt[ue]=Ht[vt]};function J(mt,Ht){for(var vt in mt)vt!=="default"&&!Object.prototype.hasOwnProperty.call(Ht,vt)&&he(Ht,mt,vt)}function ae(mt){var Ht=typeof Symbol=="function"&&Symbol.iterator,vt=Ht&&mt[Ht],ue=0;if(vt)return vt.call(mt);if(mt&&typeof mt.length=="number")return{next:function(){return mt&&ue>=mt.length&&(mt=void 0),{value:mt&&mt[ue++],done:!mt}}};throw new TypeError(Ht?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(mt,Ht){var vt=typeof Symbol=="function"&&mt[Symbol.iterator];if(!vt)return mt;var ue=vt.call(mt),lt,le=[],Je;try{for(;(Ht===void 0||Ht-- >0)&&!(lt=ue.next()).done;)le.push(lt.value)}catch(we){Je={error:we}}finally{try{lt&&!lt.done&&(vt=ue.return)&&vt.call(ue)}finally{if(Je)throw Je.error}}return le}function Ee(){for(var mt=[],Ht=0;Ht<arguments.length;Ht++)mt=mt.concat(se(arguments[Ht]));return mt}function Le(){for(var mt=0,Ht=0,vt=arguments.length;Ht<vt;Ht++)mt+=arguments[Ht].length;for(var ue=Array(mt),lt=0,Ht=0;Ht<vt;Ht++)for(var le=arguments[Ht],Je=0,we=le.length;Je<we;Je++,lt++)ue[lt]=le[Je];return ue}function ke(mt,Ht,vt){if(vt||arguments.length===2)for(var ue=0,lt=Ht.length,le;ue<lt;ue++)(le||!(ue in Ht))&&(le||(le=Array.prototype.slice.call(Ht,0,ue)),le[ue]=Ht[ue]);return mt.concat(le||Array.prototype.slice.call(Ht))}function ye(mt){return this instanceof ye?(this.v=mt,this):new ye(mt)}function Se(mt,Ht,vt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue=vt.apply(mt,Ht||[]),lt,le=[];return lt=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),we("next"),we("throw"),we("return",Je),lt[Symbol.asyncIterator]=function(){return this},lt;function Je(lr){return function(Pe){return Promise.resolve(Pe).then(lr,wr)}}function we(lr,Pe){ue[lr]&&(lt[lr]=function(ut){return new Promise(function(Ve,gt){le.push([lr,ut,Ve,gt])>1||Pn(lr,ut)})},Pe&&(lt[lr]=Pe(lt[lr])))}function Pn(lr,Pe){try{Mt(ue[lr](Pe))}catch(ut){Dr(le[0][3],ut)}}function Mt(lr){lr.value instanceof ye?Promise.resolve(lr.value.v).then(or,wr):Dr(le[0][2],lr)}function or(lr){Pn("next",lr)}function wr(lr){Pn("throw",lr)}function Dr(lr,Pe){lr(Pe),le.shift(),le.length&&Pn(le[0][0],le[0][1])}}function be(mt){var Ht,vt;return Ht={},ue("next"),ue("throw",function(lt){throw lt}),ue("return"),Ht[Symbol.iterator]=function(){return this},Ht;function ue(lt,le){Ht[lt]=mt[lt]?function(Je){return(vt=!vt)?{value:ye(mt[lt](Je)),done:!1}:le?le(Je):Je}:le}}function Ue(mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ht=mt[Symbol.asyncIterator],vt;return Ht?Ht.call(mt):(mt=typeof ae=="function"?ae(mt):mt[Symbol.iterator](),vt={},ue("next"),ue("throw"),ue("return"),vt[Symbol.asyncIterator]=function(){return this},vt);function ue(le){vt[le]=mt[le]&&function(Je){return new Promise(function(we,Pn){Je=mt[le](Je),lt(we,Pn,Je.done,Je.value)})}}function lt(le,Je,we,Pn){Promise.resolve(Pn).then(function(Mt){le({value:Mt,done:we})},Je)}}function qe(mt,Ht){return Object.defineProperty?Object.defineProperty(mt,"raw",{value:Ht}):mt.raw=Ht,mt}var je=Object.create?function(mt,Ht){Object.defineProperty(mt,"default",{enumerable:!0,value:Ht})}:function(mt,Ht){mt.default=Ht},nt=function(mt){return nt=Object.getOwnPropertyNames||function(Ht){var vt=[];for(var ue in Ht)Object.prototype.hasOwnProperty.call(Ht,ue)&&(vt[vt.length]=ue);return vt},nt(mt)};function Ct(mt){if(mt&&mt.__esModule)return mt;var Ht={};if(mt!=null)for(var vt=nt(mt),ue=0;ue<vt.length;ue++)vt[ue]!=="default"&&he(Ht,mt,vt[ue]);return je(Ht,mt),Ht}function ft(mt){return mt&&mt.__esModule?mt:{default:mt}}function Et(mt,Ht,vt,ue){if(vt==="a"&&!ue)throw new TypeError("Private accessor was defined without a getter");if(typeof Ht=="function"?mt!==Ht||!ue:!Ht.has(mt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return vt==="m"?ue:vt==="a"?ue.call(mt):ue?ue.value:Ht.get(mt)}function yt(mt,Ht,vt,ue,lt){if(ue==="m")throw new TypeError("Private method is not writable");if(ue==="a"&&!lt)throw new TypeError("Private accessor was defined without a setter");if(typeof Ht=="function"?mt!==Ht||!lt:!Ht.has(mt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ue==="a"?lt.call(mt,vt):lt?lt.value=vt:Ht.set(mt,vt),vt}function _t(mt,Ht){if(Ht===null||typeof Ht!="object"&&typeof Ht!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof mt=="function"?Ht===mt:mt.has(Ht)}function He(mt,Ht,vt){if(Ht!=null){if(typeof Ht!="object"&&typeof Ht!="function")throw new TypeError("Object expected.");var ue,lt;if(vt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");ue=Ht[Symbol.asyncDispose]}if(ue===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");ue=Ht[Symbol.dispose],vt&&(lt=ue)}if(typeof ue!="function")throw new TypeError("Object not disposable.");lt&&(ue=function(){try{lt.call(this)}catch(le){return Promise.reject(le)}}),mt.stack.push({value:Ht,dispose:ue,async:vt})}else vt&&mt.stack.push({async:!0});return Ht}var bt=typeof SuppressedError=="function"?SuppressedError:function(mt,Ht,vt){var ue=new Error(vt);return ue.name="SuppressedError",ue.error=mt,ue.suppressed=Ht,ue};function Tt(mt){function Ht(le){mt.error=mt.hasError?new bt(le,mt.error,"An error was suppressed during disposal."):le,mt.hasError=!0}var vt,ue=0;function lt(){for(;vt=mt.stack.pop();)try{if(!vt.async&&ue===1)return ue=0,mt.stack.push(vt),Promise.resolve().then(lt);if(vt.dispose){var le=vt.dispose.call(vt.value);if(vt.async)return ue|=2,Promise.resolve(le).then(lt,function(Je){return Ht(Je),lt()})}else ue|=1}catch(Je){Ht(Je)}if(ue===1)return mt.hasError?Promise.reject(mt.error):Promise.resolve();if(mt.hasError)throw mt.error}return lt()}function st(mt,Ht){return typeof mt=="string"&&/^\.\.?\//.test(mt)?mt.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(vt,ue,lt,le,Je){return ue?Ht?".jsx":".js":lt&&(!le||!Je)?vt:lt+le+"."+Je.toLowerCase()+"js"}):mt}var Qe={__extends:M,__assign:C,__rest:n,__decorate:j,__param:$,__esDecorate:U,__runInitializers:Y,__propKey:te,__setFunctionName:X,__metadata:B,__awaiter:K,__generator:de,__createBinding:he,__exportStar:J,__values:ae,__read:se,__spread:Ee,__spreadArrays:Le,__spreadArray:ke,__await:ye,__asyncGenerator:Se,__asyncDelegator:be,__asyncValues:Ue,__makeTemplateObject:qe,__importStar:Ct,__importDefault:ft,__classPrivateFieldGet:Et,__classPrivateFieldSet:yt,__classPrivateFieldIn:_t,__addDisposableResource:He,__disposeResources:Tt,__rewriteRelativeImportExtension:st}}},__webpack_module_cache__={};function __webpack_require__(H){var Q=__webpack_module_cache__[H];if(Q!==void 0)return Q.exports;var i=__webpack_module_cache__[H]={exports:{}};return __webpack_modules__[H].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.n=function(H){var Q=H&&H.__esModule?function(){return H.default}:function(){return H};return __webpack_require__.d(Q,{a:Q}),Q}}(),function(){var H=Object.getPrototypeOf?function(i){return Object.getPrototypeOf(i)}:function(i){return i.__proto__},Q;__webpack_require__.t=function(i,E){if(E&1&&(i=this(i)),E&8||typeof i=="object"&&i&&(E&4&&i.__esModule||E&16&&typeof i.then=="function"))return i;var M=Object.create(null);__webpack_require__.r(M);var C={};Q=Q||[null,H({}),H([]),H(H)];for(var n=E&2&&i;typeof n=="object"&&!~Q.indexOf(n);n=H(n))Object.getOwnPropertyNames(n).forEach(function(j){C[j]=function(){return i[j]}});return C.default=function(){return i},__webpack_require__.d(M,C),M}}(),function(){__webpack_require__.d=function(H,Q){for(var i in Q)__webpack_require__.o(Q,i)&&!__webpack_require__.o(H,i)&&Object.defineProperty(H,i,{enumerable:!0,get:Q[i]})}}(),function(){__webpack_require__.f={},__webpack_require__.e=function(H){return Promise.all(Object.keys(__webpack_require__.f).reduce(function(Q,i){return __webpack_require__.f[i](H,Q),Q},[]))}}(),function(){__webpack_require__.u=function(H){return""+({9:"nm__dumi__dist__client__pages__Demo__index",44:"docs__components__fillLayer.md",61:"docs__components__spatialCalculation.md",65:"docs__components__mousePositionControl.md",92:"docs__preview__control.md",157:"docs__components__rasterLayer.md",159:"docs__components__backgroundLayer.md",182:"docs__components__navigationControl.md",186:"docs__base__start.md",194:"docs__components__spatialAnalysis.md",236:"docs__components__marker.md",380:"docs__components__circleLayer.md",393:"docs__components__lineLayer.md",433:"demos",473:"docs__preview__layer.md",519:"nm__dumi__theme-default__layouts__DocLayout__index",543:"nm__dumi__dist__client__pages__404",544:"docs__base__introduction.md",611:"docs__components__fullscreenControl.md",615:"docs__components__drawControl.md",752:"docs__components__popup.md",775:"docs__components__geometryCalculation.md",793:"docs__components__customControl.md",802:"docs__components__scaleControl.md",855:"docs__preview__overlap.md",894:"docs__preview__tool.md",904:"meta__docs",923:"dumi__tmp-production__dumi__theme__ContextWrapper",935:"docs__index.md",951:"docs__components__map.md",957:"docs__components__heatmap.md",969:"docs__preview__map.md"}[H]||H)+"."+{9:"c67a8ef3",27:"e2db124d",44:"1ad70205",61:"38a713a9",65:"fcc4516f",92:"475cbbcb",157:"34c0dc47",159:"51602313",182:"03ffd749",186:"6533f953",194:"6a1e909c",236:"2c6aa6d2",256:"84eb80b0",380:"774c6eab",393:"ba13eee4",433:"33155823",473:"e1eede23",519:"a7e657a4",543:"5be7ae66",544:"1a570cd2",611:"11b0825e",615:"9132aa0d",752:"9cc66b00",775:"a54ca37e",793:"f76fd693",802:"4ed59f05",855:"1d4b61a4",860:"c7c6c42d",894:"94928e2d",904:"58b315f4",923:"eb235044",928:"00dd2d89",935:"38ecde31",951:"909132a5",957:"7e4aed6d",969:"055a94a5"}[H]+".async.js"}}(),function(){__webpack_require__.miniCssF=function(H){return""+({9:"nm__dumi__dist__client__pages__Demo__index",543:"nm__dumi__dist__client__pages__404"}[H]||H)+"."+{9:"578aa5c0",256:"e8c51481",543:"8b85f2d9"}[H]+".chunk.css"}}(),function(){__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(H){if(typeof window=="object")return window}}()}(),function(){__webpack_require__.o=function(H,Q){return Object.prototype.hasOwnProperty.call(H,Q)}}(),function(){var H={},Q="react-mapboxgl-zt:";__webpack_require__.l=function(i,E,M,C){if(H[i]){H[i].push(E);return}var n,j;if(M!==void 0)for(var $=document.getElementsByTagName("script"),U=0;U<$.length;U++){var Y=$[U];if(Y.getAttribute("src")==i||Y.getAttribute("data-webpack")==Q+M){n=Y;break}}n||(j=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack",Q+M),n.src=i),H[i]=[E];var te=function(B,K){n.onerror=n.onload=null,clearTimeout(X);var de=H[i];if(delete H[i],n.parentNode&&n.parentNode.removeChild(n),de&&de.forEach(function(he){return he(K)}),B)return B(K)},X=setTimeout(te.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=te.bind(null,n.onerror),n.onload=te.bind(null,n.onload),j&&document.head.appendChild(n)}}(),function(){__webpack_require__.r=function(H){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})}}(),function(){__webpack_require__.p="/react-mapboxgl-zt/"}(),function(){if(typeof document!="undefined"){var H=function(M,C,n,j,$){var U=document.createElement("link");U.rel="stylesheet",U.type="text/css";var Y=function(te){if(U.onerror=U.onload=null,te.type==="load")j();else{var X=te&&(te.type==="load"?"missing":te.type),B=te&&te.target&&te.target.href||C,K=new Error("Loading CSS chunk "+M+` failed.
(`+B+")");K.code="CSS_CHUNK_LOAD_FAILED",K.type=X,K.request=B,U.parentNode.removeChild(U),$(K)}};return U.onerror=U.onload=Y,U.href=C,n?n.parentNode.insertBefore(U,n.nextSibling):document.head.appendChild(U),U},Q=function(M,C){for(var n=document.getElementsByTagName("link"),j=0;j<n.length;j++){var $=n[j],U=$.getAttribute("data-href")||$.getAttribute("href");if($.rel==="stylesheet"&&(U===M||U===C))return $}for(var Y=document.getElementsByTagName("style"),j=0;j<Y.length;j++){var $=Y[j],U=$.getAttribute("data-href");if(U===M||U===C)return $}},i=function(M){return new Promise(function(C,n){var j=__webpack_require__.miniCssF(M),$=__webpack_require__.p+j;if(Q(j,$))return C();H(M,$,null,C,n)})},E={620:0};__webpack_require__.f.miniCss=function(M,C){var n={9:1,256:1,543:1};E[M]?C.push(E[M]):E[M]!==0&&n[M]&&C.push(E[M]=i(M).then(function(){E[M]=0},function(j){throw delete E[M],j}))}}}(),function(){var H={620:0};__webpack_require__.f.j=function(E,M){var C=__webpack_require__.o(H,E)?H[E]:void 0;if(C!==0)if(C)M.push(C[2]);else{var n=new Promise(function(Y,te){C=H[E]=[Y,te]});M.push(C[2]=n);var j=__webpack_require__.p+__webpack_require__.u(E),$=new Error,U=function(Y){if(__webpack_require__.o(H,E)&&(C=H[E],C!==0&&(H[E]=void 0),C)){var te=Y&&(Y.type==="load"?"missing":Y.type),X=Y&&Y.target&&Y.target.src;$.message="Loading chunk "+E+` failed.
(`+te+": "+X+")",$.name="ChunkLoadError",$.type=te,$.request=X,C[1]($)}};__webpack_require__.l(j,U,"chunk-"+E,E)}};var Q=function(E,M){var C=M[0],n=M[1],j=M[2],$,U,Y=0;if(C.some(function(X){return H[X]!==0})){for($ in n)__webpack_require__.o(n,$)&&(__webpack_require__.m[$]=n[$]);if(j)var te=j(__webpack_require__)}for(E&&E(M);Y<C.length;Y++)U=C[Y],__webpack_require__.o(H,U)&&H[U]&&H[U][0](),H[U]=0},i=self.webpackChunkreact_mapboxgl_zt=self.webpackChunkreact_mapboxgl_zt||[];i.forEach(Q.bind(null,0)),i.push=Q.bind(null,i.push.bind(i))}();var __webpack_exports__={};(function(){"use strict";var H=__webpack_require__(90228),Q=__webpack_require__.n(H),i=__webpack_require__(26068),E=__webpack_require__.n(i),M=__webpack_require__(87999),C=__webpack_require__.n(M),n=__webpack_require__(72984),j=__webpack_require__(96921),$=__webpack_require__(16753),U=__webpack_require__(24298),Y=__webpack_require__(83821),te=__webpack_require__(51036),X=__webpack_require__(22106),B=__webpack_require__(60123),K=__webpack_require__(37207),de=__webpack_require__(84570),he=__webpack_require__(68266),J=__webpack_require__(82597),ae=__webpack_require__(12856),se=__webpack_require__(76171),Ee=__webpack_require__(58599),Le=__webpack_require__(31638),ke=__webpack_require__(88388),ye=__webpack_require__(21640),Se=__webpack_require__(65531),be=__webpack_require__(27074),Ue=__webpack_require__(15193),qe=__webpack_require__(99507),je=__webpack_require__(34999),nt=__webpack_require__(58209),Ct=__webpack_require__(53006),ft=__webpack_require__(21838),Et=__webpack_require__(91531),yt=__webpack_require__(28975),_t=__webpack_require__(78453),He=__webpack_require__(66895),bt=__webpack_require__(32530),Tt=__webpack_require__(30025),st=__webpack_require__(89255),Qe=__webpack_require__(58005),mt=__webpack_require__(52873),Ht=__webpack_require__(78569),vt=__webpack_require__(22938),ue=__webpack_require__(66578),lt=__webpack_require__(83),le=__webpack_require__(81357),Je=__webpack_require__(69715),we=__webpack_require__(64821),Pn=__webpack_require__(37664),Mt=__webpack_require__(15766),or=__webpack_require__(73040),wr=__webpack_require__(4222),Dr=__webpack_require__(13505),lr=__webpack_require__(59134),Pe=__webpack_require__(16272),ut=__webpack_require__(54221),Ve=__webpack_require__(88705),gt=__webpack_require__(72639),Gt=__webpack_require__(89581),Me=__webpack_require__(90494),At=__webpack_require__(57130),Bt=__webpack_require__(99686),Sn=__webpack_require__(29224),Lt=__webpack_require__(77080),Bn=__webpack_require__(40132),en=__webpack_require__(82383),gn=__webpack_require__(24952),ar=__webpack_require__(73824),Sr=__webpack_require__(35619),In=__webpack_require__(70598),Gn=__webpack_require__(53207),hn=__webpack_require__(62647),mn=__webpack_require__(44121),cn=__webpack_require__(15515),Ln=__webpack_require__(14979),Er=__webpack_require__(26357),mr=__webpack_require__(68291),Jr=__webpack_require__(66810),Ie=__webpack_require__(7170),Ot=__webpack_require__(40319),St=__webpack_require__(84670),at=__webpack_require__(64699),Xe=__webpack_require__(14534),Nt=__webpack_require__(73834),Nn=__webpack_require__(87658),Jn=__webpack_require__(94049),rr=__webpack_require__(56321),Br=__webpack_require__(99801),Hr=__webpack_require__(53261),zr=__webpack_require__(24208),Tr=__webpack_require__(82119),fn=__webpack_require__(85836),Ne=__webpack_require__(4482),Ge=__webpack_require__(55330),ot=__webpack_require__(18594),Dt=__webpack_require__(82063),jt=__webpack_require__(69776),sn=__webpack_require__(44140),xn=__webpack_require__(99906),rn=__webpack_require__(89711),Fn=__webpack_require__(11876),Un=__webpack_require__(74335),jn=__webpack_require__(70561),_n=__webpack_require__(85936),Xn=__webpack_require__(46699),er=__webpack_require__(26961),Yr=__webpack_require__(77877),qr=__webpack_require__(34499),Gr=__webpack_require__(82401),ci=__webpack_require__(52933),Ci=__webpack_require__(63018),Ki=__webpack_require__(39888),Bi=__webpack_require__(6415),Di=__webpack_require__(48137),yo=__webpack_require__(49233),po=__webpack_require__(61656),Vo=__webpack_require__(4924),Xo=__webpack_require__(56420),$o=__webpack_require__(15886),Aa=__webpack_require__(73363),qa=__webpack_require__(34033),Oo=__webpack_require__(10397),Do=__webpack_require__(58527),oa=__webpack_require__(43446),Fa=__webpack_require__(10986),xs=__webpack_require__(14316),tl=__webpack_require__(53408),Na=__webpack_require__(55693),ro=__webpack_require__(91067),xa=__webpack_require__(6927),Ba=__webpack_require__(21459),ma=__webpack_require__(51986),ja=__webpack_require__(68828),Sa=__webpack_require__(9011),us=__webpack_require__(94887),ua=__webpack_require__(67007),ao=__webpack_require__(34482),Ma=__webpack_require__(1945),ko=__webpack_require__(51976),No=__webpack_require__(766),Uo=__webpack_require__(87799),Hs=__webpack_require__(79395),$i=__webpack_require__(26771),es=__webpack_require__(52035),Ll=__webpack_require__(50268),hl=__webpack_require__(88089),ho=__webpack_require__(82493),Ul=__webpack_require__(78398),Ml=__webpack_require__(18767),Ri=__webpack_require__(50110),Wo=__webpack_require__(7314),fo=__webpack_require__(4062),ts=__webpack_require__(29911),il=__webpack_require__(10682),Jo=__webpack_require__(44518),Jl=__webpack_require__(44267),zs=__webpack_require__(18291),Cs=__webpack_require__(50772),oo=__webpack_require__(79253),qi=__webpack_require__(30417),Ta=__webpack_require__(78410),la=__webpack_require__(29746),Os=__webpack_require__(85922),Vl=__webpack_require__(29593),ns=__webpack_require__(48383),yu=__webpack_require__(18974),Fs=__webpack_require__(67295),bs=__webpack_require__(7340),cs=__webpack_require__(72563),Gl=__webpack_require__(22499),Dl=__webpack_require__(72260),fs=__webpack_require__(82077),ws=__webpack_require__(33288),ps=__webpack_require__(5257),Za=__webpack_require__(28220),ru=__webpack_require__(20108),Es=__webpack_require__(80628),xu=__webpack_require__(51340),Yu=__webpack_require__(347),ol=__webpack_require__(11489),Sc=__webpack_require__(2803),Pu=__webpack_require__(74055),Lc=__webpack_require__(85924),Ql=__webpack_require__(14557),ms=__webpack_require__(3376),cu=__webpack_require__(646),Tc=__webpack_require__(18295),Ic=__webpack_require__(62619),bu=__webpack_require__(13080),Dc=__webpack_require__(60598),kc=__webpack_require__(36985),du=__webpack_require__(51213),ql=__webpack_require__(34142),wu=__webpack_require__(11115),Qs=__webpack_require__(56457),Cl=__webpack_require__(43656),Al=__webpack_require__(4489),eu=__webpack_require__(69320),Eu=__webpack_require__(54781),Nc=__webpack_require__(94332),Mc=__webpack_require__(51223),fd=__webpack_require__(91442),Ad=__webpack_require__(88047),jo=__webpack_require__(12886),aa=__webpack_require__(97195),go=__webpack_require__(28954),Ui=__webpack_require__(62712),qs=__webpack_require__(79693),Io=__webpack_require__(41102),Nu=__webpack_require__(80745),Cc=__webpack_require__(14320),Mo=__webpack_require__(57215),Zc=__webpack_require__(8339),gc=__webpack_require__(7763),Pd=__webpack_require__(76828),Wc=__webpack_require__(26810),kl=__webpack_require__(80385),zt=__webpack_require__(52687),Ft=__webpack_require__(84289),Tn=__webpack_require__(67226),vr=__webpack_require__(22509),cr=__webpack_require__(90250),Nr=__webpack_require__(53077),Lr=__webpack_require__(43037),Qr=__webpack_require__(25940),ui=__webpack_require__(93914),Ii=__webpack_require__(90885),Ur=__webpack_require__(75271),Ai=__webpack_require__(38751),Zi=__webpack_require__(5791),Ji=__webpack_require__(69536);function no(Ti){var Ei=Ti.id,fr=Ti.basename,nr=Ti.cb,_r=new URLSearchParams({route:Ei,url:window.location.href}).toString(),ei="".concat(Lo(window.umiServerLoaderPath||fr),"__serverLoader?").concat(_r);fetch(ei,{credentials:"include"}).then(function(Xr){return Xr.json()}).then(nr).catch(console.error)}function Lo(){var Ti=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Ti.endsWith("/")?Ti:"".concat(Ti,"/")}var mo=__webpack_require__(48385),Po=__webpack_require__(56920),I=__webpack_require__(91744),c=["content"],f=["content"],T=/^(http:|https:)?\/\//;function W(Ti){return T.test(Ti)||Ti.startsWith("/")&&!Ti.startsWith("/*")||Ti.startsWith("./")||Ti.startsWith("../")}var me=function(){return Ur.createElement("noscript",{dangerouslySetInnerHTML:{__html:"<b>Enable JavaScript to run this app.</b>"}})},ze=function(Ei){var fr,nr=Ei.loaderData,_r=Ei.htmlPageOpts,ei=Ei.manifest,Xr=(ei==null||(fr=ei.assets)===null||fr===void 0?void 0:fr["umi.css"])||"";return Ur.createElement("script",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:"window.__UMI_LOADER_DATA__ = ".concat(JSON.stringify(nr||{}),"; window.__UMI_METADATA_LOADER_DATA__ = ").concat(JSON.stringify(_r||{}),"; window.__UMI_BUILD_ClIENT_CSS__ = '").concat(Xr,"'")}})};function tt(Ti){var Ei=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof Ti=="string")return W(Ti)?(0,ui.Z)({src:Ti},Ei):{content:Ti};if((0,I.Z)(Ti)==="object")return(0,ui.Z)((0,ui.Z)({},Ti),Ei);throw new Error("Invalid script type: ".concat((0,I.Z)(Ti)))}function It(Ti){return W(Ti)?{type:"link",href:Ti}:{type:"style",content:Ti}}var ne=function(Ei){var fr,nr,_r,ei,Xr,fi,Vi=Ei.htmlPageOpts;return Ur.createElement(Ur.Fragment,null,(Vi==null?void 0:Vi.title)&&Ur.createElement("title",null,Vi.title),Vi==null||(fr=Vi.favicons)===null||fr===void 0?void 0:fr.map(function(vo,Ro){return Ur.createElement("link",{key:Ro,rel:"shortcut icon",href:vo})}),(Vi==null?void 0:Vi.description)&&Ur.createElement("meta",{name:"description",content:Vi.description}),(Vi==null||(nr=Vi.keywords)===null||nr===void 0?void 0:nr.length)&&Ur.createElement("meta",{name:"keywords",content:Vi.keywords.join(",")}),Vi==null||(_r=Vi.metas)===null||_r===void 0?void 0:_r.map(function(vo){return Ur.createElement("meta",{key:vo.name,name:vo.name,content:vo.content})}),Vi==null||(ei=Vi.links)===null||ei===void 0?void 0:ei.map(function(vo,Ro){return Ur.createElement("link",(0,Po.Z)({key:Ro},vo))}),Vi==null||(Xr=Vi.styles)===null||Xr===void 0?void 0:Xr.map(function(vo,Ro){var _a=It(vo),ca=_a.type,ta=_a.href,ds=_a.content;if(ca==="link")return Ur.createElement("link",{key:Ro,rel:"stylesheet",href:ta});if(ca==="style")return Ur.createElement("style",{key:Ro},ds)}),Vi==null||(fi=Vi.headScripts)===null||fi===void 0?void 0:fi.map(function(vo,Ro){var _a=tt(vo),ca=_a.content,ta=(0,mo.Z)(_a,c);return Ur.createElement("script",(0,Po.Z)({dangerouslySetInnerHTML:{__html:ca},key:Ro},ta))}))};function ge(Ti){var Ei,fr=Ti.children,nr=Ti.loaderData,_r=Ti.manifest,ei=Ti.htmlPageOpts,Xr=Ti.__INTERNAL_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fi=Ti.mountElementId;if(Xr!=null&&Xr.pureHtml)return Ur.createElement("html",null,Ur.createElement("head",null),Ur.createElement("body",null,Ur.createElement(me,null),Ur.createElement("div",{id:fi},fr),Ur.createElement(ze,{manifest:_r,loaderData:nr,htmlPageOpts:ei})));if(Xr!=null&&Xr.pureApp)return Ur.createElement(Ur.Fragment,null,fr);var Vi=typeof window=="undefined"?_r==null?void 0:_r.assets["umi.css"]:window.__UMI_BUILD_ClIENT_CSS__;return Ur.createElement("html",{suppressHydrationWarning:!0,lang:(ei==null?void 0:ei.lang)||"en"},Ur.createElement("head",null,Ur.createElement("meta",{charSet:"utf-8"}),Ur.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),Vi&&Ur.createElement("link",{suppressHydrationWarning:!0,rel:"stylesheet",href:Vi}),Ur.createElement(ne,{htmlPageOpts:ei})),Ur.createElement("body",null,Ur.createElement(me,null),Ur.createElement("div",{id:fi},fr),Ur.createElement(ze,{manifest:_r,loaderData:nr,htmlPageOpts:ei}),ei==null||(Ei=ei.scripts)===null||Ei===void 0?void 0:Ei.map(function(vo,Ro){var _a=tt(vo),ca=_a.content,ta=(0,mo.Z)(_a,f);return Ur.createElement("script",(0,Po.Z)({dangerouslySetInnerHTML:{__html:ca},key:Ro},ta))})))}var xe=__webpack_require__(83123),xt=["redirect"];function pn(Ti){var Ei=Ti.routesById,fr=Ti.parentId,nr=Ti.routeComponents,_r=Ti.useStream,ei=_r===void 0?!0:_r;return Object.keys(Ei).filter(function(Xr){return Ei[Xr].parentId===fr}).map(function(Xr){var fi=Hn((0,ui.Z)((0,ui.Z)({route:Ei[Xr],routeComponent:nr[Xr],loadingComponent:Ti.loadingComponent,reactRouter5Compat:Ti.reactRouter5Compat},Ti.reactRouter5Compat&&{hasChildren:Object.keys(Ei).filter(function(vo){return Ei[vo].parentId===Xr}).length>0}),{},{useStream:ei})),Vi=pn({routesById:Ei,routeComponents:nr,parentId:fi.id,loadingComponent:Ti.loadingComponent,reactRouter5Compat:Ti.reactRouter5Compat,useStream:ei});return Vi.length>0&&(fi.children=Vi,fi.routes=Vi),fi})}function Mn(Ti){var Ei=(0,Zi.UO)(),fr=(0,Zi.Gn)(Ti.to,Ei),nr=(0,Ji.T$)(),_r=(0,Zi.TH)();if(nr!=null&&nr.keepQuery){var ei=_r.search+_r.hash;fr+=ei}var Xr=(0,ui.Z)((0,ui.Z)({},Ti),{},{to:fr});return Ur.createElement(Zi.Fg,(0,Po.Z)({replace:!0},Xr))}function Hn(Ti){var Ei=Ti.route,fr=Ti.useStream,nr=fr===void 0?!0:fr,_r=Ei.redirect,ei=(0,mo.Z)(Ei,xt),Xr=Ti.reactRouter5Compat?tr:Ir;return(0,ui.Z)({element:_r?Ur.createElement(Mn,{to:_r}):Ur.createElement(xe.X.Provider,{value:{route:Ti.route}},Ur.createElement(Xr,{loader:Ur.memo(Ti.routeComponent),loadingComponent:Ti.loadingComponent||Qn,hasChildren:Ti.hasChildren,useStream:nr}))},ei)}function Qn(){return Ur.createElement("div",null)}function tr(Ti){var Ei=(0,xe.Q)(),fr=Ei.route,nr=(0,Ji.Ov)(),_r=nr.history,ei=nr.clientRoutes,Xr=(0,Zi.UO)(),fi={params:Xr,isExact:!0,path:fr.path,url:_r.location.pathname},Vi=Ti.loader,vo={location:_r.location,match:fi,history:_r,params:Xr,route:fr,routes:ei};return Ti.useStream?Ur.createElement(Ur.Suspense,{fallback:Ur.createElement(Ti.loadingComponent,null)},Ur.createElement(Vi,vo,Ti.hasChildren&&Ur.createElement(Zi.j3,null))):Ur.createElement(Vi,vo,Ti.hasChildren&&Ur.createElement(Zi.j3,null))}function Ir(Ti){var Ei=Ti.loader;return Ti.useStream?Ur.createElement(Ur.Suspense,{fallback:Ur.createElement(Ti.loadingComponent,null)},Ur.createElement(Ei,null)):Ur.createElement(Ei,null)}var oi=null;function ni(){return oi}function _i(Ti){var Ei=Ti.history,fr=Ur.useState({action:Ei.action,location:Ei.location}),nr=(0,Ii.Z)(fr,2),_r=nr[0],ei=nr[1];return(0,Ur.useLayoutEffect)(function(){return Ei.listen(ei)},[Ei]),(0,Ur.useLayoutEffect)(function(){function Xr(fi){Ti.pluginManager.applyPlugins({key:"onRouteChange",type:"event",args:{routes:Ti.routes,clientRoutes:Ti.clientRoutes,location:fi.location,action:fi.action,basename:Ti.basename,isFirst:!!fi.isFirst}})}return Xr({location:_r.location,action:_r.action,isFirst:!0}),Ei.listen(Xr)},[Ei,Ti.routes,Ti.clientRoutes]),Ur.createElement(Zi.F0,{navigator:Ei,location:_r.location,basename:Ti.basename},Ti.children)}function wi(){var Ti=(0,Ji.Ov)(),Ei=Ti.clientRoutes;return(0,Zi.V$)(Ei)}var Si=["innerProvider","i18nProvider","accessProvider","dataflowProvider","outerProvider","rootContainer"],So=function(Ei,fr){var nr=Ei.basename||"/",_r=pn({routesById:Ei.routes,routeComponents:Ei.routeComponents,loadingComponent:Ei.loadingComponent,reactRouter5Compat:Ei.reactRouter5Compat,useStream:Ei.useStream});Ei.pluginManager.applyPlugins({key:"patchClientRoutes",type:"event",args:{routes:_r}});for(var ei=Ur.createElement(_i,{basename:nr,pluginManager:Ei.pluginManager,routes:Ei.routes,clientRoutes:_r,history:Ei.history},fr),Xr=0,fi=Si;Xr<fi.length;Xr++){var Vi=fi[Xr];ei=Ei.pluginManager.applyPlugins({type:"modify",key:Vi,initialValue:ei,args:{routes:Ei.routes,history:Ei.history,plugin:Ei.pluginManager}})}var vo=function(){var _a=(0,Ur.useState)({}),ca=(0,Ii.Z)(_a,2),ta=ca[0],ds=ca[1],iu=(0,Ur.useState)(window.__UMI_LOADER_DATA__||{}),Ks=(0,Ii.Z)(iu,2),Ou=Ks[0],bl=Ks[1],vs=(0,Ur.useCallback)(function(Co,Pl){var As,nl=(((As=(0,Zi.fp)(_r,Co,nr))===null||As===void 0?void 0:As.map(function(Ol){return Ol.route.id}))||[]).filter(Boolean);nl.forEach(function(Ol){var Ac,Su;if(window.__umi_route_prefetch__){var Bs,hs=(Bs=Ei.routeComponents[Ol])===null||Bs===void 0||(Bs=Bs._payload)===null||Bs===void 0?void 0:Bs._result;typeof hs=="function"&&hs()}var ou=(Ac=Ei.routes[Ol])===null||Ac===void 0?void 0:Ac.clientLoader,fl=!!ou,pl=(Su=Ei.routes[Ol])===null||Su===void 0?void 0:Su.hasServerLoader;!Pl&&pl&&!fl&&!window.__UMI_LOADER_DATA__&&no({id:Ol,basename:nr,cb:function(sc){Ur.startTransition(function(){bl(function(hu){return(0,ui.Z)((0,ui.Z)({},hu),{},(0,Qr.Z)({},Ol,sc))})})}});var Rl=!!ta[Ol],au=fl&&ou.hydrate||!pl,Xu=pl&&!window.__UMI_LOADER_DATA__;fl&&!Rl&&(au||Xu)&&ou({serverLoader:function(){return no({id:Ol,basename:nr,cb:function(hu){Ur.startTransition(function(){bl(function(vc){return(0,ui.Z)((0,ui.Z)({},vc),{},(0,Qr.Z)({},Ol,hu))})})}})}}).then(function(Ys){ds(function(sc){return(0,ui.Z)((0,ui.Z)({},sc),{},(0,Qr.Z)({},Ol,Ys))})})})},[ta]);return(0,Ur.useEffect)(function(){return vs(window.location.pathname,!0),Ei.history.listen(function(Co){vs(Co.location.pathname)})},[]),(0,Ur.useLayoutEffect)(function(){typeof Ei.callback=="function"&&Ei.callback()},[]),Ur.createElement(Ji.Il.Provider,{value:{routes:Ei.routes,routeComponents:Ei.routeComponents,clientRoutes:_r,pluginManager:Ei.pluginManager,rootElement:Ei.rootElement,basename:nr,clientLoaderData:ta,serverLoaderData:Ou,preloadRoute:vs,history:Ei.history}},ei)};return vo};function io(Ti){var Ei=Ti.rootElement||document.getElementById("root"),fr=So(Ti,Ur.createElement(wi,null));if(Ti.components)return fr;if(Ti.hydrate){var nr=window.__UMI_LOADER_DATA__||{},_r=window.__UMI_METADATA_LOADER_DATA__||{},ei={metadata:_r,loaderData:nr,mountElementId:Ti.mountElementId},Xr=Ti.__INTERNAL_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.pureApp||Ti.__INTERNAL_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.pureHtml;Ai.hydrateRoot(Xr?Ei:document,Xr?Ur.createElement(fr,null):Ur.createElement(ge,ei,Ur.createElement(fr,null)));return}if(Ai.createRoot){oi=Ai.createRoot(Ei),oi.render(Ur.createElement(fr,null));return}Ai.render(Ur.createElement(fr,null),Ei)}function Wi(){return xo.apply(this,arguments)}function xo(){return xo=C()(Q()().mark(function Ti(){var Ei;return Q()().wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return Ei={404:{id:"404",path:"*",parentId:"DocLayout"},"dumi-context-layout":{id:"dumi-context-layout",path:"/",isLayout:!0},DocLayout:{id:"DocLayout",path:"/",parentId:"dumi-context-layout",isLayout:!0},"docs/components/mousePositionControl":{path:"components/mouse-position-control",id:"docs/components/mousePositionControl",parentId:"DocLayout"},"docs/components/geometryCalculation":{path:"components/geometry-calculation",id:"docs/components/geometryCalculation",parentId:"DocLayout"},"docs/components/spatialCalculation":{path:"components/spatial-calculation",id:"docs/components/spatialCalculation",parentId:"DocLayout"},"docs/components/fullscreenControl":{path:"components/fullscreen-control",id:"docs/components/fullscreenControl",parentId:"DocLayout"},"docs/components/navigationControl":{path:"components/navigation-control",id:"docs/components/navigationControl",parentId:"DocLayout"},"docs/components/backgroundLayer":{path:"components/background-layer",id:"docs/components/backgroundLayer",parentId:"DocLayout"},"docs/components/spatialAnalysis":{path:"components/spatial-analysis",id:"docs/components/spatialAnalysis",parentId:"DocLayout"},"docs/components/customControl":{path:"components/custom-control",id:"docs/components/customControl",parentId:"DocLayout"},"docs/components/scaleControl":{path:"components/scale-control",id:"docs/components/scaleControl",parentId:"DocLayout"},"docs/components/circleLayer":{path:"components/circle-layer",id:"docs/components/circleLayer",parentId:"DocLayout"},"docs/components/drawControl":{path:"components/draw-control",id:"docs/components/drawControl",parentId:"DocLayout"},"docs/components/rasterLayer":{path:"components/raster-layer",id:"docs/components/rasterLayer",parentId:"DocLayout"},"docs/components/fillLayer":{path:"components/fill-layer",id:"docs/components/fillLayer",parentId:"DocLayout"},"docs/components/lineLayer":{path:"components/line-layer",id:"docs/components/lineLayer",parentId:"DocLayout"},"docs/components/heatmap":{path:"components/heatmap",id:"docs/components/heatmap",parentId:"DocLayout"},"docs/base/introduction":{path:"base/introduction",id:"docs/base/introduction",parentId:"DocLayout"},"docs/components/marker":{path:"components/marker",id:"docs/components/marker",parentId:"DocLayout"},"docs/components/popup":{path:"components/popup",id:"docs/components/popup",parentId:"DocLayout"},"docs/preview/control":{path:"preview/control",id:"docs/preview/control",parentId:"DocLayout"},"docs/preview/overlap":{path:"preview/overlap",id:"docs/preview/overlap",parentId:"DocLayout"},"docs/components/map":{path:"components/map",id:"docs/components/map",parentId:"DocLayout"},"docs/preview/layer":{path:"preview/layer",id:"docs/preview/layer",parentId:"DocLayout"},"docs/preview/tool":{path:"preview/tool",id:"docs/preview/tool",parentId:"DocLayout"},"docs/preview/map":{path:"preview/map",id:"docs/preview/map",parentId:"DocLayout"},"docs/base/start":{path:"base/start",id:"docs/base/start",parentId:"DocLayout"},"docs/index":{path:"",id:"docs/index",parentId:"DocLayout"},"demo-render":{id:"demo-render",path:"~demos/:id",parentId:"dumi-context-layout",prerender:!1}},nr.abrupt("return",{routes:Ei,routeComponents:{404:Ur.lazy(function(){return __webpack_require__.e(543).then(__webpack_require__.bind(__webpack_require__,21694))}),"dumi-context-layout":Ur.lazy(function(){return __webpack_require__.e(923).then(__webpack_require__.bind(__webpack_require__,84455))}),DocLayout:Ur.lazy(function(){return Promise.all([__webpack_require__.e(256),__webpack_require__.e(519)]).then(__webpack_require__.bind(__webpack_require__,22571))}),"docs/components/mousePositionControl":Ur.lazy(function(){return __webpack_require__.e(65).then(__webpack_require__.bind(__webpack_require__,71738))}),"docs/components/geometryCalculation":Ur.lazy(function(){return __webpack_require__.e(775).then(__webpack_require__.bind(__webpack_require__,65999))}),"docs/components/spatialCalculation":Ur.lazy(function(){return __webpack_require__.e(61).then(__webpack_require__.bind(__webpack_require__,19204))}),"docs/components/fullscreenControl":Ur.lazy(function(){return __webpack_require__.e(611).then(__webpack_require__.bind(__webpack_require__,18891))}),"docs/components/navigationControl":Ur.lazy(function(){return __webpack_require__.e(182).then(__webpack_require__.bind(__webpack_require__,57248))}),"docs/components/backgroundLayer":Ur.lazy(function(){return __webpack_require__.e(159).then(__webpack_require__.bind(__webpack_require__,97283))}),"docs/components/spatialAnalysis":Ur.lazy(function(){return __webpack_require__.e(194).then(__webpack_require__.bind(__webpack_require__,72461))}),"docs/components/customControl":Ur.lazy(function(){return __webpack_require__.e(793).then(__webpack_require__.bind(__webpack_require__,64435))}),"docs/components/scaleControl":Ur.lazy(function(){return __webpack_require__.e(802).then(__webpack_require__.bind(__webpack_require__,89731))}),"docs/components/circleLayer":Ur.lazy(function(){return __webpack_require__.e(380).then(__webpack_require__.bind(__webpack_require__,35003))}),"docs/components/drawControl":Ur.lazy(function(){return __webpack_require__.e(615).then(__webpack_require__.bind(__webpack_require__,80585))}),"docs/components/rasterLayer":Ur.lazy(function(){return __webpack_require__.e(157).then(__webpack_require__.bind(__webpack_require__,77550))}),"docs/components/fillLayer":Ur.lazy(function(){return __webpack_require__.e(44).then(__webpack_require__.bind(__webpack_require__,24222))}),"docs/components/lineLayer":Ur.lazy(function(){return __webpack_require__.e(393).then(__webpack_require__.bind(__webpack_require__,14129))}),"docs/components/heatmap":Ur.lazy(function(){return __webpack_require__.e(957).then(__webpack_require__.bind(__webpack_require__,95107))}),"docs/base/introduction":Ur.lazy(function(){return __webpack_require__.e(544).then(__webpack_require__.bind(__webpack_require__,15724))}),"docs/components/marker":Ur.lazy(function(){return __webpack_require__.e(236).then(__webpack_require__.bind(__webpack_require__,57230))}),"docs/components/popup":Ur.lazy(function(){return __webpack_require__.e(752).then(__webpack_require__.bind(__webpack_require__,20440))}),"docs/preview/control":Ur.lazy(function(){return __webpack_require__.e(92).then(__webpack_require__.bind(__webpack_require__,86625))}),"docs/preview/overlap":Ur.lazy(function(){return __webpack_require__.e(855).then(__webpack_require__.bind(__webpack_require__,58650))}),"docs/components/map":Ur.lazy(function(){return __webpack_require__.e(951).then(__webpack_require__.bind(__webpack_require__,3910))}),"docs/preview/layer":Ur.lazy(function(){return __webpack_require__.e(473).then(__webpack_require__.bind(__webpack_require__,24212))}),"docs/preview/tool":Ur.lazy(function(){return __webpack_require__.e(894).then(__webpack_require__.bind(__webpack_require__,65670))}),"docs/preview/map":Ur.lazy(function(){return __webpack_require__.e(969).then(__webpack_require__.bind(__webpack_require__,32305))}),"docs/base/start":Ur.lazy(function(){return __webpack_require__.e(186).then(__webpack_require__.bind(__webpack_require__,84727))}),"docs/index":Ur.lazy(function(){return __webpack_require__.e(935).then(__webpack_require__.bind(__webpack_require__,30848))}),"demo-render":Ur.lazy(function(){return __webpack_require__.e(9).then(__webpack_require__.bind(__webpack_require__,84681))})}});case 2:case"end":return nr.stop()}},Ti)})),xo.apply(this,arguments)}var Qi=__webpack_require__(67137),Ho=__webpack_require__(28877),La=__webpack_require__(23920),as="/react-mapboxgl-zt/",Ja=!1;function Rs(){return Go.apply(this,arguments)}function Go(){return Go=C()(Q()().mark(function Ti(){var Ei,fr,nr,_r,ei,Xr,fi,Vi;return Q()().wrap(function(Ro){for(;;)switch(Ro.prev=Ro.next){case 0:return Ei=(0,Nr.gD)(),Ro.next=3,Wi(Ei);case 3:return fr=Ro.sent,nr=fr.routes,_r=fr.routeComponents,Ro.next=8,Ei.applyPlugins({key:"patchRoutes",type:La.Ac.event,args:{routes:nr,routeComponents:_r}});case 8:return ei=Ei.applyPlugins({key:"modifyContextOpts",type:La.Ac.modify,initialValue:{}}),Xr=ei.basename||"/react-mapboxgl-zt/",fi=ei.historyType||"browser",Vi=(0,Qi.fi)(E()({type:fi,basename:Xr},ei.historyOpts)),Ro.abrupt("return",Ei.applyPlugins({key:"render",type:La.Ac.compose,initialValue:function(){var ca={useStream:!0,routes:nr,routeComponents:_r,pluginManager:Ei,mountElementId:"root",rootElement:ei.rootElement||document.getElementById("root"),loadingComponent:Ho.Z,publicPath:as,runtimePublicPath:Ja,history:Vi,historyType:fi,basename:Xr,__INTERNAL_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{pureApp:!1,pureHtml:!1},callback:ei.callback},ta=Ei.applyPlugins({key:"modifyClientRenderOpts",type:La.Ac.modify,initialValue:ca});return io(ta)}})());case 13:case"end":return Ro.stop()}},Ti)})),Go.apply(this,arguments)}typeof history!="undefined"&&location.pathname.length>1&&location.pathname.endsWith("/")&&history.replaceState({},"",location.pathname.slice(0,-1)+location.search+location.hash),function(){var Ti=typeof navigator!="undefined"&&navigator.cookieEnabled&&typeof window.localStorage!="undefined"&&localStorage.getItem("dumi:prefers-color")||"light",Ei=typeof window!="undefined"&&window.matchMedia("(prefers-color-scheme: dark)").matches,fr=["light","dark","auto"];typeof document!="undefined"&&document.documentElement.setAttribute("data-prefers-color",Ti===fr[2]?Ei?fr[1]:fr[0]:fr.indexOf(Ti)>-1?Ti:fr[0])}(),Rs(),typeof window!="undefined"&&(window.g_umi={version:"4.4.4"}),(0,Lr.rl)((0,Nr.We)())})()})();
}());